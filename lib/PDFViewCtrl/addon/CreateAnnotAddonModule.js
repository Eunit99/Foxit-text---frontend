!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PDFViewCtrl"),require("jquery")):"function"==typeof define&&define.amd?define(["PDFViewCtrl","jquery"],e):"object"==typeof exports?exports.PDFViewCtrl_CreateAnnotAddonModule=e(require("PDFViewCtrl"),require("jquery")):t.PDFViewCtrl_CreateAnnotAddonModule=e(t.PDFViewCtrl,t.jQuery)}(self,(function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=271)}([function(e,n){e.exports=t},function(t,e,n){var r=n(127);t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(179))},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,n.apply(this,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(136),o=n(185),i=n(102),a=n(138);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(74),o=Function.prototype,i=o.bind,a=o.call,s=r&&i.bind(a,a);t.exports=r?function(t){return t&&s(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(101),o=n(24),i=n(186);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(t,e,n){"use strict";var r,o,i,a=n(172),s=n(14),c=n(2),u=n(11),f=n(19),l=n(20),h=n(47),d=n(62),p=n(33),v=n(24),g=n(23).f,m=n(45),y=n(84),w=n(56),x=n(12),b=n(93),A=c.Int8Array,S=A&&A.prototype,P=c.Uint8ClampedArray,R=P&&P.prototype,E=A&&y(A),T=S&&y(S),C=Object.prototype,_=c.TypeError,I=x("toStringTag"),k=b("TYPED_ARRAY_TAG"),M=b("TYPED_ARRAY_CONSTRUCTOR"),L=a&&!!w&&"Opera"!==h(c.opera),D=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},N=function(t){if(!f(t))return!1;var e=h(t);return l(O,e)||l(V,e)};for(r in O)(i=(o=c[r])&&o.prototype)?p(i,M,o):L=!1;for(r in V)(i=(o=c[r])&&o.prototype)&&p(i,M,o);if((!L||!u(E)||E===Function.prototype)&&(E=function(){throw _("Incorrect invocation")},L))for(r in O)c[r]&&w(c[r],E);if((!L||!T||T===C)&&(T=E.prototype,L))for(r in O)c[r]&&w(c[r].prototype,T);if(L&&y(R)!==T&&w(R,T),s&&!l(T,I))for(r in D=!0,g(T,I,{get:function(){return f(this)?this[k]:void 0}}),O)c[r]&&p(c[r],k,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_CONSTRUCTOR:M,TYPED_ARRAY_TAG:D&&k,aTypedArray:function(t){if(N(t))return t;throw _("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!w||m(E,t)))return t;throw _(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(s){if(n)for(var o in O){var i=c[o];if(i&&l(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=e}catch(t){}}}T[t]&&!n||v(T,t,n?e:L&&S[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(s){if(w){if(n)for(r in O)if((o=c[r])&&l(o,t))try{delete o[t]}catch(t){}if(E[t]&&!n)return;try{return v(E,t,n?e:L&&E[t]||e)}catch(t){}}for(r in O)!(o=c[r])||o[t]&&!n||v(o,t,e)}},isView:function(t){if(!f(t))return!1;var e=h(t);return"DataView"===e||l(O,e)||l(V,e)},isTypedArray:N,TypedArray:E,TypedArrayPrototype:T}},function(t,e,n){var r=n(2),o=n(48).f,i=n(33),a=n(24),s=n(92),c=n(182),u=n(98);t.exports=function(t,e){var n,f,l,h,d,p=t.target,v=t.global,g=t.stat;if(n=v?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(f in e){if(h=e[f],l=t.noTargetGet?(d=o(n,f))&&d.value:n[f],!u(v?f:p+(g?".":"#")+f,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;c(h,l)}(t.sham||l&&l.sham)&&i(h,"sham",!0),a(n,f,h,t)}}},function(t,e){t.exports=function(t){return"function"==typeof t}},function(t,e,n){var r=n(2),o=n(90),i=n(20),a=n(93),s=n(131),c=n(130),u=o("wks"),f=r.Symbol,l=f&&f.for,h=c?f:f&&f.withoutSetter||a;t.exports=function(t){if(!i(u,t)||!s&&"string"!=typeof u[t]){var e="Symbol."+t;s&&i(f,t)?u[t]=f[t]:u[t]=c&&l?l(e):h(e)}return u[t]}},function(t,e,n){var r=n(74),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},function(t,e,n){var r=n(5);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){var r=n(2),o=n(19),i=r.String,a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not an object")}},function(t,e,n){"use strict";var r=n(10),o=n(2),i=n(5),a=n(99),s=n(19),c=n(22),u=n(21),f=n(63),l=n(100),h=n(64),d=n(12),p=n(61),v=d("isConcatSpreadable"),g=o.TypeError,m=p>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),y=h("concat"),w=function(t){if(!s(t))return!1;var e=t[v];return void 0!==e?!!e:a(t)};r({target:"Array",proto:!0,forced:!m||!y},{concat:function(t){var e,n,r,o,i,a=c(this),s=l(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(w(i=-1===e?a:arguments[e])){if(h+(o=u(i))>9007199254740991)throw g("Maximum allowed index exceeded");for(n=0;n<o;n++,h++)n in i&&f(s,h,i[n])}else{if(h>=9007199254740991)throw g("Maximum allowed index exceeded");f(s,h++,i)}return s.length=h,s}})},function(t,e,n){var r=n(2),o=n(157),i=n(158),a=n(210),s=n(33),c=function(t){if(t&&t.forEach!==a)try{s(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in o)o[u]&&c(r[u]&&r[u].prototype);c(i)},function(t,e,n){var r=n(208),o=n(160),i=n(102),a=n(209);t.exports=function(t){return r(t)||o(t)||i(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(11);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},function(t,e,n){var r=n(6),o=n(22),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},function(t,e,n){var r=n(38);t.exports=function(t){return r(t.length)}},function(t,e,n){var r=n(2),o=n(42),i=r.Object;t.exports=function(t){return i(o(t))}},function(t,e,n){var r=n(2),o=n(14),i=n(132),a=n(133),s=n(15),c=n(75),u=r.TypeError,f=Object.defineProperty,l=Object.getOwnPropertyDescriptor;e.f=o?a?function(t,e,n){if(s(t),e=c(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&"writable"in n&&!n.writable){var r=l(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return f(t,e,n)}:f:function(t,e,n){if(s(t),e=c(e),s(n),i)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(2),o=n(11),i=n(20),a=n(33),s=n(92),c=n(78),u=n(37),f=n(52).CONFIGURABLE,l=u.get,h=u.enforce,d=String(String).split("String");(t.exports=function(t,e,n,c){var u,l=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,v=!!c&&!!c.noTargetGet,g=c&&void 0!==c.name?c.name:e;o(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(n,"name")||f&&n.name!==g)&&a(n,"name",g),(u=h(n)).source||(u.source=d.join("string"==typeof g?g:""))),t!==r?(l?!v&&t[e]&&(p=!0):delete t[e],p?t[e]=n:a(t,e,n)):p?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return o(this)&&l(this).source||c(this)}))},function(t,e,n){"use strict";var r=n(10),o=n(81);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(t,e,n){"use strict";var r=n(10),o=n(31).map;r({target:"Array",proto:!0,forced:!n(64)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){n(196),n(203),n(204),n(205),n(206),n(207)},function(t,e,n){var r=n(14),o=n(52).EXISTS,i=n(6),a=n(23).f,s=Function.prototype,c=i(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=i(u.exec);r&&!o&&a(s,"name",{configurable:!0,get:function(){try{return f(u,c(this))[1]}catch(t){return""}}})},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){var e=+t;return e!=e||0===e?0:(e>0?r:n)(e)}},function(t,e,n){var r=n(2),o=n(47),i=r.String;t.exports=function(t){if("Symbol"===o(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},function(t,e,n){var r=n(44),o=n(6),i=n(60),a=n(22),s=n(21),c=n(100),u=o([].push),f=function(t){var e=1==t,n=2==t,o=3==t,f=4==t,l=6==t,h=7==t,d=5==t||l;return function(p,v,g,m){for(var y,w,x=a(p),b=i(x),A=r(v,g),S=s(b),P=0,R=m||c,E=e?R(p,S):n||h?R(p,0):void 0;S>P;P++)if((d||P in b)&&(w=A(y=b[P],P,x),t))if(e)E[P]=w;else if(w)switch(t){case 3:return!0;case 5:return y;case 6:return P;case 2:u(E,y)}else switch(t){case 4:return!1;case 7:u(E,y)}return l?-1:o||f?f:E}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},function(t,e){t.exports=!1},function(t,e,n){var r=n(14),o=n(23),i=n(49);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(60),o=n(42);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(2),o=n(11),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},function(t,e,n){var r=n(2),o=n(11),i=n(62),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a function")}},function(t,e,n){var r,o,i,a=n(181),s=n(2),c=n(6),u=n(19),f=n(33),l=n(20),h=n(91),d=n(94),p=n(95),v=s.TypeError,g=s.WeakMap;if(a||h.state){var m=h.state||(h.state=new g),y=c(m.get),w=c(m.has),x=c(m.set);r=function(t,e){if(w(m,t))throw new v("Object already initialized");return e.facade=t,x(m,t,e),e},o=function(t){return y(m,t)||{}},i=function(t){return w(m,t)}}else{var b=d("state");p[b]=!0,r=function(t,e){if(l(t,b))throw new v("Object already initialized");return e.facade=t,f(t,b,e),e},o=function(t){return l(t,b)?t[b]:{}},i=function(t){return l(t,b)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=o(e)).type!==t)throw v("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(29),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){"use strict";var r=n(34),o=n(145),i=n(66),a=n(37),s=n(23).f,c=n(146),u=n(32),f=n(14),l=a.set,h=a.getterFor("Array Iterator");t.exports=c(Array,"Array",(function(t,e){l(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!u&&f&&"values"!==d.name)try{s(d,"name",{value:"values"})}catch(t){}},function(t,n){t.exports=e},function(t,e,n){t.exports=n(216)},function(t,e,n){var r=n(2).TypeError;t.exports=function(t){if(null==t)throw r("Can't call method on "+t);return t}},function(t,e,n){var r=n(29),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e,n){var r=n(6),o=n(36),i=n(74),a=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(6);t.exports=r({}.isPrototypeOf)},function(t,e,n){var r=n(35);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(2),o=n(101),i=n(11),a=n(50),s=n(12)("toStringTag"),c=r.Object,u="Arguments"==a(function(){return arguments}());t.exports=o?a:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=c(t),s))?n:u?a(e):"Object"==(r=a(e))&&i(e.callee)?"Arguments":r}},function(t,e,n){var r=n(14),o=n(13),i=n(128),a=n(49),s=n(34),c=n(75),u=n(20),f=n(132),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=c(e),f)try{return l(t,e)}catch(t){}if(u(t,e))return a(!o(i.f,t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(6),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},function(t,e,n){var r=n(36);t.exports=function(t,e){var n=t[e];return null==n?void 0:r(n)}},function(t,e,n){var r=n(14),o=n(20),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},function(t,e,n){var r,o=n(15),i=n(140),a=n(97),s=n(95),c=n(141),u=n(77),f=n(94),l=f("IE_PROTO"),h=function(){},d=function(t){return"<script>"+t+"<\/script>"},p=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e;v="undefined"!=typeof document?document.domain&&r?p(r):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):p(r);for(var n=a.length;n--;)delete v.prototype[a[n]];return v()};s[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=o(t),n=new h,h.prototype=null,n[l]=t):n=v(),void 0===e?n:i.f(n,e)}},function(t,e,n){var r=n(74),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},function(t,e,n){var r=n(23).f,o=n(20),i=n(12)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!o(t,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(6),o=n(15),i=n(195);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},function(t,e,n){var r=n(2);t.exports=r.Promise},function(t,e,n){var r=n(10),o=n(117),i=n(145);r({target:"Array",proto:!0},{fill:o}),i("fill")},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(2),o=n(6),i=n(5),a=n(50),s=r.Object,c=o("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?c(t,""):s(t)}:s},function(t,e,n){var r,o,i=n(2),a=n(46),s=i.process,c=i.Deno,u=s&&s.versions||c&&c.version,f=u&&u.v8;f&&(o=(r=f.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},function(t,e,n){var r=n(2).String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,e,n){"use strict";var r=n(75),o=n(23),i=n(49);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},function(t,e,n){var r=n(5),o=n(12),i=n(61),a=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r=n(15),o=n(144),i=n(12)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[i])?e:o(n)}},function(t,e){t.exports={}},function(t,e,n){var r=n(2),o=n(45),i=r.TypeError;t.exports=function(t,e){if(o(e,t))return t;throw i("Incorrect invocation")}},function(t,e,n){var r=n(2),o=n(57),i=n(11),a=n(98),s=n(78),c=n(12),u=n(202),f=n(32),l=n(61),h=o&&o.prototype,d=c("species"),p=!1,v=i(r.PromiseRejectionEvent),g=a("Promise",(function(){var t=s(o),e=t!==String(o);if(!e&&66===l)return!0;if(f&&(!h.catch||!h.finally))return!0;if(l>=51&&/native code/.test(t))return!1;var n=new o((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[d]=r,!(p=n.then((function(){}))instanceof r)||!e&&u&&!v}));t.exports={CONSTRUCTOR:g,REJECTION_EVENT:v,SUBCLASSING:p}},function(t,e,n){"use strict";var r=n(36),o=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new o(t)}},function(t,e,n){var r=n(47),o=n(51),i=n(66),a=n(12)("iterator");t.exports=function(t){if(null!=t)return o(t,a)||o(t,"@@iterator")||i[r(t)]}},function(t,e,n){"use strict";var r=n(108).charAt,o=n(30),i=n(37),a=n(146),s=i.set,c=i.getterFor("String Iterator");a(String,"String",(function(t){s(this,{type:"String Iterator",string:o(t),index:0})}),(function(){var t,e=c(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(2),o=n(157),i=n(158),a=n(39),s=n(33),c=n(12),u=c("iterator"),f=c("toStringTag"),l=a.values,h=function(t,e){if(t){if(t[u]!==l)try{s(t,u,l)}catch(e){t[u]=l}if(t[f]||s(t,f,e),o[e])for(var n in a)if(t[n]!==a[n])try{s(t,n,a[n])}catch(e){t[n]=a[n]}}};for(var d in o)h(r[d]&&r[d].prototype,d);h(i,"DOMTokenList")},function(t,e){function n(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function s(t){n(a,o,i,s,c,"next",t)}function c(t){n(a,o,i,s,c,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(5);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,e,n){var r=n(129),o=n(76);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},function(t,e,n){var r=n(2),o=n(35),i=n(11),a=n(45),s=n(130),c=r.Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,c(t))}},function(t,e,n){var r=n(2),o=n(19),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(6),o=n(11),i=n(91),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},function(t,e,n){var r=n(134),o=n(97).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(6),o=n(5),i=n(11),a=n(47),s=n(35),c=n(78),u=function(){},f=[],l=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=r(h.exec),p=!h.exec(u),v=function(t){if(!i(t))return!1;try{return l(u,f,t),!0}catch(t){return!1}},g=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(h,c(t))}catch(t){return!0}};g.sham=!0,t.exports=!l||o((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?g:v},function(t,e,n){"use strict";var r,o,i=n(13),a=n(6),s=n(30),c=n(103),u=n(139),f=n(90),l=n(53),h=n(37).get,d=n(189),p=n(190),v=f("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,m=g,y=a("".charAt),w=a("".indexOf),x=a("".replace),b=a("".slice),A=(o=/b*/g,i(g,r=/a/,"a"),i(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),S=u.BROKEN_CARET,P=void 0!==/()??/.exec("")[1];(A||P||S||d||p)&&(m=function(t){var e,n,r,o,a,u,f,d=this,p=h(d),R=s(t),E=p.raw;if(E)return E.lastIndex=d.lastIndex,e=i(m,E,R),d.lastIndex=E.lastIndex,e;var T=p.groups,C=S&&d.sticky,_=i(c,d),I=d.source,k=0,M=R;if(C&&(_=x(_,"y",""),-1===w(_,"g")&&(_+="g"),M=b(R,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==y(R,d.lastIndex-1))&&(I="(?: "+I+")",M=" "+M,k++),n=new RegExp("^(?:"+I+")",_)),P&&(n=new RegExp("^"+I+"$(?!\\s)",_)),A&&(r=d.lastIndex),o=i(g,C?n:d,M),C?o?(o.input=b(o.input,k),o[0]=b(o[0],k),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:A&&o&&(d.lastIndex=d.global?o.index+o[0].length:r),P&&o&&o.length>1&&i(v,o[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&T)for(o.groups=u=l(null),a=0;a<T.length;a++)u[(f=T[a])[0]]=o[f[1]];return o}),t.exports=m},function(t,e,n){"use strict";var r=n(54),o=n(13),i=n(6),a=n(106),s=n(193),c=n(15),u=n(42),f=n(65),l=n(107),h=n(38),d=n(30),p=n(51),v=n(83),g=n(109),m=n(81),y=n(139),w=n(5),x=y.UNSUPPORTED_Y,b=Math.min,A=[].push,S=i(/./.exec),P=i(A),R=i("".slice);a("split",(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=d(u(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[i];if(!s(t))return o(e,i,t,a);for(var c,f,l,h=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,y=new RegExp(t.source,p+"g");(c=o(m,y,i))&&!((f=y.lastIndex)>g&&(P(h,R(i,g,c.index)),c.length>1&&c.index<i.length&&r(A,h,v(c,1)),l=c[0].length,g=f,h.length>=a));)y.lastIndex===c.index&&y.lastIndex++;return g===i.length?!l&&S(y,"")||P(h,""):P(h,R(i,g)),h.length>a?v(h,0,a):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:o(e,this,t,n)}:e,[function(e,n){var r=u(this),a=null==e?void 0:p(e,t);return a?o(a,e,r,n):o(i,d(r),e,n)},function(t,r){var o=c(this),a=d(t),s=n(i,o,a,r,i!==e);if(s.done)return s.value;var u=f(o,RegExp),p=o.unicode,v=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(x?"g":"y"),m=new u(x?"^(?:"+o.source+")":o,v),y=void 0===r?4294967295:r>>>0;if(0===y)return[];if(0===a.length)return null===g(m,a)?[a]:[];for(var w=0,A=0,S=[];A<a.length;){m.lastIndex=x?0:A;var E,T=g(m,x?R(a,A):a);if(null===T||(E=b(h(m.lastIndex+(x?A:0)),a.length))===w)A=l(a,A,p);else{if(P(S,R(a,w,A)),S.length===y)return S;for(var C=1;C<=T.length-1;C++)if(P(S,T[C]),S.length===y)return S;A=w=E}}return P(S,R(a,w)),S}]}),!!w((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),x)},function(t,e,n){var r=n(2),o=n(43),i=n(21),a=n(63),s=r.Array,c=Math.max;t.exports=function(t,e,n){for(var r=i(t),u=o(e,r),f=o(void 0===n?r:n,r),l=s(c(f-u,0)),h=0;u<f;u++,h++)a(l,h,t[u]);return l.length=h,l}},function(t,e,n){var r=n(2),o=n(20),i=n(11),a=n(22),s=n(94),c=n(194),u=s("IE_PROTO"),f=r.Object,l=f.prototype;t.exports=c?f.getPrototypeOf:function(t){var e=a(t);if(o(e,u))return e[u];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof f?l:null}},function(t,e,n){var r=n(6);t.exports=r([].slice)},function(t,e,n){var r=n(2),o=n(13),i=n(36),a=n(15),s=n(62),c=n(70),u=r.TypeError;t.exports=function(t,e){var n=arguments.length<2?c(t):e;if(i(n))return a(o(n,t));throw u(s(t)+" is not iterable")}},function(t,e,n){"use strict";var r=n(10),o=n(2),i=n(6),a=n(29),s=n(162),c=n(213),u=n(5),f=o.RangeError,l=o.String,h=Math.floor,d=i(c),p=i("".slice),v=i(1..toFixed),g=function(t,e,n){return 0===e?n:e%2==1?g(t,e-1,n*t):g(t*t,e/2,n)},m=function(t,e,n){for(var r=-1,o=n;++r<6;)o+=e*t[r],t[r]=o%1e7,o=h(o/1e7)},y=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=h(r/e),r=r%e*1e7},w=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=l(t[e]);n=""===n?r:n+d("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:u((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!u((function(){v({})}))},{toFixed:function(t){var e,n,r,o,i=s(this),c=a(t),u=[0,0,0,0,0,0],h="",v="0";if(c<0||c>20)throw f("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return l(i);if(i<0&&(h="-",i=-i),i>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(i*g(2,69,1))-69)<0?i*g(2,-e,1):i/g(2,e,1),n*=4503599627370496,(e=52-e)>0){for(m(u,0,n),r=c;r>=7;)m(u,1e7,0),r-=7;for(m(u,g(10,r,1),0),r=e-1;r>=23;)y(u,1<<23),r-=23;y(u,1<<r),m(u,1,1),y(u,2),v=w(u)}else m(u,0,n),m(u,1<<-e,0),v=w(u)+d("0",c);return v=c>0?h+((o=v.length)<=c?"0."+d("0",c-o)+v:p(v,0,o-c)+"."+p(v,o-c)):h+v}})},function(t,e,n){var r=n(9),o=n(65),i=r.TYPED_ARRAY_CONSTRUCTOR,a=r.aTypedArrayConstructor;t.exports=function(t){return a(o(t,t[i]))}},function(t,e,n){var r=n(136),o=n(160),i=n(102),a=n(138);t.exports=function(t){return r(t)||o(t)||i(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(32),o=n(91);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.2",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.2/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,e,n){var r=n(2),o=n(92),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,n){var r=n(2),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(6),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},function(t,e,n){var r=n(90),o=n(93),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(34),o=n(43),i=n(21),a=function(t){return function(e,n,a){var s,c=r(e),u=i(c),f=o(a,u);if(t&&n!=n){for(;u>f;)if((s=c[f++])!=s)return!0}else for(;u>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(5),o=n(11),i=/#|\.prototype\./,a=function(t,e){var n=c[s(t)];return n==f||n!=u&&(o(e)?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",f=a.POLYFILL="P";t.exports=a},function(t,e,n){var r=n(50);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(184);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},function(t,e,n){var r={};r[n(12)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(137);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(15);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(134),o=n(97);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){"use strict";var r=n(13),o=n(106),i=n(15),a=n(38),s=n(30),c=n(42),u=n(51),f=n(107),l=n(109);o("match",(function(t,e,n){return[function(e){var n=c(this),o=null==e?void 0:u(e,t);return o?r(o,e,n):new RegExp(e)[t](s(n))},function(t){var r=i(this),o=s(t),c=n(e,r,o);if(c.done)return c.value;if(!r.global)return l(r,o);var u=r.unicode;r.lastIndex=0;for(var h,d=[],p=0;null!==(h=l(r,o));){var v=s(h[0]);d[p]=v,""===v&&(r.lastIndex=f(o,a(r.lastIndex),u)),p++}return 0===p?null:d}]}))},function(t,e,n){"use strict";n(25);var r=n(6),o=n(24),i=n(81),a=n(5),s=n(12),c=n(33),u=s("species"),f=RegExp.prototype;t.exports=function(t,e,n,l){var h=s(t),d=!a((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),p=d&&!a((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!d||!p||n){var v=r(/./[h]),g=e(h,""[t],(function(t,e,n,o,a){var s=r(t),c=e.exec;return c===i||c===f.exec?d&&!a?{done:!0,value:v(e,n,o)}:{done:!0,value:s(n,e,o)}:{done:!1}}));o(String.prototype,t,g[0]),o(f,h,g[1])}l&&c(f[h],"sham",!0)}},function(t,e,n){"use strict";var r=n(108).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(6),o=n(29),i=n(30),a=n(42),s=r("".charAt),c=r("".charCodeAt),u=r("".slice),f=function(t){return function(e,n){var r,f,l=i(a(e)),h=o(n),d=l.length;return h<0||h>=d?t?"":void 0:(r=c(l,h))<55296||r>56319||h+1===d||(f=c(l,h+1))<56320||f>57343?t?s(l,h):r:t?u(l,h,h+2):f-56320+(r-55296<<10)+65536}};t.exports={codeAt:f(!1),charAt:f(!0)}},function(t,e,n){var r=n(2),o=n(13),i=n(15),a=n(11),s=n(50),c=n(81),u=r.TypeError;t.exports=function(t,e){var n=t.exec;if(a(n)){var r=o(n,t,e);return null!==r&&i(r),r}if("RegExp"===s(t))return o(c,t,e);throw u("RegExp#exec called on incompatible receiver")}},function(t,e,n){"use strict";var r=n(10),o=n(142).trim;r({target:"String",proto:!0,forced:n(191)("trim")},{trim:function(){return o(this)}})},function(t,e,n){"use strict";var r=n(54),o=n(13),i=n(6),a=n(106),s=n(5),c=n(15),u=n(11),f=n(29),l=n(38),h=n(30),d=n(42),p=n(107),v=n(51),g=n(192),m=n(109),y=n(12)("replace"),w=Math.max,x=Math.min,b=i([].concat),A=i([].push),S=i("".indexOf),P=i("".slice),R="$0"==="a".replace(/./,"$0"),E=!!/./[y]&&""===/./[y]("a","$0");a("replace",(function(t,e,n){var i=E?"$":"$0";return[function(t,n){var r=d(this),i=null==t?void 0:v(t,y);return i?o(i,t,r,n):o(e,h(r),t,n)},function(t,o){var a=c(this),s=h(t);if("string"==typeof o&&-1===S(o,i)&&-1===S(o,"$<")){var d=n(e,a,s,o);if(d.done)return d.value}var v=u(o);v||(o=h(o));var y=a.global;if(y){var R=a.unicode;a.lastIndex=0}for(var E=[];;){var T=m(a,s);if(null===T)break;if(A(E,T),!y)break;""===h(T[0])&&(a.lastIndex=p(s,l(a.lastIndex),R))}for(var C,_="",I=0,k=0;k<E.length;k++){for(var M=h((T=E[k])[0]),L=w(x(f(T.index),s.length),0),D=[],O=1;O<T.length;O++)A(D,void 0===(C=T[O])?C:String(C));var V=T.groups;if(v){var N=b([M],D,L,s);void 0!==V&&A(N,V);var H=h(r(o,void 0,N))}else H=g(M,s,L,D,V,o);L>=I&&(_+=P(s,I,L)+H,I=L+M.length)}return _+P(s,I)}]}),!!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!R||E)},function(t,e,n){var r=n(50),o=n(2);t.exports="process"==r(o.process)},function(t,e,n){var r=n(24);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){var r=n(2).TypeError;t.exports=function(t,e){if(t<e)throw r("Not enough arguments");return t}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){var r=n(12),o=n(66),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},function(t,e,n){"use strict";var r=n(22),o=n(43),i=n(21);t.exports=function(t){for(var e=r(this),n=i(e),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)e[s++]=t;return e}},function(t,e,n){var r=n(10),o=n(22),i=n(104);r({target:"Object",stat:!0,forced:n(5)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,e,n){"use strict";var r=n(14),o=n(2),i=n(6),a=n(98),s=n(24),c=n(20),u=n(161),f=n(45),l=n(76),h=n(129),d=n(5),p=n(79).f,v=n(48).f,g=n(23).f,m=n(162),y=n(142).trim,w=o.Number,x=w.prototype,b=o.TypeError,A=i("".slice),S=i("".charCodeAt),P=function(t){var e=h(t,"number");return"bigint"==typeof e?e:R(e)},R=function(t){var e,n,r,o,i,a,s,c,u=h(t,"number");if(l(u))throw b("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=y(u),43===(e=S(u,0))||45===e){if(88===(n=S(u,2))||120===n)return NaN}else if(48===e){switch(S(u,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=A(u,2)).length,s=0;s<a;s++)if((c=S(i,s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(a("Number",!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var E,T=function(t){var e=arguments.length<1?0:w(P(t)),n=this;return f(x,n)&&d((function(){m(n)}))?u(Object(e),n,T):e},C=r?p(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),_=0;C.length>_;_++)c(w,E=C[_])&&!c(T,E)&&g(T,E,v(w,E));T.prototype=x,x.constructor=T,s(o,"Number",T)}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},function(t,e,n){"use strict";var r=n(10),o=n(31).filter;r({target:"Array",proto:!0,forced:!n(64)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(10),o=n(2),i=n(99),a=n(80),s=n(19),c=n(43),u=n(21),f=n(34),l=n(63),h=n(12),d=n(64),p=n(85),v=d("slice"),g=h("species"),m=o.Array,y=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(t,e){var n,r,o,h=f(this),d=u(h),v=c(t,d),w=c(void 0===e?d:e,d);if(i(h)&&(n=h.constructor,(a(n)&&(n===m||i(n.prototype))||s(n)&&null===(n=n[g]))&&(n=void 0),n===m||void 0===n))return p(h,v,w);for(r=new(void 0===n?m:n)(y(w-v,0)),o=0;v<w;v++,o++)v in h&&l(r,o,h[v]);return r.length=o,r}})},function(t,e,n){"use strict";var r=n(10),o=n(2),i=n(43),a=n(29),s=n(21),c=n(22),u=n(100),f=n(63),l=n(64)("splice"),h=o.TypeError,d=Math.max,p=Math.min;r({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,r,o,l,v,g,m=c(this),y=s(m),w=i(t,y),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=y-w):(n=x-2,r=p(d(a(e),0),y-w)),y+n-r>9007199254740991)throw h("Maximum allowed length exceeded");for(o=u(m,r),l=0;l<r;l++)(v=w+l)in m&&f(o,l,m[v]);if(o.length=r,n<r){for(l=w;l<y-r;l++)g=l+n,(v=l+r)in m?m[g]=m[v]:delete m[g];for(l=y;l>y-r+n;l--)delete m[l-1]}else if(n>r)for(l=y-r;l>w;l--)g=l+n-1,(v=l+r-1)in m?m[g]=m[v]:delete m[g];for(l=0;l<n;l++)m[l+w]=arguments[l+2];return m.length=y-r+n,o}})},function(t,e,n){},function(t,e){t.exports=function(){}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(2),o=n(13),i=n(19),a=n(76),s=n(51),c=n(180),u=n(12),f=r.TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!i(t)||a(t))return t;var n,r=s(t,l);if(r){if(void 0===e&&(e="default"),n=o(r,t,e),!i(n)||a(n))return n;throw f("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},function(t,e,n){var r=n(131);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(61),o=n(5);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(t,e,n){var r=n(14),o=n(5),i=n(77);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(14),o=n(5);t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,e,n){var r=n(6),o=n(20),i=n(34),a=n(96).indexOf,s=n(95),c=r([].push);t.exports=function(t,e){var n,r=i(t),u=0,f=[];for(n in r)!o(s,n)&&o(r,n)&&c(f,n);for(;e.length>u;)o(r,n=e[u++])&&(~a(f,n)||c(f,n));return f}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(5),o=n(2).RegExp,i=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),s=i||r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},function(t,e,n){var r=n(14),o=n(133),i=n(23),a=n(15),s=n(34),c=n(104);e.f=r&&!o?Object.defineProperties:function(t,e){a(t);for(var n,r=s(e),o=c(e),u=o.length,f=0;u>f;)i.f(t,n=o[f++],r[n]);return t}},function(t,e,n){var r=n(35);t.exports=r("document","documentElement")},function(t,e,n){var r=n(6),o=n(42),i=n(30),a=n(143),s=r("".replace),c="["+a+"]",u=RegExp("^"+c+c+"*"),f=RegExp(c+c+"*$"),l=function(t){return function(e){var n=i(o(e));return 1&t&&(n=s(n,u,"")),2&t&&(n=s(n,f,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,n){var r=n(2),o=n(80),i=n(62),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a constructor")}},function(t,e,n){var r=n(12),o=n(53),i=n(23),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e,n){"use strict";var r=n(10),o=n(13),i=n(32),a=n(52),s=n(11),c=n(147),u=n(84),f=n(56),l=n(55),h=n(33),d=n(24),p=n(12),v=n(66),g=n(148),m=a.PROPER,y=a.CONFIGURABLE,w=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,b=p("iterator"),A=function(){return this};t.exports=function(t,e,n,a,p,g,S){c(n,e,a);var P,R,E,T=function(t){if(t===p&&M)return M;if(!x&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},C=e+" Iterator",_=!1,I=t.prototype,k=I[b]||I["@@iterator"]||p&&I[p],M=!x&&k||T(p),L="Array"==e&&I.entries||k;if(L&&(P=u(L.call(new t)))!==Object.prototype&&P.next&&(i||u(P)===w||(f?f(P,w):s(P[b])||d(P,b,A)),l(P,C,!0,!0),i&&(v[C]=A)),m&&"values"==p&&k&&"values"!==k.name&&(!i&&y?h(I,"name","values"):(_=!0,M=function(){return o(k,this)})),p)if(R={values:T("values"),keys:g?M:T("keys"),entries:T("entries")},S)for(E in R)(x||_||!(E in I))&&d(I,E,R[E]);else r({target:e,proto:!0,forced:x||_},R);return i&&!S||I[b]===M||d(I,b,M,{name:p}),v[e]=M,R}},function(t,e,n){"use strict";var r=n(148).IteratorPrototype,o=n(53),i=n(49),a=n(55),s=n(66),c=function(){return this};t.exports=function(t,e,n,u){var f=e+" Iterator";return t.prototype=o(r,{next:i(+!u,n)}),a(t,f,!1,!0),s[f]=c,t}},function(t,e,n){"use strict";var r,o,i,a=n(5),s=n(11),c=n(53),u=n(84),f=n(24),l=n(12),h=n(32),d=l("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=u(u(i)))!==Object.prototype&&(r=o):p=!0),null==r||a((function(){var t={};return r[d].call(t)!==t}))?r={}:h&&(r=c(r)),s(r[d])||f(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(t,e,n){"use strict";var r=n(35),o=n(23),i=n(12),a=n(14),s=i("species");t.exports=function(t){var e=r(t),n=o.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r,o,i,a,s=n(2),c=n(54),u=n(44),f=n(11),l=n(20),h=n(5),d=n(141),p=n(85),v=n(77),g=n(114),m=n(151),y=n(112),w=s.setImmediate,x=s.clearImmediate,b=s.process,A=s.Dispatch,S=s.Function,P=s.MessageChannel,R=s.String,E=0,T={};try{r=s.location}catch(t){}var C=function(t){if(l(T,t)){var e=T[t];delete T[t],e()}},_=function(t){return function(){C(t)}},I=function(t){C(t.data)},k=function(t){s.postMessage(R(t),r.protocol+"//"+r.host)};w&&x||(w=function(t){g(arguments.length,1);var e=f(t)?t:S(t),n=p(arguments,1);return T[++E]=function(){c(e,void 0,n)},o(E),E},x=function(t){delete T[t]},y?o=function(t){b.nextTick(_(t))}:A&&A.now?o=function(t){A.now(_(t))}:P&&!m?(a=(i=new P).port2,i.port1.onmessage=I,o=u(a.postMessage,a)):s.addEventListener&&f(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!h(k)?(o=k,s.addEventListener("message",I,!1)):o="onreadystatechange"in v("script")?function(t){d.appendChild(v("script")).onreadystatechange=function(){d.removeChild(this),C(t)}}:function(t){setTimeout(_(t),0)}),t.exports={set:w,clear:x}},function(t,e,n){var r=n(46);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(t,e,n){var r=n(2),o=n(44),i=n(13),a=n(15),s=n(62),c=n(116),u=n(21),f=n(45),l=n(86),h=n(70),d=n(153),p=r.TypeError,v=function(t,e){this.stopped=t,this.result=e},g=v.prototype;t.exports=function(t,e,n){var r,m,y,w,x,b,A,S=n&&n.that,P=!(!n||!n.AS_ENTRIES),R=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),T=o(e,S),C=function(t){return r&&d(r,"normal",t),new v(!0,t)},_=function(t){return P?(a(t),E?T(t[0],t[1],C):T(t[0],t[1])):E?T(t,C):T(t)};if(R)r=t;else{if(!(m=h(t)))throw p(s(t)+" is not iterable");if(c(m)){for(y=0,w=u(t);w>y;y++)if((x=_(t[y]))&&f(g,x))return x;return new v(!1)}r=l(t,m)}for(b=r.next;!(A=i(b,r)).done;){try{x=_(A.value)}catch(t){d(r,"throw",t)}if("object"==typeof x&&x&&f(g,x))return x}return new v(!1)}},function(t,e,n){var r=n(13),o=n(15),i=n(51);t.exports=function(t,e,n){var a,s;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw n;return n}a=r(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw n;if(s)throw a;return o(a),n}},function(t,e,n){var r=n(57),o=n(155),i=n(68).CONSTRUCTOR;t.exports=i||!o((function(t){r.all(t).then(void 0,(function(){}))}))},function(t,e,n){var r=n(12)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},function(t,e,n){var r=n(15),o=n(19),i=n(69);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(77)("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},function(t,e,n){},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(11),o=n(19),i=n(56);t.exports=function(t,e,n){var a,s;return i&&r(a=e.constructor)&&a!==n&&o(s=a.prototype)&&s!==n.prototype&&i(t,s),t}},function(t,e,n){var r=n(6);t.exports=r(1..valueOf)},function(t,e,n){"use strict";var r=n(10),o=n(6),i=n(60),a=n(34),s=n(120),c=o([].join),u=i!=Object,f=s("join",",");r({target:"Array",proto:!0,forced:u||!f},{join:function(t){return c(a(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(10),o=n(32),i=n(57),a=n(5),s=n(35),c=n(11),u=n(65),f=n(156),l=n(24),h=i&&i.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){h.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),n=c(t);return this.then(n?function(n){return f(e,t()).then((function(){return n}))}:t,n?function(n){return f(e,t()).then((function(){throw n}))}:t)}}),!o&&c(i)){var d=s("Promise").prototype.finally;h.finally!==d&&l(h,"finally",d,{unsafe:!0})}},function(t,e,n){var r=n(166),o=n(125);function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}i.prototype=r(o.prototype),i.prototype.constructor=i,t.exports=i},function(t,e,n){var r=n(219),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){var r=n(166),o=n(125);function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}i.prototype=r(o.prototype),i.prototype.constructor=i,t.exports=i},function(t,e,n){var r=n(5),o=n(12),i=n(32),a=o("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),i&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(t,e,n){"use strict";n(39);var r=n(10),o=n(2),i=n(13),a=n(6),s=n(14),c=n(168),u=n(24),f=n(113),l=n(55),h=n(147),d=n(37),p=n(67),v=n(11),g=n(20),m=n(44),y=n(47),w=n(15),x=n(19),b=n(30),A=n(53),S=n(49),P=n(86),R=n(70),E=n(114),T=n(12),C=n(170),_=T("iterator"),I=d.set,k=d.getterFor("URLSearchParams"),M=d.getterFor("URLSearchParamsIterator"),L=Object.getOwnPropertyDescriptor,D=function(t){if(!s)return o[t];var e=L(o,t);return e&&e.value},O=D("fetch"),V=D("Request"),N=D("Headers"),H=V&&V.prototype,j=N&&N.prototype,U=o.RegExp,F=o.TypeError,B=o.decodeURIComponent,Y=o.encodeURIComponent,X=a("".charAt),z=a([].join),$=a([].push),G=a("".replace),q=a([].shift),W=a([].splice),J=a("".split),K=a("".slice),Q=/\+/g,Z=Array(4),tt=function(t){return Z[t-1]||(Z[t-1]=U("((?:%[\\da-f]{2}){"+t+"})","gi"))},et=function(t){try{return B(t)}catch(e){return t}},nt=function(t){var e=G(t,Q," "),n=4;try{return B(e)}catch(t){for(;n;)e=G(e,tt(n--),et);return e}},rt=/[!'()~]|%20/g,ot={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},it=function(t){return ot[t]},at=function(t){return G(Y(t),rt,it)},st=h((function(t,e){I(this,{type:"URLSearchParamsIterator",iterator:P(k(t).entries),kind:e})}),"Iterator",(function(){var t=M(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n}),!0),ct=function(t){this.entries=[],this.url=null,void 0!==t&&(x(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===X(t,0)?K(t,1):t:b(t)))};ct.prototype={type:"URLSearchParams",bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,o,a,s,c,u=R(t);if(u)for(n=(e=P(t,u)).next;!(r=i(n,e)).done;){if(a=(o=P(w(r.value))).next,(s=i(a,o)).done||(c=i(a,o)).done||!i(a,o).done)throw F("Expected sequence with length 2");$(this.entries,{key:b(s.value),value:b(c.value)})}else for(var f in t)g(t,f)&&$(this.entries,{key:f,value:b(t[f])})},parseQuery:function(t){if(t)for(var e,n,r=J(t,"&"),o=0;o<r.length;)(e=r[o++]).length&&(n=J(e,"="),$(this.entries,{key:nt(q(n)),value:nt(z(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],r=0;r<e.length;)t=e[r++],$(n,at(t.key)+"="+at(t.value));return z(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ut=function(){p(this,ft);var t=arguments.length>0?arguments[0]:void 0;I(this,new ct(t))},ft=ut.prototype;if(f(ft,{append:function(t,e){E(arguments.length,2);var n=k(this);$(n.entries,{key:b(t),value:b(e)}),n.updateURL()},delete:function(t){E(arguments.length,1);for(var e=k(this),n=e.entries,r=b(t),o=0;o<n.length;)n[o].key===r?W(n,o,1):o++;e.updateURL()},get:function(t){E(arguments.length,1);for(var e=k(this).entries,n=b(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){E(arguments.length,1);for(var e=k(this).entries,n=b(t),r=[],o=0;o<e.length;o++)e[o].key===n&&$(r,e[o].value);return r},has:function(t){E(arguments.length,1);for(var e=k(this).entries,n=b(t),r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){E(arguments.length,1);for(var n,r=k(this),o=r.entries,i=!1,a=b(t),s=b(e),c=0;c<o.length;c++)(n=o[c]).key===a&&(i?W(o,c--,1):(i=!0,n.value=s));i||$(o,{key:a,value:s}),r.updateURL()},sort:function(){var t=k(this);C(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=k(this).entries,r=m(t,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((e=n[o++]).value,e.key,this)},keys:function(){return new st(this,"keys")},values:function(){return new st(this,"values")},entries:function(){return new st(this,"entries")}},{enumerable:!0}),u(ft,_,ft.entries,{name:"entries"}),u(ft,"toString",(function(){return k(this).serialize()}),{enumerable:!0}),l(ut,"URLSearchParams"),r({global:!0,forced:!c},{URLSearchParams:ut}),!c&&v(N)){var lt=a(j.has),ht=a(j.set),dt=function(t){if(x(t)){var e,n=t.body;if("URLSearchParams"===y(n))return e=t.headers?new N(t.headers):new N,lt(e,"content-type")||ht(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),A(t,{body:S(0,b(n)),headers:S(0,e)})}return t};if(v(O)&&r({global:!0,enumerable:!0,noTargetGet:!0,forced:!0},{fetch:function(t){return O(t,arguments.length>1?dt(arguments[1]):{})}}),v(V)){var pt=function(t){return p(this,H),new V(t,arguments.length>1?dt(arguments[1]):{})};H.constructor=pt,pt.prototype=H,r({global:!0,forced:!0,noTargetGet:!0},{Request:pt})}}t.exports={URLSearchParams:ut,getState:k}},function(t,e,n){var r=n(83),o=Math.floor,i=function(t,e){var n=t.length,c=o(n/2);return n<8?a(t,e):s(t,i(r(t,0,c),e),i(r(t,c),e),e)},a=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},s=function(t,e,n,r){for(var o=e.length,i=n.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?r(e[a],n[s])<=0?e[a++]:n[s++]:a<o?e[a++]:n[s++];return t};t.exports=i},function(t,e,n){"use strict";var r=n(2),o=n(6),i=n(14),a=n(172),s=n(52),c=n(33),u=n(113),f=n(5),l=n(67),h=n(29),d=n(38),p=n(173),v=n(232),g=n(84),m=n(56),y=n(79).f,w=n(23).f,x=n(117),b=n(83),A=n(55),S=n(37),P=s.PROPER,R=s.CONFIGURABLE,E=S.get,T=S.set,C=r.ArrayBuffer,_=C,I=_&&_.prototype,k=r.DataView,M=k&&k.prototype,L=Object.prototype,D=r.Array,O=r.RangeError,V=o(x),N=o([].reverse),H=v.pack,j=v.unpack,U=function(t){return[255&t]},F=function(t){return[255&t,t>>8&255]},B=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Y=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},X=function(t){return H(t,23,4)},z=function(t){return H(t,52,8)},$=function(t,e){w(t.prototype,e,{get:function(){return E(this)[e]}})},G=function(t,e,n,r){var o=p(n),i=E(t);if(o+e>i.byteLength)throw O("Wrong index");var a=E(i.buffer).bytes,s=o+i.byteOffset,c=b(a,s,s+e);return r?c:N(c)},q=function(t,e,n,r,o,i){var a=p(n),s=E(t);if(a+e>s.byteLength)throw O("Wrong index");for(var c=E(s.buffer).bytes,u=a+s.byteOffset,f=r(+o),l=0;l<e;l++)c[u+l]=f[i?l:e-l-1]};if(a){var W=P&&"ArrayBuffer"!==C.name;if(f((function(){C(1)}))&&f((function(){new C(-1)}))&&!f((function(){return new C,new C(1.5),new C(NaN),W&&!R})))W&&R&&c(C,"name","ArrayBuffer");else{(_=function(t){return l(this,I),new C(p(t))}).prototype=I;for(var J,K=y(C),Q=0;K.length>Q;)(J=K[Q++])in _||c(_,J,C[J]);I.constructor=_}m&&g(M)!==L&&m(M,L);var Z=new k(new _(2)),tt=o(M.setInt8);Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||u(M,{setInt8:function(t,e){tt(this,t,e<<24>>24)},setUint8:function(t,e){tt(this,t,e<<24>>24)}},{unsafe:!0})}else I=(_=function(t){l(this,I);var e=p(t);T(this,{bytes:V(D(e),0),byteLength:e}),i||(this.byteLength=e)}).prototype,M=(k=function(t,e,n){l(this,M),l(t,I);var r=E(t).byteLength,o=h(e);if(o<0||o>r)throw O("Wrong offset");if(o+(n=void 0===n?r-o:d(n))>r)throw O("Wrong length");T(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)}).prototype,i&&($(_,"byteLength"),$(k,"buffer"),$(k,"byteLength"),$(k,"byteOffset")),u(M,{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Y(G(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Y(G(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return j(G(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return j(G(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){q(this,1,t,U,e)},setUint8:function(t,e){q(this,1,t,U,e)},setInt16:function(t,e){q(this,2,t,F,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){q(this,2,t,F,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){q(this,4,t,B,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){q(this,4,t,B,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){q(this,4,t,X,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){q(this,8,t,z,e,arguments.length>2?arguments[2]:void 0)}});A(_,"ArrayBuffer"),A(k,"DataView"),t.exports={ArrayBuffer:_,DataView:k}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,n){var r=n(2),o=n(29),i=n(38),a=r.RangeError;t.exports=function(t){if(void 0===t)return 0;var e=o(t),n=i(e);if(e!==n)throw a("Wrong length or index");return n}},function(t,e,n){var r=n(2),o=n(237),i=r.RangeError;t.exports=function(t,e){var n=o(t);if(n%e)throw i("Wrong offset");return n}},function(t,e,n){var r=n(2),o=n(36),i=n(22),a=n(60),s=n(21),c=r.TypeError,u=function(t){return function(e,n,r,u){o(n);var f=i(e),l=a(f),h=s(f),d=t?h-1:0,p=t?-1:1;if(r<2)for(;;){if(d in l){u=l[d],d+=p;break}if(d+=p,t?d<0:h<=d)throw c("Reduce of empty array with no initial value")}for(;t?d>=0:h>d;d+=p)d in l&&(u=n(u,l[d],d,f));return u}};t.exports={left:u(!1),right:u(!0)}},function(t,e,n){n(10)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(127),o=n(212);function i(e,n,a){return o()?(t.exports=i=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(null,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(2),o=n(13),i=n(11),a=n(19),s=r.TypeError;t.exports=function(t,e){var n,r;if("string"===e&&i(n=t.toString)&&!a(r=o(n,t)))return r;if(i(n=t.valueOf)&&!a(r=o(n,t)))return r;if("string"!==e&&i(n=t.toString)&&!a(r=o(n,t)))return r;throw s("Can't convert object to primitive value")}},function(t,e,n){var r=n(2),o=n(11),i=n(78),a=r.WeakMap;t.exports=o(a)&&/native code/.test(i(a))},function(t,e,n){var r=n(20),o=n(183),i=n(48),a=n(23);t.exports=function(t,e,n){for(var s=o(e),c=a.f,u=i.f,f=0;f<s.length;f++){var l=s[f];r(t,l)||n&&r(n,l)||c(t,l,u(e,l))}}},function(t,e,n){var r=n(35),o=n(6),i=n(79),a=n(135),s=n(15),c=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=a.f;return n?c(e,n(t)):e}},function(t,e,n){var r=n(2),o=n(99),i=n(80),a=n(19),s=n(12)("species"),c=r.Array;t.exports=function(t){var e;return o(t)&&(e=t.constructor,(i(e)&&(e===c||o(e.prototype))||a(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(101),o=n(47);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,e,n){"use strict";var r=n(52).PROPER,o=n(24),i=n(15),a=n(30),s=n(5),c=n(188),u=RegExp.prototype.toString,f=s((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=r&&"toString"!=u.name;(f||l)&&o(RegExp.prototype,"toString",(function(){var t=i(this);return"/"+a(t.source)+"/"+a(c(t))}),{unsafe:!0})},function(t,e,n){var r=n(13),o=n(20),i=n(45),a=n(103),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||o(t,"flags")||!i(s,t)?e:r(a,t)}},function(t,e,n){var r=n(5),o=n(2).RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},function(t,e,n){var r=n(5),o=n(2).RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},function(t,e,n){var r=n(52).PROPER,o=n(5),i=n(143);t.exports=function(t){return o((function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||r&&i[t].name!==t}))}},function(t,e,n){var r=n(6),o=n(22),i=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,l,h){var d=n+t.length,p=r.length,v=f;return void 0!==l&&(l=o(l),v=u),s(h,v,(function(o,s){var u;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,d);case"<":u=l[c(s,1,-1)];break;default:var f=+s;if(0===f)return o;if(f>p){var h=i(f/10);return 0===h?o:h<=p?void 0===r[h-1]?a(s,1):r[h-1]+a(s,1):o}u=r[f-1]}return void 0===u?"":u}))}},function(t,e,n){var r=n(19),o=n(50),i=n(12)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(5);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(2),o=n(11),i=r.String,a=r.TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw a("Can't set "+i(t)+" as a prototype")}},function(t,e,n){"use strict";var r,o,i,a=n(10),s=n(32),c=n(112),u=n(2),f=n(13),l=n(24),h=n(113),d=n(56),p=n(55),v=n(149),g=n(36),m=n(11),y=n(19),w=n(67),x=n(65),b=n(150).set,A=n(197),S=n(200),P=n(115),R=n(201),E=n(37),T=n(57),C=n(68),_=n(69),I=C.CONSTRUCTOR,k=C.REJECTION_EVENT,M=C.SUBCLASSING,L=E.getterFor("Promise"),D=E.set,O=T&&T.prototype,V=T,N=O,H=u.TypeError,j=u.document,U=u.process,F=_.f,B=F,Y=!!(j&&j.createEvent&&u.dispatchEvent),X=function(t){var e;return!(!y(t)||!m(e=t.then))&&e},z=function(t,e){var n,r,o,i=e.value,a=1==e.state,s=a?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(a||(2===e.rejection&&J(e),e.rejection=1),!0===s?n=i:(l&&l.enter(),n=s(i),l&&(l.exit(),o=!0)),n===t.promise?u(H("Promise-chain cycle")):(r=X(n))?f(r,n,c,u):c(n)):u(i)}catch(t){l&&!o&&l.exit(),u(t)}},$=function(t,e){t.notified||(t.notified=!0,A((function(){for(var n,r=t.reactions;n=r.get();)z(n,t);t.notified=!1,e&&!t.rejection&&q(t)})))},G=function(t,e,n){var r,o;Y?((r=j.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!k&&(o=u["on"+t])?o(r):"unhandledrejection"===t&&S("Unhandled promise rejection",n)},q=function(t){f(b,u,(function(){var e,n=t.facade,r=t.value;if(W(t)&&(e=P((function(){c?U.emit("unhandledRejection",r,n):G("unhandledrejection",n,r)})),t.rejection=c||W(t)?2:1,e.error))throw e.value}))},W=function(t){return 1!==t.rejection&&!t.parent},J=function(t){f(b,u,(function(){var e=t.facade;c?U.emit("rejectionHandled",e):G("rejectionhandled",e,t.value)}))},K=function(t,e,n){return function(r){t(e,r,n)}},Q=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,$(t,!0))},Z=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw H("Promise can't be resolved itself");var r=X(e);r?A((function(){var n={done:!1};try{f(r,e,K(Z,n,t),K(Q,n,t))}catch(e){Q(n,e,t)}})):(t.value=e,t.state=1,$(t,!1))}catch(e){Q({done:!1},e,t)}}};if(I&&(N=(V=function(t){w(this,N),g(t),f(r,this);var e=L(this);try{t(K(Z,e),K(Q,e))}catch(t){Q(e,t)}}).prototype,(r=function(t){D(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new R,rejection:!1,state:0,value:void 0})}).prototype=h(N,{then:function(t,e){var n=L(this),r=F(x(this,V));return n.parent=!0,r.ok=!m(t)||t,r.fail=m(e)&&e,r.domain=c?U.domain:void 0,0==n.state?n.reactions.add(r):A((function(){z(r,n)})),r.promise}}),o=function(){var t=new r,e=L(t);this.promise=t,this.resolve=K(Z,e),this.reject=K(Q,e)},_.f=F=function(t){return t===V||void 0===t?new o(t):B(t)},!s&&m(T)&&O!==Object.prototype)){i=O.then,M||l(O,"then",(function(t,e){var n=this;return new V((function(t,e){f(i,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete O.constructor}catch(t){}d&&d(O,N)}a({global:!0,wrap:!0,forced:I},{Promise:V}),p(V,"Promise",!1,!0),v("Promise")},function(t,e,n){var r,o,i,a,s,c,u,f,l=n(2),h=n(44),d=n(48).f,p=n(150).set,v=n(151),g=n(198),m=n(199),y=n(112),w=l.MutationObserver||l.WebKitMutationObserver,x=l.document,b=l.process,A=l.Promise,S=d(l,"queueMicrotask"),P=S&&S.value;P||(r=function(){var t,e;for(y&&(t=b.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter()},v||y||m||!w||!x?!g&&A&&A.resolve?((u=A.resolve(void 0)).constructor=A,f=h(u.then,u),a=function(){f(r)}):y?a=function(){b.nextTick(r)}:(p=h(p,l),a=function(){p(r)}):(s=!0,c=x.createTextNode(""),new w(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),t.exports=P||function(t){var e={fn:t,next:void 0};i&&(i.next=e),o||(o=e,a()),i=e}},function(t,e,n){var r=n(46),o=n(2);t.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},function(t,e,n){var r=n(46);t.exports=/web0s(?!.*chrome)/i.test(r)},function(t,e,n){var r=n(2);t.exports=function(t,e){var n=r.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}},function(t,e){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=n},function(t,e){t.exports="object"==typeof window&&"object"!=typeof Deno},function(t,e,n){"use strict";var r=n(10),o=n(13),i=n(36),a=n(69),s=n(115),c=n(152);r({target:"Promise",stat:!0,forced:n(154)},{all:function(t){var e=this,n=a.f(e),r=n.resolve,u=n.reject,f=s((function(){var n=i(e.resolve),a=[],s=0,f=1;c(t,(function(t){var i=s++,c=!1;f++,o(n,e,t).then((function(t){c||(c=!0,a[i]=t,--f||r(a))}),u)})),--f||r(a)}));return f.error&&u(f.value),n.promise}})},function(t,e,n){"use strict";var r=n(10),o=n(32),i=n(68).CONSTRUCTOR,a=n(57),s=n(35),c=n(11),u=n(24),f=a&&a.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&c(a)){var l=s("Promise").prototype.catch;f.catch!==l&&u(f,"catch",l,{unsafe:!0})}},function(t,e,n){"use strict";var r=n(10),o=n(13),i=n(36),a=n(69),s=n(115),c=n(152);r({target:"Promise",stat:!0,forced:n(154)},{race:function(t){var e=this,n=a.f(e),r=n.reject,u=s((function(){var a=i(e.resolve);c(t,(function(t){o(a,e,t).then(n.resolve,r)}))}));return u.error&&r(u.value),n.promise}})},function(t,e,n){"use strict";var r=n(10),o=n(13),i=n(69);r({target:"Promise",stat:!0,forced:n(68).CONSTRUCTOR},{reject:function(t){var e=i.f(this);return o(e.reject,void 0,t),e.promise}})},function(t,e,n){"use strict";var r=n(10),o=n(35),i=n(32),a=n(57),s=n(68).CONSTRUCTOR,c=n(156),u=o("Promise"),f=i&&!s;r({target:"Promise",stat:!0,forced:i||s},{resolve:function(t){return c(f&&this===u?a:this,t)}})},function(t,e,n){var r=n(137);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(31).forEach,o=n(120)("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){var r=n(14),o=n(23),i=n(103),a=n(5),s=RegExp.prototype;r&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(s,"flags").get.call({dotAll:!0,sticky:!0})}))&&o.f(s,"flags",{configurable:!0,get:i})},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(2),o=n(29),i=n(30),a=n(42),s=r.RangeError;t.exports=function(t){var e=i(a(this)),n="",r=o(t);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e,n){},function(t,e,n){var r=n(10),o=n(5),i=n(34),a=n(48).f,s=n(14),c=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return R()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function l(){}function h(){}function d(){}var p={};s(p,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(P([])));g&&g!==e&&n.call(g,o)&&(p=g);var m=d.prototype=l.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){f.value=t,a(f)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return h.prototype=d,s(m,"constructor",d),s(d,"constructor",h),h.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},y(w.prototype),s(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new w(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(218);t.exports=function(t){var e=r(t);return e.__chain__=!0,e}},function(t,e,n){var r=n(165),o=n(167),i=n(125),a=n(220),s=n(221),c=n(222),u=Object.prototype.hasOwnProperty;function f(t){if(s(t)&&!a(t)&&!(t instanceof r)){if(t instanceof o)return t;if(u.call(t,"__wrapped__"))return c(t)}return new o(t)}f.prototype=i.prototype,f.prototype.constructor=f,t.exports=f},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(165),o=n(167),i=n(223);t.exports=function(t){if(t instanceof r)return t.clone();var e=new o(t.__wrapped__,t.__chain__);return e.__actions__=i(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){n(225)},function(t,e,n){"use strict";n(71);var r,o=n(10),i=n(14),a=n(168),s=n(2),c=n(44),u=n(6),f=n(140).f,l=n(24),h=n(67),d=n(20),p=n(226),v=n(227),g=n(83),m=n(108).codeAt,y=n(229),w=n(30),x=n(55),b=n(114),A=n(169),S=n(37),P=S.set,R=S.getterFor("URL"),E=A.URLSearchParams,T=A.getState,C=s.URL,_=s.TypeError,I=s.parseInt,k=Math.floor,M=Math.pow,L=u("".charAt),D=u(/./.exec),O=u([].join),V=u(1..toString),N=u([].pop),H=u([].push),j=u("".replace),U=u([].shift),F=u("".split),B=u("".slice),Y=u("".toLowerCase),X=u([].unshift),z=/[a-z]/i,$=/[\d+-.a-z]/i,G=/\d/,q=/^0x/i,W=/^[0-7]+$/,J=/^\d+$/,K=/^[\da-f]+$/i,Q=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Z=/[\0\t\n\r #/:<>?@[\\\]^|]/,tt=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,et=/[\t\n\r]/g,nt=function(t){var e,n,r,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)X(e,t%256),t=k(t/256);return O(e,".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e}(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),r===n?(e+=n?":":"::",o=!0):(e+=V(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},rt={},ot=p({},rt,{" ":1,'"':1,"<":1,">":1,"`":1}),it=p({},ot,{"#":1,"?":1,"{":1,"}":1}),at=p({},it,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),st=function(t,e){var n=m(t,0);return n>32&&n<127&&!d(e,t)?t:encodeURIComponent(t)},ct={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ut=function(t,e){var n;return 2==t.length&&D(z,L(t,0))&&(":"==(n=L(t,1))||!e&&"|"==n)},ft=function(t){var e;return t.length>1&&ut(B(t,0,2))&&(2==t.length||"/"===(e=L(t,2))||"\\"===e||"?"===e||"#"===e)},lt=function(t){return"."===t||"%2e"===Y(t)},ht={},dt={},pt={},vt={},gt={},mt={},yt={},wt={},xt={},bt={},At={},St={},Pt={},Rt={},Et={},Tt={},Ct={},_t={},It={},kt={},Mt={},Lt=function(t,e,n){var r,o,i,a=w(t);if(e){if(o=this.parse(a))throw _(o);this.searchParams=null}else{if(void 0!==n&&(r=new Lt(n,!0)),o=this.parse(a,null,r))throw _(o);(i=T(new E)).bindURL(this),this.searchParams=i}};Lt.prototype={type:"URL",parse:function(t,e,n){var o,i,a,s,c,u=this,f=e||ht,l=0,h="",p=!1,m=!1,y=!1;for(t=w(t),e||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,t=j(t,tt,"")),t=j(t,et,""),o=v(t);l<=o.length;){switch(i=o[l],f){case ht:if(!i||!D(z,i)){if(e)return"Invalid scheme";f=pt;continue}h+=Y(i),f=dt;break;case dt:if(i&&(D($,i)||"+"==i||"-"==i||"."==i))h+=Y(i);else{if(":"!=i){if(e)return"Invalid scheme";h="",f=pt,l=0;continue}if(e&&(u.isSpecial()!=d(ct,h)||"file"==h&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=h,e)return void(u.isSpecial()&&ct[u.scheme]==u.port&&(u.port=null));h="","file"==u.scheme?f=Rt:u.isSpecial()&&n&&n.scheme==u.scheme?f=vt:u.isSpecial()?f=wt:"/"==o[l+1]?(f=gt,l++):(u.cannotBeABaseURL=!0,H(u.path,""),f=It)}break;case pt:if(!n||n.cannotBeABaseURL&&"#"!=i)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==i){u.scheme=n.scheme,u.path=g(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,f=Mt;break}f="file"==n.scheme?Rt:mt;continue;case vt:if("/"!=i||"/"!=o[l+1]){f=mt;continue}f=xt,l++;break;case gt:if("/"==i){f=bt;break}f=_t;continue;case mt:if(u.scheme=n.scheme,i==r)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query=n.query;else if("/"==i||"\\"==i&&u.isSpecial())f=yt;else if("?"==i)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query="",f=kt;else{if("#"!=i){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.path.length--,f=_t;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query=n.query,u.fragment="",f=Mt}break;case yt:if(!u.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,f=_t;continue}f=bt}else f=xt;break;case wt:if(f=xt,"/"!=i||"/"!=L(h,l+1))continue;l++;break;case xt:if("/"!=i&&"\\"!=i){f=bt;continue}break;case bt:if("@"==i){p&&(h="%40"+h),p=!0,a=v(h);for(var x=0;x<a.length;x++){var b=a[x];if(":"!=b||y){var A=st(b,at);y?u.password+=A:u.username+=A}else y=!0}h=""}else if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(p&&""==h)return"Invalid authority";l-=v(h).length+1,h="",f=At}else h+=i;break;case At:case St:if(e&&"file"==u.scheme){f=Tt;continue}if(":"!=i||m){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(u.isSpecial()&&""==h)return"Invalid host";if(e&&""==h&&(u.includesCredentials()||null!==u.port))return;if(s=u.parseHost(h))return s;if(h="",f=Ct,e)return;continue}"["==i?m=!0:"]"==i&&(m=!1),h+=i}else{if(""==h)return"Invalid host";if(s=u.parseHost(h))return s;if(h="",f=Pt,e==St)return}break;case Pt:if(!D(G,i)){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()||e){if(""!=h){var S=I(h,10);if(S>65535)return"Invalid port";u.port=u.isSpecial()&&S===ct[u.scheme]?null:S,h=""}if(e)return;f=Ct;continue}return"Invalid port"}h+=i;break;case Rt:if(u.scheme="file","/"==i||"\\"==i)f=Et;else{if(!n||"file"!=n.scheme){f=_t;continue}if(i==r)u.host=n.host,u.path=g(n.path),u.query=n.query;else if("?"==i)u.host=n.host,u.path=g(n.path),u.query="",f=kt;else{if("#"!=i){ft(O(g(o,l),""))||(u.host=n.host,u.path=g(n.path),u.shortenPath()),f=_t;continue}u.host=n.host,u.path=g(n.path),u.query=n.query,u.fragment="",f=Mt}}break;case Et:if("/"==i||"\\"==i){f=Tt;break}n&&"file"==n.scheme&&!ft(O(g(o,l),""))&&(ut(n.path[0],!0)?H(u.path,n.path[0]):u.host=n.host),f=_t;continue;case Tt:if(i==r||"/"==i||"\\"==i||"?"==i||"#"==i){if(!e&&ut(h))f=_t;else if(""==h){if(u.host="",e)return;f=Ct}else{if(s=u.parseHost(h))return s;if("localhost"==u.host&&(u.host=""),e)return;h="",f=Ct}continue}h+=i;break;case Ct:if(u.isSpecial()){if(f=_t,"/"!=i&&"\\"!=i)continue}else if(e||"?"!=i)if(e||"#"!=i){if(i!=r&&(f=_t,"/"!=i))continue}else u.fragment="",f=Mt;else u.query="",f=kt;break;case _t:if(i==r||"/"==i||"\\"==i&&u.isSpecial()||!e&&("?"==i||"#"==i)){if(".."===(c=Y(c=h))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"==i||"\\"==i&&u.isSpecial()||H(u.path,"")):lt(h)?"/"==i||"\\"==i&&u.isSpecial()||H(u.path,""):("file"==u.scheme&&!u.path.length&&ut(h)&&(u.host&&(u.host=""),h=L(h,0)+":"),H(u.path,h)),h="","file"==u.scheme&&(i==r||"?"==i||"#"==i))for(;u.path.length>1&&""===u.path[0];)U(u.path);"?"==i?(u.query="",f=kt):"#"==i&&(u.fragment="",f=Mt)}else h+=st(i,it);break;case It:"?"==i?(u.query="",f=kt):"#"==i?(u.fragment="",f=Mt):i!=r&&(u.path[0]+=st(i,rt));break;case kt:e||"#"!=i?i!=r&&("'"==i&&u.isSpecial()?u.query+="%27":u.query+="#"==i?"%23":st(i,rt)):(u.fragment="",f=Mt);break;case Mt:i!=r&&(u.fragment+=st(i,ot))}l++}},parseHost:function(t){var e,n,r;if("["==L(t,0)){if("]"!=L(t,t.length-1))return"Invalid host";if(!(e=function(t){var e,n,r,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,f=null,l=0,h=function(){return L(t,l)};if(":"==h()){if(":"!=L(t,1))return;l+=2,f=++u}for(;h();){if(8==u)return;if(":"!=h()){for(e=n=0;n<4&&D(K,h());)e=16*e+I(h(),16),l++,n++;if("."==h()){if(0==n)return;if(l-=n,u>6)return;for(r=0;h();){if(o=null,r>0){if(!("."==h()&&r<4))return;l++}if(!D(G,h()))return;for(;D(G,h());){if(i=I(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;l++}c[u]=256*c[u]+o,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;c[u++]=e}else{if(null!==f)return;l++,f=++u}}if(null!==f)for(a=u-f,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[f+a-1],c[f+--a]=s;else if(8!=u)return;return c}(B(t,1,-1))))return"Invalid host";this.host=e}else if(this.isSpecial()){if(t=y(t),D(Q,t))return"Invalid host";if(null===(e=function(t){var e,n,r,o,i,a,s,c=F(t,".");if(c.length&&""==c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(o=c[r]))return t;if(i=10,o.length>1&&"0"==L(o,0)&&(i=D(q,o)?16:8,o=B(o,8==i?1:2)),""===o)a=0;else{if(!D(10==i?J:8==i?W:K,o))return t;a=I(o,i)}H(n,a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=M(256,5-e))return null}else if(a>255)return null;for(s=N(n),r=0;r<n.length;r++)s+=n[r]*M(256,3-r);return s}(t)))return"Invalid host";this.host=e}else{if(D(Z,t))return"Invalid host";for(e="",n=v(t),r=0;r<n.length;r++)e+=st(n[r],rt);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return d(ct,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&ut(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==o?(u+="//",t.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=nt(o),null!==i&&(u+=":"+i)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+O(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(t){var e=this.parse(t);if(e)throw _(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Dt(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+nt(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(w(t)+":",ht)},getUsername:function(){return this.username},setUsername:function(t){var e=v(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=st(e[n],at)}},getPassword:function(){return this.password},setPassword:function(t){var e=v(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=st(e[n],at)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?nt(t):nt(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,At)},getHostname:function(){var t=this.host;return null===t?"":nt(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,St)},getPort:function(){var t=this.port;return null===t?"":w(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=w(t))?this.port=null:this.parse(t,Pt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+O(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Ct))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=w(t))?this.query=null:("?"==L(t,0)&&(t=B(t,1)),this.query="",this.parse(t,kt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=w(t))?("#"==L(t,0)&&(t=B(t,1)),this.fragment="",this.parse(t,Mt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Dt=function(t){var e=h(this,Ot),n=b(arguments.length,1)>1?arguments[1]:void 0,r=P(e,new Lt(t,!1,n));i||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},Ot=Dt.prototype,Vt=function(t,e){return{get:function(){return R(this)[t]()},set:e&&function(t){return R(this)[e](t)},configurable:!0,enumerable:!0}};if(i&&f(Ot,{href:Vt("serialize","setHref"),origin:Vt("getOrigin"),protocol:Vt("getProtocol","setProtocol"),username:Vt("getUsername","setUsername"),password:Vt("getPassword","setPassword"),host:Vt("getHost","setHost"),hostname:Vt("getHostname","setHostname"),port:Vt("getPort","setPort"),pathname:Vt("getPathname","setPathname"),search:Vt("getSearch","setSearch"),searchParams:Vt("getSearchParams"),hash:Vt("getHash","setHash")}),l(Ot,"toJSON",(function(){return R(this).serialize()}),{enumerable:!0}),l(Ot,"toString",(function(){return R(this).serialize()}),{enumerable:!0}),C){var Nt=C.createObjectURL,Ht=C.revokeObjectURL;Nt&&l(Dt,"createObjectURL",c(Nt,C)),Ht&&l(Dt,"revokeObjectURL",c(Ht,C))}x(Dt,"URL"),o({global:!0,forced:!a,sham:!i},{URL:Dt})},function(t,e,n){"use strict";var r=n(14),o=n(6),i=n(13),a=n(5),s=n(104),c=n(135),u=n(128),f=n(22),l=n(60),h=Object.assign,d=Object.defineProperty,p=o([].concat);t.exports=!h||a((function(){if(r&&1!==h({b:1},h(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||"abcdefghijklmnopqrst"!=s(h({},e)).join("")}))?function(t,e){for(var n=f(t),o=arguments.length,a=1,h=c.f,d=u.f;o>a;)for(var v,g=l(arguments[a++]),m=h?p(s(g),h(g)):s(g),y=m.length,w=0;y>w;)v=m[w++],r&&!i(d,g,v)||(n[v]=g[v]);return n}:h},function(t,e,n){"use strict";var r=n(2),o=n(44),i=n(13),a=n(22),s=n(228),c=n(116),u=n(80),f=n(21),l=n(63),h=n(86),d=n(70),p=r.Array;t.exports=function(t){var e=a(t),n=u(this),r=arguments.length,v=r>1?arguments[1]:void 0,g=void 0!==v;g&&(v=o(v,r>2?arguments[2]:void 0));var m,y,w,x,b,A,S=d(e),P=0;if(!S||this==p&&c(S))for(m=f(e),y=n?new this(m):p(m);m>P;P++)A=g?v(e[P],P):e[P],l(y,P,A);else for(b=(x=h(e,S)).next,y=n?new this:[];!(w=i(b,x)).done;P++)A=g?s(x,v,[w.value,P],!0):w.value,l(y,P,A);return y.length=P,y}},function(t,e,n){var r=n(15),o=n(153);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){o(t,"throw",e)}}},function(t,e,n){"use strict";var r=n(2),o=n(6),i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",c=r.RangeError,u=o(a.exec),f=Math.floor,l=String.fromCharCode,h=o("".charCodeAt),d=o([].join),p=o([].push),v=o("".replace),g=o("".split),m=o("".toLowerCase),y=function(t){return t+22+75*(t<26)},w=function(t,e,n){var r=0;for(t=n?f(t/700):t>>1,t+=f(t/e);t>455;)t=f(t/35),r+=36;return f(r+36*t/(t+38))},x=function(t){var e,n,r=[],o=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=h(t,n++);if(o>=55296&&o<=56319&&n<r){var i=h(t,n++);56320==(64512&i)?p(e,((1023&o)<<10)+(1023&i)+65536):(p(e,o),n--)}else p(e,o)}return e}(t)).length,i=128,a=0,u=72;for(e=0;e<t.length;e++)(n=t[e])<128&&p(r,l(n));var v=r.length,g=v;for(v&&p(r,"-");g<o;){var m=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=i&&n<m&&(m=n);var x=g+1;if(m-i>f((2147483647-a)/x))throw c(s);for(a+=(m-i)*x,i=m,e=0;e<t.length;e++){if((n=t[e])<i&&++a>2147483647)throw c(s);if(n==i){for(var b=a,A=36;;){var S=A<=u?1:A>=u+26?26:A-u;if(b<S)break;var P=b-S,R=36-S;p(r,l(y(S+P%R))),b=f(P/R),A+=36}p(r,l(y(b))),u=w(a,x,g==v),a=0,g++}}a++,i++}return d(r,"")};t.exports=function(t){var e,n,r=[],o=g(v(m(t),a,"."),".");for(e=0;e<o.length;e++)n=o[e],p(r,u(i,n)?"xn--"+x(n):n);return d(r,".")}},function(t,e,n){n(169)},function(t,e,n){"use strict";var r=n(10),o=n(6),i=n(5),a=n(171),s=n(15),c=n(43),u=n(38),f=n(65),l=a.ArrayBuffer,h=a.DataView,d=h.prototype,p=o(l.prototype.slice),v=o(d.getUint8),g=o(d.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(p&&void 0===e)return p(s(this),t);for(var n=s(this).byteLength,r=c(t,n),o=c(void 0===e?n:e,n),i=new(f(this,l))(u(o-r)),a=new h(this),d=new h(i),m=0;r<o;)g(d,m++,v(a,r++));return i}})},function(t,e,n){var r=n(2).Array,o=Math.abs,i=Math.pow,a=Math.floor,s=Math.log,c=Math.LN2;t.exports={pack:function(t,e,n){var u,f,l,h=r(n),d=8*n-e-1,p=(1<<d)-1,v=p>>1,g=23===e?i(2,-24)-i(2,-77):0,m=t<0||0===t&&1/t<0?1:0,y=0;for((t=o(t))!=t||t===1/0?(f=t!=t?1:0,u=p):(u=a(s(t)/c),t*(l=i(2,-u))<1&&(u--,l*=2),(t+=u+v>=1?g/l:g*i(2,1-v))*l>=2&&(u++,l/=2),u+v>=p?(f=0,u=p):u+v>=1?(f=(t*l-1)*i(2,e),u+=v):(f=t*i(2,v-1)*i(2,e),u=0));e>=8;)h[y++]=255&f,f/=256,e-=8;for(u=u<<e|f,d+=e;d>0;)h[y++]=255&u,u/=256,d-=8;return h[--y]|=128*m,h},unpack:function(t,e){var n,r=t.length,o=8*r-e-1,a=(1<<o)-1,s=a>>1,c=o-7,u=r-1,f=t[u--],l=127&f;for(f>>=7;c>0;)l=256*l+t[u--],c-=8;for(n=l&(1<<-c)-1,l>>=-c,c+=e;c>0;)n=256*n+t[u--],c-=8;if(0===l)l=1-s;else{if(l===a)return n?NaN:f?-1/0:1/0;n+=i(2,e),l-=s}return(f?-1:1)*n*i(2,l-e)}}},function(t,e,n){n(234)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){"use strict";var r=n(10),o=n(2),i=n(13),a=n(14),s=n(235),c=n(9),u=n(171),f=n(67),l=n(49),h=n(33),d=n(236),p=n(38),v=n(173),g=n(174),m=n(75),y=n(20),w=n(47),x=n(19),b=n(76),A=n(53),S=n(45),P=n(56),R=n(79).f,E=n(238),T=n(31).forEach,C=n(149),_=n(23),I=n(48),k=n(37),M=n(161),L=k.get,D=k.set,O=_.f,V=I.f,N=Math.round,H=o.RangeError,j=u.ArrayBuffer,U=j.prototype,F=u.DataView,B=c.NATIVE_ARRAY_BUFFER_VIEWS,Y=c.TYPED_ARRAY_CONSTRUCTOR,X=c.TYPED_ARRAY_TAG,z=c.TypedArray,$=c.TypedArrayPrototype,G=c.aTypedArrayConstructor,q=c.isTypedArray,W=function(t,e){G(t);for(var n=0,r=e.length,o=new t(r);r>n;)o[n]=e[n++];return o},J=function(t,e){O(t,e,{get:function(){return L(this)[e]}})},K=function(t){var e;return S(U,t)||"ArrayBuffer"==(e=w(t))||"SharedArrayBuffer"==e},Q=function(t,e){return q(t)&&!b(e)&&e in t&&d(+e)&&e>=0},Z=function(t,e){return e=m(e),Q(t,e)?l(2,t[e]):V(t,e)},tt=function(t,e,n){return e=m(e),!(Q(t,e)&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?O(t,e,n):(t[e]=n.value,t)};a?(B||(I.f=Z,_.f=tt,J($,"buffer"),J($,"byteOffset"),J($,"byteLength"),J($,"length")),r({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:Z,defineProperty:tt}),t.exports=function(t,e,n){var a=t.match(/\d+$/)[0]/8,c=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,d=o[c],m=d,y=m&&m.prototype,w={},b=function(t,e){O(t,e,{get:function(){return function(t,e){var n=L(t);return n.view[u](e*a+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=L(t);n&&(r=(r=N(r))<0?0:r>255?255:255&r),o.view[l](e*a+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};B?s&&(m=e((function(t,e,n,r){return f(t,y),M(x(e)?K(e)?void 0!==r?new d(e,g(n,a),r):void 0!==n?new d(e,g(n,a)):new d(e):q(e)?W(m,e):i(E,m,e):new d(v(e)),t,m)})),P&&P(m,z),T(R(d),(function(t){t in m||h(m,t,d[t])})),m.prototype=y):(m=e((function(t,e,n,r){f(t,y);var o,s,c,u=0,l=0;if(x(e)){if(!K(e))return q(e)?W(m,e):i(E,m,e);o=e,l=g(n,a);var h=e.byteLength;if(void 0===r){if(h%a)throw H("Wrong length");if((s=h-l)<0)throw H("Wrong length")}else if((s=p(r)*a)+l>h)throw H("Wrong length");c=s/a}else c=v(e),o=new j(s=c*a);for(D(t,{buffer:o,byteOffset:l,byteLength:s,length:c,view:new F(o)});u<c;)b(t,u++)})),P&&P(m,z),y=m.prototype=A($)),y.constructor!==m&&h(y,"constructor",m),h(y,Y,m),X&&h(y,X,c),w[c]=m,r({global:!0,forced:m!=d,sham:!B},w),"BYTES_PER_ELEMENT"in m||h(m,"BYTES_PER_ELEMENT",a),"BYTES_PER_ELEMENT"in y||h(y,"BYTES_PER_ELEMENT",a),C(c)}):t.exports=function(){}},function(t,e,n){var r=n(2),o=n(5),i=n(155),a=n(9).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;t.exports=!a||!o((function(){c(1)}))||!o((function(){new c(-1)}))||!i((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||o((function(){return 1!==new c(new s(2),1,void 0).length}))},function(t,e,n){var r=n(19),o=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&o(t)===t}},function(t,e,n){var r=n(2),o=n(29),i=r.RangeError;t.exports=function(t){var e=o(t);if(e<0)throw i("The argument can't be less than 0");return e}},function(t,e,n){var r=n(44),o=n(13),i=n(144),a=n(22),s=n(21),c=n(86),u=n(70),f=n(116),l=n(9).aTypedArrayConstructor;t.exports=function(t){var e,n,h,d,p,v,g=i(this),m=a(t),y=arguments.length,w=y>1?arguments[1]:void 0,x=void 0!==w,b=u(m);if(b&&!f(b))for(v=(p=c(m,b)).next,m=[];!(d=o(v,p)).done;)m.push(d.value);for(x&&y>2&&(w=r(w,arguments[2])),n=s(m),h=new(l(g))(n),e=0;n>e;e++)h[e]=x?w(m[e],e):m[e];return h}},function(t,e,n){"use strict";var r=n(6),o=n(9),i=r(n(240)),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",(function(t,e){return i(a(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(22),o=n(43),i=n(21),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=i(n),c=o(t,s),u=o(e,s),f=arguments.length>2?arguments[2]:void 0,l=a((void 0===f?s:o(f,s))-u,s-c),h=1;for(u<c&&c<u+l&&(h=-1,u+=l-1,c+=l-1);l-- >0;)u in n?n[c]=n[u]:delete n[c],c+=h,u+=h;return n}},function(t,e,n){"use strict";var r=n(9),o=n(31).every,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),o=n(13),i=n(117),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(t){var e=arguments.length;return o(i,a(this),t,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(9),o=n(31).filter,i=n(244),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(t){var e=o(a(this),t,arguments.length>1?arguments[1]:void 0);return i(this,e)}))},function(t,e,n){var r=n(245),o=n(88);t.exports=function(t,e){return r(o(t),e)}},function(t,e,n){var r=n(21);t.exports=function(t,e){for(var n=0,o=r(e),i=new t(o);o>n;)i[n]=e[n++];return i}},function(t,e,n){"use strict";var r=n(9),o=n(31).find,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),o=n(31).findIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),o=n(31).forEach,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),o=n(96).includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),o=n(96).indexOf,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(2),o=n(5),i=n(6),a=n(9),s=n(39),c=n(12)("iterator"),u=r.Uint8Array,f=i(s.values),l=i(s.keys),h=i(s.entries),d=a.aTypedArray,p=a.exportTypedArrayMethod,v=u&&u.prototype,g=!o((function(){v[c].call([1])})),m=!!v&&v.values&&v[c]===v.values&&"values"===v.values.name,y=function(){return f(d(this))};p("entries",(function(){return h(d(this))}),g),p("keys",(function(){return l(d(this))}),g),p("values",y,g||!m,{name:"values"}),p(c,y,g||!m,{name:"values"})},function(t,e,n){"use strict";var r=n(9),o=n(6),i=r.aTypedArray,a=r.exportTypedArrayMethod,s=o([].join);a("join",(function(t){return s(i(this),t)}))},function(t,e,n){"use strict";var r=n(9),o=n(54),i=n(254),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return o(i,a(this),e>1?[t,arguments[1]]:[t])}))},function(t,e,n){"use strict";var r=n(54),o=n(34),i=n(29),a=n(21),s=n(120),c=Math.min,u=[].lastIndexOf,f=!!u&&1/[1].lastIndexOf(1,-0)<0,l=s("lastIndexOf"),h=f||!l;t.exports=h?function(t){if(f)return r(u,this,arguments)||0;var e=o(this),n=a(e),s=n-1;for(arguments.length>1&&(s=c(s,i(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:u},function(t,e,n){"use strict";var r=n(9),o=n(31).map,i=n(88),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(t){return o(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(i(t))(e)}))}))},function(t,e,n){"use strict";var r=n(9),o=n(175).left,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return o(i(this),t,e,e>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),o=n(175).right,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return o(i(this),t,e,e>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),o=r.aTypedArray,i=r.exportTypedArrayMethod,a=Math.floor;i("reverse",(function(){for(var t,e=o(this).length,n=a(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}))},function(t,e,n){"use strict";var r=n(2),o=n(13),i=n(9),a=n(21),s=n(174),c=n(22),u=n(5),f=r.RangeError,l=r.Int8Array,h=l&&l.prototype,d=h&&h.set,p=i.aTypedArray,v=i.exportTypedArrayMethod,g=!u((function(){var t=new Uint8ClampedArray(2);return o(d,t,{length:1,0:3},1),3!==t[1]})),m=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new l(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));v("set",(function(t){p(this);var e=s(arguments.length>1?arguments[1]:void 0,1),n=c(t);if(g)return o(d,this,n,e);var r=this.length,i=a(n),u=0;if(i+e>r)throw f("Wrong length");for(;u<i;)this[e+u]=n[u++]}),!g||m)},function(t,e,n){"use strict";var r=n(9),o=n(88),i=n(5),a=n(85),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(t,e){for(var n=a(s(this),t,e),r=o(this),i=0,c=n.length,u=new r(c);c>i;)u[i]=n[i++];return u}),i((function(){new Int8Array(1).slice()})))},function(t,e,n){"use strict";var r=n(9),o=n(31).some,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(2),o=n(6),i=n(5),a=n(36),s=n(170),c=n(9),u=n(263),f=n(264),l=n(61),h=n(265),d=c.aTypedArray,p=c.exportTypedArrayMethod,v=r.Uint16Array,g=v&&o(v.prototype.sort),m=!(!g||i((function(){g(new v(2),null)}))&&i((function(){g(new v(2),{})}))),y=!!g&&!i((function(){if(l)return l<74;if(u)return u<67;if(f)return!0;if(h)return h<602;var t,e,n=new v(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(g(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));p("sort",(function(t){return void 0!==t&&a(t),y?g(this,t):s(d(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!y||m)},function(t,e,n){var r=n(46).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},function(t,e,n){var r=n(46);t.exports=/MSIE|Trident/.test(r)},function(t,e,n){var r=n(46).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},function(t,e,n){"use strict";var r=n(9),o=n(38),i=n(43),a=n(88),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=s(this),r=n.length,c=i(t,r);return new(a(n))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,o((void 0===e?r:i(e,r))-c))}))},function(t,e,n){"use strict";var r=n(2),o=n(54),i=n(9),a=n(5),s=n(85),c=r.Int8Array,u=i.aTypedArray,f=i.exportTypedArrayMethod,l=[].toLocaleString,h=!!c&&a((function(){l.call(new c(1))}));f("toLocaleString",(function(){return o(l,h?s(u(this)):u(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!a((function(){c.prototype.toLocaleString.call([1,2])})))},function(t,e,n){"use strict";var r=n(9).exportTypedArrayMethod,o=n(5),i=n(2),a=n(6),s=i.Uint8Array,c=s&&s.prototype||{},u=[].toString,f=a([].join);o((function(){u.call({})}))&&(u=function(){return f(this)});var l=c.toString!=u;r("toString",u,l)},function(t,e,n){n(10)({target:"Number",stat:!0},{isFinite:n(270)})},function(t,e,n){var r=n(2).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},function(t,e,n){"use strict";n.r(e),n.d(e,"CreateStampService",(function(){return Gi})),n.d(e,"CreateAnnotAddon",(function(){return za}));var r=n(1),o=n.n(r),i=(n(16),n(3)),a=n.n(i),s=n(4),c=n.n(s),u=n(0);n(8),n(187),n(25),n(105),n(110),n(111),n(26),n(82);var f=Math.pow(2,24);function l(t){var e;return t<16777216?e=255:(e=t/f&255,t&=16777215),{r:t>>16&255,g:t>>8&255,b:255&t,a:e}}var h=u.stateHandler,d=h.IStateHandler,p=h.HandStateHandler,v=u.vendors.Hammer,g=h.StateHandlerConsts.STATE_HANDLER_CREATE_TEXT,m=u.ViewerEvents,y=u.shared,w=y.getClientX,x=y.getClientY,b=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-note",n}o()(e,t),e.getStateName=function(){return g};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r=n[0];(this.hammer=new v.Manager(r,{recognizers:[[v.Tap]]})).on("tap",(function(n){var o=r.getBoundingClientRect(),i=n.srcEvent,s=w(i),u=x(i),f=[s-o.left,u-o.top],l=f[0],h=f[1];return t.getPDFPage().then((function(n){var r=n.reverseDevicePoint([l,h],t.scale,t.getRotation()),o=c()(r,2),i=o[0],s=o[1],u=e.pdfViewer.getAnnotDefaultProperty("text"),f=a()({flags:28,type:"text",rect:{left:i,right:i+20,top:s,bottom:s-20},subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Note")},u);n.addAnnot(f).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;t.pdfViewer.eventEmitter.emit(m.addAnnotSuccess,r.annot),t.pdfViewer.getStateHandlerManager().switchTo(p.getStateName()),t.annotsRender.activeAnnot(n.getId()),setTimeout((function(){t.annotsRender.doubleTapAnnot(n.getId())}),100)}))}))}))},n.getNoteRightPanelData=function(){var t=localStorage.getItem("NOTE-STORAGE-KEY");return t?JSON.parse(t):t||{}},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle)},n.out=function(){this.destroyPageHandler()},e}(d),A=(n(39),n(27),n(71),n(72),n(159),u.stateHandler),S=A.IStateHandler,P=(A.HandStateHandler,u.vendors.Hammer),R=u.shared.DebouncePromiseQueue,E=A.StateHandlerUtils,T=E.getDevicePagePoint,C=(E.deltaDeviceRect,E.appendSelectMark),_=E.removeSelectMark,I=u.ViewerEvents,k=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="",n}o()(e,t);var n=e.prototype;return n.getDefaultProps=function(t){return this.pdfViewer.getAnnotDefaultProperty(t)},n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r,o,i=n[0],a=this.hammer=new P.Manager(i,{recognizers:[[P.Pan,{direction:P.DIRECTION_ALL}]]}),s=-1,u=-1;a.on("panstart",(function(t){if(!1!==e.panStart(t,e)){s=-1,u=-1;var n=T(i,t);r=[n.x,n.y],e.hideSelectMark(),o=new R}})),a.on("panmove",(function(t){!1!==e.panMove(t,e)&&o&&o.push((function(){var n=e.pageRender,o=[r[0]+t.deltaX,r[1]+t.deltaY];return e.getTextRect(r,o,s,u).then((function(t){var e;return(e=t[0])&&"string"==typeof e.text&&(s=e.start,u=e.end),Promise.all([n.getPDFPage(),t])})).then((function(t){var e=c()(t,2),r=e[0],o=e[1];return n.transformRectArray(r,o)})).then((function(t){e.showSelectMark(t)}))}))})),a.on("panend",(function(n){if(!1!==e.panEnd(n,e)&&o&&o){o.end(),o=null;var i=[r[0]+n.deltaX,r[1]+n.deltaY];e.getTextRect(r,i,s,u).then((function(n){var r;return(r=n[0])&&"string"==typeof r.text&&(s=r.start,u=r.end),e.hideSelectMark(),Promise.all([t.getPDFPage(),n])})).then((function(t){var n=c()(t,2),r=n[0],o=n[1];return o.length<1?Promise.resolve():e.addAnnot(r,o).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;e.afterAddAnnot(r),e.pageRender.annotsRender.activeAnnot(n.getId())})).then((function(){e.pdfViewer.config.showCommentList&&e.pageRender.getAnnots().then((function(t){var n=t[t.length-2];e.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}))})).catch((function(t){}))}))}}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.hideSelectMark()},n.out=function(){this.destroyPageHandler()},n.panStart=function(){},n.panMove=function(){},n.panEnd=function(){},n.showSelectMark=function(t){C(this.pageRender.$handler,t)},n.hideSelectMark=function(){_(this.pageRender.$handler)},n.getTextRect=function(t,e,n,r){return this.pageRender.getTextContinueRectAtDevicePoints(t,e,n,r)},n.addAnnot=function(t,e){},n.afterAddAnnot=function(t){this.pdfViewer.eventEmitter.emit(I.addAnnotSuccess,t.annot)},e}(S),M=u.stateHandler,L=M.StateHandlerConsts.STATE_HANDLER_CREATE_HIGHLIGHT,D=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-highlight",n}return o()(e,t),e.getStateName=function(){return L},e.prototype.addAnnot=function(t,e){return t.addAnnot(a()({flags:4,type:"highlight",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Highlight"),rect:{left:0,right:0,top:0,bottom:0},coords:e},this.getDefaultProps("highlight")))},e}(k),O=u.stateHandler,V=O.StateHandlerConsts.STATE_HANDLER_CREATE_STRIKE_OUT,N=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-strikeout",n}return o()(e,t),e.getStateName=function(){return V},e.prototype.addAnnot=function(t,e){return t.addAnnot(a()({flags:4,type:"strikeout",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Strikeout"),rect:{left:0,right:0,top:0,bottom:0},coords:e},this.getDefaultProps("highlight")))},e}(k),H=u.stateHandler,j=H.StateHandlerConsts.STATE_HANDLER_CREATE_UNDERLINE,U=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-underline",n}return o()(e,t),e.getStateName=function(){return j},e.prototype.addAnnot=function(t,e){return t.addAnnot(a()({flags:4,type:"underline",rect:{left:0,right:0,top:0,bottom:0},coords:e,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Underline")},this.getDefaultProps("highlight")))},e}(k),F=u.stateHandler,B=F.StateHandlerConsts.STATE_HANDLER_CREATE_SQUIGGLY,Y=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-s-underline",n}return o()(e,t),e.getStateName=function(){return B},e.prototype.addAnnot=function(t,e){return t.addAnnot(a()({flags:4,type:"squiggly",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Squiggly"),rect:{left:0,right:0,top:0,bottom:0},coords:e},this.getDefaultProps("highlight")))},e}(k),X=u.stateHandler,z=X.StateHandlerConsts.STATE_HANDLER_CREATE_REPLACE,$=X.StateHandlerUtils.getCaretRectAndRotate,G=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-replace-text",n}return o()(e,t),e.getStateName=function(){return z},e.prototype.addAnnot=function(t,e){var n=this.pdfViewer.getAnnotDefaultProperty("replace"),r=$(e),o=r.rect,i=r.rotate;return t.addAnnotGroup([{flags:4,type:"strikeout",rect:{left:0,right:0,top:0,bottom:0},coords:e,noPopup:!0,typeAlias:"Replace",intent:"StrikeOutTextEdit",color:n.color||255,opacity:n.opacity||1,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Replace")},{type:"caret",flags:4,rect:o,typeAlias:"Replace",intent:"Replace",rotation:i,color:n.color||255,opacity:n.opacity||1,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Replace")}],1)},e}(k),q=n(18),W=n.n(q),J=u.stateHandler,K=u.Matrix,Q=J.IStateHandler,Z=(J.HandStateHandler,u.vendors.Hammer),tt=u.shared,et=tt.DebouncePromiseQueue,nt=tt.getClientX,rt=tt.getClientY,ot=J.StateHandlerUtils,it=ot.getDevicePagePoint,at=(ot.deltaDeviceRect,ot.appendSelectMark),st=ot.removeSelectMark,ct=ot.getCaretRectAndRotate,ut=u.ViewerEvents,ft=J.StateHandlerConsts.STATE_HANDLER_CREATE_CARET,lt=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-insert-text",n}o()(e,t),e.getStateName=function(){return ft};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r,o,i=n[0],a=this.hammer=new Z.Manager(i,{recognizers:[[Z.Pan,{direction:Z.DIRECTION_ALL}],[Z.Tap]]}),s=-1,u=-1;a.on("panstart",(function(t){if(!1!==e.panStart(t,e)){s=-1,u=-1;var n=it(i,t);r=[n.x,n.y],e.hideSelectMark(),o=new et}})),a.on("panmove",(function(t){!1!==e.panMove(t,e)&&o.push((function(){var n=e.pageRender,o=[r[0]+t.deltaX,r[1]+t.deltaY];return e.getTextRect(r,o,s,u).then((function(t){var e;return(e=t[0])&&"string"==typeof e.text&&(s=e.start,u=e.end),Promise.all([n.getPDFPage(),t])})).then((function(t){var e=c()(t,2),r=e[0],o=e[1];return n.transformRectArray(r,o)})).then((function(t){e.showSelectMark(t)}))}))})),a.on("panend",(function(n){if(!1!==e.panEnd(n,e)){o.end(),o=null;var i=[r[0]+n.deltaX,r[1]+n.deltaY];return e.getTextRect(r,i,s,u).then((function(n){var r;return(r=n[0])&&"string"==typeof r.text&&(s=r.start,u=r.end),e.hideSelectMark(),Promise.all([t.getPDFPage(),n])})).then((function(t){var n=c()(t,2),r=n[0],o=n[1];if(o.length<1)return Promise.resolve();var i=ct(o),a=i.rect,s=i.rotate;return r.addAnnot({type:"caret",flags:4,rect:a,rotation:s,subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Insert")}).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;e.pdfViewer.eventEmitter.emit(ut.addAnnotSuccess,r.annot),e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.config.showCommentList&&r.showReplyDialog()}))}))}})),a.on("tap",(function(n){if(!1!==e.tap(n,e)){var r=i.getBoundingClientRect(),o=n.srcEvent,a=nt(o),s=rt(o),c=[a-r.left,s-r.top];return t.getPDFPage().then((function(n){var r=n.reverseDevicePoint([c[0],c[1]],t.scale,t.getRotation());return n.getCharInfoAtPoint(r).then((function(t){if(t){var r=t.top-t.bottom,o=t.bottom+r/2,i=(t.right+t.left)/2,a=new K;a.e=-i,a.f=-o;var s=(t.bottom+t.top)/2,c=s-r,u=t.right-3*r/8,f=t.right+3*r/8,l=a.transformRect(u,s,f,c),h=t.rotation*Math.PI/2;return a.reset(),a.rotate(-h),l=a.transformRect.apply(a,W()(l)),a.reset(),a.e=i,a.f=o,l=a.transformRect.apply(a,W()(l)),n.addAnnot({type:"caret",rect:{left:l[0],bottom:l[1],right:l[2],top:l[3]},rotation:h}).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;e.pdfViewer.eventEmitter.emit(ut.addAnnotSuccess,r.annot),e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.config.showCommentList&&r.showReplyDialog()}))}}))}))}}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.hideSelectMark()},n.out=function(){this.destroyPageHandler()},n.panStart=function(){},n.panMove=function(){},n.panEnd=function(){},n.tap=function(){},n.showSelectMark=function(t){at(this.pageRender.$handler,t)},n.hideSelectMark=function(){st(this.pageRender.$handler)},n.getTextRect=function(t,e,n,r){return this.pageRender.getTextContinueRectAtDevicePoints(t,e,n,r)},e}(Q),ht=n(7),dt=n.n(ht),pt=u.stateHandler,vt=pt.IStateHandler,gt=u.vendors,mt=(gt.Hammer,gt.jQuery,function(t){function e(e){return t.call(this,e)||this}o()(e,t),e.textboxWidth=function(){return 100},e.textboxHeight=function(){return 20},e.calloutKneeLength=function(){return 20},e.getStateName=function(){return"createFreetext"};var n=e.prototype;return n.pageHandler=function(t){},e.edit=function(t,e){var n=t.annotsRender.getAnnotRender(e[0].objectNumber).component;n.active(!0),setTimeout((function(){n.showReplyDialog("comment")}),0)},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler")},n.out=function(){this.destroyPageHandler()},e}(vt)),yt=u.stateHandler,wt=u.ViewerEvents,xt=(yt.IStateHandler,yt.StateHandlerUtils.getDevicePagePoint),bt=u.vendors.Hammer,At=u.shared,St=At.extendOptions,Pt=At.convertFromNumberToHex,Rt=yt.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER,Et=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-typewriter",n}o()(e,t),e.getStateName=function(){return Rt};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass("fv__create-stamp-state-handler "+this.cursorStyle);var r=n[0];(this.hammer=new bt.Manager(r,{recognizers:[[bt.Tap]]})).on("tap",(function(n){var o=xt(r,n),i=function(n){var i=100*t.scale*4/3,a=20*t.scale*2/3,s={left:o.x,right:o.x+i,top:o.y,bottom:o.y+2*a},c=e.input=document.createElement("div");c.contentEditable=!0;var u=e.pdfViewer.getDefaultAnnotConfig(),f=St({defaultAppearance:{textColor:255,textSize:12}},"function"==typeof u?u("freetext","FreeTextTypewriter"):{}),l=f.defaultAppearance.textSize*t.scale*4/3;c.style.cssText="\n                    position: absolute;\n                    left: ".concat(s.left,"px;\n                    top: ").concat(s.top,"px;\n                    min-width: ").concat(l,"px;\n                    min-height: ").concat(l,"px;\n                    font-size: ").concat(l,"px;\n                    line-height: 1;\n                    font-family: FoxitPDFSDKForWeb;\n                    color: ").concat(Pt(16777215&f.defaultAppearance.textColor),";\n                    outline:1px solid #5aa;\n                    outline-offset:1px;\n                "),r.appendChild(c),c.focus(),setTimeout((function(){return c.focus()})),c.onmousedown=c.ontouchstart=c.onpointerdown=function(t){t.preventDefault(),t.stopPropagation()},c.onblur=function(){if(0===c.innerText.trim().length)r.removeChild(c),e.input=null;else{var o=c.getBoundingClientRect();s.right=s.left+o.width,s.bottom=s.top+o.height;var i=n.reverseDeviceRect(s,t.scale,t.getRotation());c.innerText=c.innerText.replace(/\n{2}/gi,"\n");var a=dt()({type:"freetext",intent:"FreeTextTypewriter",subject:"FreeTextTypewriter",rect:i,contents:c.innerText.trim(),rotation:((360-90*n.getRotation()-t.getRotation())%360+360)%360,flags:4,borderInfo:{width:0}},"subject",e.pdfViewer.i18n.t("viewer_:annotSubjects.Typewriter"));n.addAnnot(a).then((function(e){r.removeChild(c);var n=e[0],o=t.annotsRender.getAnnotRender(n.getId()).component;o.$textInput.get(0).blur(),t.pdfViewer.eventEmitter.emit(wt.addAnnotSuccess,o.annot)}))}}};t.page?i(t.page):t.getPDFPage().then(i)}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler "+this.cursorStyle),this.input&&this.input.blur()},n.out=function(){t.prototype.out.call(this)},e}(mt),Tt=u.creation.CreateFreeTextCalloutService,Ct=u.stateHandler,_t=u.ViewerEvents,It=(u.CalloutShape,Ct.IStateHandler,Ct.StateHandlerUtils.getDevicePagePoint),kt=u.vendors,Mt=kt.Hammer,Lt=(kt.jQuery,u.shared),Dt=Lt.getClientX,Ot=Lt.getClientY,Vt=(Lt.CalloutPointsReviser,Ct.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_CALLOUT),Nt=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-typewriter",n}o()(e,t),e.getStateName=function(){return Vt};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass("fv__create-callout-state-handler "+this.cursorStyle);var r=n[0];(this.hammer=new Mt.Manager(r,{recognizers:[[Mt.Pan,{direction:Mt.DIRECTION_ALL}]]})).on("panstart",(function(n){e.service||(e.service=new Tt,e.service.prepare(t));var o=It(r,n);e.service.start(o)})).on("panend",(function(n){e.service.complete().then((function(n){return e.pdfViewer.getStateHandlerManager().switchTo(),mt.edit(t,n)}))})).on("panmove",(function(t){var n=r.getBoundingClientRect(),o=t.srcEvent,i=Dt(o)-n.left,a=Ot(o)-n.top;e.service.update({x:i,y:a})}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-callout-state-handler "+this.cursorStyle),this.service&&this.service.destroy()},n.out=function(){this.destroyPageHandler()},n.addAnnot=function(t){var e=this,n=this.pageRender,r=n.pdfViewer;return n.getPDFPage().then((function(o){var i=a()({},dt()({type:"freetext",intent:"FreeTextCallout",subject:"FreeTextCallout","interior-color":16777215,rotation:((360-90*o.getRotation()-n.getRotation())%360+360)%360,flags:4},"subject",e.pdfViewer.i18n.t("viewer_:annotSubjects.Callout")),t);return r.getStateHandlerManager().switchTo(),o.addAnnot(i)})).then((function(t){var e=t[0],o=n.annotsRender.getAnnotRender(e.getId()).component;return r.eventEmitter.emit(_t.addAnnotSuccess,o.annot),mt.edit(n,t)}))},e}(mt),Ht=5,jt=0,Ut=u.stateHandler,Ft=u.ViewerEvents,Bt=(Ut.IStateHandler,Ut.StateHandlerUtils.getDevicePagePoint),Yt=u.vendors.Hammer,Xt=Ut.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_BOX,zt=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-typewriter",n}o()(e,t),e.getStateName=function(){return Xt};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass("fv__create-stamp-state-handler "+this.cursorStyle);var r=n[0];(this.hammer=new Yt.Manager(r,{recognizers:[[Yt.Tap]]})).on("tap",(function(n){var o=Bt(r,n),i=t.pdfViewer;return t.getPDFPage().then((function(n){var r=t.getScale(),i=t.getRotation(),s=100*r*4/3,c=20*r*2/3,u={left:o.x,right:o.x+s,top:o.y-c,bottom:o.y+c},f=e.pdfViewer.getAnnotDefaultProperty("freetext","FreeTextTextbox"),l=16777215;void 0!==f.fillColor&&(l=f.fillColor);var h=n.reverseDeviceRect(u,r,i),d=f.borderInfo;if(d&&d.style===Ht){var p=2===d.cloudIntensity?14.25:6;h={left:h.left-p,right:h.right+p,top:h.top+p,bottom:h.bottom-p}}var v=a()({type:"freetext",rect:h,"interior-color":l,rotation:((360-90*n.getRotation()-i)%360+360)%360,flags:4,subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Textbox")},f);return n.addAnnot(v)})).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;return i.eventEmitter.emit(Ft.addAnnotSuccess,r.annot),mt.edit(t,e)})).then((function(t){i.getStateHandlerManager().switchTo()}))}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler "+this.cursorStyle),this.__removeHandlerMouseEvent__&&this.__removeHandlerMouseEvent__()},n.out=function(){this.destroyPageHandler()},e}(mt),$t=(n(58),function(){function t(t){this.component=t,this.prepared=!1}var e=t.prototype;return e.prepare=function(){this.prepared||(this.prepared=!0,this.doPrepare())},e.doPrepare=function(){},e.show=function(){this.prepared&&this.doShow()},e.doShow=function(){},e.hide=function(){this.prepared&&this.doHide()},e.doHide=function(){},e.destroy=function(){this.component=null,this.prepared=!1},e.willRender=function(){},e.afterRender=function(){},e.render=function(t,e,n){return this.prepared||this.prepare(),this.doRender(t,e,n)},e.doRender=function(t,e){return Promise.resolve()},e.numberToRGBAString=function(t){var e=l(t);return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},e.invisibleRender=function(){},t}()),Gt=(n(28),n(177)),qt=n.n(Gt),Wt=n(126),Jt=n.n(Wt),Kt=n(59),Qt=n.n(Kt);var Zt;navigator.appVersion.match(/iphone/gi),"undefined"!=typeof devicePixelRatio&&devicePixelRatio;function te(){return Zt||(Zt=function(){if("undefined"!=typeof screen&&screen.deviceXDPI)return{x:screen.deviceXDPI,y:screen.deviceYDPI};if("undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;top:20in;border:none;padding:0;",document.body.appendChild(t);var e={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)};return t.parentNode.removeChild(t),e}return{x:96,y:96}}()),Zt}var ee,ne=function(){function t(t,e){this.fromInchRate=t,this.name=e}var e=t.prototype;return e.convertTo=function(t,e){return t/this.fromInchRate*e.fromInchRate},e.convertAreaTo=function(t,e){return t/Math.pow(this.fromInchRate,2)*Math.pow(e.fromInchRate,2)},Jt()(t,[{key:"isPixel",get:function(){return!1}}]),t}(),re=function(t){function e(e){var n;return(n=t.call(this,0,"px")||this).orientation=e,Object.defineProperty(qt()(n),"fromInchRate",{get:function(){var t=te();switch(e){case"horizontal":return t.x;case"vertical":return t.y;default:return t.x}}}),n}return o()(e,t),Jt()(e,[{key:"isPixel",get:function(){return!0}}]),e}(ne),oe={inch:"inch",custom:"custom",mi:"mi",pt:"pt",ft:"ft",yd:"yd",km:"km",m:"m",cm:"cm",mm:"mm",pica:"pica"},ie=new ne(1,oe.inch),ae=new ne(1,oe.custom),se=new ne(1/63360,oe.mi),ce=new ne(72,oe.pt),ue=new ne(1/12,oe.ft),fe=new ne(1/36,oe.yd),le=new ne(.0254/1e3,oe.km),he=new ne(.0254,oe.m),de=new ne(2.54,oe.cm),pe=new ne(25.4,oe.mm),ve=new ne(6,oe.pica),ge=new re("horizontal"),me=(new re("vertical"),ee={},dt()(ee,ie.name,ie),dt()(ee,ae.name,ae),dt()(ee,se.name,se),dt()(ee,ce.name,ce),dt()(ee,ue.name,ue),dt()(ee,fe.name,fe),dt()(ee,le.name,le),dt()(ee,he.name,he),dt()(ee,de.name,de),dt()(ee,pe.name,pe),dt()(ee,ve.name,ve),dt()(ee,ge.name,ge),ee);function ye(t){switch(t){case"in":t="inch";break;case"p":t="pica"}return me[t]}var we=function(t){function e(e){return t.call(this,e)||this}o()(e,t);var n=e.prototype;return n.prepare=function(){this.prepared||(this.canvas=document.createElement("canvas"),this.container=this.component.getContainerElement(),this.container.appendChild(this.canvas),t.prototype.prepare.call(this))},n.destroy=function(){t.prototype.destroy.call(this),this.prepared&&this.canvas.remove()},n.doShow=function(){this.canvas.classList.remove("fv__ui-hide")},n.doHide=function(){this.canvas.classList.add("fv__ui-hide")},n.convertPointToPixel=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ce.convertTo(t,ge)*e},n.willRender=function(){this.canvas.style.willChange="left, top, width, height",this.container.style.willChange="left; top"},n.afterRender=function(){this.canvas.style.willChange="auto",this.container.style.willChange="auto"},n.render=function(t,e){this.prepared||this.prepare();var n=this.component.getRenderingData(t,e);if(!n)return Promise.resolve();var r=n.annotInfo,o=r.borderInfo||{},i=this.convertPointToPixel(o.width,t),s=n.smartScale;!n.annotFlag.checkNoZoom()||(t=1);var c=n.rect,u=n.outerDeviceRect,f=n.innerDeviceRect;a()(f,{width:f.right-f.left,height:f.bottom-f.top}),a()(u,{width:u.right-u.left,height:u.bottom-u.top}),this.resetCanvasSize(u.width,u.height),this.container.style.cssText+="\n            left: ".concat(c.left,"px;\n            top: ").concat(c.top,"px;\n        ");var l=this.canvas.style;if(0===i&&0===r.borderColor&&!r.fillColor)return l.visibility="hidden",Promise.resolve();if(0===r.opacity)return l.visibility="hidden",Promise.resolve();l.visibility="unset";try{return Promise.resolve(this.doRender({outerRect:u,innerRect:f,deviceRect:c,scale:t,smartScale:s,rotate:e,renderingData:n}))}catch(t){return console.error(t),Promise.resolve()}},n.doRender=function(t){t.outerRect,t.innerRect,t.deviceRect,t.scale,t.rotate},n.resetCanvasSize=function(t,e){this.canvas.width=Math.ceil(t),this.canvas.height=Math.ceil(e),this.canvas.style.width=null,this.canvas.style.height=null},n.invisibleRender=function(){try{this.canvas.width=0}catch(t){}},e}($t),xe=(n(118),n(119),0),be=1,Ae=2,Se=3,Pe=5,Re="LineArrow",Ee="LineDimension",Te={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"},Ce=Object.keys(Te).reduce((function(t,e){return t[Te[e]]=Number(e),t}),{}),_e=0,Ie=1,ke=(Promise.resolve(),function(){function t(t,e){this.x=t,this.y=e}var e=t.prototype;return e.add=function(e,n){return new t(this.x+e,this.y+n)},e.addp=function(e){return new t(this.x+e.x,this.y+e.y)},e.subtractp=function(e){return new t(this.x-e.x,this.y-e.y)},e.subtract=function(e,n){return new t(this.x-e,this.y-n)},e.move=function(e,n){var r=n.x-this.x,o=n.y-this.y,i=e/Math.sqrt(r*r+o*o);return new t(this.x+r*i,this.y+o*i)},e.rotate=function(e,n){var r=this.x-n.x,o=this.y-n.y,i=Math.sqrt(r*r+o*o),a=Math.atan2(o,r)-e,s=i*Math.cos(a),c=i*Math.sin(a);return new t(n.x+s,n.y+c)},e.distanceTo=function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},e.slope=function(t){var e=this._dot(t);return Math.acos(e/(this._disp()*t._disp()))},e._dot=function(t){return this.x*t.x+this.y*t.y},e._disp=function(){return Math.sqrt(this._dot(this))},e.equalTo=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n=Math.abs(n),e instanceof t&&Math.abs(this.x-e.x)<=n&&Math.abs(this.y-e.y)<=n},e.clone=function(){return new t(this.x,this.y)},t}());n(17);function Me(t){throw new Error("Method not implemented".concat(t?":"+t:""))}var Le=function(){function t(){this.segments=[]}var e=t.prototype;return e.addSegment=function(t){t instanceof De&&this.segments.push(t)},e.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),t.closePath()},t}(),De=function(){function t(t,e){this.from=t,this.to=e}var e=t.prototype;return e.render=function(t){Me()},e.isJoinedBefore=function(t){return this.to.equalTo(t.from)},e.isJoinedAfter=function(t){return t.to.equalTo(this.from)},e.isJoinedWith=function(t){return this.isJoinedBefore(t)||this.isJoinedAfter(t)},t}(),Oe=function(){function t(){}return t.prototype.generate=function(){Me()},t}(),Ve=(n(121),function(t){function e(e,n,r){var o;return(o=t.call(this,null,r)||this).controlPoint1=e,o.controlPoint2=n,o}return o()(e,t),e.prototype.render=function(t){t.bezierCurveTo(this.controlPoint1.x,this.controlPoint1.y,this.controlPoint2.x,this.controlPoint2.y,this.to.x,this.to.y)},e}(De)),Ne=function(t){function e(e){return t.call(this,e)||this}return o()(e,t),e.prototype.render=function(t){t.moveTo(this.from.x,this.from.y)},e}(De),He=3.14159265358979,je=function(t){function e(e,n,r){var o;return(o=t.call(this)||this).points=e,o.innerRect=n,o.outerRect=r,o}return o()(e,t),e.prototype.generate=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=new Le,r=this.points.map((function(e){return e.y=t.innerRect.height-e.y,e})),o=r.length,i=o*e,a=r.map((function(t,e){return t.distanceTo(r[(e+1)%o])})).reduce((function(t,e){return t+e})),s={left:r[0].x,right:r[0].x,top:r[0].y,bottom:r[0].y},c=a/i;if(0==c)return n;for(var u=[],f=0,l=r[0],h=r[1],d=l.distanceTo(h),p=0,v=1;p<i;p++){for(;f>d;)f-=d,v++,l=h,h=r[v%o],d=l.distanceTo(h);u.push(l.move(f,h)),f+=c}var g=u.length,m=!0,y=5*c/8;return u.forEach((function(e,r){w(u[0==r?g-1:r-1],e,u[(r+1)%g]).forEach((function(e){var r=function(e){e&&(e.x+=t.innerRect.left-t.outerRect.left,e.y=t.innerRect.height-e.y+(t.innerRect.top-t.outerRect.top))};r(e.from),r(e.to),r(e.controlPoint1),r(e.controlPoint2),n.addSegment(e)}))})),n.rect=s,n;function w(t,e,n){var r=t.subtractp(e),o=n.subtractp(e),i=[],a=Math.atan2(r.y,r.x),s=Math.atan2(o.y,o.x);a+=Math.acos(t.distanceTo(e)/(2*y))-He/9,(s-=Math.acos(n.distanceTo(e)/(2*y)))<a&&(s+=2*He);var c={left:e.x-y,right:e.x+y,bottom:e.y-y,top:e.y+y},u=Ue(c,a,s,m);i.push.apply(i,W()(u.arrAp)),m=!1;var f=e.subtractp(n);return a=Math.atan2(f.y,f.x),s=(a+=Math.acos(n.distanceTo(e)/(2*y)))-He/9,u=Ue(c={left:n.x-y,right:n.x+y,bottom:n.y-y,top:n.y+y},a,s,m),i.push.apply(i,W()(u.arrAp)),i}},e}(Oe);function Ue(t,e,n,r){var o,i,a,s,c,u,f,l,h,d,p,v,g,m,y,w,x,b,A,S,P,R,E,T,C={};if(t.left>=t.right||t.bottom>=t.top)return{arrAp:[],pdfRect:C};if(Math.abs(n-e)<=1e-4)return{arrAp:[],pdfRect:C};var _=[];o=(t.right+t.left)/2,i=(t.top+t.bottom)/2,a=Math.abs(t.right-t.left)/2,s=Math.abs(t.top-t.bottom)/2,E=e,P=o+(p=a*Math.cos(E)),R=i+(v=s*Math.sin(E)),C.left=C.right=P,C.bottom=C.top=R,r&&_.push(new Ne(new ke(P,R)));var I=1;n<e&&(I=-1);var k=Math.floor(2*e/He);I>0&&(k+=1),k*=He/2;for(var M=!1;T=k,I>0?n<=k&&(T=n,M=!0):n>=k&&(T=n,M=!0),p=a*Math.cos(E),v=s*Math.sin(E),x=a*Math.cos(T),h=d=-a*a*s*s,g=p+.5522847498308*(P=(A=((f=a*a*v)*d-(l=a*a*(b=s*Math.sin(T)))*h)/((c=s*s*p)*l-(u=s*s*x)*f))-p),m=v+.5522847498308*(R=(S=(u*h-c*d)/(c*l-u*f))-v),y=x+.5522847498308*(P=A-x),w=b+.5522847498308*(R=S-b),g=P=o+g,m=R=i+m,C.left>g&&(C.left=g),C.bottom>m&&(C.bottom=m),C.right<g&&(C.right=g),C.top<m&&(C.top=m),y=P=o+y,w=R=i+w,C.left>y&&(C.left=y),C.bottom>w&&(C.bottom=w),C.right<y&&(C.right=y),C.top<w&&(C.top=w),x=P=o+x,b=R=i+b,C.left>x&&(C.left=x),C.bottom>b&&(C.bottom=b),C.right<x&&(C.right=x),C.top<b&&(C.top=b),_.push(new Ve(new ke(g,m),new ke(y,w),new ke(x,b))),!M;)E=T,k+=I*He/2;return{arrAp:_,pdfRect:C}}var Fe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;this.top=t,this.left=e,this.bottom=n,this.right=r},Be=function(){function t(t){this.offsetLeft=0,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.target=t}t.isOverlap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Math.max(t.left,e.left),o=Math[n?"min":"max"](t.top,e.top),i=Math[n?"max":"min"](t.bottom,e.bottom),a=Math.min(t.right,e.right);if(r<=a)if(n){if(o>=i)return(a-r)*(o-i)}else if(o<=i)return(a-r)*(i-o);return 0},t.isInRect=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t>=n.left&&t<=n.right)if(r){if(e>=n.bottom&&e<=n.top)return!0}else if(e<=n.bottom&&e>=n.top)return!0;return!1},t.rectInRect=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.left>=e.left&&t.right<=e.right;return!!r&&(n?t.top<=e.top&&t.bottom>=e.bottom:t.top>=e.top&&t.bottom<=e.bottom)},t.on=function(e){return new t(e)},t.subtract=function(t,e){return new Fe(t.top-e.top,t.left-e.left,t.bottom-e.bottom,t.right-e.right)},t.expandOffset=function(t,e){return new Fe(t.top-e.top,t.left-e.left,e.bottom-t.bottom,e.right-t.right)},t.copyTo=function(t,e){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom};var e=t.prototype;return e.moveLeft=function(t){return this.offsetLeft+=t,this.offsetRight+=t,this},e.moveTop=function(t){return this.offsetTop+=t,this.offsetBottom+=t,this},e.move=function(t,e){return this.moveLeft(t).moveTop(e)},e.moveTo=function(t,e){return this.offsetLeft=this.offsetRight=this.target.left-t,this.offsetTop=this.offsetBottom=this.target.top-e,this},e.shrink=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return this.add(new Fe(t,e,-n,-r))},e.expand=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return this.add(new Fe(-t,-e,n,r))},e.zoom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",r=this.target.right+this.offsetRight-(this.target.left+this.offsetLeft),o=this.target.bottom+this.offsetBottom-(this.target.top+this.offsetTop),i=r*t,a=o*t,s=i-r,c=a-o,u=0,f=0,l=0,h=0;switch(e){case"right":u=-s;break;case"center":u=-s/2,f=s/2;break;case"left":default:f=s}switch(n){case"bottom":l=-c;break;case"center":l=-c/2,h=c/2;break;case"top":default:h=c}return this.add(new Fe(l,u,h,f))},e.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.top,n=void 0===e?0:e,r=t.left,o=void 0===r?n:r,i=t.bottom,a=void 0===i?n:i,s=t.right,c=void 0===s?o:s;return this.offsetLeft+=o,this.offsetRight+=c,this.offsetBottom+=a,this.offsetTop+=n,this},e.extract=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight;return{left:t,top:this.target.top+this.offsetTop,right:e,bottom:this.target.bottom+this.offsetBottom}},e.boundary=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop;return{left:t,top:n,width:e-t,height:this.target.bottom+this.offsetBottom-n}},e.intersect=function(e){e instanceof t||(e=t.on(e));var n=this.toPlainObject(),r=e.toPlainObject(),o={left:Math.max(n.left,r.left),right:Math.min(n.right,r.right),top:Math.max(n.top,r.top),bottom:Math.min(n.bottom,r.bottom)};return t.on(o)},e.toPlainObject=function(){return{left:this.target.left+this.offsetLeft,right:this.target.right+this.offsetRight,top:this.target.top+this.offsetTop,bottom:this.target.bottom+this.offsetBottom}},t}(),Ye=function(t){function e(){return t.apply(this,arguments)||this}o()(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-square-canvas")},n.doRender=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.renderingData,r=n.annotInfo,o=r.borderInfo||{},i=this.convertPointToPixel(o.width||1,t.scale),a=this.canvas.getContext("2d");a.clearRect(0,0,this.canvas.width,this.canvas.height),a.save(),t.lineWidth=i,e&&(a.globalAlpha=r.opacity),0===i||!1===r.hasBorderColor?a.strokeStyle="transparent":a.strokeStyle=this.numberToRGBAString(r.color),a.lineWidth=i;try{switch(o.style){case Se:case Ae:case xe:this.renderSolid(a,r,t);break;case be:this.renderDashed(a,r,t);break;case Pe:this.renderCloud(a,r,t)}var s=r.fillColor;s&&(a.fillStyle=this.numberToRGBAString(s),a.fill()),a.stroke()}finally{a.restore()}},n.shrinkRect=function(t,e){var n=Be.on(t).shrink(e).extract();return a()(n,{width:n.right-n.left,height:n.bottom-n.top})},n.renderCloud=function(t,e,n){e.fillColor;var r=e.borderInfo.cloudIntensity,o=this.shrinkRect(n.innerRect,0),i=this.shrinkRect(n.outerRect,0),a=o.width,s=o.height;new je([new ke(0,s),new ke(a,s),new ke(a,0),new ke(0,0)],o,i).generate(32/3/r).render(t)},n.renderDashed=function(t,e,n){var r=this,o=e.borderInfo,i=o.dashes||[],a=o.dashPhase||0,s=n.scale;t.save(),t.setLineDash&&t.setLineDash(i.map((function(t){return r.convertPointToPixel(t,s)}))),t.lineDashOffset=this.convertPointToPixel(a,s),this.renderSolid(t,e,n)},n.renderSolid=function(t,e,n){var r=n.lineWidth,o=n.innerRect,i=n.outerRect,a=o.width,s=o.height,c=.5*r,u=o.left-i.left,f=o.top-i.top;t.beginPath(),t.rect(c+u,c+f,a-r,s-r),t.closePath()},e}(we),Xe=(n(211),{invisible:1,hidden:2,print:4,noZoom:8,noRotate:16,noView:32,readOnly:64,locked:128,toggleNoView:256,lockedContents:512}),ze=function(){function t(t){this.flag=t}var e=t.prototype;return e.getValue=function(){return this.flag},e.checkInvisible=function(){return(this.flag&Xe.invisible)===Xe.invisible},e.checkHidden=function(){return(this.flag&Xe.hidden)===Xe.hidden},e.checkPrint=function(){return(this.flag&Xe.print)===Xe.print},e.checkNoZoom=function(){return(this.flag&Xe.noZoom)===Xe.noZoom},e.checkNoRotate=function(){return(this.flag&Xe.noRotate)===Xe.noRotate},e.checkNoView=function(){return(this.flag&Xe.noView)===Xe.noView},e.checkReadOnly=function(){return(this.flag&Xe.readOnly)===Xe.readOnly},e.checkLocked=function(){return(this.flag&Xe.locked)===Xe.locked},e.checkToggleNoView=function(){return(this.flag&Xe.toggleNoView)===Xe.toggleNoView},e.checkLockedContents=function(){return(this.flag&Xe.lockedContents)===Xe.lockedContents},e.check=function(t){return(this.flag&t)===t},e.and=function(){return this},e.or=function(t){return this.flag=this.flag|t,this},t}(),$e=(n(122),{"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"});function Ge(t,e){return null!=t&&{}.hasOwnProperty.call(t,e)}function qe(t){if(!t||"object"!==function(t){if(null===t)return"null";switch(Qt()(t)){case"object":case"function":return $e[Object.prototype.toString(t)]||"object"}return Qt()(t)}(t)||t.nodeType||null!=t&&t==t.window)return!1;if(t.constructor&&!Ge(t,"constructor")&&!Ge(t.constructor.prototype,"isPrototypeOf"))return!1;var e=void 0;for(e in t);return void 0===e||Ge(t,e)}var We={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReplyAdded:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationReviewStateAnnotAdded:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationMarkedStateAnnotAdded:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationPositionMoved:"annotation-moved-position",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionAdded:"action-add",actionRemove:"action-remove",actionRemoved:"action-remove",layerVisibleChange:"layer-visible-change",layerVisibleChanged:"layer-visible-change",layerRemoved:"layer-removed",layerMerged:"layer-merged",bookmarkAdded:"bookmark-added",structureBookmarkAdded:"structure-bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageInfoChanged:"page-info-change",pageRotationChange:"page-rotation-change",pageRotationChanged:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptSucceeded:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pwdAndPermRemoved:"remove-password-and-permission",securityTypeChanged:"security-type-changed",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",pagesInserted:"import-pages",importPages:"import-pages",documentAttachmentAdd:"document-attachment-add",docAttachmentAdded:"document-attachment-add",documentAttachmentModify:"document-attachment-modify",docAttachmentModified:"document-attachment-modify",documentAttachmentRemove:"document-attachment-remove",docAttachmentRemoved:"document-attachment-remove",applyRedaction:"apply-redaction",redactionApplied:"apply-redaction",removeReviewState:"remove-review-state",reviewStateRemoved:"remove-review-state",removeMarkedState:"remove-marked-state",markedStateRemoved:"remove-marked-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",COChange:"COChange",COChanged:"COChange",pagesReversed:"pages-reversed",pagesMoved:"pages-moved",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated",pageMeasureScaleRatioChanged:" page-measure-scale-ratio-changed",obtainsPageFromEngine:"obtains-page-from-engine",pagesBoxChange:"pages-box-changed",pagesBoxChanged:"pages-box-changed",pagesLabelChange:"pages-label-change",pagesLabelChanged:"pages-label-change",pagesLabelNeedUpdate:"pages-label-need-change",pagesLabelNeedUpdated:"pages-label-need-change",pagesReplace:"pages-replace",pagesReplaced:"pages-replace",recognitionForm:"recognition-form",removeEmbeddedPageThumbnail:"remove-embedded-page-thumbnail",embeddedPageThumbnailRemoved:"remove-embedded-page-thumbnail",articleThreadAdded:"article-thread-added",articleThreadUpdated:"article-thread-updated",articleThreadRemoved:"article-thread-removed",articleBeadAdded:"article-bead-added",articleBeadRemoved:"article-bead-removed",articleBeadUpdated:"article-bead-updated",articleEnterReadMode:"article-enter-read-mode",articleOutReadMode:"article-out-read-mode",signChinaNoApply:"sign-china-no-apply"},Je=a()({jrLicenseSuccess:"jr-license-success",srLicenseSuccess:"sr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",beforeLoadPDFDoc:"before-load-pdf-document",startConvert:"start-convert",finishConvert:"finish-convert",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",beforeRenderPage:"before-render-page",renderPageSuccess:"render-page-success",updateZoomMode:"update-zoom-mode",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",unActiveAnnotation:"unactive-annotation",updateActiveAnnotation:"update-action-annotation",updateActionAnnotation:"update-action-annotation",removeActiveAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationBefore:"remove-action-annotation-before",removeActiveAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActiveAnnotationFailed:"remove-action-annotation-failed",removeActionAnnotationFailed:"remove-action-annotation-failed",beforeSwitchStateHandler:"before-switch-state-handler",switchStateHandler:"switch-state-handler",deactiveStateHandler:"deactive-state-handler",redactAnnotRendered:"redact-annot-rendered",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",beforeDocumentRotation:"before-document-rotation",afterDocumentRotation:"after-document-rotation",snapModeChanged:"snap-mode-changed",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",perimeterAnnotCreationStart:"perimeter-creation-start",updateDistanceAnnot:"update-distance-annot",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",addEditImage:"add-edit-image",InkImageSelected:"ink-image-selected",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",sideBarChanged:"sidebar-changed",disableScroll:"disable-scroll",enableScroll:"enable-scroll",updateScrollableStatus:"update-scrollable-status",selectText:"select-text",changeEnableJS:"change-enable-js",toggleEngineSr2JrSuccess:"toggle-engine-sr-to-jr-success",iconInited:"iconInited",iconAdded:"iconAdded",iconRemoved:"iconRemoved",annotationPermissionChanged:"annotation-premission-changed",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page",designerAssistantStatusChanged:"form-designer-assistant-status-changed",mouseEnter:"mouse-enter",mouseLeave:"mouse-leave",setFromFieldHighlight:"set_form_field_highlight",AddFontMaps:"set_font_map",thumbnailClicked:"thumbnail-clicked",layerActionActived:"layer-action-actived",redeModeShowSidebar:"rede-mode-show-sidebar",gridToggle:"grid-toggle",snapGridToggle:"snap-grid-toggle",toggleCollaborationMode:"toggleCollaborationMode",findReplaceDialogVisibleChange:"find-replace-dialog-visible-change",showAllComments:"show-all-comments",hideAllComments:"hide-all-comments",focusInObject:"focus-in-object",blurFromObject:"blur-from-object",documentWillPrint:"document-will-print",documentDidPrint:"document-did-print",documentWillSave:"document-will-save",documentDidSave:"document-did-save",verifyDocSignatureEvent:"verify-doc-signature",verifySignatureEvent:"verify-signature",clearSignatureEvent:"clear-signature",viewSignedVersionDocEvent:"view-signed-version",showFieldPropertiesEvent:"show-field-properties",showSignatureVerifyInfoEvent:"show-signature-tusted-info",compareSignedVersionEvent:"compare-signed-version",showCompareSignedVersionResultEvent:"show-compare-signed-version-result",createInkSignSuccess:"createInkSignSuccess"},We);n(178);function Ke(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(t-e)<n}function Qe(t,e){return Ke(t.x,e.x)&&Ke(t.y,e.y)}var Ze;function tn(t){return function(){if(!Ze){var t=te();Ze=[t.x,t.y]}return Ze}()[t]}function en(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t*tn(e)/72}var nn=function(t){function e(){return t.apply(this,arguments)||this}o()(e,t);var n=e.prototype;return n.getTileConfig=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.pdfViewer.getSmartScale(t),r=this.pdfViewer.config.tileSize,o=this.page.getDeviceRect(this.pdfRect,1,e),i=this.page.getDeviceRect(this.pdfRect,n,e),a=i.right-i.left,s=i.bottom-i.bottom,c=Math.ceil(s/r),u=Math.ceil(a/r);return[c,u,a,s,r,n,t,e,o.left,o.top]},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n);return a()(r,{opacity:this.annotationInfo.opacity,tileConfig:this.getTileConfig(e,n)})},e}(function(){function t(t){this.pdfRect={left:0,right:0,top:0,bottom:0},this.deviceRect={left:0,right:0,top:0,bottom:0},this.annotationInfo=this.getDefaultAnnotInfo(),this.eContainer=document.createElement("div"),this.eContainer.classList.add("fv__viewer-fake-annot-container"),this.pdfViewer=t.pdfViewer,this.pageRender=t.pageRender,this.intent=t.info.intent,function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=!0;"boolean"==typeof e&&(i=e,e=r[0],r=r.slice(1)),(null===e||"object"!==Qt()(e)&&"function"!=typeof e)&&(e={});for(var a=0,s=r.length;a<s;a++){var c=r[a];if(null!=c)for(var u in c){var f=e[u],l=c[u];if(e!==l){var h=void 0;if(i&&l&&(qe(l)||(h=Array.isArray(l)))){var d=void 0;h?(h=!1,d=f&&Array.isArray(f)?f:[]):d=f&&qe(f)?f:{},e[u]=t(i,d,l)}else void 0!==l&&(e[u]=l)}}}return e}(this.annotationInfo,t.info,this.getDefaultAnnotConfig()),this.annotationInfo.type=this.getType(),this.page=t.pageRender.page,this.scale=t.pageRender.scale,this.rotate=t.pageRender.rotate,this.pageRender.$annotsContainer.append(this.eContainer)}var e=t.prototype;return e.setRect=function(t){this.deviceRect=t;var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top),r=en(this.annotationInfo.borderInfo.width)*this.scale*2;if(e<r){var o=.5*(r-e)*(t.right-t.left>0?1:-1);t.right+=o,t.left-=o}if(n<r){var i=.5*(r-n)*(t.bottom-t.top>0?1:-1);t.top-=i,t.bottom+=i}e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);var a=this.pageRender.rotate;this.pdfRect=this.page.reverseDeviceRect(t,this.scale,a),this.eContainer.style.cssText+="\n            left: ".concat(t.left,"px;\n            top: ").concat(t.top,"px;\n            width: ").concat(e,"px;\n            height: ").concat(n,"px;\n        ")},e.setContent=function(t){this.annotationInfo.contents=t},e.zoomTo=function(t){this.scale=t},e.draw=function(){this.renderer||(this.renderer=this.generateApRenderer(),this.renderer.prepare(),this.renderer.willRender()),this.renderer.render(this.scale,this.rotate)},e.getContainerElement=function(){return this.eContainer},e.getRenderingData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.pdfViewer.getSmartScale(t),r=this.getDeviceRect(t,e),o=this.getOuterDeviceRect(t,e),i=this.getDeviceRect(n,e);return{annotInfo:this.annotationInfo,annotFlag:new ze(this.annotationInfo.flags),smartScale:n,rect:o,outerDeviceRect:o,innerDeviceRect:r,engineRenderingRect:i,scale:t,rotate:e,page:this.page}},e.getDeviceRect=function(t,e){return this.page.getDeviceRect(this.pdfRect,t,e)},e.getOuterDeviceRect=function(t,e){var n=this.annotationInfo.borderInfo;if(n&&5===n.style){var r=this.pageRender.getContainerVisibleRect(),o=r.right-r.left,i=r.bottom-r.top,a=this.page.getDeviceRect(this.pdfRect,t,e),s=(o-(a.right-a.left))/2,c=(i-(a.bottom-a.top))/2;return{left:a.left-s,right:a.right+s,top:a.top-c,bottom:a.bottom+c}}return this.page.getDeviceRect(this.pdfRect,t,e)},e.apply=function(){var t,e=this;null===(t=this.renderer)||void 0===t||t.afterRender();var n=this.getCreationJSON();return n.endingStyle&&(n.endStyle=n.endingStyle,delete n.endingStyle),n.rect=this.pdfRect,this.page.addAnnot(n).then((function(t){e.destroy();var n=t[0];return e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.eventEmitter.emit(Je.addAnnotSuccess,n),t}))},e.destroy=function(){var t;null===(t=this.renderer)||void 0===t||t.destroy(),this.getContainerElement().remove()},e.getCreationJSON=function(){return this.annotationInfo},e.getDefaultAnnotInfo=function(){return{borderInfo:{width:2,style:xe},color:16711680,opacity:1,flags:4,date:new Date}},e.getDefaultAnnotConfig=function(){var t=this.pdfViewer.getDefaultAnnotConfig();return"function"==typeof t?t(this.getType(),this.getIntent()):{}},e.getIntent=function(){return this.intent},t}()),rn=function(t){function e(){return t.apply(this,arguments)||this}o()(e,t);var n=e.prototype;return n.getType=function(){return"square"},n.generateApRenderer=function(){return new Ye(this)},e}(nn),on=(n(87),function(t){function e(){return t.apply(this,arguments)||this}o()(e,t);var n=e.prototype;return n.doRender=function(t){var e=t.renderingData.annotInfo,n=e.borderInfo||{},r=this.convertPointToPixel(n.width||1,t.scale);if(0!=r||-1!=e.borderColor||e.fillColor){var o=this.canvas.getContext("2d");o.clearRect(0,0,this.canvas.width,this.canvas.height),o.save(),t.lineWidth=r,o.globalAlpha=e.opacity,0===r||!1===e.hasBorderColor?o.strokeStyle="transparent":o.strokeStyle=this.numberToRGBAString(e.color),o.lineWidth=r;try{switch(n.style){case xe:this.renderSolid(o,e,t);break;case Se:break;case be:this.renderDashed(o,e,t);break;case Pe:0==n.cloudIntensity?this.renderSolid(o,e,t):this.renderCloud(o,e,t)}var i=e.fillColor;i&&(o.fillStyle=this.numberToRGBAString(i),o.fill()),o.stroke()}finally{o.restore()}}},n.renderSolid=function(t,e,n){this.renderDashed(t,e,n)},n.renderDashed=function(t,e,n){var r=e.borderInfo,o=n.lineWidth,i=n.innerRect,a=n.outerRect,s=r.dashes||[],c=r.dashPhase||0,u=.5*o,f=new ke(.5*(i.left+i.right)-a.left,.5*(i.top+i.bottom)-a.top),l=Math.abs(.5*i.height-u),h=Math.abs(.5*i.width-u);t.lineDashOffset=c,t.setLineDash&&t.setLineDash(s),t.beginPath(),function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI,c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];t.ellipse?t.ellipse(e,n,r,o,i,a,s,c):(t.save(),t.translate(e,n),t.rotate(i),t.scale(r,o),t.arc(0,0,1,a,s,c),t.restore())}(t,f.x,f.y,h,l),t.closePath()},n.renderCloud=function(t,e,n){var r=e.borderInfo.cloudIntensity,o=.5*n.lineWidth,i=this.shrinkRect(n.innerRect,o),a=this.shrinkRect(n.outerRect,o),s=new ke(.5*(a.right-a.left)-(i.left-a.left),.5*(a.bottom-a.top)-(i.top-a.top)),c=.5*i.height-o,u=.5*i.width-o,f=16/r,l=Math.PI/f,h=2*Math.PI,d=Array(Math.floor(h/l)-1).fill(0).map((function(t,e){return e*l%h})).map((function(t){var e=u*Math.cos(h-t),n=c*Math.sin(h-t);return s.add(e,n)}));new je(d,i,a).generate(1,t).render(t)},n.shrinkRect=function(t,e){var n=Be.on(t).shrink(e).extract();return a()(n,{width:n.right-n.left,height:n.bottom-n.top})},e}(we));n(123);var an=function(){var t=localStorage.getItem("Measuring-KEY");if(t){var e=(t=JSON.parse(t)).label;return e?e+"\n":""}return""},sn=function(){var t=localStorage.getItem("Measure-Right-Tab");return t?JSON.parse(t):{makup:!0}},cn=function(t){for(var e=t.length-1;e>=0;e--){t[e].destroy(),t.splice(e,1)}return[]},un=function(t,e,n){var r=t.getRenderingData(e,n);!r.annotFlag.checkNoZoom()||(e=1);var o=r.outerDeviceRect,i=r.innerDeviceRect;return a()(i,{width:i.right-i.left,height:i.bottom-i.top}),a()(o,{width:o.right-o.left,height:o.bottom-o.top}),{renderingData:r,innerRect:i,outerRect:o,scale:e,rotate:n}},fn=function(t,e){var n=t.canvas,r=n.width,o=n.height,i=e.x,a=e.y;i-=4,a-=4,(i=Math.max(i,2))+8>r&&(i=r-8-2),(a=Math.max(a,2))+8>o&&(a=o-8-2),t.rotate(0),t.fillStyle="#ffffff",t.rect(i,a,8,8),t.stroke(),t.fill()},ln=function(t){function e(){return t.apply(this,arguments)||this}o()(e,t);var n=e.prototype;return n.getType=function(){return"circle"},n.generateApRenderer=function(){return new on(this)},n.apply=function(){var e=this;return t.prototype.apply.call(this).then((function(t){return"CircleDimension"===e.annotationInfo.intent?e.page.getMeasureScaleRatio().then((function(n){if(n&&n.scale){var r=e.pdfViewer.getStore().getCurrentValue("measurementData"),o=an(),i=ye(r.displayUnit.name)?e.pdfViewer.i18n.t("measurement.units.".concat(r.displayUnit.name)):r.displayUnit.name;return t[0].setContent(o+parseFloat(r.area).toFixed(2)+" sq "+i).then((function(e){return t}))}return t})):t}))},e}(nn),hn=(n(124),u.stateHandler),dn=u.ViewerEvents,pn=hn.IStateHandler,vn=hn.StateHandlerUtils.getDevicePagePoint,gn=u.shared.keyboardStatus,mn=u.keyboard,yn=mn.BuiltinCommand,wn=mn.BuiltinShortcutContext,xn=function(t){function e(e,n){var r;return(r=t.call(this,e)||this).type=n,r.cursorStyle="fv__cursor-crosshair",r}o()(e,t);var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r=n.get(0),o=this.hammer=new Hammer.Manager(r);o.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL}));var i,a=!1,s=this.pdfViewer.getKeyboard(),c=function(){};s.withContext(wn.CREATING_ANNOTATION,(function(t){t.keyup(yn.CANCEL_CREATING_ANNOTATION_OPERATION,(function(){e.cancel(),a=!0,c()}),{interceptors:[function(t,e){a||e(t)}]})})),o.on("panstart",(function(t){c=s.activeContext(wn.CREATING_ANNOTATION),a=!1,i=r.getBoundingClientRect(),e.startPoint=vn(r,t),e.start({left:e.startPoint.x,top:e.startPoint.y})})),o.on("panmove",(function(t){if(!a){var n=r.getBoundingClientRect(),o=n.left-i.left,s=n.top-i.top,c=e.correctPosition({x:e.startPoint.x+t.deltaX-o,y:e.startPoint.y+t.deltaY-s});return e.currentPoint=c,e.adjust(e.currentFakeAnnot,e.startPoint,c)}})),o.on("panend",(function(t){if(c(),!a){var n=r.getBoundingClientRect(),o=n.left-i.left,s=n.top-i.top,u=e.correctPosition({x:e.startPoint.x+t.deltaX-o,y:e.startPoint.y+t.deltaY-s});e.currentPoint=u,e.end(e.currentFakeAnnot,e.startPoint,u),i=null}})),o.on("pancancel",(function(t){if(c(),!a)return i=null,e.end(e.currentFakeAnnot,e.startPoint,e.currentPoint)})),this.removeZoomToSuccessEvent=this.pdfViewer.addEventListener(dn.zoomToSuccess,(function(t){!a&&e.currentFakeAnnot&&(e.currentFakeAnnot.zoomTo(t),e.currentFakeAnnot.draw())}))},n.correctPosition=function(t){var e=this.pageRender.getShowWidth(),n=this.pageRender.getShowHeight();return{x:Math.max(0,Math.min(e,t.x)),y:Math.max(0,Math.min(n,t.y))}},n.getSubject=function(){switch(this.type){case"circle":return this.pdfViewer.i18n.t("viewer_:annotSubjects.Oval");case"square":return this.pdfViewer.i18n.t("viewer_:annotSubjects.Rectangle")}return""},n.start=function(t){var e=t.left,n=t.top,r={flags:4,subject:this.getSubject()};switch(this.type){case"circle":this.currentFakeAnnot=new ln({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:r});break;case"square":this.currentFakeAnnot=new rn({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:r});break;case"square-crop":this.currentFakeAnnot=new rn({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:{flags:4,subject:this.getSubject(),borderInfo:{width:1},color:255}});break;default:throw new Error("Will never happen")}this.currentFakeAnnot.setRect({left:e,top:n,right:e+10,bottom:n-10})},n.adjust=function(t,e,n){var r,o,i=e.x,a=e.y,s=n.x,c=n.y,u=Math.abs(i-s),f=Math.abs(a-c);gn.isShift?(u=f=Math.min(u,f),r=s<i?i-u:i,o=c<a?a-f:a):(r=Math.min(i,s),o=Math.min(a,c)),u=Math.max(u,1),f=Math.max(f,1),t.setRect({left:r,top:o,right:r+u,bottom:o+f}),t.draw()},n.end=function(t,e,n){var r=this;this.currentFakeAnnot.apply().then((function(t){if(r.pdfViewer.config.showCommentList){var e=t[0];r.pageRender.annotsRender.getAnnotRender(e.getId()).component.showReplyDialog()}})),this.currentFakeAnnot=null},n.cancel=function(){this.currentFakeAnnot&&(this.currentFakeAnnot.destroy(),this.currentFakeAnnot=null)},n.currentPointDirection=function(){var t=this.startPoint.x,e=this.startPoint.y,n=this.currentPoint.x,r=this.currentPoint.y;return n<=t?r<e?"north-west":"south-west":r<e?"north-east":"south-east"},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.offCancelEvent&&this.offCancelEvent(),this.removeZoomToSuccessEvent&&this.removeZoomToSuccessEvent()},n.out=function(){this.destroyPageHandler()},e}(pn),bn=u.stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_SQUARE,An=function(t){function e(e){return t.call(this,e,"square")||this}return o()(e,t),e.getStateName=function(){return bn},e}(xn),Sn=u.stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_CIRCLE,Pn=function(t){function e(e){return t.call(this,e,"circle")||this}return o()(e,t),e.getStateName=function(){return Sn},e}(xn),Rn=function(){function t(){this.destroyHooks=[],this.isDestroyed=!1}var e=t.prototype;return e.addDestroyHook=function(){for(var e,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=this.destroyHooks).push.apply(e,W()(o.filter((function(e){if("function"!=typeof e&&!(e instanceof t))throw new Error("[Illegal Argument] Invalid destroy hook:".concat(e,", It's not a function!"));return!0})))),function(){o.forEach((function(t){var e=n.destroyHooks.indexOf(t);e>-1&&n.destroyHooks.splice(e,1)}))}},e.destroy=function(){this.destroyHooks.forEach((function(e){"function"==typeof e?e():e instanceof t&&e.destroy()})),this.destroyHooks=[],this.isDestroyed=!0},t}(),En=u.vendors.EventEmitter,Tn=function(t){function e(e){var n;return(n=t.call(this)||this).pdfViewer=e,n.eventEmitter=new En,n.addDestroyHook((function(){n.eventEmitter.removeAllListeners()})),n.isLocked=!1,n.isStarted=!1,n}o()(e,t);var n=e.prototype;return n.init=function(){},n.start=function(){this.isStarted=!0},n.cancel=function(){this.isStarted=!1},n.emit=function(t,e){this.isLocked||this.eventEmitter.emit(t,e)},n.on=function(t,e){var n=this;return this.eventEmitter.on(t,e),function(){n.eventEmitter.off(t,e)}},n.lock=function(){this.isLocked=!0},n.unlock=function(){this.isLocked=!1},e}(Rn),Cn=function(t){function e(e,n,r){var o;return(o=t.call(this,e)||this).target=n,o.hammer=new Hammer.Manager(n),o.hammer.add(new Hammer.Pan(r)),o.addDestroyHook((function(){o.hammer.destroy()})),o}return o()(e,t),e.prototype.init=function(){var t,e,n=this,r=0,o=0,i=function(i){return function(a){if("start"===i){var s=(e=a.target).getBoundingClientRect();t={left:s.left,top:s.top}}n.eventEmitter.emit(i,{deltaX:a.deltaX-r,deltaY:a.deltaY-o,srcEvent:a.srcEvent}),"end"!==i&&"cancel"!==i||(e=null,r=0,o=0)}};this.hammer.on("panstart",i("start")),this.hammer.on("panmove",i("move")),this.hammer.on("panend",i("end")),this.hammer.on("pancancel",i("cancel"));var a=function(n){if(e){var i=e.getBoundingClientRect();r=i.left-t.left,o=i.top-t.top}};window.addEventListener("scroll",a,!0),this.addDestroyHook((function(){window.removeEventListener("scroll",a,!0)}));var s=function(t){var e=n.target.getBoundingClientRect(),r=t.clientX-e.left,o=t.clientY-e.top;n.eventEmitter.emit("mousemove",{x:r,y:o})};this.target.addEventListener("mousemove",s,!0),this.addDestroyHook((function(){n.target.removeEventListener("mousemove",s,!0)}))},e}(Tn),_n=function(){function t(t){this.component=t}var e=t.prototype;return e.numberToRGBAString=function(t){if("string"==typeof t)return t;var e=l(t);return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},e.renderLineEnd=function(t,e,n,r,o,i){if(0!==r){var a=n.renderingData,s=a.fillColor;"line"===a.annotInfo.type&&(s=a.annotInfo.styleFillColor);var c=n.scale,u=Math.atan2(i.y-o.y,i.x-o.x);switch(t.save(),t.lineJoin="miter",t.beginPath(),r){case Ce.Square:this.renderSquareEnding(t,i,u,c,e);break;case Ce.Circle:this.renderCircleEnding(t,i,u,c,e);break;case Ce.Diamond:this.renderDiamondEnding(t,i,u,c,e);break;case Ce.OpenArrow:i=i.move(e/2,o),this.renderOpenArrowEnding(t,i,u,c,e);break;case Ce.ClosedArrow:i=i.move(e/2,o),this.renderClosedArrowEnding(t,i,u,c,e);break;case Ce.Butt:this.renderButtEnding(t,i,u,c,e);break;case Ce.ROpenArrow:this.renderROpenArrowEnding(t,i,u,c,e);break;case Ce.RClosedArrow:this.renderRClosedArrowEnding(t,i,u,c,e);break;case Ce.Slash:this.renderSlashEnding(t,i,u,c,e)}switch(r){case Ce.ClosedArrow:case Ce.RClosedArrow:case Ce.Diamond:case Ce.Square:case Ce.Circle:s&&(t.fillStyle=this.numberToRGBAString(s),t.fill())}t.stroke(),t.restore()}},e.renderSquareEnding=function(t,e,n,r,o){var i=4.396*r+3.1*o,a=i/2;t.translate(e.x,e.y),t.rotate(n),t.moveTo(-a,-a),t.rect(-a,-a,i,i)},e.renderCircleEnding=function(t,e,n,r,o){var i=1.75862*r+2*o;t.translate(e.x,e.y),t.rotate(n),t.moveTo(i,0),t.arc(0,0,i,0,2*Math.PI)},e.renderDiamondEnding=function(t,e,n,r,o){var i=4.396*r+3.1*o,a=i/2;t.translate(e.x,e.y),t.rotate(n+Math.PI/4),t.moveTo(-a,-a),t.rect(-a,-a,i,i)},e.renderOpenArrowEnding=function(t,e,n,r,o){var i=30/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!1)},e.renderClosedArrowEnding=function(t,e,n,r,o){var i=30/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!0)},e.renderButtEnding=function(t,e,n,r,o){var i=Math.PI/2,a=4.396*r+3.1*o,s=new ke(e.x+a/2,e.y).rotate(Math.PI-n+i,e),c=s.rotate(Math.PI,e);t.moveTo(s.x,s.y),t.lineTo(c.x,c.y)},e.renderROpenArrowEnding=function(t,e,n,r,o){var i=150/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!1)},e.renderRClosedArrowEnding=function(t,e,n,r,o){var i=150/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!0)},e.renderArrow=function(t,e,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=4.396*r+3.1*o,c=new ke(e.x+s,e.y),u=c.rotate(Math.PI-n+i,e),f=c.rotate(Math.PI-n-i,e);t.moveTo(u.x,u.y),t.lineTo(e.x,e.y),t.lineTo(f.x,f.y),a&&t.closePath()},e.renderSlashEnding=function(t,e,n,r,o){var i=60/180*Math.PI,a=4.396*r+3.1*o,s=new ke(e.x+a/2,e.y).rotate(Math.PI-n+i,e),c=s.rotate(Math.PI,e);t.moveTo(s.x,s.y),t.lineTo(c.x,c.y)},t}(),In=Math.log(2),kn=function(t){function e(e){var n;return(n=t.call(this,e)||this).helper=new _n(e),n}o()(e,t);var n=e.prototype;return n.doRender=function(t){var e=this,n=t.renderingData,r=n.page,o=n.annotInfo,i=o.borderInfo||{},a=t.scale,s=t.rotate,c=this.convertPointToPixel(i.width,a);if(0!=c||-1!=o.borderColor||o.fillColor){var u=this.canvas.getContext("2d");u.clearRect(0,0,this.canvas.width,this.canvas.height),u.save(),t.lineWidth=c,u.globalAlpha=o.opacity,u.lineWidth=c,0===c||!1===o.hasBorderColor?u.strokeStyle="transparent":u.strokeStyle=this.numberToRGBAString(o.color);var f=t.outerRect,l=this.convertToPathPoint(n.startPoint,a,f,r,s),h=this.convertToPathPoint(n.endPoint,a,f,r,s),d=n.leaderLinePoints,p=this.convertToPathPoint(d.start,a,f,r,s),v=this.convertToPathPoint(d.end,a,f,r,s);if(n.leaderLineOffset>0){var g=n.annotInfo.leaderLineLength>0?1:-1,m=this.convertPointToPixel(n.leaderLineOffset,a),y=l.move(m,h).rotate(g*Math.PI/2,l);h=h.move(m,l).rotate(g*-Math.PI/2,h),l=y,y=p.move(m,v).rotate(g*Math.PI/2,p),v=v.move(m,p).rotate(g*-Math.PI/2,v),p=y}var w=n.captionOffset,x=new ke(this.convertPointToPixel(w.x,a),-this.convertPointToPixel(w.y,a)),b=this.convertPointToPixel(n.leaderLineExtend,a);try{if(i.style===be){var A=i.dashes||[],S=i.dashPhase||0;u.setLineDash&&u.setLineDash(A.map((function(t){return e.convertPointToPixel(t,a)}))),u.lineDashOffset=this.convertPointToPixel(S,a)}u.beginPath(),this.renderLine(u,l,h,p,v,b),u.closePath(),u.stroke(),this.helper.renderLineEnd(u,c,t,n.startStyle,v,p),this.helper.renderLineEnd(u,c,t,n.endingStyle,p,v),this.renderLineCaption(u,t,c,p,v,x)}finally{u.restore()}}},n.convertToPathPoint=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=r.getDevicePoint([t.x,t.y],e,o),a=c()(i,2),s=a[0],u=a[1];return new ke(s-n.left,u-n.top)},n.renderLine=function(t,e,n,r,o,i){if(t.moveTo(r.x,r.y),t.lineTo(o.x,o.y),t.moveTo(e.x,e.y),t.lineTo(r.x,r.y),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),i>0){var a=r.move(-i,e),s=o.move(-i,n);t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.moveTo(o.x,o.y),t.lineTo(s.x,s.y),t.moveTo(s.x,s.y)}},n.renderLineCaption=function(t,e,n,r,o,i){var a=e.renderingData,s=e.scale,c=a.annotInfo,u=c.content;if("string"==typeof u&&!((u=u.trim()).length<1)){var f,l,h=Math.atan2(o.y-r.y,o.x-r.x),d=r.distanceTo(o),p=r.move(.5*d,o),v=16*(f=s+1,Math.log(f)/In),g=16777215-(16777215&c.borderColor^10855845);t.save(),t.fillStyle=this.numberToRGBAString(g),t.font=v+"px bold Arial",t.textBaseline="middle",t.textAlign="center";var m=t.measureText(u),y=m.actualBoundingBoxAscent+m.actualBoundingBoxDescent,w=p.move(i.y,r).rotate(Math.PI/2,p),x=Math.PI/2;switch(x=i.y>0?-Math.PI/2:Math.PI/2,a.captionPos){case _e:if(0!=i.y&&0!=i.x){l=w.move(i.x,p).rotate(x,w);break}l=w;break;case Ie:var b=p.move(.5*(n+y)-i.y,o).rotate(Math.PI/2,p);l=0!=i.x?b.move(i.x,p).rotate(x,w):b}if(a.hasCaption&&(t.translate(l.x,l.y),t.rotate(h),t.fillText(u,0,0),t.restore()),t.beginPath(),!(Math.abs(i.x)<d/2+m.width/2&&Math.abs(i.y)<y)){var A=i.x>0?-1:1,S=i.x+A*m.width/2;if(Math.abs(i.x)<=m.width/2){S=0;var P=y/2+4,R=i.y>0?1:-1,E=0;Math.abs(i.y)>y&&(E=i.y-R*P),w=p.move(E,r).rotate(Math.PI/2,p)}var T=w.move(S,p).rotate(x,w),C=T.move(Math.abs(S)+n/2,w);t.moveTo(p.x,p.y),t.lineTo(w.x,w.y),t.moveTo(C.x,C.y),t.lineTo(T.x,T.y),t.moveTo(T.x,T.y),t.closePath(),t.stroke()}}},n.setMarkUp=function(t,e){var n=un(this.component,t,e),r=n.renderingData,o=n.outerRect;t=n.scale,e=n.rotate;var i=r.page,a=r.annotInfo,s=a.borderInfo||{},c=this.convertPointToPixel(s.width,t),u=this.canvas.getContext("2d");u.clearRect(0,0,this.canvas.width,this.canvas.height),u.save(),u.lineWidth=c,u.strokeStyle=this.numberToRGBAString(a.color);var f=this.convertToPathPoint(r.startPoint,t,o,i,e),l=this.convertToPathPoint(r.endPoint,t,o,i,e),h=r.leaderLinePoints,d=this.convertToPathPoint(h.start,t,o,i,e),p=this.convertToPathPoint(h.end,t,o,i,e);if(r.leaderLineOffset>0){var v=r.annotInfo.leaderLineLength>0?1:-1,g=this.convertPointToPixel(r.leaderLineOffset,t),m=f.move(g,l).rotate(v*Math.PI/2,f);l=l.move(g,f).rotate(v*-Math.PI/2,l),f=m,m=d.move(g,p).rotate(v*Math.PI/2,d),p=p.move(g,d).rotate(v*-Math.PI/2,p),d=m}var y=this.convertPointToPixel(r.leaderLineExtend,t);u.beginPath(),this.renderLine(u,f,l,d,p,y),u.closePath(),fn(u,f),fn(u,l)},e}(we),Mn=Ce,Ln=function(t){function e(e){var n,r=(n=t.call(this,e)||this).annotationInfo;switch(n.annotationInfo.endStyle&&(r.endingStyle=n.annotationInfo.endStyle),r.intent){case Re:r.endingStyle===Mn.None&&(r.endingStyle=Mn.OpenArrow);break;case Ee:r.startStyle===Mn.None&&(r.startStyle=Mn.OpenArrow),r.endingStyle===Mn.None&&(r.endingStyle=Mn.OpenArrow)}return r.hasCaption=r.enableCaption,r.leaderLinePoints.start=r.startPoint,n}o()(e,t);var n=e.prototype;return n.setRect=function(t){this.deviceRect=t;var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);var r=this.pageRender.rotate;this.pdfRect=this.page.reverseDeviceRect(t,this.scale,r),this.eContainer.style.cssText+="\n            width: ".concat(e,"px;\n            height: ").concat(n,"px;\n        ")},n.generateApRenderer=function(){return new kn(this)},n.getType=function(){return"line"},n.getStartPoint=function(){return this.annotationInfo.startPoint},n.getEndPoint=function(){return this.annotationInfo.endPoint},n.setEndPoint=function(t){var e=this.page.reverseDevicePoint([t.x,t.y],this.scale,this.rotate),n=c()(e,2),r=n[0],o=n[1];this.annotationInfo.endPoint={x:r,y:o},this.annotationInfo.leaderLinePoints.end=this.annotationInfo.endPoint;var i=this.annotationInfo.startPoint,a=i.x,s=i.y,u=this.page.getDevicePoint([a,s],this.scale,this.rotate),f=c()(u,2),l=f[0],h=f[1];this.setRect({left:l,top:h,right:t.x,bottom:t.y}),this.annotationInfo.intent==Ee&&this.calculateLeaderLinePoints()},n.calculateLeaderLinePoints=function(){var t=this.getStartPoint(),e=this.getEndPoint(),n=e.y-t.y,r=e.x-t.x,o=-1/(n/r),i=Math.atan(o),a=t.y<=e.y?1:-1,s=this.annotationInfo.leaderLineLength,c=a*Math.cos(i)*s,u=a*Math.sin(i)*s,f={x:t.x+c,y:t.y+u},l=e,h=this.pdfRect;h.left<f.x&&f.x<h.right&&h.bottom<f.y&&f.y<h.top?l={x:e.x+c,y:e.y+u}:(f={x:t.x-c,y:t.y-u},l={x:e.x-c,y:e.y-u}),this.annotationInfo.leaderLinePoints.start=f,this.annotationInfo.leaderLinePoints.end=l},n.getRenderingData=function(){var e=t.prototype.getRenderingData.call(this);return a()(a()({},e),this.annotationInfo)},n.getOuterDeviceRect=function(t,e){return Be.on(this.getDeviceRect(t,e)).expand(50).extract()},n.getDefaultAnnotInfo=function(){var e={x:0,y:0},n={x:0,y:0};return a()(a()({},t.prototype.getDefaultAnnotInfo.call(this)),{startPoint:e,endPoint:n,leaderLineLength:15,leaderLineExtend:5,captionOffset:{x:0,y:0},enableCaption:!1,leaderLinePoints:{start:e,end:n},leaderLineOffset:0,captionPos:_e,content:"",startStyle:jt,endingStyle:jt})},n.apply=function(){var e=this;return t.prototype.apply.call(this).then((function(t){return"LineDimension"===e.annotationInfo.intent?e.page.getMeasureScaleRatio().then((function(n){if(n&&n.scale){var r=e.pdfViewer.getStore().getCurrentValue("measurementData"),o=an(),i=ye(r.displayUnit.name)?e.pdfViewer.i18n.t("measurement.units.".concat(r.displayUnit.name)):r.displayUnit.name;return t[0].setContent(o+parseFloat(r.distance).toFixed(2)+" "+i).then((function(e){return t}))}return t})):t}))},e}(nn);n(163);var Dn;n(214);!function(t){t.EndPoint="end-point",t.MidPoint="mid-point",t.IntersectionPoint="intersection-point",t.NearestPoint="nearest-point"}(Dn||(Dn={}));var On=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.arc(n/2,n/2,2*Math.PI,0,360),t.stroke()},t}(),Vn=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.moveTo(n/2,0),t.lineTo(0,n),t.lineTo(n,n),t.closePath(),t.stroke()},t}(),Nn=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.rect(0,0,n,n),t.stroke()},t}(),Hn=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.moveTo(0,0),t.lineTo(n,n),t.moveTo(0,n),t.lineTo(n,0),t.stroke()},t}(),jn=function(t){function e(e){var n;return(n=t.call(this)||this).container=e,n.size=16,n.renderer=new On,n.canvas=document.createElement("canvas"),n.canvas.classList.add("fv__viewer-snapped-point"),n.addDestroyHook((function(){n.canvas.parentElement===n.container&&n.container.removeChild(n.canvas)})),n.canvas.width=n.size,n.canvas.height=n.size,n}o()(e,t);var n=e.prototype;return n.setRenderer=function(t){this.renderer=new t,this.redraw()},n.setSize=function(t){this.size=t,this.canvas.width=t,this.canvas.height=t,this.redraw()},n.setPosition=function(t,e){!function(t,e){var n=[],r=getComputedStyle(t);if("string"==typeof e){var o={};e.split(/;[\r\n\s]*/).forEach((function(t){var e=t.split(/\s*:\s*/),n=c()(e,2),r=n[0],i=n[1];o[r]=i})),e=o}for(var i in e)r[i]!==e[i]&&n.push("".concat(i,":").concat(e[i]));n.length>0&&(t.style.cssText+=n.join(";"))}(this.canvas,{left:t+"px",top:e+"px",margin:"".concat(.5*-this.size,"px ").concat(.5*-this.size,"px")})},n.show=function(t){switch(this.container.appendChild(this.canvas),t){case Dn.MidPoint:this.setRenderer(Vn);break;case Dn.IntersectionPoint:this.setRenderer(Hn);break;case Dn.NearestPoint:this.setRenderer(Nn);break;default:this.setRenderer(On)}},n.hide=function(){this.canvas.parentElement===this.container&&this.container.removeChild(this.canvas)},n.redraw=function(){if(this.renderer){var t=this.canvas.getContext("2d");t&&this.renderer.render(t)}},e}(Rn),Un=u.stateHandler,Fn=u.ViewerEvents,Bn=Un.IStateHandler,Yn=u.shared,Xn=(Yn.DebouncePromiseQueue,Yn.keyboardStatus),zn=Yn.ThrottleAsyncTaskExecutor,$n=(u.Consts.LineEndingStyle,Un.StateHandlerConsts.STATE_HANDLER_CREATE_LINE),Gn=Un.StateHandlerUtils.getDevicePagePoint,qn=u.keyboard,Wn=qn.BuiltinCommand,Jn=qn.BuiltinShortcutContext,Kn=function(t){function e(e,n,r){var o;return(o=t.call(this,e)||this).startStyle=n,o.endStyle=r,o.cursorStyle="fv__cursor-crosshair",o.executor=new zn(20),o}o()(e,t),e.getStateName=function(){return $n};var n=e.prototype;return n.createInteractionTool=function(t,e){return new Cn(this.pdfViewer,t,e)},n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r=n.get(0);this.snappedPointAssistant=new jn(r);var o,i=this.interaction=this.createInteractionTool(r,{direction:Hammer.DIRECTION_ALL});i.init();var a,s=function(){return i.on("mousemove",(function(t){e.executor.exec((function(){return e.getSnappedPoint(t).then((function(n){Qe(t,n)?(e.snappedPointAssistant.hide(),o=null):(e.snappedPointAssistant.show(n.type),e.snappedPointAssistant.setPosition(n.x,n.y),o=n)}))}))}))};this.offMouseMoveEvent=s();var u=!1,f=this.pdfViewer.getKeyboard(),l=function(){};f.withContext(Jn.CREATING_ANNOTATION,(function(t){e.offCancelEvent=t.keyup(Wn.CANCEL_CREATING_ANNOTATION_OPERATION,(function(){l(),e.cancel(),e.interaction.cancel(),u=!0}),{interceptors:[function(t,e){u||e(t)}]})})),i.on("start",(function(t){if(e.offMouseMoveEvent(),l=f.activeContext(Jn.CREATING_ANNOTATION),u=!1,o)a=[o.x,o.y];else{var n=Gn(r,t);a=[n.x,n.y]}var i=e.pageRender.page.reverseDevicePoint(a,e.pageRender.scale,e.pageRender.getRotation()),s=c()(i,2),h=s[0],d=s[1];e.start(h,d)})),i.on("move",(function(t){if(!u){var n=function(t,e){if(Xn.isShift){var n=Math.sqrt(t*t+e*e),r=Math.atan2(e,t),o=.25*Math.PI,i=Math.round(r/o)*o;t=n*Math.cos(i),e=n*Math.sin(i)}return[t,e]}(t.deltaX,t.deltaY),r=c()(n,2),o=r[0],i=r[1];e.adjust(e.fakeAnnotation,{x:a[0]+o,y:a[1]+i})}})),i.on("end",(function(t){if(!u)return l(),e.offMouseMoveEvent=s(),e.end()})),i.on("cancel",(function(t){u||(l(),e.cancel(),e.offMouseMoveEvent=s())})),this.__removeScrollEventListener=this.pdfViewer.getScrollWrap().addScrollEventListener((function(){if(!u&&e.fakeAnnotation){var t=e.fakeAnnotation.getStartPoint();a=e.pageRender.page.getDevicePoint([t.x,t.y],e.pageRender.scale,e.pageRender.getRotation())}})),this.__removeZoomToSuccessEventListener=this.pdfViewer.addEventListener(Fn.zoomToSuccess,(function(t){!u&&e.fakeAnnotation&&(e.fakeAnnotation.zoomTo(t),e.fakeAnnotation.draw())}))},n.correctCoord=function(t,e){var n=this.pageRender.getScale(),r=t.getPxWidth()*n,o=t.getPxHeight()*n;return[Math.max(0,Math.min(r,e[0])),Math.max(0,Math.min(o,e[1]))]},n.start=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Line",o=!0,i="";if(n=this.pdfViewer.customs.getMeasuringConfig){var a=n();a.hasOwnProperty("defaultLeader")&&(o=a.defaultLeader),"custom"==a.labelType&&(i=a.label)}return this.fakeAnnotation=new Ln({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({flags:4,label:i,startPoint:{x:t,y:e},endPoint:{x:t+1,y:e+1},startStyle:this.startStyle,endingStyle:this.endStyle,leaderLineLength:o?15:0,leaderLineExtend:o?5:0,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects."+r)})})},n.createAnnotJson=function(t){return a()(t,this.pdfViewer.getAnnotDefaultProperty("line")),t},n.getSnappedPoint=function(t){var e=this;return this.pageRender.getPDFPage().then((function(n){if(!n)return t;var r=e.pdfViewer.getSnapMode(e.constructor.getStateName());if(r&&r.length>0){var o=n.reverseDevicePoint([t.x,t.y],e.pageRender.scale,e.pageRender.rotate),i=c()(o,2),a=i[0],s=i[1];return n.getSnappedPoint({x:a,y:s},r).then((function(t){var r=n.getDevicePoint([t.x,t.y],e.pageRender.scale,e.pageRender.rotate),o=c()(r,2);return{x:o[0],y:o[1],type:t.type}}))}return t}))},n.adjust=function(t,e){var n=this;this.executor.exec((function(){return n.getSnappedPoint(e).then((function(r){Qe(e,r)?n.snappedPointAssistant.hide():(n.snappedPointAssistant.setPosition(r.x,r.y),n.snappedPointAssistant.show(r.type)),t.setEndPoint(r),t.draw()}))}))},n.end=function(){var t=this;this.fakeAnnotation&&this.executor.waitForLastTask().then((function(){t.snappedPointAssistant.hide();var e=t.fakeAnnotation.apply().then((function(e){if(t.pdfViewer.config.showCommentList){var n=e[e.length-2];t.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}}));return t.fakeAnnotation=null,e}))},n.cancel=function(){this.fakeAnnotation&&(this.snappedPointAssistant.hide(),this.executor.cancel(),this.pdfViewer.eventEmitter.emit(Fn.cancelAddAnnot),this.fakeAnnotation.destroy(),this.fakeAnnotation=null)},n.destroyPageHandler=function(){this.offMouseMoveEvent(),this.snappedPointAssistant.destroy(),this.executor.cancel(),this.interaction&&this.interaction.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.offCancelEvent&&this.offCancelEvent(),this.__removeZoomToSuccessEventListener&&this.__removeZoomToSuccessEventListener(),this.__removeScrollEventListener&&this.__removeScrollEventListener()},n.out=function(){this.destroyPageHandler()},e}(Bn),Qn=u.stateHandler,Zn=(u.ViewerEvents,Qn.StateHandlerConsts.STATE_HANDLER_CREATE_ARROW),tr=u.Consts.LineEndingStyle,er=function(t){function e(e){return t.call(this,e,tr.None,tr.OpenArrow)||this}return o()(e,t),e.getStateName=function(){return Zn},e.prototype.createAnnotJson=function(t){return t.intent="LineArrow",t.subject=this.pdfViewer.i18n.t("viewer_:annotSubjects.Arrow"),a()(t,this.pdfViewer.getAnnotDefaultProperty("line","LineArrow")),t},e}(Kn);n(164);function nr(t){if("clientX"in t)return t.clientX;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientX;case"touchend":case"touchcancel":return t.changedTouches[0].clientX}}function rr(t){if("clientY"in t)return t.clientY;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientY;case"touchend":case"touchcancel":return t.changedTouches[0].clientY}}var or,ir,ar,sr,cr,ur,fr,lr,hr,dr=function(){},pr="idle",vr="construct",gr="creating",mr=(n(215),{}),yr=function(){function t(){}return t.property=function(t,e,n){var r=mr;Object.getOwnPropertyDescriptor(t,"__lazy__")||Object.defineProperty(t,"__lazy__",{value:{},enumerable:!1,configurable:!1});var o=t.__lazy__[e]||{};t.__lazy__[e]=o,o.initialized=!1;var i=!1;Object.defineProperty(t,e,{get:function(){if(!o.initialized){if(i)throw new Error("The lazy property is not initialized and cannot be accessed at this time");i=!0,r=n(),o.initialized=!0,i=!1}return r},enumerable:!0,configurable:!0})},t.loadProperty=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);if(n&&n.get)return n.get.call(t)},t.release=function(t,e){Object.defineProperty(t,e,{get:function(){},enumerable:!1,configurable:!0})},t.reset=function(t,e){var n=t.__lazy__;if(n){var r=n[e];r&&(r.initialized=!1)}},t.isPropertyIntialized=function(t,e){var n=t.__lazy__;return!!(n&&n[e]&&n[e].initialized)},t.hasProperty=function(t,e){var n=t.__lazy__;return!(!n||!(e in n))},t.notNullProperty=function(e,n,r){return t.property(e,n,(function(){var o=r();return null==o&&t.reset(e,n),o}))},t.get=function(e,n,r){t.isPropertyIntialized(e,n)&&r(e[n])},t}(),wr=(ir=" -webkit- -moz- -o- -ms- ".split(" "),!!("ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch)||(or=["(",ir.join("touch-enabled),("),"heartz",")"].join(""),!!window.matchMedia&&window.matchMedia(or).matches)),xr=navigator.userAgent.toLowerCase(),br=(/macintosh|mac os x/.test(xr),/ipad|iphone|ipod/.test(xr)),Ar=(/iphone/.test(xr),/ipad/.test(xr),/ipod/.test(xr),/android/.test(xr)),Sr=/blackberry/.test(xr),Pr=/webos/.test(xr),Rr=/silk|kindle/.test(xr),Er=/aliapp/.test(xr),Tr=/teamsmobile-android/.test(xr),Cr=!Er&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(xr),_r=((!Cr||Tr)&&/mobile/.test(xr),!/(MI(.*|\s*)PAD).*/i.test(xr)&&/MI(\s+|\d+?|HM|xiaomi).*/i.test(xr),/HUAWEI/i.test(navigator.userAgent),/Linux/i.test(xr)),Ir=(!_r&&/Windows(\s+NT)?/i.test(xr),/MacIntosh|(mac os)/i.test(xr),navigator.userAgent.toLowerCase()),kr=/opera|opr/.test(Ir),Mr=/msie/.test(Ir),Lr=/trident/.test(Ir),Dr=/\sapplewebkit\//.test(Ir),Or=/chrome/.test(Ir),Vr=/safari/.test(Ir),Nr=/firefox/.test(Ir),Hr=/edg\//.test(Ir),jr=(Lr||Mr)&&!kr&&"msSaveBlob"in navigator,Ur=(jr&&(!!(ar=Ir.match(/msie ([\d\.]+)/))&&parseInt(ar[1])),!Mr&&Lr&&!kr),Fr=(Ir.indexOf("edge"),kr),Br=Dr,Yr=!Fr&&Or&&!!window.chrome&&Hr,Xr=!Fr&&Or&&!!window.chrome&&!Hr,zr=!/huawei/.test(Ir)&&!Fr&&Vr&&!Or,$r=(navigator.product,!Xr&&!Fr&&!zr&&Nr),Gr=/maxthon/.test(Ir),qr=(document.CompactMode,/tencenttraveler/.test(Ir)||/qqbrowser/.test(Ir)),Wr=(/wechat/.test(Ir),/metasr/.test(Ir)||/sogou/.test(Ir)),Jr=(/baidubrowser/.test(Ir),/ucbrowser/.test(Ir)),Kr=/liebao/.test(Ir),Qr=/miuibrowser/.test(Ir),Zr=(/huaweibrowser/.test(Ir)||/huaweialp/.test(Ir),/crios/.test(Ir));(function(){if(qr||Jr||Wr||Qr||Kr||Gr)return!1;if(-1===Ir.indexOf("chrome"))return!1;var t=function(t,e){var n=navigator.mimeTypes;for(var r in n)if(n[r][t]==e)return!0;return!1}("type","application/vnd.chromium.remoting-viewer");window.chrome})(),!!document.documentMode&&document.documentMode,document.documentMode,document.documentMode,document.documentMode;!function(t){t[t.DOWN=0]="DOWN",t[t.UP=1]="UP",t[t.MOVE=2]="MOVE"}(hr||(hr={}));var to=(sr={},dt()(sr,hr.DOWN,["MSPointerDown"]),dt()(sr,hr.MOVE,["MSPointerMove"]),dt()(sr,hr.UP,["MSPointerUp"]),sr),eo=(cr={},dt()(cr,hr.DOWN,["pointerdown"]),dt()(cr,hr.MOVE,["pointermove"]),dt()(cr,hr.UP,["pointerup"]),cr),no=(ur={},dt()(ur,hr.DOWN,["pointerdown","mousedown"]),dt()(ur,hr.MOVE,["pointermove","mousemove"]),dt()(ur,hr.UP,["pointerup","mouseup"]),ur),ro=(fr={},dt()(fr,hr.DOWN,["pointerdown","touchstart"]),dt()(fr,hr.MOVE,["pointermove","touchmove"]),dt()(fr,hr.UP,["pointerup","touchend"]),fr),oo=(lr={},dt()(lr,hr.DOWN,["mousedown","touchstart"]),dt()(lr,hr.MOVE,["mousemove","touchmove"]),dt()(lr,hr.UP,["mouseup","touchend"]),lr),io={};function ao(t,e,n,r){var o,i=0,a=io[e].map((function(e){var s,c=function(e){o!==e.type&&Date.now()-i<160?s():(o=e.type,r&&r.once&&s(),n.call(t,function(t){var e={native:t,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,target:t.target,preventDefault:function(){return t.preventDefault()},stopPropagation:function(){return t.stopPropagation()}};if(window.TouchEvent&&t instanceof window.TouchEvent){var n="touchend"===t.type||"touchcancel"===t.type?t.changedTouches[0]:t.touches[0];e.clientX=n.clientX,e.clientY=n.clientY,e.pageX=n.pageX,e.pageY=n.pageY,e.screenX=n.screenX,e.screenY=n.screenY,e.x=n.clientX,e.y=n.clientY,e.bubbles=t.bubbles,e.relatedTarget=n.target}else(t instanceof MouseEvent||t instanceof PointerEvent)&&(e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.x=t.x||t.clientX,e.y=t.y||t.clientY,e.relatedTarget=t.relatedTarget,e.button=t.button,e.buttons=t.buttons,e.bubbles=t.bubbles);return e}(e)),i=Date.now())};return s=function(){var n=a.indexOf(s);-1!==n&&(t.removeEventListener(e,c,r),a.splice(n,1))},t.addEventListener(e,c,r),s}));return function(){a.forEach((function(t){return t()}))}}function so(t){if(jr){if(!Ur)return to[t]}else{if(zr)return no[t];if(Ar)return wr?ro[t]:oo[t]}return eo[t]}yr.property(io,hr.DOWN,(function(){return so(hr.DOWN)})),yr.property(io,hr.MOVE,(function(){return so(hr.MOVE)})),yr.property(io,hr.UP,(function(){return so(hr.UP)}));var co=function(t){function e(e,n,r){var o;return(o=t.call(this,e)||this).actionName=r,o.targetElement=n,o.status=pr,o.lastMoveData={},o}o()(e,t);var n=e.prototype;return n.startCreating=function(){this.status=gr},n.cancel=function(){this.status=pr},n._addEventListener=function(t,e,n,r){return t.addEventListener(e,n,r),function(){t.removeEventListener(e,n,r)}},n.init=function(){var t=this,e=new Hammer.Manager(this.targetElement);e.add(new Hammer.Tap({event:"doubletap",taps:2,posThreshold:100,time:296}),new Hammer.Pan({direction:Hammer.DIRECTION_ALL}));var n=!0,r=null,o=dr,i=ao(this.targetElement,hr.DOWN,(function(e){if(0===e.button){var i=e.clientX,a=e.clientY;if(r={x:e.clientX,y:e.clientY},t.status===pr){o();var s=setTimeout((function(){t.status=vr,t.emit("start",{clientX:i,clientY:a,srcEvent:e.native})}),300);o=function(){clearTimeout(s)}}else if(t.status===gr){o(),n=!1;var c=setTimeout((function(){t.emit("add-point",{clientX:i,clientY:a,srcEvent:e.native}),n=!0}),300);o=function(){clearTimeout(c)}}}})),a=dr;wr&&(a=this._addEventListener(this.targetElement,"touchstart",(function(t){t.touches.length>1&&o(),Zr&&t.preventDefault()})));var s=ao(this.targetElement,hr.MOVE,(function(e){if(wr&&r&&(Math.abs(e.clientX-r.x)>25||Math.abs(e.clientY-r.y)>25)&&o(),!t.isLocked&&n){if(t.status===pr){var i=t.targetElement.getBoundingClientRect(),a=e.clientX-i.left,s=e.clientY-i.top;t.emit("mousemove",{x:a,y:s})}if(t.status===gr&&!wr){var c=e.clientX,u=e.clientY;t.emit("move",t.lastMoveData={clientX:c,clientY:u,srcEvent:e.native})}}}));e.on("doubletap",(function(e){n=!0;var r=e.srcEvent;o(),t.lastMoveData={clientX:nr(r),clientY:rr(r),srcEvent:e},c()}));var c=function(){t.status===gr&&(t.status=pr,t.unlock(),t.emit("end",t.lastMoveData),t.lastMoveData=null)},u=this.pdfViewer.getStore().subscribe(this.actionName,(function(e){switch(e){case"complete":c();break;case"cancel":t.status===gr&&(t.status=pr,t.unlock(),t.emit("cancel"));break;case"continue":t.startCreating()}}));this.addDestroyHook((function(){a(),e.destroy(),u(),i(),s()}))},e}(Tn),uo=u.stateHandler,fo=u.Log,lo=u.ViewerEvents,ho=uo.IStateHandler,po=fo.LoggerFactory,vo=u.shared,go=vo.DebouncePromiseQueue,mo=(vo.getClientX,vo.getClientY,vo.keyboardStatus),yo=vo.ThrottleAsyncTaskExecutor,wo=u.DeviceInfo.isTouchDevice,xo=u.keyboard,bo=xo.BuiltinCommand,Ao=xo.BuiltinShortcutContext,So=(po.getLogger("creation/complexshape/state"),function(t){function e(e,n){var r;return(r=t.call(this,e)||this).type=n,r.cursorStyle="fv__cursor-crosshair",r.executor=new yo(20,!0),r}o()(e,t);var n=e.prototype;return n.createInteractionTool=function(t){return new co(this.pdfViewer,t,"create-complex-shape")},n.pageHandler=function(t){var e=this;this.pageRender=t,this.destroyPageHooks=[];var n=t.$handler;n.addClass(this.cursorStyle);var r=n.get(0);this.snappedPointAssistant=new jn(r),this.interaction=this.createInteractionTool(r),this.interaction.init();var o=new go,i=this.pdfViewer.getKeyboard(),a=function(){},s=function(){a=i.activeContext(Ao.CREATING_ANNOTATION)};function c(t,e,n){if(mo.isShift){var r=t.getDeviceVertexes();if(r.length>=1){var o=r[r.length-1],i=e-o.x,a=n-o.y,s=Math.sqrt(i*i+a*a),c=Math.atan2(a,i),u=.25*Math.PI,f=Math.round(c/u)*u;return i=s*Math.cos(f),a=s*Math.sin(f),{deviceX:o.x+i,deviceY:o.y+a}}}return{deviceX:e,deviceY:n}}i.withContext(Ao.CREATING_ANNOTATION,(function(t){t.keyup(bo.CANCEL_CREATING_ANNOTATION_OPERATION,(function(){a(),e.interaction.unlock(),e.interaction.cancel(),e.cancel()}))})),"polygon"==this.type||"polyline"==this.type||this.pdfViewer.eventEmitter.addListener(lo.toolbarTabsClicked,(function(){e.out()})),this.interaction.on("start",(function(t){var n=t.clientX,o=t.clientY;e.pageRender.annotsRender.unActiveAnnot();var i=r.getBoundingClientRect(),c=n-i.left,u=o-i.top;a(),s(),e.getSnappedPoint(c,u).then((function(t){e.fakeAnnotation=e.create(t.deviceX,t.deviceY),e.interaction.startCreating()}))})),this.interaction.on("add-point",(function(t){var n=t.clientX,o=t.clientY,i=r.getBoundingClientRect(),a=n-i.left,s=o-i.top,u=c(e.fakeAnnotation,a,s);e.getSnappedPoint(u.deviceX,u.deviceY).then((function(t){e.addPoint(e.fakeAnnotation,t)}))})),this.interaction.on("move",(function(t){var n=t.clientX,o=t.clientY,i=r.getBoundingClientRect(),a=n-i.left,s=o-i.top;e.executor.exec((function(){var t=c(e.fakeAnnotation,a,s);return e.getSnappedPoint(t.deviceX,t.deviceY).then((function(n){Qe({x:t.deviceX,y:t.deviceY},{x:n.deviceX,y:n.deviceY})?e.snappedPointAssistant.hide():(e.snappedPointAssistant.show(n.type),e.snappedPointAssistant.setPosition(n.deviceX,n.deviceY)),e.adjust(e.fakeAnnotation,n)}))}))})),this.interaction.on("mousemove",(function(t){e.mousemove(t)})),this.interaction.on("end",(function(t){if(e.canBeCompleted(e.fakeAnnotation)){a();var n=r.getBoundingClientRect(),o=c(e.fakeAnnotation,t.clientX-n.left,t.clientY-n.top);e.executor.waitForLastTask().finally((function(){e.getSnappedPoint(o.deviceX,o.deviceY).then((function(t){-1==e.end(e.fakeAnnotation,t)&&(s(),e.interaction.startCreating())}))}))}else e.interaction.startCreating()})),this.interaction.on("cancel",(function(){a(),e.cancel()}));var u=function(t){e.fakeAnnotation&&(e.fakeAnnotation.zoomTo(t),e.fakeAnnotation.draw())};this.destroyPageHooks.push((function(){return o.end()}),this.pdfViewer.addEventListener(lo.zoomToSuccess,(function(t){u(t)})),this.pdfViewer.addEventListener(lo.changeViewModeSuccess,(function(t,n){u(e.pageRender.scale)})),this.pdfViewer.addEventListener(lo.fitWidthResizeViewport,(function(){u(e.pageRender.scale)})))},n.getSnappedPoint=function(t,e){var n=this;return this.pageRender.getPDFPage().then((function(r){var o=n.pdfViewer.getSnapMode(n.constructor.getStateName());if(o&&o.length>0){var i=r.reverseDevicePoint([t,e],n.pageRender.scale,n.pageRender.rotate),a=c()(i,2),s=a[0],u=a[1];return r.getSnappedPoint({x:s,y:u},o).then((function(t){var e=r.getDevicePoint([t.x,t.y],n.pageRender.scale,n.pageRender.rotate),o=c()(e,2);return{deviceX:o[0],deviceY:o[1],type:t.type}}))}return{deviceX:t,deviceY:e}}))},n.create=function(t,e){throw new Error("not implemented!")},n.addPoint=function(t,e){var n=e.deviceX,r=e.deviceY;t.addPoint(n,r),t.draw()},n.mousemove=function(t){var e=this;this.executor.exec((function(){return e.getSnappedPoint(t.x,t.y).then((function(n){var r=n.deviceX,o=n.deviceY,i=n.type;Qe(t,{x:r,y:o})?e.snappedPointAssistant.hide():(e.snappedPointAssistant.setPosition(r,o),e.snappedPointAssistant.show(i))}))}))},n.adjust=function(t,e){var n=e.deviceX,r=e.deviceY;t.setLastPoint(n,r),t.draw()},n.end=function(t,e){var n=this;this.creatingState=0,e&&!wo&&t.addPoint(e.deviceX,e.deviceY),t.apply().then((function(t){if(n.pdfViewer.config.showCommentList){var e=t[t.length-2];n.pageRender.annotsRender.getAnnotRender(e.getId()).component.showReplyDialog()}})),this.fakeAnnotation=null},n.cancel=function(){this.fakeAnnotation&&(this.executor.cancel(),this.interaction.cancel(),this.fakeAnnotation.destroy(),this.fakeAnnotation=null)},n.canBeCompleted=function(){return!0},n.createAnnotJson=function(t,e){return t},n.destroyPageHandler=function(){this.snappedPointAssistant.destroy(),this.destroyPageHooks&&this.destroyPageHooks.forEach((function(t){return t()})),this.pageRender.$handler.removeClass(this.cursorStyle),this.fakeAnnotation&&(this.interaction.status!==pr&&this.pdfViewer.eventEmitter.emit(lo.cancelAddAnnot),this.fakeAnnotation.destroy(),this.fakeAnnotation=null),this.interaction.destroy(),this.offCancelEvent&&this.offCancelEvent()},n.out=function(){this.destroyPageHandler()},e}(ho)),Po=n(89),Ro=n.n(Po),Eo=function(t){function e(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(n=t.call(this)||this).closing=r,e.length>1&&e.reduce((function(t,e,r){return n.addSegment(new To(t,e,1===r)),e})),n}return o()(e,t),e.prototype.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),this.closing&&t.closePath()},e}(Le),To=function(t){function e(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(r=t.call(this,e,n)||this).atTheStart=o,r}return o()(e,t),e.prototype.render=function(t){this.atTheStart&&t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y)},e}(De);function Co(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;t.fillStyle="#fff",e.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,n,0,360),t.stroke(),t.fill()}))}var _o=function(t){function e(e){var n;return(n=t.call(this,e)||this).helper=new _n(e),n}o()(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polyline")},n.doRender=function(t){var e=t.renderingData,n=e.annotInfo,r=n.borderInfo||{},o=t.scale,i=t.rotate,a=this.canvas.getContext("2d"),s=this.convertPointToPixel(0==r.width?.5:r.width,o);if(0!=s||-1!=n.borderColor||n.fillColor){a.clearRect(0,0,this.canvas.width,this.canvas.height);var u=e.page,f=t.innerRect,l=e.vertexes.map((function(t){var e=u.getDevicePoint([t.x,t.y],o,i),n=c()(e,2),r=n[0],a=n[1];return new ke(r-f.left,a-f.top)}));t.vertexes=l,a.save(),t.lineWidth=s,a.globalAlpha=n.opacity,a.lineWidth=s,0===s||!1===n.hasBorderColor?a.strokeStyle="transparent":a.strokeStyle=this.numberToRGBAString(n.color);try{switch(r.style){case be:case xe:this.renderSolid(a,n,t)}var h=l[l.length-1],d=l[l.length-2],p=l[0],v=l[1];this.helper.renderLineEnd(a,s,t,e.startStyle,v,p),this.helper.renderLineEnd(a,s,t,e.endingStyle,d,h)}finally{a.restore()}}},n.renderSolid=function(t,e,n){var r=this,o=n.scale,i=e.borderInfo,a=i.dashes||[],s=i.dashPhase||0;i.style===be&&(t.setLineDash&&t.setLineDash(a.map((function(t){return r.convertPointToPixel(t,o)}))),t.lineDashOffset=this.convertPointToPixel(s,o)),new Eo(n.vertexes,!1,5).render(t),t.stroke();try{if(!wr)return;void 0===n.renderingData.annotInfo.id&&Co(t,n.vertexes)}catch(t){}},n.setMarkUp=function(t,e){var n=un(this.component,t,e),r=n.renderingData,o=n.innerRect;t=n.scale,e=n.rotate;var i=r.annotInfo,a=this.canvas.getContext("2d"),s=r.page;a.strokeStyle=this.numberToRGBAString(i.color),r.vertexes.map((function(n){var r=s.getDevicePoint([n.x,n.y],t,e),i=c()(r,2),a=i[0],u=i[1];return new ke(a-o.left,u-o.top)})).forEach((function(t){return fn(a,t)})),a.restore()},e}(we),Io=function(t){function e(e){var n,r;((n=t.call(this,e)||this).vertexes=[],n.deviceVertexes=[],n.lastPoint={x:0,y:0},n.annotationInfo.vertexes)&&(r=n.vertexes).push.apply(r,W()(n.annotationInfo.vertexes));return n.annotationInfo.vertexes=n.vertexes,n}o()(e,t);var n=e.prototype;return n.getVertexes=function(){return this.vertexes},n.getDeviceVertexes=function(){return this.deviceVertexes},n.addPoint=function(t,e){var n=this.page.reverseDevicePoint([t,e],this.scale,this.rotate),r=c()(n,2),o=r[0],i=r[1];this.vertexes.push({x:o,y:i}),this.lastPoint={x:o,y:i},this.deviceVertexes.push({x:t,y:e}),this.updateRect()},n.setLastPoint=function(t,e){var n=this.deviceVertexes[this.deviceVertexes.length-1],r="number"==typeof t?t:n.x,o="number"==typeof e?e:n.y,i=this.page.reverseDevicePoint([r,o],this.scale,this.rotate),a=c()(i,2),s=a[0],u=a[1];this.lastPoint={x:s,y:u},this.updateRect()},n.getLastPoint=function(){return this.lastPoint},n.zoomTo=function(e){var n=this;this.scale!==e&&(t.prototype.zoomTo.call(this,e),this.deviceVertexes=this.vertexes.map((function(t){var r=n.page.getDevicePoint([t.x,t.y],e,n.rotate),o=c()(r,2);return{x:o[0],y:o[1]}})),this.updateRect())},n.removeLastPoint=function(){},n.getRenderingData=function(e,n){var r=t.prototype.getRenderingData.call(this,e,n),o=Ro()(this.vertexes).slice(0);return o.push(this.lastPoint),a()(a()({},r),{vertexes:o})},n.generateApRenderer=function(){return new _o(this)},n.getType=function(){return"polyline"},n.getOuterDeviceRect=function(e,n){return t.prototype.getDeviceRect.call(this,e,n)},n.updateRect=function(){if(0!==this.deviceVertexes.length){var t=this.page.getDevicePoint([this.lastPoint.x,this.lastPoint.y],this.scale,this.rotate),e=c()(t,2),n={x:e[0],y:e[1]},r=n.x,o=n.y,i=n.x,a=n.y;this.deviceVertexes.forEach((function(t){r=Math.min(r,t.x),i=Math.max(i,t.x),o=Math.min(o,t.y),a=Math.max(a,t.y)}));var s=en(this.annotationInfo.borderInfo.width)*this.scale*2+20;r-=s/2,o-=s/2,i+=s/2,a+=s/2,this.setRect({left:r,top:o,right:i,bottom:a})}},n.apply=function(){var e=this;return t.prototype.apply.call(this).then((function(t){var n=e.annotationInfo.intent;return"PolygonDimension"===n||"PolyLineDimension"===n?e.page.getMeasureScaleRatio().then((function(r){if(r&&r.scale){var o=e.pdfViewer.getStore().getCurrentValue("measurementData"),i=an(),a=ye(o.displayUnit.name)?e.pdfViewer.i18n.t("measurement.units.".concat(o.displayUnit.name)):o.displayUnit.name;return t[0].setContent(i+parseFloat("PolyLineDimension"===n?o.perimeter:o.area).toFixed(2)+" "+a).then((function(e){return t}))}return t})):t}))},e}(nn),ko=function(t){function e(e){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(n=t.call(this,e)||this).closing=r,n}o()(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polygon")},n.doRender=function(t){var e=t.renderingData,n=e.annotInfo,r=n.borderInfo||{},o=t.scale,i=t.rotate,a=this.convertPointToPixel(0==r.width?.5:r.width,o);if(0!=a||-1!=n.borderColor||n.fillColor){var s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height);var u=e.page,f=t.innerRect,l=e.vertexes.map((function(t){var e=u.getDevicePoint([t.x,t.y],o,i),n=c()(e,2),r=n[0],a=n[1];return new ke(r-f.left,a-f.top)}));t.vertexes=l,s.save(),t.lineWidth=a,s.globalAlpha=n.opacity,0===a||!1===n.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=this.numberToRGBAString(n.color),s.lineWidth=a;try{switch(r.style){case be:case xe:case Ae:case Se:this.renderSolid(s,n,t);break;case Pe:0==a?this.renderSolid(s,n,t):this.renderCloud(s,n,t)}}finally{s.restore()}}},n.renderCloud=function(t,e,n){var r=e.fillColor,o=e.borderInfo.cloudIntensity,i=n.innerRect,a=n.outerRect;new je(n.vertexes,i,a).generate(16/o).render(t),r&&(t.fillStyle=this.numberToRGBAString(r),t.fill()),t.stroke();try{if(!wr)return;var s=[],c=i.left-a.left,u=i.top-a.top;n.vertexes.forEach((function(t){s.push({x:t.x+c,y:i.height-t.y+u})})),void 0===n.renderingData.annotInfo.id&&Co(t,s)}catch(t){}},n.renderSolid=function(t,e,n){var r=this,o=n.scale,i=e.borderInfo,a=i.dashes||[],s=i.dashPhase||0,c=e.fillColor;i.style===be&&(t.setLineDash&&t.setLineDash(a.map((function(t){return r.convertPointToPixel(t,o)}))),t.lineDashOffset=this.convertPointToPixel(s,o)),new Eo(n.vertexes,this.closing).render(t),c&&(t.fillStyle=this.numberToRGBAString(c),t.fill()),t.stroke();try{if(!wr)return;void 0===n.renderingData.annotInfo.id&&Co(t,n.vertexes)}catch(t){}},n.setMarkUp=function(t,e){var n=un(this.component,t,e),r=n.renderingData,o=n.innerRect;t=n.scale,e=n.rotate;var i=r.annotInfo,a=i.borderInfo||{},s=this.convertPointToPixel(a.width,t),u=this.canvas.getContext("2d");u.clearRect(0,0,this.canvas.width,this.canvas.height);var f=r.page,l=r.vertexes.map((function(n){var r=f.getDevicePoint([n.x,n.y],t,e),i=c()(r,2),a=i[0],s=i[1];return new ke(a-o.left,s-o.top)}));u.save(),u.strokeStyle=this.numberToRGBAString(i.color),u.lineWidth=s;var h=this.closing;this.closing=!0,this.renderSolid(u,i,{vertexes:l}),u.beginPath(),l.forEach((function(t){return fn(u,t)})),this.closing=h},e}(we),Mo=function(t){function e(e){var n;(n=t.call(this,e)||this).isCloudy=!1;var r=n.annotationInfo;if(r.borderStyle)switch(r.borderInfo.style=r.borderStyle,r.borderStyle){case Pe:n.annotationInfo.borderInfo.cloudIntensity=r.borderStyleParam,n.isCloudy=!0;break;case be:n.annotationInfo.borderInfo.dashes=r.borderStyleParam}return r.borderInfo.style===Pe?n.isCloudy=!0:n.isCloudy=!1,n}o()(e,t);var n=e.prototype;return n.generateApRenderer=function(){var t=this.isCloudy;return new ko(this,t)},n.getOuterDeviceRect=function(e,n){return this.isCloudy?Be.on(this.getDeviceRect(e,n)).expand(100*e).extract():t.prototype.getDeviceRect.call(this,e,n)},n.getType=function(){return"polygon"},e}(Io),Lo=u.stateHandler,Do=u.Log,Oo=u.DeviceInfo,Vo=Do.LoggerFactory,No=Lo.StateHandlerConsts.STATE_HANDLER_CREATE_POLYGON,Ho=Vo.getLogger("CreatePolygonStateHandler"),jo=function(t){function e(e){return t.call(this,e,"polygon")||this}o()(e,t),e.getStateName=function(){return No};var n=e.prototype;return n.create=function(t,e){var n=new Mo({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({type:"polygon",flags:4,date:new Date,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Polygon")})});return n.addPoint(t,e),Oo&&Oo.isTouchDevice&&n.draw(),this.pdfViewer.eventEmitter.emit(Je.perimeterAnnotCreationStart,n),n},n.canBeCompleted=function(t){var e=t.getVertexes().length;return e<2&&Ho.debug("polygon has only ".concat(e," points")),e>=2},e}(So),Uo=u.stateHandler,Fo=u.Log,Bo=u.DeviceInfo,Yo=Fo.LoggerFactory,Xo=Uo.StateHandlerConsts.STATE_HANDLER_CREATE_POLYLINE,zo=(Yo.getLogger("creation/polyline/state"),function(t){function e(e){return t.call(this,e,"polyline")||this}return o()(e,t),e.getStateName=function(){return Xo},e.prototype.create=function(t,e){var n=this.pdfViewer.getAnnotDefaultProperty("polyline"),r=new Io(a()({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({type:"polyline",flags:4,date:new Date,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Polyline")})},n));return r.addPoint(t,e),Bo&&Bo.isTouchDevice&&r.draw(),r},e}(So)),$o=u.stateHandler,Go=u.Log,qo=u.DeviceInfo,Wo=u.Consts.BORDER_STYLE,Jo=Go.LoggerFactory,Ko=$o.StateHandlerConsts.STATE_HANDLER_CREATE_POLYGON_CLOUD,Qo=Jo.getLogger("CreatePolygonCloudStateHandler"),Zo=function(t){function e(e){return t.call(this,e,"polygon")||this}o()(e,t),e.getStateName=function(){return Ko};var n=e.prototype;return n.create=function(t,e){var n,r=this.pdfViewer.getAnnotDefaultProperty("polygon","PolygonCloud"),o=a()({type:"polygon",flags:4,date:new Date,borderStyle:Wo.CLOUDY,borderStyleParam:2,intent:"PolygonCloud",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Cloud")},r);if(n=r.borderInfo){o.borderStyle=n.style;var i=n.dashes;i.length>0?o.borderStyleParam=i:o.borderStyleParam=n.cloudIntensity}var s=new Mo({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:o});return s.addPoint(t,e),qo&&qo.isTouchDevice&&s.draw(),s},n.canBeCompleted=function(t){var e=t.getVertexes().length;return e<2&&Qo.debug("polygon has only ".concat(e," points")),e>=2},e}(So),ti=function(t){function e(e){var n;return(n=t.call(this,e)||this).lastX=0,n.lastY=0,n}o()(e,t);var n=e.prototype;return n.prepare=function(){t.prototype.prepare.call(this),Xr||$r||zr||Yr||(this.canvas.style.cssText+='\n            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n            -ms-filter: alpha(opacity=50);\n            filter: alpha(opacity=50);\n            -moz-opacity: 0.5;\n            -khtml-opacity: 0.5;\n            opacity: 0.5;\n        ')},n.doRender=function(e){e.smartScale,e.scale,this.component;var n=e.renderingData,r=n.annotInfo;if(0!=r.hasBorderColor){var o=this.canvas.getContext("2d"),i=n.outerDeviceRect,a=i.right-i.left,s=i.bottom-i.top;if(this.container.style.cssText+="\n                left: ".concat(i.left,"px;\n                top: ").concat(i.top,"px;\n            "),this.canvas.style.cssText+="width: ".concat(a,"px;height: ").concat(s,"px;"),o.save(),o.fillStyle=this.numberToRGBAString(r.color),o.globalAlpha=n.opacity,n.isArea)o.fillRect(0,0,this.canvas.width,this.canvas.height);else t.prototype.doRender.call(this,e),e.quadRects.forEach((function(t){o.fillRect(t.left,t.top,t.width,t.textBlockHeight)}));o.restore()}},e}(function(t){function e(){return t.apply(this,arguments)||this}o()(e,t);var n=e.prototype;return n.convertToCanvasBasedPoint=function(t,e,n,r,o,i){var a=o.getDevicePoint([t,e],r,i),s=c()(a,2),u=s[0],f=s[1];return{x:u-n.left,y:f-n.top}},n.doRender=function(t){var e=this,n=t.scale,r=t.renderingData,o=t.rotate,i=r.page,a=r.annotInfo,s=a.startCharInfo,c=a.endCharInfo,u=r.quadPoints,f=r.outerDeviceRect;if(!s){var l=u[0];s={left:l[0].x,top:l[0].y,right:l[1].x,bottom:l[2].y}}if(!c){var h=u[u.length-1];c={left:h[0].x,top:h[0].y,right:h[1].x,bottom:h[2].y}}var d=u.map((function(t,r){var a=t.map((function(t){return e.convertToCanvasBasedPoint(t.x,t.y,f,n,i,o)})),s=a.map((function(t){return t.x})),c=a.map((function(t){return t.y})),u=Math.min.apply(Math,W()(s)),l=Math.max.apply(Math,W()(s)),h=Math.max.apply(Math,W()(c)),d=Math.min.apply(Math,W()(c));return{left:u,right:l,bottom:h,top:d,width:l-u,height:h-d,textBlockHeight:h-d}}));t.quadRects=d},e}(we)),ei=function(t){function e(e){var n;return(n=t.call(this,e)||this).annotationInfo.dicts=a()({AreaHi:"AreaHi"},n.annotationInfo.dicts||{}),n.eContainer.classList.add("fv__viewer-fake-highlight-area-annot"),n}o()(e,t);var n=e.prototype;return n.setRect=function(e){t.prototype.setRect.call(this,e),this.annotationInfo.coords=[this.pdfRect],this.annotationInfo.quadPoints=[{x:this.pdfRect.left,y:this.pdfRect.top},{x:this.pdfRect.right,y:this.pdfRect.top},{x:this.pdfRect.right,y:this.pdfRect.bottom},{x:this.pdfRect.left,y:this.pdfRect.bottom}]},n.getDefaultAnnotInfo=function(){var e=t.prototype.getDefaultAnnotInfo.call(this);return e.color=16776960,e},n.generateApRenderer=function(){return new ti(this)},n.getType=function(){return"highlight"},n.getCreationJSON=function(){return a()(a()({},t.prototype.getCreationJSON.call(this)),{color:this.annotationInfo.color})},n.getRenderingData=function(e,n){var r=t.prototype.getRenderingData.call(this,e,n);return a()(a()({},r),{coords:[r.outerDeviceRect],isArea:!0})},e}(nn),ni=u.stateHandler,ri=ni.IStateHandler,oi=ni.StateHandlerUtils.getDevicePagePoint,ii=ni.StateHandlerConsts.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT,ai=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-crosshair",n}o()(e,t),e.getStateName=function(){return ii};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t,this.pageDestroyHooks=[];var n=t.$handler.get(0);t.$handler.addClass(this.cursorStyle);var r=this.hammer=new Hammer.Manager(n);r.add(new Hammer.Pan),r.on("panstart",(function(t){e.startPoint=oi(n,t),e.start(e.startPoint)})),r.on("panmove",(function(t){return e.currentPoint={x:e.startPoint.x+t.deltaX,y:e.startPoint.y+t.deltaY},e.adjust(e.fakeAnnotation,e.startPoint,e.currentPoint)})),r.on("panend",(function(t){e.end(e.fakeAnnotation)})),r.on("pancancel",(function(t){return e.end(e.fakeAnnotation)})),this.pageDestroyHooks.push((function(){return r.destroy()}))},n.start=function(t){var e=t.x,n=t.y;return this.fakeAnnotation=new ei({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:{flags:4,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Highlight")}}),this.fakeAnnotation.setRect({left:e,right:e+1,top:n,bottom:n+1}),this.fakeAnnotation},n.adjust=function(t,e,n){var r=e.x,o=e.y,i=n.x,a=n.y,s=Math.min(r,i),c=Math.min(o,a),u=Math.max(r,i),f=Math.max(o,a);t.setRect({left:s,top:c,right:u,bottom:f}),t.draw()},n.end=function(t){var e=this;t.apply().then((function(t){if(e.pdfViewer.config.showCommentList){var n=t[t.length-2];e.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}}))},n.destroyPageHandler=function(){this.fakeAnnotation&&this.fakeAnnotation.destroy(),this.pageDestroyHooks&&this.pageDestroyHooks.forEach((function(t){return t()})),this.pageRender.$handler.removeClass(this.cursorStyle)},e}(ri),si=u.stateHandler,ci=u.ViewerEvents,ui=u.shared,fi=u.vendors.jQuery,li=si.IStateHandler,hi=si.StateHandlerUtils.getDevicePagePoint,di=si.StateHandlerConsts.STATE_HANDLER_CREATE_PENCIL,pi=u.shared,vi=pi.getClientX,gi=pi.getClientY,mi=pi.convertFromNumberToHex,yi=(pi.extendOptions,ui.browser.dpr),wi=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).cursorStyle="fv__cursor-pencil",e}o()(e,t),e.getStateName=function(){return di},e.getStateHandlerName=function(){return"pencilStateHandler"};var n=e.prototype;return n.initTimeout=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.timeout;clearTimeout(r),n&&(this.timeout=setTimeout((function(){e.addAnnot()}),t))},n.pageHandler=function(t){var e=this,n=this;this.pageRender=t;var r=t.$handler;r.addClass(this.cursorStyle);var o=r.width(),i=r.height();this.$canvas=fi('<canvas style="width:'+o+"px;height:"+i+'px" width="'+o*yi+'" height="'+i*yi+'"></canvas>'),r.append(this.$canvas);var s,c=this.$canvas[0].getContext("2d"),u=r[0],f=this.hammer=new Hammer.Manager(u,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});this.pencilLists=[],f.on("panstart",(function(o){var i=e.pencilLists;s=[],0==i.length&&function(){var e=a()({borderInfo:{width:2},color:16711680},n.pdfViewer.getDefaultAnnotConfig()("ink"));e.color=16777215&e.color;var o=r.width(),i=r.height();n.$canvas[0].width=o*yi,n.$canvas[0].height=i*yi,n.$canvas.css("width",o+"px"),n.$canvas.css("height",i+"px"),c.lineWidth=e.borderInfo.width*t.getScale()*yi,c.strokeStyle=mi(e.color),c.lineJoin="round",c.lineCap="round"}(),i.push(s);var f=hi(u,o);c.beginPath(),c.moveTo(f.x*yi,f.y*yi),s.push({x:f.x,y:f.y,type:1})})),f.on("panmove",(function(t){var e=xi(u,t);s.push({x:e.x,y:e.y,type:2}),c.lineTo(e.x*yi,e.y*yi),c.stroke()})),f.on("panend",(function(n){var r=xi(u,n);c.lineTo(r.x*yi,r.y*yi),c.stroke();var o=t.pdfViewer.getStateHandlerManager().getStateHandlerConfig(e.constructor.getStateHandlerName()),i=o?o.pencilTimeout:null;i=null!=i?i:3e3,e.initTimeout(i)}))},n.addAnnot=function(){var t=this,e=this.pencilLists;if(!e||e.length<1)return Promise.resolve();var n=this.pageRender;return n.getPDFPage().then((function(r){var o={left:1e4,right:0,top:0,bottom:1e4},i=e.reduce((function(t,e){return function(t,e,n,r,o,i){return o.forEach((function(o){var a=t.reverseDevicePoint([o.x,o.y],e,n),s=c()(a,2),u=s[0],f=s[1];u>i.right?i.right=u:u<i.left&&(i.left=u),f>i.top?i.top=f:f<i.bottom&&(i.bottom=f),r.push({x:u,y:f,type:o.type})})),r}(r,n.scale,n.rotate,t,e,o)}),[]);return r.addAnnot({type:"ink",flags:4,rect:o,inkList:i,subject:t.pdfViewer.i18n.t("viewer_:annotSubjects.Pencil")}).then((function(e){n.pdfViewer.eventEmitter.emit(ci.addAnnotSuccess,e[0]),t.$canvas[0].width=0,t.pencilLists=[]})).then((function(){t.pdfViewer.config.showCommentList&&t.pageRender.getAnnots().then((function(e){var n=e[e.length-2];t.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}))}))}))},n.destroyPageHandler=function(){var t=this;this.initTimeout(0,!1),this.pageRender.docRender.formRender.addTask((function(e){return t.addAnnot().then((function(e){t.$canvas.remove(),t.hammer&&t.hammer.destroy(),t.pageRender.$handler.removeClass(t.cursorStyle),t.pencilLists=null}))}),!0)},n.out=function(){this.destroyPageHandler()},e}(li);function xi(t,e){var n=t.getBoundingClientRect(),r=e.srcEvent,o=vi(r),i=gi(r);return{x:o-n.left,y:i-n.top}}var bi,Ai,Si=n(73),Pi=n.n(Si),Ri=n(41),Ei=n.n(Ri);!function(t){t.CREATE_ANNOT="create-annots",t.REMOVE_ANNOT="remove-annots",t.UPDATE_ANNOT="update-annots",t.ADD_REPLY="add-reply",t.REMOVE_REPLY="remove-reply",t.ADD_REVIEW_STATE="add-review-state",t.ADD_MARKED_STATE="add-marked-state",t.UPDATE_ANNOT_CONTENT="update-comment-content",t.PPO_REMOVE_PAGE="ppo-remove-page",t.PPO_REMOVE_PAGES="ppo-remove-pages",t.PPO_INSERT_PAGE="ppo-insert-page",t.PPO_ROTATE_PAGE="ppo-rotate-page",t.PPO_MOVE_PAGE="ppo-move-page",t.MOVE_ANNOTS_BETWEEN_PAGES="move-annotations-between-pages",t.IMPORT_ANNOTATIONS_FILE="import-annotations-file"}(bi||(bi={})),function(t){t.fully="fully",t.playable="playable",t.adjustable="adjustable",t.deletable="deletable",t.modifiable="modifiable",t.attachmentDownloadable="attachmentDownloadable",t.redactionApplicable="redactionApplicable",t.replyable="replyable",t.editable="editable"}(Ai||(Ai={}));var Ti,Ci=n(40),_i=n.n(Ci),Ii=(n(217),function(){function t(t,e){this.pageRender=t,this.circle=document.createElement("div"),this.circle.classList.add("eraserCircle"),this.circle.style="position:absolute; border:1px solid #000000;display:block;border-radius:50%;",this.wrapCircle=e,this.$eraserCircle=null,this.clientY,this.clientX}var e=t.prototype;return e.init=function(){var t=this;_i()(".fv__ui-pdfviewer").on("scroll",(function(e){t.$eraserCircle&&t.eraserMove(e)})),this.wrapCircle.on("mouseenter",(function(){t.wrapCircle.append(t.circle),t.$eraserCircle=_i()(".eraserCircle"),t.$eraserCircle.css("display","block")})),this.wrapCircle.on("mousemove",(function(e){t.eraserMove(e)})),this.wrapCircle.on("mouseleave",(function(e){t.$eraserCircle.remove()}))},e.eraserMove=function(t){var e=t||window.event,n=this.pageRender.pdfViewer.getStateHandlerManager().getStateHandlerConfig("eraserStateHandler"),r=n?n.width:8,o=this.$eraserCircle?this.$eraserCircle:_i()(".eraserCircle");e.clientY&&(this.clientY=e.clientY),e.clientX&&(this.clientX=e.clientX);var i=o[0].getBoundingClientRect();o.width(r),o.height(r);var a=_i()(this.wrapCircle).offset().top,s=_i()(this.wrapCircle).offset().left,c=_i()("html").scrollLeft(),u=this.clientY-i.height/2-a,f=this.clientX-i.width/2-s+c;o.css({top:u,left:f})},e.destroy=function(){this.$eraserCircle&&this.$eraserCircle.remove(),this.wrapCircle.off(),_i()(".fv__ui-pdfviewer").off("scroll")},t}()),ki=u.stateHandler,Mi=u.Log,Li=u.ViewerEvents,Di=u.shared,Oi=u.DeviceInfo.isDesktop,Vi=Di.eraser,Ni=Vi.Eraser,Hi=Vi.Point,ji=ki.IStateHandler,Ui=u.Consts.POINT_TYPE,Fi=ki.StateHandlerUtils.getDevicePagePoint,Bi=Mi.LoggerFactory.getLogger("EraserStateHandler"),Yi=Oi?8:20,Xi=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).cursorStyle="fv__cursor-eraser fv__cursor-none",e.eraserCircle=null,e}o()(e,t),e.getStateName=function(){return"eraser"},e.getStateHandlerName=function(){return"eraserStateHandler"};var n=e.prototype;return n.pageHandler=function(){var t=Pi()(Ei.a.mark((function t(e){var n,r,o,i,a,s,c=this;return Ei.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.pageRender=e,n=e.$handler,(r=new Ii(e,n)).init(),this.eraserCircle=r,this.allInkList={},this.eraseInkList={},n.addClass(this.cursorStyle),o=n[0],i=this.hammer=new Hammer.Manager(o,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]}),a=e.docRender.formRender.addTask((function(t){return e.getAnnots().then((function(t){return t.filter((function(t){return"ink"===t.getType()}))}))}),!0),e.getPDFPage().then((function(t){i.on("panstart",(function(t){c.startPoint=Fi(o,t),s=a.then((function(t){t.forEach((function(t){c.allInkList[t.getId()]={annot:t,inkList:t.getInkList()}}))}))})),i.on("panmove",(function(n){c.lastPoint=c.currentPoint||c.startPoint,c.currentPoint={x:c.startPoint.x+n.deltaX,y:c.startPoint.y+n.deltaY},s=s.then((function(n){return a.then((function(n){if(0!==n.length||c.currentPoint){var r=e.pdfViewer.getStateHandlerManager().getStateHandlerConfig(c.constructor.getStateHandlerName()),o=r?r.width:Yi;return c.erase(t,n,c.currentPoint,o)}}))}))})),i.on("panend",(function(t){var n=document.getElementById("eraser");n&&n.remove(),s.then((function(t){var n=[],r=[];for(var o in c.eraseInkList){var i=c.allInkList[o],a=c.eraseInkList[o];i.isRemove=a.isRemove,n.push(i),r.push(a)}e.pdfViewer.eventEmitter.emit(Li.eraserSuccess,n,r);var s=Object.keys(c.eraseInkList).map((function(t){return c.eraseInkList[t]})).filter((function(t){return!t.isRemove})).map((function(t){return t.annot.exportToJSON()}));c.pdfViewer.collaborate(bi.UPDATE_ANNOT,{annots:s})}))}))}));case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.erase=function(){var t=Pi()(Ei.a.mark((function t(e,n,r){var o,i,a,s,u,f,l,h,d,p,v,g,m,y,w=this,x=arguments;return Ei.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y=function(t,e){var n=e.x>=t.left&&e.x<=t.right,r=e.y>=t.bottom&&e.y<=t.top;return n&&r},o=x.length>3&&void 0!==x[3]?x[3]:Yi,i=this.pdfViewer,a=this.pageRender,s=a.getScale(),u=a.getRotation(),f=e.reverseDevicePoint([r.x,r.y],s,u),l=c()(f,2),h=l[0],d=l[1],p={x:h,y:d},v=function(){var t=Pi()(Ei.a.mark((function t(e,n){var r;return Ei.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map(n));case 2:return r=t.sent,t.abrupt("return",e.filter((function(t,e){return r[e]})));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),t.next=11,v(n,function(){var t=Pi()(Ei.a.mark((function t(e){var n,r,o;return Ei.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getRect(),t.next=3,w.pdfViewer.getAnnotAuthorityManager();case 3:return r=t.sent,t.next=6,r.getPermission(e);case 6:if(!((o=t.sent)&&o.permissions&&0!==o.permissions.length&&o.permissions.indexOf(Ai.fully)<0)){t.next=9;break}return t.abrupt("return",null);case 9:return t.abrupt("return",y(n,p));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 11:return g=t.sent,m=g.map((function(t){return t.$$lastErasePromise=(t.$$lastErasePromise||Promise.resolve()).then(e,e).then((function(e){var n=a.getAnnotRender(t.getId());return w.eraseInkList[t.getId()]={annot:t,inkList:t.getInkList(),isRemove:!n},e}));function e(){var e,n=t.getInkList(),r=new Ni(o/2).erase(n.map((function(t){return new Hi(t.x,t.y,t.type)})),new Hi(h,d)).reduceRight((function(t,e){var n=t[0];return n&&n.type===Ui.MOVE_TO&&n.type===e.type||t.unshift(e),t}),[]),s=(e=r,e.reduce((function(t,e){return e.type===Ui.MOVE_TO&&t.push([]),t[t.length-1].push(e),t}),[])).filter((function(t){if(t.length<1)return!1;var e=t[0],n=0;return t.forEach((function(t){n+=t.distanceTo(e),e=t})),n>.01}));if(0!==s.length){var c=s.reduce((function(t,e){return t.concat(e)}),[]);return t.setInkList(c)}var u=a.getAnnotRender(t.getId());if(u){var f=u.component.annot;return f.getPDFPage().removeAnnot(f).then((function(){i.collaborate(bi.REMOVE_ANNOT,[{annotId:f.getUniqueID(),pageIndex:a.index}])}))}Bi.debug("annotRender === undefined",u,s,r)}})),t.abrupt("return",Promise.all(m));case 14:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.eraserCircle.destroy()},n.out=function(){this.destroyPageHandler()},e}(ji),zi=(n(224),n(230),u.PDFViewer),$i=u.shared.Store;!function(t){t.CUSTOM_STAMP_LIST_ADDED="custom-stamps-added",t.CUSTOM_STAMP_LIST_REMOVED="custom-stamps-removed",t.CUSTOM_STAMP_LIST_UPDATED="custom-stamps-updated",t.DEFAULT_STAMP_LIST_UPDATED="default-stamps-updated",t.DEFAULT_STAMP_LIST_REMOVED="default-stamps-removed"}(Ti||(Ti={}));var Gi=function(){function t(){this.customStamps={},this.defaultStamps={},this.store=new $i,this.defaultStampRewrited=!1;var t=document.createElement("img");t.draggable=!1,t.style.cssText="position: absolute;opacity:0.5",this.currentPreviewerImg=t}t.inject=function(){return{pdfViewer:zi}};var e=t.prototype;return e.setCurrentStamp=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:45,i=this.currentStamp=this.getStampIcon(t,e,n,r,o);if(!i)throw new Error("Stamp not found: category: ".concat(t,", name: ").concat(e));this.currentPreviewerImg.src=i.showUrl||""},e.getCurrentStampConfig=function(){return this.currentStamp},e.getPreviewerImage=function(){return this.currentPreviewerImg},e.setDefaultStamps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.defaultStamps=t,this.defaultStampRewrited=!0,this.store.dispatch(Ti.DEFAULT_STAMP_LIST_UPDATED,t)},e.setCustomStamps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.customStamps=t,this.store.dispatch(Ti.CUSTOM_STAMP_LIST_UPDATED,t)},e.updateDefaultStamps=function(t,e){if(!this.defaultStampRewrited){var n=this.pdfViewer.libPath,r=this.pdfViewer.getCurrentLanguage(),o=n+r;if(this.lastKey!==o){this.lastKey=o;var i=u.shared.getDefaultStamps(n,r);if(t){var a=t.category,s=t.name;i[a]=i[a]||{},i[a][s]=t}if(e){var c=e.category,f=e.name;i[c]&&(delete i[c][f],0===Object.keys(i[c]).length&&delete i[c])}this.defaultStamps=i,this.store.dispatch(Ti.DEFAULT_STAMP_LIST_UPDATED,i)}}},e.getDefaultStamps=function(){return this.defaultStamps},e.getCustomStamps=function(){return this.customStamps},e.getStampIcon=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:45,i=this.defaultStamps[t]&&this.defaultStamps[t][e];if(i||(i=this.customStamps[t]&&this.customStamps[t][e]),i=i||n){var s=i.width||r,c=i.height||o,f=i.url;if(!u.DeviceInfo.isTouchDevice){f=f.replace(/\.pdf$/,".svg");var l=new XMLHttpRequest;l.open("get",f),l.send()}return a()({},i,{width:s,height:c,showUrl:f,category:t,name:e})}},e.addAnnotationIcon=function(t){var e=t.category,n=t.name;e in this.customStamps||(this.customStamps[e]={}),this.customStamps[e][n]=t,this.store.dispatch(Ti.CUSTOM_STAMP_LIST_ADDED,this.customStamps,t)},e.removeAnnotationIcon=function(t){this.removeIcon(this.defaultStamps,t)?this.store.dispatch(Ti.DEFAULT_STAMP_LIST_REMOVED,this.defaultStamps,t):this.removeIcon(this.customStamps,t)&&this.store.dispatch(Ti.CUSTOM_STAMP_LIST_REMOVED,this.customStamps,t)},e.onCustomStampRemoved=function(t){return this.store.subscribe(Ti.CUSTOM_STAMP_LIST_REMOVED,t)},e.onCustomStampAdded=function(t){return this.store.subscribe(Ti.CUSTOM_STAMP_LIST_ADDED,t)},e.onDefaultStampRemoved=function(t){return this.store.subscribe(Ti.DEFAULT_STAMP_LIST_REMOVED,t)},e.onDefaultStampUpdated=function(t){return this.store.subscribe(Ti.DEFAULT_STAMP_LIST_UPDATED,t)},e.removeIcon=function(t,e){var n,r=e.category,o=e.name;for(var i in t){var a=t[i];for(var s in a)o?r==i&&s==o&&(delete a[s],n=!0):r?i==r&&(delete a[s],n=!0):delete a[s];0==Object.keys(a).length&&delete t[i]}return n},t}(),qi=u.stateHandler,Wi=u.ViewerEvents,Ji=u.vendors,Ki=(Ji.jQuery,Ji.Hammer),Qi=qi.IStateHandler,Zi=qi.StateHandlerConsts.STATE_HANDLER_CREATE_STAMP,ta=u.shared,ea=ta.getClientX,na=ta.getClientY,ra=u.DeviceInfo.isTouchDevice,oa=function(t){function e(e){return t.call(this,e)||this}o()(e,t),e.getStateName=function(){return Zi},e.setParams=function(t,e){var n=t.category,r=t.name,o=e.getIoC().getInstanceByClass(Gi);try{t.url&&t.fileType?o.setCurrentStamp(n,r,t):o.setCurrentStamp(n,r,void 0)}catch(t){return console.error(t),void Promise.resolve().then((function(){e.getStateHandlerManager().switchTo()}))}var i=o.getPreviewerImage(),a=o.getCurrentStampConfig(),s=a.width,c=a.height,u=a.showUrl;ra||(i.style.cssText+="\n                width: ".concat(4*s/3,"px;\n                height: ").concat(4*c/3,"px;\n            "),i.src=u,setTimeout((function(){e.previewIconDoc(a).then((function(t){i.parentElement&&(i.src=URL.createObjectURL(t))}))}),100))};var n=e.prototype;return n.pageHandler=function(t){this.pageRender=t;var e=t.$handler,n=t.pdfViewer;e.addClass("fv__create-stamp-state-handler");var r=!1,o=e[0],i=this.hammer=new Ki.Manager(o,{recognizers:[[Ki.Tap]]}),s=n.getIoC().getInstanceByClass(Gi),c=s.getPreviewerImage();this.previewStampImg=c,this.addEvent(e,"mousemove",(function(n){if(!r){var i=s.getCurrentStampConfig(),a=o.getBoundingClientRect(),u=n.clientX-a.left,f=n.clientY-a.top;ra||(c.style.cssText+="\n                    transform: scale(".concat(t.getScale(),");\n                    top: ").concat(f-2*i.height/3,"px;\n                    left: ").concat(u-2*i.width/3,"px;\n                "),c.style.display="",e.append(c))}})),i.on("tap",(function(e){c.style.opacity=1;var i=o.getBoundingClientRect(),u=e.srcEvent,f="",l=ea(u),h=na(u),d=[l-i.left,h-i.top],p=d[0],v=d[1];r=!0;var g=s.getCurrentStampConfig(),m=g.width,y=g.height,w=g.category,x=g.name,b=g.fileType,A=g.url;return t.getPDFPage().then((function(e){var n=2*m/3*t.scale,r=2*y/3*t.scale,o={left:p-n,right:p+n,top:v-r,bottom:v+r};o=e.reverseDeviceRect(o,t.scale,t.getRotation());var i={rotation:((360-90*e.getRotation()-t.getRotation())%360+360)%360,type:"stamp",flags:4,rect:o,subject:t.pdfViewer.i18n.t("viewer_:annotSubjects.Stamp"),iconInfo:{category:w,name:x,fileType:b,url:A}};return a()(i,t.pdfViewer.getAnnotDefaultProperty("stamp")||{}),e.addAnnot(i)})).then((function(e){var n=t.annotsRender.getAnnotRender(e[0].objectNumber).component;return f=n,t.pdfViewer.eventEmitter.emit(Wi.addAnnotSuccess,n.annot),n.getRenderPromise().finally((function(){setTimeout((function(){r=!1,c.style.cssText+="\n                                display: none;\n                                opacity: 0.5;\n                            "}),500)})),n})).then((function(t){n.getStateHandlerManager().switchTo(),n.activeElement(t),n.config.showCommentList&&f.showReplyDialog()})).catch((function(){r=!1,c.style.cssText+="\n                        display: none;\n                        opacity: 0.5;\n                    "}))}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler");var t=this.previewStampImg;t.parentElement&&t.parentElement.removeChild(t),this.destroyList.map((function(t){var e=c()(t,3),n=e[0],r=e[1],o=e[2];n.off(r,o)}))},n.out=function(){this.destroyPageHandler()},n.addEvent=function(t,e,n){this.destroyList=this.destroyList||[],t.on(e,n),this.destroyList.push([t,e,n])},e}(Qi),ia=(n(231),n(233),n(239),n(241),n(242),n(243),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(266),n(267),n(268),u.stateHandler),aa=u.ViewerEvents,sa=ia.IStateHandler,ca=ia.HandStateHandler,ua=u.vendors,fa=ua.Hammer,la=ua.jQuery,ha=u.shared,da=(ha.DebouncePromiseQueue,ha.getClientX),pa=ha.getClientY,va=ia.StateHandlerUtils,ga=(va.getDevicePagePoint,va.deltaDeviceRect,va.appendSelectMark,va.removeSelectMark,ia.StateHandlerConsts.STATE_HANDLER_CREATE_FILE_ATTACHMENT),ma=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-file",n}o()(e,t),e.getStateName=function(){return ga};var n=e.prototype;return n.pageHandler=function(t){this.pageRender=t;var e=t.$handler;e.addClass(this.cursorStyle),e.append('<input id="fileAttachment" type="file" style="display: none;"/>');var n=e[0];(this.hammer=new fa.Manager(n,{recognizers:[[fa.Tap]]})).on("tap",(function(e){var r=n.getBoundingClientRect(),o=e.srcEvent,i=da(o),a=pa(o),s=[i-r.left,a-r.top],u=s[0],f=s[1];la("#fileAttachment").off("change").on("change",(function(e){var n=e.target.files[0];if(n&&!(t.pdfViewer.customs&&t.pdfViewer.customs.isAttachFileOverSize&&t.pdfViewer.customs.isAttachFileOverSize(n)))if(n.size>268435456)t.pdfViewer.viewerUI.confirm({message:"sidebar.attachment.addAttachmentSizeLimit",level:"warning"});else{if(!(["exe"].indexOf(n.name.split(".")[1])>=0))return t.getPDFPage().then((function(e){var r=new FileReader,o=e.reverseDevicePoint([u,f],t.scale,t.getRotation()),i=c()(o,2),a=i[0],s=i[1];r.readAsArrayBuffer(n),r.onload=function(){var o=new Uint8Array(r.result);e.addAnnot({flags:28,type:"fileattachment",rect:{left:a,right:a+20,top:s,bottom:s-24},buffer:o,fileName:n.name,file:n,subject:t.pdfViewer.i18n.t("viewer_:annotSubjects.File")}).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;t.pdfViewer.eventEmitter.emit(aa.addAnnotSuccess,r.annot),t.pdfViewer.getStateHandlerManager().switchTo(ca.getStateName()),t.annotsRender.activeAnnot(n.getId())}))}}));t.pdfViewer.viewerUI.confirm({message:"sidebar.attachment.addAttachmentFileFormat",level:"warning"})}})),la("#fileAttachment").click()}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),la("#fileAttachment").remove()},n.out=function(){this.destroyPageHandler()},e}(sa),ya=function(t){function e(e,n){var r;return(r=t.call(this,e)||this).target=n,r}return o()(e,t),e.prototype.init=function(){var t,e,n,r,o=this,i=function(n){if(0===n.button)if(o.isStarted){if(o.isStarted){r=null,o.isStarted=!1;var i=n.clientX-t,a=n.clientY-e;o.emit("end",{deltaX:i,deltaY:a,srcEvent:n})}}else r=o.target.getBoundingClientRect(),o.isStarted=!0,t=n.clientX,e=n.clientY,o.emit("start",{deltaX:0,deltaY:0,srcEvent:n})},a=function(r){if(!o.isLocked)if(o.isStarted){var i=r.clientX-t,a=r.clientY-e;o.emit("move",n={deltaX:i,deltaY:a,srcEvent:r})}else{var s=o.target.getBoundingClientRect(),c=r.clientX-s.left,u=r.clientY-s.top;o.emit("mousemove",{x:c,y:u})}},s=function(n){if(o.isStarted&&!o.isDestroyed&&!o.isLocked&&r){var i=o.target.getBoundingClientRect(),a=t-r.left,s=e-r.top,c=i.width/r.width;t=i.left+a*c,e=i.top+s*c,r=i}};window.addEventListener("scroll",s,!0),this.target.addEventListener("mousedown",i),document.addEventListener("mousemove",a,!0);var c=this.pdfViewer.getStore().subscribe("create-measurement-status",(function(t){switch(t){case"complete":o.isStarted&&(r=null,o.isStarted=!1,o.unlock(),o.emit("end",n));break;case"cancel":o.isStarted&&(r=null,o.isStarted=!1,o.unlock(),o.emit("cancel"))}}));this.addDestroyHook((function(){o.target.removeEventListener("mousedown",i),document.removeEventListener("mousemove",a),c(),window.removeEventListener("scroll",s,!0)}))},e}(Tn),wa=u.ViewerEvents,xa=u.DeviceInfo.isTouchDevice,ba=u.Consts,Aa=ba.LineEndingStyle,Sa=ba.Intents,Pa=ba.CREATING_MEASUREMENT_CONTEXTMENU,Ra=u.shared.ThrottleAsyncTaskExecutor,Ea=function(t){function e(e){var n;return(n=t.call(this,e,Aa.OpenArrow,Aa.OpenArrow)||this).isEnd=!0,n.executor=new Ra(20,!0),n.markupArray=[],n}o()(e,t),e.getStateName=function(){return"createDistance"};var n=e.prototype;return n.createInteractionTool=function(e,n){return xa?t.prototype.createInteractionTool.call(this,e,n):new ya(this.pdfViewer,e)},n.createAnnotJson=function(t){var e=this.pdfViewer.store.getCurrentValue("measurementInfo");return t.intent=Sa.LINE_DIMENSION,t.enableCaption=!0,t.measure={unit:e.realUnit.name,ratio:{userSpaceValue:e.userSpaceScaleValue,userSpaceUnit:e.userSpaceUnit.name,realValue:e.realScaleValue,realUnit:e.realUnit.name}},a()(t,this.pdfViewer.getAnnotDefaultProperty("line","LineDimension")),t},n.pageHandler=function(e){var n,r=this;t.prototype.pageHandler.call(this,e),this.destroyPageHooks=[];var o=this.pdfViewer.viewerUI.createContextMenu(Pa,e.$handler.get(0),{selector:".fv__pdf-page-handler-container",items:{complete:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.complete"),callback:function(){r.interaction.unlock(),r.interaction.emit("end",n)}},cancel:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.cancel"),callback:function(){r.interaction.unlock(),r.interaction.emit("cancel")}}}}),i=o.getItem("complete");o.disable(),this.creatingContextmenu=o,this.interaction.on("start",(function(){r.isEnd=!1,o.enable()})),this.interaction.on("end",(function(){r.isEnd=!0,o.disable()})),this.interaction.on("cancel",(function(){o.disable()})),this.interaction.on("move",(function(t){n=t})),o.onHidden((function(){r.interaction.unlock()})),o.onShown((function(){r.interaction.lock(),i.enable()})),this.destroyPageHooks.push(this.pdfViewer.addEventListener(wa.zoomToSuccess,(function(t){cn(r.markupArray)})),this.pdfViewer.addEventListener(wa.changeViewModeSuccess,(function(t,e){cn(r.markupArray)})),this.pdfViewer.addEventListener(wa.fitWidthResizeViewport,(function(){cn(r.markupArray)})))},n.start=function(e,n){cn(this.markupArray);var r=t.prototype.start.call(this,e,n,"Distance");return this.pdfViewer.eventEmitter.emit(wa.distanceAnnotCreationStart,r),r},n.adjust=function(t,e){var n=this;this.executor.exec((function(){return n.getSnappedPoint(e).then((function(r){Qe(e,r)?n.snappedPointAssistant.hide():(n.snappedPointAssistant.setPosition(r.x,r.y),n.snappedPointAssistant.show(r.type)),n.pdfViewer.eventEmitter.emit(wa.updateDistanceAnnot,t);var o=n.pdfViewer.getStore().getCurrentValue("measurementData"),i=an(),a=ye(o.displayUnit.name)?n.pdfViewer.i18n.t("measurement.units.".concat(o.displayUnit.name)):o.displayUnit.name;t.setContent(i+Math.round(100*o.distance)/100+" "+a),t.setEndPoint(r),t.draw()}))}))},n.end=function(){var e=this;this.fakeAnnotation&&this.fakeAnnotation.annotationInfo.contents&&this.executor.waitForLastTask().then((function(){sn().makup?(e.pdfViewer.eventEmitter.emit(wa.distanceAnnotCreationEnd,e.fakeAnnotation),t.prototype.end.call(e)):(e.fakeAnnotation.renderer.setMarkUp(e.pageRender.scale,e.pageRender.rotate),e.markupArray.push(e.fakeAnnotation));return Promise.resolve()}))},n.cancel=function(){this.fakeAnnotation&&(this.executor.cancel(),this.pdfViewer.eventEmitter.emit(wa.distanceAnnotCreationCancel,this.fakeAnnotation),t.prototype.cancel.call(this),this.creatingContextmenu&&this.creatingContextmenu.disable())},n.destroyPageHandler=function(){this.isEnd||this.cancel(),this.creatingContextmenu&&this.creatingContextmenu.destroy(),this.destroyPageHooks&&this.destroyPageHooks.forEach((function(t){return t()})),cn(this.markupArray),t.prototype.destroyPageHandler.call(this)},e}(Kn),Ta=(n(176),function(t){function e(e,n){var r;return(r=t.call(this,e,n,"create-measurement-status")||this).target=n,r}return o()(e,t),e}(co)),Ca=u.ViewerEvents,_a=(u.DeviceInfo.isTouchDevice,u.Consts),Ia=_a.LineEndingStyle,ka=_a.Intents,Ma=_a.CREATING_MEASUREMENT_CONTEXTMENU,La=(u.shared.ThrottleAsyncTaskExecutor,function(t){function e(e){var n;return(n=t.call(this,e)||this).isEnd=!0,n.markupArray=[],n}o()(e,t),e.getStateName=function(){return"createPerimeter"};var n=e.prototype;return n.createInteractionTool=function(t){return new Ta(this.pdfViewer,t)},n.createAnnotJson=function(t){var e=this.pdfViewer.store.getCurrentValue("measurementInfo"),n=this.pdfViewer.getAnnotDefaultProperty("polyline",ka.POLYLINE_DIMENSION);return t.intent=ka.POLYLINE_DIMENSION,t.startStyle=Ia.OpenArrow,t.endStyle=Ia.OpenArrow,t.enableCaption=!0,t.measure={unit:e.realUnit.name,ratio:{userSpaceValue:e.userSpaceScaleValue,userSpaceUnit:e.userSpaceUnit.name,realValue:e.realScaleValue,realUnit:e.realUnit.name}},t.subject=this.pdfViewer.i18n.t("viewer_:annotSubjects.Perimeter"),a()(t,n)},n.pageHandler=function(e){var n,r=this;t.prototype.pageHandler.call(this,e),this.contextmenu=this.pdfViewer.viewerUI.createContextMenu(Ma,e.$handler.get(0),{selector:".fv__pdf-page-handler-container",items:{complete:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.complete"),callback:function(){r.interaction.unlock(),r.interaction.emit("end",n)}},cancel:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.cancel"),callback:function(){r.interaction.unlock(),r.interaction.emit("cancel")}}}}),this.contextmenu.disable(),this.completeMenuItem=this.contextmenu.getItem("complete"),this.completeMenuItem.disable(),this.creatingContextmenu=this.contextmenu,this.interaction.on("start",(function(){r.isEnd=!1,r.contextmenu.enable(),r.completeMenuItem.disable(),cn(r.markupArray),r.pdfViewer.eventEmitter.emit(Ca.perimeterAnnotCreationStart,r.fakeAnnotation)})),this.interaction.on("end",(function(){})),this.interaction.on("cancel",(function(){r.contextmenu.disable()})),this.interaction.on("move",(function(t){n=t})),this.contextmenu.onHidden((function(){r.interaction.unlock()})),this.contextmenu.onShown((function(){r.interaction.lock(),r.fakeAnnotation.getVertexes().length>=3?r.completeMenuItem.enable():r.completeMenuItem.disable()})),this.destroyPageHooks.push(this.pdfViewer.addEventListener(Ca.zoomToSuccess,(function(t){cn(r.markupArray)})),this.pdfViewer.addEventListener(Ca.changeViewModeSuccess,(function(t,e){cn(r.markupArray)})),this.pdfViewer.addEventListener(Ca.fitWidthResizeViewport,(function(){cn(r.markupArray)})))},n.start=function(e,n){var r=t.prototype.start.call(this,e,n);return this.pdfViewer.eventEmitter.emit(Ca.distanceAnnotCreationStart,r),r},n.adjust=function(t,e){t.setLastPoint(e.deviceX,e.deviceY),this.pdfViewer.eventEmitter.emit(Ca.updateDistanceAnnot,t);var n=this.pdfViewer.getStore().getCurrentValue("measurementData"),r=an(),o=ye(n.displayUnit.name)?this.pdfViewer.i18n.t("measurement.units.".concat(n.displayUnit.name)):n.displayUnit.name;t.setContent(r+Math.round(100*n.perimeter)/100+" "+o),t.draw()},n.canBeCompleted=function(t){if(!t)return!1;var e=t.getVertexes();if(0==e.length)return!1;var n=t.getLastPoint();return!(1==e.length&&n&&Math.abs(e[0].x-n.x)<Number.EPSILON&&Math.abs(e[0].y-n.y)<Number.EPSILON)},n.end=function(e,n){if(this.fakeAnnotation){if(this.fakeAnnotation.getVertexes().length<2)return-1;if(this.isEnd=!0,this.contextmenu.disable(),sn().makup)this.pdfViewer.eventEmitter.emit(Ca.distanceAnnotCreationEnd,this.fakeAnnotation),t.prototype.end.call(this,e,n);else this.fakeAnnotation.renderer.setMarkUp(this.pageRender.scale,this.pageRender.rotate),this.markupArray.push(this.fakeAnnotation)}},n.cancel=function(){this.fakeAnnotation&&(this.pdfViewer.eventEmitter.emit(Ca.distanceAnnotCreationCancel,this.fakeAnnotation),t.prototype.cancel.call(this),this.creatingContextmenu&&this.creatingContextmenu.disable())},n.destroyPageHandler=function(){this.isEnd||this.cancel(),cn(this.markupArray),t.prototype.destroyPageHandler.call(this)},e}(zo)),Da=(n(269),function(t){function e(e,n){var r;return(r=t.call(this,e,n,"create-measurement-status")||this).target=n,r}return o()(e,t),e}(co)),Oa=u.ViewerEvents,Va=u.Consts,Na=Va.Intents,Ha=Va.CREATING_MEASUREMENT_CONTEXTMENU,ja=Va.DISTANCE_TOLERANCE,Ua=Va.POINT_TOLERANCE,Fa=function(t){function e(e){var n;return(n=t.call(this,e)||this).isEnd=!0,n.markupArray=[],n}o()(e,t),e.getStateName=function(){return"createArea"};var n=e.prototype;return n.createInteractionTool=function(t){return new Da(this.pdfViewer,t)},n.createAnnotJson=function(t){var e=this.pdfViewer.store.getCurrentValue("measurementInfo"),n=this.pdfViewer.getAnnotDefaultProperty("polygon",Na.POLYGON_DIMENSION);return t.intent=Na.POLYGON_DIMENSION,t.measure={unit:e.realUnit.name,ratio:{userSpaceValue:e.userSpaceScaleValue,userSpaceUnit:e.userSpaceUnit.name,realValue:e.realScaleValue,realUnit:e.realUnit.name}},t.subject=this.pdfViewer.i18n.t("viewer_:annotSubjects.Area"),a()(t,n)},n.pageHandler=function(e){var n,r=this;t.prototype.pageHandler.call(this,e),this.destroyPageHooks=[],this.contextmenu=this.pdfViewer.viewerUI.createContextMenu(Ha,e.$handler.get(0),{selector:".fv__pdf-page-handler-container",items:{complete:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.complete"),callback:function(){r.interaction.unlock(),r.interaction.emit("end",n)}},cancel:{name:this.pdfViewer.i18n.t("viewer_:contextmenu.measurement.cancel"),callback:function(){r.interaction.unlock(),r.interaction.emit("cancel")}}}}),this.contextmenu.disable(),this.completeMenuItem=this.contextmenu.getItem("complete"),this.completeMenuItem.disable(),this.creatingContextmenu=this.contextmenu,this.interaction.on("start",(function(){r.isEnd=!1,r.contextmenu.enable(),r.completeMenuItem.disable(),cn(r.markupArray)})),this.interaction.on("end",(function(){})),this.interaction.on("cancel",(function(){r.contextmenu.disable()})),this.interaction.on("move",(function(t){n=t})),this.contextmenu.onHidden((function(){r.interaction.unlock()})),this.contextmenu.onShown((function(){r.interaction.lock(),r.fakeAnnotation.getVertexes().length>=2?r.completeMenuItem.enable():r.completeMenuItem.disable()})),this.destroyPageHooks.push(this.pdfViewer.addEventListener(Oa.zoomToSuccess,(function(t){cn(r.markupArray)})),this.pdfViewer.addEventListener(Oa.changeViewModeSuccess,(function(t,e){cn(r.markupArray)})),this.pdfViewer.addEventListener(Oa.fitWidthResizeViewport,(function(){cn(r.markupArray)})))},n.start=function(e,n){var r=t.prototype.start.call(this,e,n);return this.pdfViewer.eventEmitter.emit(Oa.distanceAnnotCreationStart,r),r},n.isPointClosely=function(t,e,n){return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n},n.pointDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,o=Math.abs(n),i=Math.abs(r);return Math.sqrt(o*o+i*i)},n.isPointOnLine=function(t,e,n){if(this.isPointClosely(t,e,Number.EPSILON)||this.isPointClosely(t,n,Number.EPSILON))return!0;var r=this.pointDistance(t,e),o=this.pointDistance(t,n),i=this.pointDistance(e,n);return Math.abs(r+o-i)<Ua},n.checkLineCrossed=function(t,e,n,r){var o,i;if(o=Math.abs(e.x-t.x)<1e-4?Number.POSITIVE_INFINITY:(e.y-t.y)/(e.x-t.x),i=Math.abs(r.x-n.x)<1e-4?Number.POSITIVE_INFINITY:(r.y-n.y)/(r.x-n.x),Number.isFinite(o)&&Number.isFinite(i)&&Math.abs(o-i)<.01||!Number.isFinite(o)&&!Number.isFinite(i))return!(!this.isPointOnLine(t,n,r)&&!this.isPointOnLine(e,n,r));var a,s,c=t.x>e.x?e.x:t.x,u=t.x>e.x?t.x:e.x,f=n.x>r.x?r.x:n.x,l=n.x>r.x?n.x:r.x;if(Number.isFinite(o)){if(Number.isFinite(i))return!((a=(o*t.x-t.y-i*n.x+n.y)/(o-i))<c-Ua||a>u+Ua)&&(!(a<f-Ua||a>l+Ua)&&(s=o*(a-t.x)+t.y,!0));s=o*((a=f)-t.x)+t.y;var h=n.y<r.y?n.y:r.y,d=n.y<r.y?r.y:n.y;return h-Ua<=s&&s<=d+Ua&&c-Ua<=a&&a<=u+Ua}s=i*((a=c)-n.x)+n.y;var p=t.y<e.y?t.y:e.y,v=t.y<e.y?e.y:t.y;return p-Ua<=s&&s<=v+Ua&&f-Ua<=a&&a<=l+Ua},n.checkIfPointAllowAdded=function(t,e){if(t.length>=2&&this.isPointOnLine(e,t[t.length-1],t[t.length-2]))return!1;if(t.length>=3)for(var n=t[t.length-1],r=e,o=t[t.length-2],i=t.length-3;i>=0;i--){var a=t[i];if(this.checkLineCrossed(o,a,n,r))return!(0!=i||!this.isPointClosely(e,t[0],ja));o=a}return!0},n.addPoint=function(t,e){var n=e.deviceX,r=e.deviceY,o=t.page.reverseDevicePoint([n,r],t.scale,t.rotate),i=c()(o,2),a=i[0],s=i[1];if(this.checkIfPointAllowAdded(t.getVertexes(),{x:a,y:s})){var u=t.getVertexes();if(u.length>2&&this.isPointClosely(u[0],{x:a,y:s},ja)){var f=u[u.length-1],l=t.page.getDevicePoint([f.x,f.y],t.scale,t.rotate),h=c()(l,2),d=h[0],p=h[1],v=t.pageRender.$handler[0].getBoundingClientRect();return this.interaction.lastMoveData={clientX:d+v.left,clientY:p+v.top},void this.pdfViewer.getStore().dispatch("create-measurement-status","complete")}t.addPoint(n,r),t.draw()}},n.adjust=function(t,e){var n=t.page.reverseDevicePoint([e.deviceX,e.deviceY],t.scale,t.rotate),r=c()(n,2),o=r[0],i=r[1];if(this.checkIfPointAllowAdded(t.getVertexes(),{x:o,y:i})){this.pdfViewer.eventEmitter.emit(Oa.updateDistanceAnnot,t);var a=this.pdfViewer.getStore().getCurrentValue("measurementData"),s=an(),u=this.pdfViewer.i18n.t("measurement.units.".concat(a.displayUnit.name));t.setContent((s?s+" ":"")+Math.round(100*a.area)/100+" sq "+u),t.setLastPoint(e.deviceX,e.deviceY),t.draw()}},n.end=function(e,n){if(this.fakeAnnotation){var r=e.getVertexes(),o=Ro()(r).slice(0);if(0!=o.length){if(null!=n){var i=e.page.reverseDevicePoint([n.deviceX,n.deviceY],e.scale,e.rotate),a=c()(i,2),s=a[0],u=a[1];this.isPointClosely(o[o.length-1],{x:s,y:u},ja)?n=null:o.push({x:s,y:u})}if(!this.checkIfPointAllowAdded(o,o[0]))return-1;if(this.isEnd=!0,this.contextmenu.disable(),sn().makup){this.pdfViewer.eventEmitter.emit(Oa.distanceAnnotCreationEnd,this.fakeAnnotation);var f=this.pdfViewer.getStore().getCurrentValue("measurementData");if(f){var l=an(),h=this.pdfViewer.i18n.t("measurement.units.".concat(f.displayUnit.name));e.setContent((l?l+" ":"")+Math.round(100*f.area)/100+" sq "+h)}t.prototype.end.call(this,e,n)}else{this.fakeAnnotation.renderer.setMarkUp(this.pageRender.scale,this.pageRender.rotate),this.markupArray.push(this.fakeAnnotation)}}}},n.cancel=function(){this.fakeAnnotation&&(this.pdfViewer.eventEmitter.emit(Oa.distanceAnnotCreationCancel,this.fakeAnnotation),t.prototype.cancel.call(this),this.creatingContextmenu&&this.creatingContextmenu.disable())},n.destroyPageHandler=function(){this.isEnd||this.cancel(),cn(this.markupArray),t.prototype.destroyPageHandler.call(this)},e}(jo),Ba=u.ViewerEvents,Ya=u.Consts.Intents,Xa=function(t){function e(e){var n;return(n=t.call(this,e)||this).isEnd=!0,n.markupArray=[],n}o()(e,t),e.getStateName=function(){return"createCircleArea"};var n=e.prototype;return n.start=function(t){var e={flags:4,subject:this.getSubject()};this.currentFakeAnnot=new ln({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson(e)});var n=t.left,r=t.top;this.currentFakeAnnot.setRect({left:n,top:r,right:n+10,bottom:r-10}),this.pdfViewer.eventEmitter.emit(Ba.distanceAnnotCreationStart,this.currentFakeAnnot),cn(this.markupArray)},n.adjust=function(e,n,r){t.prototype.adjust.call(this,e,n,r),this.pdfViewer.eventEmitter.emit(Ba.updateDistanceAnnot,e);var o=this.pdfViewer.getStore().getCurrentValue("measurementData"),i=an(),a=ye(o.displayUnit.name)?this.pdfViewer.i18n.t("measurement.units.".concat(o.displayUnit.name)):o.displayUnit.name;o.area&&this.currentFakeAnnot.setContent(i+o.area.toFixed(2)+" sq "+a)},n.end=function(e,n,r){sn().makup?(this.pdfViewer.eventEmitter.emit(Ba.distanceAnnotCreationEnd,e),t.prototype.end.call(this,e,n,r)):this.markupArray.push(e)},n.createAnnotJson=function(t){var e=this.pdfViewer.store.getCurrentValue("measurementInfo"),n=this.pdfViewer.getAnnotDefaultProperty("circle",Ya.CIRCLE_DIMENSION);return t.intent=Ya.CIRCLE_DIMENSION,t.measure={unit:e.realUnit.name,ratio:{userSpaceValue:e.userSpaceScaleValue,userSpaceUnit:e.userSpaceUnit.name,realValue:e.realScaleValue,realUnit:e.realUnit.name}},a()(t,n)},n.pageHandler=function(e){var n=this;t.prototype.pageHandler.call(this,e),this.destroyPageHooks=[],this.destroyPageHooks.push(this.pdfViewer.addEventListener(Ba.zoomToSuccess,(function(t){cn(n.markupArray)})),this.pdfViewer.addEventListener(Ba.changeViewModeSuccess,(function(t,e){cn(n.markupArray)})),this.pdfViewer.addEventListener(Ba.fitWidthResizeViewport,(function(){cn(n.markupArray)})))},n.destroyPageHandler=function(){t.prototype.destroyPageHandler.call(this),cn(this.markupArray)},e}(Pn),za=function(){function t(t){this.pdfViewer=t}var e=t.prototype;return e.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.showReplyDialog,n=t.hideReplyDialog,r=t.showPopup,o=t.hidePopup,i=t.showPropertiesDialog,a=t.hidePropertiesDialog,s=t.contextMenuIsEnable,c=this.pdfViewer,u=c.getStateHandlerManager();u.register(b),u.register(D),u.register(N),u.register(U),u.register(Y),u.register(G),u.register(lt),u.register(Et),u.register(Nt),u.register(zt),u.register(An),u.register(Pn),u.register(Kn),u.register(er),u.register(jo),u.register(zo),u.register(Zo),u.register(ai),u.register(wi),u.register(Xi),u.register(oa),u.register(ma),u.register(Ea),u.register(La),u.register(Fa),u.register(Xa);var f=e||n||r||o||i||a||s;f&&this._overwriteAnnot(e,n,r,o,i,a,s)},e._overwriteAnnot=function(t,e,n,r,i,a,s){this.pdfViewer.getAnnotManager().registerMatchRule((function(c,u){return c.isMarkup()?function(c){function u(){return c.apply(this,arguments)||this}o()(u,c);var f=u.prototype;return f.showReplyDialog=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o;return t?t.bind(this).apply(void 0,n):(o=c.prototype.showReplyDialog).call.apply(o,[this].concat(n))},f.hideReplyDialog=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!e){var i;if(t)return;return(i=c.prototype.hideReplyDialog).call.apply(i,[this].concat(r))}return e.bind(this).apply(void 0,r)},f.showPopup=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var o;return n?n.bind(this).apply(void 0,e):(o=c.prototype.showPopup).call.apply(o,[this].concat(e))},f.hidePopup=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];if(!r){var i;if(n)return;return(i=c.prototype.hidePopup).call.apply(i,[this].concat(e))}return r.bind(this).apply(void 0,e)},f.showPropertiesDialog=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return i?i.bind(this).apply(void 0,e):(r=c.prototype.showPropertiesDialog).call.apply(r,[this].concat(e))},f.hidePropertiesDialog=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!a){var r;if(i)return;return(r=c.prototype.hidePropertiesDialog).call.apply(r,[this].concat(e))}return a.bind(this).apply(void 0,e)},f.contextMenuIsEnable=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return s?s.bind(this).apply(void 0,e):(r=c.prototype.contextMenuIsEnable).call.apply(r,[this].concat(e))},u}(u):u}))},t}()}])}));