!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],n):"object"==typeof exports?exports.UndoRedoAddon=n(require("UIExtension")):t.UndoRedoAddon=n(t.UIExtension)}(self,(function(t){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=179)}([function(t,n,e){(function(n){var e=function(t){return t&&t.Math==Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof n&&n)||function(){return this}()||Function("return this")()}).call(this,e(115))},function(t,n){function e(){return t.exports=e=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){return"function"==typeof t}},function(t,n,e){var r=e(0),o=e(58).f,i=e(22),a=e(14),u=e(62),c=e(120),s=e(88);t.exports=function(t,n){var e,f,l,d,p,h=t.target,v=t.global,g=t.stat;if(e=v?r:g?r[h]||u(h,{}):(r[h]||{}).prototype)for(f in n){if(d=n[f],l=t.noTargetGet?(p=o(e,f))&&p.value:e[f],!s(v?f:h+(g?".":"#")+f,t.forced)&&void 0!==l){if(typeof d==typeof l)continue;c(d,l)}(t.sham||l&&l.sham)&&i(d,"sham",!0),a(e,f,d,t)}}},function(t,n,e){var r=e(38),o=Function.prototype,i=o.bind,a=o.call,u=r&&i.bind(a,a);t.exports=r?function(t){return t&&u(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},function(t,n,e){var r=e(0),o=e(60),i=e(11),a=e(83),u=e(82),c=e(81),s=o("wks"),f=r.Symbol,l=f&&f.for,d=c?f:f&&f.withoutSetter||a;t.exports=function(t){if(!i(s,t)||!u&&"string"!=typeof s[t]){var n="Symbol."+t;u&&i(f,t)?s[t]=f[t]:s[t]=c&&l?l(n):d(n)}return s[t]}},function(t,n,e){var r=e(38),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},function(t,n,e){var r=e(0),o=e(12),i=r.String,a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not an object")}},function(n,e){n.exports=t},function(t,n,e){var r=e(2);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,n,e){var r=e(5),o=e(21),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,n){return i(o(t),n)}},function(t,n,e){var r=e(3);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},function(t,n,e){var r=e(0),o=e(10),i=e(84),a=e(85),u=e(8),c=e(59),s=r.TypeError,f=Object.defineProperty,l=Object.getOwnPropertyDescriptor;n.f=o?a?function(t,n,e){if(u(t),n=c(n),u(e),"function"==typeof t&&"prototype"===n&&"value"in e&&"writable"in e&&!e.writable){var r=l(t,n);r&&r.writable&&(t[n]=e.value,e={configurable:"configurable"in e?e.configurable:r.configurable,enumerable:"enumerable"in e?e.enumerable:r.enumerable,writable:!1})}return f(t,n,e)}:f:function(t,n,e){if(u(t),n=c(n),u(e),i)try{return f(t,n,e)}catch(t){}if("get"in e||"set"in e)throw s("Accessors not supported");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(0),o=e(3),i=e(11),a=e(22),u=e(62),c=e(46),s=e(31),f=e(47).CONFIGURABLE,l=s.get,d=s.enforce,p=String(String).split("String");(t.exports=function(t,n,e,c){var s,l=!!c&&!!c.unsafe,h=!!c&&!!c.enumerable,v=!!c&&!!c.noTargetGet,g=c&&void 0!==c.name?c.name:n;o(e)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(e,"name")||f&&e.name!==g)&&a(e,"name",g),(s=d(e)).source||(s.source=p.join("string"==typeof g?g:""))),t!==r?(l?!v&&t[n]&&(h=!0):delete t[n],h?t[n]=e:a(t,n,e)):h?t[n]=e:u(n,e)})(Function.prototype,"toString",(function(){return o(this)&&l(this).source||c(this)}))},function(t,n,e){var r=e(69),o=e(14),i=e(126);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(t,n,e){var r=e(0),o=e(3),i=function(t){return o(t)?t:void 0};t.exports=function(t,n){return arguments.length<2?i(r[t]):r[t]&&r[t][n]}},function(t,n){t.exports=!1},function(t,n,e){e(127),e(141),e(146),e(147),e(148),e(149)},function(t,n,e){var r=e(174),o=e(175),i=e(104),a=e(176);t.exports=function(t){return r(t)||o(t)||i(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,e){var r=e(0),o=e(3),i=e(44),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a function")}},function(t,n,e){var r=e(0),o=e(30),i=r.Object;t.exports=function(t){return i(o(t))}},function(t,n,e){var r=e(10),o=e(13),i=e(39);t.exports=r?function(t,n,e){return o.f(t,n,i(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(87);t.exports=function(t){return r(t.length)}},function(t,n,e){var r=e(79),o=e(30);t.exports=function(t){return r(o(t))}},function(t,n,e){var r=e(0);t.exports=r.Promise},function(t,n,e){"use strict";var r=e(4),o=e(17),i=e(25),a=e(2),u=e(16),c=e(3),s=e(90),f=e(98),l=e(14),d=i&&i.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){d.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var n=s(this,u("Promise")),e=c(t);return this.then(e?function(e){return f(n,t()).then((function(){return e}))}:t,e?function(e){return f(n,t()).then((function(){throw e}))}:t)}}),!o&&c(i)){var p=u("Promise").prototype.finally;d.finally!==p&&l(d,"finally",p,{unsafe:!0})}},function(t,n,e){var r=e(0),o=e(50),i=r.String;t.exports=function(t){if("Symbol"===o(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},function(t,n,e){"use strict";var r=e(4),o=e(75);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(t,n,e){var r=e(5),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},function(t,n,e){var r=e(0).TypeError;t.exports=function(t){if(null==t)throw r("Can't call method on "+t);return t}},function(t,n,e){var r,o,i,a=e(119),u=e(0),c=e(5),s=e(12),f=e(22),l=e(11),d=e(61),p=e(63),h=e(64),v=u.TypeError,g=u.WeakMap;if(a||d.state){var y=d.state||(d.state=new g),m=c(y.get),x=c(y.has),b=c(y.set);r=function(t,n){if(x(y,t))throw new v("Object already initialized");return n.facade=t,b(y,t,n),n},o=function(t){return m(y,t)||{}},i=function(t){return x(y,t)}}else{var S=p("state");h[S]=!0,r=function(t,n){if(l(t,S))throw new v("Object already initialized");return n.facade=t,f(t,S,n),n},o=function(t){return l(t,S)?t[S]:{}},i=function(t){return l(t,S)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(n){var e;if(!s(n)||(e=o(n)).type!==t)throw v("Incompatible receiver, "+t+" required");return e}}}},function(t,n,e){var r=e(2),o=e(6),i=e(41),a=o("species");t.exports=function(t){return i>=51||!r((function(){var n=[];return(n.constructor={})[a]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},function(t,n,e){var r=e(0),o=e(25),i=e(3),a=e(88),u=e(46),c=e(6),s=e(140),f=e(17),l=e(41),d=o&&o.prototype,p=c("species"),h=!1,v=i(r.PromiseRejectionEvent),g=a("Promise",(function(){var t=u(o),n=t!==String(o);if(!n&&66===l)return!0;if(f&&(!d.catch||!d.finally))return!0;if(l>=51&&/native code/.test(t))return!1;var e=new o((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(e.constructor={})[p]=r,!(h=e.then((function(){}))instanceof r)||!n&&s&&!v}));t.exports={CONSTRUCTOR:g,REJECTION_EVENT:v,SUBCLASSING:h}},function(t,n,e){"use strict";var r=e(20),o=function(t){var n,e;this.promise=new t((function(t,r){if(void 0!==n||void 0!==e)throw TypeError("Bad Promise constructor");n=t,e=r})),this.resolve=r(n),this.reject=r(e)};t.exports.f=function(t){return new o(t)}},function(t,n){t.exports={}},function(t,n,e){var r=e(51),o=e(5),i=e(79),a=e(21),u=e(23),c=e(66),s=o([].push),f=function(t){var n=1==t,e=2==t,o=3==t,f=4==t,l=6==t,d=7==t,p=5==t||l;return function(h,v,g,y){for(var m,x,b=a(h),S=i(b),w=r(v,g),R=u(S),A=0,E=y||c,O=n?E(h,R):e||d?E(h,0):void 0;R>A;A++)if((p||A in S)&&(x=w(m=S[A],A,b),t))if(n)O[A]=x;else if(x)switch(t){case 3:return!0;case 5:return m;case 6:return A;case 2:s(O,m)}else switch(t){case 4:return!1;case 7:s(O,m)}return l?-1:o||f?f:O}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},function(t,n,e){"use strict";var r=e(4),o=e(36).map;r({target:"Array",proto:!0,forced:!e(32)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,e){var r=e(2);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,e){var r=e(5);t.exports=r({}.isPrototypeOf)},function(t,n,e){var r,o,i=e(0),a=e(42),u=i.process,c=i.Deno,s=u&&u.versions||c&&c.version,f=s&&s.v8;f&&(o=(r=f.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},function(t,n,e){var r=e(16);t.exports=r("navigator","userAgent")||""},function(t,n,e){var r=e(20);t.exports=function(t,n){var e=t[n];return null==e?void 0:r(e)}},function(t,n,e){var r=e(0).String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,n,e){var r=e(0),o=e(12),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,n,e){var r=e(5),o=e(3),i=e(61),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},function(t,n,e){var r=e(10),o=e(11),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,u=o(i,"name"),c=u&&"something"===function(){}.name,s=u&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:u,PROPER:c,CONFIGURABLE:s}},function(t,n,e){var r=e(49),o=Math.max,i=Math.min;t.exports=function(t,n){var e=r(t);return e<0?o(e+n,0):i(e,n)}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){var n=+t;return n!=n||0===n?0:(n>0?r:e)(n)}},function(t,n,e){var r=e(0),o=e(69),i=e(3),a=e(29),u=e(6)("toStringTag"),c=r.Object,s="Arguments"==a(function(){return arguments}());t.exports=o?a:function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=c(t),u))?e:s?a(n):"Object"==(r=a(n))&&i(n.callee)?"Arguments":r}},function(t,n,e){var r=e(5),o=e(20),i=e(38),a=r(r.bind);t.exports=function(t,n){return o(t),void 0===n?t:i?a(t,n):function(){return t.apply(n,arguments)}}},function(t,n,e){"use strict";var r=e(4),o=e(36).filter;r({target:"Array",proto:!0,forced:!e(32)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,e){"use strict";var r=e(4),o=e(0),i=e(2),a=e(67),u=e(12),c=e(21),s=e(23),f=e(70),l=e(66),d=e(32),p=e(6),h=e(41),v=p("isConcatSpreadable"),g=o.TypeError,y=h>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),m=d("concat"),x=function(t){if(!u(t))return!1;var n=t[v];return void 0!==n?!!n:a(t)};r({target:"Array",proto:!0,forced:!y||!m},{concat:function(t){var n,e,r,o,i,a=c(this),u=l(a,0),d=0;for(n=-1,r=arguments.length;n<r;n++)if(x(i=-1===n?a:arguments[n])){if(d+(o=s(i))>9007199254740991)throw g("Maximum allowed index exceeded");for(e=0;e<o;e++,d++)e in i&&f(u,d,i[e])}else{if(d>=9007199254740991)throw g("Maximum allowed index exceeded");f(u,d++,i)}return u.length=d,u}})},function(t,n,e){var r=e(0),o=e(100),i=e(101),a=e(150),u=e(22),c=function(t){if(t&&t.forEach!==a)try{u(t,"forEach",a)}catch(n){t.forEach=a}};for(var s in o)o[s]&&c(r[s]&&r[s].prototype);c(i)},function(t,n,e){var r=e(6),o=e(56),i=e(13),a=r("unscopables"),u=Array.prototype;null==u[a]&&i.f(u,a,{configurable:!0,value:o(null)}),t.exports=function(t){u[a][t]=!0}},function(t,n,e){var r,o=e(8),i=e(156),a=e(65),u=e(64),c=e(92),s=e(45),f=e(63),l=f("IE_PROTO"),d=function(){},p=function(t){return"<script>"+t+"<\/script>"},h=function(t){t.write(p("")),t.close();var n=t.parentWindow.Object;return t=null,n},v=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,n;v="undefined"!=typeof document?document.domain&&r?h(r):((n=s("iframe")).style.display="none",c.appendChild(n),n.src=String("javascript:"),(t=n.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):h(r);for(var e=a.length;e--;)delete v.prototype[a[e]];return v()};u[l]=!0,t.exports=Object.create||function(t,n){var e;return null!==t?(d.prototype=o(t),e=new d,d.prototype=null,e[l]=t):e=v(),void 0===n?e:i.f(e,n)}},function(t,n,e){var r=e(114);t.exports=function(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,e){var r=e(10),o=e(7),i=e(116),a=e(39),u=e(24),c=e(59),s=e(11),f=e(84),l=Object.getOwnPropertyDescriptor;n.f=r?l:function(t,n){if(t=u(t),n=c(n),f)try{return l(t,n)}catch(t){}if(s(t,n))return a(!o(i.f,t,n),t[n])}},function(t,n,e){var r=e(117),o=e(80);t.exports=function(t){var n=r(t,"string");return o(n)?n:n+""}},function(t,n,e){var r=e(17),o=e(61);(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.22.2",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.2/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,n,e){var r=e(0),o=e(62),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,n,e){var r=e(0),o=Object.defineProperty;t.exports=function(t,n){try{o(r,t,{value:n,configurable:!0,writable:!0})}catch(e){r[t]=n}return n}},function(t,n,e){var r=e(60),o=e(83),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,n){t.exports={}},function(t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,n,e){var r=e(125);t.exports=function(t,n){return new(r(t))(0===n?0:n)}},function(t,n,e){var r=e(29);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){var r=e(5),o=e(2),i=e(3),a=e(50),u=e(16),c=e(46),s=function(){},f=[],l=u("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=r(d.exec),h=!d.exec(s),v=function(t){if(!i(t))return!1;try{return l(s,f,t),!0}catch(t){return!1}},g=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!p(d,c(t))}catch(t){return!0}};g.sham=!0,t.exports=!l||o((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?g:v},function(t,n,e){var r={};r[e(6)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,n,e){"use strict";var r=e(59),o=e(13),i=e(39);t.exports=function(t,n,e){var a=r(n);a in t?o.f(t,a,i(0,e)):t[a]=e}},function(t,n,e){var r=e(29),o=e(0);t.exports="process"==r(o.process)},function(t,n,e){var r=e(13).f,o=e(11),i=e(6)("toStringTag");t.exports=function(t,n,e){t&&!e&&(t=t.prototype),t&&!o(t,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,n,e){"use strict";var r=e(24),o=e(55),i=e(35),a=e(31),u=e(13).f,c=e(106),s=e(17),f=e(10),l=a.set,d=a.getterFor("Array Iterator");t.exports=c(Array,"Array",(function(t,n){l(this,{type:"Array Iterator",target:r(t),index:0,kind:n})}),(function(){var t=d(this),n=t.target,e=t.kind,r=t.index++;return!n||r>=n.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==e?{value:r,done:!1}:"values"==e?{value:n[r],done:!1}:{value:[r,n[r]],done:!1}}),"values");var p=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!s&&f&&"values"!==p.name)try{u(p,"name",{value:"values"})}catch(t){}},function(t,n,e){"use strict";var r,o,i=e(7),a=e(5),u=e(27),c=e(76),s=e(161),f=e(60),l=e(56),d=e(31).get,p=e(162),h=e(163),v=f("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,y=g,m=a("".charAt),x=a("".indexOf),b=a("".replace),S=a("".slice),w=(o=/b*/g,i(g,r=/a/,"a"),i(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),R=s.BROKEN_CARET,A=void 0!==/()??/.exec("")[1];(w||A||R||p||h)&&(y=function(t){var n,e,r,o,a,s,f,p=this,h=d(p),E=u(t),O=h.raw;if(O)return O.lastIndex=p.lastIndex,n=i(y,O,E),p.lastIndex=O.lastIndex,n;var T=h.groups,P=R&&p.sticky,I=i(c,p),j=p.source,N=0,C=E;if(P&&(I=b(I,"y",""),-1===x(I,"g")&&(I+="g"),C=S(E,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==m(E,p.lastIndex-1))&&(j="(?: "+j+")",C=" "+C,N++),e=new RegExp("^(?:"+j+")",I)),A&&(e=new RegExp("^"+j+"$(?!\\s)",I)),w&&(r=p.lastIndex),o=i(g,P?e:p,C),P?o?(o.input=S(o.input,N),o[0]=S(o[0],N),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:w&&o&&(p.lastIndex=p.global?o.index+o[0].length:r),A&&o&&o.length>1&&i(v,o[0],e,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&T)for(o.groups=s=l(null),a=0;a<T.length;a++)s[(f=T[a])[0]]=o[f[1]];return o}),t.exports=y},function(t,n,e){"use strict";var r=e(8);t.exports=function(){var t=r(this),n="";return t.hasIndices&&(n+="d"),t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,e){var r=e(153),o=e(154),i=e(104),a=e(155);t.exports=function(t,n){return r(t)||o(t,n)||i(t,n)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,e){"use strict";var r=e(4),o=e(0),i=e(48),a=e(49),u=e(23),c=e(21),s=e(66),f=e(70),l=e(32)("splice"),d=o.TypeError,p=Math.max,h=Math.min;r({target:"Array",proto:!0,forced:!l},{splice:function(t,n){var e,r,o,l,v,g,y=c(this),m=u(y),x=i(t,m),b=arguments.length;if(0===b?e=r=0:1===b?(e=0,r=m-x):(e=b-2,r=h(p(a(n),0),m-x)),m+e-r>9007199254740991)throw d("Maximum allowed length exceeded");for(o=s(y,r),l=0;l<r;l++)(v=x+l)in y&&f(o,l,y[v]);if(o.length=r,e<r){for(l=x;l<m-r;l++)g=l+e,(v=l+r)in y?y[g]=y[v]:delete y[g];for(l=m;l>m-r+e;l--)delete y[l-1]}else if(e>r)for(l=m-r;l>x;l--)g=l+e-1,(v=l+r-1)in y?y[g]=y[v]:delete y[g];for(l=0;l<e;l++)y[l+x]=arguments[l+2];return y.length=m-r+e,o}})},function(t,n,e){var r=e(0),o=e(5),i=e(2),a=e(29),u=r.Object,c=o("".split);t.exports=i((function(){return!u("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?c(t,""):u(t)}:u},function(t,n,e){var r=e(0),o=e(16),i=e(3),a=e(40),u=e(81),c=r.Object;t.exports=u?function(t){return"symbol"==typeof t}:function(t){var n=o("Symbol");return i(n)&&a(n.prototype,c(t))}},function(t,n,e){var r=e(82);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,n,e){var r=e(41),o=e(2);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(t,n,e){var r=e(5),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},function(t,n,e){var r=e(10),o=e(2),i=e(45);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,n,e){var r=e(10),o=e(2);t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,n,e){var r=e(5),o=e(11),i=e(24),a=e(123).indexOf,u=e(64),c=r([].push);t.exports=function(t,n){var e,r=i(t),s=0,f=[];for(e in r)!o(u,e)&&o(r,e)&&c(f,e);for(;n.length>s;)o(r,e=n[s++])&&(~a(f,e)||c(f,e));return f}},function(t,n,e){var r=e(49),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){var r=e(2),o=e(3),i=/#|\.prototype\./,a=function(t,n){var e=c[u(t)];return e==f||e!=s&&(o(n)?r(n):!!n)},u=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},s=a.NATIVE="N",f=a.POLYFILL="P";t.exports=a},function(t,n,e){var r=e(5),o=e(8),i=e(129);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,e={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),n=e instanceof Array}catch(t){}return function(e,r){return o(e),i(r),n?t(e,r):e.__proto__=r,e}}():void 0)},function(t,n,e){var r=e(8),o=e(132),i=e(6)("species");t.exports=function(t,n){var e,a=r(t).constructor;return void 0===a||null==(e=r(a)[i])?n:o(e)}},function(t,n,e){var r,o,i,a,u=e(0),c=e(133),s=e(51),f=e(3),l=e(11),d=e(2),p=e(92),h=e(93),v=e(45),g=e(134),y=e(94),m=e(71),x=u.setImmediate,b=u.clearImmediate,S=u.process,w=u.Dispatch,R=u.Function,A=u.MessageChannel,E=u.String,O=0,T={};try{r=u.location}catch(t){}var P=function(t){if(l(T,t)){var n=T[t];delete T[t],n()}},I=function(t){return function(){P(t)}},j=function(t){P(t.data)},N=function(t){u.postMessage(E(t),r.protocol+"//"+r.host)};x&&b||(x=function(t){g(arguments.length,1);var n=f(t)?t:R(t),e=h(arguments,1);return T[++O]=function(){c(n,void 0,e)},o(O),O},b=function(t){delete T[t]},m?o=function(t){S.nextTick(I(t))}:w&&w.now?o=function(t){w.now(I(t))}:A&&!y?(a=(i=new A).port2,i.port1.onmessage=j,o=s(a.postMessage,a)):u.addEventListener&&f(u.postMessage)&&!u.importScripts&&r&&"file:"!==r.protocol&&!d(N)?(o=N,u.addEventListener("message",j,!1)):o="onreadystatechange"in v("script")?function(t){p.appendChild(v("script")).onreadystatechange=function(){p.removeChild(this),P(t)}}:function(t){setTimeout(I(t),0)}),t.exports={set:x,clear:b}},function(t,n,e){var r=e(16);t.exports=r("document","documentElement")},function(t,n,e){var r=e(5);t.exports=r([].slice)},function(t,n,e){var r=e(42);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(t,n,e){var r=e(0),o=e(51),i=e(7),a=e(8),u=e(44),c=e(142),s=e(23),f=e(40),l=e(143),d=e(96),p=e(144),h=r.TypeError,v=function(t,n){this.stopped=t,this.result=n},g=v.prototype;t.exports=function(t,n,e){var r,y,m,x,b,S,w,R=e&&e.that,A=!(!e||!e.AS_ENTRIES),E=!(!e||!e.IS_ITERATOR),O=!(!e||!e.INTERRUPTED),T=o(n,R),P=function(t){return r&&p(r,"normal",t),new v(!0,t)},I=function(t){return A?(a(t),O?T(t[0],t[1],P):T(t[0],t[1])):O?T(t,P):T(t)};if(E)r=t;else{if(!(y=d(t)))throw h(u(t)+" is not iterable");if(c(y)){for(m=0,x=s(t);x>m;m++)if((b=I(t[m]))&&f(g,b))return b;return new v(!1)}r=l(t,y)}for(S=r.next;!(w=i(S,r)).done;){try{b=I(w.value)}catch(t){p(r,"throw",t)}if("object"==typeof b&&b&&f(g,b))return b}return new v(!1)}},function(t,n,e){var r=e(50),o=e(43),i=e(35),a=e(6)("iterator");t.exports=function(t){if(null!=t)return o(t,a)||o(t,"@@iterator")||i[r(t)]}},function(t,n,e){var r=e(25),o=e(145),i=e(33).CONSTRUCTOR;t.exports=i||!o((function(t){r.all(t).then(void 0,(function(){}))}))},function(t,n,e){var r=e(8),o=e(12),i=e(34);t.exports=function(t,n){if(r(t),o(n)&&n.constructor===t)return n;var e=i.f(t);return(0,e.resolve)(n),e.promise}},function(t,n,e){var r=e(10),o=e(47).EXISTS,i=e(5),a=e(13).f,u=Function.prototype,c=i(u.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=i(s.exec);r&&!o&&a(u,"name",{configurable:!0,get:function(){try{return f(s,c(this))[1]}catch(t){return""}}})},function(t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,n,e){var r=e(45)("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},function(t,n,e){var r=e(4),o=e(21),i=e(103);r({target:"Object",stat:!0,forced:e(2)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,n,e){var r=e(86),o=e(65);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(105);t.exports=function(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n){t.exports=function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,e){"use strict";var r=e(4),o=e(7),i=e(17),a=e(47),u=e(3),c=e(157),s=e(108),f=e(89),l=e(72),d=e(22),p=e(14),h=e(6),v=e(35),g=e(107),y=a.PROPER,m=a.CONFIGURABLE,x=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,S=h("iterator"),w=function(){return this};t.exports=function(t,n,e,a,h,g,R){c(e,n,a);var A,E,O,T=function(t){if(t===h&&C)return C;if(!b&&t in j)return j[t];switch(t){case"keys":case"values":case"entries":return function(){return new e(this,t)}}return function(){return new e(this)}},P=n+" Iterator",I=!1,j=t.prototype,N=j[S]||j["@@iterator"]||h&&j[h],C=!b&&N||T(h),k="Array"==n&&j.entries||N;if(k&&(A=s(k.call(new t)))!==Object.prototype&&A.next&&(i||s(A)===x||(f?f(A,x):u(A[S])||p(A,S,w)),l(A,P,!0,!0),i&&(v[P]=w)),y&&"values"==h&&N&&"values"!==N.name&&(!i&&m?d(j,"name","values"):(I=!0,C=function(){return o(N,this)})),h)if(E={values:T("values"),keys:g?C:T("keys"),entries:T("entries")},R)for(O in E)(b||I||!(O in j))&&p(j,O,E[O]);else r({target:n,proto:!0,forced:b||I},E);return i&&!R||j[S]===C||p(j,S,C,{name:h}),v[n]=C,E}},function(t,n,e){"use strict";var r,o,i,a=e(2),u=e(3),c=e(56),s=e(108),f=e(14),l=e(6),d=e(17),p=l("iterator"),h=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(r=o):h=!0),null==r||a((function(){var t={};return r[p].call(t)!==t}))?r={}:d&&(r=c(r)),u(r[p])||f(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(t,n,e){var r=e(0),o=e(11),i=e(3),a=e(21),u=e(63),c=e(158),s=u("IE_PROTO"),f=r.Object,l=f.prototype;t.exports=c?f.getPrototypeOf:function(t){var n=a(t);if(o(n,s))return n[s];var e=n.constructor;return i(e)&&n instanceof e?e.prototype:n instanceof f?l:null}},function(t,n,e){"use strict";var r=e(110).charAt,o=e(27),i=e(31),a=e(106),u=i.set,c=i.getterFor("String Iterator");a(String,"String",(function(t){u(this,{type:"String Iterator",string:o(t),index:0})}),(function(){var t,n=c(this),e=n.string,o=n.index;return o>=e.length?{value:void 0,done:!0}:(t=r(e,o),n.index+=t.length,{value:t,done:!1})}))},function(t,n,e){var r=e(5),o=e(49),i=e(27),a=e(30),u=r("".charAt),c=r("".charCodeAt),s=r("".slice),f=function(t){return function(n,e){var r,f,l=i(a(n)),d=o(e),p=l.length;return d<0||d>=p?t?"":void 0:(r=c(l,d))<55296||r>56319||d+1===p||(f=c(l,d+1))<56320||f>57343?t?u(l,d):r:t?s(l,d,d+2):f-56320+(r-55296<<10)+65536}};t.exports={codeAt:f(!1),charAt:f(!0)}},function(t,n,e){var r=e(0),o=e(100),i=e(101),a=e(74),u=e(22),c=e(6),s=c("iterator"),f=c("toStringTag"),l=a.values,d=function(t,n){if(t){if(t[s]!==l)try{u(t,s,l)}catch(n){t[s]=l}if(t[f]||u(t,f,n),o[n])for(var e in a)if(t[e]!==a[e])try{u(t,e,a[e])}catch(n){t[e]=a[e]}}};for(var p in o)d(r[p]&&r[p].prototype,p);d(i,"DOMTokenList")},function(t,n){function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n){t.exports=null},function(t,n){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);n.f=i?function(t){var n=o(this,t);return!!n&&n.enumerable}:r},function(t,n,e){var r=e(0),o=e(7),i=e(12),a=e(80),u=e(43),c=e(118),s=e(6),f=r.TypeError,l=s("toPrimitive");t.exports=function(t,n){if(!i(t)||a(t))return t;var e,r=u(t,l);if(r){if(void 0===n&&(n="default"),e=o(r,t,n),!i(e)||a(e))return e;throw f("Can't convert object to primitive value")}return void 0===n&&(n="number"),c(t,n)}},function(t,n,e){var r=e(0),o=e(7),i=e(3),a=e(12),u=r.TypeError;t.exports=function(t,n){var e,r;if("string"===n&&i(e=t.toString)&&!a(r=o(e,t)))return r;if(i(e=t.valueOf)&&!a(r=o(e,t)))return r;if("string"!==n&&i(e=t.toString)&&!a(r=o(e,t)))return r;throw u("Can't convert object to primitive value")}},function(t,n,e){var r=e(0),o=e(3),i=e(46),a=r.WeakMap;t.exports=o(a)&&/native code/.test(i(a))},function(t,n,e){var r=e(11),o=e(121),i=e(58),a=e(13);t.exports=function(t,n,e){for(var u=o(n),c=a.f,s=i.f,f=0;f<u.length;f++){var l=u[f];r(t,l)||e&&r(e,l)||c(t,l,s(n,l))}}},function(t,n,e){var r=e(16),o=e(5),i=e(122),a=e(124),u=e(8),c=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var n=i.f(u(t)),e=a.f;return e?c(n,e(t)):n}},function(t,n,e){var r=e(86),o=e(65).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n,e){var r=e(24),o=e(48),i=e(23),a=function(t){return function(n,e,a){var u,c=r(n),s=i(c),f=o(a,s);if(t&&e!=e){for(;s>f;)if((u=c[f++])!=u)return!0}else for(;s>f;f++)if((t||f in c)&&c[f]===e)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(0),o=e(67),i=e(68),a=e(12),u=e(6)("species"),c=r.Array;t.exports=function(t){var n;return o(t)&&(n=t.constructor,(i(n)&&(n===c||o(n.prototype))||a(n)&&null===(n=n[u]))&&(n=void 0)),void 0===n?c:n}},function(t,n,e){"use strict";var r=e(69),o=e(50);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,n,e){"use strict";var r,o,i,a=e(4),u=e(17),c=e(71),s=e(0),f=e(7),l=e(14),d=e(128),p=e(89),h=e(72),v=e(130),g=e(20),y=e(3),m=e(12),x=e(131),b=e(90),S=e(91).set,w=e(135),R=e(138),A=e(73),E=e(139),O=e(31),T=e(25),P=e(33),I=e(34),j=P.CONSTRUCTOR,N=P.REJECTION_EVENT,C=P.SUBCLASSING,k=O.getterFor("Promise"),M=O.set,D=T&&T.prototype,L=T,_=D,V=s.TypeError,F=s.document,B=s.process,U=I.f,G=U,H=!!(F&&F.createEvent&&s.dispatchEvent),W=function(t){var n;return!(!m(t)||!y(n=t.then))&&n},q=function(t,n){var e,r,o,i=n.value,a=1==n.state,u=a?t.ok:t.fail,c=t.resolve,s=t.reject,l=t.domain;try{u?(a||(2===n.rejection&&X(n),n.rejection=1),!0===u?e=i:(l&&l.enter(),e=u(i),l&&(l.exit(),o=!0)),e===t.promise?s(V("Promise-chain cycle")):(r=W(e))?f(r,e,c,s):c(e)):s(i)}catch(t){l&&!o&&l.exit(),s(t)}},Y=function(t,n){t.notified||(t.notified=!0,w((function(){for(var e,r=t.reactions;e=r.get();)q(e,t);t.notified=!1,n&&!t.rejection&&K(t)})))},z=function(t,n,e){var r,o;H?((r=F.createEvent("Event")).promise=n,r.reason=e,r.initEvent(t,!1,!0),s.dispatchEvent(r)):r={promise:n,reason:e},!N&&(o=s["on"+t])?o(r):"unhandledrejection"===t&&R("Unhandled promise rejection",e)},K=function(t){f(S,s,(function(){var n,e=t.facade,r=t.value;if(J(t)&&(n=A((function(){c?B.emit("unhandledRejection",r,e):z("unhandledrejection",e,r)})),t.rejection=c||J(t)?2:1,n.error))throw n.value}))},J=function(t){return 1!==t.rejection&&!t.parent},X=function(t){f(S,s,(function(){var n=t.facade;c?B.emit("rejectionHandled",n):z("rejectionhandled",n,t.value)}))},$=function(t,n,e){return function(r){t(n,r,e)}},Q=function(t,n,e){t.done||(t.done=!0,e&&(t=e),t.value=n,t.state=2,Y(t,!0))},Z=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw V("Promise can't be resolved itself");var r=W(n);r?w((function(){var e={done:!1};try{f(r,n,$(Z,e,t),$(Q,e,t))}catch(n){Q(e,n,t)}})):(t.value=n,t.state=1,Y(t,!1))}catch(n){Q({done:!1},n,t)}}};if(j&&(_=(L=function(t){x(this,_),g(t),f(r,this);var n=k(this);try{t($(Z,n),$(Q,n))}catch(t){Q(n,t)}}).prototype,(r=function(t){M(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new E,rejection:!1,state:0,value:void 0})}).prototype=d(_,{then:function(t,n){var e=k(this),r=U(b(this,L));return e.parent=!0,r.ok=!y(t)||t,r.fail=y(n)&&n,r.domain=c?B.domain:void 0,0==e.state?e.reactions.add(r):w((function(){q(r,e)})),r.promise}}),o=function(){var t=new r,n=k(t);this.promise=t,this.resolve=$(Z,n),this.reject=$(Q,n)},I.f=U=function(t){return t===L||void 0===t?new o(t):G(t)},!u&&y(T)&&D!==Object.prototype)){i=D.then,C||l(D,"then",(function(t,n){var e=this;return new L((function(t,n){f(i,e,t,n)})).then(t,n)}),{unsafe:!0});try{delete D.constructor}catch(t){}p&&p(D,_)}a({global:!0,wrap:!0,forced:j},{Promise:L}),h(L,"Promise",!1,!0),v("Promise")},function(t,n,e){var r=e(14);t.exports=function(t,n,e){for(var o in n)r(t,o,n[o],e);return t}},function(t,n,e){var r=e(0),o=e(3),i=r.String,a=r.TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw a("Can't set "+i(t)+" as a prototype")}},function(t,n,e){"use strict";var r=e(16),o=e(13),i=e(6),a=e(10),u=i("species");t.exports=function(t){var n=r(t),e=o.f;a&&n&&!n[u]&&e(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,e){var r=e(0),o=e(40),i=r.TypeError;t.exports=function(t,n){if(o(n,t))return t;throw i("Incorrect invocation")}},function(t,n,e){var r=e(0),o=e(68),i=e(44),a=r.TypeError;t.exports=function(t){if(o(t))return t;throw a(i(t)+" is not a constructor")}},function(t,n,e){var r=e(38),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},function(t,n,e){var r=e(0).TypeError;t.exports=function(t,n){if(t<n)throw r("Not enough arguments");return t}},function(t,n,e){var r,o,i,a,u,c,s,f,l=e(0),d=e(51),p=e(58).f,h=e(91).set,v=e(94),g=e(136),y=e(137),m=e(71),x=l.MutationObserver||l.WebKitMutationObserver,b=l.document,S=l.process,w=l.Promise,R=p(l,"queueMicrotask"),A=R&&R.value;A||(r=function(){var t,n;for(m&&(t=S.domain)&&t.exit();o;){n=o.fn,o=o.next;try{n()}catch(t){throw o?a():i=void 0,t}}i=void 0,t&&t.enter()},v||m||y||!x||!b?!g&&w&&w.resolve?((s=w.resolve(void 0)).constructor=w,f=d(s.then,s),a=function(){f(r)}):m?a=function(){S.nextTick(r)}:(h=d(h,l),a=function(){h(r)}):(u=!0,c=b.createTextNode(""),new x(r).observe(c,{characterData:!0}),a=function(){c.data=u=!u})),t.exports=A||function(t){var n={fn:t,next:void 0};i&&(i.next=n),o||(o=n,a()),i=n}},function(t,n,e){var r=e(42),o=e(0);t.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},function(t,n,e){var r=e(42);t.exports=/web0s(?!.*chrome)/i.test(r)},function(t,n,e){var r=e(0);t.exports=function(t,n){var e=r.console;e&&e.error&&(1==arguments.length?e.error(t):e.error(t,n))}},function(t,n){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var n={item:t,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=e},function(t,n){t.exports="object"==typeof window&&"object"!=typeof Deno},function(t,n,e){"use strict";var r=e(4),o=e(7),i=e(20),a=e(34),u=e(73),c=e(95);r({target:"Promise",stat:!0,forced:e(97)},{all:function(t){var n=this,e=a.f(n),r=e.resolve,s=e.reject,f=u((function(){var e=i(n.resolve),a=[],u=0,f=1;c(t,(function(t){var i=u++,c=!1;f++,o(e,n,t).then((function(t){c||(c=!0,a[i]=t,--f||r(a))}),s)})),--f||r(a)}));return f.error&&s(f.value),e.promise}})},function(t,n,e){var r=e(6),o=e(35),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},function(t,n,e){var r=e(0),o=e(7),i=e(20),a=e(8),u=e(44),c=e(96),s=r.TypeError;t.exports=function(t,n){var e=arguments.length<2?c(t):n;if(i(e))return a(o(e,t));throw s(u(t)+" is not iterable")}},function(t,n,e){var r=e(7),o=e(8),i=e(43);t.exports=function(t,n,e){var a,u;o(t);try{if(!(a=i(t,"return"))){if("throw"===n)throw e;return e}a=r(a,t)}catch(t){u=!0,a=t}if("throw"===n)throw e;if(u)throw a;return o(a),e}},function(t,n,e){var r=e(6)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var e=!1;try{var i={};i[r]=function(){return{next:function(){return{done:e=!0}}}},t(i)}catch(t){}return e}},function(t,n,e){"use strict";var r=e(4),o=e(17),i=e(33).CONSTRUCTOR,a=e(25),u=e(16),c=e(3),s=e(14),f=a&&a.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&c(a)){var l=u("Promise").prototype.catch;f.catch!==l&&s(f,"catch",l,{unsafe:!0})}},function(t,n,e){"use strict";var r=e(4),o=e(7),i=e(20),a=e(34),u=e(73),c=e(95);r({target:"Promise",stat:!0,forced:e(97)},{race:function(t){var n=this,e=a.f(n),r=e.reject,s=u((function(){var a=i(n.resolve);c(t,(function(t){o(a,n,t).then(e.resolve,r)}))}));return s.error&&r(s.value),e.promise}})},function(t,n,e){"use strict";var r=e(4),o=e(7),i=e(34);r({target:"Promise",stat:!0,forced:e(33).CONSTRUCTOR},{reject:function(t){var n=i.f(this);return o(n.reject,void 0,t),n.promise}})},function(t,n,e){"use strict";var r=e(4),o=e(16),i=e(17),a=e(25),u=e(33).CONSTRUCTOR,c=e(98),s=o("Promise"),f=i&&!u;r({target:"Promise",stat:!0,forced:i||u},{resolve:function(t){return c(f&&this===s?a:this,t)}})},function(t,n,e){"use strict";var r=e(36).forEach,o=e(151)("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,n,e){"use strict";var r=e(2);t.exports=function(t,n){var e=[][t];return!!e&&r((function(){e.call(null,n||function(){return 1},1)}))}},function(t,n,e){"use strict";var r=e(4),o=e(0),i=e(67),a=e(68),u=e(12),c=e(48),s=e(23),f=e(24),l=e(70),d=e(6),p=e(32),h=e(93),v=p("slice"),g=d("species"),y=o.Array,m=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(t,n){var e,r,o,d=f(this),p=s(d),v=c(t,p),x=c(void 0===n?p:n,p);if(i(d)&&(e=d.constructor,(a(e)&&(e===y||i(e.prototype))||u(e)&&null===(e=e[g]))&&(e=void 0),e===y||void 0===e))return h(d,v,x);for(r=new(void 0===e?y:e)(m(x-v,0)),o=0;v<x;v++,o++)v in d&&l(r,o,d[v]);return r.length=o,r}})},function(t,n){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n){t.exports=function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,i=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,e){var r=e(10),o=e(85),i=e(13),a=e(8),u=e(24),c=e(103);n.f=r&&!o?Object.defineProperties:function(t,n){a(t);for(var e,r=u(n),o=c(n),s=o.length,f=0;s>f;)i.f(t,e=o[f++],r[e]);return t}},function(t,n,e){"use strict";var r=e(107).IteratorPrototype,o=e(56),i=e(39),a=e(72),u=e(35),c=function(){return this};t.exports=function(t,n,e,s){var f=n+" Iterator";return t.prototype=o(r,{next:i(+!s,e)}),a(t,f,!1,!0),u[f]=c,t}},function(t,n,e){var r=e(2);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,n,e){"use strict";var r=e(4),o=e(36).findIndex,i=e(55),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},function(t,n,e){"use strict";var r=e(4),o=e(36).find,i=e(55),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(t,n,e){var r=e(2),o=e(0).RegExp,i=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),u=i||r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:u,MISSED_STICKY:a,UNSUPPORTED_Y:i}},function(t,n,e){var r=e(2),o=e(0).RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},function(t,n,e){var r=e(2),o=e(0).RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},function(t,n,e){"use strict";var r=e(4),o=e(165);r({target:"String",proto:!0,forced:e(166)("link")},{link:function(t){return o(this,"a","href",t)}})},function(t,n,e){var r=e(5),o=e(30),i=e(27),a=/"/g,u=r("".replace);t.exports=function(t,n,e,r){var c=i(o(t)),s="<"+n;return""!==e&&(s+=" "+e+'="'+u(i(r),a,"&quot;")+'"'),s+">"+c+"</"+n+">"}},function(t,n,e){var r=e(2);t.exports=function(t){return r((function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}))}},function(t,n,e){"use strict";var r=e(7),o=e(168),i=e(8),a=e(87),u=e(27),c=e(30),s=e(43),f=e(169),l=e(170);o("match",(function(t,n,e){return[function(n){var e=c(this),o=null==n?void 0:s(n,t);return o?r(o,n,e):new RegExp(n)[t](u(e))},function(t){var r=i(this),o=u(t),c=e(n,r,o);if(c.done)return c.value;if(!r.global)return l(r,o);var s=r.unicode;r.lastIndex=0;for(var d,p=[],h=0;null!==(d=l(r,o));){var v=u(d[0]);p[h]=v,""===v&&(r.lastIndex=f(o,a(r.lastIndex),s)),h++}return 0===h?null:p}]}))},function(t,n,e){"use strict";e(28);var r=e(5),o=e(14),i=e(75),a=e(2),u=e(6),c=e(22),s=u("species"),f=RegExp.prototype;t.exports=function(t,n,e,l){var d=u(t),p=!a((function(){var n={};return n[d]=function(){return 7},7!=""[t](n)})),h=p&&!a((function(){var n=!1,e=/a/;return"split"===t&&((e={}).constructor={},e.constructor[s]=function(){return e},e.flags="",e[d]=/./[d]),e.exec=function(){return n=!0,null},e[d](""),!n}));if(!p||!h||e){var v=r(/./[d]),g=n(d,""[t],(function(t,n,e,o,a){var u=r(t),c=n.exec;return c===i||c===f.exec?p&&!a?{done:!0,value:v(n,e,o)}:{done:!0,value:u(e,n,o)}:{done:!1}}));o(String.prototype,t,g[0]),o(f,d,g[1])}l&&c(f[d],"sham",!0)}},function(t,n,e){"use strict";var r=e(110).charAt;t.exports=function(t,n,e){return n+(e?r(t,n).length:1)}},function(t,n,e){var r=e(0),o=e(7),i=e(8),a=e(3),u=e(29),c=e(75),s=r.TypeError;t.exports=function(t,n){var e=t.exec;if(a(e)){var r=o(e,t,n);return null!==r&&i(r),r}if("RegExp"===u(t))return o(c,t,n);throw s("RegExp#exec called on incompatible receiver")}},function(t,n,e){"use strict";var r=e(47).PROPER,o=e(14),i=e(8),a=e(27),u=e(2),c=e(172),s=RegExp.prototype.toString,f=u((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),l=r&&"toString"!=s.name;(f||l)&&o(RegExp.prototype,"toString",(function(){var t=i(this);return"/"+a(t.source)+"/"+a(c(t))}),{unsafe:!0})},function(t,n,e){var r=e(7),o=e(11),i=e(40),a=e(76),u=RegExp.prototype;t.exports=function(t){var n=t.flags;return void 0!==n||"flags"in u||o(t,"flags")||!i(u,t)?n:r(a,t)}},function(t,n,e){var r=e(10),o=e(13),i=e(76),a=e(2),u=RegExp.prototype;r&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(u,"flags").get.call({dotAll:!0,sticky:!0})}))&&o.f(u,"flags",{configurable:!0,get:i})},function(t,n,e){var r=e(105);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,n,e){var r=e(4),o=e(178),i=e(55);r({target:"Array",proto:!0},{fill:o}),i("fill")},function(t,n,e){"use strict";var r=e(21),o=e(48),i=e(23);t.exports=function(t){for(var n=r(this),e=i(n),a=arguments.length,u=o(a>1?arguments[1]:void 0,e),c=a>2?arguments[2]:void 0,s=void 0===c?e:o(c,e);s>u;)n[u++]=t;return n}},function(t,n,e){"use strict";e.r(n),e.d(n,"default",(function(){return mt}));var r=e(57),o=e.n(r),i=e(9),a=(e(78),e(15),e(18),e(26),e(52),e(99),e(1)),u=e.n(a),c=(e(37),e(53),e(54),e(152),"ANNOTATIONSETCOLOR"),s="ANNOTATIONSETOPACITY",f="ANNOTATIONSETFILLCOLOR",l="ANNOTATIONSETBORDERWIDTH",d="ANNOTATIONSETBORDERSTYLE",p="ANNOTATIONSETENDINGSTYLE",h="ANNOTATIONENABLECAPTION",v="ANNOTATIONSETROTATION",g="ANNOTATIONSETHIGHLIGHTINGMODE",y="REMOVEANNOT",m="ADDANNOT",x="ANNOTATIONSETRECT",b="ANNOTATION_MOVE_TO",S="ANNOTATION_SET_RECT",w="UPDATEQUADPOINTSBYCHARINDEX",R="ANNOTATIONUPDATECALLOUTPOINTS",A="ANNOTATIONUPDATELINEPOINTS",E="ANNOTATIONSETLEADERLINELENGTH",O="ANNOTATIONUPDATEVERTEXES",T="ANNOTATIONSETCONTENT",P="ANNOTATIONPLACEREDACT",I="ANNOTATIONADDREPLY",j="ANNOTATIONDELETEREPLY",N="ANNOTATIONADDACTION",C="ANNOTATIONERASER",k="ANNOTATIONMARKREDACTANNOT",M="ANNOTATIONMAKEREDACTBYPAGES",D="MARKCHECKEDRESULTREDACTION",L="ADDREVIEWSTATE",_="ADD_MARKED_STATE",V="DEFAULTAP",F="moveAnnotsCrossPage",B="ANNOTATIONUPDATECAPTIONOFFSET",U="Group",G="FlipPoint",H=i.PDFViewCtrl.Deps.jQuery,W=i.UIEvents,q=function(){function t(t,n){this.pdfViewer=t,this.controller=n}var n=t.prototype;return n.init=function(){var t,n=this.controller,e=this.pdfViewer,r=void 0,i=0,a=this.resetMergeStatus=function(){r=void 0,i=0,t=void 0};e.registerMatchRule((function(m,I){function j(o,u){return n.create("annot",o,u,function(){if(i++,!r)return r=m,t||(t=e.getAllActivatedElements().map((function(t){return t.annot})).filter(Boolean).filter((function(t){return"widget"!==t.getType()}))),0===t.length||-1===t.indexOf(m)?(i--,r=void 0,t=void 0):t.length===i&&a(),!1;-1===t.indexOf(m)&&i--;var n=t.length;return i===n?(a(),!0):n>1}())}return function(r){function i(){for(var t,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(t=r.call.apply(r,[this].concat(e))||this).undoRedoDataRecord={},t}o()(i,r);var a=i.prototype;return a.setColor=function(t){var n=this,e=this.annot.getBorderColor();return r.prototype.setColor.call(this,t).then((function(t){var r=n.annot.getBorderColor();return j(c,{annot:n.annot,oldColor:e,newColor:r}),t}))},a.setOpacity=function(t){var n=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&o&&j(s,{annot:this.annot,oldOpacity:o.oldValue,newOpacity:o.commitValue});var i=this.annot.getOpacity();return r.prototype.setOpacity.call(this,t).then((function(t){var r=n.annot.getOpacity();return e&&!o&&j(s,{annot:n.annot,oldOpacity:i,newOpacity:r}),t}))},a.setFillColor=function(t){var n=this,e=this.annot.getStyleFillColor||this.annot.getFillColor,o=e.call(this.annot);return r.prototype.setFillColor.call(this,t).then((function(t){var r=e.call(n.annot);return j(f,{annot:n.annot,oldFillColor:o,newFillColor:r}),t}))},a.setBorderWidth=function(t){var n=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&o&&j(l,{annot:this.annot,oldBorderWidth:o.oldValue,newBorderWidth:o.commitValue});var i=this.annot.getBorderWidth();return r.prototype.setBorderWidth.call(this,t).then((function(t){var r=n.annot.getBorderWidth();return e&&!o&&j(l,{annot:n.annot,oldBorderWidth:i,newBorderWidth:r}),t}))},a.setBorderStyle=function(t,n){var e=this,o=this.annot.getBorderStyleWithParam();return r.prototype.setBorderStyle.call(this,t,n).then((function(t){var n=e.annot.getBorderStyleWithParam();return j(d,{annot:e.annot,oldBorderStyle:o,newBorderStyle:n}),t}))},a.flip=function(t){var e=this;return this.annot.flip().then((function(r){return n.create("annot",G,{annot:e.annot},t),r}))},a.setEndingStyle=function(t,e){var o,i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=(o=t?this.annot.getStartStyle||this.annot.getCalloutLineEndingStyle:this.annot.getEndingStyle).call(this.annot);return r.prototype.setEndingStyle.call(this,t,e).then((function(e){var r=o.call(i.annot);return n.create("annot",p,{annot:i.annot,isStart:t,oldStyle:u,newStyle:r},a),e}))},a.enableCaption=function(t){var n=this,e=this.annot.hasCaption();return r.prototype.enableCaption.call(this,t).then((function(t){var r=n.annot.hasCaption();return j(h,{annot:n.annot,oldEnableCaption:e,newEnableCaption:r}),t}))},a.setRotation=function(t){var n=this,e=this.annot.getRotation(),o=this.annot.getRect();return r.prototype.setRotation.call(this,t).then((function(t){var r=n.annot.getRotation(),i=n.annot.getRect();return j(v,{annot:n.annot,oldRotation:e,newRotation:r,oldRect:o,newRect:i}),t}))},a.setHighlightingMode=function(t){var n=this,e=this.annot.getHighlightingMode();return r.prototype.setHighlightingMode.call(this,t).then((function(t){var r=n.annot.getHighlightingMode();return j(g,{annot:n.annot,oldHlMode:e,newHlMode:r}),t}))},a.removeAnnot=function(){var n=this.annot,o=(n.getName(),n.info.type),i=!("sound"===o||"widget"===o||"watermark"===o);return i&&!t&&(t=e.getAllActivatedElements().map((function(t){return t.annot})).filter(Boolean)).slice(0).forEach((function(n){var e=n.getGroupHeader&&n.getGroupHeader();if(e!==n){var r=t.indexOf(e);r>-1&&t.splice(r,1)}})),r.prototype.removeAnnot.call(this).then((function(t){i&&t&&t.length>0&&j(y,[t,n]);return t}))},a.textBoundaryStart=function(){this.undoRedoDataRecord[w]={annot:this.annot,oldStart:this.annot.getStartCharIndex(),oldEnd:this.annot.getEndCharIndex()}},a.textBoundaryEnd=function(){var t=this.undoRedoDataRecord[w],n=u()({},t,{annot:this.annot,newStart:this.annot.getStartCharIndex(),newEnd:this.annot.getEndCharIndex()});j(w,n)},a.onStartUpdateShape=function(t){if(this.isCallingOnShapeUpdate=!0,"resize"===t&&"freetext"===this.annot.getType()&&this.annot.getIntent&&"FreeTextCallout"===this.annot.getIntent())this.undoRedoDataRecord[R]={annot:this.annot,oldRect:this.annot.getRect(),oldCalloutLinePoints:this.annot.getCalloutLinePoints(),oldInnerRect:this.annot.getInnerRect()};else{var n=this.annot.getType();"square"===n||"circle"===n||"freetext"===n&&this.annot.getIntent&&"FreeTextTextbox"===this.annot.getIntent()?this.undoRedoDataRecord[x]={annot:this.annot,oldRect:this.annot.getRect(),oldInnerRect:this.annot.getInnerRect()}:this.undoRedoDataRecord[x]={annot:this.annot,oldRect:this.annot.getRect()}}return r.prototype.onStartUpdateShape.apply(this,arguments)},a.onShapeUpdateEnd=function(t,n,e){var o=this,i=r.prototype.onShapeUpdateEnd.apply(this,arguments);return i.finally((function(){o.isCallingOnShapeUpdate=!1})),"resize"===e&&"freetext"===this.annot.getType()&&this.annot.getIntent&&"FreeTextCallout"===this.annot.getIntent()?i.then((function(){var t=o.undoRedoDataRecord[R],n=u()({},t,{annot:o.annot,newRect:o.annot.getRect(),newCalloutLinePoints:o.annot.getCalloutLinePoints(),newInnerRect:o.annot.getInnerRect()});j(R,n)})):i.then((function(){var t,n=o.undoRedoDataRecord[x],e=o.annot.getType();t="square"===e||"circle"===e||"freetext"===e&&o.annot.getIntent&&"FreeTextTextbox"===o.annot.getIntent()?u()({},n,{annot:o.annot,newRect:o.annot.getRect(),newInnerRect:o.annot.getInnerRect()}):u()({},n,{annot:o.annot,newRect:o.annot.getRect()}),j(x,t)}))},a.moveTo=function(t,n,e,o){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=this.annot.getRect(),c=this.getPDFPage(),s=t,f=n;if(!a){var l=c.reverseDevicePoint([t,n],this.scale,this.rotate);s=l[0],f=l[1]}var d=r.prototype.moveTo.apply(this,arguments);return d.then((function(t){return i.isCallingOnShapeUpdate||j(b,{annot:i.annot,originLeft:u.left,originTop:u.top,left:s,top:f,action:e,apply:o}),t}))},a.setRect=function(t){var n=this,e=this.annot.getRect(),o=this.getPDFPage(),i=o.reverseDeviceRect({left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},this.scale,this.rotate),a=r.prototype.setRect.apply(this,arguments);return a.then((function(t){return n.isCallingOnShapeUpdate||j(S,{annot:n.annot,originRect:e,newRect:i}),t}))},a.boundaryChangeStart=function(t){if("line"===this.annot.getType())switch(H(t.target).data("index")){case 0:case 1:this.undoRedoDataRecord[A]={annot:this.annot,oldStartPoint:this.annot.getStartPoint(),oldEndPoint:this.annot.getEndPoint()};break;case 2:case 3:this.undoRedoDataRecord[E]={annot:this.annot,oldLeaderLinePoints:this.annot.getLeaderLinePoints(),oldStartPoint:this.annot.getStartPoint(),oldEndPoint:this.annot.getEndPoint()};break;case"caption":this.undoRedoDataRecord[B]={annot:this.annot,oldCaptionOffset:this.annot.getCaptionOffset()}}else this.undoRedoDataRecord[O]={annot:this.annot,oldVertexes:this.annot.getVertexes(),oldIndex:H(t.target).data("index")}},a.boundaryChangeEnd=function(t){var n=H(t.target).data("index")||H(t.target).parent().data("index");if("line"===this.annot.getType())switch(n){case 0:case 1:var e=this.undoRedoDataRecord[A],r=u()({},e,{annot:this.annot,newStartPoint:this.annot.getStartPoint(),newEndPoint:this.annot.getEndPoint()});j(A,r);break;case 2:case 3:var o=this.undoRedoDataRecord[E],i=u()({},o,{annot:this.annot,newLeaderLinePoints:this.annot.getLeaderLinePoints(),newStartPoint:this.annot.getStartPoint(),newEndPoint:this.annot.getEndPoint()});j(E,i);break;case"caption":var a=this.undoRedoDataRecord[B],c=u()({},a,{annot:this.annot,newCaptionOffset:this.annot.getCaptionOffset()});j(B,c)}else{var s=this.undoRedoDataRecord[O],f=u()({},s,{annot:this.annot,newVertexes:this.annot.getVertexes(),newIndex:n});j(O,f)}},a.setContent=function(t){var n=this,e=this.annot.getContent();return r.prototype.setContent.call(this,t).then((function(t){var r=n.annot.getContent();if(r!==e)if("freetext"===n.annot.getType()){var o=n.annot.getInnerRect(),i=n.annot.getRect(),a=n.annot.getCalloutLinePoints();j(T,{annot:n.annot,oldContent:e,newContent:r,oldInnerRect:n.oldInnerRect,newInnerRect:o,oldRect:n.oldRect,newRect:i,oldCalloutLinePoints:n.oldCalloutLinePoints,newCalloutLinePoints:a})}else j(T,{annot:n.annot,oldContent:e,newContent:r});return t}))},a.placeRedact=function(t){return r.prototype.placeRedact.call(this,t).then((function(t){var n=[];return t.map((function(t){var e=t[0];n.push(e)})),j(P,{redacts:n}),t}))},a.setDefaultAppearance=function(t,n){var e=this,o=this.annot.getDefaultAppearance();return r.prototype.setDefaultAppearance.call(this,t,n).then((function(t){var n=e.annot.getDefaultAppearance();j(V,{annot:e.annot,oldDA:o,newDA:n})}))},i}(I)})),this.bindEvent()},n.bindEvent=function(){var t=this.controller,n=this.pdfViewer;function e(n,e){t.create("annot",n,e)}n.eventEmitter.on(W.addReplySuccess,(function(t,n){"sound"!==t.info.type&&e(I,{annot:t,replyAnnot:n})})),n.eventEmitter.on(W.deleteReplySuccess,(function(t,n){e(j,{annot:t,replyAnnot:n})})),n.eventEmitter.on("annot-group-event",(function(t,n,r){e(U,{page:t,annotIds:n,isGroup:r})})),n.eventEmitter.on(W.addActionSuccess,(function(t){e(N,{annot:t})})),n.eventEmitter.on(W.eraserSuccess,(function(t,n){e(C,{beforeInks:t,afterInks:n})})),n.eventEmitter.on(W.addAnnotSuccess,(function(t){e(m,{annot:t})})),n.eventEmitter.on(W.applyRedaction,(function(n){t.clear()})),n.eventEmitter.on(W.addContentSuccess,(function(t,n,r){e(T,{annot:t,oldContent:n,newContent:r})})),n.eventEmitter.on(W.cancelAddAnnot,(function(){t.popUndoStack()})),n.eventEmitter.on("markRedactAnnotSuccess",(function(t){e(k,{annot:t})})),n.eventEmitter.on("makeRedactByPagesSuccess",(function(t){e(M,{redacts:t})})),n.eventEmitter.on(W.markRedactionSuccess,(function(t){e(D,{redacts:t})})),n.eventEmitter.on(W.addReviewStateSuccess,(function(t,n){"sound"!==t.info.type&&e(L,{annot:t,stateName:n.getState()})})),n.eventEmitter.on(W.annotationMarkedStateAnnotAdd,(function(t,n,r){r||e(_,{annot:n,stateName:t.getState()})})),n.eventEmitter.on(W.moveAnnotsToPages,(function(t,n,r,o){o&&e(F,{srcPage:t,destPage:n,annots:r})}));var r=function(){return t.clear()};n.eventEmitter.on(W.importPages,r),n.eventEmitter.on(W.pageAdded,r),n.eventEmitter.on(W.pageRemoved,r),n.eventEmitter.on(W.pagesRemoved,r),n.eventEmitter.on(W.pageRotationChange,r),n.eventEmitter.on(W.pagesRotated,r),n.eventEmitter.on(W.pageMoved,r),n.eventEmitter.on(W.pagesMoved,r)},t}(),Y=function(){function t(){this.stackArray=[]}var n=t.prototype;return n.push=function(t){this.stackArray.push(t)},n.pop=function(){return this.stackArray.pop()},n.size=function(){return this.stackArray.length},n.clear=function(){var t=this,n=this.stackArray,e=[];return this.stackArray=e,function(){t.stackArray===e&&(t.stackArray=n)}},n.filter=function(t){this.stackArray=this.stackArray.filter(t)},t}(),z=function(){function t(t,n){this.pdfViewer=t,this.controller=n,this.undoStack=new Y,this.redoStack=new Y}var n=t.prototype;return n.storage=function(t){var n=this;return this.undoStack.push(t),function(){var e=n.undoStack.indexOf(t);e>-1&&n.undoStack.splice(e,1)}},n.mergeLast=function(t){var n=this,e=this.undoStack.pop();if(e){var r=this.doMerge(e,t);return this.undoStack.push(r),function(){var t=n.undoStack.indexOf(r);t>-1&&(n.undoStack[t]=e)}}return this.storage(t)},n.doMerge=function(t,n){return{undo:function(){return Promise.resolve(t.undo()).finally((function(){return n.undo()}))},redo:function(){return Promise.resolve(t.redo()).finally((function(){return n.redo()}))}}},n.undo=function(){var t=this.undoStack.pop();if(t)return this.redoStack.push(t),t},n.redo=function(){var t=this.redoStack.pop();if(t)return this.undoStack.push(t),t},n.removeById=function(t){this.undoStack.filter((function(n){return t!==n.uniqueId})),this.redoStack.filter((function(n){return t!==n.uniqueId}))},n.removeByName=function(t){this.undoStack.filter((function(n){if(n.annot)return t!==n.annot.info.name})),this.redoStack.filter((function(n){if(n.annot)return t!==n.annot.info.name}))},n.clear=function(){this.undoStack.clear(),this.redoStack.clear()},n.getUndoStack=function(){return this.undoStack},n.getRedoStack=function(){return this.redoStack},t}(),K=(e(102),e(77)),J=e.n(K),X=(e(74),e(109),e(111),e(159),e(160),e(28),e(164),e(167),e(171),i.PDFViewCtrl.Consts.BORDER_STYLE),$=function(){function t(t){var n=function(t){var n,e,r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u="";"number"==typeof t&&(t=["int",t]);switch(t[0]){case"int":n=(16711680&t[1])>>16,e=(65280&t[1])>>8,r=255&t[1];break;case"T":n=0,e=0,r=0,a=0;break;case"G":n=e=r=255*t[1];break;case"RGB":n=255*t[1],e=255*t[2],r=255*t[3];break;case"CMYK":n=(1-t[4])*(1-t[1])*255,e=(1-t[4])*(1-t[2])*255,r=(1-t[4])*(1-t[3])*255;break;case"r":o=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/),n=+o[1],e=+o[2],r=+o[3];break;case"#":var c=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;o=t.match(c),n=parseInt(o[1],16),e=parseInt(o[2],16),r=parseInt(o[3],16);break;default:throw new Error("Unsupported color format")}switch(i){case"HTML":u=n===e&&e===r&&-1===r?"transparent":"rgba("+parseInt(n)+","+parseInt(e)+","+parseInt(r)+","+a+")";break;case"RGB":u=["RGB",n/255,e/255,r/255];break;case"#":u+=n<16?"#0"+n.toString(16):"#"+n.toString(16),u+=e<16?"0"+e.toString(16):e.toString(16),u+=r<16?"0"+r.toString(16):r.toString(16);break;case"int":u=0,u|=(a*=255)<<24,u|=n<<16,u|=e<<8,u|=r,u>>>=0}return u}(t.info.borderColor,"int");this.json={objectNumber:t.info.objectNumber,name:t.getName(),flags:t.info.flag,rect:t.info.rect,color:n,style:t.info.borderInfo.style,contents:t.info.content,date:new Date(t.info.modifiedTimestamp).getTime(),type:t.info.type,borderWidth:t.info.borderInfo.width},t.info.isMarkup&&this.markup(t);var e=t.info.type;switch("strikeout"!==e&&"highlight"!==e&&"squiggly"!==e&&"underline"!==e||this.textMarkup(t),e){case"ink":this.ink(t);break;case"fileattachment":this.fileattachment(t);break;case"polygon":this.polygon(t);break;case"polyline":this.polyline(t);break;case"stamp":this.stamp(t);break;case"freetext":this.freetext(t);break;case"screen":this.screen(t);break;case"line":this.line(t);break;case"redact":this.redact(t);break;case"highlight":this.highlight(t);break;case"link":this.link(t);break;case"square":this.square(t);break;case"circle":this.circle(t)}}var n=t.prototype;return n.markup=function(t){var n="",e=!1;if(t.getPopup){var r=t.getPopup();r?(n=r.getName(),e=!1):e=!0}else e=!0;this.json=u()({intent:t.info.intent,opacity:t.info.opacity,subject:t.info.subject,title:t.info.title,creationTimestamp:new Date(t.info.creationTimestamp).getTime(),popId:n,noPopup:e},this.json)},n.textMarkup=function(t){var n=[];t.info.quadPoints.map((function(t){n.push({top:t[0].y,left:t[0].x,bottom:t[3].y,right:t[3].x})})),this.json=u()(this.json,{coords:n})},n.ink=function(t){this.json=u()({inkList:t.info.inkList},this.json)},n.fileattachment=function(t){this.json=u()({fObjNum:t.info.fObjNum},this.json)},n.polygon=function(t){var n=Q(t.info.borderInfo),e=t.info.measureRatio,r=t.info.measureUnit,o=null;e&&r&&(o={unit:r,ratio:e}),this.json=u()(this.json,{vertexes:t.info.vertexes,borderStyle:n.style,borderStyleParam:n.param,fillColor:t.info.fillColor,style:void 0,measure:o})},n.polyline=function(t){var n=Q(t.info.borderInfo),e=t.info.measureRatio,r=t.info.measureUnit,o=null;e&&r&&(o={unit:r,ratio:e}),this.json=u()(this.json,{vertexes:t.info.vertexes,fillColor:t.info.fillColor,borderStyle:n.style,borderStyleParam:n.param,style:void 0,startStyle:t.info.startStyle,endStyle:t.info.endingStyle,measure:o})},n.stamp=function(t){this.json=u()({icon:t.info.icon,rotate:(t.info.rotation+360)%360,apObjeNum:t.info.apObjeNum},this.json)},n.freetext=function(t){var n=Q(t.info.borderInfo),e="FreeTextTypewriter"==t.info.intent?0:t.info.fillColor;this.json=u()(this.json,{calloutLinePoints:t.info.calloutLinePoints,innerRect:t.info.innerRect,borderStyle:n.style,borderStyleParam:n.param,style:void 0,"interior-color":e,calloutLineEndingStyle:t.info.calloutLineEndingStyle,defaultAppearance:t.info.defaultAppearance,rotate:t.info.rotation})},n.line=function(t){var n=Q(t.info.borderInfo),e=t.info.measureRatio,r=t.info.measureUnit,o=null;e&&r&&(o={unit:r,ratio:e});var i=t.info.startPoint,a=t.info.endPoint;this.json=u()(this.json,{styleFillColor:t.info.styleFillColor,startStyle:t.info.startStyle,endStyle:t.info.endingStyle,enableCaption:t.info.hasCaption,startPoint:{x:i.x,y:i.y},endPoint:{x:a.x,y:a.y},measure:o,borderStyle:n.style,borderStyleParam:n.param,style:void 0})},n.screen=function(t){var n=Q(t.info.borderInfo);this.json=u()({apObjNum:t.info.apObjNum,opacity:t.info.opacity,rotate:{0:0,90:1,180:2,270:3}[t.info.rotation],iObjNum:t.info.iObjNum,aObjNum:t.info.aObjNum,intensity:n.param},this.json)},n.redact=function(t){var n=t.info.quadPoints,e=[];n.length>0?n.map((function(t){e.push({left:t[0].x,right:t[3].x,top:t[0].y,bottom:t[3].y})})):e.push(t.info.rect),this.json=u()(this.json,{rects:e,applyFillColor:t.info.applyFillColor})},n.highlight=function(t){t.info.isArea&&(this.json=u()(this.json,{coords:[t.info.rect],dicts:{AreaHi:"AreaHi"}}),delete this.json.startCharIndex,delete this.json.endCharIndex)},n.link=function(t){var n=Q(t.info.borderInfo);this.json=u()(this.json,{aObjNum:t.info.aObjNum,borderStyle:n.style,borderStyleParam:n.param,style:void 0,highlightingMode:t.info.highlightingMode})},n.circle=function(t){var n=Q(t.info.borderInfo),e=t.info.measureRatio,r=t.info.measureUnit,o=null;e&&r&&(o={unit:r,ratio:e}),this.json=u()(this.json,{fillColor:t.info.fillColor,borderStyle:n.style,borderStyleParam:n.param,style:void 0,measure:o})},n.square=function(t){var n=Q(t.info.borderInfo),e=t.info.measureRatio,r=t.info.measureUnit,o=null;e&&r&&(o={unit:r,ratio:e}),this.json=u()(this.json,{fillColor:t.info.fillColor,measure:o,borderStyle:n.style,borderStyleParam:n.param,style:void 0})},n.getJson=function(){return this.json},t}();function Q(t){var n,e=t.style,r=t.cloudIntensity,o=t.dashes;switch(e){case X.SOLID:n=[];break;case X.CLOUDY:n=r;break;case X.DASHED:n=o}return{style:e,param:n}}e(173);var Z=function(){function t(t){this.action=t,this.json={},this[t.type]()}var n=t.prototype;return n.TypeGoto=function(){var t=this.action.destination;this.json=u()(t,{type:t.zoomMode})},n.TypeURI=function(){var t=this.action.uri;this.json=u()({},{uri:t})},n.TypeJavaScript=function(){var t=this.action.javascript;this.json=u()({},{script:t})},n.TypeNamed=function(){var t=this.action.name;this.json=u()({},{name:t})},n.TypeHide=function(){var t=this.action,n=t.fieldNames,e=t.hideState;this.json=u()({},{fieldNames:n,hideState:e})},n.TypeSubmitForm=function(){var t=this.action,n=t.flags,e=t.url,r=t.fieldNames;this.json=u()({},{flags:n,url:e,fieldNames:r})},n.TypeResetForm=function(){var t=this.action,n=t.flags,e=t.fieldNames;this.json=u()({},{flags:n,fieldNames:e})},n.TypeGoToR=function(){var t=this.action,n=t.destinationName,e=t.destination;this.json=u()({},{destinationName:n,destination:e})},n.toJson=function(){return this.json},t}();e(19),e(112),e(177);i.PDFViewCtrl.Consts.Intents;var tt=i.PDFViewCtrl.shared.QueuedAsyncTaskExecutor,nt=function(t,n,e,r,o,i,a,u,c,s,f,l,d,p,h,v,g,y,m,x,b,S,w,R,A,E,O,T,P,I,j,N,C,k,M){function D(t){this.pdfViewer=t,this.pdfViewer.recordsMap={}}var L=D.prototype;return L[t]=function(t){var n=t.annot,e=t.oldColor,r=t.newColor,o=this.pdfViewer;function i(t){return function(){var e=et(o,n);return-1===t&&(t=0),e.annot.setBorderColor(t).then((function(){e.updateRender()}))}}return{undo:i(e),redo:i(r)}},L[n]=function(t){var n=t.annot,e=t.oldOpacity,r=t.newOpacity,o=this.pdfViewer;function i(t){return function(){var e=et(o,n);return e.annot.setOpacity(t).then((function(){e.updateRender()}))}}return{undo:i(e),redo:i(r)}},L[e]=function(t){var n=t.annot,e=t.oldFillColor,r=t.newFillColor,o=this.pdfViewer;function i(t){return function(){var e=et(o,n);(e.annot.setStyleFillColor||e.annot.setFillColor).call(e.annot,t)}}return{undo:i(e),redo:i(r)}},L[r]=function(t){var n=t.annot,e=t.oldBorderWidth,r=t.newBorderWidth,o=this.pdfViewer;function i(t){return function(){return et(o,n).annot.setBorderWidth(t)}}return{undo:i(e),redo:i(r)}},L[o]=function(t){var n=t.annot,e=this.pdfViewer;function r(t){return function(){return et(e,t).annot.flip()}}return{undo:r(n),redo:r(n)}},L[i]=function(t){var n=t.annot,e=t.oldBorderStyle,r=t.newBorderStyle,o=this.pdfViewer;function i(t){return function(){return et(o,n).annot.setBorderStyle(t.style,t.param)}}return{undo:i(e),redo:i(r)}},L[a]=function(t){var n=t.annot,e=t.isStart,r=t.oldStyle,o=t.newStyle,i=this.pdfViewer;function a(t){return function(){var r=et(i,n);return r.annot.setCalloutLineEndingStyle?r.annot.setCalloutLineEndingStyle(+t).then((function(){r.redraw(),r.activeRect()})):r.annot.setEndingStyle(e,+t).then((function(){r.redraw(),r.activeRect()}))}}return{undo:a(r),redo:a(o)}},L[u]=function(t){var n=t.annot,e=t.oldEnableCaption,r=t.newEnableCaption,o=this.pdfViewer;function i(t){return function(){return et(o,n).annot.enableCaption(t)}}return{undo:i(e),redo:i(r)}},L[c]=function(t){var n=t.annot,e=t.oldRotation,r=t.newRotation,o=t.oldRect,i=t.newRect,a=this.pdfViewer;function u(t,e){return function(){var r=et(a,n);return"screen"===n.getType()?r.annot.setRect(e).then((function(n){if(n)return r.annot.setRotation((t+360)%360).then((function(){r.activeRect()}))})):r.annot.setRotation((t+360)%360).then((function(){r.activeRect()}))}}return{undo:u(e,o),redo:u(r,i)}},L[s]=function(t){var n=t.annot,e=t.oldHlMode,r=t.newHlMode,o=this.pdfViewer;function i(t){return function(){return et(o,n).annot.setHighlightingMode(t)}}return{undo:i(e),redo:i(r)}},L[f]=function(t){var n=J()(t,2),e=n[0],r=n[1],o=this.pdfViewer;return{undo:rt(o,e,r),redo:ot(r,o)}},L[l]=function(t){var n=t.annot,e=this.pdfViewer,r=[n],o=n.getPopup&&n.getPopup();return o&&!o.isEmpty()&&r.push(o),n.isReplace&&n.isReplace()&&(r=n.getGroupElements().map((function(t){return t}))).push(n.getGroupHeader().getPopup()),{undo:ot(n,e),redo:rt(e,r,n),annot:n}},L[d]=function(t){var n=t.annot,e=t.oldStart,r=t.oldEnd,o=t.newStart,i=t.newEnd,a=this.pdfViewer;function u(t,e){return function(){var r=et(a,n);return r.annot.updateQuadPointsByCharIndex(t,e).then((function(){if(r.redraw(),r.isReplace)return r.caretAnnot.moveRectByCharIndex(e).then((function(){r.getGroupRenders().map((function(t){t.active()}))}));r.active()}))}}return{undo:u(e,r),redo:u(o,i)}},L[p]=function(t){var n=t.annot,e=t.oldRect,r=t.newRect,o=t.oldInnerRect,i=t.newInnerRect,a=this.pdfViewer;function u(t,e){return function(){var r=et(a,n);return e?r.annot.setRectAndInnerRect(t,e).then((function(){r.redraw(),r.active()})):r.annot.setRect(t).then((function(){r.redraw(),r.active()}))}}return{undo:u(e,o),redo:u(r,i)}},L[h]=function(t){var n=t.annot,e=t.originRect,r=t.newRect,o=this.pdfViewer;function i(t){return function(){var e=et(o,n);return e.annot.setRect(t).then((function(){e.redraw(),e.active()}))}}return{undo:i(e),redo:i(r)}},L[v]=function(t){var n=t.annot,e=t.originLeft,r=t.originTop,o=t.left,i=t.top,a=this.pdfViewer;function u(t,e){return function(){var r=et(a,n);return r&&r.annot?r.annot.moveTo({left:t,top:e}).then((function(){r.redraw(),r.active()})):Promise.resolve()}}return{undo:u(e,r),redo:u(o,i)}},L[g]=function(t){var n=t.annot,e=t.oldRect,r=t.oldCalloutLinePoints,o=t.oldInnerRect,i=t.newRect,a=t.newCalloutLinePoints,u=t.newInnerRect,c=this.pdfViewer;function s(t,e,r){return function(){var o=et(c,n);return o.annot._setRect(t,!1).then((function(){return o.annot.setInnerRectNoAction(r).then((function(){return o.annot.setCalloutLinePoints(e).then((function(){return o.annot.update().then((function(){o.redraw(),o.active()}))}))}))}))}}return{undo:s(e,r,o),redo:s(i,a,u)}},L[y]=function(t){var n=t.annot,e=t.oldStartPoint,r=t.oldEndPoint,o=t.newStartPoint,i=t.newEndPoint,a=this.pdfViewer;function u(t,e){return function(){var r=[],o=et(a,n);return r.push(o.annot.setStartPoint(t)),r.push(o.annot.setEndPoint(e)),Promise.all(r).then((function(){o.active()}))}}return{undo:u(e,r),redo:u(o,i)}},L[m]=function(t){var n=t.annot,e=t.oldLeaderLinePoints,r=t.oldStartPoint,o=t.oldEndPoint,i=t.newLeaderLinePoints,a=t.newStartPoint,u=t.newEndPoint,c=this.pdfViewer;function s(t,e,r){var o=t.start,i=(t.end,Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))),a=!0;return(r.x-e.x)*(o.y-r.y)-(o.x-r.x)*(r.y-e.y)>0&&(a=!1),a&&(i=-i),function(){var t=et(c,n);return t.annot.setLeaderLineLength(i).then((function(){t.active()}))}}return{undo:s(e,r,o),redo:s(i,a,u)}},L[x]=function(t){var n=t.annot,e=t.oldVertexes,r=t.oldIndex,o=t.newVertexes,i=t.newIndex,a=this.pdfViewer;function u(t,e){return function(){var r=et(a,n);return r.annot.updateVertexes(t,e[t]).then((function(){r.active()}))}}return{undo:u(r,e),redo:u(i,o)}},L[b]=function(t){var n=t.annot,e=t.oldContent,r=t.newContent,o=t.oldInnerRect,i=t.newInnerRect,a=t.oldRect,u=t.newRect,c=t.oldCalloutLinePoints,s=t.newCalloutLinePoints,f=this.pdfViewer,l=n.getId(),d=[];f.recordsMap[l]?d=f.recordsMap[l]:(f.recordsMap[l]=d,d.push({modifyDate:n.getCreateDateTime(),content:e}));var p=d.findIndex((function(t){return t.content===e}));function h(t,e,r,o){return function(){return function(t,n){return t.getCurrentPDFDoc().getPageByIndex(n.page.getIndex()).then((function(t){return t.getAnnotsByObjectNumArray([n.objectNumber]).then((function(t){return t[0]}))}))}(f,n).then((function(n){return n.setContent(t).then((function(){(f.recordsMap[n.getId()]||[]).forEach((function(i){if(i.content===t)return r?n.setRect(r).then((function(){return e&&n.setInnerRect(e).then((function(){return o&&n.setCalloutLinePoints(o).then((function(){var t=et(f,n);return t.redraw(),t.active(),n._setModifiedDateTime(i.modifyDate)}))}))})):n._setModifiedDateTime(i.modifyDate)}))}))}))}}return-1!==p&&(d.length=p+1),d.push({modifyDate:n.getModifiedDateTime(),content:r}),{undo:h(e,o,a,c),redo:h(r,i,u,s)}},L[S]=function(t){var n=t.redacts,e=this.pdfViewer,r=n.map((function(t){var n=t.getPopup&&t.getPopup();return n&&!n.isEmpty()?[t,n]:[t]}));return{undo:function(){return Promise.all(n.map((function(t){return t.getPDFPage().removeAnnot(t)})))},redo:function(){return Promise.all(r.map((function(t){if(!(t.length<1))return t[0].page.addAnnotObjects(t.map((function(t){return t.objectNumber}))).then((function(n){e.killFocus();var r=et(e,t[0]);r&&r.active()}))})))}}},L[w]=function(t){var n=t.annot,e=t.replyAnnot,r=this.pdfViewer;return{undo:at(n,e,r),redo:it(n,e,r)}},L[R]=function(t){var n=t.annot,e=t.replyAnnot,r=this.pdfViewer;return{undo:it(n,e,r),redo:at(n,e,r)}},L[A]=function(t){var n=t.annot,e=this.pdfViewer,r=n.getAction();return{undo:function(){return n.removeAction()},redo:function(){return function(t,n){return t.setAction(n.type).then((function(){var e=new Z(n).toJson();return t.setActionData(e).then((function(){return function t(n,e){for(var r=e.subActionCount,o=[],i=function(r){o.push(n.insertSubAction(r,e.subAction[r].type).then((function(){var o=new RecoveryAction(e.subAction[r]).toJson(),i=n.getSubAction(r);return i.setActionData(o).then((function(){return t(i,e.subAction[r])}))})))},a=0;a<r;a++)i(a);return Promise.all(o)}(t.getAction(),n)}))}))}(et(e,n).annot,r.info)}}},L[E]=function(t){var n=t.beforeInks,e=t.afterInks,r=this.pdfViewer;return{undo:function(){var t=n.map((function(t,n){var o=t.annot,i=t.inkList;return t.isRemove?rt(r,e[n].params,o,!1)().then((function(t){return et(r,o).annot.setInkList(i)})):et(r,o).annot.setInkList(i)}));return Promise.all(t)},redo:function(){var t=e.map((function(t){var n=t.annot;t.inkList;return t.isRemove?ot(n,r)():et(r,t.annot).annot.setInkList(t.inkList)}));return Promise.all(t)}}},L[O]=function(t){var n=t.annot,e=this.pdfViewer,r=[n],o=n.getPopup();return o&&!o.isEmpty()&&r.push(o),{undo:ot(n,e),redo:rt(e,r,n)}},L[T]=function(t){var n=t.redacts,e=this.pdfViewer,r=[];return n.map((function(t){r.push(new $(t).getJson())})),{undo:function(){return Promise.all(n.map((function(t){return t.getPDFPage().removeAnnot(t)})))},redo:rt(e,n,n[0])}},L[P]=function(t){var n=t.redacts,e=this.pdfViewer,r=[];return n.map((function(t){r.push(new $(t).getJson())})),{undo:function(){return Promise.all(n.map((function(t){return t.getPDFPage().removeAnnot(t)})))},redo:rt(e,n,n[0])}},L[I]=function(t){var n=t.annot,e=t.stateName,r=this.pdfViewer,o=n.getPDFPage(),i=n.getObjectNumber(),a=n.getReviewStates().find((function(t){return t.info.state===e}));return{undo:function(){return o.getAnnotsByObjectNumArray([i]).then((function(t){return t[0]&&t[0].removeReviewState()}))},redo:function(){return o.getAnnotsByObjectNumArray([i]).then((function(t){return function(t,n,e,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e[0].page;return i.addReviewStateAnnotObject(n,e.map((function(t){return t.objectNumber}))).then((function(n){t.killFocus();var e=et(t,r);o&&e&&e.active()}))}(r,t[0],[a],a)}))}}},L[j]=function(t){var n=t.annot,e=t.stateName,r=this.pdfViewer,o=n.getMarkedStates().find((function(t){return t.info.state===e}));function i(t){return n.page.getAnnotsByObjectNumArray([t]).then((function(t){return J()(t,1)[0]}))}return{undo:function(){return i(n.objectNumber).then((function(t){return t.removeMarkedState()}))},redo:function(){return i(n.objectNumber).then((function(t){return function(t,n,e,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e[0].page;return i.addMarkedStateAnnotObject(n,e.map((function(t){return t.objectNumber})),!0,!0).then((function(n){t.killFocus();var e=et(t,r);o&&e&&e.active()}))}(r,t,[o],o)}))}}},L[N]=function(t){var n=t.annot,e=t.oldDA,r=t.newDA,o=this.pdfViewer;function i(t){return function(){var e=et(o,n);return e.annot.setDefaultAppearance(t).then((function(){e.active()}))}}return{undo:i(e),redo:i(r)}},L[C]=function(t){var n=t.srcPage,e=t.destPage,r=t.annots,o=this.pdfViewer.getCurrentPDFDoc(),i=Object.keys(r).reduce((function(t,n){var e=r[n];return t[n]={rect:e.oldRect,oldRect:e.rect},t}),{});return{undo:function(){return o.moveAnnotsToPage(e,n,i,!0)},redo:function(){return o.moveAnnotsToPage(n,e,r,!0)}}},L[k]=function(t){var n=t.annot,e=t.oldCaptionOffset,r=t.newCaptionOffset,o=this.pdfViewer;function i(t){return function(){var e=et(o,n);return e.annot.setCaptionOffset(t.x,t.y).then((function(){e.active()}))}}return{undo:i(e),redo:i(r)}},L[M]=function(t){var n=this,e=t.page,r=t.annotIds,o=t.isGroup;return{undo:function(){n.pdfViewer.killFocus(),e.handleGroupMarkup(r,!o)},redo:function(){n.pdfViewer.killFocus(),e.handleGroupMarkup(r,o)}}},D}(c,s,f,l,G,d,p,h,v,g,y,m,w,x,S,b,R,A,E,O,T,P,I,j,N,C,k,M,D,L,_,V,F,B,U);function et(t,n){var e=t.getAnnotRender(n.page.getIndex(),n.objectNumber);return e?e.component:null}function rt(t,n,e){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!(n.length<1)){var o=n[0].page;return function(){return o.addAnnotObjects(n.map((function(t){return t.objectNumber}))).then((function(n){t.killFocus();var o=et(t,e);r&&o&&o.active()}))}}}function ot(t,n){return function(){n.activeElement();var e=et(n,t);return e&&e.annot&&e.annot.getPDFPage().removeAnnot(e.annot).then((function(t){var r=n.getCurrentActivatable();return r&&r.remove&&r.remove(e),t}))}}function it(t,n,e){return function(){var e=t.page;return e.addAnnotObjects([n.objectNumber],!1).then((function(r){t=e.annotIdMap[t.objectNumber];var o=n.reviewStates;if(o.length>0){var i=[];o.map((function(t){i.push(t.info.state)})),function(t,n){var e=new tt;n.forEach((function(n){e.exec((function(){return t.addReviewState(n)}))})),e.waitForCurrentRunningTasks()}(r[0],i)}t.info.repliesSummary.some((function(t){return t.objectNumber==n.objectNumber}))||(t.info.repliesSummary.push({objectNumber:r[0].info.objectNumber,id:r[0].info.objectNumber,index:r[0].info.index}),t.replies.push(r[0])),e.doc.engine.eventEmitter.emit("annotation-reply-add",r[0],t),e.doc.engine.eventEmitter.emit("annotation-updated",[t],e,"add-replies")}))}}function at(t,n,e){return function(){return t.getPDFPage().removeAnnot(n)}}var ut=function(){function t(t){this.pdfViewer=t}return t.prototype.add=function(t,n){this[t]=n},t}(),ct=UIExtension.UIEvents,st=function(){function t(t,n){this.pdfViewer=t,this.undoRedoManager=n,this.annoutInitStatesManager={};var e=Promise.resolve();this.interpreter={annot:new nt(t),user:new ut(t),undo:function(t){return e=e.finally((function(){return t.undo()}))},redo:function(t){e=e.finally((function(){return t.redo()}))}}}var n=t.prototype;return n.before=function(t,n,e){this.beforeData={type:t,fnName:n,data:e}},n.after=function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.beforeData;o.type===t||o.fnName===n?this.create(t,n,u()(o.data,e),r):this.beforeData=null},n.create=function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];1===Object.keys(e).length&&e.annot&&(this.annoutInitStatesManager[e.annot.objectNumber]=e.annot);var o,i=this.interpreter[t][n](e);o=r?this.undoRedoManager.mergeLast(i):this.undoRedoManager.storage(i);var a=this.undoRedoManager.getRedoStack().clear();return this.pdfViewer.eventEmitter.emit(ct.undoRedoStoreChange,this),function(){o(),a()}},n.removeByName=function(t){this.undoRedoManager.removeByName(t),this.pdfViewer.eventEmitter.emit(ct.undoRedoStoreChange,this)},n.clear=function(){this.undoRedoManager.clear(),this.annoutInitStatesManager={}},n.undo=function(){var t=this.undoRedoManager.undo();t&&(this.interpreter.undo(t),this.pdfViewer.eventEmitter.emit(ct.undoRedoStoreChange,this))},n.redo=function(){var t=this.undoRedoManager.redo();t&&(this.interpreter.redo(t),this.pdfViewer.eventEmitter.emit(ct.undoRedoStoreChange,this))},n.popUndoStack=function(){this.undoRedoManager.getUndoStack().pop()},n.undoAll=function(){for(var t in this.annoutInitStatesManager){var n=this.annoutInitStatesManager[t],e=this.pdfViewer.getAnnotRender(n.page.info.index,n.objectNumber);e&&e.component&&e.component.hideUI()}for(var r=this,o="",i=[];o=this.undoRedoManager.undo();)!function(t){i.push((function(){return r.interpreter.undo(t)}))}(o);return i.reduce((function(t,n){return t.then((function(){return n()}))}),Promise.resolve())},t}(),ft=i.UIEvents,lt=i.PDFViewCtrl.keyboard,dt=lt.BuiltinCommand,pt=lt.BuiltinShortcutContext,ht=lt.interceptors,vt=function(){function t(t){this.pdfViewer=t}var n=t.prototype;return n.init=function(){var t=this,n=this.undoRedoManager=new z(this.pdfViewer),e=this.controller=new st(this.pdfViewer,n);(this.annotModule=new q(this.pdfViewer,e)).init(),this.pdfViewer.getKeyboard().withContext(pt.VIEWER,(function(n){var e={interceptors:[ht.excludeEditableElementInterceptor(),ht.preventDefaultInterceptor()]};n.keydown(dt.UNDO_OPERATION,(function(){t.undo()}),e),n.keydown(dt.REDO_OPERATION,(function(){t.redo()}),e)})),this.pdfViewer.eventEmitter.on(ft.willCloseDocument,(function(){e.clear()}))},n.undo=function(){this.controller.undo()},n.redo=function(){this.controller.redo()},n.undoAll=function(){return this.controller.undoAll()},n.restMergeStatus=function(){this.annotModule.resetMergeStatus()},t}(),gt=e(113),yt=e.n(gt),mt=function(t){function n(){return t.apply(this,arguments)||this}o()(n,t),n.getName=function(){return"undo-redo"},n.getLoader=function(){return yt.a};var e=n.prototype;return e.init=function(n){var e=this;t.prototype.init.call(this,n),this.addonPromise=n.getPDFViewer().then((function(t){if(!t.collaborationOptions||!t.collaborationOptions.enable)return e.addon=new vt(t),e.addon.init(),e.addon}))},e.receiveAction=function(t,n){return this.addonPromise.then((function(e){if(!e)throw new Error("undo/redo is not supported when collaboration is enabled!");return e[t](n)}))},n}(i.UIXAddon)}]).default}));