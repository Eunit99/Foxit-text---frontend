!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery"),require("hammerjs"),require("eventemitter3"),require("dialog-polyfill"),require("jquery-contextmenu"),require("file-saver"),require("i18next"),require("i18next-chained-backend"),require("i18next-localstorage-backend"),require("i18next-xhr-backend")):"function"==typeof define&&define.amd?define(["jquery","hammerjs","eventemitter3","dialog-polyfill","jquery-contextmenu","file-saver","i18next","i18next-chained-backend","i18next-localstorage-backend","i18next-xhr-backend"],e):"object"==typeof exports?exports.PDFViewCtrl=e(require("jquery"),require("hammerjs"),require("eventemitter3"),require("dialog-polyfill"),require("jquery-contextmenu"),require("file-saver"),require("i18next"),require("i18next-chained-backend"),require("i18next-localstorage-backend"),require("i18next-xhr-backend")):t.PDFViewCtrl=e(t.jQuery,t.Hammer,t.EventEmitter,t.dialogPolyfill,t["jquery-contextmenu"],t.saveAs,t.i18next,t.i18nextChainedBackend,t.i18nextLocalStorageBackend,t.i18nextXHRBackend)}(self,(function(t,e,n,r,i,o,a,s,c,u){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=460)}([function(t,e,n){var r=n(222);t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(217),i=n(90),o=n(384);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,n){e.exports=t},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,n.apply(this,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.r(e),n.d(e,"MARKUP_ANNOTATION_STATE",(function(){return r})),n.d(e,"BORDER_STYLE",(function(){return i})),n.d(e,"POINT_TYPE",(function(){return o})),n.d(e,"Intents",(function(){return a})),n.d(e,"LineEndingName",(function(){return s})),n.d(e,"LineEndingStyle",(function(){return c})),n.d(e,"LINE_CAPTION_POSITION",(function(){return u})),n.d(e,"AnnotFlagsName",(function(){return d})),n.d(e,"PDFDocPermission",(function(){return l})),n.d(e,"MeasureType",(function(){return h})),n.d(e,"STORE_NAMES",(function(){return f})),n.d(e,"CREATING_MEASUREMENT_CONTEXTMENU",(function(){return p})),n.d(e,"HIGHLIGHTING_MODE",(function(){return g})),n.d(e,"RESOLVED_PROMISE_VOID",(function(){return v})),n.d(e,"DISTANCE_TOLERANCE",(function(){return m})),n.d(e,"POINT_TOLERANCE",(function(){return y})),n.d(e,"POS_TYPE",(function(){return w})),n.d(e,"STANDARD_HTML_ELEMENTS",(function(){return b})),n.d(e,"EMPTY_STR",(function(){return A})),n.d(e,"DB_PREFIX",(function(){return P})),n.d(e,"SET_FORM_CREATION_CONTINUOUSLY",(function(){return E})),n.d(e,"HIDE_FORM_FIELD_PROPERTY_BOX",(function(){return x})),n.d(e,"HIDE_FORM_FIELD_SIMPLE_PROPERTY_BOX",(function(){return S})),n.d(e,"MEASUREMENT_INFO",(function(){return C})),n.d(e,"INTERNAL_THUMBNAIL_BITMAP_WIDTH",(function(){return D})),n.d(e,"INTERNAL_THUMBNAIL_BITMAP_HEIGHT",(function(){return I}));n(1),n(45),n(92),n(7);var r={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",DEFERRED:"deferred",FUTURE:"future",NONE:"none"},i={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5},o={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},a={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",CIRCLE_DIMENSION:"CircleDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"},s={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"},c=Object.keys(s).reduce((function(t,e){return t[s[e]]=Number(e),t}),{}),u={POS_INLINE:0,POS_TOP:1},d={0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"},l={PrintLowQuality:4,ModifyDocument:8,Extract:16,AnnotForm:32,FillForm:256,ExtractAccess:512,Assemble:1024,PrintHighQuality:2048},h={MeasureTypeX:0,MeasureTypeY:1,MeasureTypeD:2,MeasureTypeA:3,MeasureTypeT:4,MeasureTypeS:5},f={SELECTION_INFO:"viewer--store-selection-info"},p="creating-measurement-contextmenu",g={NONE:0,INVERT:1,OUTLINE:2,PUSH:3,TOGGLE:4},v=Promise.resolve(),m=2,y=.01,w={FIRST:0,LAST:1,AFTER:2,BEFORE:3},b=["html","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],A="",P="FoxitPDFSDKForWeb_",E="set_form_creation_continuously",x="hideFormFieldPropertyBox",S="hideFormFieldSimplePropertyBox",C="measurementInfo",D=200,I=258},function(t,e,n){var r=n(259),i=n(382),o=n(221),a=n(260);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){n(386),n(394),n(395),n(396),n(397),n(398)},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(380),i=n(258),o=n(221),a=n(381);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(19),i=n(261),o=n(262),a=n(385),s=n(113),c=function(t){if(t&&t.forEach!==a)try{s(t,"forEach",a)}catch(e){t.forEach=a}};for(var u in i)i[u]&&c(r[u]&&r[u].prototype);c(o)},function(t,e,n){t.exports=n(383)},function(t,e,n){var r=n(54),i=n(152).EXISTS,o=n(35),a=n(83).f,s=Function.prototype,c=o(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(u.exec);r&&!i&&a(s,"name",{configurable:!0,get:function(){try{return d(u,c(this))[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(24),i=n(19),o=n(34),a=n(167),s=n(82),c=n(89),u=n(91),d=n(153),l=n(189),h=n(169),f=n(46),p=n(149),g=f("isConcatSpreadable"),v=i.TypeError,m=p>=51||!o((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),y=h("concat"),w=function(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:a(t)};r({target:"Array",proto:!0,forced:!m||!y},{concat:function(t){var e,n,r,i,o,a=c(this),s=l(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(w(o=-1===e?a:arguments[e])){if(h+(i=u(o))>9007199254740991)throw v("Maximum allowed index exceeded");for(n=0;n<i;n++,h++)n in o&&d(s,h,o[n])}else{if(h>=9007199254740991)throw v("Maximum allowed index exceeded");d(s,h++,o)}return s.length=h,s}})},function(t,e,n){"use strict";var r=n(24),i=n(196);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(24),i=n(98).map;r({target:"Array",proto:!0,forced:!n(169)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,n){t.exports=e},function(t,e,n){"use strict";var r=n(100),i=n(155),o=n(174),a=n(105),s=n(83).f,c=n(227),u=n(102),d=n(54),l=a.set,h=a.getterFor("Array Iterator");t.exports=c(Array,"Array",(function(t,e){l(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var f=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&d&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch(t){}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(213))},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.r(e),n.d(e,"isTouchDevice",(function(){return o})),n.d(e,"isMac",(function(){return s})),n.d(e,"isIOS",(function(){return c})),n.d(e,"isIPHONE",(function(){return u})),n.d(e,"isIPAD",(function(){return d})),n.d(e,"isIPOD",(function(){return l})),n.d(e,"isAndroid",(function(){return h})),n.d(e,"isBlackBerry",(function(){return f})),n.d(e,"isWebOS",(function(){return p})),n.d(e,"isKindle",(function(){return g})),n.d(e,"isAliAppBrowser",(function(){return v})),n.d(e,"isTeamsAndroid",(function(){return m})),n.d(e,"isTablet",(function(){return y})),n.d(e,"isMobile",(function(){return w})),n.d(e,"isDesktop",(function(){return b})),n.d(e,"isMiPad",(function(){return A})),n.d(e,"isXiaomi",(function(){return P})),n.d(e,"isHuawei",(function(){return E})),n.d(e,"isLinux",(function(){return x})),n.d(e,"isWindows",(function(){return S})),n.d(e,"isMacOS",(function(){return C})),n.d(e,"DEVICE_DETACTION",(function(){return D}));n(14),n(51),n(43);var r,i,o=(i=" -webkit- -moz- -o- -ms- ".split(" "),!!("ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch)||(r=["(",i.join("touch-enabled),("),"heartz",")"].join(""),!!window.matchMedia&&window.matchMedia(r).matches)),a=navigator.userAgent.toLowerCase(),s=/macintosh|mac os x/.test(a),c=/ipad|iphone|ipod/.test(a),u=/iphone/.test(a),d=/ipad/.test(a),l=/ipod/.test(a),h=/android/.test(a),f=/blackberry/.test(a),p=/webos/.test(a),g=/silk|kindle/.test(a),v=/aliapp/.test(a),m=/teamsmobile-android/.test(a),y=!v&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(a),w=(!y||m)&&(/mobile/.test(a)||c||h||f||p||g),b=!(w||y||h||u||d||l||g||p),A=/(MI(.*|\s*)PAD).*/i.test(a),P=!A&&/MI(\s+|\d+?|HM|xiaomi).*/i.test(a),E=/HUAWEI/i.test(navigator.userAgent),x=/Linux/i.test(a),S=!x&&/Windows(\s+NT)?/i.test(a),C=/MacIntosh|(mac os)/i.test(a),D={mac:s,ios:c,iphone:u,ipad:d,ipod:l,android:h,blackberry:f,webos:p,kindle:g,tablet:y,mobile:w,desktop:b,xiaomi:P,huawei:E,touch:o,linux:x,windows:S,macos:C}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(9),i=n.n(r),o=(n(30),n(1),n(10),n(40),function(){function t(){this.destroyHooks=[],this.isDestroyed=!1}var e=t.prototype;return e.addDestroyHook=function(){for(var e,n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=this.destroyHooks).push.apply(e,i()(o.filter((function(e){if("function"!=typeof e&&!(e instanceof t))throw new Error("[Illegal Argument] Invalid destroy hook:".concat(e,", It's not a function!"));return!0})))),function(){o.forEach((function(t){var e=n.destroyHooks.indexOf(t);e>-1&&n.destroyHooks.splice(e,1)}))}},e.destroy=function(){this.destroyHooks.forEach((function(e){"function"==typeof e?e():e instanceof t&&e.destroy()})),this.destroyHooks=[],this.isDestroyed=!0},t}())},function(t,e,n){var r=n(19),i=n(261),o=n(262),a=n(18),s=n(113),c=n(46),u=c("iterator"),d=c("toStringTag"),l=a.values,h=function(t,e){if(t){if(t[u]!==l)try{s(t,u,l)}catch(e){t[u]=l}if(t[d]||s(t,d,e),i[e])for(var n in a)if(t[n]!==a[n])try{s(t,n,a[n])}catch(e){t[n]=a[n]}}};for(var f in i)h(r[f]&&r[f].prototype,f);h(o,"DOMTokenList")},function(t,e,n){var r=n(19),i=n(119).f,o=n(113),a=n(90),s=n(215),c=n(251),u=n(164);t.exports=function(t,e){var n,d,l,h,f,p=t.target,g=t.global,v=t.stat;if(n=g?r:v?r[p]||s(p,{}):(r[p]||{}).prototype)for(d in e){if(h=e[d],l=t.noTargetGet?(f=i(n,d))&&f.value:n[d],!u(g?d:p+(v?".":"#")+d,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;c(h,l)}(t.sham||l&&l.sham)&&o(h,"sham",!0),a(n,d,h,t)}}},function(t,e,n){"use strict";var r=n(228).charAt,i=n(85),o=n(105),a=n(227),s=o.set,c=o.getterFor("String Iterator");a(String,"String",(function(t){s(this,{type:"String Iterator",string:i(t),index:0})}),(function(){var t,e=c(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";t.exports=n(415)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n(115);var r={},i=function(){function t(){}return t.property=function(t,e,n){var i=r;Object.getOwnPropertyDescriptor(t,"__lazy__")||Object.defineProperty(t,"__lazy__",{value:{},enumerable:!1,configurable:!1});var o=t.__lazy__[e]||{};t.__lazy__[e]=o,o.initialized=!1;var a=!1;Object.defineProperty(t,e,{get:function(){if(!o.initialized){if(a)throw new Error("The lazy property is not initialized and cannot be accessed at this time");a=!0,i=n(),o.initialized=!0,a=!1}return i},enumerable:!0,configurable:!0})},t.loadProperty=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);if(n&&n.get)return n.get.call(t)},t.release=function(t,e){Object.defineProperty(t,e,{get:function(){},enumerable:!1,configurable:!0})},t.reset=function(t,e){var n=t.__lazy__;if(n){var r=n[e];r&&(r.initialized=!1)}},t.isPropertyIntialized=function(t,e){var n=t.__lazy__;return!!(n&&n[e]&&n[e].initialized)},t.hasProperty=function(t,e){var n=t.__lazy__;return!(!n||!(e in n))},t.notNullProperty=function(e,n,r){return t.property(e,n,(function(){var i=r();return null==i&&t.reset(e,n),i}))},t.get=function(e,n,r){t.isPropertyIntialized(e,n)&&r(e[n])},t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"isIE",(function(){return f})),n.d(e,"isIE10",(function(){return p})),n.d(e,"isIEAtLeast11",(function(){return g})),n.d(e,"isEdge",(function(){return v})),n.d(e,"isOpera",(function(){return m})),n.d(e,"isWebkit",(function(){return y})),n.d(e,"isChromiumEdge",(function(){return w})),n.d(e,"isChrome",(function(){return b})),n.d(e,"isSafari",(function(){return A})),n.d(e,"isGecko",(function(){return P})),n.d(e,"isFirefox",(function(){return E})),n.d(e,"isMaxthon",(function(){return x})),n.d(e,"isQuirksMode",(function(){return S})),n.d(e,"isQQ",(function(){return C})),n.d(e,"isWeChat",(function(){return D})),n.d(e,"isSougou",(function(){return I})),n.d(e,"isBaidu",(function(){return R})),n.d(e,"isUC",(function(){return T})),n.d(e,"isLiebao",(function(){return _})),n.d(e,"isMiuiBrowser",(function(){return k})),n.d(e,"isHuaweiBrowser",(function(){return F})),n.d(e,"isIOSChrome",(function(){return M})),n.d(e,"is360",(function(){return O})),n.d(e,"isIE8",(function(){return L})),n.d(e,"isIE8Compact",(function(){return N})),n.d(e,"isIE9Compact",(function(){return V})),n.d(e,"isIE10Compact",(function(){return B})),n.d(e,"BROWSER_DETECTION",(function(){return U}));n(14),n(87);var r,i=navigator.userAgent.toLowerCase(),o=/opera|opr/.test(i),a=/msie/.test(i),s=/trident/.test(i),c=/\sapplewebkit\//.test(i),u=/chrome/.test(i),d=/safari/.test(i),l=/firefox/.test(i),h=/edg\//.test(i),f=(s||a)&&!o&&"msSaveBlob"in navigator,p=f&&(!!(r=i.match(/msie ([\d\.]+)/))&&10===parseInt(r[1])),g=!a&&s&&!o,v=i.indexOf("edge")>-1,m=o,y=c,w=!m&&u&&!!window.chrome&&h,b=!m&&u&&!!window.chrome&&!h,A=!/huawei/.test(i)&&!m&&d&&!u,P="Gecko"==navigator.product&&!y&&!m,E=!b&&!m&&!A&&l,x=/maxthon/.test(i),S="BackCompact"==document.CompactMode,C=/tencenttraveler/.test(i)||/qqbrowser/.test(i),D=/wechat/.test(i),I=/metasr/.test(i)||/sogou/.test(i),R=/baidubrowser/.test(i),T=/ucbrowser/.test(i),_=/liebao/.test(i),k=/miuibrowser/.test(i),F=/huaweibrowser/.test(i)||/huaweialp/.test(i),M=/crios/.test(i),O=function(){if(C||T||I||k||_||x)return!1;if(-1===i.indexOf("chrome"))return!1;var t=function(t,e){var n=navigator.mimeTypes;for(var r in n)if(n[r][t]==e)return!0;return!1}("type","application/vnd.chromium.remoting-viewer");return!window.chrome||t}(),L=!!document.documentMode&&document.documentMode<8,N=8==document.documentMode,V=9==document.documentMode,B=10==document.documentMode,U={ie:f,ieAtLeast11:g,edge:v,"chromium-edge":w,opera:m,webkit:y,chrome:b,safari:A,gecko:P,firefox:E,maxthon:x,quirksMode:S,"quirks-mode":S,qq:C,wechat:D,sougou:I,baidu:R,liebao:_,uc:T,miui:k,huawei:F,360:O}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";var r=n(24),i=n(98).filter;r({target:"Array",proto:!0,forced:!n(169)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(24),i=n(98).find,o=n(155),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(t,e,n){"use strict";var r=n(24),i=n(19),o=n(167),a=n(190),s=n(82),c=n(130),u=n(91),d=n(100),l=n(153),h=n(46),f=n(169),p=n(168),g=f("slice"),v=h("species"),m=i.Array,y=Math.max;r({target:"Array",proto:!0,forced:!g},{slice:function(t,e){var n,r,i,h=d(this),f=u(h),g=c(t,f),w=c(void 0===e?f:e,f);if(o(h)&&(n=h.constructor,(a(n)&&(n===m||o(n.prototype))||s(n)&&null===(n=n[v]))&&(n=void 0),n===m||void 0===n))return p(h,g,w);for(r=new(void 0===n?m:n)(y(w-g,0)),i=0;g<w;g++,i++)g in h&&l(r,i,h[g]);return r.length=i,r}})},function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,c,"next",t)}function c(t){n(a,i,o,s,c,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(182),i=Function.prototype,o=i.bind,a=i.call,s=r&&o.bind(a,a);t.exports=r?function(t){return t&&s(t)}:function(t){return t&&function(){return a.apply(t,arguments)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));n(30),n(1),n(16);var r=n(20),i=n.n(r),o=(n(13),n(44)),a=function(){function t(){}var e=t.prototype;return e.format=function(t,e,n){return[{type:"string",value:"[".concat(this.levelText(e),"]")},{type:"string",value:"{".concat(t,"}")}].concat(n.map((function(t){return null==t?{type:i()(t),value:t+""}:{type:i()(t),value:t}})))},e.levelText=function(t){switch(t){case o.LEVEL_DEBUG:return"DEBUG";case o.LEVEL_INFO:return"INFO";case o.LEVEL_WARN:return"WARN";case o.LEVEL_ERROR:return"ERROR"}return"UNKNOWN LEVEL"},t}(),s=n(0),c=n.n(s),u=n(125),d=function(){function t(t,e,n,r){this.appender=t,this.layout=e,this.module=n,this.minLevel=r,this.logOff=!1}var e=t.prototype;return e.toggle=function(t){this.logOff="boolean"==typeof t?t:!this.logOff},e.setLevel=function(t){this.minLevel=t},e.doLog=function(t,e){if(!this.isLoggable(t)){var n=this.layout.format(this.module,t,e);this.appender.print(n,t)}},e.log=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.doLog(t,n)},e.debug=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.doLog(o.LEVEL_DEBUG,e)},e.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.doLog(o.LEVEL_INFO,e)},e.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.doLog(o.LEVEL_WARN,e)},e.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.doLog(o.LEVEL_ERROR,e)},e.isLoggable=function(t){return this.logOff||u.a.logOff||t<this.minLevel||t<u.a.logLevel},t}(),l=n(9),h=n.n(l),f=(n(53),n(43),n(40),n(39)),p=function(){function t(){}return t.prototype.print=function(t,e){Object(f.a)(t,e)},t}(),g=function(t){function e(){return t.apply(this,arguments)||this}return c()(e,t),e.prototype.print=function(t,e){var n,r,i,a,s,c=t.map((function(t){return"string"!==t.type?" %o":" %c"+t.value})).join("").trim(),u=t.map((function(t){switch(t.type){case"string":return t.style;default:return t.value}}));switch(u.splice(0,0,c),e){case o.LEVEL_DEBUG:(n=console).debug.apply(n,h()(u));break;case o.LEVEL_INFO:(r=console).info.apply(r,h()(u));break;case o.LEVEL_WARN:(i=console).warn.apply(i,h()(u));break;case o.LEVEL_ERROR:(a=console).error.apply(a,h()(u));break;default:(s=console).log.apply(s,h()(u))}},e}(p),v=(n(14),n(51),function(){function t(){}var e=t.prototype;return e.format=function(t,e,n){var r,o=this,a=(new Error).stack;a&&(r="\n  "+a.split("\n")[4].trim());return[{type:"string",style:"color: ".concat(this.levelColor(e),";"),value:"[".concat(this.levelText(e),"]")},{type:"string",style:"color: magenta",value:"{".concat(t,"}")}].concat(n.map((function(t){return null==t?{type:i()(t),style:"color: megenta;font-weight: bold",value:t+""}:"string"==typeof t?{type:i()(t),style:"color: ".concat(o.levelColor(e)),value:t}:{type:i()(t),value:t}}))).concat({type:"string",style:"color: grey;",value:r})},e.levelColor=function(t){switch(t){case o.LEVEL_DEBUG:return"blue";case o.LEVEL_INFO:return"green";case o.LEVEL_WARN:return"#5C3C00";case o.LEVEL_ERROR:return"red"}return"#000"},e.levelText=function(t){switch(t){case o.LEVEL_DEBUG:return"DEBUG";case o.LEVEL_INFO:return"INFO";case o.LEVEL_WARN:return"WARN";case o.LEVEL_ERROR:return"ERROR"}return"UNKNOWN LEVEL"},t}()),m=(n(10),function(t){function e(e){var n;return(n=t.call(this)||this).appenders=e||[],n}return c()(e,t),e.prototype.print=function(t,e){this.appenders.forEach((function(n){return n.print(t,e)}))},e}(p)),y={},w=function(){function t(){}return t.toggleLogger=function(t){Object(u.c)(t)},t.getLogger=function(t){return y[t]=y[t]||this.createLogger(t)},t.createLogger=function(t){var e,n,r;switch(u.a.logLayout){case"complex":e=new v;break;case"simple":default:e=new a}switch(u.a.logLevel){case"debug":n=o.LEVEL_DEBUG;break;case"info":n=o.LEVEL_INFO;break;case"warn":n=o.LEVEL_WARN;break;case"error":default:n=o.LEVEL_ERROR}return r=u.a.logAppenders.map((function(t){switch(t){case"console":return new g;case"websocket":return new WebsocketAppender}})).filter((function(t){return t instanceof p})),new d(new m(r),e,t,n)},t}()},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var r="",i=":",o="module-license-info",a="localize",s={DISABLE:"disable",ENABLE:"enable",ACTIVE:"active",DEACTIVE:"deactive",SHOWN:"shown",HIDDEN:"hidden",CANCEL:"cancel",DESTROYED:"destroyed",REMOVED:"removed",CHILD_INSERTED:"child_inserted",INSERTED:"inserted",MOUNTED:"mounted",CLOSED:"closed",EXPAND:"expand",BEFORE_EXPAND:"before_expand",RESIZESTART:"resizestart",RESIZE:"resize",COLLAPSE:"collapse"}},function(t,e,n){"use strict";function r(t){throw new Error("Method not implemented".concat(t?":"+t:""))}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(24),i=n(19),o=n(130),a=n(106),s=n(91),c=n(89),u=n(189),d=n(153),l=n(169)("splice"),h=i.TypeError,f=Math.max,p=Math.min;r({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,r,i,l,g,v,m=c(this),y=s(m),w=o(t,y),b=arguments.length;if(0===b?n=r=0:1===b?(n=0,r=y-w):(n=b-2,r=p(f(a(e),0),y-w)),y+n-r>9007199254740991)throw h("Maximum allowed length exceeded");for(i=u(m,r),l=0;l<r;l++)(g=w+l)in m&&d(i,l,m[g]);if(i.length=r,n<r){for(l=w;l<y-r;l++)v=l+n,(g=l+r)in m?m[v]=m[g]:delete m[v];for(l=y;l>y-r+n;l--)delete m[l-1]}else if(n>r)for(l=y-r;l>w;l--)v=l+n-1,(g=l+r-1)in m?m[v]=m[g]:delete m[v];for(l=0;l<n;l++)m[l+w]=arguments[l+2];return m.length=y-r+n,i}})},function(t,e,n){"use strict";n.r(e),n.d(e,"getDPI",(function(){return l})),n.d(e,"getPtPxRatio",(function(){return h})),n.d(e,"getPxPtRatio",(function(){return f})),n.d(e,"dpr",(function(){return d})),n.d(e,"copyText",(function(){return g})),n.d(e,"eventPath",(function(){return v})),n.d(e,"isIE10",(function(){return m})),n.d(e,"getCanvasPixelRatio",(function(){return y})),n.d(e,"isRunningInWorker",(function(){return w})),n.d(e,"isRunningInBrowser",(function(){return b}));var r=n(20),i=n.n(r),o=n(4),a=n.n(o);n(14),n(87),n(1),n(7),n(13);var s,c,u,d=(navigator.appVersion.match(/iphone/gi),"undefined"!=typeof devicePixelRatio?devicePixelRatio:1);function l(){return s||(s=function(){if("undefined"!=typeof screen&&screen.deviceXDPI)return{x:screen.deviceXDPI,y:screen.deviceYDPI};if("undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;top:20in;border:none;padding:0;",document.body.appendChild(t);var e={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)};return t.parentNode.removeChild(t),e}return{x:96,y:96}}()),s}function h(){if(void 0===c){var t=l();c=t.x/72}return c}function f(){if(void 0===u){var t=l();u=72/t.x}return u}var p;function g(t){return function(){if(/firefox/.test(navigator.userAgent.toLowerCase()))return Promise.resolve(!1);try{return navigator.permissions.query({name:"clipboard-write",allowWithoutGesture:!1}).then((function(t){return"granted"===t.state}))}catch(t){return console.log(t),Promise.resolve(!1)}}().then((function(e){if(e)return function(t){var e=[new ClipboardItem(a()({},t.type,t))];return navigator.clipboard.write(e)}(new Blob([t],{type:"text/plain"})).then((function(t){return!0}));var n=p||((p=document.createElement("textarea")).style.opacity="0",p.style.top="-999px",p.style["z-index"]=-1,p.style.position="absolute",document.body.appendChild(p),p);n.value=t,n.select(),n.focus(),n.setSelectionRange(0,n.value.length);var r=document.execCommand("copy",!1,n.value);return n.blur(),r}))}function v(t){var e;try{0==(e=t.composedPath&&t.composedPath()).length&&(e=t.path)}catch(t){e=null}var n=t.target;return null!=e?e.indexOf(window)<0?e.concat(window):e:n===window?[window]:[n].concat(function t(e,n){n=n||[];var r=e.parentNode;return r?t(r,n.concat(r)):n}(n),window)}function m(){var t,e=navigator.userAgent.toLowerCase();return!(!("ActiveXObject"in self)||!(t=e.match(/msie ([\d\.]+)/)))&&10===parseInt(t[1])}function y(){if("object"!==("undefined"==typeof window?"undefined":i()(window)))return 1;var t=window.devicePixelRatio||1,e=document.createElement("canvas").getContext("2d");return t/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}function w(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function b(){return"undefined"!=typeof window}},function(t,e,n){"use strict";var r=n(152).PROPER,i=n(90),o=n(84),a=n(85),s=n(34),c=n(274),u=RegExp.prototype.toString,d=s((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=r&&"toString"!=u.name;(d||l)&&i(RegExp.prototype,"toString",(function(){var t=o(this);return"/"+a(t.source)+"/"+a(c(t))}),{unsafe:!0})},function(t,e,n){"use strict";var r=n(24),i=n(35),o=n(160),a=n(100),s=n(191),c=i([].join),u=o!=Object,d=s("join",",");r({target:"Array",proto:!0,forced:u||!d},{join:function(t){return c(a(this),void 0===t?",":t)}})},function(t,e,n){"use strict";n.r(e),n.d(e,"LEVEL_DEBUG",(function(){return r})),n.d(e,"LEVEL_INFO",(function(){return i})),n.d(e,"LEVEL_WARN",(function(){return o})),n.d(e,"LEVEL_ERROR",(function(){return a}));var r=0,i=2,o=4,a=8},function(t,e,n){var r=n(24),i=n(89),o=n(165);r({target:"Object",stat:!0,forced:n(34)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},function(t,e,n){var r=n(19),i=n(151),o=n(57),a=n(162),s=n(148),c=n(248),u=i("wks"),d=r.Symbol,l=d&&d.for,h=c?d:d&&d.withoutSetter||a;t.exports=function(t){if(!o(u,t)||!s&&"string"!=typeof u[t]){var e="Symbol."+t;s&&o(d,t)?u[t]=d[t]:u[t]=c&&l?l(e):h(e)}return u[t]}},function(t,e,n){"use strict";var r=n(141),i=n(49),o=n(35),a=n(201),s=n(34),c=n(84),u=n(48),d=n(106),l=n(114),h=n(85),f=n(101),p=n(237),g=n(139),v=n(418),m=n(202),y=n(46)("replace"),w=Math.max,b=Math.min,A=o([].concat),P=o([].push),E=o("".indexOf),x=o("".slice),S="$0"==="a".replace(/./,"$0"),C=!!/./[y]&&""===/./[y]("a","$0");a("replace",(function(t,e,n){var o=C?"$":"$0";return[function(t,n){var r=f(this),o=null==t?void 0:g(t,y);return o?i(o,t,r,n):i(e,h(r),t,n)},function(t,i){var a=c(this),s=h(t);if("string"==typeof i&&-1===E(i,o)&&-1===E(i,"$<")){var f=n(e,a,s,i);if(f.done)return f.value}var g=u(i);g||(i=h(i));var y=a.global;if(y){var S=a.unicode;a.lastIndex=0}for(var C=[];;){var D=m(a,s);if(null===D)break;if(P(C,D),!y)break;""===h(D[0])&&(a.lastIndex=p(s,l(a.lastIndex),S))}for(var I,R="",T=0,_=0;_<C.length;_++){for(var k=h((D=C[_])[0]),F=w(b(d(D.index),s.length),0),M=[],O=1;O<D.length;O++)P(M,void 0===(I=D[O])?I:String(I));var L=D.groups;if(g){var N=A([k],M,F,s);void 0!==L&&P(N,L);var V=h(r(i,void 0,N))}else V=v(k,s,F,M,L,i);F>=T&&(R+=x(s,T,F)+V,T=F+k.length)}return R+x(s,T)}]}),!!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!S||C)},function(t,e){t.exports=function(t){return"function"==typeof t}},function(t,e,n){var r=n(182),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},function(t,e,n){"use strict";var r,i,o,a=n(275),s=n(54),c=n(19),u=n(48),d=n(82),l=n(57),h=n(140),f=n(150),p=n(113),g=n(90),v=n(83).f,m=n(120),y=n(156),w=n(142),b=n(46),A=n(162),P=c.Int8Array,E=P&&P.prototype,x=c.Uint8ClampedArray,S=x&&x.prototype,C=P&&y(P),D=E&&y(E),I=Object.prototype,R=c.TypeError,T=b("toStringTag"),_=A("TYPED_ARRAY_TAG"),k=A("TYPED_ARRAY_CONSTRUCTOR"),F=a&&!!w&&"Opera"!==h(c.opera),M=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},N=function(t){if(!d(t))return!1;var e=h(t);return l(O,e)||l(L,e)};for(r in O)(o=(i=c[r])&&i.prototype)?p(o,k,i):F=!1;for(r in L)(o=(i=c[r])&&i.prototype)&&p(o,k,i);if((!F||!u(C)||C===Function.prototype)&&(C=function(){throw R("Incorrect invocation")},F))for(r in O)c[r]&&w(c[r],C);if((!F||!D||D===I)&&(D=C.prototype,F))for(r in O)c[r]&&w(c[r].prototype,D);if(F&&y(S)!==D&&w(S,D),s&&!l(D,T))for(r in M=!0,v(D,T,{get:function(){return d(this)?this[_]:void 0}}),O)c[r]&&p(c[r],_,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_CONSTRUCTOR:k,TYPED_ARRAY_TAG:M&&_,aTypedArray:function(t){if(N(t))return t;throw R("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!w||m(C,t)))return t;throw R(f(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(s){if(n)for(var i in O){var o=c[i];if(o&&l(o.prototype,t))try{delete o.prototype[t]}catch(n){try{o.prototype[t]=e}catch(t){}}}D[t]&&!n||g(D,t,n?e:F&&E[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(s){if(w){if(n)for(r in O)if((i=c[r])&&l(i,t))try{delete i[t]}catch(t){}if(C[t]&&!n)return;try{return g(C,t,n?e:F&&C[t]||e)}catch(t){}}for(r in O)!(i=c[r])||i[t]&&!n||g(i,t,e)}},isView:function(t){if(!d(t))return!1;var e=h(t);return"DataView"===e||l(O,e)||l(L,e)},isTypedArray:N,TypedArray:C,TypedArrayPrototype:D}},function(t,e,n){"use strict";var r=n(141),i=n(49),o=n(35),a=n(201),s=n(231),c=n(84),u=n(101),d=n(171),l=n(237),h=n(114),f=n(85),p=n(139),g=n(166),v=n(202),m=n(196),y=n(230),w=n(34),b=y.UNSUPPORTED_Y,A=Math.min,P=[].push,E=o(/./.exec),x=o(P),S=o("".slice);a("split",(function(t,e,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var o=f(u(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[o];if(!s(t))return i(e,o,t,a);for(var c,d,l,h=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,y=new RegExp(t.source,p+"g");(c=i(m,y,o))&&!((d=y.lastIndex)>v&&(x(h,S(o,v,c.index)),c.length>1&&c.index<o.length&&r(P,h,g(c,1)),l=c[0].length,v=d,h.length>=a));)y.lastIndex===c.index&&y.lastIndex++;return v===o.length?!l&&E(y,"")||x(h,""):x(h,S(o,v)),h.length>a?g(h,0,a):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:i(e,this,t,n)}:e,[function(e,n){var r=u(this),a=null==e?void 0:p(e,t);return a?i(a,e,r,n):i(o,f(r),e,n)},function(t,r){var i=c(this),a=f(t),s=n(o,i,a,r,o!==e);if(s.done)return s.value;var u=d(i,RegExp),p=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(b?"g":"y"),m=new u(b?"^(?:"+i.source+")":i,g),y=void 0===r?4294967295:r>>>0;if(0===y)return[];if(0===a.length)return null===v(m,a)?[a]:[];for(var w=0,P=0,E=[];P<a.length;){m.lastIndex=b?0:P;var C,D=v(m,b?S(a,P):a);if(null===D||(C=A(h(m.lastIndex+(b?P:0)),a.length))===w)P=l(a,P,p);else{if(x(E,S(a,w,P)),E.length===y)return E;for(var I=1;I<=D.length-1;I++)if(x(E,D[I]),E.length===y)return E;P=w=C}}return x(E,S(a,w)),E}]}),!!w((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),b)},function(t,e,n){"use strict";var r=n(24),i=n(35),o=n(34),a=n(234),s=n(84),c=n(130),u=n(114),d=n(171),l=a.ArrayBuffer,h=a.DataView,f=h.prototype,p=i(l.prototype.slice),g=i(f.getUint8),v=i(f.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(p&&void 0===e)return p(s(this),t);for(var n=s(this).byteLength,r=c(t,n),i=c(void 0===e?n:e,n),o=new(d(this,l))(u(i-r)),a=new h(this),f=new h(o),m=0;r<i;)v(f,m++,g(a,r++));return o}})},function(t,e,n){"use strict";var r=n(24),i=n(198).trim;r({target:"String",proto:!0,forced:n(238)("trim")},{trim:function(){return i(this)}})},function(t,e,n){var r=n(34);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return l}));var r=n(20),i=n.n(r),o=n(0),a=n.n(o),s=(n(1),n(10),n(18),n(7),n(25),n(23),n(16),n(32),n(40),n(30),n(37)),c=n(5),u=n(22),d=function(t){function e(){var e;return(e=t.call(this)||this).__data={},e.subscribers={},e.reducers=[],e.filters=[],e.addDestroyHook((function(){e.reducers.length=0,e.filters.length=0,e.subscribers={},e.clear()})),e}a()(e,t);var n=e.prototype;return n.getCurrentValue=function(t){var e=this,n=this.__data[t];return this.reducers.reduce((function(n,r){return r.call(e,n,t)}),n)},n.forEach=function(t){if("function"!=typeof t)throw new Error(i()(t)+" is not a function!");for(var e in this.__data)t(this.getCurrentValue(e),e)},n.has=function(t){return t in this.__data},n.dispatch=function(t,e){var n=this;if(this.isDestroyed)return c.RESOLVED_PROMISE_VOID;this.__data[t]=e;var r=this.subscribers[t]||[],i=this.getCurrentValue(t);return(0===this.filters.length||this.filters.some((function(t){return t(e)})))&&r.length?Promise.all(r.slice(0).map((function(e){return e.call(n,i,t)}))):c.RESOLVED_PROMISE_VOID},n.unDispatch=function(t){this.remove(t)},n.remove=function(t){this.isDestroyed||(delete this.__data[t],this.subscribers[t]=[])},n.subscribe=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a;if(!this.isDestroyed){var r,i=!1,o=this.subscribers[t]||(this.subscribers[t]=[]),a=function(){if(!i)return n.call(e,e.getCurrentValue(t),t)};return o.push(a),t in this.__data&&Promise.resolve().then(a),function(){if(i)return r;i=!0;var t=o.indexOf(a);return r=t>-1&&o.splice(t,1).length>0}}},n.subscribeOnce=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a,n=this.subscribe(t,(function(t,r){return n&&n(),e.apply(this,[t,r])}));return n},n.takeWhile=function(t){var e=this;return new Promise((function(n){var r=e.subscribe(t,(function(t){try{r&&r()}finally{n(t)}}))}))},n.reducer=function(t){var e=this;return this.isDestroyed||"function"!=typeof t?s.a:(this.reducers.push(t),function(){var n=e.reducers.indexOf(t);return n>-1&&e.reducers.splice(n,1).length>0})},n.filter=function(t){var e=this;if(!this.isDestroyed){if("function"!=typeof t)return s.a;var n=function(e){return t(e)};return this.filters.push(n),function(){var t=e.filters.indexOf(n);-1!==t&&e.filters.splice(t,1)}}},n.clear=function(){this.__data={}},e}(u.a),l=function(t){function e(e){var n;return(n=t.call(this)||this).store=new d,n.key="k",n.addDestroyHook(n.store),e&&n.dispatch(e),n}a()(e,t);var n=e.prototype;return n.getCurrentValue=function(t){return this.store.getCurrentValue(this.key)||t},n.dispatch=function(t){this.store.dispatch(this.key,t)},n.subscribe=function(t){return this.store.subscribe(this.key,(function(e){return t(e)}))},n.subscribeOnce=function(t){return this.store.subscribeOnce(this.key,(function(e){return t(e)}))},n.takeWhile=function(){return this.store.takeWhile(this.key)},n.filter=function(t){return this.store.filter(t)},n.reduce=function(t){return this.store.reducer((function(e){return t(e)}))},n.remove=function(){this.store.unDispatch(this.key)},e}(u.a)},function(t,e,n){n(370),n(376),n(377),n(378),n(379)},function(t,e,n){var r=n(35),i=n(89),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},function(t,e,n){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",i="minute",o="hour",a="day",s="week",c="month",u="quarter",d="year",l="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},m={s:v,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),o=n-i<0,a=e.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:d,w:s,d:a,D:l,h:o,m:i,s:r,ms:n,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",w={};w[y]=g;var b=function(t){return t instanceof x},A=function t(e,n,r){var i;if(!e)return y;if("string"==typeof e){var o=e.toLowerCase();w[o]&&(i=o),n&&(w[o]=n,i=o);var a=e.split("-");if(!i&&a.length>1)return t(a[0])}else{var s=e.name;w[s]=e,i=s}return!r&&i&&(y=i),i||!r&&y},P=function(t,e){if(b(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new x(n)},E=m;E.l=A,E.i=b,E.w=function(t,e){return P(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var x=function(){function g(t){this.$L=A(t.locale,null,!0),this.parse(t)}var v=g.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(E.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return E},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(t,e){var n=P(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return P(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<P(t)},v.$g=function(t,e,n){return E.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,u=!!E.u(e)||e,h=E.p(t),f=function(t,e){var r=E.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return u?r:r.endOf(a)},p=function(t,e){return E.w(n.toDate()[t].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,v=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case d:return u?f(1,0):f(31,11);case c:return u?f(1,v):f(0,v+1);case s:var w=this.$locale().weekStart||0,b=(g<w?g+7:g)-w;return f(u?m-b:m+(6-b),v);case a:case l:return p(y+"Hours",0);case o:return p(y+"Minutes",1);case i:return p(y+"Seconds",2);case r:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var s,u=E.p(t),h="set"+(this.$u?"UTC":""),f=(s={},s[a]=h+"Date",s[l]=h+"Date",s[c]=h+"Month",s[d]=h+"FullYear",s[o]=h+"Hours",s[i]=h+"Minutes",s[r]=h+"Seconds",s[n]=h+"Milliseconds",s)[u],p=u===a?this.$D+(e-this.$W):e;if(u===c||u===d){var g=this.clone().set(l,1);g.$d[f](p),g.init(),this.$d=g.set(l,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[E.p(t)]()},v.add=function(n,u){var l,h=this;n=Number(n);var f=E.p(u),p=function(t){var e=P(h);return E.w(e.date(e.date()+Math.round(t*n)),h)};if(f===c)return this.set(c,this.$M+n);if(f===d)return this.set(d,this.$y+n);if(f===a)return p(1);if(f===s)return p(7);var g=(l={},l[i]=t,l[o]=e,l[r]=1e3,l)[f]||1,v=this.$d.getTime()+n*g;return E.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=E.z(this),o=this.$H,a=this.$m,s=this.$M,c=n.weekdays,u=n.months,d=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].slice(0,o)},l=function(t){return E.s(o%12||12,t,"0")},f=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:E.s(s+1,2,"0"),MMM:d(n.monthsShort,s,u,3),MMMM:d(u,s),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,c,2),ddd:d(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:E.s(o,2,"0"),h:l(1),hh:l(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:E.s(a,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(t,e){return e||g[t]||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,l,h){var f,p=E.p(l),g=P(n),v=(g.utcOffset()-this.utcOffset())*t,m=this-g,y=E.m(this,g);return y=(f={},f[d]=y/12,f[c]=y,f[u]=y/3,f[s]=(m-v)/6048e5,f[a]=(m-v)/864e5,f[o]=m/e,f[i]=m/t,f[r]=m/1e3,f)[p]||m,h?y:E.a(y)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return w[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=A(t,e,!0);return r&&(n.$L=r),n},v.clone=function(){return E.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),S=x.prototype;return P.prototype=S,[["$ms",n],["$s",r],["$m",i],["$H",o],["$W",a],["$M",c],["$y",d],["$D",l]].forEach((function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),P.extend=function(t,e){return t.$i||(t(e,x,P),t.$i=!0),P},P.locale=A,P.isDayjs=b,P.unix=function(t){return P(1e3*t)},P.en=w[y],P.Ls=w,P.p={},P}()},function(t,e,n){"use strict";var r=n(35),i=n(50),o=r(n(408)),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(t,e){return o(a(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=n(98).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=n(49),o=n(235),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(t){var e=arguments.length;return i(o,a(this),t,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=n(98).filter,o=n(409),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(t){var e=i(a(this),t,arguments.length>1?arguments[1]:void 0);return o(this,e)}))},function(t,e,n){"use strict";var r=n(50),i=n(98).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=n(98).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=n(98).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=n(187).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=n(187).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(19),i=n(34),o=n(35),a=n(50),s=n(18),c=n(46)("iterator"),u=r.Uint8Array,d=o(s.values),l=o(s.keys),h=o(s.entries),f=a.aTypedArray,p=a.exportTypedArrayMethod,g=u&&u.prototype,v=!i((function(){g[c].call([1])})),m=!!g&&g.values&&g[c]===g.values&&"values"===g.values.name,y=function(){return d(f(this))};p("entries",(function(){return h(f(this))}),v),p("keys",(function(){return l(f(this))}),v),p("values",y,v||!m,{name:"values"}),p(c,y,v||!m,{name:"values"})},function(t,e,n){"use strict";var r=n(50),i=n(35),o=r.aTypedArray,a=r.exportTypedArrayMethod,s=i([].join);a("join",(function(t){return s(o(this),t)}))},function(t,e,n){"use strict";var r=n(50),i=n(141),o=n(411),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return i(o,a(this),e>1?[t,arguments[1]]:[t])}))},function(t,e,n){"use strict";var r=n(50),i=n(98).map,o=n(200),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(t))(e)}))}))},function(t,e,n){"use strict";var r=n(50),i=n(287).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return i(o(this),t,e,e>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=n(287).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return i(o(this),t,e,e>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(50),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var t,e=i(this).length,n=a(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}))},function(t,e,n){"use strict";var r=n(19),i=n(49),o=n(50),a=n(91),s=n(286),c=n(89),u=n(34),d=r.RangeError,l=r.Int8Array,h=l&&l.prototype,f=h&&h.set,p=o.aTypedArray,g=o.exportTypedArrayMethod,v=!u((function(){var t=new Uint8ClampedArray(2);return i(f,t,{length:1,0:3},1),3!==t[1]})),m=v&&o.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new l(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));g("set",(function(t){p(this);var e=s(arguments.length>1?arguments[1]:void 0,1),n=c(t);if(v)return i(f,this,n,e);var r=this.length,o=a(n),u=0;if(o+e>r)throw d("Wrong length");for(;u<o;)this[e+u]=n[u++]}),!v||m)},function(t,e,n){"use strict";var r=n(50),i=n(200),o=n(34),a=n(168),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(t,e){for(var n=a(s(this),t,e),r=i(this),o=0,c=n.length,u=new r(c);c>o;)u[o]=n[o++];return u}),o((function(){new Int8Array(1).slice()})))},function(t,e,n){"use strict";var r=n(50),i=n(98).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(19),i=n(35),o=n(34),a=n(121),s=n(236),c=n(50),u=n(281),d=n(282),l=n(149),h=n(283),f=c.aTypedArray,p=c.exportTypedArrayMethod,g=r.Uint16Array,v=g&&i(g.prototype.sort),m=!(!v||o((function(){v(new g(2),null)}))&&o((function(){v(new g(2),{})}))),y=!!v&&!o((function(){if(l)return l<74;if(u)return u<67;if(d)return!0;if(h)return h<602;var t,e,n=new g(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(v(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));p("sort",(function(t){return void 0!==t&&a(t),y?v(this,t):s(f(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!y||m)},function(t,e,n){"use strict";var r=n(50),i=n(114),o=n(130),a=n(200),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=s(this),r=n.length,c=o(t,r);return new(a(n))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-c))}))},function(t,e,n){"use strict";var r=n(19),i=n(141),o=n(50),a=n(34),s=n(168),c=r.Int8Array,u=o.aTypedArray,d=o.exportTypedArrayMethod,l=[].toLocaleString,h=!!c&&a((function(){l.call(new c(1))}));d("toLocaleString",(function(){return i(l,h?s(u(this)):u(this),s(arguments))}),a((function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()}))||!a((function(){c.prototype.toLocaleString.call([1,2])})))},function(t,e,n){"use strict";var r=n(50).exportTypedArrayMethod,i=n(34),o=n(19),a=n(35),s=o.Uint8Array,c=s&&s.prototype||{},u=[].toString,d=a([].join);i((function(){u.call({})}))&&(u=function(){return d(this)});var l=c.toString!=u;r("toString",u,l)},function(t,e,n){var r=n(48);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},function(t,e,n){var r=n(19),i=n(54),o=n(249),a=n(250),s=n(84),c=n(161),u=r.TypeError,d=Object.defineProperty,l=Object.getOwnPropertyDescriptor;e.f=i?a?function(t,e,n){if(s(t),e=c(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&"writable"in n&&!n.writable){var r=l(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return d(t,e,n)}:d:function(t,e,n){if(s(t),e=c(e),s(n),o)try{return d(t,e,n)}catch(t){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(19),i=n(82),o=r.String,a=r.TypeError;t.exports=function(t){if(i(t))return t;throw a(o(t)+" is not an object")}},function(t,e,n){var r=n(19),i=n(140),o=r.String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},function(t,e,n){n(199)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){"use strict";var r=n(49),i=n(201),o=n(84),a=n(114),s=n(85),c=n(101),u=n(139),d=n(237),l=n(202);i("match",(function(t,e,n){return[function(e){var n=c(this),i=null==e?void 0:u(e,t);return i?r(i,e,n):new RegExp(e)[t](s(n))},function(t){var r=o(this),i=s(t),c=n(e,r,i);if(c.done)return c.value;if(!r.global)return l(r,i);var u=r.unicode;r.lastIndex=0;for(var h,f=[],p=0;null!==(h=l(r,i));){var g=s(h[0]);f[p]=g,""===g&&(r.lastIndex=d(i,a(r.lastIndex),u)),p++}return 0===p?null:f}]}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n(43);var r="unique_"+Date.now(),i=0;function o(t){return[t||"",r,i++].join("_")}},function(t,e,n){var r=n(19),i=n(101),o=r.Object;t.exports=function(t){return o(i(t))}},function(t,e,n){var r=n(19),i=n(48),o=n(57),a=n(113),s=n(215),c=n(185),u=n(105),d=n(152).CONFIGURABLE,l=u.get,h=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,c){var u,l=!!c&&!!c.unsafe,p=!!c&&!!c.enumerable,g=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:e;i(n)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||d&&n.name!==v)&&a(n,"name",v),(u=h(n)).source||(u.source=f.join("string"==typeof v?v:""))),t!==r?(l?!g&&t[e]&&(p=!0):delete t[e],p?t[e]=n:a(t,e,n)):p?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return i(this)&&l(this).source||c(this)}))},function(t,e,n){var r=n(114);t.exports=function(t){return r(t.length)}},function(t,e,n){"use strict";var r=n(54),i=n(19),o=n(35),a=n(164),s=n(90),c=n(57),u=n(197),d=n(120),l=n(147),h=n(247),f=n(34),p=n(129).f,g=n(119).f,v=n(83).f,m=n(284),y=n(198).trim,w=i.Number,b=w.prototype,A=i.TypeError,P=o("".slice),E=o("".charCodeAt),x=function(t){var e=h(t,"number");return"bigint"==typeof e?e:S(e)},S=function(t){var e,n,r,i,o,a,s,c,u=h(t,"number");if(l(u))throw A("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=y(u),43===(e=E(u,0))||45===e){if(88===(n=E(u,2))||120===n)return NaN}else if(48===e){switch(E(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=P(u,2)).length,s=0;s<a;s++)if((c=E(o,s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(a("Number",!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var C,D=function(t){var e=arguments.length<1?0:w(x(t)),n=this;return d(b,n)&&f((function(){m(n)}))?u(Object(e),n,D):e},I=r?p(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),R=0;I.length>R;R++)c(w,C=I[R])&&!c(D,C)&&v(D,C,g(w,C));D.prototype=b,b.constructor=D,s(i,"Number",D)}},function(t,e,n){var r=n(24),i=n(279);r({target:"Array",stat:!0,forced:!n(195)((function(t){Array.from(t)}))},{from:i})},function(t,e,n){"use strict";var r=n(24),i=n(54),o=n(19),a=n(35),s=n(57),c=n(48),u=n(120),d=n(85),l=n(83).f,h=n(251),f=o.Symbol,p=f&&f.prototype;if(i&&c(f)&&(!("description"in p)||void 0!==f().description)){var g={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),e=u(p,this)?new f(t):void 0===t?f():f(t);return""===t&&(g[e]=!0),e};h(v,f),v.prototype=p,p.constructor=v;var m="Symbol(test)"==String(f("test")),y=a(p.toString),w=a(p.valueOf),b=/^Symbol\((.*)\)[^)]+$/,A=a("".replace),P=a("".slice);l(p,"description",{configurable:!0,get:function(){var t=w(this),e=y(t);if(s(g,t))return"";var n=m?P(e,7,-1):A(e,b,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:v})}},function(t,e){t.exports=n},function(t,e,n){"use strict";var r=n(24),i=n(102),o=n(154),a=n(34),s=n(104),c=n(48),u=n(171),d=n(268),l=n(90),h=o&&o.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){h.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),n=c(t);return this.then(n?function(n){return d(e,t()).then((function(){return n}))}:t,n?function(n){return d(e,t()).then((function(){throw n}))}:t)}}),!i&&c(o)){var f=s("Promise").prototype.finally;h.finally!==f&&l(h,"finally",f,{unsafe:!0})}},function(t,e,n){"use strict";var r=n(24),i=n(187).includes,o=n(155);r({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){var r=n(122),i=n(35),o=n(160),a=n(89),s=n(91),c=n(189),u=i([].push),d=function(t){var e=1==t,n=2==t,i=3==t,d=4==t,l=6==t,h=7==t,f=5==t||l;return function(p,g,v,m){for(var y,w,b=a(p),A=o(b),P=r(g,v),E=s(A),x=0,S=m||c,C=e?S(p,E):n||h?S(p,0):void 0;E>x;x++)if((f||x in A)&&(w=P(y=A[x],x,b),t))if(e)C[x]=w;else if(w)switch(t){case 3:return!0;case 5:return y;case 6:return x;case 2:u(C,y)}else switch(t){case 4:return!1;case 7:u(C,y)}return l?-1:i||d?d:C}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var r=n(3),i=n.n(r),o=n(15),a=n.n(o),s=n(8),c=n.n(s),u=n(0),d=n.n(u),l=n(207),h=n.n(l),f=(n(1),n(13),n(42),n(32),n(14),n(47),n(53),n(40),n(10),n(51),n(423),n(123),n(29)),p=n(22),g=(n(115),n(176),n(39)),v=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).preValue=e[n],r}d()(e,t);var n=e.prototype;return n.prepare=function(){var t=this.subject,e=this.part,n=Object.getOwnPropertyDescriptor(t,e);!n||n.configurable?this.inteceptGetterSetter(t,n):this.prepareTimmerWatcher(t)},n.inteceptGetterSetter=function(t,e){var n=this.part,r=t[n],i=this,o=this.hasOwnKey=!!e,a={get:function(){return o?r:Object.getPrototypeOf(t)[n]},set:function(t){o=!0;var e=r;r=t,t!==e&&i.notify(t,e)},configurable:!0};Object.defineProperty(t,n,a),e?this.addDestroyHook((function(){Object.defineProperty(t,n,e)})):this.addDestroyHook((function(){delete t[n]}))},n.prepareTimmerWatcher=function(t){var e=this,n=t[key],r=setInterval((function(){var r=t[key];r!==n&&e.notify(key,r,n)}),5);this.addDestroyHook((function(t){return clearInterval(r)}))},e}(function(t){function e(e,n){var r;return(r=t.call(this)||this).subject=e,r.part=n,r.destinations=[],r.preValue=void 0,r.prepare(),r}d()(e,t);var n=e.prototype;return n.prepare=function(){Object(g.a)()},n.destroy=function(){t.prototype.destroy.call(this),this.disconnectAll()},n.notify=function(t,e){var n=this;this.isFreezed||(this.preValue=t,this.destinations.forEach((function(r){return r.receive(t,e,n)})))},n.connect=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.destinations.push(t),n&&t.receive(this.preValue,this.preValue,this),function(){var n=e.destinations.indexOf(t);n>-1&&(e.destinations.splice(n,1),t.lost(e))}},n.freeze=function(){var t=this;return this.isFreezed=!0,function(){t.isFreezed=!1}},n.disconnectAll=function(){var t=this;this.destinations.forEach((function(e){return e.lost(t)})),this.destinations=[]},e}(p.a)),m=n(36),y=n(158),w=n(4),b=n.n(w),A=(n(16),n(7),n(88)),P=function(t){function e(e){var n;return(n=t.call(this)||this).pipeExprs=e,n.pipeFunctions=[],n.init(),n}d()(e,t);var r=e.prototype;return r.init=function(){this.pipeFunctions=this.pipeExprs.map((function(t){var e=Object(A.a)("pipe_function");-1===t.indexOf("(")&&(t+="()");var r,i=t.indexOf("("),o=t.lastIndexOf(")"),a=t.slice(0,i),s=n(124).default,c="",u=a.indexOf(":");u>-1?(r=a.slice(u+1),c=a.slice(0,u)):r=a;var d=t.slice(i+1,o).trim(),l=e+".call($controller".concat(d.length>0?","+d:"",")");return function(n,i){var o=s._nostrictModule(c);if(!o)return n;var a=o.getPipe(r);if(!a)return n;var u=i.eval(l,b()({},e,a));if("function"!=typeof u)throw new Error("".concat(t," must returning a pipe function, but actual: ").concat(u));return u.call(i,n)}}))},r.transform=function(t,e){return this.pipeFunctions.reduce((function(t,n){return t instanceof Promise?t.then((function(t){return n(t,e)})):n(t,e)}),t)},e}(p.a),E=/\|\s*(\w+|\w+\(.*?\))(?=$)/;var x={};function S(t){if(!D(t))for(var e in I(t,"$set",R),I(t,"$$is_overrided",!0),x)I(t,e,x[e])}function C(t){void 0===t.$$modCount&&(I(t,"$$modCount",0),I(t,"$$currentMod",void 0)),t.$$modCount++}function D(t){return!!t.$$is_overrided}function I(t,e,n){var r=n;Object.defineProperty(t,e,{get:function(){return r},set:function(t){r=t},enumerable:!1,configurable:!1})}function R(t,e){this[t]!==e&&(this.$$prev=this.slice(0),this[t]=e,C(this))}["push","splice","unshift","shift","pop","reverse","sort"].forEach((function(t){var e=Array.prototype[t];"function"==typeof e&&(x[t]=function(){this.$$prev=this.slice(0),C(this);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)})}));var T=n(146),_=n(27),k=["window","document","top","setTimeout","setInterval","Function","eval","self","globalThis","global"],F=["location","screen"],M=window.Function,O=function(){var t=function(t){m.a.getLogger("inline-expression").warn('Accessing insecure field is not allowed: "'.concat(t,'"!'))};if(window.Proxy){var e=k.reduce((function(t,e){return t[e]=!0,t}),{});return new window.Proxy(window,{has:function(t,n){return e[n]},get:function(e,n){var r=e[n];return r instanceof Window||r instanceof Document||r===setTimeout||r===setInterval||r===Function||r===eval?(t(n),null):r}})}var n={};return k.forEach((function(e){Object.defineProperty(n,e,{get:function(){t(e)}})})),n}(),L=new M("return ({__proto__: null}) instanceof Object;")();function N(t,e){for(var n=[e],r=t,i=e;r;){var o=r.__proto__;if(o===Object.prototype||o===r||null==o)break;i+=".__proto__",n.push(i),r=o}return n.reduce((function(t,e){return"with(".concat(e,"){\n            ").concat(t,"\n        };")}),"{block-place}")}var V,B=(V=0,function(t){return t+"_"+(V++).toString(16)});function U(t,e){if(e[t])return e[t];var n,r=function(t){for(var e=[],n=t;;){var r=E.exec(n);if(!r){e.unshift(n);break}var i=n.slice(r.index+1);n=n.slice(0,r.index),e.unshift(i)}return e}(t),i=h()(r),o=i[0],a=i.slice(1),s=B("_self"),c=B("_sandbox"),u=B("_tempValue"),d="return (function(".concat(u,") {\n            ").concat(u," = ").concat(u," || {};\n            with(").concat(u,") {\n                with(").concat(s,".methods) {\n                    return (function(){\n                        'use strict';\n                        return {code};\n                    }).call(this)\n                }\n            }\n        }).bind(").concat(c,");").replace(/[\r\n]/g,"").replace("{code}",o);if(L){var l=B("_createDynamicWithBlock"),f=B("_Fn"),p=d.replace(/(?!\\)'/g,"\\'");n=new M(l,f,s,"\n                var ".concat(c," = ").concat(s,"._sandbox();\n                var dynamicCode = ").concat(l,"(").concat(c,", '").concat(c,"')\n                                    .replace('{block-place}', '").concat(p,"');\n                dynamicCode = 'with(").concat(c,".$secure) {' + dynamicCode + '}';\n                return new ").concat(f,"('").concat(c,"','").concat(s,"', dynamicCode).call(null, ").concat(c,", ").concat(s,")\n            ")).bind(null,N,M)}else n=new M(s,"\n                var ".concat(c," = ").concat(s,"._sandbox();\n                with(").concat(c,".$secure) {\n                    with(").concat(c,") {\n                        ").concat(d,"\n                    }\n                }\n            "));if(a.length>0){var g=new P(a);return e[t]=function(t){var e=n.call(this,t);return function(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];switch(i.length){case 0:n=e.call(this);break;case 1:n=e.call(this,i[0]);break;case 2:n=e.call(this,i[0],i[1]);break;case 3:n=e.call(this,i[0],i[1],i[2]);break;default:n=e.apply(this,i)}return{value:n,transformed:g.transform(n,t)}}}}return e[t]=function(t){var e=n.call(this,t);return function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];switch(r.length){case 0:t=e.call(this);break;case 1:t=e.call(this,r[0]);break;case 2:t=e.call(this,r[0],r[1]);break;case 3:t=e.call(this,r[0],r[1],r[2]);break;default:t=e.apply(this,r)}return{value:t,transformed:t}}}}var j=m.a.getLogger("Controller"),H=function(t){function e(e){var n;return(n=t.call(this)||this).component=e,n.data=i()({},e.$options.$initData||{}),n.methods={},n.$$sources={},n.$$code={},n.addDestroyHook((function(){var t=n.$$sources;for(var e in t){t[e].destroy()}n.$$sources={},n.$$code={}})),_.a.property(c()(n),"root",(function(){return e.getRoot()})),n.freeze(!1),n.$$watches=[],e.parent&&n.setParentScope(e.parent.controller),n.$$debounceTaskExecutor=new T.a(10),n}d()(e,t),e.extend=function(t,e){return Object(y.a)(t,this,e)},e.getName=function(){Object(g.a)()},e.isFake=function(){return!1},e.services=function(){};var n=e.prototype;return n.initServices=function(t){t.getIoC().initInstance(this)},n.getComponentByName=function(t){return this.component.getRoot().getComponentByName(t)},n.eval=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t.trim();var n=this.compileCode(t),r=n.call(this,e);return r.transformed},n.watch=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if("function"!=typeof e)throw new TypeError("Illigal argument: callback must be a function");var o=new Error,a=this.compileCode(t),s=function(){try{return i?a.call(null,i):a()}catch(e){m.a.getLogger(n.constructor.getName()).error("excute expression error",t,e,o)}},c=void 0,u=void 0,d=-1,l=function(){if(!n.isFreezed()){var t=s();if(t){var i=t.transformed,o=c,a=u;if(c=i,r){var l=JSON.stringify(i);u=l,l!==a&&e(i,o)}else Array.isArray(i)?(S(i),i==o&&i.$$modCount===d||(d=i.$$modCount,e(i,i.$$prev||o))):i!==o&&e(i,o)}}};l.$expression=t,this.$$watches.push(l);var h=function(){var t=n.$$watches.indexOf(l);t>-1&&n.$$watches.splice(t,1)};return h.invoke=l,h},n.watchImm=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=this.watch(t,e,n,r);return i.invoke(),i},n.set=function(t,e,n){S(t),t.$set(e,n),this.digest()},n.digest=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.component||this.component.isMounted,n=function(){t.isFreezed()||t.$$watches.forEach((function(t){return t()}))};e?n():this.$$debounceTaskExecutor.exec(n)},n.applyAll=function(){var t=this;this.digest(),this.component.isContainer()&&this.component.$container.each((function(e){e.controller!==t.component.controller&&e.controller.applyAll()}))},n.compileCode=function(t){try{return U(t,this.$$code).call(this,this)}catch(e){throw j.warn("compile code error",t),e}},n._sandbox=function(){var t=this;function e(){}e.prototype=this.data;var n=new e,r={};return F.forEach((function(t){return i(t,window[t])})),i("$secure",O),i("$controller",this),i("$this",this),i("$rootComponent",this.root),i("$root",this.root.controller.data),i("$component",this.component),i("$data",this.data),i("$pdfui",this.pdfUI),i("$$",(function(e){return t.getComponentByName(e)})),Object.defineProperties(n,r),n;function i(t,e){r[t]={get:function(){return e}}}},n.setTimeout=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){var n=this;if("function"!=typeof t)throw new TypeError("Illegal argument: callback is not a function");var r=setTimeout((function(){try{t()}finally{n.digest()}}),e);return function(){return clearTimeout(r)}})),n.setInterval=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){var n=this;if("function"!=typeof t)throw new TypeError("Illegal argument: callback is not a function");var r=setInterval((function(){try{t()}finally{n.digest()}}),e);return function(){return clearInterval(r)}})),n.getDataSource=function(t){t=t.trim();var e=this.$$sources[t];if(e)return e;var n=t.split("."),r="",i=n.slice(0,n.length-1).reduce((function(t,e){if(null==t)throw new Error("cannot access ".concat(e," from '").concat(t,"': ").concat(r," "));return r=r?"".concat(r,".").concat(e):e,t[e]}),this.data),o=n[n.length-1];return this.$$sources[t]=new v(i,o)},n.setParentScope=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.$parent!==t||e)if(this.$parent=t,t){if(this.data.isPrototypeOf(t.data)||this.data===t.data)return;this.data=n(this.data,t.data),this.methods=n(this.methods,t.methods),this.data.$parent=t.data}else this.data=n(this.data,Object.prototype),this.methods=n(this.methods,Object.prototype),this.data.$parent=null;function n(t,e){return null==e&&(e=Object.prototype),Object.setPrototypeOf?(Object.setPrototypeOf(t,e),t):Object.create(e,Object.getOwnPropertyDescriptors(t))}},n.setPDFUIInstance=function(t){this.pdfUI=t,t&&this.initServices(t)},n.getPDFUI=function(){return this.pdfUI},n.prelink=function(){Object(f.a)()},n.postlink=function(){Object(f.a)()},n.mounted=function(){var t=this;this.digest();var e=function(e){return t.changePermission(e)};this.addDestroyHook(this.getPDFUI().addViewerEventListener("render-file-success",e)),this.addDestroyHook(this.getPDFUI().addViewerEventListener("permission-changed",(function(e){return t.changePermission(e)}))),this.pdfUI.getCurrentPDFDoc().then((function(t){return t&&e(t)}))},n.changePermission=function(t){var e=this;this.getPDFUI().getPDFDocRender().then((function(t){return t.getUserPermission().getValue()})).then((function(t){t&e.constructor.permission?e.component.unlock&&e.component.unlock():e.component.lock&&e.component.lock()}))},n.destroy=function(){t.prototype.destroy.call(this),this.$$debounceTaskExecutor.cancel(),_.a.release(this,"root")},n.handle=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Object(f.a)(e)},n.uninstall=function(){this.destroy()},n.freeze=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.data.$$freezed=t},n.isFreezed=function(){return this.data.$$freezed},a()(e,null,[{key:"permission",get:function(){return 4294967295}}]),e}(p.a)},function(t,e,n){var r=n(160),i=n(101);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(19).TypeError;t.exports=function(t){if(null==t)throw r("Can't call method on "+t);return t}},function(t,e){t.exports=!1},function(t,e,n){n(220)("iterator")},function(t,e,n){var r=n(19),i=n(48),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},function(t,e,n){var r,i,o,a=n(372),s=n(19),c=n(35),u=n(82),d=n(113),l=n(57),h=n(214),f=n(186),p=n(163),g=s.TypeError,v=s.WeakMap;if(a||h.state){var m=h.state||(h.state=new v),y=c(m.get),w=c(m.has),b=c(m.set);r=function(t,e){if(w(m,t))throw new g("Object already initialized");return e.facade=t,b(m,t,e),e},i=function(t){return y(m,t)||{}},o=function(t){return w(m,t)}}else{var A=f("state");p[A]=!0,r=function(t,e){if(l(t,A))throw new g("Object already initialized");return e.facade=t,d(t,A,e),e},i=function(t){return l(t,A)?t[A]:{}},o=function(t){return l(t,A)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return n}}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){var e=+t;return e!=e||0===e?0:(e>0?r:n)(e)}},function(t,e,n){n(401)},function(t,e,n){n(280)},function(t,e,n){var r=n(24),i=n(235),o=n(155);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(t,e,n){var r=n(54),i=n(83),o=n(229),a=n(34),s=RegExp.prototype;r&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(s,"flags").get.call({dotAll:!0,sticky:!0})}))&&i.f(s,"flags",{configurable:!0,get:o})},function(t,e,n){"use strict";var r=n(24),i=n(35),o=n(232),a=n(101),s=n(85),c=n(233),u=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~u(s(a(this)),s(o(t)),arguments.length>1?arguments[1]:void 0)}})},function(t,e){t.exports=r},function(t,e,n){var r=n(54),i=n(83),o=n(137);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(106),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(24),i=n(34),o=n(100),a=n(119).f,s=n(54),c=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},function(t,e,n){"use strict";var r=n(24),i=n(35),o=n(121),a=n(89),s=n(91),c=n(85),u=n(34),d=n(236),l=n(191),h=n(281),f=n(282),p=n(149),g=n(283),v=[],m=i(v.sort),y=i(v.push),w=u((function(){v.sort(void 0)})),b=u((function(){v.sort(null)})),A=l("sort"),P=!u((function(){if(p)return p<70;if(!(h&&h>3)){if(f)return!0;if(g)return g<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)v.push({k:e+r,v:n})}for(v.sort((function(t,e){return e.v-t.v})),r=0;r<v.length;r++)e=v[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));r({target:"Array",proto:!0,forced:w||!b||!A||!P},{sort:function(t){void 0!==t&&o(t);var e=a(this);if(P)return void 0===t?m(e):m(e,t);var n,r,i=[],u=s(e);for(r=0;r<u;r++)r in e&&y(i,e[r]);for(d(i,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:c(e)>c(n)?1:-1}}(t)),n=i.length,r=0;r<n;)e[r]=i[r++];for(;r<u;)delete e[r++];return e}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(20),i=n.n(r),o=(n(32),n(1),{"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"});function a(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=!0;"boolean"==typeof t&&(o=t,t=n[0],n=n.slice(1)),(null===t||"object"!==i()(t)&&"function"!=typeof t)&&(t={});for(var s=0,u=n.length;s<u;s++){var d=n[s];if(null!=d)for(var l in d){var h=t[l],f=d[l];if(t!==f){var p=void 0;if(o&&f&&(c(f)||(p=Array.isArray(f)))){var g=void 0;p?(p=!1,g=h&&Array.isArray(h)?h:[]):g=h&&c(h)?h:{},t[l]=a(o,g,f)}else void 0!==f&&(t[l]=f)}}}return t}function s(t,e){return null!=t&&{}.hasOwnProperty.call(t,e)}function c(t){if(!t||"object"!==function(t){if(null===t)return"null";switch(i()(t)){case"object":case"function":return o[Object.prototype.toString(t)]||"object"}return i()(t)}(t)||t.nodeType||null!=t&&t==t.window)return!1;if(t.constructor&&!s(t,"constructor")&&!s(t.constructor.prototype,"isPrototypeOf"))return!1;var e=void 0;for(e in t);return void 0===e||s(t,e)}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,c=2147483647,u=/^xn--/,d=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function g(t){throw new RangeError(h[t])}function v(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+v((t=t.replace(l,".")).split("."),e).join(".")}function y(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function w(t){return v(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,n){var r=0;for(t=n?f(t/700):t>>1,t+=f(t/e);t>455;r+=36)t=f(t/35);return f(r+36*t/(t+38))}function P(t){var e,n,r,i,o,a,s,u,d,l,h,p=[],v=t.length,m=0,y=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&g("not-basic"),p.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=m,a=1,s=36;i>=v&&g("invalid-input"),((u=(h=t.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||u>f((c-m)/a))&&g("overflow"),m+=u*a,!(u<(d=s<=b?1:s>=b+26?26:s-b));s+=36)a>f(c/(l=36-d))&&g("overflow"),a*=l;b=A(m-o,e=p.length+1,0==o),f(m/e)>c-y&&g("overflow"),y+=f(m/e),m%=e,p.splice(m++,0,y)}return w(p)}function E(t){var e,n,r,i,o,a,s,u,d,l,h,v,m,w,P,E=[];for(v=(t=y(t)).length,e=128,n=0,o=72,a=0;a<v;++a)(h=t[a])<128&&E.push(p(h));for(r=i=E.length,i&&E.push("-");r<v;){for(s=c,a=0;a<v;++a)(h=t[a])>=e&&h<s&&(s=h);for(s-e>f((c-n)/(m=r+1))&&g("overflow"),n+=(s-e)*m,e=s,a=0;a<v;++a)if((h=t[a])<e&&++n>c&&g("overflow"),h==e){for(u=n,d=36;!(u<(l=d<=o?1:d>=o+26?26:d-o));d+=36)P=u-l,w=36-l,E.push(p(b(l+P%w,0))),u=f(P/w);E.push(p(b(u,0))),o=A(n,m,r==i),n=0,++r}++n,++e}return E.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:w},decode:P,encode:E,toASCII:function(t){return m(t,(function(t){return d.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return m(t,(function(t){return u.test(t)?P(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(436)(t),n(213))},function(t,e,n){var r=n(54),i=n(49),o=n(183),a=n(137),s=n(100),c=n(161),u=n(57),d=n(249),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=c(e),d)try{return l(t,e)}catch(t){}if(u(t,e))return a(!i(o.f,t,e),t[e])}},function(t,e,n){var r=n(35);t.exports=r({}.isPrototypeOf)},function(t,e,n){var r=n(19),i=n(48),o=n(150),a=r.TypeError;t.exports=function(t){if(i(t))return t;throw a(o(t)+" is not a function")}},function(t,e,n){var r=n(35),i=n(121),o=n(182),a=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?a(t,e):function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(24),i=n(54),o=n(252),a=n(100),s=n(119),c=n(153);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),i=s.f,u=o(r),d={},l=0;u.length>l;)void 0!==(n=i(r,e=u[l++]))&&c(d,e,n);return d}})},function(t,e,n){"use strict";n.r(e),n.d(e,"modular",(function(){return c}));n(16);var r=n(181),i=n(38),o=n(36),a=n(55),s=o.a.getLogger("modular"),c=new(function(){function t(){this.modules=new a.a,this.modules.dispatch(i.e,new r.a(i.e,[]))}var e=t.prototype;return e.module=function(t,e){var n=this;if(Array.isArray(e)){if(this.modules.has(t))throw new Error('Duplicated Modular name: "'.concat(t,'", it must be unique.'));e=e.map((function(t,e){if("string"==typeof t)return n._module(t);if(t instanceof r.a)return t;throw new Error("Unexpected module type at position: ".concat(e))}));var i=this.root();e.indexOf(-1===i)&&e.push(i);var o=new r.a(t,e);return this.modules.dispatch(t,o),o}return this._module(t)},e.moduleAsync=function(t){return this.modules.takeWhile(t)},e.root=function(){return this.modules.getCurrentValue(i.e)},e._module=function(t){var e=this.modules.getCurrentValue(t);if(!e)throw new Error("No module found: '".concat(t,"'"));return e},e._nostrictModule=function(t){var e=this.modules.getCurrentValue(t);return e||s.warn("module not found: ".concat(t,", using root module instead.")),e||this.root()},t}());e.default=c},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));var r=n(44),i={logLevel:"warn",logLayout:"complex",logAppenders:["console"],logOff:!1,setLogLevel:o,toggleLogOff:a};function o(t){switch(t){case r.LEVEL_DEBUG:case r.LEVEL_INFO:case r.LEVEL_WARN:case r.LEVEL_ERROR:i.logLevel=t}}function a(t){i.logOff="boolean"==typeof t?t:!i.logOff}},function(t,e,n){n(199)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){"use strict";var r=n(24),i=n(19),o=n(35),a=n(106),s=n(284),c=n(294),u=n(34),d=i.RangeError,l=i.String,h=Math.floor,f=o(c),p=o("".slice),g=o(1..toFixed),v=function(t,e,n){return 0===e?n:e%2==1?v(t,e-1,n*t):v(t*t,e/2,n)},m=function(t,e,n){for(var r=-1,i=n;++r<6;)i+=e*t[r],t[r]=i%1e7,i=h(i/1e7)},y=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=h(r/e),r=r%e*1e7},w=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=l(t[e]);n=""===n?r:n+f("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:u((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!u((function(){g({})}))},{toFixed:function(t){var e,n,r,i,o=s(this),c=a(t),u=[0,0,0,0,0,0],h="",g="0";if(c<0||c>20)throw d("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return l(o);if(o<0&&(h="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*v(2,69,1))-69)<0?o*v(2,-e,1):o/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(m(u,0,n),r=c;r>=7;)m(u,1e7,0),r-=7;for(m(u,v(10,r,1),0),r=e-1;r>=23;)y(u,1<<23),r-=23;y(u,1<<r),m(u,1,1),y(u,2),g=w(u)}else m(u,0,n),m(u,1<<-e,0),g=w(u)+f("0",c);return g=c>0?h+((i=g.length)<=c?"0."+f("0",c-i)+g:p(g,0,i-c)+"."+p(g,i-c)):h+g}})},function(t,e,n){var r=n(35),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},function(t,e,n){var r=n(253),i=n(216).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(106),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r,i=n(84),o=n(218),a=n(216),s=n(163),c=n(254),u=n(184),d=n(186),l=d("IE_PROTO"),h=function(){},f=function(t){return"<script>"+t+"<\/script>"},p=function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e;g="undefined"!=typeof document?document.domain&&r?p(r):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F):p(r);for(var n=a.length;n--;)delete g.prototype[a[n]];return g()};s[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=i(t),n=new h,h.prototype=null,n[l]=t):n=g(),void 0===e?n:o.f(n,e)}},function(t,e,n){var r=n(83).f,i=n(57),o=n(46)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!i(t,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r,i=n(24),o=n(35),a=n(119).f,s=n(114),c=n(85),u=n(232),d=n(101),l=n(233),h=n(102),f=o("".endsWith),p=o("".slice),g=Math.min,v=l("endsWith");i({target:"String",proto:!0,forced:!!(h||v||(r=a(String.prototype,"endsWith"),!r||r.writable))&&!v},{endsWith:function(t){var e=c(d(this));u(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,i=void 0===n?r:g(s(n),r),o=c(t);return f?f(e,o,i):p(e,i-o.length,i)===o}})},function(t,e,n){"use strict";var r=n(24),i=n(19),o=n(234),a=n(170),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},function(t,e,n){"use strict";n.d(e,"a",(function(){return Nt}));var r=n(20),i=n.n(r),o=n(9),a=n.n(o),s=n(15),c=n.n(s),u=n(8),d=n.n(u),l=n(0),h=n.n(l),f=(n(13),n(1),n(42),n(12),n(45),n(10),n(30),n(14),n(51),n(7),n(31),n(40),n(47),n(32),n(95)),p=n.n(f),g=n(39);var v=n(208),m=n(38);HTMLElement.prototype.remove||(HTMLElement.prototype.remove=function(){this.parentElement&&this.parentElement.removeChild(this)}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),HTMLElement.prototype.getUIXNamespace=function(){return t=this.nodeName.toLowerCase(),(e=t.indexOf(m.d))>-1?t.substring(0,e):m.e;var t,e},HTMLElement.prototype.getUIXNodeName=function(){return t=this.nodeName.toLowerCase(),e=t.indexOf(m.d),t.substring(e+1);var t,e},HTMLElement.prototype.getUIXAttribute=function(t){return function(t,e){var n=t.getUIXNamespace();return n===m.e||0===n.length?t.getAttribute(e):t.getAttribute("".concat(n).concat(m.d).concat(e))}(this,t)},HTMLElement.prototype.addClass=function(t){var e;"string"==typeof t&&(e=this.classList).add.apply(e,a()(t.split(" ")))},HTMLElement.prototype.removeClass=function(t){var e;"string"==typeof t&&(e=this.classList).remove.apply(e,a()(t.split(" ")))},HTMLElement.prototype.clear=function(){for(var t=Array.prototype.slice.call(this.childNodes,0),e=t.length,n=0;n<e;n++){var r=t[n];this.removeChild(r)}};var y=n(36),w=n(3),b=n.n(w),A=n(99),P=function(t){function e(e,n){var r;return(r=t.call(this,e)||this).callbackfn=n,r}return h()(e,t),e.getName=function(){return"CallbackController"},e.prototype.handle=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.callbackfn).call.apply(t,[this].concat(n))},e}(A.a),E=function(t){function e(){return t.apply(this,arguments)||this}h()(e,t),e.getName=function(){return"NoopController"};var n=e.prototype;return n.prelink=function(){},n.postlink=function(){},n.mounted=function(){},n.destroy=function(){},e}(A.a),x=n(179),S=function(){function t(t){this.originfn=t,this.beforeHooks=[],this.afterHooks=[],this.thrownHooks=[],this.aroundHooks=[]}t.on=function(e){if("function"==typeof e)return new t(e);if(e instanceof t)return new t(e.extract());throw new TypeError("Unexpected type: ".concat(i()(e)))};var e=t.prototype;return e.before=function(t){return"function"==typeof t&&this.beforeHooks.push(t),this},e.after=function(t){return"function"==typeof t&&this.afterHooks.push(t),this},e.thrown=function(t){return"function"==typeof t&&this.thrownHooks.push(t),this},e.around=function(t){return"function"==typeof t&&this.aroundHooks.push(t),this},e.proxy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.before,n=t.after,r=t.thrown,i=t.around;return this.before(e),this.after(n),this.thrown(r),this.around(i),this},e.extract=function(){var t=this.beforeHooks,e=this.afterHooks,n=this.thrownHooks,r=this.aroundHooks,i=this.originfn;function o(){for(var r=this,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];t.forEach((function(t){return t.call(r,a)}));try{var c=i.apply(this,a);return c instanceof Promise?(c.then((function(t){e.forEach((function(e){return e.call(r,t,a)}))})),c.catch((function(t){n.forEach((function(e){return e.call(r,t,a)}))}))):e.forEach((function(t){return t.call(r,c,a)})),c}catch(t){n.forEach((function(e){return e.call(r,t,a)}))}}return o.origin=i,r.reduceRight((function(t,e){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e(this,t,r)}}),o)},t}(),C=n(29),D=["mounted","prelink","postlink","destroy","uninstall"],I=function(){function t(){}return t.newControllerInstance=function(t,e){var n,r=t.callback,i=t.proxyControllers;"function"==typeof r?n=x.a.isSubClassOf(r,A.a)?new r(e):new P(e,r):r instanceof A.a?(n=Object.create(r),D.forEach((function(t){n[t]=E.prototype[t]})),r.setParentScope===C.a&&(n.setParentScope=A.a.prototype.setParentScope),n.component=e,n.methods={},n.data=b()({},t.$initData||{}),e.parent&&n.setParentScope(e.parent.controller)):n=new E(e);var o=i.reduce((function(t,e){var n=e.method||"handle";return(t[n]=t[n]||[]).push(e),t}),{});for(var a in o){var s=o[a];"function"==typeof n[a]&&(n[a]=s.reduce((function(t,e){return t.proxy(e)}),S.on(n[a])).extract())}return n},t}(),R=n(212),T=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.module,i=n.localizer,o=n.node,a=n.parentComponent,s=n.attrValue,c=n.subName,u=n.attrName;return(e=t.call(this)||this).node=o,e.module=r,e.localizer=i,e.parentComponent=a,e.subName=c,e.modifiers=e._parseModifiers(o,c),e.attrValue=s,e.attrName=u,e.isParser=!1,e.order=1,e.directiveName=e.constructor.getName(),e}h()(e,t),e.getName=function(){Object(g.a)()},e.services=function(){return{}},e.isParser=function(){return!1},e.isFake=function(){return!1};var n=e.prototype;return n._parseModifiers=function(t,e){return t&&t.modifiers?t.modifiers:e?e.split(".").reduce((function(t,e){return t[e]=!0,t}),{}):{}},n.findClosestDirective=function(t,e){var n=this.parentComponent;if("string"==typeof e)for(;n;){if(!!n.directive.findDirective(e))return;var r=n.directive.findDirective(t);if(r)return r;n=n.parent}else for(;n;){var i=n.directive.findDirective(t);if(i)return i;n=n.parent}},n.processComponentOptions=function(t){},n.parseComponent=function(){},n.init=function(t){(this.component=t,this.controller=t.controller,this.directiveOption=t.$options[this.directiveName]||{},this.constructor.services())&&t.getPDFUI().getIoC().initInstance(this)},n.emit=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=this.component.parent;r&&r.directive.receiveEmit(n,t,e)},n.receiveEmit=function(t,e,n){},n.broadcast=function(t,e){this.component.isContainer()&&this.component.children().forEach((function(n){n.directive.receiveBroadcast(t,e)}))},n.receiveBroadcast=function(t,e){},n.beforeComponentRender=function(){Object(C.a)()},n.afterComponentRender=function(){Object(C.a)()},n.componentPrelink=function(){Object(C.a)()},n.componentPostlink=function(){Object(C.a)()},n.componentMounted=function(){Object(C.a)()},n.componentDestroyed=function(){this.destroy()},n.toString=function(){return"".concat(this.attrName,'="').concat(this.attrValue,'"')},e}(n(22).a),_=function(t){function e(e){var n;return(n=t.call(this,{})||this).component=e,n}return h()(e,t),e.getName=function(){return"<native-noop>"},e}(T),k=(n(16),n(53),function(){function t(t){this.options=t}return t.prototype.selectFrom=function(t,e){return[]},t}()),F=function(t){function e(e){var n;return(n=t.call(this,null,null)||this).selectors=a()(e),n}return h()(e,t),e.prototype.selectFrom=function(t){return this.selectors.reduce((function(e,n){return n.selectFrom(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),e}),[])},e}(k),M=(n(93),n(25),n(56),n(94),n(103),n(18),n(23),n(157),"[\\x20\\t\\r\\n\\f]"),O="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",L="".concat(M,"*(").concat(O,")"),N="".concat(M,"*([*^$|!~]?=)").concat(M,"*"),V="".concat("'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"","|(").concat(O,")"),B="\\[".concat(L,"(?:").concat(N,"(?:").concat(V,")|)").concat(M,"*\\]"),U="::(".concat(O,")(?:\\(([^\\(\\)]*?|`[^`]*?`)\\))"),j=new RegExp("^".concat(M,"+")),H=new RegExp("^".concat(M,"*(\\>)").concat(M,"*")),W=new RegExp("^@((".concat(O,"):)?(").concat(O,")")),$=new RegExp("^".concat(O,"(:").concat(O,")?")),Y=new RegExp("^".concat(B)),q=new RegExp("^".concat(U)),G=new RegExp("^".concat(M,"+|((?:^|[^\\\\])|(?:\\\\.)*)").concat(M,"+$"),"g"),z=new RegExp("^!root"),K=new RegExp("^:::(css)(?:\\(`([^`]*?)`\\))","i");function J(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Z,Q=[function(t){if("*"===t[0])return{type:"all",token:"*",options:{},step:1}},function(t){var e=H.exec(t);if(e)return{type:"dchildren",token:e[0],step:e[0].length}},function(t){var e=j.exec(t);if(e)return{type:"whitespace",token:e[0],step:e[0].length}},function(t){var e=$.exec(t);if(e)return{type:"name",token:e[0],options:{name:e[0]},step:e[0].length}},function(t){var e=W.exec(t);if(e)return{type:"type",token:e[0],options:{type:e[3],module:e[2]},step:e[0].length}},function(t){var e=Y.exec(t);if(e)return{type:"attribute",token:e[0],options:{key:e[1],compare:e[2],value:e[3]||e[4]||e[5]},step:e[0].length}},function(t){var e=K.exec(t);if(e)return{type:"css",token:e[0],options:{name:"css",parameter:e[2]},step:e[0].length}},function(t){var e=q.exec(t);if(e)return{type:"method",token:e[0],options:{name:e[1],parameter:e[2]},step:e[0].length}},function(t){var e=z.exec(t);if(e)return{type:"root",token:e[0],options:{},step:e[0].length}}],tt=function(){function t(){}return t.prototype.tokenize=function(t){for(var e=t.replace(G,"$1"),n=[];e.length>0;){var r,i=!1,o=J(Q);try{for(o.s();!(r=o.n()).done;){var a=(0,r.value)(e);a&&(i=!0,e=e.substring(a.token.length),n.push(a))}}catch(t){o.e(t)}finally{o.f()}if(!i)throw new Error("'".concat(t,"' is not a valid selector: at ").concat(t.length-e.length))}return n},t}(),et=n(6),nt=n.n(et),rt=(n(43),n(116),n(124)),it=n(117),ot=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.namespace,n=void 0===e?m.e:e,r=t.type,i=t.text;this.$$options={namespace:n,type:r,text:i},this.componentOptions={proxyControllers:[]},this.module=rt.default._nostrictModule(n),this.namespace=n,this.text=i,this.parent=null,this.type=r,this.asyncFragments=[]}var e=t.prototype;return e.isAsync=function(){return!!this.asyncAncestor()},e.asyncAncestor=function(){if(this._isAsync)return this;for(var t=this.parent;t;){if(t._isAsync)return t;t=t.parent}},e.appendFragment=function(t){this.asyncFragments.push(t)},e.setComponentOptions=function(t){this.componentOptions=t,t.proxyControllers||(t.proxyControllers=[])},e.appendComponentOptions=function(t){t&&Object(it.a)(this.componentOptions,t)},e.clone=function(){return new t(this.$$options)},e.getRoot=function(){return this.parent?this.parent.getRoot():this},e.remove=function(){return this.parent&&this.parent.removeChild(this),this},e.index=function(){return this.parent?this.parent.children.indexOf(this):-1},e.after=function(t){var e=this.index();if(-1===e)throw new Error("cannot insert node after a node that has not been appended");this.parent&&this.parent.insert(t,e+1)},e.before=function(t){var e=this.index();if(-1===e)throw new Error("cannot insert node before a node that has not been appended");this.parent&&this.parent.insert(t,e)},e.nextSiblings=function(){if(this.parent){var t=this.parent.children,e=t.indexOf(this);return t[e+1]}},e.previousSiblings=function(){if(this.parent){var t=this.parent.children,e=t.indexOf(this);return t[e-1]}},e.prelink=function(){},e.postlink=function(){},e.contains=function(t){return this===t},c()(t,[{key:"_isAsync",get:function(){return!1}}],[{key:"NODE_TYPE_CONTAINER",get:function(){return"container"}},{key:"NODE_TYPE_TEXT",get:function(){return"text"}},{key:"NODE_TYPE_FRAGMENT",get:function(){return"fragment"}}]),t}();!function(t){t.text="text",t.placeholder="placeholder"}(Z||(Z={}));var at=y.a.getLogger("UIXNode"),st=Date.now();function ct(t){return"".concat(t,"-").concat((st++).toString(36))}var ut,dt=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.namespace,i=void 0===r?m.e:r,o=n.nodeName,a=n.attrs,s=void 0===a?{}:a,c=n.text,u=n.template,d=void 0===u?"":u;return e=t.call(this,{namespace:i,type:ot.NODE_TYPE_CONTAINER,text:c})||this,s.name=s.name||ct("node_name"),s=e.parseAttrs(s),e.$$options={namespace:i,nodeName:o,attrs:b()({},s),text:c,template:d},e.nodeName=o,e.attrs=b()({},s),e.name=s.name,e.children=[],e.template=d,e.directives=e.parseDirectiveAttrs(),e.isSenior=!1,e}h()(e,t);var n=e.prototype;return n.parseAttrs=function(t){var e={};for(var n in t){var r=this.parseAttr(n,t[n]),i=r.key,o=r.value;e[i]=o}return e},n.parseAttr=function(t,e){if("@"!==t[0]&&e&&e.indexOf("@{")>-1){var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@{",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"}";if(!t||t.length<=e.length+n.length)return[{type:Z.text,content:t||""}];for(var r=[],i=0;;){var o=t.indexOf(e,i);if(-1===o){r.push({type:Z.text,content:t.slice(i)});break}var a=t.indexOf(e,o+e.length),s=void 0;if(-1===(s=a>-1?t.lastIndexOf(n,a):t.lastIndexOf(n))){r.push({type:Z.text,content:t.slice(i)});break}r.push({type:Z.text,content:t.slice(i,o)}),r.push({type:Z.placeholder,content:t.substring(o+e.length,s)}),i=s+n.length}return r}(e);if(n.some((function(t){return t.type===Z.placeholder})))return{key:"@attr."+t,value:n}}return{key:t,value:e}},n.setComponentOptions=function(e){t.prototype.setComponentOptions.call(this,e),e&&e.attrs&&b()(this.attrs,e.attrs),this.directives=this.parseDirectiveAttrs()},n.appendComponentOptions=function(e){t.prototype.appendComponentOptions.call(this,e),e&&e.attrs&&b()(this.attrs,e.attrs),this.directives=this.parseDirectiveAttrs()},n.clone=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=new e(this.$$options);return n.children=this.children.map((function(e){var r=t?e.clone(t):e;return r.parent=n,r})),n.parent=this.parent,n.setComponentOptions(this.componentOptions),n},n.parseDirectiveAttrs=function(){var t=[];for(var e in this.attrs)if("@"===e[0]){var n=this._parseDirectiveName(e),r=n.ns,i=n.directiveName,o=n.subName;t.push({attrName:e,ns:r,directiveName:i,subName:o,attrValue:this.attrs[e]})}return t},n._parseDirectiveName=function(t){var e=/^@(([^:]+):)?([^:][^\.]*)(\.(.+))?$/.exec(t);if(!e)throw new Error("@Incorrect directive attribute: "+t);var n=nt()(e,6);return{ns:n[2]||"",directiveName:n[3],subName:n[5]||""}},n.size=function(){return this.children.length},n.findByName=function(t){return this.findChildren((function(e){return e.name===t}))},n.findChildren=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=[];return n&&t(this)&&r.push(this),this.children.reduce((function(n,r){if(!(r instanceof e))return n;var i=r.findChildren(t,!0);return i.length>0&&n.push.apply(n,a()(i)),n}),r),r},n.first=function(){return this.children[0]},n.last=function(){return this.children[this.children.length-1]},n.brothers=function(){return this.parent?this.parent.children:[this]},n.querySelectorAll=function(t){return _t.parseSelectors(t).selectFrom([this])},n.childAt=function(t){return this.children[t]},n.append=function(t){return this.insert(t,this.children.length)},n.prepend=function(t){return this.insert(t,0)},n.insert=function(t,e){if(e<0)throw new Error("index out of bounds: ".concat(e));return e=Math.min(this.children.length,e),t.parent=this,this.children.splice(e,0,t),this},n.removeChild=function(t){var e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1)),this},n.replaceChild=function(t,e){return t<0||t>=this.children.length||!e||(this.children[t].parent=null,this.children[t]=e,e.parent=this),this},n.replaceWith=function(t){if(!this.parent)return!1;var e=this.index();return-1!==e&&(this.parent.replaceChild(e,t),!0)},n.index=function(){return this.parent?this.parent.children.indexOf(this):-1},n.clear=function(){return this.children.slice(0).forEach((function(t){return t.remove()})),this},n.setAttribute=function(t,e){var n=this.parseAttr(t,e),r=n.key,i=n.value;this.attrs[r]=i,"@"===r[0]&&(this.directives=this.parseDirectiveAttrs()),"name"===t&&(this.name=e)},n.hasAttribute=function(t){return t in this.attrs},n.getAttribute=function(t){return this.attrs[t]},n.removeAttribute=function(t){delete this.attrs[t]&&"@"===t[0]&&(this.directives=this.parseDirectiveAttrs())},n.getComponentClass=function(){return this.module.name!==this.namespace&&(this.module=rt.default._nostrictModule(this.namespace)),this.module.getComponentClass(this.nodeName)||rt.default.root().getComponentClass("{native}")},n.toViewConfig=function(){return{nodeName:this.nodeName,attrs:this.attrs,textContent:this.text,vnode:this}},n.getParserDirectiveInstance=function(t,e){var n=this.directives.filter((function(t){var e=rt.default._nostrictModule(t.ns);if(!e)return!1;var n=e.getDirectiveClass(t.directiveName);return n&&n.isParser()}));if(n.length>1){var r=n.map((function(t){return t.directiveName}));throw new Error("Conflict directive: ".concat(r.join(" and "),", both of them are parser directive"))}var i=n[0];if(i){var o=rt.default.module(i.ns),a=o.getDirectiveClass(i.directiveName),s=i.attrName;return new a({module:o,localizer:e,node:this,subName:i.subName,attrValue:i.attrValue,parentComponent:t,attrName:s})}},n.getDirectiveInstances=function(t,e){var n=this;return this.directives.map((function(r){var i=rt.default._nostrictModule(r.ns);if(!i)return at.warn("directive module not found: ".concat(r.ns)),null;var o=i.getDirectiveClass(r.directiveName);if(!o)return at.warn("directive not found! module name: ".concat(r.ns,", directive name: ").concat(r.directiveName)),null;if(o.isParser())return null;var a=r.attrName,s=r.subName,c=r.attrValue;return new o({module:i,localizer:e,node:n,subName:s,attrValue:c,parentComponent:t,attrName:a})})).filter((function(t){return!!t})).sort((function(t,e){return t.order===e.order?0:t.order>e.order?-1:1}))},n.contains=function(t){return this===t||this.children.some((function(e){return e.contains(t)}))},c()(e,[{key:"_isAsync",get:function(){return this.directives.some((function(t){return"require-modules"===t.directiveName||"async"===t.directiveName}))}}]),e}(ot),lt=function(t){return!0},ht=function(t){function e(){return t.apply(this,arguments)||this}return h()(e,t),e.prototype.selectFrom=function(t){return t.reduce((function(t,e){if(e instanceof Nt){if((e=e.lazyLoad()).isContainer())return t.concat(e.findChildren(lt,!1,!0))}else if(e instanceof dt)return t.concat(e.findChildren(lt,!1,!0));return t}),[]).reduce((function(t,e){return-1==t.indexOf(e)&&t.push(e),t}),[])},e}(k),ft=function(t){function e(e){var n;return(n=t.call(this,e)||this).name=e.name,n}return h()(e,t),e.prototype.selectFrom=function(t,e){var n=this;return e?t.reduce((function(t,e){if(e instanceof dt)return t.concat(e.findChildren((function(t){return t.attrs.name===n.name}),!0,!0));var r=e.getAllComponentsByName(n.name);return r?t.concat(r):t}),[]):t.filter((function(t){return t instanceof dt?t.attrs.name===n.name:t.name===n.name}))},e}(k),pt=function(t){function e(e){var n;return(n=t.call(this,e)||this).type=e.type,n.moduleName=e.module||m.e,n}return h()(e,t),e.prototype.selectFrom=function(t,e){var n=this,r=function(t){return(t.module.name===n.moduleName||t.fragmentModule&&t.fragmentModule.name===n.moduleName)&&(t.nodeName===n.type||t.nestName===n.type||t.fragmentType===n.type)},i=function(t){var e,r;t.isLazyComponent?e=(r=t.originNode).nodeName:(r=t.node,e=t.constructor.getName());var i=r.namespace,o=r.fragmentType,a=r.fragmentModule;return"{native}"===e?t.element.nodeName.toLowerCase()===n.type:a&&a.name===n.moduleName&&o===n.type||i===n.moduleName&&e===n.type};return e?t.reduce((function(t,e){return e instanceof dt?t.concat(e.findChildren(r,!1,!0)):t.concat(e.findChildren(i,!1,!0))}),[]):t.filter((function(t){return t instanceof dt?r(t):i(t)}))},e}(k),gt=n(4),vt=n.n(gt);var mt=(ut={},vt()(ut,"^=",(function(t,e){return"string"==typeof e&&0===e.indexOf(t)})),vt()(ut,"=",(function(t,e){return function(t){switch(i()(t)){case"string":case"boolean":case"number":case"bigint":case"undefined":return!0}return null===t}(e)&&t==e+""})),vt()(ut,"*=",(function(t,e){return"string"==typeof e&&e.indexOf(t)>-1})),vt()(ut,"!=",(function(t,e){return t!==e})),vt()(ut,"|=",(function(t,e){return"string"==typeof e&&e.split("-").indexOf(t)>-1})),vt()(ut,"$=",(function(t,e){return"string"==typeof e&&t.length<=e.length&&e.slice(e.length-t.length)===t})),ut),yt=function(t){function e(e){var n;return(n=t.call(this,e)||this).key=e.key,n.value=e.value,n.matcher=mt[e.compare],n}h()(e,t);var n=e.prototype;return n.selectFrom=function(t,e){var n=this;return e?this.selectDeeply(t):t.filter((function(t){if(t.isDestroyed)return!1;if(n.value){if(t instanceof dt)return n.isNodeValueMatch(t);if(t instanceof Nt)return n.isComponentValueMatch(t)}else{if(t instanceof dt)return n.isNodeContains(t);if(t instanceof Nt)return n.isComponentContains(t)}return!1}))},n.selectDeeply=function(t){var e=this;return t.reduce((function(t,n){if(e.value){if(n instanceof dt)return t.concat(n.findChildren((function(t){return e.isNodeValueMatch(t)}),!0,!0));if(n instanceof Nt)return t.concat(n.findChildren((function(t){return e.isComponentValueMatch(t)}),!0,!0))}else{if(n instanceof dt)return t.concat(n.findChildren((function(t){return e.isNodeContains(t)}),!0,!0));if(n instanceof Nt)return t.concat(n.findChildren((function(t){return e.isComponentContains(t)}),!0,!0))}return t}),[])},n.isMatch=function(t){return this.matcher.call(null,this.value,t)},n.isNodeContains=function(t){return this.key in t.attrs},n.isComponentContains=function(t){return!t.isDestroyed&&(t.isLazyComponent?this.isNodeContains(t.originNode):this.key in t||this.key in t.attrs)},n.isNodeValueMatch=function(t){return this.key in t.attrs&&this.isMatch(t.attrs[this.key])},n.isComponentValueMatch=function(t){return!t.isDestroyed&&(t.isLazyComponent?this.isNodeValueMatch(t.originNode):this.isMatch(t[this.key])||this.key in t.attrs&&this.isMatch(t.attrs[this.key]))},e}(k),wt=(y.a.getLogger("method-selector"),{eq:function(t,e){var n=parseInt(e);if(isNaN(n)||n<0)throw new Error("invalid selector: illegal parameter for ::childAt() selector: ".concat(e));return n>=t.length?[]:[t[n]]},childAt:function(t,e){var n=parseInt(e);if(isNaN(n)||n<0)throw new Error("invalid selector: illegal parameter for ::childAt() selector: ".concat(e));return t.map((function(t){return t instanceof dt||t instanceof Nt&&t.isContainer()?t.childAt(n):void 0}))},parent:function(t,e){return t.map((function(t){return t.parent}))},first:function(t){return t.length>0?[t[0]]:[]},last:function(t){return t.length>0?[t[t.length-1]]:[]},allAfter:function(t){return bt(t,(function(t){var e=t.brothers(),n=e.indexOf(t);return e.slice(n+1)}))},allBefore:function(t){return bt(t,(function(t){var e=t.brothers(),n=e.indexOf(t);return e.slice(0,n)}))},activated:function(t){return bt(t,(function(t){return t.isActive?t:void 0}))},deactivated:function(t){return bt(t,(function(t){return t.isActive?void 0:t}))},visible:function(t){return bt(t,(function(t){return t.isDOMVisible()?t:void 0}))},invisible:function(t){return bt(t,(function(t){return t.isDOMVisible()?void 0:t}))},hidden:function(t){return bt(t,(function(t){return t.isDOMVisible()?void 0:t}))},disabled:function(t){return bt(t,(function(t){return t.disabled?t:void 0}))},enabled:function(t){return bt(t,(function(t){return t.disabled?void 0:t}))},closest:function(t,e){var n=e.substring(1,e.length-1),r=_t.parseSelector(n);return bt(t,(function(t){for(var e=t.parent;e;){var n=r.selectFrom([e]);if(n&&n.length>0)return n;e=e.parent}}))},nextSiblings:function(t){return bt(t,(function(t){return t.nextSiblings()}))},previousSiblings:function(t){return bt(t,(function(t){return t.previousSiblings()}))},root:function(t){var e=t[0];return e?[e.getRoot()]:[]},self:function(t){return t}});function bt(t,e){return t.reduce((function(t,n){var r=e(n),i=Array.isArray(r);return i&&r.length>0||!i&&void 0!==r?t.concat(r):t}),[]).reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),[])}var At=function(t){function e(e){var n;if((n=t.call(this,e)||this).name=e.name,n.params=e.parameter,n.selector=wt[n.name],!n.selector)throw new Error("Invalid selector: method not found: ".concat(e.name));return n}return h()(e,t),e.prototype.selectFrom=function(t){return this.selector(t,this.params).filter((function(t){return!!t}))},e}(k),Pt=function(t){function e(){return t.apply(this,arguments)||this}return h()(e,t),e.prototype.selectFrom=function(e,n){return n?t.prototype.selectFrom.call(this,e,n):e},e}(ht),Et=function(t){function e(){return t.apply(this,arguments)||this}return h()(e,t),e.prototype.selectFrom=function(t){return t.map((function(t){return t.getRoot()})).reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),[])},e}(k),xt=function(t){function e(){return t.apply(this,arguments)||this}return h()(e,t),e.prototype.selectFrom=function(t){return t.reduce((function(t,e){return e instanceof dt?t.concat(e.children):e instanceof Nt?(e=e.lazyLoad()).isContainer()&&t.concat(e.children()):t}),[])},e}(k),St=function(t){function e(e){var n;return(n=t.call(this,e)||this).cssSelector=e.parameter,n}return h()(e,t),e.prototype.selectFrom=function(t){var e=this;return t.reduce((function(t,n){var r=n.element;if(!r.querySelector)return t;var i=r.querySelector(e.cssSelector);return i&&t.push(i),t}),[]).filter((function(t,e,n){return n.indexOf(t)===e}))},e}(k),Ct=function(){function t(){}return t.create=function(t,e){switch(t){case"whitespace":return new ht(e);case"name":return new ft(e);case"type":return new pt(e);case"attribute":return new yt(e);case"method":return new At(e);case"all":return new Pt(e);case"dchildren":return new xt(e);case"root":return new Et(e);case"css":return new St(e);default:throw new Error("Unsupported selector: ".concat(t))}},t}(),Dt=function(t){function e(e){var n;return(n=t.call(this,{})||this).selectors=e,n}return h()(e,t),e.prototype.selectFrom=function(t){return this.selectors.reduce((function(t,e,n){return t.length<1?t:e.selectFrom(t,0===n)}),t)},e}(k),It={};function Rt(t){if("string"!=typeof t)throw new Error("".concat(t," is not a valid selector"));if(t=t.trim(),It[t])return It[t];var e=(new tt).tokenize(t).map((function(t){return Ct.create(t.type,t.options)})),n=new Dt(e);return It[t]=n,n}var Tt,_t={selectors:It,parseSelectors:function(t){if(It[t])return It[t];var e,n=t.split(/\s*,\s*/).map((function(t){return Rt(t)}));return e=1===n.length?n[0]:new F(n),It[t]=e,e},parseSelector:Rt},kt=(y.a.getLogger("MultipleDirective"),n(181),n(158));function Ft(t,e){var n=t.classList;n.contains(e)||n.add(e)}function Mt(t,e){var n=t.classList;n.contains(e)&&n.remove(e)}!function(t){t.SINGLETON="SINGLETON",t.SHARED_SINGLETON="SHARED-SINGLETON",t.MULTI_CASE="MULTI-CASE",t.COMPONENT_TREE="COMPONENT-TREE"}(Tt||(Tt={}));var Ot=Date.now();function Lt(t){return"".concat(t,"-").concat((Ot++).toString(36))}var Nt=function(t){function e(e,n,r){var i;(i=t.call(this)||this).$options=e,i.context=e.context,i.lockType=Bt.none,i.parser=e.parser,i.module=n,i.localizer=r,i.viewConfig=e.viewConfig,i.cls=e.cls,i.nodeName=i.viewConfig.nodeName;var o=i.viewConfig.attrs;if(i.name=o.name||e.name||Lt("component_name"),i.id=o.id||Lt("component"),i.attrs=o,i.tempAttrs=o,i._data=null,i.node=e.viewConfig.vnode,i.parent=e.parentComponent,i.texts=[],i.isMounted=!1,i.element=i.createDOMElement(),i.directive=new _(d()(i)),i.subject$=new p.a,i.$services=[],i.lifecycleStates=Object.keys(Vt).reduce((function(t,e){return t[e]=!1,t}),{}),e.events)for(var a in e.events){var s=e.events[a];"function"==typeof s&&i.on(a,s)}return i._disableReason={},i._localizeWatchers=[],i.setController(I.newControllerInstance(e,d()(i))),e.controllerAlias&&(i.controller.data[e.controllerAlias]=i.controller),i.constructor.getMetadataResolver().resolve(d()(i)),i.element.getComponent=function(){return d()(i)},i.addDestroyHook((function(){delete i.element.getComponent})),i.addDestroyHook(i.context.pool.addComponent(d()(i))),i.callInit(),i}h()(e,t),e.getName=function(){Object(g.a)()},e.extend=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.getName=function(){return t},Object(kt.a)(e,this,n)},e.preprocess=function(t){},e.getMetadata=function(){return{deprecated:!1,options:{disabled:{type:"boolean",defaultValue:!1},visible:{type:"boolean",field:"isVisible",defaultValue:!0},canBeDisabled:{type:"boolean",defaultValue:!0},active:{type:"boolean",field:"isActive",defaultValue:!1}}}},e.getMetadataResolver=function(){return this.$metadata||(this.$metadata=new R.a(this)),this.$metadata},e.isFake=function(){return!1},e.handleParseError=function(){},e.services=function(){};var n=e.prototype;return n.callInit=function(){this.init()},n.init=function(){},n.setDirective=function(t){this.directive=t},n.getDirectiveByName=function(t){return this.directive&&this.directive.getDirective(t)},n.setController=function(t){this.controller&&this.controller.uninstall(),this.controller=t},n.setPDFUIInstance=function(t){this.pdfUI=t,this.controller.setPDFUIInstance(t),this.initServices(t)},n.initServices=function(t){t.getIoC().initInstance(this)},n.getPDFUI=function(){return this.pdfUI},n.resetDataScope=function(){var t=this.parent?this.parent.controller:void 0;this.controller.setParentScope(t),this.lifecycleStates[Vt.mounted]&&this.controller.digest(!1)},n.getRoot=function(){if(this.__root__){if(this.__root__.parent)return this.__root__=this.__root__.parent.getRoot()||this;if(!this.parent||this.__root__===this.parent.__root__)return this.__root__}return this.__root__=this.parent?this.parent.getRoot():this},n.nextSiblings=function(){if(this.parent){var t=this.parent.indexOf(this),e=this.parent.childAt(t+1);return e&&e.isIgnorable()?e.nextSiblings():e}},n.previousSiblings=function(){if(this.parent){var t=this.parent.indexOf(this),e=this.parent.childAt(t-1);return e&&e.isIgnorable()?e.previousSiblings():e}},n.brothers=function(){return this.parent?this.parent.children():[this]},n.createDOMElement=function(){return document.createElement("span")},n.appendSlot=function(t,e){var n=this.getSlotContainer(t);if(!n)throw new Error("slot not exists: ".concat(t));e.children().forEach((function(t){n.appendChild(t.element)}))},n.getSlotContainer=function(t){return this.element.querySelector("[slot=".concat(JSON.stringify(t),"]"))||this.element.querySelector('[slot=""]')},n.on=function(t,e){var n=this;return this.subject$&&this.subject$.on(t,e),function(){n.subject$&&n.subject$.off(t,e)}},n.once=function(t,e){var n=this;return this.subject$&&this.subject$.once(t,e),function(){n.subject$&&n.subject$.off(t,e)}},n.off=function(t,e){this.subject$&&this.subject$.off(t,e)},n.trigger=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.subject$&&(e=this.subject$).emit.apply(e,[t].concat(r))},n.broadcast=function(t,e){},n.receiveBroadcast=function(t,e){t===m.a&&this._localizeWatchers.length>0&&this._localizeWatchers.forEach((function(t){t.update()})),this.texts.forEach((function(n){n.receiveBroadcast(t,e)}))},n.prerender=function(){if(this.attrs){for(var t in this.attrs)"@"!==t[0]&&"class"!==t&&this.setAttribute(t,this.attrs[t]);var e;if(this.attrs.class)(e=this.element.classList).add.apply(e,a()(this.attrs.class.split(/\s+/).filter((function(t){return t}))))}if("string"==typeof this.cls)this.element.classList.add(this.cls.split(" "));else if(Array.isArray(this.cls)){var n;(n=this.element.classList).add.apply(n,a()(this.cls))}this.setAttribute("component-name",this.name),this.setAttribute("component-type",this.nodeName),this.renderElementId()},n.render=function(){this.acceptText()&&(this.textElement=this.renderText()),this.dispatchLifecycleChange(Vt.render),this.lifecycleStates[Vt.render]=!0},n.renderElementId=function(){this.setAttribute("id",this.id)},n.mounted=function(){this.isMounted||(this.dispatchLifecycleChange(Vt.mounted),this.isMounted=!0,this.element.dataset&&(this.element.dataset.webpdf_component=this.id),this.texts.forEach((function(t){return t.mounted()})),this.trigger(m.b.MOUNTED),this.directive.componentMounted(),this.controller.mounted(),this.controller.digest(!1))},n.triggerHandler=function(){!function(){throw new Error("Unsupported operation!")}()},n.lock=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt.available;if(!this.isDestroyed){switch(this.lockType!=Bt.none&&this.lockType!=t&&this.unlock(),t){case Bt.visibility:this.hide();break;case Bt.available:this.disable();break;default:return}this.lockType=t,this.context.triggerStatusChange(this,"lock")}},n.unlock=function(){if(this.isLocked&&!this.isDestroyed){var t=this.lockType;switch(this.lockType=Bt.none,t){case Bt.visibility:this.show();break;case Bt.available:this.enable();break;default:return}this.context.triggerStatusChange(this,"unlock")}},n.disable=function(){return!this.canBeDisabled||this.disabled||(this.disabled=!0,this.doDisable(),this.context.triggerStatusChange(this,m.b.DISABLE),this.trigger(m.b.DISABLE)),this.disabled},n.enable=function(){return this._pluginEnableHook&&this._pluginEnableHook(),!this.disabled||(this.lockType===Bt.available?(y.a.getLogger("".concat(this.nodeName,"#enable()")).info("Cannot enable this locked component!",this),!1):(this.disabled=!1,this.doEnable(),this.context.triggerStatusChange(this,m.b.ENABLE),this.trigger(m.b.ENABLE),!0))},n.active=function(){this.isDestroyed||this.disabled||this.isActive||(this.isActive=!0,this.doActive(),this.context.triggerStatusChange(this,m.b.ACTIVE),this.trigger(m.b.ACTIVE))},n.deactive=function(){this.isActive&&!this.isDestroyed&&(this.isActive=!1,this.doDeactive(),this.context.triggerStatusChange(this,m.b.DEACTIVE),this.trigger(m.b.DEACTIVE))},n.show=function(t){this.isVisible||this.isDestroyed||(this.lockType!==Bt.visibility?(this.isVisible=!0,this.doShown(t),this.context.triggerStatusChange(this,m.b.SHOWN),this.trigger(m.b.SHOWN,t)):y.a.getLogger("".concat(this.nodeName,"#show()")).warn("Cannot show this locked component!",this))},n.hide=function(){this.isVisible&&!this.isDestroyed&&(this.isVisible=!1,this.doHidden(),this.context.triggerStatusChange(this,m.b.HIDDEN),this.trigger(m.b.HIDDEN))},n.cancel=function(){this.isVisible&&!this.isDestroyed&&(this.hide(),this.trigger(m.b.CANCEL))},n.addDestroyHook=function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=t.prototype.addDestroyHook).call.apply(e,[this].concat(r))},n.destroy=function(){this.isDestroyed||(this.dispatchLifecycleChange(Vt.destroyed),this.texts.forEach((function(t){return t.destroy()})),this.texts=[],t.prototype.destroy.call(this),this.doDestroy(),this.controller.destroy(),this.directive.componentDestroyed(),this.trigger(m.b.DESTROYED),this.subject$.removeAllListeners(),this.$services.filter((function(t){var e=t.constructor,n=e.scope?e.scope():Tt.SINGLETON;return n===Tt.COMPONENT_TREE||n===Tt.MULTI_CASE})).forEach((function(t){t.destroy&&t.destroy()})),this.$services=null,this.$options=null,this.parser=null,this.module=null,this.localizer=null,this.viewConfig=null,this.attrs=null,this.tempAttrs=null,this.node=null,this.parent=null,this.element=null,this.directive=null,this.subject$=null,this.__root__=null,this.pdfUI=null,this._localizeWatchers.length=0)},n.removeElement=function(){this.getRenderingElements().forEach((function(t){t.parentElement&&t.remove()}))},n.remove=function(){var t=this.parent;(this.parent=null,t)?t.removeChild(this):this.getRenderingElements().forEach((function(t){t.remove()}))},n.isIgnorable=function(){return!1},n.isContainer=function(){return!1},n.isNative=function(){return!1},n.before=function(t,e){if(this.parent&&this.parent.isContainer()){var n=this.index();this.parent.insert(t,n,e)}},n.after=function(t,e){if(this.parent&&this.parent.isContainer()){var n=this.parent.indexOf(this);this.parent.insert(t,n+1,e)}},n.index=function(){if(this.parent&&this.parent.isContainer())return this.parent.indexOf(this)},n.getComponentByName=function(t){if(this.name===t)return this},n.getComponentByNameAsync=function(t){return Promise.resolve(this.name===t?this:void 0)},n.findChildren=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e&&t(this)?[this]:[]},n.getClosestComponentByName=function(t){return this.findClosestComponent((function(e){return e.name===t}))},n.getClosestComponentByType=function(t){return this.findClosestComponent((function(e){return e.nodeName===t}))},n.getClosestComponentByClass=function(t){return this.findClosestComponent((function(e){return e instanceof t}))},n.findClosestComponent=function(t){if("function"!=typeof t)throw new TypeError("callback must be a function, but actual: ".concat(i()(t)));for(var e=this;e;){if(t(e))return e;e=e.parent}},n.getAllComponentsByName=function(t){return this.name===t?[this]:[]},n.getAllComponentsByNameAsync=function(t){return this.name===t?Promise.resolve([this]):Promise.resolve([])},n.getAllComponentsByType=function(t){return this.constructor.getName()===t?[this]:[]},n.querySelectorAll=function(t){var e=this,n=function(){return _t.parseSelectors(t).selectFrom([e])},r=n();if(0===r.length&&this.node){var i=this.node.querySelectorAll(t);if(i.length>0)return this.context.triggerObtainsComponentOf(i),n()}return r},n.querySelector=function(t){return this.querySelectorAll(t)[0]},n.doActive=function(){Ft(this.element,"active")},n.doDeactive=function(){Mt(this.element,"active")},n.doDisable=function(){Ft(this.element,"disabled")},n.doEnable=function(){Mt(this.element,"disabled")},n.doDestroy=function(){this.remove()},n.doHidden=function(){this.addCSSClass("fv__ui-hide")},n.doShown=function(){this.removeCSSClass("fv__ui-hide")},n.getConfig=function(t){return"string"==typeof filed?this.$options:this.$options[t]},n.addCSSClass=function(t){t&&Ft(this.element,t)},n.removeCSSClass=function(t){t&&Mt(this.element,t)},n.attachEventToElement=function(t,e,n,r){var i=this;e.split(/[\s,;]+/).forEach((function(e){t.addEventListener(e,n,r),i.addDestroyHook((function(){t.removeEventListener(e,n,r)}))}))},n.setAttribute=function(t,e){this.element.setAttribute?this.element.setAttribute(t,e):this.element[t]=e},n.getAttribute=function(t){return this.element.getAttribute?this.element.getAttribute(t):this.element[t]},n.removeAttribute=function(t){this.element&&this.element.removeAttribute(t)},n.getDomElement=function(){return this.element},n.localize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.localizer;return this.texts.forEach((function(t){return t.localize()})),this.element?(this.trigger("localize",t),t.localizeRecursive(this.element,{})):Promise.resolve()},n.watchI18n=function(t,e){"string"==typeof t&&(t={key:t,force:!0,immediate:!0});var n=t,r=n.key,i=n.data,o=n.force,a=void 0===o||o,s=n.immediate,c=void 0===s||s,u=this._localizeWatchers;if(a&&u.length>0){var d=u.find((function(t){return t.key===r&&t.force}));d&&d.destroy()}var l=this.localizer.watcher(r,i);return l.key=r,l.force=a,l.onChange(e),u.push(l),l.addDestroyHook((function(){var t=u.indexOf(l);t>-1&&u.splice(t,1)})),c&&l.update(),function(){l.destroy()}},n.prelink=function(){this.dispatchLifecycleChange(Vt.prelink),this.controller.prelink()},n.postlink=function(){this.dispatchLifecycleChange(Vt.postlink),this.update(),this.controller.postlink()},n.update=function(){this.updateDisableStatus(),this.updateVisiblityStatus()},n.updateActiveStatus=function(){var t=this.isActive,e=this.$options.active;"function"==typeof e&&(t=e.call(this)),!1===t?this.doDeactive():this.doActive()},n.updateVisiblityStatus=function(){var t=this.isVisible,e=this.$options.visible;"function"==typeof e&&(t=e.call(this)),!1===t?this.doHidden():this.doShown()},n.updateDisableStatus=function(){var t=this.disabled,e=this.$options.disabled;"function"==typeof e&&(t=e.call(this)),!1===t?this.doEnable():this.doDisable()},n.acceptText=function(){return!1},n.appendText=function(t){t.parent=this,this.texts.push(t)},n.renderText=function(){},n.removeText=function(t){var e=this.texts.indexOf(t);return e>-1&&(this.texts.splice(e,1),t.removeElement(),t.trigger(m.b.REMOVED,this,t),!0)},n.specialEscape=function(t){return"string"!=typeof t?t:t.replace(/[<>&"]/g,(function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[t]}))},n.setText=function(t){if(this.acceptText()){this.texts.slice(0).forEach((function(t){t.destroy()})),t=this.specialEscape(t);var e=this.context.parser.createPlainTextNode(t);e.parent=this.node;var n=this.context.parser.parseTextNode(e);this.text=void 0,this.texts=[n],this.renderText()}},n.getText=function(){return!this.text&this.texts.length>0?this.texts[0].textContent:this.text},n.sync=function(t,e){if(0===t.indexOf("attr.")){var n=t.substring("attr.".length);return this.setAttribute(n,e),"data-i18n"===n&&this.localize(),!0}if(0===t.indexOf("prop."))return this[t.substring("prop.".length)]=e,!0;switch(t){case"disabled":this.syncDisableStatus(e);break;case"visible":this.syncVisibleStatus();break;case"canBeDisabled":this.syncCanBeDisabledStatus();break;case"active":this.syncActiveStatus();break;case"text":if(this.acceptText())return this.setText(e),!0;default:return!1}return!0},n.syncDisableStatus=function(t){t?this.disable():this.enable()},n.syncVisibleStatus=function(t){t?this.show():this.hide()},n.syncCanBeDisabledStatus=function(t){!t&&this.disabled&&this.enable(),this.canBeDisabled=t},n.syncActiveStatus=function(t){t?this.active():this.deactive()},n.getTooltipAnchor=function(){return this.getDomElement()},n.isLifecycleReached=function(t){return!!this.lifecycleStates[t]},n.waitForComponentLifecycle=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getRoot();return r===this?Promise.resolve([]):r.waitForComponentLifecycle(t,e,n)},n.dispatchLifecycleChange=function(t){this.context.store.dispatch(this._getLifecycleDispatchKey(t),this),this.lifecycleStates[t]=!0},n._getLifecycleDispatchKey=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.name;return"".concat("comp-lcu","-").concat(e,"-").concat(t)},n.isDOMVisible=function(){switch(this.element.nodeType){case Node.CDATA_SECTION_NODE:case Node.TEXT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return this.parent&&this.parent.isDOMVisible();case Node.COMMENT_NODE:case Node.NOTATION_NODE:case Node.ATTRIBUTE_NODE:return!1;case Node.ELEMENT_NODE:return this.element.getClientRects().length>0;case Node.DOCUMENT_NODE:return!0}return!1},n.isAncestorOf=function(t){return t instanceof e&&t.isDescendantOf(this)},n.isDescendantOf=function(t){if(!(t instanceof e))return!1;for(var n=this.parent;n;){if(n===t)return!0;n=n.parent}return!1},n.getComponentsPool=function(){return this.context.pool},n.getRenderingElements=function(){return[this.element]},n.setPluginData=function(t){this._pluginData=t},n.getPluginData=function(){return this._pluginData},n.setPluginEnableHook=function(t){this._pluginEnableHook=t},n.digest=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isMounted;if(this.controller)return this.controller.digest(t)},n.watch=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return this.controller?this.controller.watch(t,e,n,r):function(){}},n.applyAll=function(){if(this.controller)return this.controller.applyAll()},n.getServiceOf=function(t){var e;return this.$services.some((function(n){return n instanceof t&&(e=n,!0)})),!e&&this.parent?this.parent.getServiceOf(t):e},n.getClosestParentByName=function(t){if(!t)return null;for(var e=this.component;e=e.parent;)if(e.name===t)return e;return null},n.focus=function(){this.element.focus()},n.hasFocus=function(){return this.element&&this.element.contains(document.activeElement)},n.is=function(t){if("string"!=typeof t)return!1;var e,n=t.split(":"),r="";if(1===n.length)e=n[0];else{if(2!==n.length)return!1;r=n[0],e=n[1]}return this.module.name===r&&this.nodeName===e},n.lazyLoad=function(){return this},c()(e,[{key:"isLocked",get:function(){return this.lockType!==Bt.none}}]),e}(v.a),Vt={prelink:"prelink",postlink:"postlink",mounted:"mounted",destroyed:"destroyed",render:"render"},Bt={visibility:"visibility",available:"available",none:"none"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(20),i=n.n(r),o=n(3),a=n.n(o),s=n(0),c=n.n(s);n(123),n(1),n(240),n(115),n(424),n(425),n(56),n(94),n(13),n(42),n(10),n(176);Object.getOwnPropertyDescriptors||(Object.getOwnPropertyDescriptors=function(t){return Object.getOwnPropertyNames(t).reduce((function(e,n){return e[n]=Object.getOwnPropertyDescriptor(t,n),e}),{})});var u=["isProxy","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","apply","arguments","bind","call","caller",Symbol.hasInstance,"valueOf","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"],d=["toSource","watch","unwatch"];function l(t,e){try{delete t[e]}catch(n){t[e]=void 0}}var h=u.concat(["length","name","prototype"]),f="$proxy_class_symbol_"+Date.now().toString(32),p=function(){function t(){}return t.getNoopConstructor=function(t){function e(){}return e.prototype=Object.create(t.prototype),e},t.getProxyClass=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){return!0};if(i){var a=this.getNoopConstructor(t);(n=function(t){function e(e){var n;return(n=t.call(this)||this).origin=e,n}return c()(e,t),e}(a))[f]=!0}else{var s="function"==typeof r?r:this.getNoopConstructor(t);n=function(t){function e(){return t.apply(this,arguments)||this}return c()(e,t),e}(s);var u=this.getStaticDescriptors(t);Object.defineProperties(n,u),n[f]=!0}var d=this.getClassDescriptors(t.prototype);if("function"==typeof e){var l=function(t){var n=d[t];if(!n||!o(t,n))return"continue";if("function"==typeof n.value){var r=n.value;n.value=i?function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e.call(this,this.origin,r,i,t,"method")}:function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e.call(this,this,r,i,t,"method")}}if("function"==typeof n.get){var a=n.get;n.get=i?function(){return a.call(this.origin)}:function(){return e.call(this,this,null,[],t,"getter")}}if("function"==typeof n.set){var s=n.set;n.set=i?function(t){s.call(this.origin,t)}:function(n){return e.call(this,this,null,[n],t,"setter")}}};for(var h in d)l(h)}return Object.defineProperties(n.prototype,d),n},t.isProxyClass=function(t){return"function"==typeof t&&t.hasOwnProperty(f)},t.getProxyObject=function(t,e,n){if(null==t)throw new Error("Cannot proxy a null or undefined object");var r=t.constructor;return new(this.getProxyClass(r,e,r,!0,n))(t)},t.getStaticDescriptors=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=r(t);return e.forEach((function(t){l(n,t)})),d.forEach((function(e){t[e]===Function.prototype[e]&&l(n,e)})),n;function r(t){if(t===Object||t===Function||!t)return{};var e=r(Object.getPrototypeOf(t));return a()(e,Object.getOwnPropertyDescriptors(t))}},t.getClassDescriptors=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n=r(t);return e.forEach((function(t){l(n,t)})),d.forEach((function(e){t[e]===Object.prototype[e]&&l(n,e)})),n;function r(t){if("object"!==i()(t)||null===t)return{};var e=Object.getPrototypeOf(t),n=e===t?{}:r(e);return a()(n,Object.getOwnPropertyDescriptors(t))}},t}()},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(104);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(121);t.exports=function(t,e){var n=t[e];return null==n?void 0:r(n)}},function(t,e,n){var r=n(19),i=n(217),o=n(48),a=n(128),s=n(46)("toStringTag"),c=r.Object,u="Arguments"==a(function(){return arguments}());t.exports=i?a:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=c(t),s))?n:u?a(e):"Object"==(r=a(e))&&o(e.callee)?"Arguments":r}},function(t,e,n){var r=n(182),i=Function.prototype,o=i.apply,a=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},function(t,e,n){var r=n(35),i=n(84),o=n(387);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return i(n),o(r),e?t(n,r):n.__proto__=r,n}}():void 0)},function(t,e,n){var r=n(19),i=n(120),o=r.TypeError;t.exports=function(t,e){if(i(e,t))return t;throw o("Incorrect invocation")}},function(t,e,n){var r=n(24),i=n(292).values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(24),i=n(98).findIndex,o=n(155),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));n(14),n(13);var r=function(){},i=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.delay=t,this.handle=r,this.flag=0,this.pending=!1}var e=t.prototype;return e.exec=function(t){var e=this;if(this.flag++,this.handle=t,!this.pending){!function t(){e.pending=!0,setTimeout((function(){if(e.flag>0)e.flag=0,t();else{var n=e.handle;e.handle=r,n(),e.pending=!1}}),e.delay)}()}},e.cancel=function(){this.handle=r},t}();function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=new i(e);return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=t.bind.apply(t,[this].concat(r));n.exec(o)}}},function(t,e,n){var r=n(19),i=n(104),o=n(48),a=n(120),s=n(248),c=r.Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return o(e)&&a(e.prototype,c(t))}},function(t,e,n){var r=n(149),i=n(34);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(t,e,n){var r,i,o=n(19),a=n(138),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,d=u&&u.v8;d&&(i=(r=d.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),t.exports=i},function(t,e,n){var r=n(19).String;t.exports=function(t){try{return r(t)}catch(t){return"Object"}}},function(t,e,n){var r=n(102),i=n(214);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.2",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.2/LICENSE",source:"https://github.com/zloirock/core-js"})},function(t,e,n){var r=n(54),i=n(57),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(o,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},function(t,e,n){"use strict";var r=n(161),i=n(83),o=n(137);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){var r=n(19);t.exports=r.Promise},function(t,e,n){var r=n(46),i=n(131),o=n(83),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e,n){var r=n(19),i=n(57),o=n(48),a=n(89),s=n(186),c=n(271),u=s("IE_PROTO"),d=r.Object,l=d.prototype;t.exports=c?d.getPrototypeOf:function(t){var e=a(t);if(i(e,u))return e[u];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof d?l:null}},function(t,e,n){var r=n(54),i=n(19),o=n(35),a=n(164),s=n(197),c=n(113),u=n(129).f,d=n(120),l=n(231),h=n(85),f=n(274),p=n(230),g=n(399),v=n(90),m=n(34),y=n(57),w=n(105).enforce,b=n(170),A=n(46),P=n(272),E=n(273),x=A("match"),S=i.RegExp,C=S.prototype,D=i.SyntaxError,I=o(C.exec),R=o("".charAt),T=o("".replace),_=o("".indexOf),k=o("".slice),F=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,O=/a/g,L=new S(M)!==M,N=p.MISSED_STICKY,V=p.UNSUPPORTED_Y,B=r&&(!L||N||P||E||m((function(){return O[x]=!1,S(M)!=M||S(O)==O||"/a/i"!=S(M,"i")})));if(a("RegExp",B)){for(var U=function(t,e){var n,r,i,o,a,u,p=d(C,this),g=l(t),v=void 0===e,m=[],b=t;if(!p&&g&&v&&t.constructor===U)return t;if((g||d(C,t))&&(t=t.source,v&&(e=f(b))),t=void 0===t?"":h(t),e=void 0===e?"":h(e),b=t,P&&"dotAll"in M&&(r=!!e&&_(e,"s")>-1)&&(e=T(e,/s/g,"")),n=e,N&&"sticky"in M&&(i=!!e&&_(e,"y")>-1)&&V&&(e=T(e,/y/g,"")),E&&(t=(o=function(t){for(var e,n=t.length,r=0,i="",o=[],a={},s=!1,c=!1,u=0,d="";r<=n;r++){if("\\"===(e=R(t,r)))e+=R(t,++r);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:I(F,k(t,r+1))&&(r+=2,c=!0),i+=e,u++;continue;case">"===e&&c:if(""===d||y(a,d))throw new D("Invalid capture group name");a[d]=!0,o[o.length]=[d,u],c=!1,d="";continue}c?d+=e:i+=e}return[i,o]}(t))[0],m=o[1]),a=s(S(t,e),p?this:C,U),(r||i||m.length)&&(u=w(a),r&&(u.dotAll=!0,u.raw=U(function(t){for(var e,n=t.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(e=R(t,r))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),i+=e):i+="[\\s\\S]":i+=e+R(t,++r);return i}(t),n)),i&&(u.sticky=!0),m.length&&(u.groups=m)),t!==b)try{c(a,"source",""===b?"(?:)":b)}catch(t){}return a},j=u(S),H=0;j.length>H;)g(U,S,j[H++]);C.constructor=U,U.prototype=C,v(i,"RegExp",U)}b("RegExp")},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(178);var r=n(3),i=n.n(r),o=n(8),a=n.n(o),s=n(0),c=n.n(s);function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.hasOwnProperty(t,"constructor"),o=r?t.constructor:void 0,s=function(t){function e(){var e;return e=t.apply(this,arguments)||this,r?o.apply(a()(e),arguments)||a()(e):e}return c()(e,t),e}(e);return r&&delete t.constructor,i()(s.prototype,t),t.constructor=o,i()(s,n),s}},function(t,e,n){var r=n(447),i=n(222),o=n(448),a=n(178);function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(19),i=n(35),o=n(34),a=n(128),s=r.Object,c=i("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?c(t,""):s(t)}:s},function(t,e,n){var r=n(247),i=n(147);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},function(t,e,n){var r=n(35),i=0,o=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++i+o,36)}},function(t,e){t.exports={}},function(t,e,n){var r=n(34),i=n(48),o=/#|\.prototype\./,a=function(t,e){var n=c[s(t)];return n==d||n!=u&&(i(e)?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",d=a.POLYFILL="P";t.exports=a},function(t,e,n){var r=n(253),i=n(216);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(19),i=n(130),o=n(91),a=n(153),s=r.Array,c=Math.max;t.exports=function(t,e,n){for(var r=o(t),u=i(e,r),d=i(void 0===n?r:n,r),l=s(c(d-u,0)),h=0;u<d;u++,h++)a(l,h,t[u]);return l.length=h,l}},function(t,e,n){var r=n(128);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(35);t.exports=r([].slice)},function(t,e,n){var r=n(34),i=n(46),o=n(149),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){"use strict";var r=n(104),i=n(83),o=n(46),a=n(54),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(84),i=n(263),o=n(46)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r=n(19),i=n(154),o=n(48),a=n(164),s=n(185),c=n(46),u=n(393),d=n(102),l=n(149),h=i&&i.prototype,f=c("species"),p=!1,g=o(r.PromiseRejectionEvent),v=a("Promise",(function(){var t=s(i),e=t!==String(i);if(!e&&66===l)return!0;if(d&&(!h.catch||!h.finally))return!0;if(l>=51&&/native code/.test(t))return!1;var n=new i((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[f]=r,!(p=n.then((function(){}))instanceof r)||!e&&u&&!g}));t.exports={CONSTRUCTOR:v,REJECTION_EVENT:g,SUBCLASSING:p}},function(t,e,n){"use strict";var r=n(121),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e){t.exports={}},function(t,e,n){var r=n(140),i=n(139),o=n(174),a=n(46)("iterator");t.exports=function(t){if(null!=t)return i(t,a)||i(t,"@@iterator")||o[r(t)]}},function(t,e,n){var r=n(24),i=n(34),o=n(89),a=n(156),s=n(271);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},function(t,e,n){n(428)},function(t,e,n){var r=n(222),i=n(417);function o(e,n,a){return i()?(t.exports=o=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0),i=n.n(r),o=(n(176),n(136)),a=function(){function t(){}return t.isSubClassOf=function(t,e){return"function"==typeof t&&"function"==typeof e&&t.prototype instanceof e},t.isOverrided=function(t,e,n){for(var r=e.prototype;;){var i=r.constructor;if(!i||i===t||i===Object)return!1;if(r.hasOwnProperty(n))return!o.a.isProxyClass(i);r=Object.getPrototypeOf(r)}},t.mixin=function(t,e){var n=function(t){function e(){return t.apply(this,arguments)||this}return i()(e,t),e}(t),r=o.a.getStaticDescriptors(e);Object.defineProperties(n,r);var a=o.a.getClassDescriptors(e.prototype);return n.prototype=Object.create(n.prototype,a),n},t}()},function(t,e,n){"use strict";n(1),n(10),n(45),n(7),n(134),n(52),n(40);var r=n(88),i=n(41),o=function(){},a=function(){function t(t){this.cacheMap={},this.callMap={},this.listeners={};this.setWorker(t),this.promises=[],this.workflow={out:[]},this._isIE10=Object(i.isIE10)()}var e=t.prototype;return e.setWorker=function(t){var e=this,n=this.cacheMap,r=this.callMap,i=this.listeners;this.worker=t,t.onmessage=function(a){var s=a.data;if(-1===s.type)return console.log(s.params);if(s.workflow){var c=e.workflow[s.workflow];if(c)return c.forEach((function(t){return t(s)}))}var u=s.destroyId;if(u)delete r[u];else{var d=s.params;if(s.uiListener){var l=i[s.uiListener];if(l)for(var h=0,f=l.length;h<f;h++)l[h](d)}else{var p=s.callId;if(p)Promise.resolve((r[p]||o)(d)).then((function(n){var r=n instanceof ArrayBuffer?[n]:[];e._isIE10&&(r=null),t.postMessage({backId:s.backId,params:n},r)}));else{var g=s.id,v=n[g];delete n[g];var m=+s.type;try{v[["resolve","reject"][m]](d)}catch(t){0}setTimeout((function(){if(Object.keys(n).length<1){var t=e.listeners.idle;t&&t.forEach((function(t){return t()}));var r=e.listeners.reset;r&&r.forEach((function(t){return t()}))}}),0)}}}},t.onerror=function(t){console.error("WorkerError",t)}},e.emit=function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._isIE10&&(i=i[0]);var a=new Promise((function(a,s){var c=Object(r.a)("worker");n.cacheMap[c]={resolve:a,reject:s};try{n.worker.postMessage({name:t,params:e,id:c,more:o},i)}catch(r){n.worker.postMessage({name:t,params:e,id:c,more:o})}}));return a},e.calls=function(t){var e=Object(r.a)("worker_call");return this.callMap[e]=t,e},e.on=function(t,e){(this.listeners[t]=this.listeners[t]||[]).push(e)},e.registerWorkflow=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"out",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.workflow[t]?this.workflow[t].push(e):this.workflow[t]=[e]},e.unregisterWorkflow=function(t,e){var n=this.workflow[t].indexOf(e);n>=0&&this.workflow[t].splice(n,1)},e.off=function(t,e){var n=this.listeners[t];if(n){var r=n.indexOf(e);-1!=r&&n.splice(r,1)}},e.over=function(t){},t}();e.a=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));n(12),n(13);var r,i=n(4),o=n.n(i),a=n(8),s=n.n(a),c=n(0),u=n.n(c),d=n(20),l=n.n(d),h=(n(1),n(10),n(7),n(32),n(93),n(25),n(14),n(56),n(94),n(103),n(18),n(23),n(135),n(38)),f=n(208),p=n(39),g=n(36),v=g.a.getLogger("pdf-ui.Layout"),m=(f.a,n(99)),y=n(212),w=(n(179),n(136)),b=n(5),A=n(55);!function(t){t.directive="directive",t.controller="controller",t.component="component",t.pipe="pipe",t.fragment="fragment"}(r||(r={}));var P=new A.a;function E(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S=function(){function t(t){this.module=t,this.controllers={},this.directives={},this.layouts={},this.fragments=new A.a,this.components=new A.a,this.pipes=new A.a,this.services=new A.a}var e=t.prototype;return e.getPipe=function(t){return this.pipes.has(t)?this.pipes.getCurrentValue(t):(this.module.depends.some((function(n){return!!(e=n.registry.getPipe(t))})),e);var e},e.registerPipe=function(t,e){if("function"!=typeof e)throw new Error("Pipe Must be a function, but actual: ".concat(l()(e),", name: ").concat(t));this.pipes.dispatch(t,e),this.triggerRegisterAction(r.pipe,t)},e.triggerRegisterAction=function(t,e){var n=P.getCurrentValue("register")||[];n.push({module:this.module.name,type:t,name:e}),P.dispatch("register",n)},e.getComponentDefAsync=function(t){var e=[this];return this.module.depends.forEach((function t(n){-1===e.indexOf(n.registry)&&e.push(n.registry),n.depends.forEach(t)})),new Promise((function(n,r){var i=[];e.forEach((function(e){i.push(e.components.subscribeOnce(t,(function(t){i.forEach((function(t){return t()})),n({componentClass:t,type:"component"})})),e.fragments.subscribeOnce(t,(function(t){i.forEach((function(t){return t()})),n({fragmentsConfig:t,type:"fragment"})})))}))}))},e.registerDirective=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getName().toLowerCase(),i=this.directives[n];if(i!==t){if(i&&!i.isFake()&&!e)throw new Error("Duplicated directive name ".concat(n));this.directives[n]=t,this.triggerRegisterAction(r.directive,n)}},e.getDirectiveClass=function(t){t=t.toLowerCase();var e=this.directives[t];if(!e){var n,r=E(this.module.depends);try{for(r.s();!(n=r.n()).done;){if(e=n.value.getDirectiveClass(t))break}}catch(t){r.e(t)}finally{r.f()}}return e},e.registerController=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getName(),i=this.controllers[n];if(i!==t){if(i&&!i.isFake()&&!e)throw new Error("Duplicated controller class name: ".concat(n));this.controllers[n]=t,this.triggerRegisterAction(r.controller,n)}},e.controller=function(t,e){var n=w.a.getProxyClass(m.a,(function(t,n,r,i){return e[i].apply(t,r)}),m.a,!1,(function(t){return"function"==typeof e[t]&&e[t]!==Object.prototype[t]})),r=o()({},t,function(n){function r(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i))||this,"function"==typeof e.init&&e.init.apply(s()(t),i),t}return u()(r,n),r.getName=function(){return t},r}(n)),i=r[t].prototype;for(var a in e)void 0===i[a]&&(i[a]=e[a]);return this.registerController(r[t]),this},e.getControllerClass=function(t){var e=this.controllers[t];if(!e){var n,r=E(this.module.depends);try{for(r.s();!(n=r.n()).done;){if(e=n.value.getControllerClass(t))break}}catch(t){r.e(t)}finally{r.f()}}return e},e.registerComponent=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getName().toLowerCase(),i=this.components.getCurrentValue(n);if(i!==t){if(i&&!i.isFake()&&!e)throw new Error("Duplicated component name '".concat(n,"', component names must be unique and case-insensitive"));if("{native}"!==n){var o,a=this.module.name;if(a.length>0){var s="".concat(a).concat(h.d).concat(n);document.createElementNS("http://www.w3.org/1999/xhtml",s),o=document.createElement(s)}else o=document.createElement(n);o instanceof HTMLUnknownElement||"template"===n||"slot"===n||"input"===n||-1===b.STANDARD_HTML_ELEMENTS.indexOf(n)||g.a.getLogger("UIXRegistry").warn("Incorrect component name <".concat(n,">, It should'nt be a name of the W3C HTML standard element"),t)}t.$metadata=new y.a(t),this.components.dispatch(n,t),this.triggerRegisterAction(r.component,n)}},e.getComponentClass=function(t){t=t.toLowerCase();var e=this.components.getCurrentValue(t);if(!e){var n,r=E(this.module.depends);try{for(r.s();!(n=r.n()).done;){if(e=n.value.getComponentClass(t))break}}catch(t){r.e(t)}finally{r.f()}}return e},e.registerLayout=function(t){var e=t.getName().toLowerCase();this.layouts[e]=t},e.getLayoutClass=function(t){t=t.toLowerCase();var e=this.layouts[t];if(!e){var n,r=E(this.module.depends);try{for(r.s();!(n=r.n()).done;){if(e=n.value.getLayoutClass(t))break}}catch(t){r.e(t)}finally{r.f()}}return e},e.registerPreConfiguredComponent=function(t,e){return this.registerFragment(t,e)},e.getPreConfiguredComponent=function(t){return this.getFragment(t)},e.registerFragment=function(t,e){t=t.toLowerCase();var n=this.components.getCurrentValue(t);if(n&&!n.isFake())throw new Error("conflict: a component that names '".concat(t,"' is already exists."));if(this.fragments.has(t))throw new Error("Duplicate fragment name: ".concat(t));this.fragments.dispatch(t,e),this.triggerRegisterAction(r.fragment,t)},e.getFragment=function(t){t=t.toLowerCase();var e=this.fragments.getCurrentValue(t);if(!e){var n,r=E(this.module.depends);try{for(r.s();!(n=r.n()).done;){if(e=n.value.getFragment(t))break}}catch(t){r.e(t)}finally{r.f()}}return e},e.service=function(t,e){if(void 0===e)return getService(t);this.services.dispatch(t,e)},e.getService=function(t){if(this.services.has(t))return this.services.getCurrentValue(t);var e,n=E(this.module.depends);try{for(n.s();!(e=n.n()).done;){var r=e.value.registry.getService(t);if(r)return r}}catch(t){n.e(t)}finally{n.f()}},t}(),C=function(){function t(t,e){this.name=t,this.depends=e||[],this.registry=new S(this)}var e=t.prototype;return e.registerPreConfiguredComponent=function(t,e){return this.registry.registerPreConfiguredComponent(t,e),this},e.getPreConfiguredComponent=function(t){return this.registry.getPreConfiguredComponent(t,component)},e.registerFragment=function(t,e){this.registry.registerFragment(t,e)},e.getFragment=function(t){return this.registry.getFragment(t)},e.getComponentClass=function(t){return this.registry.getComponentClass(t)},e.getComponentDefAsync=function(t){return this.registry.getComponentDefAsync(t)},e.getLayoutClass=function(t){return this.registry.getLayoutClass(t)},e.getDirectiveClass=function(t){return this.registry.getDirectiveClass(t)},e.getControllerClass=function(t){return this.registry.getControllerClass(t)},e.registerComponent=function(t){return this.registry.registerComponent(t),this},e.registerVueComponent=function(t,e){var r=n(426).default;this.registry.registerComponent(r.extend(e,t))},e.registerReactComponent=function(t,e,r){var i=n(427).ReactComponent;this.registry.registerComponent(i.extend(e,t,r))},e.registerController=function(t){return this.registry.registerController(t),this},e.controller=function(t,e){return this.registry.controller(t,e),this},e.getRegistry=function(){return this.registry},e.getPipe=function(t){return this.registry.getPipe(t)},e.pipe=function(t,e){this.registry.registerPipe(t,e)},e.resolveName=function(t){return this.name===h.e||this.name.length<1?t:"".concat(this.name).concat(h.d).concat(t)},e.service=function(t,e){return this.registry.service(t,e)},t}()},function(t,e,n){var r=n(34);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(19),i=n(82),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(35),i=n(48),o=n(214),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return a(t)}),t.exports=o.inspectSource},function(t,e,n){var r=n(151),i=n(162),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e,n){var r=n(100),i=n(130),o=n(91),a=function(t){return function(e,n,a){var s,c=r(e),u=o(c),d=i(a,u);if(t&&n!=n){for(;u>d;)if((s=c[d++])!=s)return!0}else for(;u>d;d++)if((t||d in c)&&c[d]===n)return t||d||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(375);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},function(t,e,n){var r=n(35),i=n(34),o=n(48),a=n(140),s=n(104),c=n(185),u=function(){},d=[],l=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,f=r(h.exec),p=!h.exec(u),g=function(t){if(!o(t))return!1;try{return l(u,d,t),!0}catch(t){return!1}},v=function(t){if(!o(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(h,c(t))}catch(t){return!0}};v.sham=!0,t.exports=!l||i((function(){var t;return g(g.call)||!g(Object)||!g((function(){t=!0}))||t}))?v:g},function(t,e,n){"use strict";var r=n(34);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},function(t,e,n){var r=n(90);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(19),i=n(122),o=n(49),a=n(84),s=n(150),c=n(226),u=n(91),d=n(120),l=n(194),h=n(175),f=n(266),p=r.TypeError,g=function(t,e){this.stopped=t,this.result=e},v=g.prototype;t.exports=function(t,e,n){var r,m,y,w,b,A,P,E=n&&n.that,x=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_ITERATOR),C=!(!n||!n.INTERRUPTED),D=i(e,E),I=function(t){return r&&f(r,"normal",t),new g(!0,t)},R=function(t){return x?(a(t),C?D(t[0],t[1],I):D(t[0],t[1])):C?D(t,I):D(t)};if(S)r=t;else{if(!(m=h(t)))throw p(s(t)+" is not iterable");if(c(m)){for(y=0,w=u(t);w>y;y++)if((b=R(t[y]))&&d(v,b))return b;return new g(!1)}r=l(t,m)}for(A=r.next;!(P=o(A,r)).done;){try{b=R(P.value)}catch(t){f(r,"throw",t)}if("object"==typeof b&&b&&d(v,b))return b}return new g(!1)}},function(t,e,n){var r=n(19),i=n(49),o=n(121),a=n(84),s=n(150),c=n(175),u=r.TypeError;t.exports=function(t,e){var n=arguments.length<2?c(t):e;if(o(n))return a(i(n,t));throw u(s(t)+" is not iterable")}},function(t,e,n){var r=n(46)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r,i,o=n(49),a=n(35),s=n(85),c=n(229),u=n(230),d=n(151),l=n(131),h=n(105).get,f=n(272),p=n(273),g=d("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,m=v,y=a("".charAt),w=a("".indexOf),b=a("".replace),A=a("".slice),P=(i=/b*/g,o(v,r=/a/,"a"),o(v,i,"a"),0!==r.lastIndex||0!==i.lastIndex),E=u.BROKEN_CARET,x=void 0!==/()??/.exec("")[1];(P||x||E||f||p)&&(m=function(t){var e,n,r,i,a,u,d,f=this,p=h(f),S=s(t),C=p.raw;if(C)return C.lastIndex=f.lastIndex,e=o(m,C,S),f.lastIndex=C.lastIndex,e;var D=p.groups,I=E&&f.sticky,R=o(c,f),T=f.source,_=0,k=S;if(I&&(R=b(R,"y",""),-1===w(R,"g")&&(R+="g"),k=A(S,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==y(S,f.lastIndex-1))&&(T="(?: "+T+")",k=" "+k,_++),n=new RegExp("^(?:"+T+")",R)),x&&(n=new RegExp("^"+T+"$(?!\\s)",R)),P&&(r=f.lastIndex),i=o(v,I?n:f,k),I?i?(i.input=A(i.input,_),i[0]=A(i[0],_),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:P&&i&&(f.lastIndex=f.global?i.index+i[0].length:r),x&&i&&i.length>1&&o(g,i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&D)for(i.groups=u=l(null),a=0;a<D.length;a++)u[(d=D[a])[0]]=i[d[1]];return i}),t.exports=m},function(t,e,n){var r=n(48),i=n(82),o=n(142);t.exports=function(t,e,n){var a,s;return o&&r(a=e.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(t,s),t}},function(t,e,n){var r=n(35),i=n(101),o=n(85),a=n(285),s=r("".replace),c="["+a+"]",u=RegExp("^"+c+c+"*"),d=RegExp(c+c+"*$"),l=function(t){return function(e){var n=o(i(e));return 1&t&&(n=s(n,u,"")),2&t&&(n=s(n,d,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},function(t,e,n){"use strict";var r=n(24),i=n(19),o=n(49),a=n(54),s=n(404),c=n(50),u=n(234),d=n(143),l=n(137),h=n(113),f=n(405),p=n(114),g=n(276),v=n(286),m=n(161),y=n(57),w=n(140),b=n(82),A=n(147),P=n(131),E=n(120),x=n(142),S=n(129).f,C=n(407),D=n(98).forEach,I=n(170),R=n(83),T=n(119),_=n(105),k=n(197),F=_.get,M=_.set,O=R.f,L=T.f,N=Math.round,V=i.RangeError,B=u.ArrayBuffer,U=B.prototype,j=u.DataView,H=c.NATIVE_ARRAY_BUFFER_VIEWS,W=c.TYPED_ARRAY_CONSTRUCTOR,$=c.TYPED_ARRAY_TAG,Y=c.TypedArray,q=c.TypedArrayPrototype,G=c.aTypedArrayConstructor,z=c.isTypedArray,K=function(t,e){G(t);for(var n=0,r=e.length,i=new t(r);r>n;)i[n]=e[n++];return i},J=function(t,e){O(t,e,{get:function(){return F(this)[e]}})},X=function(t){var e;return E(U,t)||"ArrayBuffer"==(e=w(t))||"SharedArrayBuffer"==e},Z=function(t,e){return z(t)&&!A(e)&&e in t&&f(+e)&&e>=0},Q=function(t,e){return e=m(e),Z(t,e)?l(2,t[e]):L(t,e)},tt=function(t,e,n){return e=m(e),!(Z(t,e)&&b(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?O(t,e,n):(t[e]=n.value,t)};a?(H||(T.f=Q,R.f=tt,J(q,"buffer"),J(q,"byteOffset"),J(q,"byteLength"),J(q,"length")),r({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:Q,defineProperty:tt}),t.exports=function(t,e,n){var a=t.match(/\d+$/)[0]/8,c=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,f=i[c],m=f,y=m&&m.prototype,w={},A=function(t,e){O(t,e,{get:function(){return function(t,e){var n=F(t);return n.view[u](e*a+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=F(t);n&&(r=(r=N(r))<0?0:r>255?255:255&r),i.view[l](e*a+i.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};H?s&&(m=e((function(t,e,n,r){return d(t,y),k(b(e)?X(e)?void 0!==r?new f(e,v(n,a),r):void 0!==n?new f(e,v(n,a)):new f(e):z(e)?K(m,e):o(C,m,e):new f(g(e)),t,m)})),x&&x(m,Y),D(S(f),(function(t){t in m||h(m,t,f[t])})),m.prototype=y):(m=e((function(t,e,n,r){d(t,y);var i,s,c,u=0,l=0;if(b(e)){if(!X(e))return z(e)?K(m,e):o(C,m,e);i=e,l=v(n,a);var h=e.byteLength;if(void 0===r){if(h%a)throw V("Wrong length");if((s=h-l)<0)throw V("Wrong length")}else if((s=p(r)*a)+l>h)throw V("Wrong length");c=s/a}else c=g(e),i=new B(s=c*a);for(M(t,{buffer:i,byteOffset:l,byteLength:s,length:c,view:new j(i)});u<c;)A(t,u++)})),x&&x(m,Y),y=m.prototype=P(q)),y.constructor!==m&&h(y,"constructor",m),h(y,W,m),$&&h(y,$,c),w[c]=m,r({global:!0,forced:m!=f,sham:!H},w),"BYTES_PER_ELEMENT"in m||h(m,"BYTES_PER_ELEMENT",a),"BYTES_PER_ELEMENT"in y||h(y,"BYTES_PER_ELEMENT",a),I(c)}):t.exports=function(){}},function(t,e,n){var r=n(50),i=n(171),o=r.TYPED_ARRAY_CONSTRUCTOR,a=r.aTypedArrayConstructor;t.exports=function(t){return a(i(t,t[o]))}},function(t,e,n){"use strict";n(14);var r=n(35),i=n(90),o=n(196),a=n(34),s=n(46),c=n(113),u=s("species"),d=RegExp.prototype;t.exports=function(t,e,n,l){var h=s(t),f=!a((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),p=f&&!a((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!f||!p||n){var g=r(/./[h]),v=e(h,""[t],(function(t,e,n,i,a){var s=r(t),c=e.exec;return c===o||c===d.exec?f&&!a?{done:!0,value:g(e,n,i)}:{done:!0,value:s(n,e,i)}:{done:!1}}));i(String.prototype,t,v[0]),i(d,h,v[1])}l&&c(d[h],"sham",!0)}},function(t,e,n){var r=n(19),i=n(49),o=n(84),a=n(48),s=n(128),c=n(196),u=r.TypeError;t.exports=function(t,e){var n=t.exec;if(a(n)){var r=i(n,t,e);return null!==r&&o(r),r}if("RegExp"===s(t))return i(c,t,e);throw u("RegExp#exec called on incompatible receiver")}},function(t,e){t.exports=i},function(t,e,n){n(432)},function(t,e,n){var r=n(35),i=n(101),o=n(85),a=/"/g,s=r("".replace);t.exports=function(t,e,n,r){var c=o(i(t)),u="<"+e;return""!==n&&(u+=" "+n+'="'+s(o(r),a,"&quot;")+'"'),u+">"+c+"</"+e+">"}},function(t,e,n){var r=n(34);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e,n){var r=n(259),i=n(258),o=n(221),a=n(260);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0),i=n.n(r),o=n(39),a=function(t){function e(){return t.apply(this,arguments)||this}return i()(e,t),e.prototype.render=function(){Object(o.a)()},e}(n(22).a)},function(t,e,n){n(26);t.exports=function(t){"use strict";t=t||{};return"<div class='esign-china-field-username'\r\n    style=\"\r\n        position: absolute;\r\n        width: max-content;\r\n        top: -18px;\r\n        display: none;\r\n        line-height: 18px;\r\n    \"\r\n></div>\r\n<div class='esign-china-stamp-container'\r\n     style='position: absolute;\r\n     display: none;\r\n     width: 240px;\r\n     overflow-y: scroll;\r\n     max-height: 217px;\r\n     padding: 20px 15px 15px 20px;\r\n     background: #FFFFFF;\r\n     border: solid 1px rgba(0, 0, 0, 0.1);\r\n     box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.15);\r\n     border-radius: 3px;'>\r\n</div>","<div class='esign-china-field-username'\r\n    style=\"\r\n        position: absolute;\r\n        width: max-content;\r\n        top: -18px;\r\n        display: none;\r\n        line-height: 18px;\r\n    \"\r\n></div>\r\n<div class='esign-china-stamp-container'\r\n     style='position: absolute;\r\n     display: none;\r\n     width: 240px;\r\n     overflow-y: scroll;\r\n     max-height: 217px;\r\n     padding: 20px 15px 15px 20px;\r\n     background: #FFFFFF;\r\n     border: solid 1px rgba(0, 0, 0, 0.1);\r\n     box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.15);\r\n     border-radius: 3px;'>\r\n</div>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape;return e+='<dialog class="fv__dialog fv__annot-reply-dialog trust-dia-dibox">\r\n  <p><span>',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.diaTitle")),e+='</span><i class="fv__icon-layer-close"></i></p>\r\n  <div class="fv__trust-tip-container">\r\n    <p><i class="fv__icon-dialog-level-warning"></i><span>',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.enableTip")),e+='</span></p>\r\n  </div>\r\n  <div class="fv__textarea-container trust-dia-inbox">\r\n      <label>\r\n          <input type="radio" name="trustMode" value="one" checked>\r\n          <span>',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.trustOneTime")),e+='</span>\r\n      </label>\r\n      <label>\r\n          <input type="radio" name="trustMode" value="always">\r\n          <span>',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.trustAlways")),e+='</span>\r\n      </label>\r\n  </div>\r\n  <div class="fv__btn_reply_container btn-bot-box">\r\n      <button type="button" class="fv__btn fv__btn-reply trust-ok-btn">',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.ok")),e+='</button>\r\n      <button type="button" class="fv__btn fv__btn-close trust-no-btn">',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.cancel")),e+="</button>\r\n  </div>\r\n</dialog>"}},function(t,e,n){"use strict";n(1),n(7);var r=n(5),i=new Error("Method not implemented."),o=function(){function t(t){this.option=t}var e=t.prototype;return e.loadForm=function(t){throw Error(i+": loadForm")},e.formFillerEvent=function(t,e,n,r){throw Error(i+": formFillerEvent")},e.updateField=function(t,e,n,r){throw Error(i+": updateField")},e.updateFormControl=function(t,e,n,r,o){throw Error(i+": updateFormControl")},e.reloadFieldByName=function(t,e){throw Error(i+": reloadFieldByName")},e.updateMKProperty=function(t,e,n,r,o){throw Error(i+": updateMKProperty")},e.setWidgetAS=function(t,e,n,r){throw Error(i+": setWidgetAS")},e.setFieldValue=function(t,e,n){throw Error(i+": setFieldValue")},e.getFieldsValue=function(t){throw Error(i+": getFieldsValue")},e.addControl=function(t,e,n,r,o){throw Error(i+": addControl")},e.validateFieldName=function(t,e,n){throw Error(i+": validateFieldName")},e.renameField=function(t,e,n){throw Error(i+": renameField")},e.removeField=function(t,e){throw Error(i+": removeField")},e.removeControl=function(t,e,n){throw Error(i+": removeControl")},e.fixPageFields=function(t,e){throw Error(i+": fixPageFields")},e.getControlCount=function(t,e){throw Error(i+": getControlCount")},e.init=function(){return Promise.resolve(!0)},e.getPDFDocIdByFile=function(t){throw Error(i+": getPDFDocIdByFile")},e.getPDFDocIdByChunk=function(t,e){throw Error(i+": getPDFDocIdByChunk")},e.getPDFDocIdByHttpRangeRequest=function(t){throw Error(i+": getPDFDocIdByHttpRangeRequest")},e.getPDFDocIdByStream=function(t){throw Error(i+": getPDFDocIdByStream")},e.parsePDFDocByPassword=function(t){arguments.length>1&&void 0!==arguments[1]||r.EMPTY_STR;throw Error(i+": parsePDFDocByPassword")},e.setIcons=function(){throw Error(i+": setIcons")},e.addIcon=function(t){throw Error(i+": addIcon")},e.removeIcon=function(t,e,n){throw Error(i+": removeIcon")},e.getPDFDocInfoById=function(t){throw Error(i+": getPDFDocInfoById")},e.getMetadata=function(t){throw Error(i+": getMetadata")},e.setMetadataValue=function(t,e,n){throw Error(i+": setMetadataValue")},e.getFileVersion=function(t){throw Error(i+": getFileVersion")},e.getPageInfoByIndex=function(t,e){throw Error(i+": getPageInfoByIndex")},e.getPageInfoById=function(t,e){throw Error(i+": getPageInfoById")},e.getPageBitmap=function(t,e,n,r,o,a,s){throw Error(i+": getPageBitmap")},e.getPageAndHighlightBitmap=function(t,e,n,r,o){throw Error(i+": getPageAndHighlightBitmap")},e.setRenderFlag=function(t,e){throw Error(i+": setRenderFlag")},e.getAnnot=function(t,e,n){throw Error(i+": getAnnot")},e.getPageAnnotIDList=function(t,e){throw Error(i+": getPageAnnotIDList")},e.clearDesignerAssitCache=function(t,e){throw Error(i+": clearDesignerAssitCache")},e.clearAllDesignerAssistCache=function(t){throw Error(i+": clearAllDesignerAssistCache")},e.getAnnots=function(t,e,n){throw Error(i+": getAnnots")},e.getAnnotBitmap=function(t,e,n,r,o,a,s){throw Error(i+": getAnnotBitmap")},e.getAnnotBitmapByRange=function(t,e,n,r,o,a){throw Error(i+": getAnnotBitmapByRange")},e.getAnnotIdAtPoint=function(t,e,n,r){n.x,n.y;throw Error(i+": getAnnotIdAtPoint")},e.getAnnotObjectNumAtPoint=function(t,e,n,r){n.x,n.y;throw Error(i+": getAnnotObjectNumAtPoint")},e.getAnnotIdAtDevicePoint=function(t,e,n,r,o){n.x,n.y;throw Error(i+": getAnnotIdAtDevicePoint")},e.getAnnotObjectNumAtDevicePoint=function(t,e,n,r,o){n.x,n.y;throw Error(i+": getAnnotObjectNumAtDevicePoint")},e.getAnnotObjNumByNM=function(t,e,n){throw Error(i+": getAnnotObjNumByNM")},e.getCharInfoAtPoint=function(t,e,n,r){n.x,n.y;throw Error(i+": getCharInfoAtPoint")},e.updateAnnotQuadPointsByCharIndex=function(t,e,n,r,o){throw Error(i+": updateAnnotQuadPointsByCharIndex")},e.setAnnotContent=function(t,e,n,r){throw Error(i+": setAnnotContent")},e.setAnnotBorderColor=function(t,e,n,r){throw Error(i+": setAnnotBorderColor")},e.setAnnotBorderStyle=function(t,e,n,r,o){throw Error(i+": setAnnotBorderStyle")},e.setAnnotBorderWidth=function(t,e,n,r){throw Error(i+": setAnnotBorderWidth")},e.setAnnotFillColor=function(t,e,n,r){throw Error(i+": setAnnotFillColor")},e.setRedactAnnotFillColor=function(t,e,n,r,o){throw Error(i+": setRedactAnnotFillColor")},e.setAnnotBorderInfo=function(t,e,n,r){throw Error(i+": setAnnotBorderInfo")},e.setRedactOverlayText=function(t,e,n,r){throw Error(i+": setRedactOverlayText")},e.removeRedactOverlayText=function(t,e,n){throw Error(i+": removeRedactOverlayText")},e.setRedactOverlayTextAlignment=function(t,e,n,r){throw Error(i+": setRedactOverlayTextAlignment")},e.setRedactRepeat=function(t,e,n,r){throw Error(i+": setRedactRepeat")},e.setRedactAutoFontSize=function(t,e,n,r){throw Error(i+": setRedactAutoFontSize")},e.getRedactDefaultAppearance=function(t,e,n){throw Error(i+": getRedactDefaultAppearance")},e.setRedactDefaultAppearance=function(t,e,n,r){throw Error(i+": setRedactDefaultAppearance")},e.setRedactOpacity=function(t,e,n,r,o){throw Error(i+": setRedactOpacity")},e.setAnnotOpacity=function(t,e,n,r){throw Error(i+": setAnnotOpacity")},e.removeAnnot=function(t,e,n){throw Error(i+": removeAnnot")},e.annotAddReply=function(t,e,n,r){throw Error(i+": annotAddReply")},e.annotRemoveReply=function(t,e,n,r){throw Error(i+": annotRemoveReply")},e.annotRemoveAllStateAnnots=function(t,e,n){throw Error(i+": annotRemoveAllStateAnnots")},e.annotRemoveAllReply=function(t,e,n){throw Error(i+": annotRemoveAllReply")},e.setAnnotRect=function(t,e,n,r){throw Error(i+": setAnnotRect")},e.setAnnotRectAndInnerRect=function(t,e,n,r,o){throw Error(i+": setAnnotRectAndInnerRect")},e.getAnnotInnerRect=function(t,e,n){throw Error(i+": getAnnotInnerRect")},e.moveAnnotTo=function(t,e,n,r){throw Error(i+": moveAnnotTo")},e.getPDFDocStream=function(t,e,n){throw Error(i+": getPDFDocStream")},e.setAnnotEndingStyle=function(t,e,n,r,o){throw Error(i+": setAnnotEndingStyle")},e.enableLineCaption=function(t,e,n,r){throw Error(i+": enableLineCaption")},e.setLineStartPoint=function(t,e,n,r,o){throw Error(i+": setLineStartPoint")},e.setLineEndPoint=function(t,e,n,r,o){throw Error(i+": setLineEndPoint")},e.setAnnotLeaderLineLength=function(t,e,n,r){throw Error(i+": setAnnotLeaderLineLength")},e.setAnnotLeaderLineExtend=function(t,e,n,r){throw Error(i+": setAnnotLeaderLineExtend")},e.setAnnotLeaderLineOffset=function(t,e,n,r){throw Error(i+": setAnnotLeaderLineOffset")},e.setAnnotCaptionOffset=function(t,e,n,r,o){throw Error(i+": setAnnotCaptionOffset")},e.updateAnnotVertexes=function(t,e,n,r,o,a){throw Error(i+": updateAnnotVertexes")},e.setAnnotVertexes=function(t,e,n,r){throw Error(i+": setAnnotVertexes")},e.setAnnotAPBitmap=function(t,e,n,r,o){throw Error(i+": setAnnotAPBitmap")},e.getBitmapBuffer=function(t,e,n){throw Error(i+": getBitmapBuffer")},e.setAction=function(t,e,n,r){throw Error(i+": setAction")},e.removeAction=function(t,e,n,r,o,a){throw Error(i+": removeAction")},e.setDefaultAppearance=function(t,e,n,r){throw Error(i+": setDefaultAppearance")},e.setAnnotInnerRect=function(t,e,n,r){r.left,r.right,r.top,r.bottom;throw Error(i+": setAnnotInnerRect")},e.setAnnotFlag=function(t,e,n,r){throw Error(i+": setAnnotFlag")},e.importFromFDFFile=function(t,e,n){throw Error(i+": importFromFDFFile")},e.importFromFDF=function(t,e,n){throw Error(i+": importFromFDF")},e.exportToFDF=function(t,e,n){throw Error(i+": exportToFDF")},e.exportToStardardXml=function(t,e,n){throw Error(i+": exportToStardardXml")},e.exportToImage=function(t,e,n,r,o){throw Error(i+": exportToImage")},e.exportToTxt=function(t,e,n,r){throw Error(i+": exportToTxt")},e.exportImageObjectToImage=function(t,e,n,r,o){throw Error(i+": exportImageObjectToImage")},e.cancelExport=function(t){throw Error(i+": cancelExport")},e.addAnnot=function(t){throw Error(i+": addAnnot")},e.getTextRectsAtRect=function(t,e,n){throw Error(i+": getTextRectsAtRect")},e.getTextContinuousRectsAtRect=function(t,e,n){throw Error(i+": getTextContinuousRectsAtRect")},e.getTextContinuousRectsAtPoints=function(t,e,n,r,o,a,s){throw Error(i+": getTextContinuousRectsAtPoints")},e.getTextContinuousCharsAtRect=function(t,e,n){throw Error(i+": getTextContinuousCharsAtRect")},e.getDoubleClickTextRectAtPoint=function(t,e,n,r){throw Error(i+": getDoubleClickTextRectAtPoint")},e.getTextSearch=function(t,e,n,r){throw Error(i+": getTextSearch")},e.getAnnotTextSearch=function(t,e,n,r,o){throw Error(i+": getAnnotTextSearch")},e.textSearchFindNext=function(t){throw Error(i+": textSearchFindNext")},e.textSearchFindPrev=function(t){throw Error(i+": textSearchFindPrev")},e.textSearchDestroy=function(t){throw Error(i+": textSearchDestroy")},e.registerSecurityCallback=function(t,e){throw Error(i+": registerSecurityCallback")},e.destroyDoc=function(t){throw Error(i+": destroyDoc")},e.destroyPage=function(t,e){throw Error(i+": destroyPage")},e.setPopupOpenStatus=function(t,e,n,r){throw Error(i+": setPopupOpenStatus")},e.moveCaretRectByCharIndex=function(t,e,n,r){throw Error(i+": moveCaretRectByCharIndex")},e.setAnnotIntent=function(t,e,n,r){throw Error(i+": setAnnotIntent")},e.setUserName=function(t){throw Error(i+": setUserName")},e.getUserName=function(){throw Error(i+": getUserName")},e.addAnnotReviewState=function(t,e,n,r){throw Error(i+": addAnnotReviewState")},e.addAnnotMarkedState=function(t,e,n,r){throw Error(i+": addAnnotMarkedState")},e.setStateName=function(t,e,n,r){throw Error(i+": setStateName")},e.setNoteOpenStatus=function(t,e,n,r){throw Error(i+": setNoteOpenStatus")},e.removeAllStateAnnots=function(t,e,n){throw Error(i+": removeAllStateAnnots")},e.setDynamicInfoFormula=function(t,e){throw Error(i+": setDynamicInfoFormula")},e.getGraphicObjectsInfo=function(t,e){throw Error(i+": getGraphicObjectsInfo")},e.updatePageInfo=function(t,e){throw Error(i+": updatePageInfo")},e.setPageRotation=function(t,e,n){throw Error(i+": setPageRotation")},e.addPageImage=function(t,e,n,r,o,a,s){throw Error(i+": addPageImage")},e.addWatermark=function(t,e,n){throw Error(i+": addWatermark")},e.getGraphicsObjectAtPoint=function(t,e,n,r,o,a){throw Error(i+": getGraphicsObjectAtPoint")},e.setGraphicsObjectMatrix=function(t,e,n,r){throw Error(i+": setGraphicsObjectMatrix")},e.setGraphicsObjectRect=function(t,e,n,r){throw Error(i+": setGraphicsObjectRect")},e.getGraphicsObjectBitmap=function(t,e,n,r,o){throw Error(i+": getGraphicsObjectBitmap")},e.setGraphicsObjectBorderStyle=function(t,e,n,r,o){throw Error(i+": setGraphicsObjectBorderStyle")},e.setGraphicsObjectBorderWidth=function(t,e,n,r){throw Error(i+": setGraphicsObjectBorderWidth")},e.setGraphicsObjectBorderColor=function(t,e,n,r){throw Error(i+": setGraphicsObjectBorderColor")},e.setGraphicsObjectFillColor=function(t,e,n,r){throw Error(i+": setGraphicsObjectFillColor")},e.setGraphicsObjectOpacity=function(t,e,n,r){throw Error(i+": setGraphicsObjectOpacity")},e.addGraphicsObject=function(t,e,n){throw Error(i+": addGraphicsObject")},e.setImageObjectOpacity=function(t,e,n,r){throw Error(i+": setImageObjectOpacity")},e.setImageObjectRotation=function(t,e,n,r){throw Error(i+": setImageObjectRotation")},e.getImageObjectStream=function(t,e,n){throw Error(i+": getImageObjectStream")},e.insertSubAction=function(t,e,n,r){throw Error(i+": insertSubAction")},e.setSubAction=function(t,e,n,r){throw Error(i+": setSubAction")},e.removeAllSubActions=function(t,e){throw Error(i+": removeAllSubActions")},e.removeSubAction=function(t,e,n){throw Error(i+": removeSubAction")},e.setActionData=function(t,e,n){throw Error(i+": setActionData")},e.moveAction=function(t,e,n,r){throw Error(i+": actionData")},e.removeGraphicsObject=function(t,e,n){throw Error(i+": removeGraphicsObject")},e.removePageAllAnnot=function(t,e){throw Error(i+": removePageAllAnnot")},e.setTextObjectChar=function(t,e,n,r){throw Error(i+": setTextObjectChar")},e.setTextObjectItalic=function(t,e,n,r){throw Error(i+": setTextObjectItalic")},e.setTextObjectBold=function(t,e,n,r){throw Error(i+": setTextObjectBold")},e.setTextObjectFontSize=function(t,e,n,r){throw Error(i+": setTextObjectFontSize")},e.setTextObjectStandardFont=function(t,e,n,r){throw Error(i+": setTextObjectStandardFont")},e.setTextObjectFontByName=function(t,e,n,r,o,a){throw Error(i+": setTextObjectFontByName")},e.getTextObjectWoff=function(t,e,n){throw Error(i+": getTextObjectWoff")},e.getAnnotWoff=function(t,e,n){throw Error(i+": getAnnotWoff")},e.drmEncrypt=function(t,e){throw Error(i+": drmEncrypt")},e.getAction=function(t,e,n){throw Error(i+": getAction")},e.getActionFileStream=function(t,e,n){throw Error(i+": getActionFileStream")},e.getTemplates=function(t){throw Error(i+": getTemplates")},e.hideTemplate=function(t,e,n){throw Error(i+": hideTemplate")},e.spawnPage=function(t,e,n,r,o){throw Error(i+": spawnPage")},e.setFieldsValue=function(t,e,n){throw Error(i+": setFieldsValue")},e.removeTemplate=function(t,e){throw Error(i+": removeTemplate")},e.setUniqueId=function(t,e,n,r){throw Error(i+": setUniqueId")},e.getFontBufferByName=function(t,e){throw Error(i+": getFontBufferByName")},e.getPageSizes=function(t,e){throw Error(i+": getPageSizes")},e.setMeasureRatio=function(t,e,n,r){throw Error(i+": setMeasureRatio")},e.setMeasureUnit=function(t,e,n,r){throw Error(i+": setMeasureUnit")},e.setMeasureConversionFactor=function(t,e,n,r){throw Error(i+": setMeasureConversionFactor")},e.startImportPages=function(t,e,n,r,o,a,s,c){throw Error(i+": startImportPages")},e.importPagesFromPDFDocs=function(t,e,n,r){throw Error(i+": importPagesFromPDFDocs")},e.exportPagesToPDFDocs=function(t,e,n,r,o){throw Error(i+": exportPagesToPDFDocs")},e.extractPages=function(t,e,n,r,o){throw Error(i+": extractPages")},e.getHeaderFooter=function(t){throw Error(i+": getHeaderFooter")},e.updateHeaderFooter=function(t,e){throw Error(i+": updateHeaderFooter")},e.addHeaderFooter=function(t,e){throw Error(i+": addHeaderFooter")},e.removeHeaderFooter=function(t){throw Error(i+": removeHeaderFooter")},e.paste=function(t,e,n,r,o,a){throw Error(i+": paste")},e.setDefaultAp=function(t,e,n,r){throw Error(i+": setDefaultAp")},e.addAnnotGroup=function(t,e,n,r){throw Error(i+": addAnnotGroup")},e.verifySignature=function(t,e,n){throw Error(i+": verifySignature")},e.getDigitalSignatureInfo=function(t,e,n){throw Error(i+": getDigitalSignatureInfo")},e.verifyDocSignature=function(t,e){throw Error(i+": verifyDocSignature")},e.verifySignatureLtv=function(t,e,n){throw Error(i+": verifySignatureLtv")},e.clearSignature=function(t,e,n){throw Error(i+": clearSignature")},e.setCalloutLinePoints=function(t,e,n,r){throw Error(i+": setCalloutLinePoints")},e.getGraphicsObjectByIndex=function(t,e,n){throw Error(i+": getGraphicsObjectByIndex")},e.getGraphicsObjectByIndex=function(t,e,n){throw Error(i+": getGraphicsObjectByIndex")},e.getGraphicsObjectsCount=function(t,e){throw Error(i+": getGraphicsObjectsCount")},e.getFontsInfo=function(t){notImplemented()},e.setInkList=function(t,e,n,r){throw Error(i+": setInkList")},e.getBookmarks=function(t){throw Error(i+": getBookmarks")},e.createRootBookmark=function(t){throw Error(i+": createRootBookmark")},e.insertBookmark=function(t,e,n,r,o,a,s){throw Error(i+": insertBookmark")},e.setBookmarkProperty=function(t,e,n){throw Error(i+": setBookmarkProperty")},e.removeBookmark=function(t,e){throw Error(i+": removeBookmark")},e.getBookmarkDestination=function(t,e){throw Error(i+": getBookmarkDestination")},e.setBookmarkDestination=function(t,e,n){throw Error(i+": setBookmarkDestination")},e.getBookmarkAction=function(t,e){throw Error(i+": getBookmarkAction")},e.setBookmarkAction=function(t,e,n){throw Error(i+": setBookmarkAction")},e.setPageAction=function(t,e,n){throw Error(i+": setBookmarkAction")},e.moveBookmarkAction=function(t,e,n){throw Error(i+": setBookmarkAction")},e.removeBookmarkAction=function(t,e,n){throw Error(i+": removeBookmarkAction")},e.getLayerNodes=function(t){throw Error(i+": getLayerNodes")},e.setLayerNodeVisiable=function(t,e,n){throw Error(i+": setLayerNodeVisiable")},e.getThumb=function(t,e,n,r){throw Error(i+": getThumb")},e.getMediaBoxBitmap=function(t,e,n,r){throw Error(i+": getMediaBoxBitmap")},e.movePageTo=function(t,e,n){throw Error(i+": movePageTo")},e.insertPage=function(t,e,n,r){throw Error(i+": insertPage")},e.removePage=function(t,e){throw Error(i+": removePage")},e.setAnnotIconName=function(t,e,n,r){throw Error(i+": setAnnotIconName")},e.getFileattachmentStream=function(t,e,n,r){throw Error(i+": getFileattachmentStream")},e.setCalloutLineEndingStyle=function(t,e,n,r){throw Error(i+": setCalloutLineEndingStyle")},e.getDocAdditionalActions=function(t){throw Error(i+": getDocAdditionalActions")},e.calcPageContentBBox=function(t,e,n){throw Error(i+": calcPageContentBBox")},e.getPageBox=function(t,e,n){throw Error(i+": getPageBox")},e.setPageBox=function(t,e,n,r){throw Error(i+": setPageBox")},e.setPageSize=function(t,e,n,r){throw Error(i+": setPageSize")},e.copyPages=function(t,e,n){throw Error(i+": copyPages")},e.saveCopyPagesData=function(t,e){throw Error(i+": saveCopyPagesData")},e.pastePages=function(t,e){throw Error(i+": pastePages")},e.embedAllPageThumbnail=function(t){throw Error(i+": embedAllPageThumbnail")},e.removeEmbeddedPageThumbnail=function(t){throw Error(i+": removeEmbeddedPageThumbnail")},e.cancelEmbedAllPageThumbnail=function(t){throw Error(i+": cancelEmbedAllPageThumbnail")},e.cancelRemoveEmbeddedPageThumbnail=function(t){throw Error(i+": cancelRemoveEmbeddedPageThumbnail")},e.getAllBoxes=function(t,e){throw Error(i+": getAllBoxes")},e.setAllBoxesByIndexes=function(t,e,n,r,o,a,s,c){throw Error(i+": setAllBoxesByIndexes")},e.getPageFormat=function(t,e,n,r){throw Error(i+": getPageFormat")},e.getPageFormatThumb=function(t,e,n,r,o,a,s,c){throw Error(i+": getPageFormatThumb")},e.addPageFormat=function(t,e,n,r){throw Error(i+": addPageFormat")},e.removeAllPageFormat=function(t,e){throw Error(i+": removeAllPageFormat")},e.extractPrintPages=function(t,e){throw Error(i+": extractPrintPages")},e.setDocColors=function(t,e){throw Error(i+": setDocColors")},e.markRedactAnnot=function(t,e,n,r){throw Error(i+": markRedactAnnot")},e.applyRedaction=function(t){throw Error(i+": applyRedaction")},e.redactApply=function(t,e,n){throw Error(i+": redactApply")},e.setRedactApplyFillColor=function(t,e,n,r){throw Error(i+": setRedactApplyFillColor")},e.getAnnotsRawData=function(t,e){throw Error(i+": getAnnotsRawData")},e.hasForm=function(t){throw Error(i+": hasForm")},e.setSubject=function(t,e,n,r){throw Error(i+": setSubject")},e.setTitle=function(t,e,n,r){throw Error(i+": setTitle")},e.setCreateDateTime=function(t,e,n,r){throw Error(i+": setCreateDateTime")},e.setModifiedDateTime=function(t,e,n,r){throw Error(i+": setModifiedDateTime")},e.setTabOrder=function(t,e,n){throw Error(i+": setTabOrder")},e.getTabOrder=function(t,e){throw Error(i+": getTabOrder")},e.setStructureOrder=function(t,e,n){throw Error(i+": setStructureOrder")},e.setAlignment=function(t,e,n,r){throw Error(i+": setAlignment")},e.getStdCipherOptions=function(t){throw Error(i+": getStdCipherOptions")},e.setAnnotRotation=function(t,e,n,r){throw Error(i+": setAnnotRotation")},e.setImage=function(t,e,n,r){throw Error(i+": setImage")},e.getWidgetMkOption=function(t,e,n){throw Error(i+": getWidgetMkOption")},e.setWidgetIconCaptionRelation=function(t,e,n,r){throw Error(i+": setWidgetIconCaptionRelation")},e.setWidgetHighlighting=function(t,e,n,r){throw Error(i+": setWidgetHighlighting")},e.setWidgetMkCaption=function(t,e,n,r,o){throw Error(i+": setWidgetMkCaption")},e.setWidgetMkIcon=function(t,e,n,r,o){throw Error(i+": setWidgetMkIcon")},e.getWidgetIconFitOption=function(t,e,n){throw Error(i+": getWidgetIconFitOption")},e.setWidgetIconFitOption=function(t,e,n,r){throw Error(i+": setWidgetIconFitOption")},e.getAllModuleLicenseRight=function(){throw Error(i+": getAllModuleLicenseRight")},e.ensureSideModeLoaded=function(){throw Error(i+": ensureSideModeLoaded")},e.moveGraphicsObjectByPosition=function(t,e,n,r,o){throw Error(i+": moveGraphicsObjectByPosition")},e.setDictionaryEntry=function(t,e,n,r,o){throw Error(i+": setDictionaryEntry")},e.getDictionaryEntry=function(t,e,n,r){throw Error(i+": getDictionaryEntry")},e.resetAppearanceStream=function(t,e,n){throw Error(i+": resetAppearanceStream")},e.renderTemplatesByObjNum=function(t,e){throw Error(i+": renderTemplatesByObjNum")},e.getNameTree=function(t,e){throw Error(i+": getNameTree")},e.addNameTreeObj=function(t,e,n,r){throw Error(i+": addNameTreeObj")},e.removeNameTreeObj=function(t,e,n){throw Error(i+": removeNameTreeObj")},e.replaceNameTreeObj=function(t,e,n,r){throw Error(i+": replaceNameTreeObj")},e.renameNameTreeObj=function(t,e,n,r){throw Error(i+": renameNameTreeObj")},e.getPageIndexByObjNum=function(t,e){throw Error(i+": getPageIndexByObjNum")},e.nameTreeTemplatesToPages=function(t,e){throw Error(i+": nameTreeTemplatesToPages")},e.nameTreePagesToTemplates=function(t,e){throw Error(i+": nameTreePagesToTemplates")},e.showNameTreePageAtTheEnd=function(t){throw Error(i+": showNameTreePageAtTheEnd")},e.hideNameTreePage=function(t,e){throw Error(i+": hideNameTreePage")},e.addFileSpec=function(t,e,n,r){throw Error(i+": addFileSpec")},e.setFileSpecDesc=function(t,e,n){throw Error(i+": setFileSpecDesc")},e.getFileSpecStream=function(t,e,n){throw Error(i+": getFileSpecStream")},e.addEmbeddedFileByAttachments=function(t,e,n){throw Error(i+": addEmbeddedFileByAttachments")},e.setEmbeddedFileByAttachments=function(t,e,n){throw Error(i+": setEmbeddedFileByAttachments")},e.removeEmbeddedFileByAttachments=function(t,e){throw Error(i+": removeEmbeddedFileByAttachments")},e.moveControl=function(t,e,n,r){throw Error(i+": moveControl")},e.getAnnotIdArrayByOrder=function(t,e){throw Error(i+": getAnnotIdArrayByOrder")},e.getPageDictionary=function(t,e){throw Error(i+": getPageDictionary")},e.getSuggestedFormDesignerRect=function(t,e){throw Error(i+": getSuggestedFormDesignerRect")},e.getPDFDictInfo=function(t){throw Error(i+": getInfo")},e.getPageLabels=function(t,e){throw Error(i+": getPageLabels")},e.startFormDesignerAssit=function(t){throw Error(i+": startFormDesignerAssit")},e.stopFormDesignerAssit=function(t){throw Error(i+": stopFormDesignerAssit")},e.hasKey=function(t,e,n){throw Error(i+": getInfo")},e.setAt=function(t,e,n,r){throw Error(i+": setAt")},e.getAt=function(t,e,n){throw Error(i+": getAt")},e.autoRecognitionForm=function(t){throw Error(i+": autoRecognitionForm")},e.isStaticXFA=function(t){throw Error(i+": isStaticXFA")},e.removeXFA=function(t){throw Error(i+": removeXFA")},e.createWebLinks=function(t,e,n){throw Error(i+": createWebLinks")},e.removeWebLinks=function(t,e,n){throw Error(i+": removeWebLinks")},e.linkHasPA=function(t,e,n){throw Error(i+": linkHasPA")},e.linkResetAByPA=function(t,e,n){throw Error(i+": linkResetAByPA")},e.getDestinationsArray=function(t){throw Error(i+": getDestinationsArray")},e.deleteDestination=function(t,e,n){throw Error(i+": deleteDestination")},e.renameDestination=function(t,e,n,r){throw Error(i+": renameDestination")},e.createDestination=function(t,e){throw Error(i+": createDestination")},e.resetDestination=function(t,e){throw Error(i+": resetDestination")},e.moveBookmark=function(t,e,n,r){throw Error(i+": moveBookmark")},e.combineFormsToCSV=function(t,e){throw Error(i+": combineFormsToCSV")},e.reversePages=function(t,e){throw Error(i+":reversePages")},e.movePagesTo=function(t,e,n){throw Error(i+": movePagesTo")},e.removePages=function(t,e){throw Error(i+": removePages")},e.insertBlankPages=function(t,e,n,r){throw Error(i+": insertBlankPages")},e.insertBlankPages2=function(t,e,n,r){throw Error(i+": insertBlankPages2")},e.rotatePages=function(t,e,n){throw Error(i+": rotatePages")},e.getPageIndexByLabelText=function(t,e){throw Error(i+": getPageIndexByLabelText")},e.getCurrentPageLabelInfo=function(t,e){throw Error(i+": getCurrentPageLabelInfo")},e.checkDocIsUseLogicPage=function(t){throw Error(i+": checkDocIsUseLogicPage")},e.formatPageNumbers=function(t,e,n,r,o){throw Error(i+": formatPageNumbers")},e.getPortfolioTreeNode=function(t){throw Error(i+": getPortfolioTreeNode")},e.sendSortFolioParam=function(t,e,n){throw Error(i+": sendSortFolioParam")},e.getFolioTreeRoot=function(t){throw Error(i+": getFolioTreeRoot")},e.getFolioFileInfo=function(t){throw Error(i+": getFolioFileInfo")},e.getSnappedPoint=function(t,e,n,r){throw new Error(i+": getSnappedPoint")},e.getPageTextRectCount=function(t,e){throw new Error(i+": getPageTextRectCount")},e.getPageTextByRectIndex=function(t,e,n){throw new Error(i+": getPageTextByRectIndex")},e.isCPDF=function(t){throw Error(i+": isCPDF")},e.getDocURI=function(t){throw Error(i+": getDocURI")},e.convertToCPDF=function(t,e,n,r,o){throw Error(i+": convertToCPDF")},e.removeCDocId=function(t,e,n,r,o){throw Error(i+": removeCDocId")},e.removeLayerNode=function(t,e){throw Error(i+": removeLayerNode")},e.getLayersByPage=function(t,e){throw Error(i+": getLayersByPage")},e.updateLayerInfo=function(t,e){throw Error(i+": updateLayerInfo")},e.flattenLayers=function(t){throw Error(i+": flattenLayers")},e.mergeLayers=function(t,e,n){throw Error(i+": mergeLayers")},e.getLayerRelatedAnnots=function(t,e){throw Error(i+": getLayerRelatedAnnots")},e.layerMoveTo=function(t,e,n,r){throw Error(i+": layerMoveTo")},e.getInfos=function(t){throw Error(i+": getInfos")},e.hasDocIsWrapped=function(t){throw Error(i+": hasDocIsWrapped")},e.removeMetadata=function(t,e){throw Error(i+": removeMetadata")},e.cloneGraphicObject=function(t,e,n,r){throw new Error(i+": cloneGraphicObject")},e.startReplacePages=function(t,e,n,r,o){throw Error(i+": startReplacePages")},e.normalizePage=function(t,e){throw new Error(i+": normalizePage")},e.getText=function(t,e,n,r){throw new Error(i+": getText")},e.cancelTaskProgress=function(t,e){throw new Error(i+": cancelTaskProgress")},e.getViewportRect=function(t,e){throw new Error(i+": getViewportRect")},e.getMeasureScaleRatio=function(t,e){throw new Error(i+": getMeasureScaleRatio")},e.setMeasureScaleRatio=function(t,e,n,r){throw new Error(i+": setMeasureScaleRatio")},e.exportMeasureData=function(t,e){throw new Error(i+": exportMeasureData")},e.setRenderConfigLineWeight=function(t,e){throw new Error(i+": setRenderConfigLineWeight")},e.setPageDisplayPreferences=function(t,e){throw new Error(i+": pageDisplayPreferences")},e.getPDFDocFromImageFile=function(t,e){throw new Error(i+": getPDFDocFromImageFile")},e.createSummarizeComments=function(t,e,n){throw new Error(i+": createSummarizeComments")},e.hiddenDataSanitizeDocument=function(t){throw new Error(i+": hiddenDataSanitizeDocument")},e.hiddenDataRemoveHiddenInfo=function(t,e){throw new Error(i+": hiddenDataRemoveHiddenInfo")},e.getCurFileSymbolId=function(t){throw new Error(i+": getCurFileSymbolId")},e.getFadeOutBackground=function(t){throw new Error(i+": getFadeOutBackground")},e.getConvertToMono=function(t){throw new Error(i+": getConvertToMono")},e.setPageTransition=function(t,e,n,r,o){throw new Error(i+": setPageTransition")},e.getPageTransitionByIndex=function(t,e){throw new Error(i+": getPageTransitionByIndex")},e.getPageTransition=function(t,e){throw new Error(i+": getPageTransition")},e.generateDocHash=function(){throw new Error(i+": generateDocHash")},e.getTextInRect=function(){throw new Error(i+": getTextInRect")},e.getRichText=function(t,e,n){throw Error(i+": getRichText")},e.setRichText=function(t,e,n,r){throw Error(i+": setRichText")},e.addRichText=function(t,e,n,r){throw Error(i+": addRichText")},e.insertRichText=function(t,e,n,r){throw Error(i+": insertRichText")},e.removeRichText=function(t,e,n,r){throw Error(i+": removeRichText")},e.assignSignerForESignCN=function(){throw new Error(i+": assignSignerForESignCN")},e.setESignCNFlowSignMode=function(){throw new Error(i+": setESignCNFlowSignMode")},e.getESignCNFlowSignMode=function(){throw new Error(i+": getESignCNFlowSignMode")},e.isESignCNFile=function(){throw new Error(i+": isESignCNFile")},e.getESignCNMode=function(){throw new Error(i+": getESignCNMode")},e.getAssignInfoForESignCN=function(){throw new Error(i+": getAssignInfoForESignCN")},e.getOrderOfSignFlowFile=function(){throw new Error(i+": getOrderOfSignFlowFile")},e.checkFieldWhetherFill=function(){throw new Error(i+": checkFieldWhetherFill")},e.isESignCNSignature=function(){throw new Error(i+": isESignCNSignature")},e.setSignatureAP=function(){throw new Error(i+": setSignatureAP")},e.getFlowSignInfo=function(){throw new Error(i+": getFlowSignInfo")},e.stampSetAtName=function(){throw new Error(i+": stampSetAtName")},e.addAuditTrail=function(){throw new Error(i+": addAuditTrail")},e.getDocAuditTrail=function(){throw new Error(i+": getDocAuditTrail")},e.updatePropAuthDictForESignCN=function(){throw new Error(i+": updatePropAuthDictForESignCN")},e.transformPage=function(t,e,n){throw new Error(i+": transformPage")},e.getSignatureBitmap=function(t,e){throw new Error(i+": getSignatureBitmap")},t}();e.a=o},function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var r=n(3),i=n.n(r),o=(n(176),n(9)),a=n.n(o),s=(n(14),n(47),n(53),n(13),n(12),n(87),n(157),n(42),n(43),n(92),n(1),n(32),n(10),{}),c={},u=/[A-Z]/g;function d(t,e){return 0===e?t.toLowerCase():"-"+t.toLowerCase()}function l(t,e){if(e in t)return t[e];var n=e.toLowerCase();if(n in t)return t[n];var r=c[e];return r||(r=e.replace(u,d),c[e]=r),r in t?t[r]:s}function h(t,e,n){var r=n.field||e,i=t.$options;return r in i?i[r]:e in i?i[e]:l(t.attrs,e)}function f(t,e,n){var r=h(t,e,n);if(r===s)return void 0!==n.defaultValue&&n.defaultValue;if("string"==typeof r&&(r=0==(r=r.trim().toLowerCase()).length||(!0===n.defaultValue?"false"!==r:"true"===r)),"boolean"!=typeof r&&(r=n.defaultValue),"boolean"!=typeof r&&n.required)throw new Error("Illegal component parameter(".concat(e,"): ").concat(e," is required for <").concat(t.name,">"));return r}function p(t,e,n){var r=h(t,e,n);if((r===s||"string"!=typeof r)&&n.required)throw new Error("Illegal component parameter(".concat(e,"): ").concat(e," is required for <").concat(t.name,">"));if("string"!=typeof r&&(r=n.defaultValue),"lower"===n.case?r=r.toLowerCase():"upper"===n.case&&(r=r.toUpperCase()),n.match){var i=n.match;if("string"==typeof n.match&&(i=new RegExp(i)),i instanceof RegExp&&!i.test(r))throw new Error("Illegal component parameter(".concat(e,"): ").concat(r," doesn't match regex: ").concat(i))}return r}function g(t,e,n){var r=h(t,e,n);if((r===s||"string"!=typeof r)&&n.required)throw new Error("Illegal component parameter(".concat(e,"): ").concat(e," is required for <").concat(t.name,">"));"string"!=typeof r&&(r=n.defaultValue),"lower"===n.case?r=r.toLowerCase():"upper"===n.case&&(r=r.toUpperCase());var i=n.enums||[];if(-1==i.indexOf(r))throw new Error("'".concat(r,"' is not in list of valid values: [").concat(i.join(","),"]"));return r}function v(t,e,n){var r=n.min,i=n.max;isFinite(r)||(r=-1/0),isFinite(i)||(i=1/0);var o=[Math.min(r,i),Math.max(r,i)];r=o[0],i=o[1];var a=Number(h(t,e,n));if("number"!=typeof a&&n.required)throw new Error("Illegal component parameter(".concat(e,"): ").concat(e," is required for <").concat(t.name,">"));if(("number"!=typeof a||isNaN(a))&&(a=n.defaultValue),a<r||a>i)throw new Error("Illegal component parameter(".concat(e,"): ").concat(a," is out of range [").concat(r,", ").concat(i,"]"));return a}function m(t,e,n){var r=Number(h(t,e,n));if("number"!=typeof r&&n.required)throw new Error("Illegal component parameter(".concat(e,"): ").concat(e," is required for <").concat(t.name,">"));if(("number"!=typeof r||isNaN(r))&&(r=n.defaultValue),void 0===r&&!n.required)return r;if(isNaN(r)||!isFinite(r))throw new Error("Illegal component parameter(".concat(e,"): ").concat(r," is not a valid number for <").concat(t.name,">"));return r}function y(t,e,n){var r=n.field||e;if(r in t.$options){var i=t.$options[r];if(!i&&n.required)throw new Error("Illegal component parameter(".concat(e,"): ").concat(e," is required for <").concat(t.name,">"));if("function"!=typeof i)throw new Error("Illegal component parameter(".concat(e,"): ").concat(i," is not a function"));return i}var o=l(t.attrs,e);if(o==s&&n.required)throw new Error("Illegal component parameter(".concat(e,"): ").concat(e," is required for <").concat(t.name,">"));if(o!==s){var c=[];return"string"==typeof n.args?c.push(n.args):Array.isArray(n.args)&&c.push.apply(c,a()(n.args)),function(){var e=arguments;return t.controller.eval(o,c.reduce((function(t,n,r){return t[n]=e[r],t}),{$args:Array.prototype.slice.call(arguments,0)}))}}return n.defaultValue}function w(t,e,n){var r=h(t,e,n);if(void 0===r&&(r=n.defaultValue),(r===s||void 0===r)&&n.required)throw new Error("Illegal component parameter(".concat(e,"): ").concat(e," is required for <").concat(t.name,">"));if(r!==s)return r}function b(t,e,n){var r=h(t,e,{});return n.call(t,t,e,r===s?void 0:r)}var A=function(){function t(t){this.resolvers=[],this.init(t)}var e=t.prototype;return e.init=function(t){for(var e in t){var n=t[e],r=this.getResolver(n);this.resolvers.push({field:n.field||e,name:e,config:n,resolve:r})}},e.getResolver=function(t){if("function"==typeof t)return b;switch(t.type){case"boolean":return f;case"string":return p;case"range":return v;case"number":return m;case"function":return y;case"enum":return g;default:return w}},e.resolve=function(t){this.resolvers.forEach((function(e){t[e.field]=e.resolve(t,e.name,e.config)}))},t}(),P=n(135);var E=function(){function t(t){var e=this._resolveMetadata(t);this.optionsResolver=new A(e.options)}var e=t.prototype;return e._resolveMetadata=function(t){return function t(e){if(e===P.a)return P.a.getMetadata();var n=t(Object.getPrototypeOf(e.prototype).constructor),r=e.getMetadata();return{options:i()({},n.options,r.options)}}(t)},e.resolve=function(t){this.optionsResolver.resolve(t)},t}()},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(19),i=n(215),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(19),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r={};r[n(46)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(54),i=n(250),o=n(83),a=n(84),s=n(100),c=n(165);e.f=r&&!i?Object.defineProperties:function(t,e){a(t);for(var n,r=s(e),i=c(e),u=i.length,d=0;u>d;)o.f(t,n=i[d++],r[n]);return t}},function(t,e,n){var r=n(128),i=n(100),o=n(129).f,a=n(166),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"Window"==r(t)?function(t){try{return o(t)}catch(t){return a(s)}}(t):o(i(t))}},function(t,e,n){var r=n(373),i=n(57),o=n(255),a=n(83).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(257);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(128),i=n(19);t.exports="process"==r(i.process)},function(t,e,n){var r=n(19).TypeError;t.exports=function(t,e){if(t<e)throw r("Not enough arguments");return t}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){var r=n(46),i=n(174),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){"use strict";var r=n(24),i=n(49),o=n(102),a=n(152),s=n(48),c=n(269),u=n(156),d=n(142),l=n(132),h=n(113),f=n(90),p=n(46),g=n(174),v=n(270),m=a.PROPER,y=a.CONFIGURABLE,w=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,A=p("iterator"),P=function(){return this};t.exports=function(t,e,n,a,p,v,E){c(n,e,a);var x,S,C,D=function(t){if(t===p&&k)return k;if(!b&&t in T)return T[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},I=e+" Iterator",R=!1,T=t.prototype,_=T[A]||T["@@iterator"]||p&&T[p],k=!b&&_||D(p),F="Array"==e&&T.entries||_;if(F&&(x=u(F.call(new t)))!==Object.prototype&&x.next&&(o||u(x)===w||(d?d(x,w):s(x[A])||f(x,A,P)),l(x,I,!0,!0),o&&(g[I]=P)),m&&"values"==p&&_&&"values"!==_.name&&(!o&&y?h(T,"name","values"):(R=!0,k=function(){return i(_,this)})),p)if(S={values:D("values"),keys:v?k:D("keys"),entries:D("entries")},E)for(C in S)(b||R||!(C in T))&&f(T,C,S[C]);else r({target:e,proto:!0,forced:b||R},S);return o&&!E||T[A]===k||f(T,A,k,{name:p}),g[e]=k,S}},function(t,e,n){var r=n(35),i=n(106),o=n(85),a=n(101),s=r("".charAt),c=r("".charCodeAt),u=r("".slice),d=function(t){return function(e,n){var r,d,l=o(a(e)),h=i(n),f=l.length;return h<0||h>=f?t?"":void 0:(r=c(l,h))<55296||r>56319||h+1===f||(d=c(l,h+1))<56320||d>57343?t?s(l,h):r:t?u(l,h,h+2):d-56320+(r-55296<<10)+65536}};t.exports={codeAt:d(!1),charAt:d(!0)}},function(t,e,n){"use strict";var r=n(84);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(34),i=n(19).RegExp,o=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=o||r((function(){return!i("a","y").sticky})),s=o||r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},function(t,e,n){var r=n(82),i=n(128),o=n(46)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(19),i=n(231),o=r.TypeError;t.exports=function(t){if(i(t))throw o("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(46)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){"use strict";var r=n(19),i=n(35),o=n(54),a=n(275),s=n(152),c=n(113),u=n(192),d=n(34),l=n(143),h=n(106),f=n(114),p=n(276),g=n(400),v=n(156),m=n(142),y=n(129).f,w=n(83).f,b=n(235),A=n(166),P=n(132),E=n(105),x=s.PROPER,S=s.CONFIGURABLE,C=E.get,D=E.set,I=r.ArrayBuffer,R=I,T=R&&R.prototype,_=r.DataView,k=_&&_.prototype,F=Object.prototype,M=r.Array,O=r.RangeError,L=i(b),N=i([].reverse),V=g.pack,B=g.unpack,U=function(t){return[255&t]},j=function(t){return[255&t,t>>8&255]},H=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},W=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},$=function(t){return V(t,23,4)},Y=function(t){return V(t,52,8)},q=function(t,e){w(t.prototype,e,{get:function(){return C(this)[e]}})},G=function(t,e,n,r){var i=p(n),o=C(t);if(i+e>o.byteLength)throw O("Wrong index");var a=C(o.buffer).bytes,s=i+o.byteOffset,c=A(a,s,s+e);return r?c:N(c)},z=function(t,e,n,r,i,o){var a=p(n),s=C(t);if(a+e>s.byteLength)throw O("Wrong index");for(var c=C(s.buffer).bytes,u=a+s.byteOffset,d=r(+i),l=0;l<e;l++)c[u+l]=d[o?l:e-l-1]};if(a){var K=x&&"ArrayBuffer"!==I.name;if(d((function(){I(1)}))&&d((function(){new I(-1)}))&&!d((function(){return new I,new I(1.5),new I(NaN),K&&!S})))K&&S&&c(I,"name","ArrayBuffer");else{(R=function(t){return l(this,T),new I(p(t))}).prototype=T;for(var J,X=y(I),Z=0;X.length>Z;)(J=X[Z++])in R||c(R,J,I[J]);T.constructor=R}m&&v(k)!==F&&m(k,F);var Q=new _(new R(2)),tt=i(k.setInt8);Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||u(k,{setInt8:function(t,e){tt(this,t,e<<24>>24)},setUint8:function(t,e){tt(this,t,e<<24>>24)}},{unsafe:!0})}else T=(R=function(t){l(this,T);var e=p(t);D(this,{bytes:L(M(e),0),byteLength:e}),o||(this.byteLength=e)}).prototype,k=(_=function(t,e,n){l(this,k),l(t,T);var r=C(t).byteLength,i=h(e);if(i<0||i>r)throw O("Wrong offset");if(i+(n=void 0===n?r-i:f(n))>r)throw O("Wrong length");D(this,{buffer:t,byteLength:n,byteOffset:i}),o||(this.buffer=t,this.byteLength=n,this.byteOffset=i)}).prototype,o&&(q(R,"byteLength"),q(_,"buffer"),q(_,"byteLength"),q(_,"byteOffset")),u(k,{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return W(G(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return W(G(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return B(G(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return B(G(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){z(this,1,t,U,e)},setUint8:function(t,e){z(this,1,t,U,e)},setInt16:function(t,e){z(this,2,t,j,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){z(this,2,t,j,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){z(this,4,t,H,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){z(this,4,t,H,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){z(this,4,t,$,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){z(this,8,t,Y,e,arguments.length>2?arguments[2]:void 0)}});P(R,"ArrayBuffer"),P(_,"DataView"),t.exports={ArrayBuffer:R,DataView:_}},function(t,e,n){"use strict";var r=n(89),i=n(130),o=n(91);t.exports=function(t){for(var e=r(this),n=o(e),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)e[s++]=t;return e}},function(t,e,n){var r=n(166),i=Math.floor,o=function(t,e){var n=t.length,c=i(n/2);return n<8?a(t,e):s(t,o(r(t,0,c),e),o(r(t,c),e),e)},a=function(t,e){for(var n,r,i=t.length,o=1;o<i;){for(r=o,n=t[o];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==o++&&(t[r]=n)}return t},s=function(t,e,n,r){for(var i=e.length,o=n.length,a=0,s=0;a<i||s<o;)t[a+s]=a<i&&s<o?r(e[a],n[s])<=0?e[a++]:n[s++]:a<i?e[a++]:n[s++];return t};t.exports=o},function(t,e,n){"use strict";var r=n(228).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(152).PROPER,i=n(34),o=n(285);t.exports=function(t){return i((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||r&&o[t].name!==t}))}},function(t,e,n){"use strict";var r,i=n(24),o=n(35),a=n(119).f,s=n(114),c=n(85),u=n(232),d=n(101),l=n(233),h=n(102),f=o("".startsWith),p=o("".slice),g=Math.min,v=l("startsWith");i({target:"String",proto:!0,forced:!!(h||v||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!v},{startsWith:function(t){var e=c(d(this));u(t);var n=s(g(arguments.length>1?arguments[1]:void 0,e.length)),r=c(t);return f?f(e,r,n):p(e,n,n+r.length)===r}})},function(t,e,n){var r=n(24),i=n(34),o=n(219).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},function(t,e,n){
/* flatpickr v4.6.9, @license MIT */
t.exports=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(){return(t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var n=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],r={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return"undefined"!=typeof console&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},i={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},o=function(t,e){return void 0===e&&(e=2),("000"+t).slice(-1*e)},a=function(t){return!0===t?1:0};function s(t,e){var n;return function(){var r=this;clearTimeout(n),n=setTimeout((function(){return t.apply(r,arguments)}),e)}}var c=function(t){return t instanceof Array?t:[t]};function u(t,e,n){if(!0===n)return t.classList.add(e);t.classList.remove(e)}function d(t,e,n){var r=window.document.createElement(t);return e=e||"",n=n||"",r.className=e,void 0!==n&&(r.textContent=n),r}function l(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function h(t,e){var n=d("div","numInputWrapper"),r=d("input","numInput "+t),i=d("span","arrowUp"),o=d("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?r.type="number":(r.type="text",r.pattern="\\d*"),void 0!==e)for(var a in e)r.setAttribute(a,e[a]);return n.appendChild(r),n.appendChild(i),n.appendChild(o),n}function f(t){try{return"function"==typeof t.composedPath?t.composedPath()[0]:t.target}catch(e){return t.target}}var p=function(){},g=function(t,e,n){return n.months[e?"shorthand":"longhand"][t]},v={D:p,F:function(t,e,n){t.setMonth(n.months.longhand.indexOf(e))},G:function(t,e){t.setHours(parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,n){t.setHours(t.getHours()%12+12*a(new RegExp(n.amPM[1],"i").test(e)))},M:function(t,e,n){t.setMonth(n.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(1e3*parseFloat(e))},W:function(t,e,n){var r=parseInt(e),i=new Date(t.getFullYear(),0,2+7*(r-1),0,0,0,0);return i.setDate(i.getDate()-i.getDay()+n.firstDayOfWeek),i},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours(parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:p,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:p,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},m={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},y={Z:function(t){return t.toISOString()},D:function(t,e,n){return e.weekdays.shorthand[y.w(t,e,n)]},F:function(t,e,n){return g(y.n(t,e,n)-1,!1,e)},G:function(t,e,n){return o(y.h(t,e,n))},H:function(t){return o(t.getHours())},J:function(t,e){return void 0!==e.ordinal?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[a(t.getHours()>11)]},M:function(t,e){return g(t.getMonth(),!0,e)},S:function(t){return o(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,n){return n.getWeek(t)},Y:function(t){return o(t.getFullYear(),4)},d:function(t){return o(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return o(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return o(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},w=function(t){var e=t.config,n=void 0===e?r:e,o=t.l10n,a=void 0===o?i:o,s=t.isMobile,c=void 0!==s&&s;return function(t,e,r){var i=r||a;return void 0===n.formatDate||c?e.split("").map((function(e,r,o){return y[e]&&"\\"!==o[r-1]?y[e](t,i,n):"\\"!==e?e:""})).join(""):n.formatDate(t,e,i)}},b=function(t){var e=t.config,n=void 0===e?r:e,o=t.l10n,a=void 0===o?i:o;return function(t,e,i,o){if(0===t||t){var s,c=o||a,u=t;if(t instanceof Date)s=new Date(t.getTime());else if("string"!=typeof t&&void 0!==t.toFixed)s=new Date(t);else if("string"==typeof t){var d=e||(n||r).dateFormat,l=String(t).trim();if("today"===l)s=new Date,i=!0;else if(/Z$/.test(l)||/GMT$/.test(l))s=new Date(t);else if(n&&n.parseDate)s=n.parseDate(t,d);else{s=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var h=void 0,f=[],p=0,g=0,y="";p<d.length;p++){var w=d[p],b="\\"===w,A="\\"===d[p-1]||b;if(m[w]&&!A){y+=m[w];var P=new RegExp(y).exec(t);P&&(h=!0)&&f["Y"!==w?"push":"unshift"]({fn:v[w],val:P[++g]})}else b||(y+=".");f.forEach((function(t){var e=t.fn,n=t.val;return s=e(s,n,c)||s}))}s=h?s:void 0}}if(s instanceof Date&&!isNaN(s.getTime()))return!0===i&&s.setHours(0,0,0,0),s;n.errorHandler(new Error("Invalid date provided: "+u))}}};function A(t,e,n){return void 0===n&&(n=!0),!1!==n?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var P=864e5;function E(t){var e=t.defaultHour,n=t.defaultMinute,r=t.defaultSeconds;if(void 0!==t.minDate){var i=t.minDate.getHours(),o=t.minDate.getMinutes(),a=t.minDate.getSeconds();e<i&&(e=i),e===i&&n<o&&(n=o),e===i&&n===o&&r<a&&(r=t.minDate.getSeconds())}if(void 0!==t.maxDate){var s=t.maxDate.getHours(),c=t.maxDate.getMinutes();(e=Math.min(e,s))===s&&(n=Math.min(c,n)),e===s&&n===c&&(r=t.maxDate.getSeconds())}return{hours:e,minutes:n,seconds:r}}function x(p,v){var y={config:t(t({},r),C.defaultConfig),l10n:i};function x(t){return t.bind(y)}function S(){var t=y.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==y.calendarContainer&&(y.calendarContainer.style.visibility="hidden",y.calendarContainer.style.display="block"),void 0!==y.daysContainer){var e=(y.days.offsetWidth+1)*t.showMonths;y.daysContainer.style.width=e+"px",y.calendarContainer.style.width=e+(void 0!==y.weekWrapper?y.weekWrapper.offsetWidth:0)+"px",y.calendarContainer.style.removeProperty("visibility"),y.calendarContainer.style.removeProperty("display")}}))}function D(t){if(0===y.selectedDates.length){var e=void 0===y.config.minDate||A(new Date,y.config.minDate)>=0?new Date:new Date(y.config.minDate.getTime()),n=E(y.config);e.setHours(n.hours,n.minutes,n.seconds,e.getMilliseconds()),y.selectedDates=[e],y.latestSelectedDateObj=e}void 0!==t&&"blur"!==t.type&&function(t){t.preventDefault();var e="keydown"===t.type,n=f(t),r=n;void 0!==y.amPM&&n===y.amPM&&(y.amPM.textContent=y.l10n.amPM[a(y.amPM.textContent===y.l10n.amPM[0])]);var i=parseFloat(r.getAttribute("min")),s=parseFloat(r.getAttribute("max")),c=parseFloat(r.getAttribute("step")),u=parseInt(r.value,10),d=t.delta||(e?38===t.which?1:-1:0),l=u+c*d;if(void 0!==r.value&&2===r.value.length){var h=r===y.hourElement,p=r===y.minuteElement;l<i?(l=s+l+a(!h)+(a(h)&&a(!y.amPM)),p&&L(void 0,-1,y.hourElement)):l>s&&(l=r===y.hourElement?l-s-a(!y.amPM):i,p&&L(void 0,1,y.hourElement)),y.amPM&&h&&(1===c?l+u===23:Math.abs(l-u)>c)&&(y.amPM.textContent=y.l10n.amPM[a(y.amPM.textContent===y.l10n.amPM[0])]),r.value=o(l)}}(t);var r=y._input.value;I(),wt(),y._input.value!==r&&y._debouncedChange()}function I(){if(void 0!==y.hourElement&&void 0!==y.minuteElement){var t,e,n=(parseInt(y.hourElement.value.slice(-2),10)||0)%24,r=(parseInt(y.minuteElement.value,10)||0)%60,i=void 0!==y.secondElement?(parseInt(y.secondElement.value,10)||0)%60:0;void 0!==y.amPM&&(t=n,e=y.amPM.textContent,n=t%12+12*a(e===y.l10n.amPM[1]));var o=void 0!==y.config.minTime||y.config.minDate&&y.minDateHasTime&&y.latestSelectedDateObj&&0===A(y.latestSelectedDateObj,y.config.minDate,!0);if(void 0!==y.config.maxTime||y.config.maxDate&&y.maxDateHasTime&&y.latestSelectedDateObj&&0===A(y.latestSelectedDateObj,y.config.maxDate,!0)){var s=void 0!==y.config.maxTime?y.config.maxTime:y.config.maxDate;(n=Math.min(n,s.getHours()))===s.getHours()&&(r=Math.min(r,s.getMinutes())),r===s.getMinutes()&&(i=Math.min(i,s.getSeconds()))}if(o){var c=void 0!==y.config.minTime?y.config.minTime:y.config.minDate;(n=Math.max(n,c.getHours()))===c.getHours()&&r<c.getMinutes()&&(r=c.getMinutes()),r===c.getMinutes()&&(i=Math.max(i,c.getSeconds()))}T(n,r,i)}}function R(t){var e=t||y.latestSelectedDateObj;e&&T(e.getHours(),e.getMinutes(),e.getSeconds())}function T(t,e,n){void 0!==y.latestSelectedDateObj&&y.latestSelectedDateObj.setHours(t%24,e,n||0,0),y.hourElement&&y.minuteElement&&!y.isMobile&&(y.hourElement.value=o(y.config.time_24hr?t:(12+t)%12+12*a(t%12==0)),y.minuteElement.value=o(e),void 0!==y.amPM&&(y.amPM.textContent=y.l10n.amPM[a(t>=12)]),void 0!==y.secondElement&&(y.secondElement.value=o(n)))}function _(t){var e=f(t),n=parseInt(e.value)+(t.delta||0);(n/1e3>1||"Enter"===t.key&&!/[^\d]/.test(n.toString()))&&X(n)}function k(t,e,n,r){return e instanceof Array?e.forEach((function(e){return k(t,e,n,r)})):t instanceof Array?t.forEach((function(t){return k(t,e,n,r)})):(t.addEventListener(e,n,r),void y._handlers.push({remove:function(){return t.removeEventListener(e,n)}}))}function F(){pt("onChange")}function M(t,e){var n=void 0!==t?y.parseDate(t):y.latestSelectedDateObj||(y.config.minDate&&y.config.minDate>y.now?y.config.minDate:y.config.maxDate&&y.config.maxDate<y.now?y.config.maxDate:y.now),r=y.currentYear,i=y.currentMonth;try{void 0!==n&&(y.currentYear=n.getFullYear(),y.currentMonth=n.getMonth())}catch(t){t.message="Invalid date supplied: "+n,y.config.errorHandler(t)}e&&y.currentYear!==r&&(pt("onYearChange"),W()),!e||y.currentYear===r&&y.currentMonth===i||pt("onMonthChange"),y.redraw()}function O(t){var e=f(t);~e.className.indexOf("arrow")&&L(t,e.classList.contains("arrowUp")?1:-1)}function L(t,e,n){var r=t&&f(t),i=n||r&&r.parentNode&&r.parentNode.firstChild,o=gt("increment");o.delta=e,i&&i.dispatchEvent(o)}function N(t,e,n,r){var i=Z(e,!0),o=d("span","flatpickr-day "+t,e.getDate().toString());return o.dateObj=e,o.$i=r,o.setAttribute("aria-label",y.formatDate(e,y.config.ariaDateFormat)),-1===t.indexOf("hidden")&&0===A(e,y.now)&&(y.todayDateElem=o,o.classList.add("today"),o.setAttribute("aria-current","date")),i?(o.tabIndex=-1,vt(e)&&(o.classList.add("selected"),y.selectedDateElem=o,"range"===y.config.mode&&(u(o,"startRange",y.selectedDates[0]&&0===A(e,y.selectedDates[0],!0)),u(o,"endRange",y.selectedDates[1]&&0===A(e,y.selectedDates[1],!0)),"nextMonthDay"===t&&o.classList.add("inRange")))):o.classList.add("flatpickr-disabled"),"range"===y.config.mode&&function(t){return!("range"!==y.config.mode||y.selectedDates.length<2)&&A(t,y.selectedDates[0])>=0&&A(t,y.selectedDates[1])<=0}(e)&&!vt(e)&&o.classList.add("inRange"),y.weekNumbers&&1===y.config.showMonths&&"prevMonthDay"!==t&&n%7==1&&y.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+y.config.getWeek(e)+"</span>"),pt("onDayCreate",o),o}function V(t){t.focus(),"range"===y.config.mode&&nt(t)}function B(t){for(var e=t>0?0:y.config.showMonths-1,n=t>0?y.config.showMonths:-1,r=e;r!=n;r+=t)for(var i=y.daysContainer.children[r],o=t>0?0:i.children.length-1,a=t>0?i.children.length:-1,s=o;s!=a;s+=t){var c=i.children[s];if(-1===c.className.indexOf("hidden")&&Z(c.dateObj))return c}}function U(t,e){var n=Q(document.activeElement||document.body),r=void 0!==t?t:n?document.activeElement:void 0!==y.selectedDateElem&&Q(y.selectedDateElem)?y.selectedDateElem:void 0!==y.todayDateElem&&Q(y.todayDateElem)?y.todayDateElem:B(e>0?1:-1);void 0===r?y._input.focus():n?function(t,e){for(var n=-1===t.className.indexOf("Month")?t.dateObj.getMonth():y.currentMonth,r=e>0?y.config.showMonths:-1,i=e>0?1:-1,o=n-y.currentMonth;o!=r;o+=i)for(var a=y.daysContainer.children[o],s=n-y.currentMonth===o?t.$i+e:e<0?a.children.length-1:0,c=a.children.length,u=s;u>=0&&u<c&&u!=(e>0?c:-1);u+=i){var d=a.children[u];if(-1===d.className.indexOf("hidden")&&Z(d.dateObj)&&Math.abs(t.$i-u)>=Math.abs(e))return V(d)}y.changeMonth(i),U(B(i),0)}(r,e):V(r)}function j(t,e){for(var n=(new Date(t,e,1).getDay()-y.l10n.firstDayOfWeek+7)%7,r=y.utils.getDaysInMonth((e-1+12)%12,t),i=y.utils.getDaysInMonth(e,t),o=window.document.createDocumentFragment(),a=y.config.showMonths>1,s=a?"prevMonthDay hidden":"prevMonthDay",c=a?"nextMonthDay hidden":"nextMonthDay",u=r+1-n,l=0;u<=r;u++,l++)o.appendChild(N(s,new Date(t,e-1,u),u,l));for(u=1;u<=i;u++,l++)o.appendChild(N("",new Date(t,e,u),u,l));for(var h=i+1;h<=42-n&&(1===y.config.showMonths||l%7!=0);h++,l++)o.appendChild(N(c,new Date(t,e+1,h%i),h,l));var f=d("div","dayContainer");return f.appendChild(o),f}function H(){if(void 0!==y.daysContainer){l(y.daysContainer),y.weekNumbers&&l(y.weekNumbers);for(var t=document.createDocumentFragment(),e=0;e<y.config.showMonths;e++){var n=new Date(y.currentYear,y.currentMonth,1);n.setMonth(y.currentMonth+e),t.appendChild(j(n.getFullYear(),n.getMonth()))}y.daysContainer.appendChild(t),y.days=y.daysContainer.firstChild,"range"===y.config.mode&&1===y.selectedDates.length&&nt()}}function W(){if(!(y.config.showMonths>1||"dropdown"!==y.config.monthSelectorType)){var t=function(t){return!(void 0!==y.config.minDate&&y.currentYear===y.config.minDate.getFullYear()&&t<y.config.minDate.getMonth()||void 0!==y.config.maxDate&&y.currentYear===y.config.maxDate.getFullYear()&&t>y.config.maxDate.getMonth())};y.monthsDropdownContainer.tabIndex=-1,y.monthsDropdownContainer.innerHTML="";for(var e=0;e<12;e++)if(t(e)){var n=d("option","flatpickr-monthDropdown-month");n.value=new Date(y.currentYear,e).getMonth().toString(),n.textContent=g(e,y.config.shorthandCurrentMonth,y.l10n),n.tabIndex=-1,y.currentMonth===e&&(n.selected=!0),y.monthsDropdownContainer.appendChild(n)}}}function $(){var t,e=d("div","flatpickr-month"),n=window.document.createDocumentFragment();y.config.showMonths>1||"static"===y.config.monthSelectorType?t=d("span","cur-month"):(y.monthsDropdownContainer=d("select","flatpickr-monthDropdown-months"),y.monthsDropdownContainer.setAttribute("aria-label",y.l10n.monthAriaLabel),k(y.monthsDropdownContainer,"change",(function(t){var e=f(t),n=parseInt(e.value,10);y.changeMonth(n-y.currentMonth),pt("onMonthChange")})),W(),t=y.monthsDropdownContainer);var r=h("cur-year",{tabindex:"-1"}),i=r.getElementsByTagName("input")[0];i.setAttribute("aria-label",y.l10n.yearAriaLabel),y.config.minDate&&i.setAttribute("min",y.config.minDate.getFullYear().toString()),y.config.maxDate&&(i.setAttribute("max",y.config.maxDate.getFullYear().toString()),i.disabled=!!y.config.minDate&&y.config.minDate.getFullYear()===y.config.maxDate.getFullYear());var o=d("div","flatpickr-current-month");return o.appendChild(t),o.appendChild(r),n.appendChild(o),e.appendChild(n),{container:e,yearElement:i,monthElement:t}}function Y(){l(y.monthNav),y.monthNav.appendChild(y.prevMonthNav),y.config.showMonths&&(y.yearElements=[],y.monthElements=[]);for(var t=y.config.showMonths;t--;){var e=$();y.yearElements.push(e.yearElement),y.monthElements.push(e.monthElement),y.monthNav.appendChild(e.container)}y.monthNav.appendChild(y.nextMonthNav)}function q(){y.weekdayContainer?l(y.weekdayContainer):y.weekdayContainer=d("div","flatpickr-weekdays");for(var t=y.config.showMonths;t--;){var e=d("div","flatpickr-weekdaycontainer");y.weekdayContainer.appendChild(e)}return G(),y.weekdayContainer}function G(){if(y.weekdayContainer){var t=y.l10n.firstDayOfWeek,n=e(y.l10n.weekdays.shorthand);t>0&&t<n.length&&(n=e(n.splice(t,n.length),n.splice(0,t)));for(var r=y.config.showMonths;r--;)y.weekdayContainer.children[r].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+n.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function z(t,e){void 0===e&&(e=!0);var n=e?t:t-y.currentMonth;n<0&&!0===y._hidePrevMonthArrow||n>0&&!0===y._hideNextMonthArrow||(y.currentMonth+=n,(y.currentMonth<0||y.currentMonth>11)&&(y.currentYear+=y.currentMonth>11?1:-1,y.currentMonth=(y.currentMonth+12)%12,pt("onYearChange"),W()),H(),pt("onMonthChange"),mt())}function K(t){return!(!y.config.appendTo||!y.config.appendTo.contains(t))||y.calendarContainer.contains(t)}function J(t){if(y.isOpen&&!y.config.inline){var e=f(t),n=K(e),r=e===y.input||e===y.altInput||y.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(y.input)||~t.path.indexOf(y.altInput)),i="blur"===t.type?r&&t.relatedTarget&&!K(t.relatedTarget):!r&&!n&&!K(t.relatedTarget),o=!y.config.ignoredFocusElements.some((function(t){return t.contains(e)}));i&&o&&(void 0!==y.timeContainer&&void 0!==y.minuteElement&&void 0!==y.hourElement&&""!==y.input.value&&void 0!==y.input.value&&D(),y.close(),y.config&&"range"===y.config.mode&&1===y.selectedDates.length&&(y.clear(!1),y.redraw()))}}function X(t){if(!(!t||y.config.minDate&&t<y.config.minDate.getFullYear()||y.config.maxDate&&t>y.config.maxDate.getFullYear())){var e=t,n=y.currentYear!==e;y.currentYear=e||y.currentYear,y.config.maxDate&&y.currentYear===y.config.maxDate.getFullYear()?y.currentMonth=Math.min(y.config.maxDate.getMonth(),y.currentMonth):y.config.minDate&&y.currentYear===y.config.minDate.getFullYear()&&(y.currentMonth=Math.max(y.config.minDate.getMonth(),y.currentMonth)),n&&(y.redraw(),pt("onYearChange"),W())}}function Z(t,e){var n;void 0===e&&(e=!0);var r=y.parseDate(t,void 0,e);if(y.config.minDate&&r&&A(r,y.config.minDate,void 0!==e?e:!y.minDateHasTime)<0||y.config.maxDate&&r&&A(r,y.config.maxDate,void 0!==e?e:!y.maxDateHasTime)>0)return!1;if(!y.config.enable&&0===y.config.disable.length)return!0;if(void 0===r)return!1;for(var i=!!y.config.enable,o=null!==(n=y.config.enable)&&void 0!==n?n:y.config.disable,a=0,s=void 0;a<o.length;a++){if("function"==typeof(s=o[a])&&s(r))return i;if(s instanceof Date&&void 0!==r&&s.getTime()===r.getTime())return i;if("string"==typeof s){var c=y.parseDate(s,void 0,!0);return c&&c.getTime()===r.getTime()?i:!i}if("object"==typeof s&&void 0!==r&&s.from&&s.to&&r.getTime()>=s.from.getTime()&&r.getTime()<=s.to.getTime())return i}return!i}function Q(t){return void 0!==y.daysContainer&&-1===t.className.indexOf("hidden")&&-1===t.className.indexOf("flatpickr-disabled")&&y.daysContainer.contains(t)}function tt(t){t.target!==y._input||!(y.selectedDates.length>0||y._input.value.length>0)||t.relatedTarget&&K(t.relatedTarget)||y.setDate(y._input.value,!0,t.target===y.altInput?y.config.altFormat:y.config.dateFormat)}function et(t){var e=f(t),n=y.config.wrap?p.contains(e):e===y._input,r=y.config.allowInput,i=y.isOpen&&(!r||!n),o=y.config.inline&&n&&!r;if(13===t.keyCode&&n){if(r)return y.setDate(y._input.value,!0,e===y.altInput?y.config.altFormat:y.config.dateFormat),e.blur();y.open()}else if(K(e)||i||o){var a=!!y.timeContainer&&y.timeContainer.contains(e);switch(t.keyCode){case 13:a?(t.preventDefault(),D(),ut()):dt(t);break;case 27:t.preventDefault(),ut();break;case 8:case 46:n&&!y.config.allowInput&&(t.preventDefault(),y.clear());break;case 37:case 39:if(a||n)y.hourElement&&y.hourElement.focus();else if(t.preventDefault(),void 0!==y.daysContainer&&(!1===r||document.activeElement&&Q(document.activeElement))){var s=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),z(s),U(B(1),0)):U(void 0,s)}break;case 38:case 40:t.preventDefault();var c=40===t.keyCode?1:-1;y.daysContainer&&void 0!==e.$i||e===y.input||e===y.altInput?t.ctrlKey?(t.stopPropagation(),X(y.currentYear-c),U(B(1),0)):a||U(void 0,7*c):e===y.currentYearElement?X(y.currentYear-c):y.config.enableTime&&(!a&&y.hourElement&&y.hourElement.focus(),D(t),y._debouncedChange());break;case 9:if(a){var u=[y.hourElement,y.minuteElement,y.secondElement,y.amPM].concat(y.pluginElements).filter((function(t){return t})),d=u.indexOf(e);if(-1!==d){var l=u[d+(t.shiftKey?-1:1)];t.preventDefault(),(l||y._input).focus()}}else!y.config.noCalendar&&y.daysContainer&&y.daysContainer.contains(e)&&t.shiftKey&&(t.preventDefault(),y._input.focus())}}if(void 0!==y.amPM&&e===y.amPM)switch(t.key){case y.l10n.amPM[0].charAt(0):case y.l10n.amPM[0].charAt(0).toLowerCase():y.amPM.textContent=y.l10n.amPM[0],I(),wt();break;case y.l10n.amPM[1].charAt(0):case y.l10n.amPM[1].charAt(0).toLowerCase():y.amPM.textContent=y.l10n.amPM[1],I(),wt()}(n||K(e))&&pt("onKeyDown",t)}function nt(t){if(1===y.selectedDates.length&&(!t||t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled"))){for(var e=t?t.dateObj.getTime():y.days.firstElementChild.dateObj.getTime(),n=y.parseDate(y.selectedDates[0],void 0,!0).getTime(),r=Math.min(e,y.selectedDates[0].getTime()),i=Math.max(e,y.selectedDates[0].getTime()),o=!1,a=0,s=0,c=r;c<i;c+=P)Z(new Date(c),!0)||(o=o||c>r&&c<i,c<n&&(!a||c>a)?a=c:c>n&&(!s||c<s)&&(s=c));for(var u=0;u<y.config.showMonths;u++)for(var d=y.daysContainer.children[u],l=function(r,i){var c,u,l,h=d.children[r],f=h.dateObj.getTime(),p=a>0&&f<a||s>0&&f>s;return p?(h.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((function(t){h.classList.remove(t)})),"continue"):o&&!p?"continue":(["startRange","inRange","endRange","notAllowed"].forEach((function(t){h.classList.remove(t)})),void(void 0!==t&&(t.classList.add(e<=y.selectedDates[0].getTime()?"startRange":"endRange"),n<e&&f===n?h.classList.add("startRange"):n>e&&f===n&&h.classList.add("endRange"),f>=a&&(0===s||f<=s)&&(u=n,l=e,(c=f)>Math.min(u,l)&&c<Math.max(u,l))&&h.classList.add("inRange"))))},h=0,f=d.children.length;h<f;h++)l(h)}}function rt(){!y.isOpen||y.config.static||y.config.inline||st()}function it(t){return function(e){var n=y.config["_"+t+"Date"]=y.parseDate(e,y.config.dateFormat),r=y.config["_"+("min"===t?"max":"min")+"Date"];void 0!==n&&(y["min"===t?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),y.selectedDates&&(y.selectedDates=y.selectedDates.filter((function(t){return Z(t)})),y.selectedDates.length||"min"!==t||R(n),wt()),y.daysContainer&&(ct(),void 0!==n?y.currentYearElement[t]=n.getFullYear().toString():y.currentYearElement.removeAttribute(t),y.currentYearElement.disabled=!!r&&void 0!==n&&r.getFullYear()===n.getFullYear())}}function ot(){return y.config.wrap?p.querySelector("[data-input]"):p}function at(){"object"!=typeof y.config.locale&&void 0===C.l10ns[y.config.locale]&&y.config.errorHandler(new Error("flatpickr: invalid locale "+y.config.locale)),y.l10n=t(t({},C.l10ns.default),"object"==typeof y.config.locale?y.config.locale:"default"!==y.config.locale?C.l10ns[y.config.locale]:void 0),m.K="("+y.l10n.amPM[0]+"|"+y.l10n.amPM[1]+"|"+y.l10n.amPM[0].toLowerCase()+"|"+y.l10n.amPM[1].toLowerCase()+")",void 0===t(t({},v),JSON.parse(JSON.stringify(p.dataset||{}))).time_24hr&&void 0===C.defaultConfig.time_24hr&&(y.config.time_24hr=y.l10n.time_24hr),y.formatDate=w(y),y.parseDate=b({config:y.config,l10n:y.l10n})}function st(t){if("function"!=typeof y.config.position){if(void 0!==y.calendarContainer){pt("onPreCalendarPosition");var e=t||y._positionElement,n=Array.prototype.reduce.call(y.calendarContainer.children,(function(t,e){return t+e.offsetHeight}),0),r=y.calendarContainer.offsetWidth,i=y.config.position.split(" "),o=i[0],a=i.length>1?i[1]:null,s=e.getBoundingClientRect(),c=window.innerHeight-s.bottom,d="above"===o||"below"!==o&&c<n&&s.top>n,l=window.pageYOffset+s.top+(d?-n-2:e.offsetHeight+2);if(u(y.calendarContainer,"arrowTop",!d),u(y.calendarContainer,"arrowBottom",d),!y.config.inline){var h=window.pageXOffset+s.left,f=!1,p=!1;"center"===a?(h-=(r-s.width)/2,f=!0):"right"===a&&(h-=r-s.width,p=!0),u(y.calendarContainer,"arrowLeft",!f&&!p),u(y.calendarContainer,"arrowCenter",f),u(y.calendarContainer,"arrowRight",p);var g=window.document.body.offsetWidth-(window.pageXOffset+s.right),v=h+r>window.document.body.offsetWidth,m=g+r>window.document.body.offsetWidth;if(u(y.calendarContainer,"rightMost",v),!y.config.static)if(y.calendarContainer.style.top=l+"px",v)if(m){var w=function(){for(var t=null,e=0;e<document.styleSheets.length;e++){var n=document.styleSheets[e];try{n.cssRules}catch(t){continue}t=n;break}return null!=t?t:(r=document.createElement("style"),document.head.appendChild(r),r.sheet);var r}();if(void 0===w)return;var b=window.document.body.offsetWidth,A=Math.max(0,b/2-r/2),P=w.cssRules.length,E="{left:"+s.left+"px;right:auto;}";u(y.calendarContainer,"rightMost",!1),u(y.calendarContainer,"centerMost",!0),w.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+E,P),y.calendarContainer.style.left=A+"px",y.calendarContainer.style.right="auto"}else y.calendarContainer.style.left="auto",y.calendarContainer.style.right=g+"px";else y.calendarContainer.style.left=h+"px",y.calendarContainer.style.right="auto"}}}else y.config.position(y,t)}function ct(){y.config.noCalendar||y.isMobile||(W(),mt(),H())}function ut(){y._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(y.close,0):y.close()}function dt(t){t.preventDefault(),t.stopPropagation();var e=function t(e,n){return n(e)?e:e.parentNode?t(e.parentNode,n):void 0}(f(t),(function(t){return t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")}));if(void 0!==e){var n=e,r=y.latestSelectedDateObj=new Date(n.dateObj.getTime()),i=(r.getMonth()<y.currentMonth||r.getMonth()>y.currentMonth+y.config.showMonths-1)&&"range"!==y.config.mode;if(y.selectedDateElem=n,"single"===y.config.mode)y.selectedDates=[r];else if("multiple"===y.config.mode){var o=vt(r);o?y.selectedDates.splice(parseInt(o),1):y.selectedDates.push(r)}else"range"===y.config.mode&&(2===y.selectedDates.length&&y.clear(!1,!1),y.latestSelectedDateObj=r,y.selectedDates.push(r),0!==A(r,y.selectedDates[0],!0)&&y.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()})));if(I(),i){var a=y.currentYear!==r.getFullYear();y.currentYear=r.getFullYear(),y.currentMonth=r.getMonth(),a&&(pt("onYearChange"),W()),pt("onMonthChange")}if(mt(),H(),wt(),i||"range"===y.config.mode||1!==y.config.showMonths?void 0!==y.selectedDateElem&&void 0===y.hourElement&&y.selectedDateElem&&y.selectedDateElem.focus():V(n),void 0!==y.hourElement&&void 0!==y.hourElement&&y.hourElement.focus(),y.config.closeOnSelect){var s="single"===y.config.mode&&!y.config.enableTime,c="range"===y.config.mode&&2===y.selectedDates.length&&!y.config.enableTime;(s||c)&&ut()}F()}}y.parseDate=b({config:y.config,l10n:y.l10n}),y._handlers=[],y.pluginElements=[],y.loadedPlugins=[],y._bind=k,y._setHoursFromDate=R,y._positionCalendar=st,y.changeMonth=z,y.changeYear=X,y.clear=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!0),y.input.value="",void 0!==y.altInput&&(y.altInput.value=""),void 0!==y.mobileInput&&(y.mobileInput.value=""),y.selectedDates=[],y.latestSelectedDateObj=void 0,!0===e&&(y.currentYear=y._initialDate.getFullYear(),y.currentMonth=y._initialDate.getMonth()),!0===y.config.enableTime){var n=E(y.config),r=n.hours,i=n.minutes,o=n.seconds;T(r,i,o)}y.redraw(),t&&pt("onChange")},y.close=function(){y.isOpen=!1,y.isMobile||(void 0!==y.calendarContainer&&y.calendarContainer.classList.remove("open"),void 0!==y._input&&y._input.classList.remove("active")),pt("onClose")},y._createElement=d,y.destroy=function(){void 0!==y.config&&pt("onDestroy");for(var t=y._handlers.length;t--;)y._handlers[t].remove();if(y._handlers=[],y.mobileInput)y.mobileInput.parentNode&&y.mobileInput.parentNode.removeChild(y.mobileInput),y.mobileInput=void 0;else if(y.calendarContainer&&y.calendarContainer.parentNode)if(y.config.static&&y.calendarContainer.parentNode){var e=y.calendarContainer.parentNode;if(e.lastChild&&e.removeChild(e.lastChild),e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}else y.calendarContainer.parentNode.removeChild(y.calendarContainer);y.altInput&&(y.input.type="text",y.altInput.parentNode&&y.altInput.parentNode.removeChild(y.altInput),delete y.altInput),y.input&&(y.input.type=y.input._type,y.input.classList.remove("flatpickr-input"),y.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(t){try{delete y[t]}catch(t){}}))},y.isEnabled=Z,y.jumpToDate=M,y.open=function(t,e){if(void 0===e&&(e=y._positionElement),!0===y.isMobile){if(t){t.preventDefault();var n=f(t);n&&n.blur()}return void 0!==y.mobileInput&&(y.mobileInput.focus(),y.mobileInput.click()),void pt("onOpen")}if(!y._input.disabled&&!y.config.inline){var r=y.isOpen;y.isOpen=!0,r||(y.calendarContainer.classList.add("open"),y._input.classList.add("active"),pt("onOpen"),st(e)),!0===y.config.enableTime&&!0===y.config.noCalendar&&(!1!==y.config.allowInput||void 0!==t&&y.timeContainer.contains(t.relatedTarget)||setTimeout((function(){return y.hourElement.select()}),50))}},y.redraw=ct,y.set=function(t,e){if(null!==t&&"object"==typeof t)for(var r in Object.assign(y.config,t),t)void 0!==lt[r]&&lt[r].forEach((function(t){return t()}));else y.config[t]=e,void 0!==lt[t]?lt[t].forEach((function(t){return t()})):n.indexOf(t)>-1&&(y.config[t]=c(e));y.redraw(),wt(!0)},y.setDate=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=y.config.dateFormat),0!==t&&!t||t instanceof Array&&0===t.length)return y.clear(e);ht(t,n),y.latestSelectedDateObj=y.selectedDates[y.selectedDates.length-1],y.redraw(),M(void 0,e),R(),0===y.selectedDates.length&&y.clear(!1),wt(e),e&&pt("onChange")},y.toggle=function(t){if(!0===y.isOpen)return y.close();y.open(t)};var lt={locale:[at,G],showMonths:[Y,S,q],minDate:[M],maxDate:[M],clickOpens:[function(){!0===y.config.clickOpens?(k(y._input,"focus",y.open),k(y._input,"click",y.open)):(y._input.removeEventListener("focus",y.open),y._input.removeEventListener("click",y.open))}]};function ht(t,e){var n=[];if(t instanceof Array)n=t.map((function(t){return y.parseDate(t,e)}));else if(t instanceof Date||"number"==typeof t)n=[y.parseDate(t,e)];else if("string"==typeof t)switch(y.config.mode){case"single":case"time":n=[y.parseDate(t,e)];break;case"multiple":n=t.split(y.config.conjunction).map((function(t){return y.parseDate(t,e)}));break;case"range":n=t.split(y.l10n.rangeSeparator).map((function(t){return y.parseDate(t,e)}))}else y.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(t)));y.selectedDates=y.config.allowInvalidPreload?n:n.filter((function(t){return t instanceof Date&&Z(t,!1)})),"range"===y.config.mode&&y.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()}))}function ft(t){return t.slice().map((function(t){return"string"==typeof t||"number"==typeof t||t instanceof Date?y.parseDate(t,void 0,!0):t&&"object"==typeof t&&t.from&&t.to?{from:y.parseDate(t.from,void 0),to:y.parseDate(t.to,void 0)}:t})).filter((function(t){return t}))}function pt(t,e){if(void 0!==y.config){var n=y.config[t];if(void 0!==n&&n.length>0)for(var r=0;n[r]&&r<n.length;r++)n[r](y.selectedDates,y.input.value,y,e);"onChange"===t&&(y.input.dispatchEvent(gt("change")),y.input.dispatchEvent(gt("input")))}}function gt(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function vt(t){for(var e=0;e<y.selectedDates.length;e++)if(0===A(y.selectedDates[e],t))return""+e;return!1}function mt(){y.config.noCalendar||y.isMobile||!y.monthNav||(y.yearElements.forEach((function(t,e){var n=new Date(y.currentYear,y.currentMonth,1);n.setMonth(y.currentMonth+e),y.config.showMonths>1||"static"===y.config.monthSelectorType?y.monthElements[e].textContent=g(n.getMonth(),y.config.shorthandCurrentMonth,y.l10n)+" ":y.monthsDropdownContainer.value=n.getMonth().toString(),t.value=n.getFullYear().toString()})),y._hidePrevMonthArrow=void 0!==y.config.minDate&&(y.currentYear===y.config.minDate.getFullYear()?y.currentMonth<=y.config.minDate.getMonth():y.currentYear<y.config.minDate.getFullYear()),y._hideNextMonthArrow=void 0!==y.config.maxDate&&(y.currentYear===y.config.maxDate.getFullYear()?y.currentMonth+1>y.config.maxDate.getMonth():y.currentYear>y.config.maxDate.getFullYear()))}function yt(t){return y.selectedDates.map((function(e){return y.formatDate(e,t)})).filter((function(t,e,n){return"range"!==y.config.mode||y.config.enableTime||n.indexOf(t)===e})).join("range"!==y.config.mode?y.config.conjunction:y.l10n.rangeSeparator)}function wt(t){void 0===t&&(t=!0),void 0!==y.mobileInput&&y.mobileFormatStr&&(y.mobileInput.value=void 0!==y.latestSelectedDateObj?y.formatDate(y.latestSelectedDateObj,y.mobileFormatStr):""),y.input.value=yt(y.config.dateFormat),void 0!==y.altInput&&(y.altInput.value=yt(y.config.altFormat)),!1!==t&&pt("onValueUpdate")}function bt(t){var e=f(t),n=y.prevMonthNav.contains(e),r=y.nextMonthNav.contains(e);n||r?z(n?-1:1):y.yearElements.indexOf(e)>=0?e.select():e.classList.contains("arrowUp")?y.changeYear(y.currentYear+1):e.classList.contains("arrowDown")&&y.changeYear(y.currentYear-1)}return function(){y.element=y.input=p,y.isOpen=!1,function(){var e=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],i=t(t({},JSON.parse(JSON.stringify(p.dataset||{}))),v),o={};y.config.parseDate=i.parseDate,y.config.formatDate=i.formatDate,Object.defineProperty(y.config,"enable",{get:function(){return y.config._enable},set:function(t){y.config._enable=ft(t)}}),Object.defineProperty(y.config,"disable",{get:function(){return y.config._disable},set:function(t){y.config._disable=ft(t)}});var a="time"===i.mode;if(!i.dateFormat&&(i.enableTime||a)){var s=C.defaultConfig.dateFormat||r.dateFormat;o.dateFormat=i.noCalendar||a?"H:i"+(i.enableSeconds?":S":""):s+" H:i"+(i.enableSeconds?":S":"")}if(i.altInput&&(i.enableTime||a)&&!i.altFormat){var u=C.defaultConfig.altFormat||r.altFormat;o.altFormat=i.noCalendar||a?"h:i"+(i.enableSeconds?":S K":" K"):u+" h:i"+(i.enableSeconds?":S":"")+" K"}Object.defineProperty(y.config,"minDate",{get:function(){return y.config._minDate},set:it("min")}),Object.defineProperty(y.config,"maxDate",{get:function(){return y.config._maxDate},set:it("max")});var d=function(t){return function(e){y.config["min"===t?"_minTime":"_maxTime"]=y.parseDate(e,"H:i:S")}};Object.defineProperty(y.config,"minTime",{get:function(){return y.config._minTime},set:d("min")}),Object.defineProperty(y.config,"maxTime",{get:function(){return y.config._maxTime},set:d("max")}),"time"===i.mode&&(y.config.noCalendar=!0,y.config.enableTime=!0),Object.assign(y.config,o,i);for(var l=0;l<e.length;l++)y.config[e[l]]=!0===y.config[e[l]]||"true"===y.config[e[l]];for(n.filter((function(t){return void 0!==y.config[t]})).forEach((function(t){y.config[t]=c(y.config[t]||[]).map(x)})),y.isMobile=!y.config.disableMobile&&!y.config.inline&&"single"===y.config.mode&&!y.config.disable.length&&!y.config.enable&&!y.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),l=0;l<y.config.plugins.length;l++){var h=y.config.plugins[l](y)||{};for(var f in h)n.indexOf(f)>-1?y.config[f]=c(h[f]).map(x).concat(y.config[f]):void 0===i[f]&&(y.config[f]=h[f])}i.altInputClass||(y.config.altInputClass=ot().className+" "+y.config.altInputClass),pt("onParseConfig")}(),at(),y.input=ot(),y.input?(y.input._type=y.input.type,y.input.type="text",y.input.classList.add("flatpickr-input"),y._input=y.input,y.config.altInput&&(y.altInput=d(y.input.nodeName,y.config.altInputClass),y._input=y.altInput,y.altInput.placeholder=y.input.placeholder,y.altInput.disabled=y.input.disabled,y.altInput.required=y.input.required,y.altInput.tabIndex=y.input.tabIndex,y.altInput.type="text",y.input.setAttribute("type","hidden"),!y.config.static&&y.input.parentNode&&y.input.parentNode.insertBefore(y.altInput,y.input.nextSibling)),y.config.allowInput||y._input.setAttribute("readonly","readonly"),y._positionElement=y.config.positionElement||y._input):y.config.errorHandler(new Error("Invalid input element specified")),function(){y.selectedDates=[],y.now=y.parseDate(y.config.now)||new Date;var t=y.config.defaultDate||("INPUT"!==y.input.nodeName&&"TEXTAREA"!==y.input.nodeName||!y.input.placeholder||y.input.value!==y.input.placeholder?y.input.value:null);t&&ht(t,y.config.dateFormat),y._initialDate=y.selectedDates.length>0?y.selectedDates[0]:y.config.minDate&&y.config.minDate.getTime()>y.now.getTime()?y.config.minDate:y.config.maxDate&&y.config.maxDate.getTime()<y.now.getTime()?y.config.maxDate:y.now,y.currentYear=y._initialDate.getFullYear(),y.currentMonth=y._initialDate.getMonth(),y.selectedDates.length>0&&(y.latestSelectedDateObj=y.selectedDates[0]),void 0!==y.config.minTime&&(y.config.minTime=y.parseDate(y.config.minTime,"H:i")),void 0!==y.config.maxTime&&(y.config.maxTime=y.parseDate(y.config.maxTime,"H:i")),y.minDateHasTime=!!y.config.minDate&&(y.config.minDate.getHours()>0||y.config.minDate.getMinutes()>0||y.config.minDate.getSeconds()>0),y.maxDateHasTime=!!y.config.maxDate&&(y.config.maxDate.getHours()>0||y.config.maxDate.getMinutes()>0||y.config.maxDate.getSeconds()>0)}(),y.utils={getDaysInMonth:function(t,e){return void 0===t&&(t=y.currentMonth),void 0===e&&(e=y.currentYear),1===t&&(e%4==0&&e%100!=0||e%400==0)?29:y.l10n.daysInMonth[t]}},y.isMobile||function(){var t=window.document.createDocumentFragment();if(y.calendarContainer=d("div","flatpickr-calendar"),y.calendarContainer.tabIndex=-1,!y.config.noCalendar){if(t.appendChild((y.monthNav=d("div","flatpickr-months"),y.yearElements=[],y.monthElements=[],y.prevMonthNav=d("span","flatpickr-prev-month"),y.prevMonthNav.innerHTML=y.config.prevArrow,y.nextMonthNav=d("span","flatpickr-next-month"),y.nextMonthNav.innerHTML=y.config.nextArrow,Y(),Object.defineProperty(y,"_hidePrevMonthArrow",{get:function(){return y.__hidePrevMonthArrow},set:function(t){y.__hidePrevMonthArrow!==t&&(u(y.prevMonthNav,"flatpickr-disabled",t),y.__hidePrevMonthArrow=t)}}),Object.defineProperty(y,"_hideNextMonthArrow",{get:function(){return y.__hideNextMonthArrow},set:function(t){y.__hideNextMonthArrow!==t&&(u(y.nextMonthNav,"flatpickr-disabled",t),y.__hideNextMonthArrow=t)}}),y.currentYearElement=y.yearElements[0],mt(),y.monthNav)),y.innerContainer=d("div","flatpickr-innerContainer"),y.config.weekNumbers){var e=function(){y.calendarContainer.classList.add("hasWeeks");var t=d("div","flatpickr-weekwrapper");t.appendChild(d("span","flatpickr-weekday",y.l10n.weekAbbreviation));var e=d("div","flatpickr-weeks");return t.appendChild(e),{weekWrapper:t,weekNumbers:e}}(),n=e.weekWrapper,r=e.weekNumbers;y.innerContainer.appendChild(n),y.weekNumbers=r,y.weekWrapper=n}y.rContainer=d("div","flatpickr-rContainer"),y.rContainer.appendChild(q()),y.daysContainer||(y.daysContainer=d("div","flatpickr-days"),y.daysContainer.tabIndex=-1),H(),y.rContainer.appendChild(y.daysContainer),y.innerContainer.appendChild(y.rContainer),t.appendChild(y.innerContainer)}y.config.enableTime&&t.appendChild(function(){y.calendarContainer.classList.add("hasTime"),y.config.noCalendar&&y.calendarContainer.classList.add("noCalendar");var t=E(y.config);y.timeContainer=d("div","flatpickr-time"),y.timeContainer.tabIndex=-1;var e=d("span","flatpickr-time-separator",":"),n=h("flatpickr-hour",{"aria-label":y.l10n.hourAriaLabel});y.hourElement=n.getElementsByTagName("input")[0];var r=h("flatpickr-minute",{"aria-label":y.l10n.minuteAriaLabel});if(y.minuteElement=r.getElementsByTagName("input")[0],y.hourElement.tabIndex=y.minuteElement.tabIndex=-1,y.hourElement.value=o(y.latestSelectedDateObj?y.latestSelectedDateObj.getHours():y.config.time_24hr?t.hours:function(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}(t.hours)),y.minuteElement.value=o(y.latestSelectedDateObj?y.latestSelectedDateObj.getMinutes():t.minutes),y.hourElement.setAttribute("step",y.config.hourIncrement.toString()),y.minuteElement.setAttribute("step",y.config.minuteIncrement.toString()),y.hourElement.setAttribute("min",y.config.time_24hr?"0":"1"),y.hourElement.setAttribute("max",y.config.time_24hr?"23":"12"),y.hourElement.setAttribute("maxlength","2"),y.minuteElement.setAttribute("min","0"),y.minuteElement.setAttribute("max","59"),y.minuteElement.setAttribute("maxlength","2"),y.timeContainer.appendChild(n),y.timeContainer.appendChild(e),y.timeContainer.appendChild(r),y.config.time_24hr&&y.timeContainer.classList.add("time24hr"),y.config.enableSeconds){y.timeContainer.classList.add("hasSeconds");var i=h("flatpickr-second");y.secondElement=i.getElementsByTagName("input")[0],y.secondElement.value=o(y.latestSelectedDateObj?y.latestSelectedDateObj.getSeconds():t.seconds),y.secondElement.setAttribute("step",y.minuteElement.getAttribute("step")),y.secondElement.setAttribute("min","0"),y.secondElement.setAttribute("max","59"),y.secondElement.setAttribute("maxlength","2"),y.timeContainer.appendChild(d("span","flatpickr-time-separator",":")),y.timeContainer.appendChild(i)}return y.config.time_24hr||(y.amPM=d("span","flatpickr-am-pm",y.l10n.amPM[a((y.latestSelectedDateObj?y.hourElement.value:y.config.defaultHour)>11)]),y.amPM.title=y.l10n.toggleTitle,y.amPM.tabIndex=-1,y.timeContainer.appendChild(y.amPM)),y.timeContainer}()),u(y.calendarContainer,"rangeMode","range"===y.config.mode),u(y.calendarContainer,"animate",!0===y.config.animate),u(y.calendarContainer,"multiMonth",y.config.showMonths>1),y.calendarContainer.appendChild(t);var i=void 0!==y.config.appendTo&&void 0!==y.config.appendTo.nodeType;if((y.config.inline||y.config.static)&&(y.calendarContainer.classList.add(y.config.inline?"inline":"static"),y.config.inline&&(!i&&y.element.parentNode?y.element.parentNode.insertBefore(y.calendarContainer,y._input.nextSibling):void 0!==y.config.appendTo&&y.config.appendTo.appendChild(y.calendarContainer)),y.config.static)){var s=d("div","flatpickr-wrapper");y.element.parentNode&&y.element.parentNode.insertBefore(s,y.element),s.appendChild(y.element),y.altInput&&s.appendChild(y.altInput),s.appendChild(y.calendarContainer)}y.config.static||y.config.inline||(void 0!==y.config.appendTo?y.config.appendTo:window.document.body).appendChild(y.calendarContainer)}(),function(){if(y.config.wrap&&["open","close","toggle","clear"].forEach((function(t){Array.prototype.forEach.call(y.element.querySelectorAll("[data-"+t+"]"),(function(e){return k(e,"click",y[t])}))})),y.isMobile)!function(){var t=y.config.enableTime?y.config.noCalendar?"time":"datetime-local":"date";y.mobileInput=d("input",y.input.className+" flatpickr-mobile"),y.mobileInput.tabIndex=1,y.mobileInput.type=t,y.mobileInput.disabled=y.input.disabled,y.mobileInput.required=y.input.required,y.mobileInput.placeholder=y.input.placeholder,y.mobileFormatStr="datetime-local"===t?"Y-m-d\\TH:i:S":"date"===t?"Y-m-d":"H:i:S",y.selectedDates.length>0&&(y.mobileInput.defaultValue=y.mobileInput.value=y.formatDate(y.selectedDates[0],y.mobileFormatStr)),y.config.minDate&&(y.mobileInput.min=y.formatDate(y.config.minDate,"Y-m-d")),y.config.maxDate&&(y.mobileInput.max=y.formatDate(y.config.maxDate,"Y-m-d")),y.input.getAttribute("step")&&(y.mobileInput.step=String(y.input.getAttribute("step"))),y.input.type="hidden",void 0!==y.altInput&&(y.altInput.type="hidden");try{y.input.parentNode&&y.input.parentNode.insertBefore(y.mobileInput,y.input.nextSibling)}catch(t){}k(y.mobileInput,"change",(function(t){y.setDate(f(t).value,!1,y.mobileFormatStr),pt("onChange"),pt("onClose")}))}();else{var t=s(rt,50);y._debouncedChange=s(F,300),y.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&k(y.daysContainer,"mouseover",(function(t){"range"===y.config.mode&&nt(f(t))})),k(window.document.body,"keydown",et),y.config.inline||y.config.static||k(window,"resize",t),void 0!==window.ontouchstart?k(window.document,"touchstart",J):k(window.document,"mousedown",J),k(window.document,"focus",J,{capture:!0}),!0===y.config.clickOpens&&(k(y._input,"focus",y.open),k(y._input,"click",y.open)),void 0!==y.daysContainer&&(k(y.monthNav,"click",bt),k(y.monthNav,["keyup","increment"],_),k(y.daysContainer,"click",dt)),void 0!==y.timeContainer&&void 0!==y.minuteElement&&void 0!==y.hourElement&&(k(y.timeContainer,["increment"],D),k(y.timeContainer,"blur",D,{capture:!0}),k(y.timeContainer,"click",O),k([y.hourElement,y.minuteElement],["focus","click"],(function(t){return f(t).select()})),void 0!==y.secondElement&&k(y.secondElement,"focus",(function(){return y.secondElement&&y.secondElement.select()})),void 0!==y.amPM&&k(y.amPM,"click",(function(t){D(t),F()}))),y.config.allowInput&&k(y._input,"blur",tt)}}(),(y.selectedDates.length||y.config.noCalendar)&&(y.config.enableTime&&R(y.config.noCalendar?y.latestSelectedDateObj:void 0),wt(!1)),S();var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!y.isMobile&&e&&st(),pt("onReady")}(),y}function S(t,e){for(var n=Array.prototype.slice.call(t).filter((function(t){return t instanceof HTMLElement})),r=[],i=0;i<n.length;i++){var o=n[i];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=x(o,e||{}),r.push(o._flatpickr)}catch(t){console.error(t)}}return 1===r.length?r[0]:r}"function"!=typeof Object.assign&&(Object.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var r=function(e){e&&Object.keys(e).forEach((function(n){return t[n]=e[n]}))},i=0,o=e;i<o.length;i++){var a=o[i];r(a)}return t}),"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return S(this,t)},HTMLElement.prototype.flatpickr=function(t){return S([this],t)});var C=function(t,e){return"string"==typeof t?S(window.document.querySelectorAll(t),e):t instanceof Node?S([t],e):S(t,e)};return C.defaultConfig={},C.l10ns={en:t({},i),default:t({},i)},C.localize=function(e){C.l10ns.default=t(t({},C.l10ns.default),e)},C.setDefaults=function(e){C.defaultConfig=t(t({},C.defaultConfig),e)},C.parseDate=b({}),C.formatDate=w({}),C.compareDates=A,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(t){return S(this,t)}),Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof t?parseInt(t,10):t))},"undefined"!=typeof window&&(window.flatpickr=C),C}()},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",i=r.$escape,o=function(t){return e+=t};return t.length&&(e+='\r\n<label class="fv__label-block-text">',e+=i(r.i18n("viewer_:dialog.replies")),e+="</label>\r\n",o(n(298)(t)),e+="\r\n"),e}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",i=r.$escape,o=function(t){return e+=t};return e+='<li class="fv__replies_item"><span class="fv__replies_content">',e+=i(t.content),e+="</span>\r\n    ",o(n(298)(t.replies)),e+="\r\n</li>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,i=t.borderWidth,o=t.borderColor,a=t.position,s=t.height,c=t.width,u=t.background,d=t.align,l=(t.readonlyAttr,t.readonly),h=t.comboEditable,f=(t.cursor,t.fs,t.fontSize),p=(t.fcolor,t.color),g=t.style,v=t.dropButtonDisplay,m=r.$escape,y=t.value;n="border:"+i+"px solid "+o+";box-sizing:border-box;",a="left:0px;top:0px;height:"+s+";width:"+c+";position:absolute;",u="background-color:"+u+";outline:none;";switch(d){case 0:d="text-align:left;";break;case 1:d="text-align:center;";break;case 2:d="text-align:right;"}g=n+a+u+d+("font-size:"+f+";")+("color:"+p+";")+(h?"":"cursor:pointer;"),v=l?"display:none":"display:block";return e+='\r\n<input class="fwr__ui-combo-input" ',e+=m(l||!h?"readonly":""),e+=' style="',e+=m(g),e+='" value="',e+=m(y),e+='" tabindex="-1"/>\r\n<div class="fwr__ui-combo-dropdown" style="',e+=m(v),e+='"></div>\r\n<div class="fwr__ui-combo-arrow"><span /></div>'}},function(t,e){t.exports='<div class="fv__pdf-view-mode-item">\r\n    <div class="fv__pdf-page-layout">\r\n        <div class="fv__pdf-page-rendering" style="position: absolute;width: 100%;z-index: 1000;"></div>\r\n        <div class="fv__pdf-custom-page-container"></div>\r\n        <div class="fv__pdf-page-container">\r\n        </div>\r\n        <div class="fv__pdf-page-annots-container"></div>\r\n        <div class="fv__pdf-page-customs-container"></div>\r\n        <div class="fv__pdf-page-handler-container"></div>\r\n    </div>\r\n</div>'},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<div class="fv__text-boundary fv__text-boundary-',e+=(0,r.$escape)(t.direction),e+='">\r\n    <div class="fv__text-boundary-blank">\r\n        <div class="fv__text-boundary-cursor"></div>\r\n        <div class="fv__text-boundary-sign"></div>\r\n    </div>\r\n</div>'}},function(t,e,n){var r=n(19),i=n(49),o=n(82),a=n(147),s=n(139),c=n(371),u=n(46),d=r.TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!o(t)||a(t))return t;var n,r=s(t,l);if(r){if(void 0===e&&(e="default"),n=i(r,t,e),!o(n)||a(n))return n;throw d("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},function(t,e,n){var r=n(148);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(54),i=n(34),o=n(184);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(54),i=n(34);t.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(t,e,n){var r=n(57),i=n(252),o=n(119),a=n(83);t.exports=function(t,e,n){for(var s=i(e),c=a.f,u=o.f,d=0;d<s.length;d++){var l=s[d];r(t,l)||n&&r(n,l)||c(t,l,u(e,l))}}},function(t,e,n){var r=n(104),i=n(35),o=n(129),a=n(188),s=n(84),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(s(t)),n=a.f;return n?c(e,n(t)):e}},function(t,e,n){var r=n(35),i=n(57),o=n(100),a=n(187).indexOf,s=n(163),c=r([].push);t.exports=function(t,e){var n,r=o(t),u=0,d=[];for(n in r)!i(s,n)&&i(r,n)&&c(d,n);for(;e.length>u;)i(r,n=e[u++])&&(~a(d,n)||c(d,n));return d}},function(t,e,n){var r=n(104);t.exports=r("document","documentElement")},function(t,e,n){var r=n(46);e.f=r},function(t,e,n){var r=n(148);t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(184)("span").classList,i=r&&r.constructor&&r.constructor.prototype;t.exports=i===Object.prototype?void 0:i},function(t,e,n){var r=n(19),i=n(190),o=n(150),a=r.TypeError;t.exports=function(t){if(i(t))return t;throw a(o(t)+" is not a constructor")}},function(t,e,n){var r,i,o,a,s=n(19),c=n(141),u=n(122),d=n(48),l=n(57),h=n(34),f=n(254),p=n(168),g=n(184),v=n(224),m=n(265),y=n(223),w=s.setImmediate,b=s.clearImmediate,A=s.process,P=s.Dispatch,E=s.Function,x=s.MessageChannel,S=s.String,C=0,D={};try{r=s.location}catch(t){}var I=function(t){if(l(D,t)){var e=D[t];delete D[t],e()}},R=function(t){return function(){I(t)}},T=function(t){I(t.data)},_=function(t){s.postMessage(S(t),r.protocol+"//"+r.host)};w&&b||(w=function(t){v(arguments.length,1);var e=d(t)?t:E(t),n=p(arguments,1);return D[++C]=function(){c(e,void 0,n)},i(C),C},b=function(t){delete D[t]},y?i=function(t){A.nextTick(R(t))}:P&&P.now?i=function(t){P.now(R(t))}:x&&!m?(a=(o=new x).port2,o.port1.onmessage=T,i=u(a.postMessage,a)):s.addEventListener&&d(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!h(_)?(i=_,s.addEventListener("message",T,!1)):i="onreadystatechange"in g("script")?function(t){f.appendChild(g("script")).onreadystatechange=function(){f.removeChild(this),I(t)}}:function(t){setTimeout(R(t),0)}),t.exports={set:w,clear:b}},function(t,e,n){var r=n(138);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(t,e,n){var r=n(49),i=n(84),o=n(139);t.exports=function(t,e,n){var a,s;i(t);try{if(!(a=o(t,"return"))){if("throw"===e)throw n;return n}a=r(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw n;if(s)throw a;return i(a),n}},function(t,e,n){var r=n(154),i=n(195),o=n(172).CONSTRUCTOR;t.exports=o||!i((function(t){r.all(t).then(void 0,(function(){}))}))},function(t,e,n){var r=n(84),i=n(82),o=n(173);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(270).IteratorPrototype,i=n(131),o=n(137),a=n(132),s=n(174),c=function(){return this};t.exports=function(t,e,n,u){var d=e+" Iterator";return t.prototype=i(r,{next:o(+!u,n)}),a(t,d,!1,!0),s[d]=c,t}},function(t,e,n){"use strict";var r,i,o,a=n(34),s=n(48),c=n(131),u=n(156),d=n(90),l=n(46),h=n(102),f=l("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(r=i):p=!0),null==r||a((function(){var t={};return r[f].call(t)!==t}))?r={}:h&&(r=c(r)),s(r[f])||d(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(t,e,n){var r=n(34);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(34),i=n(19).RegExp;t.exports=r((function(){var t=i(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},function(t,e,n){var r=n(34),i=n(19).RegExp;t.exports=r((function(){var t=i("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},function(t,e,n){var r=n(49),i=n(57),o=n(120),a=n(229),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||i(t,"flags")||!o(s,t)?e:r(a,t)}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,n){var r=n(19),i=n(106),o=n(114),a=r.RangeError;t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=o(e);if(e!==n)throw a("Wrong length or index");return n}},function(t,e,n){var r=n(34),i=n(46),o=n(102),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(t,e,n){"use strict";var r=n(54),i=n(35),o=n(49),a=n(34),s=n(165),c=n(188),u=n(183),d=n(89),l=n(160),h=Object.assign,f=Object.defineProperty,p=i([].concat);t.exports=!h||a((function(){if(r&&1!==h({b:1},h(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||"abcdefghijklmnopqrst"!=s(h({},e)).join("")}))?function(t,e){for(var n=d(t),i=arguments.length,a=1,h=c.f,f=u.f;i>a;)for(var g,v=l(arguments[a++]),m=h?p(s(v),h(v)):s(v),y=m.length,w=0;y>w;)g=m[w++],r&&!o(f,v,g)||(n[g]=v[g]);return n}:h},function(t,e,n){"use strict";var r=n(19),i=n(122),o=n(49),a=n(89),s=n(402),c=n(226),u=n(190),d=n(91),l=n(153),h=n(194),f=n(175),p=r.Array;t.exports=function(t){var e=a(t),n=u(this),r=arguments.length,g=r>1?arguments[1]:void 0,v=void 0!==g;v&&(g=i(g,r>2?arguments[2]:void 0));var m,y,w,b,A,P,E=f(e),x=0;if(!E||this==p&&c(E))for(m=d(e),y=n?new this(m):p(m);m>x;x++)P=v?g(e[x],x):e[x],l(y,x,P);else for(A=(b=h(e,E)).next,y=n?new this:[];!(w=o(A,b)).done;x++)P=v?s(b,g,[w.value,x],!0):w.value,l(y,x,P);return y.length=x,y}},function(t,e,n){"use strict";n(18);var r=n(24),i=n(19),o=n(49),a=n(35),s=n(54),c=n(277),u=n(90),d=n(192),l=n(132),h=n(269),f=n(105),p=n(143),g=n(48),v=n(57),m=n(122),y=n(140),w=n(84),b=n(82),A=n(85),P=n(131),E=n(137),x=n(194),S=n(175),C=n(224),D=n(46),I=n(236),R=D("iterator"),T=f.set,_=f.getterFor("URLSearchParams"),k=f.getterFor("URLSearchParamsIterator"),F=Object.getOwnPropertyDescriptor,M=function(t){if(!s)return i[t];var e=F(i,t);return e&&e.value},O=M("fetch"),L=M("Request"),N=M("Headers"),V=L&&L.prototype,B=N&&N.prototype,U=i.RegExp,j=i.TypeError,H=i.decodeURIComponent,W=i.encodeURIComponent,$=a("".charAt),Y=a([].join),q=a([].push),G=a("".replace),z=a([].shift),K=a([].splice),J=a("".split),X=a("".slice),Z=/\+/g,Q=Array(4),tt=function(t){return Q[t-1]||(Q[t-1]=U("((?:%[\\da-f]{2}){"+t+"})","gi"))},et=function(t){try{return H(t)}catch(e){return t}},nt=function(t){var e=G(t,Z," "),n=4;try{return H(e)}catch(t){for(;n;)e=G(e,tt(n--),et);return e}},rt=/[!'()~]|%20/g,it={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ot=function(t){return it[t]},at=function(t){return G(W(t),rt,ot)},st=h((function(t,e){T(this,{type:"URLSearchParamsIterator",iterator:x(_(t).entries),kind:e})}),"Iterator",(function(){var t=k(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n}),!0),ct=function(t){this.entries=[],this.url=null,void 0!==t&&(b(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===$(t,0)?X(t,1):t:A(t)))};ct.prototype={type:"URLSearchParams",bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,i,a,s,c,u=S(t);if(u)for(n=(e=x(t,u)).next;!(r=o(n,e)).done;){if(a=(i=x(w(r.value))).next,(s=o(a,i)).done||(c=o(a,i)).done||!o(a,i).done)throw j("Expected sequence with length 2");q(this.entries,{key:A(s.value),value:A(c.value)})}else for(var d in t)v(t,d)&&q(this.entries,{key:d,value:A(t[d])})},parseQuery:function(t){if(t)for(var e,n,r=J(t,"&"),i=0;i<r.length;)(e=r[i++]).length&&(n=J(e,"="),q(this.entries,{key:nt(z(n)),value:nt(Y(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],r=0;r<e.length;)t=e[r++],q(n,at(t.key)+"="+at(t.value));return Y(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ut=function(){p(this,dt);var t=arguments.length>0?arguments[0]:void 0;T(this,new ct(t))},dt=ut.prototype;if(d(dt,{append:function(t,e){C(arguments.length,2);var n=_(this);q(n.entries,{key:A(t),value:A(e)}),n.updateURL()},delete:function(t){C(arguments.length,1);for(var e=_(this),n=e.entries,r=A(t),i=0;i<n.length;)n[i].key===r?K(n,i,1):i++;e.updateURL()},get:function(t){C(arguments.length,1);for(var e=_(this).entries,n=A(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){C(arguments.length,1);for(var e=_(this).entries,n=A(t),r=[],i=0;i<e.length;i++)e[i].key===n&&q(r,e[i].value);return r},has:function(t){C(arguments.length,1);for(var e=_(this).entries,n=A(t),r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){C(arguments.length,1);for(var n,r=_(this),i=r.entries,o=!1,a=A(t),s=A(e),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?K(i,c--,1):(o=!0,n.value=s));o||q(i,{key:a,value:s}),r.updateURL()},sort:function(){var t=_(this);I(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=_(this).entries,r=m(t,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new st(this,"keys")},values:function(){return new st(this,"values")},entries:function(){return new st(this,"entries")}},{enumerable:!0}),u(dt,R,dt.entries,{name:"entries"}),u(dt,"toString",(function(){return _(this).serialize()}),{enumerable:!0}),l(ut,"URLSearchParams"),r({global:!0,forced:!c},{URLSearchParams:ut}),!c&&g(N)){var lt=a(B.has),ht=a(B.set),ft=function(t){if(b(t)){var e,n=t.body;if("URLSearchParams"===y(n))return e=t.headers?new N(t.headers):new N,lt(e,"content-type")||ht(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),P(t,{body:E(0,A(n)),headers:E(0,e)})}return t};if(g(O)&&r({global:!0,enumerable:!0,noTargetGet:!0,forced:!0},{fetch:function(t){return O(t,arguments.length>1?ft(arguments[1]):{})}}),g(L)){var pt=function(t){return p(this,V),new L(t,arguments.length>1?ft(arguments[1]):{})};V.constructor=pt,pt.prototype=V,r({global:!0,forced:!0,noTargetGet:!0},{Request:pt})}}t.exports={URLSearchParams:ut,getState:_}},function(t,e,n){var r=n(138).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},function(t,e,n){var r=n(138);t.exports=/MSIE|Trident/.test(r)},function(t,e,n){var r=n(138).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},function(t,e,n){var r=n(35);t.exports=r(1..valueOf)},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,n){var r=n(19),i=n(406),o=r.RangeError;t.exports=function(t,e){var n=i(t);if(n%e)throw o("Wrong offset");return n}},function(t,e,n){var r=n(19),i=n(121),o=n(89),a=n(160),s=n(91),c=r.TypeError,u=function(t){return function(e,n,r,u){i(n);var d=o(e),l=a(d),h=s(d),f=t?h-1:0,p=t?-1:1;if(r<2)for(;;){if(f in l){u=l[f],f+=p;break}if(f+=p,t?f<0:h<=f)throw c("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=p)f in l&&(u=n(u,l[f],f,d));return u}};t.exports={left:u(!1),right:u(!0)}},function(t,e,n){"use strict";var r=n(24),i=n(412),o=n(89),a=n(91),s=n(106),c=n(189);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=a(e),r=c(e,0);return r.length=i(r,e,e,n,0,void 0===t?1:s(t)),r}})},function(t,e,n){n(155)("flat")},function(t,e){t.exports="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0iI2RkZCI+PHBhdGggZD0iTTIgMTJ2OGg0di04eiI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZCIgdmFsdWVzPSJNMCAxMiBWMjAgSDQgVjEyejsgTTAgNCBWMjggSDQgVjR6OyBNMCAxMiBWMjAgSDQgVjEyejsgTTAgMTIgVjIwIEg0IFYxMnoiIGR1cj0iMS4ycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwIiBrZXlTcGxpbmVzPSIwLjIgMC4yIDAuNCAwLjg7MC4yIDAuNiAwLjQgMC44OzAuMiAwLjggMC40IDAuOCIgY2FsY01vZGU9InNwbGluZSIvPjwvcGF0aD48cGF0aCBkPSJNOCAxMnY4aDR2LTh6Ij48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJkIiB2YWx1ZXM9Ik0wIDEyIFYyMCBINCBWMTJ6OyBNMCA0IFYyOCBINCBWNHo7IE0wIDEyIFYyMCBINCBWMTJ6OyBNMCAxMiBWMjAgSDQgVjEyeiIgZHVyPSIxLjJzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49Ii4yIiBrZXlTcGxpbmVzPSIwLjIgMC4yIDAuNCAwLjg7MC4yIDAuNiAwLjQgMC44OzAuMiAwLjggMC40IDAuOCIgY2FsY01vZGU9InNwbGluZSIvPjwvcGF0aD48cGF0aCBkPSJNMTQgMTJ2OGg0di04eiI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZCIgdmFsdWVzPSJNMCAxMiBWMjAgSDQgVjEyejsgTTAgNCBWMjggSDQgVjR6OyBNMCAxMiBWMjAgSDQgVjEyejsgTTAgMTIgVjIwIEg0IFYxMnoiIGR1cj0iMS4ycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIuNCIga2V5U3BsaW5lcz0iMC4yIDAuMiAwLjQgMC44OzAuMiAwLjYgMC40IDAuODswLjIgMC44IDAuNCAwLjgiIGNhbGNNb2RlPSJzcGxpbmUiLz48L3BhdGg+PHBhdGggZD0iTTIwIDEydjhoNHYtOHoiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImQiIHZhbHVlcz0iTTAgMTIgVjIwIEg0IFYxMno7IE0wIDQgVjI4IEg0IFY0ejsgTTAgMTIgVjIwIEg0IFYxMno7IE0wIDEyIFYyMCBINCBWMTJ6IiBkdXI9IjEuMnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iLjYiIGtleVNwbGluZXM9IjAuMiAwLjIgMC40IDAuODswLjIgMC42IDAuNCAwLjg7MC4yIDAuOCAwLjQgMC44IiBjYWxjTW9kZT0ic3BsaW5lIi8+PC9wYXRoPjxwYXRoIGQ9Ik0yNiAxMnY4aDR2LTh6Ij48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJkIiB2YWx1ZXM9Ik0wIDEyIFYyMCBINCBWMTJ6OyBNMCA0IFYyOCBINCBWNHo7IE0wIDEyIFYyMCBINCBWMTJ6OyBNMCAxMiBWMjAgSDQgVjEyeiIgZHVyPSIxLjJzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49Ii44IiBrZXlTcGxpbmVzPSIwLjIgMC4yIDAuNCAwLjg7MC4yIDAuNiAwLjQgMC44OzAuMiAwLjggMC40IDAuOCIgY2FsY01vZGU9InNwbGluZSIvPjwvcGF0aD48L3N2Zz4="},function(t,e,n){n(24)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(54),i=n(35),o=n(165),a=n(100),s=i(n(183).f),c=i([].push),u=function(t){return function(e){for(var n,i=a(e),u=o(i),d=u.length,l=0,h=[];d>l;)n=u[l++],r&&!s(i,n)||c(h,t?[n,i[n]]:i[n]);return h}};t.exports={entries:u(!0),values:u(!1)}},function(t,e,n){n(24)({target:"String",proto:!0},{repeat:n(294)})},function(t,e,n){"use strict";var r=n(19),i=n(106),o=n(85),a=n(101),s=r.RangeError;t.exports=function(t){var e=o(a(this)),n="",r=i(t);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e,n){"use strict";var r=n(24),i=n(19),o=n(35),a=n(164),s=n(90),c=n(296),u=n(193),d=n(143),l=n(48),h=n(82),f=n(34),p=n(195),g=n(132),v=n(197);t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),y=-1!==t.indexOf("Weak"),w=m?"set":"add",b=i[t],A=b&&b.prototype,P=b,E={},x=function(t){var e=o(A[t]);s(A,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(y&&!h(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return y&&!h(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!h(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(a(t,!l(b)||!(y||A.forEach&&!f((function(){(new b).entries().next()})))))P=n.getConstructor(e,t,m,w),c.enable();else if(a(t,!0)){var S=new P,C=S[w](y?{}:-0,1)!=S,D=f((function(){S.has(1)})),I=p((function(t){new b(t)})),R=!y&&f((function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)}));I||((P=e((function(t,e){d(t,A);var n=v(new b,t,P);return null!=e&&u(e,n[w],{that:n,AS_ENTRIES:m}),n}))).prototype=A,A.constructor=P),(D||R)&&(x("delete"),x("has"),m&&x("get")),(R||C)&&x(w),y&&A.clear&&delete A.clear}return E[t]=P,r({global:!0,forced:P!=b},E),g(P,t),y||n.setStrong(P,t,m),P}},function(t,e,n){var r=n(24),i=n(35),o=n(163),a=n(82),s=n(57),c=n(83).f,u=n(129),d=n(219),l=n(429),h=n(162),f=n(431),p=!1,g=h("meta"),v=0,m=function(t){c(t,g,{value:{objectID:"O"+v++,weakData:{}}})},y=t.exports={enable:function(){y.enable=function(){},p=!0;var t=u.f,e=i([].splice),n={};n[g]=1,t(n).length&&(u.f=function(n){for(var r=t(n),i=0,o=r.length;i<o;i++)if(r[i]===g){e(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,g)){if(!l(t))return"F";if(!e)return"E";m(t)}return t[g].objectID},getWeakData:function(t,e){if(!s(t,g)){if(!l(t))return!0;if(!e)return!1;m(t)}return t[g].weakData},onFreeze:function(t){return f&&p&&l(t)&&!s(t,g)&&m(t),t}};o[g]=!0},function(t,e,n){"use strict";var r=n(83).f,i=n(131),o=n(192),a=n(122),s=n(143),c=n(193),u=n(227),d=n(170),l=n(54),h=n(296).fastKey,f=n(105),p=f.set,g=f.getterFor;t.exports={getConstructor:function(t,e,n,u){var d=t((function(t,r){s(t,f),p(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),l||(t.size=0),null!=r&&c(r,t[u],{that:t,AS_ENTRIES:n})})),f=d.prototype,v=g(e),m=function(t,e,n){var r,i,o=v(t),a=y(t,e);return a?a.value=n:(o.last=a={index:i=h(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),l?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},y=function(t,e){var n,r=v(t),i=h(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(f,{clear:function(){for(var t=v(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,l?t.size=0:this.size=0},delete:function(t){var e=v(this),n=y(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),l?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=v(this),r=a(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!y(this,t)}}),o(f,n?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),l&&r(f,"size",{get:function(){return v(this).size}}),d},setStrong:function(t,e,n){var r=e+" Iterator",i=g(e),o=g(r);u(t,e,(function(t,e){p(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),d(e)}}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",i=r.$each,o=(t.$value,t.$index,function(t){return e+=t});return t.length&&(e+='\r\n<ul class="fv__replies_list">\r\n    ',i(t,(function(t,r){e+="\r\n    ",o(n(243)(t)),e+="\r\n    "})),e+="\r\n</ul>\r\n"),e}},function(t,e,n){"use strict";var r=n(198).start,i=n(238);t.exports=i("trimStart")?function(){return r(this)}:"".trimStart},function(t,e,n){"use strict";var r=n(24),i=n(205);r({target:"String",proto:!0,forced:n(206)("link")},{link:function(t){return i(this,"a","href",t)}})},function(t,e,n){var r=n(24),i=n(292).entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},function(t,e,n){},function(t,e,n){"use strict";var r=n(198).end,i=n(238);t.exports=i("trimEnd")?function(){return r(this)}:"".trimEnd},function(t,e,n){n(26);t.exports=function(t){"use strict";t=t||{};return'<div class="fv__pdf-viewer-layout">\r\n    <div class="fv__pdf-viewer-rendering"></div>\r\n    <div class="fv__pdf-viewer-container"></div>\r\n    <div class="fv__pdf-viewer-handler-container"></div>\r\n</div>','<div class="fv__pdf-viewer-layout">\r\n    <div class="fv__pdf-viewer-rendering"></div>\r\n    <div class="fv__pdf-viewer-container"></div>\r\n    <div class="fv__pdf-viewer-handler-container"></div>\r\n</div>'}},function(t,e){t.exports='<div class="fv__pdf-doc-layout">\r\n    <div class="fv__pdf-doc-rendering"></div>\r\n    <div class="fv__pdf-doc-custom-container"></div>\r\n    <div class="fv__pdf-doc-container"></div>\r\n    <div class="fv__pdf-doc-handler-container"></div>\r\n</div>'},function(t,e,n){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,o){var a=i.prototype;o.utc=function(t){var e={date:t,utc:!0,args:arguments};return new i(e)},a.utc=function(e){var n=o(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var c=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else c.call(this)};var u=a.utcOffset;a.utcOffset=function(r,i){var o=this.$utils().u;if(o(r))return this.$u?0:o(this.$offset)?u.call(this):this.$offset;if("string"==typeof r&&null===(r=function(t){void 0===t&&(t="");var r=t.match(e);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],o=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===o?a:-a}(r)))return this;var a=Math.abs(r)<=16?60*r:r,s=this;if(i)return s.$offset=a,s.$u=0===r,s;if(0!==r){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+c,t)).$offset=a,s.$x.$localOffset=c}else s=this.utc();return s};var d=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var l=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var h=a.diff;a.diff=function(t,e,n){if(t&&this.$u===t.$u)return h.call(this,t,e,n);var r=this.local(),i=o(t).local();return h.call(r,i,e,n)}}}()},function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){var e;switch(r(t)){case"string":return/Z$/.test(t)?0:(e=/([+-])(\d{2}):?(\d{2})/.exec(t))&&(+e[3]+60*e[2])*("+"===e[1]?1:-1);case"number":return Number.isNaN(t)?null:Math.abs(t)<16?60*t:t;default:return null}}n.r(e);var o=function(t,e,n){var r=String(t);return!r||r.length>=e?t:"".concat(Array(e+1-r.length).join(n)).concat(t)},a=function(t){var e=Math.abs(t),n=Math.floor(e/60),r=e%60;return"".concat(t<=0?"+":"-").concat(o(n,2,"0"),":").concat(o(r,2,"0"))};function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=(new Date).getTimezoneOffset(),u=Date.prototype;function d(t){return 6e4*(t-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:c))}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getTimezoneOffset();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$d=new Date(e.getTime()-d(n)),this.$timezoneOffset=n}var e,n;return e=t,(n=[{key:"getTimezoneOffset",value:function(){return this.$timezoneOffset}},{key:"setTimezoneOffset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$timezoneOffset;this.$d.setTime(this.$d.getTime()+d(this.$timezoneOffset,t)),this.$timezoneOffset=t}}])&&s(e.prototype,n),t}();["toDateString","toLocaleString","toLocaleDateString","toLocaleTimeString","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setYear","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear"].forEach((function(t){l.prototype[t]=function(){return u[t].apply(this.$d,arguments)}})),["toISOString","toUTCString","toGMTString","toJSON","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","valueOf","getTime"].forEach((function(t){l.prototype[t]=function(){return u[t].apply(new Date(this.$d.getTime()+d(this.$timezoneOffset)),arguments)}})),["setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"].forEach((function(t){l.prototype[t]=function(){var e=new Date(this.$d.getTime()+d(this.$timezoneOffset));u[t].apply(e,arguments),e.setTime(e.getTime()-d(this.$timezoneOffset)),this.$d=e}})),["toString","toTimeString"].forEach((function(t){l.prototype[t]=function(){return u[t].apply(this.$d,arguments).replace(/GMT(.*)$/,"GMT".concat(a(this.$timezoneOffset)))}}));var h=l,f=!1,p=function(t,e){["clone","add","subtract","startOf"].forEach((function(n){t[n]=function(){var t=this.utcOffset();return e[n].apply(this,arguments).utcOffset(t)}})),t.utc=function(){return this.utcOffset(0)},t.local=function(){return this.utcOffset(-c)},t.utcOffset=function(t){if(void 0===t){var e=this.$d.getTimezoneOffset();return 0===e?0:-e}return null!==i(t)&&(this.$d.setTimezoneOffset(-i(t)),this.init()),this},t.toDate=function(){return new Date(this.$d.getTime())},t.isLocal=function(){return this.$d.getTimezoneOffset()===c},t.isUTC=function(){return 0===this.$d.getTimezoneOffset()},t.$set=function(){for(var t,n=this.$d.getTimezoneOffset(),r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.$set).call.apply(t,[this].concat(i)),this.$d instanceof Date&&(this.$d=new h(this.$d,n)),this},t.parse=function(t){e.parse.call(this,t);var n=this.$d,r="string"==typeof t.date?i(t.date):null;this.$d=new h(n,null===r?c:-r),f&&this.local(),this.init()}};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;f=!!t.parseToLocal;var r=e.prototype,o=function(){};o.prototype=r;var a=new o;p(a,r),a.constructor=e.constructor,e.prototype=a,n.utc=function(t){var e=this(t);return"string"==typeof t&&null===i(t)&&(e.$d.$timezoneOffset=0),e.utc()}}}])},function(t,e,n){t.exports=function(){"use strict";return function(t,e,n){var r=e.prototype,i=r.format;n.en.ordinal=function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"},r.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return i.bind(this)(t);var r=this.$utils(),o=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return n.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return n.ordinal(e.week(),"W");case"w":case"ww":return r.s(e.week(),"w"===t?1:2,"0");case"W":case"WW":return r.s(e.isoWeek(),"W"===t?1:2,"0");case"k":case"kk":return r.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}));return i.bind(this)(o)}}}()},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t,e){return"W"===e?t+"周":t+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(t,e){var n=100*t+e;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return e.default.locale(n,null,!0),n}(n(58))},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={name:"zh-tw",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t){return t+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}};return e.default.locale(n,null,!0),n}(n(58))},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={name:"zh-hk",months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),ordinal:function(t){return t+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d 分鐘",h:"一小時",hh:"%d 小時",d:"一天",dd:"%d 天",M:"一個月",MM:"%d 個月",y:"一年",yy:"%d 年"}};return e.default.locale(n,null,!0),n}(n(58))},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={name:"it-ch",weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),ordinal:function(t){return t},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"}};return e.default.locale(n,null,!0),n}(n(58))},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function r(t,e,r){var i=n[r];return Array.isArray(i)&&(i=i[e?0:1]),i.replace("%d",t)}var i={name:"de-ch",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),ordinal:function(t){return t+"."},weekStart:1,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r}};return e.default.locale(i,null,!0),i}(n(58))},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function r(t,e,r){var i=n[r];return Array.isArray(i)&&(i=i[e?0:1]),i.replace("%d",t)}var i={name:"de-at",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),ordinal:function(t){return t+"."},weekStart:1,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r}};return e.default.locale(i,null,!0),i}(n(58))},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={name:"fr-ch",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),weekStart:1,weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),ordinal:function(t){return t},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"}};return e.default.locale(n,null,!0),n}(n(58))},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={name:"fr-ca",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),ordinal:function(t){return t},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"}};return e.default.locale(n,null,!0),n}(n(58))},function(t,e,n){t.exports=function(t){"use strict";var e=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(t),n={name:"nl-be",weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),weekStart:1,weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),ordinal:function(t){return t},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"}};return e.default.locale(n,null,!0),n}(n(58))},function(t,e){t.exports=o},function(t,e){t.exports=a},function(t,e){t.exports=s},function(t,e){t.exports=c},function(t,e){t.exports=u},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";var e="",n=(t=t||{}).disabledAttr,i=t.disabled,o=t.i18nRoot,a=t.hlm,s=t.endingStyle,c=t.borderWidth,u=r.$escape,d=t.minBorderWidth,l=t.borderStyle,h=t.cloudy,f=t.highlightingMode,p=t.rotation,g=t.fillColor,v=t.checked,m=t.strFillColor,y=t.color,w=t.lineStartStyle,b=t.startStyle,A=t.lineEndStyle,P=t.endStyle,E=t.hasCap,x=(t.hasCapChecked,t.opacity);e+='<div class="fv__annot-properties-dialog">\r\n<div>\r\n    ';n=i?"disabled=disabled":"",a=(o="viewer_:dialog.")+"highlightingMode.",s=o+"endingStyle.";if(e+="\r\n    ",void 0!==c&&(e+='\r\n        <div class="fv__property-item">\r\n            <span class="fv__property-item-name-container">',e+=u(r.i18n(o+"borderWidth")),e+='</span>\r\n            <div class="fv__property-item-field-container">\r\n                <input id="thickness-input-tx" type="number"\r\n                       min="',e+=u(null!=d?d:1),e+='" max="12" step="1" value="',e+=u(c),e+='"\r\n                       ',e+=u(n),e+='>\r\n                <input id="thickness-input" type="range"\r\n                       value="',e+=u(c),e+='" min="1" max="12" step="1"\r\n                       ',e+=u(n),e+=">\r\n            </div>\r\n        </div>\r\n    "),!1!==l&&(e+='\r\n        <div class="fv__property-item">\r\n            <span class="fv__property-item-name-container">',e+=u(r.i18n(o+"borderStyle")),e+='</span>\r\n            <div class="fv__property-item-field-container">\r\n                <select id="borderStyle-select" ',e+=u(n),e+='>\r\n                    <option value="0">———————————</option>\r\n                    <option value="1">. . . . . . . . . . . . . . . . . . . . .</option>\r\n                    <option value="2">-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -</option>\r\n                    <option value="3">—  —  —  —  —  —  —  —  —</option>\r\n                    <option value="4">—  -  —  -  —  -  —  -  —  -  —  -</option>\r\n                    <option value="5">——  -  ——  -  ——  -  ——  -</option>\r\n                    <option value="6">-   ———   -   ———   -   ———</option>\r\n                    ',!0===h&&(e+='\r\n                    <option value="7">﹋﹋﹋﹋﹋﹋﹋﹋﹋﹋﹋</option>\r\n                    <option value="8">~~~~~~~~~~~~~~~~~~~</option>\r\n                    '),e+="\r\n                </select>\r\n            </div>\r\n        </div>\r\n    "),void 0!==f&&(e+='\r\n        <div class="fv__property-item">\r\n            <span class="fv__property-item-name-container">',e+=u(r.i18n(a+"title")),e+='</span>\r\n            <div class="fv__property-item-field-container">\r\n                <select id="highlighting-select" ',e+=u(n),e+='>\r\n                    <option value="0">',e+=u(r.i18n(a+"none")),e+='</option>\r\n                    <option value="1">',e+=u(r.i18n(a+"invert")),e+='</option>\r\n                    <option value="2">',e+=u(r.i18n(a+"outline")),e+='</option>\r\n                    <option value="3">',e+=u(r.i18n(a+"push")),e+='</option>\r\n                    <option value="4">',e+=u(r.i18n(a+"toggle")),e+="</option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n    "),void 0!==p&&(e+='\r\n            <div class="fv__property-item">\r\n                <span class="fv__property-item-name-container">',e+=u(r.i18n(o+"rotate")),e+='</span>\r\n                <div class="fv__property-item-field-container">\r\n                    <select id="rotation-select" ',e+=u(n),e+='>\r\n                        <option value="0">0</option>\r\n                        <option value="1">90</option>\r\n                        <option value="2">180</option>\r\n                        <option value="3">270</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        '),void 0!==g){v="",i="",m=g;if(0==g)i="disabled=1",v="checked=1",m="#FFFFFF";else{for(m=(g&=16777215).toString(16);m.length<6;)m="0"+m;m="#"+m}e+='\r\n        <div class="fv__property-item">\r\n            <span class="fv__property-item-name-container">',e+=u(r.i18n(o+"fillColor")),e+='</span>\r\n\r\n            <div class="fv__property-item-field-container">\r\n                <input id="fillcolor-input" type="color" value="',e+=u(m),e+='" ',e+=u(i),e+=" ",e+=u(n),e+='>\r\n\r\n                <label>\r\n                    <input id="fillColor-transparent-input" type="checkbox" ',e+=u(v),e+=" ",e+=u(n),e+=">\r\n                    ",e+=u(r.i18n(o+"transparent")),e+="\r\n                </label>\r\n            </div>\r\n        </div>\r\n    "}(void 0!==y&&(0===y&&(y="#ffffff"),e+='\r\n    <div class="fv__property-item">\r\n        <label>\r\n            <span class="fv__property-item-name-container">',e+=u(r.i18n(o+"color")),e+='</span>\r\n            <div class="fv__property-item-field-container">\r\n                <input id="color-input" type="color" value="',e+=u(y),e+='" ',e+=u(n),e+=">\r\n            </div>\r\n        </label>\r\n    </div>\r\n    "),w&&(e+='\r\n        <div class="fv__property-item">\r\n            <span class="fv__property-item-name-container">',e+=u(r.i18n(o+"startStyle")),e+='</span>\r\n            <div class="fv__property-item-field-container">\r\n                <select id="startstyle-select" value="',e+=u(b),e+='" ',e+=u(n),e+='>\r\n                    <option value="0">',e+=u(r.i18n(s+"none")),e+='</option>\r\n                    <option value="1">',e+=u(r.i18n(s+"square")),e+='</option>\r\n                    <option value="2">',e+=u(r.i18n(s+"circle")),e+='</option>\r\n                    <option value="3">',e+=u(r.i18n(s+"diamond")),e+='</option>\r\n                    <option value="4">',e+=u(r.i18n(s+"openArrow")),e+='</option>\r\n                    <option value="5">',e+=u(r.i18n(s+"closedArrow")),e+='</option>\r\n                    <option value="6">',e+=u(r.i18n(s+"butt")),e+='</option>\r\n                    <option value="7">',e+=u(r.i18n(s+"reverseOpenArrow")),e+='</option>\r\n                    <option value="8">',e+=u(r.i18n(s+"reverseClosedArrow")),e+='</option>\r\n                    <option value="9">',e+=u(r.i18n(s+"slash")),e+="</option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        "),A&&(e+='\r\n        <div class="fv__property-item">\r\n            <span class="fv__property-item-name-container">',e+=u(r.i18n(o+"endStyle")),e+='</span>\r\n            <div class="fv__property-item-field-container">\r\n                <select id="endstyle-select" value="',e+=u(P),e+='" ',e+=u(n),e+='>\r\n                    <option value="0" >',e+=u(r.i18n(s+"none")),e+='</option>\r\n                    <option value="1" >',e+=u(r.i18n(s+"square")),e+='</option>\r\n                    <option value="2" >',e+=u(r.i18n(s+"circle")),e+='</option>\r\n                    <option value="3" >',e+=u(r.i18n(s+"diamond")),e+='</option>\r\n                    <option value="4" >',e+=u(r.i18n(s+"openArrow")),e+='</option>\r\n                    <option value="5" >',e+=u(r.i18n(s+"closedArrow")),e+='</option>\r\n                    <option value="6" >',e+=u(r.i18n(s+"butt")),e+='</option>\r\n                    <option value="7" >',e+=u(r.i18n(s+"reverseOpenArrow")),e+='</option>\r\n                    <option value="8" >',e+=u(r.i18n(s+"reverseClosedArrow")),e+='</option>\r\n                    <option value="9" >',e+=u(r.i18n(s+"slash")),e+="</option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        "),void 0!==E)&&(e+='\r\n    <div class="fv__property-item">\r\n        <label class="fv__property-item-only-field-container">\r\n            <input id="hasCap-input" type="checkbox" ',e+=u(E?"checked=true":""),e+=" ",e+=u(n),e+=">\r\n            ",e+=u(r.i18n(o+"hasCap")),e+="\r\n        </label>\r\n    </div>\r\n    ");return!1!==x&&(e+='\r\n    <div class="fv__property-item">\r\n        <label class="fv__property-item-name-container">',e+=u(r.i18n(o+"opacity")),e+='</label>\r\n        <div class="fv__property-item-field-container">\r\n            <input id="opacity-input" type="range" value="',e+=u(x),e+='" min="0" max="1" step="0.01" ',e+=u(n),e+=">\r\n        </div>\r\n    </div>\r\n    "),e+='\r\n</div>\r\n<div class="fv__btn-close-container">\r\n    <button type="button" class="fv__btn fv__btn-close">',e+=u(r.i18n(o+"close")),e+="</button>\r\n</div>\r\n</div>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",i=r.$escape,o=t.content,a=function(t){return e+=t},s=t.replies;return e+='<dialog class="fv__dialog fv__annot-reply-dialog">\r\n    <div class="fv__textarea-container">\r\n        <label>\r\n            <span class="fv__label-block-text">',e+=i(r.i18n("viewer_:dialog.content")),e+='</span>\r\n            <textarea class="fv__block-textarea content-textarea">',e+=i(o),e+='</textarea>\r\n        </label>\r\n    </div>\r\n    <div class="fv__textarea-container">\r\n        <label>\r\n            <span class="fv__label-block-text">',e+=i(r.i18n("viewer_:dialog.reply")),e+='</span>\r\n            <textarea class="fv__block-textarea reply-textarea"></textarea>\r\n        </label>\r\n    </div>\r\n    <div class="fv__btn_reply_container">\r\n        <button type="button" class="fv__btn fv__btn-reply" disabled>',e+=i(r.i18n("viewer_:dialog.reply")),e+='</button>\r\n    </div>\r\n    <div class="fv__dialog-replies-block">\r\n        ',a(n(242)(s)),e+='\r\n    </div>\r\n    <div class="fv__btn-close-container">\r\n        <button type="button" class="fv__btn fv__btn-close">',e+=i(r.i18n("viewer_:dialog.close")),e+="</button>\r\n    </div>\r\n</dialog>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape,i=t.previewer,o=t.moveable,a=t.resizable,s=t.enableFrame,c=t.enableDiagonally,u=t.enableSizeBox,d=t.rotatable,l=t.degreeInitVisibility;return e+='<div class="fv__shape-control">\r\n    <canvas class="fv__shape-control-previewer" ',e+=n(i?"":"style=display:none"),e+=" ></canvas>\r\n    ",o&&(e+='\r\n    <div class="fv__shape-control-move-area"></div>\r\n    '),e+="\r\n    ",a&&(e+="\r\n    ",s&&(e+='\r\n    <div class="fv__shape-controller" direction="north"></div>\r\n    <div class="fv__shape-controller" direction="south"></div>\r\n    <div class="fv__shape-controller" direction="west"></div>\r\n    <div class="fv__shape-controller" direction="east"></div>\r\n    '),e+="\r\n    ",c&&(e+='\r\n    <div class="fv__shape-controller" direction="north-west"></div>\r\n    <div class="fv__shape-controller" direction="north-east"></div>\r\n    <div class="fv__shape-controller" direction="south-west"></div>\r\n    <div class="fv__shape-controller" direction="south-east"></div>\r\n    '),e+="\r\n    ",u&&(e+='\r\n    <div class="fv__shape-size"></div>\r\n    '),e+="\r\n    "),e+="\r\n    ",d&&(e+='\r\n    <div class="fv__shape-rotate">\r\n        <div class="fv-shape-rotate-handle fv__cursor-rotation"></div>\r\n        <div class="fv-shape-rotate-degree" ',e+=n(l?"":"style=visibility:hidden"),e+=' ></div>\r\n        <div class="fv-shape-rotate-bound"></div>\r\n    </div>\r\n    '),e+="\r\n</div>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";var e="",n=(t=t||{}).i,i=(t.pointIndex,r.$escape);for(n=0;n<t.anchorCount;n++){e+="\r\n";e+='\r\n<div class="fv__pdf-annot-line-point" data-index="',e+=i(n),e+='"><div class="fv__pdf-annot-line-point-item"></div></div>\r\n'}return e+="\r\n\r\n",t.isLineDimension&&(e+='\r\n<div class="fv__pdf-annot-line-caption" data-index="caption">',e+=i(t.captionText),e+="</div>\r\n"),e}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape;return e+='<dialog class="fv__ui-layer fv__action-dialog" >\r\n   <div class="fv__action-dialog-header">\r\n      <div class="fv__action-dialog-title">',e+=n(r.i18n("viewer_:dialog.actionDialog.title")),e+='</div>\r\n      <div class="fv__action-dialog-close"><i class="fv__action-dialog-close-icon">x</i></div>\r\n   </div>\r\n   <div class="fv__action-dialog-body">\r\n      <div class="fv__action-dialog-select">\r\n         <span class="fv__action-dialog-select-title">',e+=n(r.i18n("viewer_:dialog.actionDialog.selectKey")),e+='</span>\r\n         <select id="select-action">\r\n            <option value="TypeGoto">',e+=n(r.i18n("viewer_:dialog.actionDialog.selectAction.goto")),e+='</option>\r\n            <option value="TypeURI">',e+=n(r.i18n("viewer_:dialog.actionDialog.selectAction.webLink")),e+='</option>\r\n         </select>\r\n      </div>\r\n      <div class="fv__action-dialog-url fv__action-dialog-box" data-type="TypeURI">\r\n         <div class="fv__action-dialog-url-title fv__action-box-title">',e+=n(r.i18n("viewer_:dialog.actionDialog.URLAction.title")),e+='</div>\r\n         <div class="fv__action-dialog-url-input">\r\n            <input class="fv__action-dialog-input" id="url-input"/>\r\n         </div>\r\n      </div>\r\n      <div class="fv__action-dialog-goto fv__action-dialog-box" style="display:block;"  data-type="TypeGoto">\r\n         <div class="fv__action-dialog-goto-title fv__action-box-title">',e+=n(r.i18n("viewer_:dialog.actionDialog.GotoAction.title")),e+='</div>\r\n         <div class="fv__action-dialog-goto-container">\r\n            <div class="fv__action-dialog-goto-center">\r\n               <div class="fv__action-dialog-goto-left">\r\n                  <div class="fv__action-dialog-goto-target">',e+=n(r.i18n("viewer_:dialog.actionDialog.GotoAction.target")),e+=':</div>\r\n               </div>\r\n               <div class="fv__action-dialog-goto-right">\r\n                  <div class="fv__action-dialog-goto-input">\r\n                     <input type="number" min="1" class="fv__action-dialog-input" id="goto-input"/>\r\n                  </div>\r\n                  <div class="fv__action-dialog-goto-position">\r\n                     <span class="fv__action-dialog-goto-position-left">',e+=n(r.i18n("viewer_:dialog.actionDialog.GotoAction.left")),e+=':</span><span class="fv__action-dialog-goto-left-value">0</span>\r\n                     <span class="fv__action-dialog-goto-position-top">',e+=n(r.i18n("viewer_:dialog.actionDialog.GotoAction.top")),e+=':</span><span class="fv__action-dialog-goto-top-value">0</span>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <div class="fv__action-dialog-footer">\r\n      <div class="fv__action-dialog-btns">\r\n          <button type="button" class="fv__action-btn fv__action-btn-ok">',e+=n(r.i18n("viewer_:dialog.actionDialog.OK")),e+='</button>\r\n          <button type="button" class="fv__action-btn fv__action-btn-cancel ">',e+=n(r.i18n("viewer_:dialog.actionDialog.Cancel")),e+="</button>\r\n      </div>\r\n   </div>\r\n</dialog>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M2.56,16.77a1,1,0,0,1,0-1.41L6.5,11.42a1,1,0,0,1,1.41,0l5.75,5.75a1,1,0,0,0,1.41,0h0l9.43-9.43a1,1,0,0,1,1.41,0l3.94,3.94a1,1,0,0,1,0,1.41L15.08,27.88a1,1,0,0,1-1.41,0Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M16,2A14.13,14.13,0,0,0,1.77,16,14.12,14.12,0,0,0,16,29.94,14.13,14.13,0,0,0,30.32,16h0A14.13,14.13,0,0,0,16.06,2Zm0,26a12,12,0,1,1,.09,0Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M27.6,2H4.75a3,3,0,0,0-3,3V21.63a3,3,0,0,0,3,3H6.2l1.22,6.24V31l6.37-6.37H27.6a3,3,0,0,0,3-3V5A3,3,0,0,0,27.6,2Z"/>\r\n    <path fill="#3f3f3f" isolation="isolate"\r\n          d="M27.24,6.92a.52.52,0,0,1-.52.52H6.22a.52.52,0,0,1-.52-.52h0a.52.52,0,0,1,.52-.52h20.5a.52.52,0,0,1,.52.52Z"/>\r\n    <path fill="#3f3f3f" isolation="isolate"\r\n          d="M27.35,12.07a.51.51,0,0,1-.5.52H6.33a.51.51,0,0,1-.51-.51h0a.51.51,0,0,1,.51-.51H26.84a.51.51,0,0,1,.51.51Z"/>\r\n    <path fill="#3f3f3f" isolation="isolate"\r\n          d="M22,17.19c0,.29-.18.52-.39.52H6.2c-.22,0-.39-.23-.39-.52h0c0-.28.17-.52.39-.52H21.63c.21,0,.39.24.39.52Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M24,1.4a1.55,1.55,0,0,0-2.18,0L17.17,6A1.55,1.55,0,0,1,15,6L10.35,1.4a1.55,1.55,0,0,0-2.18,0L1.59,8a1.55,1.55,0,0,0,0,2.18L6.22,14.8a1.56,1.56,0,0,1,0,2.19l-4.63,4.6a1.56,1.56,0,0,0,0,2.19l6.58,6.58a1.56,1.56,0,0,0,2.19,0L15,25.73a1.56,1.56,0,0,1,2.19,0l4.62,4.63a1.55,1.55,0,0,0,2.18,0l6.58-6.58a1.56,1.56,0,0,0,0-2.19L25.93,17a1.55,1.55,0,0,1,0-2.18h0l4.62-4.62a1.55,1.55,0,0,0,0-2.18Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M30.68,16.17A14.48,14.48,0,1,1,16.19,1.7h0A14.47,14.47,0,0,1,30.68,16.17Z"/>\r\n    <path fill="#fff" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M11.23,13.28c0-2.28.95-5.29,5-5.29,3.2,0,5,2,5,4a4.9,4.9,0,0,1-1.35,3.6c-1.59,1.58-1.8,2.38-1.8,3.84h0c0,.19-.5.35-1.12.35H15.51c-.61,0-1.11-.32-1.11-.71a7.58,7.58,0,0,1,.33-1.77,11.61,11.61,0,0,1,1.21-2.63c.32-.41,1.56-.95,1.56-2.33,0-.88-.37-1.37-1.35-1.37C15.33,11,15,12.2,15,12.2a1.51,1.51,0,0,1-1.38,1.08Zm3.17,9a1.13,1.13,0,0,1,1.11-1.12h1.43a1.12,1.12,0,0,1,1.12,1.12h0V24a1.12,1.12,0,0,1-1.12,1.12H15.51A1.13,1.13,0,0,1,14.4,24Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M30.16,24.36,17.49,6.08a2,2,0,0,0-1.64-.92,2,2,0,0,0-1.63.92L1.55,24.36a2.06,2.06,0,0,0-.41,1.19,1.56,1.56,0,0,0,1.29,1.54H29.28a1.56,1.56,0,0,0,1.29-1.54A2.06,2.06,0,0,0,30.16,24.36Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M27.65,5.25A9.26,9.26,0,0,0,12.4,15L3,24.32a4.53,4.53,0,0,0-1.15,2.8v1.67a2,2,0,0,0,2,2h1.7a4.3,4.3,0,0,0,2.74-1.1,3.53,3.53,0,0,0,1-2.29.89.89,0,0,0,0-.23v-.05a.23.23,0,0,1,.07-.19.4.4,0,0,1,.28-.08,1.86,1.86,0,0,0,2-1.48.63.63,0,0,1,.46-.53,1.57,1.57,0,0,0,1.44-1.66v-.09a.38.38,0,0,1,0-.15h.18a2,2,0,0,0,2.15-.59,12.55,12.55,0,0,1,1.31-1.51l.46-.47a9.23,9.23,0,0,0,10-15.09Zm-2.1,4.86a1.92,1.92,0,1,1,0-2.72h0A1.93,1.93,0,0,1,25.55,10.11Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape,i=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <polygon fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n             points="5.88 28.59 4.82 24.23 5.06 5.18 6 2.71 9.65 2.59 19.29 3.06 21.65 4.47 25.41 7.76 25.65 9.53 26.1 21.8 25.52 28.58 23.53 29.29 9.41 28.94 5.88 28.59"/>\r\n    <path fill="#3f3f3f"\r\n          d="M22.26,18.19a.35.35,0,0,1-.35.35H8.73a.35.35,0,0,1-.35-.35h0a.34.34,0,0,1,.33-.35h13.2a.35.35,0,0,1,.35.35Z"/>\r\n    <path fill="#3f3f3f"\r\n          d="M22.26,21.8a.35.35,0,0,1-.35.35H8.73a.34.34,0,0,1-.35-.33v0h0a.35.35,0,0,1,.35-.35H21.91a.35.35,0,0,1,.35.35Z"/>\r\n    <path fill="#3f3f3f"\r\n          d="M22.14,25.18a.35.35,0,0,1-.35.35H8.61a.35.35,0,0,1-.35-.35h0a.35.35,0,0,1,.35-.35H21.79a.35.35,0,0,1,.35.35Z"/>\r\n    <path fill="#3f3f3f"\r\n          d="M22.26,14.69a.35.35,0,0,1-.35.35H8.73a.35.35,0,0,1-.35-.35h0a.35.35,0,0,1,.35-.35H21.91a.35.35,0,0,1,.35.35Z"/>\r\n    <path fill="#3f3f3f"\r\n          d="M24.48,30.13H6.3A2.28,2.28,0,0,1,4,27.87V4.07A2.28,2.28,0,0,1,6.29,1.8H20.41l.14.13.13.14,5.8,5.69.14.13.14.14V27.85a2.28,2.28,0,0,1-2.28,2.28ZM6.73,3.83a.82.82,0,0,0-.81.81V27.29a.82.82,0,0,0,.81.8H24a.81.81,0,0,0,.82-.8h0V9.69H18.29V3.83ZM20.29,7.69h3.25L20.29,4.5Z"/>\r\n    <path fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M23.28,28.58A.58.58,0,0,1,22.7,28V26.36a.58.58,0,0,0-.58-.58H20.48a.58.58,0,0,1-.58-.58V23a.58.58,0,0,1,.58-.58h1.64a.58.58,0,0,0,.58-.58V20.17a.6.6,0,0,1,.58-.59h2.24a.6.6,0,0,1,.58.59V21.8a.58.58,0,0,0,.58.58h1.63a.58.58,0,0,1,.58.58V25.2a.58.58,0,0,1-.58.58H26.68a.58.58,0,0,0-.58.58V28a.58.58,0,0,1-.58.58Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <polygon fill="',e+=(0,r.$escape)(t.fillColor),e+='"\r\n             points="6.35 4 5.88 28.59 7.53 29.77 19.88 29.41 22 28.82 26.23 24.47 27.06 10.94 26.71 3.41 24.94 2.47 6.71 3.06 6.35 4"/>\r\n    <path fill="#3f3f3f"\r\n          d="M23.17,16.73a.37.37,0,0,0-.36-.35H9.33a.37.37,0,0,0-.36.35H9a.36.36,0,0,0,.36.36H22.81a.36.36,0,0,0,.36-.36Z"/>\r\n    <path fill="#3f3f3f"\r\n          d="M23.17,13a.36.36,0,0,0-.36-.36H9.33A.36.36,0,0,0,9,13H9a.37.37,0,0,0,.36.35H22.81A.37.37,0,0,0,23.17,13Z"/>\r\n    <path fill="#3f3f3f"\r\n          d="M23.17,9.35A.37.37,0,0,0,22.81,9H9.33A.37.37,0,0,0,9,9.35H9a.36.36,0,0,0,.36.36H22.81a.36.36,0,0,0,.36-.36Z"/>\r\n    <path fill="#3f3f3f"\r\n          d="M23.17,20.31a.37.37,0,0,0-.36-.35H9.33a.37.37,0,0,0-.36.35H9a.36.36,0,0,0,.36.36H22.81a.36.36,0,0,0,.36-.36Z"/>\r\n    <path fill="#3f3f3f"\r\n          d="M25.62,2a2.32,2.32,0,0,1,2.32,2.32V24.63l-.14.14-.14.13-5.93,5.82-.14.14-.14.14H7a2.32,2.32,0,0,1-2.32-2.32h0V4.34A2.32,2.32,0,0,1,7,2H25.62ZM7.46,28.92H19.28v-6H26v-18a.83.83,0,0,0-.83-.83H7.46a.83.83,0,0,0-.83.83V28.09A.83.83,0,0,0,7.46,28.92Zm13.87-4v3.27L24.65,25Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M10.36,2.52A7.93,7.93,0,0,0,9,2.77H9A6.45,6.45,0,0,0,4.51,9.1a6.52,6.52,0,0,0,6.23,6.77H11V29.19l1.49.69v.95h2.1L14.54,6h3.54V29.19l1.5.69v.95h2.09L21.59,6h3.7V2.52Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M28.87,16.67a.82.82,0,0,0,.3-1.12.86.86,0,0,0-.3-.3L13.94,4.65c-.54-.39-1-.16-1,.52V9.78A1.22,1.22,0,0,1,11.73,11H4.32a1.22,1.22,0,0,0-1.21,1.22v7.49a1.22,1.22,0,0,0,1.21,1.22h7.41a1.21,1.21,0,0,1,1.21,1.21h0v4.61c0,.67.46.9,1,.52Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M29,16h0a1.3,1.3,0,0,0-.07-.33c0-.42-.84-1.16-1.28-1.43L7.17,2a1.76,1.76,0,0,0-1.32-.26h0A1.16,1.16,0,0,0,5.33,2h0l7.25,14L5.33,30h0a1.09,1.09,0,0,0,.52.27h0A1.76,1.76,0,0,0,7.17,30L27.63,17.83c.44-.27,1.28-1,1.28-1.43a1.3,1.3,0,0,0,.07-.33h0Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M24.28,29.33A2.58,2.58,0,0,1,23.1,29l-4.89-2.64A3.73,3.73,0,0,0,16.47,26a3.7,3.7,0,0,0-1.73.37L9.85,29a2.56,2.56,0,0,1-1.18.34,1.43,1.43,0,0,1-1.14-.52,2,2,0,0,1-.33-1.75l1-5.47a4.17,4.17,0,0,0-1.08-3.3l-4-3.84a1.88,1.88,0,0,1-.7-2,1.84,1.84,0,0,1,1.72-1.17l5.5-.74a4.22,4.22,0,0,0,2.81-2l2.4-5a1.87,1.87,0,0,1,1.64-1.26,1.87,1.87,0,0,1,1.64,1.26l2.41,5a4.15,4.15,0,0,0,2.8,2l5.51.74a1.85,1.85,0,0,1,1.71,1.17,1.83,1.83,0,0,1-.7,2l-4,3.84a4.14,4.14,0,0,0-1.07,3.29l1,5.47a2,2,0,0,1-.33,1.75,1.43,1.43,0,0,1-1.14.52Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M16.49,3.74a.78.78,0,0,0-1.07-.28.75.75,0,0,0-.28.28L5,18.08c-.37.52-.15,1,.49,1H9.91a1.17,1.17,0,0,1,1.17,1.17h0v7.1a1.18,1.18,0,0,0,1.17,1.16h7.18a1.17,1.17,0,0,0,1.17-1.17h0v-7.1A1.17,1.17,0,0,1,21.7,19h4.51c.64,0,.86-.43.48-.95Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10" \r\n          d="M7.4,5C7,4.8,6.6,5,6.4,5.4c-0.1,0.1-0.1,0.3,0,0.4l1.3,17.5c0,0.6,0.5,0.8,1,0.4l3.4-2.8\r\n\tc0.5-0.4,1.2-0.3,1.6,0.2c0,0,0,0,0,0l4.5,5.5c0.4,0.5,1.1,0.6,1.6,0.2c0,0,0,0,0,0l5.5-4.6c0.5-0.4,0.6-1.1,0.2-1.6c0,0,0,0,0,0\r\n\tL21,15.1c-0.4-0.5-0.3-1.2,0.1-1.6l3.4-2.8c0.5-0.4,0.4-0.9-0.2-1.1L7.4,5z"/>\r\n</svg>\r\n'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape,i=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M7.2,14.9H3.7c-.4,0-.7.3-.8.8V28.5c0,.4.3.7.8.8H7.2c.4,0,.7-.3.8-.8V15.7C7.9,15.2,7.6,14.9,7.2,14.9Z"/>\r\n    <path fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M10.8,7.9h3.5a.79.79,0,0,1,.8.8V28.5a.79.79,0,0,1-.8.8H10.8a.79.79,0,0,1-.8-.8V8.7C10.1,8.3,10.4,7.9,10.8,7.9Z"/>\r\n    <path fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M25.1,8h3.5a.79.79,0,0,1,.8.8V28.6a.79.79,0,0,1-.8.8H25.1a.79.79,0,0,1-.8-.8V8.8A.86.86,0,0,1,25.1,8Z"/>\r\n    <path fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M17.9,19.9h3.5a.79.79,0,0,1,.8.8v7.8a.79.79,0,0,1-.8.8H17.9a.79.79,0,0,1-.8-.8V20.7C17.2,20.2,17.5,19.9,17.9,19.9Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 56">\r\n  <path stroke="#3f3f3f" transform="rotate(-44 14.147195816040043,29.311956405639645) " d="m22.48496,6.139239a10.573254,11.136632 0 0 1 3.338127,0.652288a9.244045,9.736598 0 0 1 5.769976,9.259314a9.4253,9.927512 0 0 1 -2.733941,7.127445l-18.503194,19.727748a6.585627,6.936531 0 0 1 -1.827662,1.272758a4.380348,4.613748 0 0 1 -2.129755,0.572741a5.603824,5.902415 0 0 1 -2.114651,-0.572741a5.55851,5.854687 0 0 1 -1.510465,-1.272758a6.177801,6.506975 0 0 1 -1.208372,-1.925046a4.531394,4.772842 0 0 1 -0.302093,-2.227326a8.307556,8.750211 0 0 1 1.510465,-4.168282l16.977624,-18.534538a2.326116,2.450059 0 0 1 1.223476,-0.636379a2.311011,2.43415 0 0 1 1.510465,0.636379a1.706825,1.797771 0 0 1 0.619291,1.288667a2.054232,2.163689 0 0 1 -0.619291,1.590947l-17.294822,18.216348a2.311011,2.43415 0 0 0 -0.604186,1.590947a1.9485,2.052322 0 0 0 1.782348,1.940956a1.510465,1.590947 0 0 0 1.223476,-0.636379l18.533403,-19.823205a5.060057,5.329674 0 0 0 1.510465,-4.168282a6.404371,6.745617 0 0 0 -1.510465,-4.152373a4.531394,4.772842 0 0 0 -3.64022,-1.909137a4.863697,5.122851 0 0 0 -3.957418,1.909137l-18.503194,19.807296a11.14723,11.741192 0 0 0 -2.114651,3.181895a9.334672,9.832055 0 0 0 0,7.381996a11.14723,11.741192 0 0 0 2.114651,3.181895a8.790905,9.259314 0 0 0 6.343952,2.879615a8.594545,9.052491 0 0 0 6.404371,-2.879615l18.820391,-19.489106a1.510465,1.590947 0 0 1 1.208372,-0.636379a1.842767,1.940956 0 0 1 1.208372,0.636379a1.616197,1.702314 0 0 1 0.619291,1.288667a1.510465,1.590947 0 0 1 -0.619291,1.272758l-18.503194,19.807296a14.878078,15.670832 0 0 1 -4.244406,3.181895a12.400916,13.061679 0 0 1 -4.863697,0.970478a12.325393,12.982131 0 0 1 -4.848592,-0.970478a9.87844,10.404796 0 0 1 -4.244406,-3.181895a12.400916,13.061679 0 0 1 -2.733941,-4.470562a13.760334,14.493531 0 0 1 -0.906279,-5.106941a15.512474,16.33903 0 0 1 0.906279,-5.44104a12.627486,13.300321 0 0 1 2.733941,-4.470562l18.503194,-19.807296a9.379986,9.879784 0 0 1 6.676254,-2.895524z" stroke-miterlimit="10" fill="',e+=(0,r.$escape)(t.fillColor),e+='"/>\r\n</svg>\r\n'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M26.9,20.3h0l-.1-.1-.1-.1-4.9-5.2h0V4.1H23a.94.94,0,0,0,1-1V2.5a.94.94,0,0,0-1-1H8.4a.94.94,0,0,0-1,1v.6a.94.94,0,0,0,1,1H9.7V14.9h0l-5,5.2-.1.1-.1.1h0c-.1.1-.1.2-.1.4a.79.79,0,0,0,.8.8H15v8.6a1,1,0,0,0,.8.9h0a1.22,1.22,0,0,0,.8-.9V21.5h9.7a.77.77,0,0,0,.8-.7v-.1A.76.76,0,0,1,26.9,20.3Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=(0,r.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M30.2,20.4,13.6,2.4H3L2.4,3v9.4L19.5,31l1.1-.2L30,21.5ZM6.2,7.5A1.75,1.75,0,0,1,4.5,5.8,1.75,1.75,0,0,1,6.2,4.1,1.75,1.75,0,0,1,7.9,5.8,1.69,1.69,0,0,1,6.2,7.5Z"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape,i=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <circle fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" cx="7.53" cy="27.68" r="1"/>\r\n    <circle fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" cx="25.53" cy="27.68" r="1"/>\r\n    <path fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M26.53,15.76V14.61A10,10,0,0,0,16.6,4.68h-.14a10,10,0,0,0-9.93,9.93v1.15a6.5,6.5,0,0,0,1,12.92l.68-.3.32-.7v-13a8,8,0,0,1,16,0v13l.35.61.65.39a6.5,6.5,0,0,0,1-12.92Z"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="10.53" y="18.68" width="2" height="8" rx="0.99"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="20.53" y="18.68" width="2" height="8" rx="0.99"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="15.53" y="19.68" width="2" height="6" rx="0.99"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape,i=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M9,12v2c0,4.4,2.6,8,7,8s7-3.6,7-8V12h2v2.07C25,19.53,21.53,24,16.07,24h-.14C10.47,24,7,19.53,7,14.07V12Z"/>\r\n    <circle fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" cx="8" cy="12" r="1"/>\r\n    <circle fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" cx="24" cy="12" r="1"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="15" y="23" width="2" height="5" rx="0.99"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="8" y="27" width="16" height="2" rx="0.99"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="12" y="4" width="8" height="16" rx="3.95"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape,i=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\r\n    <path fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\r\n          d="M18.7,4.62a5.88,5.88,0,0,0-3,1.79l-5.12,4.74H4.91a2,2,0,0,0-2,2v6.38a2,2,0,0,0,2,2h5.66l5.12,4.73a6,6,0,0,0,3,1.8.48.48,0,0,0,.51-.45V5.13C19.14,4.75,19,4.62,18.7,4.62Z"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="24" y="20.12" width="2" height="8" rx="0.99" transform="translate(-9.73 24.74) rotate(-45)"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="20.95" y="6.88" width="8" height="2" rx="0.99"\r\n          transform="translate(1.74 19.95) rotate(-45)"/>\r\n    <rect fill="',e+=n(i),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="22" y="15" width="6" height="2" rx="0.99"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape;return e+='<dialog class="fv__ui-layer fv__place-redaction-dialog" >\r\n   <div class="fv__place-redaction-dialog-header">\r\n      <div class="fv__place-redaction-dialog-title">',e+=n(r.i18n("viewer_:dialog.placeRedactionDialog.title")),e+='</div>\r\n      <div class="fv__place-redaction-dialog-close"><i class="fv__place-redaction-dialog-close-icon">x</i></div>\r\n   </div>\r\n   <div class="fv__place-redaction-dialog-body">\r\n        <div class="fv__redaction-container">\r\n        <label>\r\n            <input name="redaction-page-type" class="redaction-page-radio" type="radio" checked value="1" /><span>',e+=n(r.i18n("viewer_:dialog.placeRedactionDialog.allPage")),e+='</span>\r\n        </label>\r\n        </div>\r\n        <div class="fv__redaction-container">\r\n            <label>\r\n                <input name="redaction-page-type" class="redaction-page-radio" type="radio" value="2" /><span>',e+=n(r.i18n("viewer_:dialog.placeRedactionDialog.specificPage")),e+='</span>\r\n                <div class="fv__redaction-range">',e+=n(r.i18n("viewer_:dialog.placeRedactionDialog.pageRange")),e+=': <input type="text" class="fv__redaction-page-range" disabled placeholder="',e+=n(t),e+='"/></div>\r\n                </label>\r\n        </div> \r\n   </div>\r\n   <div class="fv__place-redaction-dialog-footer">\r\n        <div class="fv__redaction-container footer" style="text-align:right">\r\n            <button type="button" class="fv__redaction-btn fv__ui-dialog-ok-button">',e+=n(r.i18n("viewer_:dialog.placeRedactionDialog.OK")),e+='</button>\r\n            <button type="button" class="fv__redaction-cancel fv__ui-dialog-cancel-button">',e+=n(r.i18n("viewer_:dialog.placeRedactionDialog.Cancel")),e+="</button>\r\n        </div>\r\n   </div>\r\n</dialog>"}},function(t,e,n){n(26);t.exports=function(t){"use strict";t=t||{};return'<div class="fv-callout">\r\n    <div class="fv__shape-control callout">\r\n        <canvas class="fv__shape-control-previewer"></canvas>\r\n        <div class="fv__shape-control-move-area"></div>\r\n        <div class="fv__shape-control-inner-area">\r\n            <div class="fv__shape-controller callout left text"></div>\r\n            <div class="fv__shape-controller callout top text"></div>\r\n            <div class="fv__shape-controller callout right text"></div>\r\n            <div class="fv__shape-controller callout bottom text"></div>\r\n        </div>\r\n        <div class="fv__shape-control-text-area"></div>\r\n        <div class="fv__shape-controller callout calloutStart"></div>\r\n        <div class="fv__shape-controller callout calloutKnee"></div>\r\n    </div>\r\n</div>','<div class="fv-callout">\r\n    <div class="fv__shape-control callout">\r\n        <canvas class="fv__shape-control-previewer"></canvas>\r\n        <div class="fv__shape-control-move-area"></div>\r\n        <div class="fv__shape-control-inner-area">\r\n            <div class="fv__shape-controller callout left text"></div>\r\n            <div class="fv__shape-controller callout top text"></div>\r\n            <div class="fv__shape-controller callout right text"></div>\r\n            <div class="fv__shape-controller callout bottom text"></div>\r\n        </div>\r\n        <div class="fv__shape-control-text-area"></div>\r\n        <div class="fv__shape-controller callout calloutStart"></div>\r\n        <div class="fv__shape-controller callout calloutKnee"></div>\r\n    </div>\r\n</div>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,i=t.borderWidth,o=t.borderColor,a=t.position,s=t.left,c=t.top,u=t.height,d=t.width,l=t.background,h=t.transform,f=t.rotation,p=t.alignStyle,g=t.align,v=(t.fs,t.fontSize),m=(t.fcolor,t.color),y=t.transformStyle,w=t.style,b=t.maxLengthAttr,A=t.maxLength,P=t.spellCheckAttr,E=t.isNoSpellCheck,x=t.isMultiline,S=r.$escape,C=t.isNoScroll,D=t.ro,I=t.value,R=t.comb,T=t.diffLen,_=t.i,k=t.v,F=t.type,M=t.isPassword,O=t.readonly,L=t.isSafari;n="border:"+i+"px solid "+o+";",a="left:"+s+";top:"+c+";height:"+u+";width:"+d+";",l="background-color:"+l+";",h="";switch(0!==f&&(h="transform:rotate("+f+"deg)"),g){case 0:p="text-align:left;";break;case 1:p="text-align:center;";break;case 2:p="text-align:right;"}y=h,w=n+a+l+p+("font-size:"+v+";")+("color:"+m+";"),b=A?"maxlength="+A:"",P="spellcheck="+!E;if(x)w+="resize: none;",e+='\r\n        <div class="textCombInput"><textarea class="fv__pdf-form-field-combo-textarea ',e+=S(C?"fv__no-scroll-text":"fv__scroll-text"),e+='" ',e+=S(D),e+=' style="',e+=S(w),e+='">',e+=S(I),e+="</textarea></div>\r\n";else if(R){e+='\r\n        <div class="textCombInput" >\r\n            <div class="textCombContainer">\r\n';for(T=A-I.length,_=0;_<A;_++){k=I[_];2==g&&A>I.length&&_<T&&(k=""),2==g&&_>=T&&(k=I[_-T]),e+='\r\n                <div class="textComb" style="',e+=S(n),e+='" data-index="',e+=S(_),e+='">',e+=S(k),e+="</div>\r\n"}e+='\r\n            </div>\r\n\r\n            <input type="',e+=S(F),e+='" ',e+=S(D),e+=' style="',e+=S(w),e+='" ',e+=S(b),e+=" ",e+=S(P),e+=' value="',e+=S(I),e+='" tabindex="-1">\r\n        </div>\r\n    '}else{D=O?"readonly":"";e+='\r\n        <div class="textCombInput">\r\n        <input  type="',e+=S(F=M?"password":"text"),e+='" ',e+=S(D),e+=" ",e+=S(b),e+=" ",e+=S(P),e+=' style="',e+=S(w+y),e+=S(L&&"box-sizing: content-box; padding: 0;"),e+='" value="',e+=S(I),e+='" tabindex="-1"/>\r\n            <div class="dtbox"></div>\r\n    </div>\r\n        '}return e}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,i=t.borderWidth,o=t.borderStyle,a=t.borderColor,s=(t.position,t.background),c=t.align,u=(t.fs,t.fontSize),d=(t.fcolor,t.color),l=(t.style,t.optsClass,r.$escape),h=t.i,f=t.options,p=t.optClass,g=t.readonly;n="border-width:"+i+"px;border-style:"+o+";border-color:"+a+";box-sizing:border-box;",s="background-color:"+s+";outline:none;";switch(c){case 0:c="text-align:left;";break;case 1:c="text-align:center;";break;case 2:c="text-align:right;"}e+='\r\n<div class="form-field-options" style="',e+=l(n+"left:0px;top:0px;height:100%;width:100%;"+s+c+"overflow-y:auto;"+("font-size:"+u+";")+("color:"+d+";")),e+='" tabindex="-1">\r\n';for(h=0;h<f.length;h++){p="form-field-option";f[h].selected&&(p+=" selected"),g&&(p+=" readonly"),e+='\r\n<div \r\n    class="',e+=l(p),e+='" \r\n    data-val="',e+=l(f[h].value),e+='" \r\n    data-index="',e+=l(h),e+='"\r\n    style="white-space: nowrap; overflow-x: hidden;"\r\n    tabindex="-1"\r\n    >',e+=l(f[h].label),e+="</div>\r\n"}return e+="\r\n</div>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,i=t.borderWidth,o=t.borderColorHex,a=(t.position,t.background),s=t.align,c=(t.style,r.$escape),u=t.i,d=t.options,l=t.optClass;n="border:"+i+"px solid "+o+";box-sizing:border-box;",a="background-color:"+a+";outline:none;";switch(s){case 0:s="text-align:left;";break;case 1:s="text-align:center;";break;case 2:s="text-align:right;"}e+='\r\n<div class="checkbox form-field-options" style="',e+=c(n+"left:0px;top:100%;max-height:200px;width:100%;position:absolute;"+a+s+"overflow-y:auto"),e+='" tabindex="-1">\r\n    ';for(u=0;u<d.length;u++){l="form-field-option";d[u].selected&&(l+=" selected"),e+='\r\n    <div \r\n        tabindex="-1"\r\n        class="',e+=c(l),e+='" \r\n        data-val="',e+=c(d[u].value),e+='" \r\n        data-index="',e+=c(u),e+='"\r\n        style="white-space: nowrap; overflow-x: hidden;"\r\n    >',e+=c(d[u].label),e+="</div>\r\n    "}return e+="\r\n</div>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<?xml version="1.0" standalone="no"?><svg t="1589451362275" viewBox="-100 -100 1224 1224" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path fill="',e+=(0,r.$escape)(t.fillColor),e+='" d="M997.888 70.144C686.592 261.12 460.8 502.272 358.912 623.104l-248.832-195.072-110.08 88.576 429.568 437.248c73.728-189.44 308.224-559.616 594.432-822.784l-26.112-60.928m0 0z"></path></svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";var e="",n=(t=t||{}).small,i=r.$escape,o=t.fillColor;return e+='<?xml version="1.0" standalone="no"?><svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\r\n',0==n?(e+='\r\n<path stroke="',e+=i(o),e+='" d="M15 15 L185 185 M15 185 L185 15" style="stroke-width:12"></path></svg>\r\n'):(e+='\r\n<path stroke="',e+=i(o),e+='" d="M40 40 L160 160 M40 160 L160 40" style="stroke-width:30"></path></svg>\r\n'),e}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<?xml version="1.0" standalone="no"?><svg t="1589451342686" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path fill="',e+=(0,r.$escape)(t.fillColor),e+='" d="M512 69.479l442.498 442.498-442.498 442.498-442.498-442.498 442.498-442.498z"></path></svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<?xml version="1.0" standalone="no"?><svg class="icon" viewBox="0 0 390 390" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">  <rect height="270" width="270" y="60" x="60" fill="',e+=(0,r.$escape)(t.fillColor),e+='"/></svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg viewBox="0 0 300 300"  width="300" height="300" xmlns="http://www.w3.org/2000/svg">\r\n  <circle cx="151" cy="151" r="85" fill="',e+=(0,r.$escape)(t.fillColor),e+='"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg viewBox="0 0 400 400"  width="400" height="400" xmlns="http://www.w3.org/2000/svg">\r\n  <path id="svg_4" d="m30.75,155.65323l131.477663,0l40.627609,-124.90323l40.627633,124.90323l131.477639,0l-106.367469,77.193558l40.629712,124.90323l-106.367515,-77.19566l-106.367492,77.19566l40.629723,-124.90323l-106.367503,-77.193558z" fill="',e+=(0,r.$escape)(t.fillColor),e+='"/>\r\n</svg>'}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$escape;return e+='<dialog class="fv__dialog fv__annot-reply-dialog trust-dia-dibox">\r\n  <p><span>',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.diaTitle")),e+='</span><i class="fv__icon-layer-close"></i></p>\r\n  <div class="fv__trust-tip-container">\r\n    <p><i class="fv__icon-dialog-level-warning"></i><span>',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.disableTip")),e+='</span></p>\r\n  </div>\r\n  <div class="fv__textarea-container trust-dia-inbox">\r\n      <label>\r\n          <input type="checkbox" name="trustToClose">\r\n          <span>',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.rememberTime")),e+='</span>\r\n      </label>\r\n  </div>\r\n  <div class="fv__btn_reply_container btn-bot-box">\r\n      <button type="button" class="fv__btn fv__btn-reply trust-ok-btn">',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.play")),e+='</button>\r\n      <button type="button" class="fv__btn fv__btn-close trust-no-btn">',e+=n(r.i18n("viewer_:preferenceDialog.safeReading.reject")),e+="</button>\r\n  </div>\r\n</dialog>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+="<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\r\n  <title>Document</title>\r\n  <script>\r\n    window.initJS = function (PDFJSGlobal) {\r\n      window.PDFJSGlobal = PDFJSGlobal\r\n      function appClosure() {\r\n        for (var i in window) {\r\n          if (i != 'PDFJSGlobal'\r\n            && i != 'location'\r\n            && i != 'window'\r\n            && i != 'appClosure') {\r\n            eval('var ' + i + '=null');\r\n          }\r\n        }\r\n        var proto = Object.getPrototypeOf ? Object.getPrototypeOf(window.PDFJSGlobal.doc) : window.PDFJSGlobal.doc.__proto__;\r\n        Object.getOwnPropertyNames(proto).forEach(function (key) {\r\n          if (key === \"constructor\") return;\r\n          var descriptor = Object.getOwnPropertyDescriptor(proto, key);\r\n          if(typeof descriptor.value === 'function') {\r\n            window[key] = function () {\r\n              return window.PDFJSGlobal.doc[key].apply(window.PDFJSGlobal.doc, arguments)\r\n            }\r\n          } else {\r\n              if(window[key]){window[key] = window.PDFJSGlobal.doc[key];return}\r\n            Object.defineProperty(window, key, {\r\n              get: function () {\r\n                return window.PDFJSGlobal.doc[key];\r\n              }, set: function (val) {\r\n                window.PDFJSGlobal.doc[key] = val\r\n              }\r\n            })\r\n          }\r\n        })\r\n\r\n        return {\r\n          docClosure: function (f) {\r\n            with (PDFJSGlobal) {\r\n              with (PDFJSGlobal.doc) {\r\n                try {\r\n                  eval(f);\r\n                } catch (e) {\r\n                  //",e+=(0,r.$escape)(t.log||""),e+="&&console.warn(e)\r\n                }\r\n                return function (f) {\r\n                  return eval(f)\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      window.app = appClosure();\r\n    }\r\n\r\n    window.runJS = function (data, engineEvent) {\r\n      var doc = window.PDFJSGlobal.doc;\r\n      window.PDFJSGlobal.event = engineEvent;\r\n\r\n      doc.timeStamp = engineEvent && engineEvent.timeStamp;\r\n\r\n      const resetDocClosure = function () {\r\n        doc.exec = app.docClosure.call(doc, data.code);\r\n      }\r\n\r\n      switch (data.action) {\r\n        case 'execute':\r\n          doc.exec(data.code, data, engineEvent);\r\n          break;\r\n        case 'reset':\r\n          resetDocClosure();\r\n          return;\r\n        default:\r\n          if (data.global) { // 兼容旧版本\r\n            return resetDocClosure();\r\n          }\r\n      }\r\n      window.PDFJSGlobal.event = null;\r\n    }\r\n  <\/script>\r\n</head>\r\n\r\n<body>\r\n</body>\r\n\r\n</html>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="",n=r.$each,i=t.actions,o=(t.$value,t.$index,r.$escape);return e+='<div class="fv__selection-tool-tip-container">\r\n    \x3c!--<div class="fv__selection-tool-tip-items-container">--\x3e\r\n        <div class="fv__selection-tool-tip-items">\r\n            ',n(i,(function(t,n){e+='\r\n            <div class="fv__selection-tool-tip-item ',e+=o(t.iconClass),e+='" action="',e+=o(t.name),e+='"></div>\r\n            '})),e+="\r\n        </div>\r\n    \x3c!--</div>--\x3e\r\n</div>"}},function(t,e,n){n(26);t.exports=function(t){"use strict";var e="";return e+='<div class="fv__rendering-container" >\r\n    ',(t=t||{}).isIE?e+='\r\n    <ul class="fv__loading-animation">\r\n        <li></li>\r\n        <li></li>\r\n        <li></li>\r\n        <li></li>\r\n        <li></li>\r\n    </ul>\r\n    ':(e+='\r\n    <img class="fv__rendering-svg" ',e+='src="'+n(290)+'"',e+=' aria-live="assertive" aria-busy="true">\r\n    '),e+="\r\n</div>"}},function(t,e,n){var r=n(26);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<div class="fv__ui-print-process">\r\n    <div class="fv__ui-print-process-title">',e+=(0,r.$escape)(t.title),e+='</div>\r\n    <div class="fv__ui-print-process-digital-progress"><span class="fv__ui-print-process-current">0</span>/<span class="fv__ui-print-process-total">0</span></div>\r\n    <div class="fv__ui-print-process-bar">\r\n        <div class="fv__ui-print-process-percent"></div>\r\n    </div>\r\n</div>'}},function(t,e,n){t.exports=function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.counter=0,this.modes={iframe:"iframe",popup:"popup"},this.standards={strict:"strict",loose:"loose",html5:"html5"};var r={mode:this.modes.iframe,standard:this.standards.html5,popHt:500,popWd:400,popX:200,popY:200,popTitle:"",popClose:!0,extraCss:"",extraHead:"",retainAttr:["id","class","style"]};this.settings=Object.assign({},r,n),this.idPrefix="printArea_",this.ele=1===t.nodeType?t:document.querySelector(t)}var n,r,i;return n=e,(r=[{key:"print",value:function(){var t=this;this.counter++;for(var e=document.querySelectorAll("[id^="+this.idPrefix+"]");e.length;)e[0].parentNode.removeChild(e[0]),e=document.querySelectorAll("[id^="+this.idPrefix+"]");this.settings.id=this.idPrefix+this.counter;var n=this.getPrintWindow();this.write(n.doc,this.ele),setTimeout((function(){t.windowPrint(n)}),1e3)}},{key:"windowPrint",value:function(t){var e=t.win;e.focus(),e.print(),this.settings.mode===this.modes.popup&&this.settings.popClose&&setTimeout((function(){e.close()}),1e3)}},{key:"write",value:function(t,e){t.open(),t.write(this.docType()+"<html>"+this.getHead()+this.getBody(e)+"</html>"),t.close()}},{key:"docType",value:function(){return this.settings.mode===this.modes.iframe?"":this.settings.standard===this.standards.html5?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+(this.settings.standard===this.standards.loose?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+(this.settings.standard===this.standards.loose?"loose":"strict")+'.dtd">'}},{key:"getHead",value:function(){var t="";this.settings.extraHead&&this.settings.extraHead.replace(/([^,]+)/g,(function(e){t+=e}));var e=document.querySelectorAll("link");return e=Array.from(e).filter((function(t){var e=t.getAttribute("rel");return e&&"stylesheet"===e.toLowerCase()})).filter((function(t){var e=t.getAttribute("media");return!e||"print"===e.toLowerCase()||"all"===e.toLowerCase()})).map((function(t){var e=t.getAttribute("href");return'<link type="text/css" rel="stylesheet" href="'.concat(e,'" >')})),this.settings.extraCss&&this.settings.extraCss.replace(/([^,\s]+)/g,(function(e){t+='<link type="text/css" rel="stylesheet" href="'+e+'">'})),"<head><title>"+this.settings.popTitle+"</title>"+t+e.join()+"</head>"}},{key:"getBody",value:function(t){var e="",n=this.settings.retainAttr,r=this.getFormData(t),i="";return n.forEach((function(t){var e=r.getAttribute(t);e&&(i+=(i.length>0?" ":"")+t+"='"+e+"'")})),"<body>"+(e+="<div "+i+">"+r.innerHTML+"</div>")+"</body>"}},{key:"getFormData",value:function(t){var e=t.cloneNode(!0),n=e.querySelectorAll("input,select,textarea");return Array.from(t.querySelectorAll("input,select,textarea")).forEach((function(t,e){var r=t.getAttribute("type");if(!r){var i=t.nodeName;r="SELECT"===i?"select":"TEXTAREA"===i?"textarea":""}var o=n[e];if("radio"===r||"checkbox"===r)o.removeAttribute("checked"),t.checked&&o.setAttribute("checked",!0);else if("text"===r||""===r)o.setAttribute("value",t.textContent);else if("select"===r){var a=t.querySelectorAll("option"),s=o.querySelectorAll("option");Array.from(a).forEach((function(t,e){s[e].removeAttribute("selected"),t.selected&&s[e].setAttribute("selected",!0)}))}else"textarea"===r&&(o.textContent=t.value)})),e}},{key:"getPrintWindow",value:function(){switch(this.settings.mode){case this.modes.iframe:var t=this.Iframe();return{win:t.contentWindow||t,doc:t.doc};case this.modes.popup:var e=this.Popup();return{win:e,doc:e.doc}}}},{key:"Iframe",value:function(){var t,e=this.settings.id;try{t=document.createElement("iframe"),document.body.appendChild(t),t.setAttribute("style","border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;"),t.setAttribute("id",e),t.setAttribute("src","#"+(new Date).getTime()),t.doc=null,t.doc=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:t.document}catch(t){throw t+". iframes may not be supported in this browser."}if(null==t.doc)throw"Cannot find document.";return t}},{key:"Popup",value:function(){var t="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no";t+=",width="+this.settings.popWd+",height="+this.settings.popHt,t+=",resizable=yes,screenX="+this.settings.popX+",screenY="+this.settings.popY+",personalbar=no,scrollbars=yes";var e=window.open("","_blank",t);return e.doc=e.document,e}}])&&t(n.prototype,r),i&&t(n,i),e}();return window.PrintArea=e,e}()},function(t,e,n){n(26);t.exports=function(t){"use strict";t=t||{};return'<layer\r\n    name="loupe-tool-dialog"\r\n    class="fv__ui-loupe-tool-dialog right"\r\n    @resizable="{minWidth: 425, minHeight: 517, maxSize: \'body\'}">\r\n    <layer-header class="fv__ui-loupe-tool-header" title="loupe.title" @draggable="{type: \'parent\'}"></layer-header>\r\n    <layer-view class="fv__ui-loupe-body"></layer-view>\r\n    <layer-toolbar name="loupe-tool-zoom-bar" class="loupe-tool-bottom-bar">\r\n        <dropdown\r\n            name="loupe-tool-zoom-dropdown"\r\n            @controller="loupe:LoupeToolScaleListController"\r\n            editable="true"\r\n            selected="5">\r\n            <dropdown-button\r\n                @foreach="scaleItem in scaleList track by value"\r\n                @controller="loupe:LoupeToolScaleController"\r\n                @bind.text="scaleItem.text">\r\n            </dropdown-button>\r\n        </dropdown>\r\n        <span class="text">%</span>\r\n        <div class="slider-bar" @controller="loupe:SliderController">\r\n            <span class="less" name="less"></span>\r\n            <slider\r\n                name="loupe-tool-zoom-slider"\r\n                min="1"\r\n                max="6400"\r\n                step="1"\r\n                value="100">\r\n            </slider>\r\n            <span class="plus" name="plus"></span>\r\n        </div>\r\n        <label class="loupe-lock">\r\n            <input name="lock" class="lh_24" type="checkbox" value=""/>\r\n            <span class="ml_5">loupe.lockButton</span>\r\n        </label>\r\n    </layer-toolbar>\r\n</layer>','<layer\r\n    name="loupe-tool-dialog"\r\n    class="fv__ui-loupe-tool-dialog right"\r\n    @resizable="{minWidth: 425, minHeight: 517, maxSize: \'body\'}">\r\n    <layer-header class="fv__ui-loupe-tool-header" title="loupe.title" @draggable="{type: \'parent\'}"></layer-header>\r\n    <layer-view class="fv__ui-loupe-body"></layer-view>\r\n    <layer-toolbar name="loupe-tool-zoom-bar" class="loupe-tool-bottom-bar">\r\n        <dropdown\r\n            name="loupe-tool-zoom-dropdown"\r\n            @controller="loupe:LoupeToolScaleListController"\r\n            editable="true"\r\n            selected="5">\r\n            <dropdown-button\r\n                @foreach="scaleItem in scaleList track by value"\r\n                @controller="loupe:LoupeToolScaleController"\r\n                @bind.text="scaleItem.text">\r\n            </dropdown-button>\r\n        </dropdown>\r\n        <span class="text">%</span>\r\n        <div class="slider-bar" @controller="loupe:SliderController">\r\n            <span class="less" name="less"></span>\r\n            <slider\r\n                name="loupe-tool-zoom-slider"\r\n                min="1"\r\n                max="6400"\r\n                step="1"\r\n                value="100">\r\n            </slider>\r\n            <span class="plus" name="plus"></span>\r\n        </div>\r\n        <label class="loupe-lock">\r\n            <input name="lock" class="lh_24" type="checkbox" value=""/>\r\n            <span class="ml_5">loupe.lockButton</span>\r\n        </label>\r\n    </layer-toolbar>\r\n</layer>'}},function(t,e,n){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(2)},function(t,e,n){},function(t,e,n){"use strict";n.r(e),n(1);var r={isFirefox:function(){return"undefined"!=typeof InstallTrigger},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!r.isIE()&&!!window.StyleMedia},isChrome:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!!t.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}},i=r,o={show:function(t){var e=document.createElement("div");e.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),e.setAttribute("id","printJS-Modal");var n=document.createElement("div");n.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var r=document.createElement("div");r.setAttribute("class","printClose"),r.setAttribute("id","printClose"),n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","printSpinner"),n.appendChild(i);var a=document.createTextNode(t.modalMessage);n.appendChild(a),e.appendChild(n),document.getElementsByTagName("body")[0].appendChild(e),document.getElementById("printClose").addEventListener("click",(function(){o.close()}))},close:function(){var t=document.getElementById("printJS-Modal");t&&t.parentNode.removeChild(t)}},a=o;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return t.charAt(0).toUpperCase()+t.slice(1)}function u(t,e){for(var n=0;n<t.length;n++)if("object"===s(e)&&-1!==e.indexOf(t[n]))return!0;return!1}function d(t,e){var n,r=document.createElement("div");if(n=e.header,new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(n))r.innerHTML=e.header;else{var i=document.createElement("h1"),o=document.createTextNode(e.header);i.appendChild(o),i.setAttribute("style",e.headerStyle),r.appendChild(i)}t.insertBefore(r,t.childNodes[0])}function l(t){t.showModal&&a.close(),t.onLoadingEnd&&t.onLoadingEnd(),(t.showModal||t.onLoadingStart)&&window.URL.revokeObjectURL(t.printable);var e="mouseover";(i.isChrome()||i.isFirefox())&&(e="focus"),window.addEventListener(e,(function n(){window.removeEventListener(e,n),t.onPrintDialogClose();var r=document.getElementById(t.frameId);r&&r.remove()}))}function h(t,e){try{if(t.focus(),i.isEdge()||i.isIE())try{t.contentWindow.document.execCommand("print",!1,null)}catch(e){t.contentWindow.print()}else t.contentWindow.print()}catch(t){e.onError(t)}finally{i.isFirefox()&&(t.style.visibility="hidden",t.style.left="-1px"),l(e)}}var f=function(t,e){document.getElementsByTagName("body")[0].appendChild(e);var n=document.getElementById(t.frameId);n.onload=function(){if("pdf"!==t.type){var e=n.contentWindow||n.contentDocument;if(e.document&&(e=e.document),e.body.appendChild(t.printableElement),"pdf"!==t.type&&t.style){var r=document.createElement("style");r.innerHTML=t.style,e.head.appendChild(r)}var o=e.getElementsByTagName("img");o.length>0?function(t){var e=t.map((function(t){if(t.src&&t.src!==window.location.href)return function(t){return new Promise((function(e){!function n(){t&&void 0!==t.naturalWidth&&0!==t.naturalWidth&&t.complete?e():setTimeout(n,500)}()}))}(t)}));return Promise.all(e)}(Array.from(o)).then((function(){return h(n,t)})):h(n,t)}else i.isFirefox()||i.isSafari()?setTimeout((function(){return h(n,t)}),1e3):h(n,t)}},p=function(t,e){if(t.base64){var n=Uint8Array.from(atob(t.printable),(function(t){return t.charCodeAt(0)}));g(t,e,n)}else{t.printable=/^(blob|http|\/\/)/i.test(t.printable)?t.printable:window.location.origin+("/"!==t.printable.charAt(0)?"/"+t.printable:t.printable);var r=new window.XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("error",(function(){l(t),t.onError(r.statusText,r)})),r.addEventListener("load",(function(){if(-1===[200,201].indexOf(r.status))return l(t),void t.onError(r.statusText,r);g(t,e,r.response)})),r.open("GET",t.printable,!0),r.send()}};function g(t,e,n){var r=new window.Blob([n],{type:"application/pdf"});r=window.URL.createObjectURL(r),e.setAttribute("src",r),f(t,e)}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m=function(t,e){var n,r="object"===v(n=t.printable)&&n&&(n instanceof HTMLElement||1===n.nodeType)?t.printable:document.getElementById(t.printable);r?(t.printableElement=function t(e,n){for(var r=e.cloneNode(),i=Array.prototype.slice.call(e.childNodes),o=0;o<i.length;o++)if(-1===n.ignoreElements.indexOf(i[o].id)){var a=t(i[o],n);r.appendChild(a)}switch(n.scanStyles&&1===e.nodeType&&r.setAttribute("style",function(t,e){for(var n="",r=(document.defaultView||window).getComputedStyle(t,""),i=0;i<r.length;i++)(-1!==e.targetStyles.indexOf("*")||-1!==e.targetStyle.indexOf(r[i])||u(e.targetStyles,r[i]))&&r.getPropertyValue(r[i])&&(n+=r[i]+":"+r.getPropertyValue(r[i])+";");return n+"max-width: "+e.maxWidth+"px !important; font-size: "+e.font_size+" !important;"}(e,n)),e.tagName){case"SELECT":r.value=e.value;break;case"CANVAS":r.getContext("2d").drawImage(e,0,0)}return r}(r,t),t.header&&d(t.printableElement,t),f(t,e)):window.console.error("Invalid HTML element id: "+t.printable)},y=function(t,e){t.printableElement=document.createElement("div"),t.printableElement.setAttribute("style","width:100%"),t.printableElement.innerHTML=t.printable,f(t,e)},w=function(t,e){t.printable.constructor!==Array&&(t.printable=[t.printable]),t.printableElement=document.createElement("div"),t.printable.forEach((function(e){var n=document.createElement("img");if(n.setAttribute("style",t.imageStyle),n.src=e,i.isFirefox()){var r=n.src;n.src=r}var o=document.createElement("div");o.appendChild(n),t.printableElement.appendChild(o)})),t.header&&d(t.printableElement,t),f(t,e)};function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var A=function(t,e){if("object"!==b(t.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof t.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!t.properties||!Array.isArray(t.properties))throw new Error("Invalid properties array for your JSON data.");t.properties=t.properties.map((function(e){return{field:"object"===b(e)?e.field:e,displayName:"object"===b(e)?e.displayName:e,columnSize:"object"===b(e)&&e.columnSize?e.columnSize+";":100/t.properties.length+"%;"}})),t.printableElement=document.createElement("div"),t.header&&d(t.printableElement,t),t.printableElement.innerHTML+=function(t){var e=t.printable,n=t.properties,r='<table style="border-collapse: collapse; width: 100%;">';t.repeatTableHeader&&(r+="<thead>"),r+="<tr>";for(var i=0;i<n.length;i++)r+='<th style="width:'+n[i].columnSize+";"+t.gridHeaderStyle+'">'+c(n[i].displayName)+"</th>";r+="</tr>",t.repeatTableHeader&&(r+="</thead>"),r+="<tbody>";for(var o=0;o<e.length;o++){r+="<tr>";for(var a=0;a<n.length;a++){var s=e[o],u=n[a].field.split(".");if(u.length>1)for(var d=0;d<u.length;d++)s=s[u[d]];else s=s[n[a].field];r+='<td style="width:'+n[a].columnSize+t.gridStyle+'">'+s+"</td>"}r+="</tr>"}return r+"</tbody></table>"}(t),f(t,e)};function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var E=["pdf","html","image","json","raw-html"],x=function(){var t={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(t){throw t},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},e=arguments[0];if(void 0===e)throw new Error("printJS expects at least 1 attribute.");switch(P(e)){case"string":t.printable=encodeURI(e),t.fallbackPrintable=t.printable,t.type=arguments[1]||t.type;break;case"object":for(var n in t.printable=e.printable,t.fallbackPrintable=void 0!==e.fallbackPrintable?e.fallbackPrintable:t.printable,t.fallbackPrintable=t.base64?"data:application/pdf;base64,".concat(t.fallbackPrintable):t.fallbackPrintable,t)"printable"!==n&&"fallbackPrintable"!==n&&(t[n]=void 0!==e[n]?e[n]:t[n]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+P(e))}if(!t.printable)throw new Error("Missing printable information.");if(!t.type||"string"!=typeof t.type||-1===E.indexOf(t.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");t.showModal&&a.show(t),t.onLoadingStart&&t.onLoadingStart();var r=document.getElementById(t.frameId);r&&r.parentNode.removeChild(r);var o=document.createElement("iframe");switch(i.isFirefox()?o.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):o.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),o.setAttribute("id",t.frameId),"pdf"!==t.type&&(o.srcdoc="<html><head><title>"+t.documentTitle+"</title>",t.css&&(Array.isArray(t.css)||(t.css=[t.css]),t.css.forEach((function(t){o.srcdoc+='<link rel="stylesheet" href="'+t+'">'}))),o.srcdoc+="</head><body></body></html>"),t.type){case"pdf":if(i.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var s=window.open(t.fallbackPrintable,"_blank");s.focus(),t.onIncompatibleBrowser()}catch(e){t.onError(e)}finally{t.showModal&&a.close(),t.onLoadingEnd&&t.onLoadingEnd()}else p(t,o);break;case"image":w(t,o);break;case"html":m(t,o);break;case"raw-html":y(t,o);break;case"json":A(t,o)}};"undefined"!=typeof window&&(window.printJS=x),e.default=x}]).default},function(t,e,n){var r=n(456);t.exports=function(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r=n(24),i=n(19),o=n(49),a=n(35),s=n(102),c=n(54),u=n(148),d=n(34),l=n(57),h=n(120),f=n(84),p=n(100),g=n(161),v=n(85),m=n(137),y=n(131),w=n(165),b=n(129),A=n(219),P=n(188),E=n(119),x=n(83),S=n(218),C=n(183),D=n(90),I=n(151),R=n(186),T=n(163),_=n(162),k=n(46),F=n(255),M=n(220),O=n(374),L=n(132),N=n(105),V=n(98).forEach,B=R("hidden"),U=N.set,j=N.getterFor("Symbol"),H=Object.prototype,W=i.Symbol,$=W&&W.prototype,Y=i.TypeError,q=i.QObject,G=E.f,z=x.f,K=A.f,J=C.f,X=a([].push),Z=I("symbols"),Q=I("op-symbols"),tt=I("wks"),et=!q||!q.prototype||!q.prototype.findChild,nt=c&&d((function(){return 7!=y(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=G(H,e);r&&delete H[e],z(t,e,n),r&&t!==H&&z(H,e,r)}:z,rt=function(t,e){var n=Z[t]=y($);return U(n,{type:"Symbol",tag:t,description:e}),c||(n.description=e),n},it=function(t,e,n){t===H&&it(Q,e,n),f(t);var r=g(e);return f(n),l(Z,r)?(n.enumerable?(l(t,B)&&t[B][r]&&(t[B][r]=!1),n=y(n,{enumerable:m(0,!1)})):(l(t,B)||z(t,B,m(1,{})),t[B][r]=!0),nt(t,r,n)):z(t,r,n)},ot=function(t,e){f(t);var n=p(e),r=w(n).concat(ut(n));return V(r,(function(e){c&&!o(at,n,e)||it(t,e,n[e])})),t},at=function(t){var e=g(t),n=o(J,this,e);return!(this===H&&l(Z,e)&&!l(Q,e))&&(!(n||!l(this,e)||!l(Z,e)||l(this,B)&&this[B][e])||n)},st=function(t,e){var n=p(t),r=g(e);if(n!==H||!l(Z,r)||l(Q,r)){var i=G(n,r);return!i||!l(Z,r)||l(n,B)&&n[B][r]||(i.enumerable=!0),i}},ct=function(t){var e=K(p(t)),n=[];return V(e,(function(t){l(Z,t)||l(T,t)||X(n,t)})),n},ut=function(t){var e=t===H,n=K(e?Q:p(t)),r=[];return V(n,(function(t){!l(Z,t)||e&&!l(H,t)||X(r,Z[t])})),r};u||(D($=(W=function(){if(h($,this))throw Y("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=_(t),n=function(t){this===H&&o(n,Q,t),l(this,B)&&l(this[B],e)&&(this[B][e]=!1),nt(this,e,m(1,t))};return c&&et&&nt(H,e,{configurable:!0,set:n}),rt(e,t)}).prototype,"toString",(function(){return j(this).tag})),D(W,"withoutSetter",(function(t){return rt(_(t),t)})),C.f=at,x.f=it,S.f=ot,E.f=st,b.f=A.f=ct,P.f=ut,F.f=function(t){return rt(k(t),t)},c&&(z($,"description",{configurable:!0,get:function(){return j(this).description}}),s||D(H,"propertyIsEnumerable",at,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:W}),V(w(tt),(function(t){M(t)})),r({target:"Symbol",stat:!0,forced:!u},{useSetter:function(){et=!0},useSimple:function(){et=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(t,e){return void 0===e?y(t):ot(y(t),e)},defineProperty:it,defineProperties:ot,getOwnPropertyDescriptor:st}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ct}),O(),L(W,"Symbol"),T[B]=!0},function(t,e,n){var r=n(19),i=n(49),o=n(48),a=n(82),s=r.TypeError;t.exports=function(t,e){var n,r;if("string"===e&&o(n=t.toString)&&!a(r=i(n,t)))return r;if(o(n=t.valueOf)&&!a(r=i(n,t)))return r;if("string"!==e&&o(n=t.toString)&&!a(r=i(n,t)))return r;throw s("Can't convert object to primitive value")}},function(t,e,n){var r=n(19),i=n(48),o=n(185),a=r.WeakMap;t.exports=i(a)&&/native code/.test(o(a))},function(t,e,n){var r=n(19);t.exports=r},function(t,e,n){var r=n(49),i=n(104),o=n(46),a=n(90);t.exports=function(){var t=i("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,s=o("toPrimitive");e&&!e[s]&&a(e,s,(function(t){return r(n,this)}))}},function(t,e,n){var r=n(19),i=n(167),o=n(190),a=n(82),s=n(46)("species"),c=r.Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(o(e)&&(e===c||i(e.prototype))||a(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},function(t,e,n){var r=n(24),i=n(104),o=n(57),a=n(85),s=n(151),c=n(256),u=s("string-to-symbol-registry"),d=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=a(t);if(o(u,e))return u[e];var n=i("Symbol")(e);return u[e]=n,d[n]=e,n}})},function(t,e,n){var r=n(24),i=n(57),o=n(147),a=n(150),s=n(151),c=n(256),u=s("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!o(t))throw TypeError(a(t)+" is not a symbol");if(i(u,t))return u[t]}})},function(t,e,n){var r=n(24),i=n(104),o=n(141),a=n(49),s=n(35),c=n(34),u=n(167),d=n(48),l=n(82),h=n(147),f=n(168),p=n(148),g=i("JSON","stringify"),v=s(/./.exec),m=s("".charAt),y=s("".charCodeAt),w=s("".replace),b=s(1..toString),A=/[\uD800-\uDFFF]/g,P=/^[\uD800-\uDBFF]$/,E=/^[\uDC00-\uDFFF]$/,x=!p||c((function(){var t=i("Symbol")();return"[null]"!=g([t])||"{}"!=g({a:t})||"{}"!=g(Object(t))})),S=c((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),C=function(t,e){var n=f(arguments),r=e;if((l(e)||void 0!==t)&&!h(t))return u(e)||(e=function(t,e){if(d(r)&&(e=a(r,this,t,e)),!h(e))return e}),n[1]=e,o(g,null,n)},D=function(t,e,n){var r=m(n,e-1),i=m(n,e+1);return v(P,t)&&!v(E,i)||v(E,t)&&!v(P,r)?"\\u"+b(y(t,0),16):t};g&&r({target:"JSON",stat:!0,forced:x||S},{stringify:function(t,e,n){var r=f(arguments),i=o(x?C:g,null,r);return S&&"string"==typeof i?w(i,A,D):i}})},function(t,e,n){var r=n(24),i=n(148),o=n(34),a=n(188),s=n(89);r({target:"Object",stat:!0,forced:!i||o((function(){a.f(1)}))},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(s(t)):[]}})},function(t,e,n){var r=n(257);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return S()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function l(){}function h(){}function f(){}var p={};s(p,i,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(x([])));v&&v!==e&&n.call(v,i)&&(p=v);var m=f.prototype=l.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var c=u(t[i],t,o);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){d.value=t,a(d)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=f,s(m,"constructor",f),s(f,"constructor",h),h.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},y(w.prototype),s(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(m),s(m,a,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";var r=n(217),i=n(140);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){"use strict";var r=n(98).forEach,i=n(191)("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){"use strict";var r,i,o,a=n(24),s=n(102),c=n(223),u=n(19),d=n(49),l=n(90),h=n(192),f=n(142),p=n(132),g=n(170),v=n(121),m=n(48),y=n(82),w=n(143),b=n(171),A=n(264).set,P=n(388),E=n(391),x=n(225),S=n(392),C=n(105),D=n(154),I=n(172),R=n(173),T=I.CONSTRUCTOR,_=I.REJECTION_EVENT,k=I.SUBCLASSING,F=C.getterFor("Promise"),M=C.set,O=D&&D.prototype,L=D,N=O,V=u.TypeError,B=u.document,U=u.process,j=R.f,H=j,W=!!(B&&B.createEvent&&u.dispatchEvent),$=function(t){var e;return!(!y(t)||!m(e=t.then))&&e},Y=function(t,e){var n,r,i,o=e.value,a=1==e.state,s=a?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(a||(2===e.rejection&&J(e),e.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===t.promise?u(V("Promise-chain cycle")):(r=$(n))?d(r,n,c,u):c(n)):u(o)}catch(t){l&&!i&&l.exit(),u(t)}},q=function(t,e){t.notified||(t.notified=!0,P((function(){for(var n,r=t.reactions;n=r.get();)Y(n,t);t.notified=!1,e&&!t.rejection&&z(t)})))},G=function(t,e,n){var r,i;W?((r=B.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!_&&(i=u["on"+t])?i(r):"unhandledrejection"===t&&E("Unhandled promise rejection",n)},z=function(t){d(A,u,(function(){var e,n=t.facade,r=t.value;if(K(t)&&(e=x((function(){c?U.emit("unhandledRejection",r,n):G("unhandledrejection",n,r)})),t.rejection=c||K(t)?2:1,e.error))throw e.value}))},K=function(t){return 1!==t.rejection&&!t.parent},J=function(t){d(A,u,(function(){var e=t.facade;c?U.emit("rejectionHandled",e):G("rejectionhandled",e,t.value)}))},X=function(t,e,n){return function(r){t(e,r,n)}},Z=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,q(t,!0))},Q=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw V("Promise can't be resolved itself");var r=$(e);r?P((function(){var n={done:!1};try{d(r,e,X(Q,n,t),X(Z,n,t))}catch(e){Z(n,e,t)}})):(t.value=e,t.state=1,q(t,!1))}catch(e){Z({done:!1},e,t)}}};if(T&&(N=(L=function(t){w(this,N),v(t),d(r,this);var e=F(this);try{t(X(Q,e),X(Z,e))}catch(t){Z(e,t)}}).prototype,(r=function(t){M(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new S,rejection:!1,state:0,value:void 0})}).prototype=h(N,{then:function(t,e){var n=F(this),r=j(b(this,L));return n.parent=!0,r.ok=!m(t)||t,r.fail=m(e)&&e,r.domain=c?U.domain:void 0,0==n.state?n.reactions.add(r):P((function(){Y(r,n)})),r.promise}}),i=function(){var t=new r,e=F(t);this.promise=t,this.resolve=X(Q,e),this.reject=X(Z,e)},R.f=j=function(t){return t===L||void 0===t?new i(t):H(t)},!s&&m(D)&&O!==Object.prototype)){o=O.then,k||l(O,"then",(function(t,e){var n=this;return new L((function(t,e){d(o,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete O.constructor}catch(t){}f&&f(O,N)}a({global:!0,wrap:!0,forced:T},{Promise:L}),p(L,"Promise",!1,!0),g("Promise")},function(t,e,n){var r=n(19),i=n(48),o=r.String,a=r.TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw a("Can't set "+o(t)+" as a prototype")}},function(t,e,n){var r,i,o,a,s,c,u,d,l=n(19),h=n(122),f=n(119).f,p=n(264).set,g=n(265),v=n(389),m=n(390),y=n(223),w=l.MutationObserver||l.WebKitMutationObserver,b=l.document,A=l.process,P=l.Promise,E=f(l,"queueMicrotask"),x=E&&E.value;x||(r=function(){var t,e;for(y&&(t=A.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},g||y||m||!w||!b?!v&&P&&P.resolve?((u=P.resolve(void 0)).constructor=P,d=h(u.then,u),a=function(){d(r)}):y?a=function(){A.nextTick(r)}:(p=h(p,l),a=function(){p(r)}):(s=!0,c=b.createTextNode(""),new w(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),t.exports=x||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,n){var r=n(138),i=n(19);t.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},function(t,e,n){var r=n(138);t.exports=/web0s(?!.*chrome)/i.test(r)},function(t,e,n){var r=n(19);t.exports=function(t,e){var n=r.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}},function(t,e){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},t.exports=n},function(t,e){t.exports="object"==typeof window&&"object"!=typeof Deno},function(t,e,n){"use strict";var r=n(24),i=n(49),o=n(121),a=n(173),s=n(225),c=n(193);r({target:"Promise",stat:!0,forced:n(267)},{all:function(t){var e=this,n=a.f(e),r=n.resolve,u=n.reject,d=s((function(){var n=o(e.resolve),a=[],s=0,d=1;c(t,(function(t){var o=s++,c=!1;d++,i(n,e,t).then((function(t){c||(c=!0,a[o]=t,--d||r(a))}),u)})),--d||r(a)}));return d.error&&u(d.value),n.promise}})},function(t,e,n){"use strict";var r=n(24),i=n(102),o=n(172).CONSTRUCTOR,a=n(154),s=n(104),c=n(48),u=n(90),d=a&&a.prototype;if(r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(t){return this.then(void 0,t)}}),!i&&c(a)){var l=s("Promise").prototype.catch;d.catch!==l&&u(d,"catch",l,{unsafe:!0})}},function(t,e,n){"use strict";var r=n(24),i=n(49),o=n(121),a=n(173),s=n(225),c=n(193);r({target:"Promise",stat:!0,forced:n(267)},{race:function(t){var e=this,n=a.f(e),r=n.reject,u=s((function(){var a=o(e.resolve);c(t,(function(t){i(a,e,t).then(n.resolve,r)}))}));return u.error&&r(u.value),n.promise}})},function(t,e,n){"use strict";var r=n(24),i=n(49),o=n(173);r({target:"Promise",stat:!0,forced:n(172).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return i(e.reject,void 0,t),e.promise}})},function(t,e,n){"use strict";var r=n(24),i=n(104),o=n(102),a=n(154),s=n(172).CONSTRUCTOR,c=n(268),u=i("Promise"),d=o&&!s;r({target:"Promise",stat:!0,forced:o||s},{resolve:function(t){return c(d&&this===u?a:this,t)}})},function(t,e,n){var r=n(83).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},function(t,e,n){var r=n(19).Array,i=Math.abs,o=Math.pow,a=Math.floor,s=Math.log,c=Math.LN2;t.exports={pack:function(t,e,n){var u,d,l,h=r(n),f=8*n-e-1,p=(1<<f)-1,g=p>>1,v=23===e?o(2,-24)-o(2,-77):0,m=t<0||0===t&&1/t<0?1:0,y=0;for((t=i(t))!=t||t===1/0?(d=t!=t?1:0,u=p):(u=a(s(t)/c),t*(l=o(2,-u))<1&&(u--,l*=2),(t+=u+g>=1?v/l:v*o(2,1-g))*l>=2&&(u++,l/=2),u+g>=p?(d=0,u=p):u+g>=1?(d=(t*l-1)*o(2,e),u+=g):(d=t*o(2,g-1)*o(2,e),u=0));e>=8;)h[y++]=255&d,d/=256,e-=8;for(u=u<<e|d,f+=e;f>0;)h[y++]=255&u,u/=256,f-=8;return h[--y]|=128*m,h},unpack:function(t,e){var n,r=t.length,i=8*r-e-1,a=(1<<i)-1,s=a>>1,c=i-7,u=r-1,d=t[u--],l=127&d;for(d>>=7;c>0;)l=256*l+t[u--],c-=8;for(n=l&(1<<-c)-1,l>>=-c,c+=e;c>0;)n=256*n+t[u--],c-=8;if(0===l)l=1-s;else{if(l===a)return n?NaN:d?-1/0:1/0;n+=o(2,e),l-=s}return(d?-1:1)*n*o(2,l-e)}}},function(t,e,n){"use strict";n(25);var r,i=n(24),o=n(54),a=n(277),s=n(19),c=n(122),u=n(35),d=n(218).f,l=n(90),h=n(143),f=n(57),p=n(278),g=n(279),v=n(166),m=n(228).codeAt,y=n(403),w=n(85),b=n(132),A=n(224),P=n(280),E=n(105),x=E.set,S=E.getterFor("URL"),C=P.URLSearchParams,D=P.getState,I=s.URL,R=s.TypeError,T=s.parseInt,_=Math.floor,k=Math.pow,F=u("".charAt),M=u(/./.exec),O=u([].join),L=u(1..toString),N=u([].pop),V=u([].push),B=u("".replace),U=u([].shift),j=u("".split),H=u("".slice),W=u("".toLowerCase),$=u([].unshift),Y=/[a-z]/i,q=/[\d+-.a-z]/i,G=/\d/,z=/^0x/i,K=/^[0-7]+$/,J=/^\d+$/,X=/^[\da-f]+$/i,Z=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Q=/[\0\t\n\r #/:<>?@[\\\]^|]/,tt=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,et=/[\t\n\r]/g,nt=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)$(e,t%256),t=_(t/256);return O(e,".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=L(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},rt={},it=p({},rt,{" ":1,'"':1,"<":1,">":1,"`":1}),ot=p({},it,{"#":1,"?":1,"{":1,"}":1}),at=p({},ot,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),st=function(t,e){var n=m(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},ct={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ut=function(t,e){var n;return 2==t.length&&M(Y,F(t,0))&&(":"==(n=F(t,1))||!e&&"|"==n)},dt=function(t){var e;return t.length>1&&ut(H(t,0,2))&&(2==t.length||"/"===(e=F(t,2))||"\\"===e||"?"===e||"#"===e)},lt=function(t){return"."===t||"%2e"===W(t)},ht={},ft={},pt={},gt={},vt={},mt={},yt={},wt={},bt={},At={},Pt={},Et={},xt={},St={},Ct={},Dt={},It={},Rt={},Tt={},_t={},kt={},Ft=function(t,e,n){var r,i,o,a=w(t);if(e){if(i=this.parse(a))throw R(i);this.searchParams=null}else{if(void 0!==n&&(r=new Ft(n,!0)),i=this.parse(a,null,r))throw R(i);(o=D(new C)).bindURL(this),this.searchParams=o}};Ft.prototype={type:"URL",parse:function(t,e,n){var i,o,a,s,c,u=this,d=e||ht,l=0,h="",p=!1,m=!1,y=!1;for(t=w(t),e||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,t=B(t,tt,"")),t=B(t,et,""),i=g(t);l<=i.length;){switch(o=i[l],d){case ht:if(!o||!M(Y,o)){if(e)return"Invalid scheme";d=pt;continue}h+=W(o),d=ft;break;case ft:if(o&&(M(q,o)||"+"==o||"-"==o||"."==o))h+=W(o);else{if(":"!=o){if(e)return"Invalid scheme";h="",d=pt,l=0;continue}if(e&&(u.isSpecial()!=f(ct,h)||"file"==h&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=h,e)return void(u.isSpecial()&&ct[u.scheme]==u.port&&(u.port=null));h="","file"==u.scheme?d=St:u.isSpecial()&&n&&n.scheme==u.scheme?d=gt:u.isSpecial()?d=wt:"/"==i[l+1]?(d=vt,l++):(u.cannotBeABaseURL=!0,V(u.path,""),d=Tt)}break;case pt:if(!n||n.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==o){u.scheme=n.scheme,u.path=v(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,d=kt;break}d="file"==n.scheme?St:mt;continue;case gt:if("/"!=o||"/"!=i[l+1]){d=mt;continue}d=bt,l++;break;case vt:if("/"==o){d=At;break}d=Rt;continue;case mt:if(u.scheme=n.scheme,o==r)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=v(n.path),u.query=n.query;else if("/"==o||"\\"==o&&u.isSpecial())d=yt;else if("?"==o)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=v(n.path),u.query="",d=_t;else{if("#"!=o){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=v(n.path),u.path.length--,d=Rt;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=v(n.path),u.query=n.query,u.fragment="",d=kt}break;case yt:if(!u.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,d=Rt;continue}d=At}else d=bt;break;case wt:if(d=bt,"/"!=o||"/"!=F(h,l+1))continue;l++;break;case bt:if("/"!=o&&"\\"!=o){d=At;continue}break;case At:if("@"==o){p&&(h="%40"+h),p=!0,a=g(h);for(var b=0;b<a.length;b++){var A=a[b];if(":"!=A||y){var P=st(A,at);y?u.password+=P:u.username+=P}else y=!0}h=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(p&&""==h)return"Invalid authority";l-=g(h).length+1,h="",d=Pt}else h+=o;break;case Pt:case Et:if(e&&"file"==u.scheme){d=Dt;continue}if(":"!=o||m){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(u.isSpecial()&&""==h)return"Invalid host";if(e&&""==h&&(u.includesCredentials()||null!==u.port))return;if(s=u.parseHost(h))return s;if(h="",d=It,e)return;continue}"["==o?m=!0:"]"==o&&(m=!1),h+=o}else{if(""==h)return"Invalid host";if(s=u.parseHost(h))return s;if(h="",d=xt,e==Et)return}break;case xt:if(!M(G,o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()||e){if(""!=h){var E=T(h,10);if(E>65535)return"Invalid port";u.port=u.isSpecial()&&E===ct[u.scheme]?null:E,h=""}if(e)return;d=It;continue}return"Invalid port"}h+=o;break;case St:if(u.scheme="file","/"==o||"\\"==o)d=Ct;else{if(!n||"file"!=n.scheme){d=Rt;continue}if(o==r)u.host=n.host,u.path=v(n.path),u.query=n.query;else if("?"==o)u.host=n.host,u.path=v(n.path),u.query="",d=_t;else{if("#"!=o){dt(O(v(i,l),""))||(u.host=n.host,u.path=v(n.path),u.shortenPath()),d=Rt;continue}u.host=n.host,u.path=v(n.path),u.query=n.query,u.fragment="",d=kt}}break;case Ct:if("/"==o||"\\"==o){d=Dt;break}n&&"file"==n.scheme&&!dt(O(v(i,l),""))&&(ut(n.path[0],!0)?V(u.path,n.path[0]):u.host=n.host),d=Rt;continue;case Dt:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!e&&ut(h))d=Rt;else if(""==h){if(u.host="",e)return;d=It}else{if(s=u.parseHost(h))return s;if("localhost"==u.host&&(u.host=""),e)return;h="",d=It}continue}h+=o;break;case It:if(u.isSpecial()){if(d=Rt,"/"!=o&&"\\"!=o)continue}else if(e||"?"!=o)if(e||"#"!=o){if(o!=r&&(d=Rt,"/"!=o))continue}else u.fragment="",d=kt;else u.query="",d=_t;break;case Rt:if(o==r||"/"==o||"\\"==o&&u.isSpecial()||!e&&("?"==o||"#"==o)){if(".."===(c=W(c=h))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"==o||"\\"==o&&u.isSpecial()||V(u.path,"")):lt(h)?"/"==o||"\\"==o&&u.isSpecial()||V(u.path,""):("file"==u.scheme&&!u.path.length&&ut(h)&&(u.host&&(u.host=""),h=F(h,0)+":"),V(u.path,h)),h="","file"==u.scheme&&(o==r||"?"==o||"#"==o))for(;u.path.length>1&&""===u.path[0];)U(u.path);"?"==o?(u.query="",d=_t):"#"==o&&(u.fragment="",d=kt)}else h+=st(o,ot);break;case Tt:"?"==o?(u.query="",d=_t):"#"==o?(u.fragment="",d=kt):o!=r&&(u.path[0]+=st(o,rt));break;case _t:e||"#"!=o?o!=r&&("'"==o&&u.isSpecial()?u.query+="%27":u.query+="#"==o?"%23":st(o,rt)):(u.fragment="",d=kt);break;case kt:o!=r&&(u.fragment+=st(o,it))}l++}},parseHost:function(t){var e,n,r;if("["==F(t,0)){if("]"!=F(t,t.length-1))return"Invalid host";if(!(e=function(t){var e,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,d=null,l=0,h=function(){return F(t,l)};if(":"==h()){if(":"!=F(t,1))return;l+=2,d=++u}for(;h();){if(8==u)return;if(":"!=h()){for(e=n=0;n<4&&M(X,h());)e=16*e+T(h(),16),l++,n++;if("."==h()){if(0==n)return;if(l-=n,u>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;l++}if(!M(G,h()))return;for(;M(G,h());){if(o=T(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;l++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;c[u++]=e}else{if(null!==d)return;l++,d=++u}}if(null!==d)for(a=u-d,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[d+a-1],c[d+--a]=s;else if(8!=u)return;return c}(H(t,1,-1))))return"Invalid host";this.host=e}else if(this.isSpecial()){if(t=y(t),M(Z,t))return"Invalid host";if(null===(e=function(t){var e,n,r,i,o,a,s,c=j(t,".");if(c.length&&""==c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=c[r]))return t;if(o=10,i.length>1&&"0"==F(i,0)&&(o=M(z,i)?16:8,i=H(i,8==o?1:2)),""===i)a=0;else{if(!M(10==o?J:8==o?K:X,i))return t;a=T(i,o)}V(n,a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=k(256,5-e))return null}else if(a>255)return null;for(s=N(n),r=0;r<n.length;r++)s+=n[r]*k(256,3-r);return s}(t)))return"Invalid host";this.host=e}else{if(M(Q,t))return"Invalid host";for(e="",n=g(t),r=0;r<n.length;r++)e+=st(n[r],rt);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return f(ct,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&ut(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==i?(u+="//",t.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=nt(i),null!==o&&(u+=":"+o)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+O(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(t){var e=this.parse(t);if(e)throw R(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Mt(t.path[0]).origin}catch(t){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+nt(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(w(t)+":",ht)},getUsername:function(){return this.username},setUsername:function(t){var e=g(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=st(e[n],at)}},getPassword:function(){return this.password},setPassword:function(t){var e=g(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=st(e[n],at)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?nt(t):nt(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Pt)},getHostname:function(){var t=this.host;return null===t?"":nt(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Et)},getPort:function(){var t=this.port;return null===t?"":w(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""==(t=w(t))?this.port=null:this.parse(t,xt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+O(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,It))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""==(t=w(t))?this.query=null:("?"==F(t,0)&&(t=H(t,1)),this.query="",this.parse(t,_t)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!=(t=w(t))?("#"==F(t,0)&&(t=H(t,1)),this.fragment="",this.parse(t,kt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Mt=function(t){var e=h(this,Ot),n=A(arguments.length,1)>1?arguments[1]:void 0,r=x(e,new Ft(t,!1,n));o||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},Ot=Mt.prototype,Lt=function(t,e){return{get:function(){return S(this)[t]()},set:e&&function(t){return S(this)[e](t)},configurable:!0,enumerable:!0}};if(o&&d(Ot,{href:Lt("serialize","setHref"),origin:Lt("getOrigin"),protocol:Lt("getProtocol","setProtocol"),username:Lt("getUsername","setUsername"),password:Lt("getPassword","setPassword"),host:Lt("getHost","setHost"),hostname:Lt("getHostname","setHostname"),port:Lt("getPort","setPort"),pathname:Lt("getPathname","setPathname"),search:Lt("getSearch","setSearch"),searchParams:Lt("getSearchParams"),hash:Lt("getHash","setHash")}),l(Ot,"toJSON",(function(){return S(this).serialize()}),{enumerable:!0}),l(Ot,"toString",(function(){return S(this).serialize()}),{enumerable:!0}),I){var Nt=I.createObjectURL,Vt=I.revokeObjectURL;Nt&&l(Mt,"createObjectURL",c(Nt,I)),Vt&&l(Mt,"revokeObjectURL",c(Vt,I))}b(Mt,"URL"),i({global:!0,forced:!a,sham:!o},{URL:Mt})},function(t,e,n){var r=n(84),i=n(266);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){i(t,"throw",e)}}},function(t,e,n){"use strict";var r=n(19),i=n(35),o=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",c=r.RangeError,u=i(a.exec),d=Math.floor,l=String.fromCharCode,h=i("".charCodeAt),f=i([].join),p=i([].push),g=i("".replace),v=i("".split),m=i("".toLowerCase),y=function(t){return t+22+75*(t<26)},w=function(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;)t=d(t/35),r+=36;return d(r+36*t/(t+38))},b=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=h(t,n++);if(i>=55296&&i<=56319&&n<r){var o=h(t,n++);56320==(64512&o)?p(e,((1023&i)<<10)+(1023&o)+65536):(p(e,i),n--)}else p(e,i)}return e}(t)).length,o=128,a=0,u=72;for(e=0;e<t.length;e++)(n=t[e])<128&&p(r,l(n));var g=r.length,v=g;for(g&&p(r,"-");v<i;){var m=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<m&&(m=n);var b=v+1;if(m-o>d((2147483647-a)/b))throw c(s);for(a+=(m-o)*b,o=m,e=0;e<t.length;e++){if((n=t[e])<o&&++a>2147483647)throw c(s);if(n==o){for(var A=a,P=36;;){var E=P<=u?1:P>=u+26?26:P-u;if(A<E)break;var x=A-E,S=36-E;p(r,l(y(E+x%S))),A=d(x/S),P+=36}p(r,l(y(A))),u=w(a,b,v==g),a=0,v++}}a++,o++}return f(r,"")};t.exports=function(t){var e,n,r=[],i=v(g(m(t),a,"."),".");for(e=0;e<i.length;e++)n=i[e],p(r,u(o,n)?"xn--"+b(n):n);return f(r,".")}},function(t,e,n){var r=n(19),i=n(34),o=n(195),a=n(50).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;t.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},function(t,e,n){var r=n(82),i=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e,n){var r=n(19),i=n(106),o=r.RangeError;t.exports=function(t){var e=i(t);if(e<0)throw o("The argument can't be less than 0");return e}},function(t,e,n){var r=n(122),i=n(49),o=n(263),a=n(89),s=n(91),c=n(194),u=n(175),d=n(226),l=n(50).aTypedArrayConstructor;t.exports=function(t){var e,n,h,f,p,g,v=o(this),m=a(t),y=arguments.length,w=y>1?arguments[1]:void 0,b=void 0!==w,A=u(m);if(A&&!d(A))for(g=(p=c(m,A)).next,m=[];!(f=i(g,p)).done;)m.push(f.value);for(b&&y>2&&(w=r(w,arguments[2])),n=s(m),h=new(l(v))(n),e=0;n>e;e++)h[e]=b?w(m[e],e):m[e];return h}},function(t,e,n){"use strict";var r=n(89),i=n(130),o=n(91),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n),c=i(t,s),u=i(e,s),d=arguments.length>2?arguments[2]:void 0,l=a((void 0===d?s:i(d,s))-u,s-c),h=1;for(u<c&&c<u+l&&(h=-1,u+=l-1,c+=l-1);l-- >0;)u in n?n[c]=n[u]:delete n[c],c+=h,u+=h;return n}},function(t,e,n){var r=n(410),i=n(200);t.exports=function(t,e){return r(i(t),e)}},function(t,e,n){var r=n(91);t.exports=function(t,e){for(var n=0,i=r(e),o=new t(i);i>n;)o[n]=e[n++];return o}},function(t,e,n){"use strict";var r=n(141),i=n(100),o=n(106),a=n(91),s=n(191),c=Math.min,u=[].lastIndexOf,d=!!u&&1/[1].lastIndexOf(1,-0)<0,l=s("lastIndexOf"),h=d||!l;t.exports=h?function(t){if(d)return r(u,this,arguments)||0;var e=i(this),n=a(e),s=n-1;for(arguments.length>1&&(s=c(s,o(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:u},function(t,e,n){"use strict";var r=n(19),i=n(167),o=n(91),a=n(122),s=r.TypeError,c=function(t,e,n,r,u,d,l,h){for(var f,p,g=u,v=0,m=!!l&&a(l,h);v<r;){if(v in n){if(f=m?m(n[v],v,e):n[v],d>0&&i(f))p=o(f),g=c(t,e,f,p,g,d-1)-1;else{if(g>=9007199254740991)throw s("Exceed the acceptable array length");t[g]=f}g++}v++}return g};t.exports=c},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";(function(e){
/*! art-template@runtime | https://github.com/aui/art-template */
var n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},r=Object.create(n),i=/["&'<>]/;r.$escape=function(t){return function(t){var e=""+t,n=i.exec(e);if(!n)return t;var r="",o=void 0,a=void 0,s=void 0;for(o=n.index,a=0;o<e.length;o++){switch(e.charCodeAt(o)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}a!==o&&(r+=e.substring(a,o)),a=o+1,r+=s}return a!==o?r+e.substring(a,o):r}(function t(e){"string"!=typeof e&&(e=null==e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},r.$each=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e(t[n],n);else for(var i in t)e(t[i],i)},t.exports=r}).call(this,n(213))},function(t,e,n){t.exports='<div class="fv__rendering-container">\r\n    <img class="fv__rendering-svg" src="'+n(290)+'">\r\n</div>'},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(35),i=n(89),o=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,l,h){var f=n+t.length,p=r.length,g=d;return void 0!==l&&(l=i(l),g=u),s(h,g,(function(i,s){var u;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,f);case"<":u=l[c(s,1,-1)];break;default:var d=+s;if(0===d)return i;if(d>p){var h=o(d/10);return 0===h?i:h<=p?void 0===r[h-1]?a(s,1):r[h-1]+a(s,1):i}u=r[d-1]}return void 0===u?"":u}))}},function(t,e,n){n(199)("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e){},function(t,e,n){},function(t,e,n){},function(t,e,n){n(24)({target:"Object",stat:!0},{setPrototypeOf:n(142)})},function(t,e,n){n(220)("hasInstance")},function(t,e,n){"use strict";var r=n(48),i=n(82),o=n(83),a=n(156),s=n(46)("hasInstance"),c=Function.prototype;s in c||o.f(c,s,{value:function(t){if(!r(this)||!i(t))return!1;var e=this.prototype;if(!i(e))return t instanceof this;for(;t=a(t);)if(e===t)return!0;return!1}})},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return a}));var r=n(0),i=n.n(r),o=(n(12),n(14),n(92),n(39)),a=function(t){function e(){return t.apply(this,arguments)||this}i()(e,t),e.extend=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.name,r=t.props,o={};for(var a in r){if(!/^\w+$/.test(a))throw new Error("Unsupported vue component: unexpected property name: ".concat(a));var s=r[a],c=void 0;switch(s.type){case String:c="string";break;case Number:c="number";break;case Boolean:c="boolean";break;default:c="any"}o[a]={type:c}}var u=function(e){function a(){return e.apply(this,arguments)||this}return i()(a,e),a.getName=function(){return n},a.getMetadata=function(){return{options:o}},a.getVueComponentRef=function(){return t},a.prototype.sync=function(t,n){switch(t){case"pdfui":case"pdfviewer":case"pdfViewer":return!0}return t in r?(this.instance[t]=n,!0):e.prototype.sync.call(this,t,n)},a}(e);return u},e.getVueComponentRef=function(){Object(o.a)("VueComponent::getVueComponentRef")};var n=e.prototype;return n.setPDFUIInstance=function(e){var n=this,r=e.Vue;if(!r)throw new Error("The Vue is not correct as an initialization parameter to the PDFUI instance.");t.prototype.setPDFUIInstance.call(this,e);var i=this.constructor.getVueComponentRef(),o=r.extend(i);this.instancePromise=e.getPDFViewer().then((function(t){if(!n.isDestroyed)return n.instance=new o({propsData:{pdfui:e,pdfViewer:t,pdfviewer:t}})}))},n.createDOMElement=function(){return document.createComment(this.nodeName)},n.prelink=function(){var e=this;t.prototype.prelink.call(this),this.execVueComponent((function(t){e.execMethod(t,"prelink"),t.$emit("foxit:prelink")}))},n.postlink=function(){var e=this;t.prototype.postlink.call(this),this.execVueComponent((function(t){e.execMethod(t,"postlink"),t.$emit("foxit:postlink")}))},n.doEnable=function(){var t=this;this.execVueComponent((function(e){t.execMethod(e,"enable"),e.$emit("foxit:enable")}))},n.doDisable=function(){var t=this;this.execVueComponent((function(e){t.execMethod(e,"disable"),e.$emit("foxit:disable")}))},n.doActive=function(){var t=this;this.execVueComponent((function(e){t.execMethod(e,"active"),e.$emit("foxit:active")}))},n.doDeactive=function(){var t=this;this.execVueComponent((function(e){t.execMethod(e,"deactive"),e.$emit("foxit:deactive")}))},n.doShown=function(){var t=this;this.execVueComponent((function(e){var n=e.$el;n&&n.classList&&n.classList.remove("fv__ui-hide"),t.execMethod(e,"shown"),e.$emit("foxit:shown")}))},n.doHidden=function(){var t=this;this.execVueComponent((function(e){var n=e.$el;n&&n.classList&&n.classList.add("fv__ui-hide"),t.execMethod(e,"hidden"),e.$emit("foxit:hidden")}))},n.addCSSClass=function(t){t&&this.execVueComponent((function(e){var n=e.$el;n&&n.classList&&n.classList.add(t)}))},n.removeCSSClass=function(t){t&&this.execVueComponent((function(e){var n=e.$el;n&&n.classList&&n.classList.remove(t)}))},n.prerender=function(){},n.mounted=function(){var e=this;t.prototype.mounted.call(this),this.execVueComponent((function(t){t.$mount(),e.parent.rerenderChildren()}))},n.localize=function(){var t=this.localizer.getLanguage();this.execVueComponent((function(e){e.$emit("uix:localize",t)}))},n.getRenderingElements=function(){var t=[this.element];return this.instance&&this.instance.$el&&t.push(this.instance.$el),t},n.doDestroy=function(){t.prototype.doDestroy.call(this),this.instance&&(this.execMethod(this.instance,"destroy"),this.instance.$destroy(),this.instance=null,this.instancePromise=null)},n.execMethod=function(t,e){var n=t.$options.foxit;if(n){var r=n[e];"function"==typeof r&&r.call(t,this)}},n.execVueComponent=function(t){var e=this;this.instance?t(this.instance):this.instancePromise.then((function(n){!e.isDestroyed&&n&&t(n)}))},e}(n(135).a)},function(t,e,n){"use strict";n.r(e),n.d(e,"ReactComponent",(function(){return l}));var r=n(3),i=n.n(r),o=n(15),a=n.n(o),s=n(0),c=n.n(s),u=(n(14),n(51),n(43),n(13),n(40),n(135)),d=n(39),l=function(t){function e(){return t.apply(this,arguments)||this}c()(e,t),e.extend=function(t,n,r){return function(e){function o(){return e.apply(this,arguments)||this}c()(o,e),o.getName=function(){return n};var a=o.prototype;return a.mounted=function(){var t=this;e.prototype.mounted.call(this);var n=this.getPDFUI().ReactDOM;this.addDestroyHook((function(){n.unmountComponentAtNode(t.element)}))},a.initServices=function(t){for(var n in e.prototype.initServices.call(this,t),this.serviceInstances={},r){var i=t.getServiceInstance(r[n],this);this.serviceInstances[n]=i}},a.rerender=function(){var e=this.getPDFUI(),n=e.ReactDOM,r=e.React;n.render(r.createElement(t,i()(this.attrs,{disabled:this.disabled,isActive:this.isActive,isVisible:this.isVisible,key:this.id,services:this.serviceInstances})),this.element),this.parent&&this.parent.rerenderChildren()},o}(e)};var n=e.prototype;return n.createDOMElement=function(){var t=document.createElement("div");return t.classList.add("fv__ui-react-component"),t},n.acceptText=function(){return!1},n.mounted=function(){t.prototype.mounted.call(this),this.rerender()},n.rerender=function(){Object(d.a)()},n.setAttribute=function(t,e){this.attrs[t]=e,this.rerender()},n.getAttribute=function(t){return this.attrs[t]},n.removeAttribute=function(t){delete this.attrs[t],this.rerender()},n.addCSSClass=function(t){var e=(this.attrs.class||"").split(/\s+/);this.setAttribute("class",e.concat(t).join(" "))},n.removeCSSClass=function(t){var e=(this.attrs.class||"").split(/\s+/),n=e.indexOf(t);n>-1&&e.splice(n,1),this.setAttribute("class",e.join(" "))},n.doEnable=function(){this.rerender()},n.doDisable=function(){this.rerender()},n.doDeactive=function(){this.rerender()},n.doActive=function(){this.rerender()},n.localize=function(){var t=this.localizer;return this.trigger("localize",t),t.localizeRecursive(this.getDomElement(),{})},a()(e,[{key:"isReact",get:function(){return!0}}]),e}(u.a)},function(t,e,n){"use strict";n(295)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(297))},function(t,e,n){var r=n(34),i=n(82),o=n(128),a=n(430),s=Object.isExtensible,c=r((function(){s(1)}));t.exports=c||a?function(t){return!!i(t)&&((!a||"ArrayBuffer"!=o(t))&&(!s||s(t)))}:s},function(t,e,n){var r=n(34);t.exports=r((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},function(t,e,n){var r=n(34);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,n){"use strict";n(295)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(297))},function(t,e,n){},function(t,e,n){},function(t,e,n){n(199)("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r=n(24),i=n(205);r({target:"String",proto:!0,forced:n(206)("bold")},{bold:function(){return i(this,"b","","")}})},function(t,e,n){"use strict";var r=n(24),i=n(205);r({target:"String",proto:!0,forced:n(206)("italics")},{italics:function(){return i(this,"i","","")}})},function(t,e,n){},function(t,e,n){n(441);var r=n(24),i=n(299);r({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==i},{trimStart:i})},function(t,e,n){var r=n(24),i=n(299);r({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==i},{trimLeft:i})},function(t,e,n){"use strict";var r=n(24),i=n(205);r({target:"String",proto:!0,forced:n(206)("anchor")},{anchor:function(t){return i(this,"a","name",t)}})},function(t,e,n){},function(t,e,n){"use strict";var r=n(49),i=n(201),o=n(84),a=n(101),s=n(445),c=n(85),u=n(139),d=n(202);i("search",(function(t,e,n){return[function(e){var n=a(this),i=null==e?void 0:u(e,t);return i?r(i,e,n):new RegExp(e)[t](c(n))},function(t){var r=o(this),i=c(t),a=n(e,r,i);if(a.done)return a.value;var u=r.lastIndex;s(u,0)||(r.lastIndex=0);var l=d(r,i);return s(r.lastIndex,u)||(r.lastIndex=u),null===l?-1:l.index}]}))},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){n(450)},function(t,e,n){n(24)({global:!0},{globalThis:n(19)})},function(t,e,n){n(24)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){n(24)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){n(458);var r=n(24),i=n(303);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==i},{trimEnd:i})},function(t,e,n){var r=n(24),i=n(303);r({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==i},{trimRight:i})},function(t,e,n){var r=n(24),i=n(278);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,n){"use strict";n.r(e),n.d(e,"KeyboardUtils",(function(){return s})),n.d(e,"_internal",(function(){return pE})),n.d(e,"keyboard",(function(){return dE})),n.d(e,"constants",(function(){return uE})),n.d(e,"creation",(function(){return nE})),n.d(e,"ui",(function(){return aE})),n.d(e,"viewerui",(function(){return sE})),n.d(e,"collab",(function(){return lE})),n.d(e,"ActivationGroup",(function(){return fE})),n.d(e,"AnnotationApRenderer",(function(){return Cc})),n.d(e,"LocalCanvasApRenderer",(function(){return zc})),n.d(e,"TileJREngineApRenderer",(function(){return Dc})),n.d(e,"ShapeControl",(function(){return Wc})),n.d(e,"CalloutShape",(function(){return Il})),n.d(e,"PropertiesControl",(function(){return wc})),n.d(e,"AnnotationAuthorityManager",(function(){return Sw})),n.d(e,"Deps",(function(){return QP})),n.d(e,"vendors",(function(){return tE})),n.d(e,"FontUtil",(function(){return h})),n.d(e,"DeviceInfo",(function(){return Vt})),n.d(e,"BrowserInfo",(function(){return Nt})),n.d(e,"HtmlUtil",(function(){return d})),n.d(e,"SignatureUtil",(function(){return y})),n.d(e,"Consts",(function(){return Ht})),n.d(e,"PDFViewer",(function(){return _b})),n.d(e,"IViewMode",(function(){return La})),n.d(e,"viewMode",(function(){return oE})),n.d(e,"IStateHandler",(function(){return ys})),n.d(e,"stateHandler",(function(){return iE})),n.d(e,"Events",(function(){return Ct})),n.d(e,"ViewerEvents",(function(){return XP})),n.d(e,"Matrix",(function(){return J})),n.d(e,"IContextMenu",(function(){return ov})),n.d(e,"RetryPasswordComponent",(function(){return Zs})),n.d(e,"ScrollWrap",(function(){return gs})),n.d(e,"PDFViewerRendering",(function(){return H})),n.d(e,"PDFDocRendering",(function(){return ja})),n.d(e,"DocCustomRender",(function(){return Ha})),n.d(e,"PDFPageRendering",(function(){return lt})),n.d(e,"PageCustomRender",(function(){return ht})),n.d(e,"FormRender",(function(){return Ka})),n.d(e,"AnnotComponent",(function(){return da})),n.d(e,"MarkupAnnotComponent",(function(){return Rc})),n.d(e,"TextMarkupAnnotComponent",(function(){return Gc})),n.d(e,"HighlightComponent",(function(){return Zc})),n.d(e,"StrikeOutComponent",(function(){return tu})),n.d(e,"UnderlineComponent",(function(){return nu})),n.d(e,"SquigglyComponent",(function(){return iu})),n.d(e,"LineComponent",(function(){return Au})),n.d(e,"PolyLineComponent",(function(){return Tu})),n.d(e,"PolygonComponent",(function(){return Nu})),n.d(e,"LinkAnnotComponent",(function(){return qu})),n.d(e,"CircleComponent",(function(){return Ju})),n.d(e,"NoteComponent",(function(){return Gd})),n.d(e,"FileAttachmentComponent",(function(){return Kd})),n.d(e,"CaretComponent",(function(){return Xd})),n.d(e,"SquareComponent",(function(){return Qd})),n.d(e,"FreeTextComponent",(function(){return xl})),n.d(e,"StampComponent",(function(){return sl})),n.d(e,"InkComponent",(function(){return ul})),n.d(e,"PolygonCloudAnnotComponent",(function(){return bl})),n.d(e,"FreeTextTypeWritterComponent",(function(){return Sl})),n.d(e,"FreeTextCalloutComponent",(function(){return Bl})),n.d(e,"FreeTextBoxComponent",(function(){return jl})),n.d(e,"ScreenComponent",(function(){return Zh})),n.d(e,"StrikeOutTextEditComponent",(function(){return Qh})),n.d(e,"SoundComponent",(function(){return sf})),n.d(e,"SnapshotServer",(function(){return Gg})),n.d(e,"STATE_HANDLER_NAMES",(function(){return o})),n.d(e,"shared",(function(){return eE})),n.d(e,"UserPermission",(function(){return Wa})),n.d(e,"Log",(function(){return rE})),n.d(e,"PDF",(function(){return cE})),n.d(e,"CustomScrollWrap",(function(){return VA})),n.d(e,"DivScrollWrap",(function(){return ZP})),n.d(e,"FakeSquareAnnotation",(function(){return KP})),n.d(e,"FakeCircleAnnotation",(function(){return JP})),n.d(e,"CombindForms",(function(){return GP})),n.d(e,"readAloud",(function(){return w})),n.d(e,"printer",(function(){return hE}));var r={};n.r(r),n.d(r,"Activatable",(function(){return ft})),n.d(r,"ActivationGroup",(function(){return pt})),n.d(r,"ActivationManager",(function(){return gt}));var i={};n.r(i),n.d(i,"Additional_Permission",(function(){return Pe})),n.d(i,"Font_Style",(function(){return Ee})),n.d(i,"Border_Style",(function(){return xe})),n.d(i,"FileAttachment_Icon",(function(){return Se})),n.d(i,"Note_Icon",(function(){return Ce})),n.d(i,"Ending_Style",(function(){return De})),n.d(i,"Alignment",(function(){return Ie})),n.d(i,"Point_Type",(function(){return Re})),n.d(i,"Action_Type",(function(){return Te})),n.d(i,"Highlight_Mode",(function(){return _e})),n.d(i,"Relationship",(function(){return ke})),n.d(i,"File_Type",(function(){return Fe})),n.d(i,"Flatten_Option",(function(){return Me})),n.d(i,"Position",(function(){return Oe})),n.d(i,"Watermark_Flag",(function(){return Le})),n.d(i,"Standard_Font",(function(){return Ne})),n.d(i,"Rotation",(function(){return Ve})),n.d(i,"Rotation_Degree",(function(){return Be})),n.d(i,"Search_Flag",(function(){return Ue})),n.d(i,"Saving_Flag",(function(){return je})),n.d(i,"Range_Filter",(function(){return He})),n.d(i,"Rendering_Content",(function(){return We})),n.d(i,"Rendering_Usage",(function(){return $e})),n.d(i,"date_Format",(function(){return Ye})),n.d(i,"page_Number_Format",(function(){return qe})),n.d(i,"Font_Descriptor_Flags",(function(){return Ge})),n.d(i,"Error_Code",(function(){return Ae})),n.d(i,"Signature_State",(function(){return ze})),n.d(i,"Signature_Ap_Flags",(function(){return Ke})),n.d(i,"Action_Trigger",(function(){return Je})),n.d(i,"Calc_Margin_Mode",(function(){return Xe})),n.d(i,"Box_Type",(function(){return Ze})),n.d(i,"Text_Mode",(function(){return Qe})),n.d(i,"Font_StandardID",(function(){return tn})),n.d(i,"Font_Styles",(function(){return en})),n.d(i,"Font_Charset",(function(){return nn})),n.d(i,"Font_CIDCharset",(function(){return rn})),n.d(i,"Graphics_FillMode",(function(){return on})),n.d(i,"Graphics_ObjectType",(function(){return an})),n.d(i,"MK_Properties",(function(){return sn})),n.d(i,"FillSignType",(function(){return un})),n.d(i,"PosType",(function(){return cn})),n.d(i,"NameTreeType",(function(){return dn}));var o={};n.r(o),n.d(o,"STATE_HANDLER_HAND",(function(){return Vn})),n.d(o,"STATE_HANDLER_CHECK_THE_SEARCH",(function(){return Bn})),n.d(o,"STATE_HANDLER_CREATE_CARET",(function(){return Un})),n.d(o,"STATE_HANDLER_CREATE_ARROW",(function(){return jn})),n.d(o,"STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT",(function(){return Hn})),n.d(o,"STATE_HANDLER_CREATE_AREA_HIGHLIGHT",(function(){return Wn})),n.d(o,"STATE_HANDLER_CREATE_CIRCLE",(function(){return $n})),n.d(o,"STATE_HANDLER_CREATE_FILE_ATTACHMENT",(function(){return Yn})),n.d(o,"STATE_HANDLER_CREATE_HIGHLIGHT",(function(){return qn})),n.d(o,"STATE_HANDLER_CREATE_IMAGE",(function(){return Gn})),n.d(o,"STATE_HANDLER_CREATE_EDIT_IMAGE",(function(){return zn})),n.d(o,"STATE_HANDLER_CREATE_LINK",(function(){return Kn})),n.d(o,"STATE_HANDLER_CREATE_LINE",(function(){return Jn})),n.d(o,"STATE_HANDLER_CREATE_DISTANCE",(function(){return Xn})),n.d(o,"STATE_HANDLER_CREATE_PERIMETER",(function(){return Zn})),n.d(o,"STATE_HANDLER_CREATE_AREA",(function(){return Qn})),n.d(o,"STATE_HANDLER_CREATE_CIRCLE_AREA",(function(){return tr})),n.d(o,"STATE_HANDLER_CREATE_PENCIL",(function(){return er})),n.d(o,"STATE_HANDLER_CREATE_POLYGON_CLOUD",(function(){return nr})),n.d(o,"STATE_HANDLER_CREATE_POLYGON",(function(){return rr})),n.d(o,"STATE_HANDLER_CREATE_POLYLINE",(function(){return ir})),n.d(o,"STATE_HANDLER_CREATE_REPLACE",(function(){return or})),n.d(o,"STATE_HANDLER_CREATE_SQUARE",(function(){return ar})),n.d(o,"STATE_HANDLER_CREATE_SQUARE_CROP",(function(){return sr})),n.d(o,"STATE_HANDLER_CREATE_SQUIGGLY",(function(){return cr})),n.d(o,"STATE_HANDLER_CREATE_STAMP",(function(){return ur})),n.d(o,"STATE_HANDLER_CREATE_STRIKE_OUT",(function(){return dr})),n.d(o,"STATE_HANDLER_CREATE_TEXT",(function(){return lr})),n.d(o,"STATE_HANDLER_CREATE_UNDERLINE",(function(){return hr})),n.d(o,"STATE_HANDLER_MARQUEE",(function(){return fr})),n.d(o,"STATE_HANDLER_ERASER",(function(){return pr})),n.d(o,"STATE_HANDLER_LOUPE",(function(){return gr})),n.d(o,"STATE_HANDLER_SELECT_TEXT_ANNOTATION",(function(){return vr})),n.d(o,"STATE_HANDLER_SELECT_TEXT_IMAGE",(function(){return mr})),n.d(o,"STATE_HANDLER_SELECT_TEXT",(function(){return yr})),n.d(o,"STATE_HANDLER_SELECT_ANNOTATION",(function(){return wr})),n.d(o,"STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER",(function(){return br})),n.d(o,"STATE_HANDLER_CREATE_FREETEXT_CALLOUT",(function(){return Ar})),n.d(o,"STATE_HANDLER_CREATE_FREETEXT_BOX",(function(){return Pr})),n.d(o,"STATE_HANDLER_SNAPSHOT_TOOL",(function(){return Er})),n.d(o,"STATE_HANDLER_CREATE_CROP_PAGES",(function(){return xr})),n.d(o,"STATE_HANDLER_CREATE_FIELD_TEXT",(function(){return Sr})),n.d(o,"STATE_HANDLER_CREATE_FIELD_SIGNATURE",(function(){return Cr})),n.d(o,"STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON",(function(){return Dr})),n.d(o,"STATE_HANDLER_CREATE_RADIO_BUTTON",(function(){return Ir})),n.d(o,"STATE_HANDLER_CREATE_ARTICLE_BUTTON",(function(){return Rr})),n.d(o,"StateNameAnnotTypeMap",(function(){return Tr})),n.d(o,"StateNameFieldTypeMap",(function(){return _r}));var a={};n.r(a),n.d(a,"INCH",(function(){return Oi})),n.d(a,"CUSTOM",(function(){return Li})),n.d(a,"MILE",(function(){return Ni})),n.d(a,"POINT",(function(){return Vi})),n.d(a,"FOOT",(function(){return Bi})),n.d(a,"YARD",(function(){return Ui})),n.d(a,"KILOMETER",(function(){return ji})),n.d(a,"METER",(function(){return Hi})),n.d(a,"CENTIMETER",(function(){return Wi})),n.d(a,"MILLIMETER",(function(){return $i})),n.d(a,"PICA",(function(){return Yi})),n.d(a,"PIXEL_HORIZONTAL",(function(){return qi})),n.d(a,"PIXEL_VERTICAL",(function(){return Gi})),n.d(a,"getUnitByName",(function(){return Ki}));var s={};n.r(s),n.d(s,"KEYBOARD_LOCATION",(function(){return Ji})),n.d(s,"match",(function(){return so})),n.d(s,"isMatch",(function(){return co})),n.d(s,"matchers",(function(){return lo})),n.d(s,"isCtrl",(function(){return ho})),n.d(s,"isCtrlLeft",(function(){return fo})),n.d(s,"isCtrlRight",(function(){return po})),n.d(s,"isShift",(function(){return go})),n.d(s,"isShiftLeft",(function(){return vo})),n.d(s,"isShiftRight",(function(){return mo})),n.d(s,"isAlt",(function(){return yo})),n.d(s,"isAltLeft",(function(){return wo})),n.d(s,"isAltRight",(function(){return bo})),n.d(s,"isMeta",(function(){return Ao})),n.d(s,"isMetaLeft",(function(){return Po})),n.d(s,"isMetaRight",(function(){return Eo})),n.d(s,"isEnter",(function(){return xo})),n.d(s,"isStandardEnter",(function(){return So})),n.d(s,"isNumpadEnter",(function(){return Co})),n.d(s,"isHome",(function(){return Do})),n.d(s,"isEnd",(function(){return Io})),n.d(s,"isSpace",(function(){return Ro})),n.d(s,"isKey",(function(){return To})),n.d(s,"getKey",(function(){return _o})),n.d(s,"keyCodeToKey",(function(){return No})),n.d(s,"isShiftPressedKey",(function(){return Bo})),n.d(s,"simulateKey",(function(){return Uo}));var c={};n.r(c),n.d(c,"includeCommandInterceptor",(function(){return ea})),n.d(c,"excludeCommandInterceptor",(function(){return na})),n.d(c,"excludeEditableElementInterceptor",(function(){return ra})),n.d(c,"preventDefaultInterceptor",(function(){return ia})),n.d(c,"focusNeedBeOn",(function(){return oa}));var u={};n.r(u),n.d(u,"download",(function(){return ss}));var d={};n.r(d),n.d(d,"html2Escape",(function(){return ph})),n.d(d,"htmlCharacter2Entity",(function(){return gh})),n.d(d,"jquerySelector2Escape",(function(){return vh}));var l={};n.r(l),n.d(l,"normalizeQuadPoints",(function(){return Vv})),n.d(l,"getQuadPointsFromRect",(function(){return Bv})),n.d(l,"debounce",(function(){return Uv})),n.d(l,"allIsSpace",(function(){return jv}));var h={};n.r(h),n.d(h,"stdFontMap",(function(){return Py})),n.d(h,"mapFontName2StdID",(function(){return Ey})),n.d(h,"mapStdID2FontName",(function(){return xy})),n.d(h,"FoxitFontMap",(function(){return Sy})),n.d(h,"FontFamilies",(function(){return Cy})),n.d(h,"BaseFontFamilies",(function(){return Dy})),n.d(h,"BaseFontFamiliesCN_windows",(function(){return Iy})),n.d(h,"BaseFontFamiliesCN_Mac",(function(){return Ry}));var f={};n.r(f),n.d(f,"matchFileHead",(function(){return Nb})),n.d(f,"isPDFFile",(function(){return Vb})),n.d(f,"isPDF",(function(){return Bb})),n.d(f,"isVideoFile",(function(){return Ub})),n.d(f,"supportsH264Video",(function(){return Hb})),n.d(f,"supportsOGGVideo",(function(){return Wb})),n.d(f,"isValidMP4",(function(){return $b})),n.d(f,"isValidWebM",(function(){return Yb})),n.d(f,"isValidOGGVideo",(function(){return qb})),n.d(f,"isTheoraCodec",(function(){return Gb})),n.d(f,"supportsMP3",(function(){return Kb})),n.d(f,"supportsOGGAudio",(function(){return Jb})),n.d(f,"isAudioFile",(function(){return Xb})),n.d(f,"isValidMP3",(function(){return Zb})),n.d(f,"isValidOGGAudio",(function(){return Qb})),n.d(f,"isVorbisCodec",(function(){return tA})),n.d(f,"isImageFile",(function(){return eA})),n.d(f,"isJPEG",(function(){return nA})),n.d(f,"isPNG",(function(){return rA})),n.d(f,"isGIF",(function(){return iA})),n.d(f,"isBMP",(function(){return oA})),n.d(f,"isSVG",(function(){return aA})),n.d(f,"isFDF",(function(){return sA})),n.d(f,"isXDP",(function(){return cA})),n.d(f,"isPlainText",(function(){return dA}));var p={};n.r(p),n.d(p,"BorderStyle",(function(){return lA})),n.d(p,"SelectionEventType",(function(){return hA})),n.d(p,"createAreaLimitationReducer",(function(){return gA})),n.d(p,"Selections",(function(){return vA}));var g={};n.r(g),n.d(g,"getPermissionDefaultUIData",(function(){return wA})),n.d(g,"convertPermissionToUIData",(function(){return bA})),n.d(g,"convertUIDataToPermission",(function(){return AA})),n.d(g,"getPwdPopupLatestUIData",(function(){return EA})),n.d(g,"setPwdPopupLatestUIData",(function(){return xA})),n.d(g,"getInputOwnerPwd",(function(){return CA})),n.d(g,"setInputOwnerPwd",(function(){return DA})),n.d(g,"setCertificateAndPermission",(function(){return IA})),n.d(g,"setPasswordAndPermission",(function(){return RA})),n.d(g,"requestOwnerPassword",(function(){return TA}));var v={};n.r(v),n.d(v,"isJSONFile",(function(){return _A})),n.d(v,"isFDFFile",(function(){return kA})),n.d(v,"isXFDFFile",(function(){return FA})),n.d(v,"formatFileSize",(function(){return MA})),n.d(v,"formatFileLastModified",(function(){return OA}));var m={};n.r(m),n.d(m,"Eraser",(function(){return $A})),n.d(m,"Point",(function(){return jA})),n.d(m,"PointType",(function(){return LA}));var y={};n.r(y),n.d(y,"getSignatureFieldFromPDFDoc",(function(){return tP})),n.d(y,"hasCertifySignatureInPDF",(function(){return eP})),n.d(y,"hasSignedSignatureInPDF",(function(){return nP})),n.d(y,"getTrustedCertificateListDb",(function(){return dP})),n.d(y,"addTrustedCert",(function(){return lP})),n.d(y,"removeTrustedCert",(function(){return fP})),n.d(y,"removeTrustedCerts",(function(){return gP})),n.d(y,"getTrustedCertificateList",(function(){return yP})),n.d(y,"getFATLAndEUTLList",(function(){return EP})),n.d(y,"addFATLAndEUTLListToCertificateList",(function(){return bP})),n.d(y,"verifySignatureUtil",(function(){return DP}));var w={};n.r(w),n.d(w,"PDFTextToSpeechSynthesisStatus",(function(){return pw})),n.d(w,"ReadAloudService",(function(){return Vw})),n.d(w,"AbstractPDFTextToSpeechSynthesis",(function(){return kw}));var b=n(3),A=n.n(b),P=(n(56),n(115),n(123),n(9)),E=n.n(P),x=n(6),S=n.n(x),C=n(33),D=n.n(C),I=n(4),R=n.n(I),T=n(20),_=n.n(T),k=n(8),F=n.n(k),M=n(0),O=n.n(M),L=n(11),N=n.n(L),V=(n(43),n(1),n(10),n(16),n(40),n(7),n(18),n(25),n(23),n(14),n(157),n(42),n(30),n(45),n(31),n(96),n(12),n(133),n(134),n(52),n(107),n(108),n(116),n(13),n(92),n(126),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(86),n(32),n(51),n(97),n(288),n(289),n(53),n(413),n(414),n(2)),B=n.n(V),U=n(304),j=n.n(U),H=(n(416),function(){function t(t,e){this.$ui=B()(t),this.pdfViewerRender=e,this.pdfViewer=e.pdfViewer}var e=t.prototype;return e.rendering=function(){this.closeLoadingFn=this.pdfViewer.viewerUI.loading(this.$ui.get(0))},e.rendered=function(){this.closeLoadingFn&&this.closeLoadingFn()},t}()),W=(n(291),n(305)),Y=n.n(W),q=(n(109),n(245)),G=n.n(q);n(144),n(87);function z(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}var K=n(41),J=(n(178),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(e instanceof t){var s=e;e=s.a,n=s.b,r=s.c,i=s.d,o=s.e,a=s.f}else if(Array.isArray(e)){var c=e;e=c[0],n=c[1],r=c[2],i=c[3],o=c[4],a=c[5]}this.a=e,this.b=n,this.c=r,this.d=i,this.e=o,this.f=a}t.Concat2mt=function(e,n){return new t(e.a*n.a+e.b*n.c,e.a*n.b+e.b*n.d,e.c*n.a+e.d*n.c,e.c*n.b+e.d*n.d,e.e*n.a+e.f*n.c+n.e,e.e*n.b+e.f*n.d+n.f)};var e=t.prototype;return e.set=function(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.d=r,this.e=i,this.f=o},e.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0},e.reverse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=e.a*e.d-e.b*e.c;if(0==n)return e;var r=-n,i=e.d/n,o=e.b/r,a=e.c/r,s=e.a/n,c=(e.c*e.f-e.d*e.e)/n,u=(e.a*e.f-e.b*e.e)/r;return new t(i,o,a,s,c,u)},e.setReverse=function(t){var e=this.reverse(t);this.set(e.a,e.b,e.c,e.d,e.e,e.f)},e.rotate=function(e,n){var r,i=Math.cos(e),o=Math.sin(e),a=new t(i,o,-o,i,0,0);r=n?t.Concat2mt(a,this):t.Concat2mt(this,a),this.set(r.a,r.b,r.c,r.d,r.e,r.f)},e.rotateAt=function(t,e,n,r){this.translate(t,e,r),this.rotate(n,r),this.translate(-t,-e,r)},e.translate=function(t,e,n){n?(this.e+=t*this.a+e*this.c,this.f+=e*this.d+t*this.b):(this.e+=t,this.f+=e)},e.concat=function(e,n,r,i,o,a,s){var c,u;e instanceof t?(c=e,s=n):c=new t(e,n,r,i,o,a),u=s?t.Concat2mt(c,this):t.Concat2mt(this,c),this.set(u.a,u.b,u.c,u.d,u.e,u.f)},e.is90Rotated=function(){var t=1e3*this.a;t<0&&(t*=-1);var e=1e3*this.d;e<0&&(e*=-1);var n=this.b;n<0&&(n*=-1);var r=this.c;return r<0&&(r*=-1),t<n&&e<r},e.isScaled=function(){var t=1e3*this.b;t<0&&(t*=-1);var e=1e3*this.c;e<0&&(e*=-1);var n=this.a;n<0&&(n*=-1);var r=this.d;return r<0&&(r*=-1),t<n&&e<r},e.getA=function(){return this.a},e.getB=function(){return this.b},e.getC=function(){return this.c},e.getD=function(){return this.d},e.getE=function(){return this.e},e.getF=function(){return this.f},e.scale=function(t,e,n){this.a*=t,this.d*=e,n?(this.b*=t,this.c*=e):(this.b*=e,this.c*=t,this.e*=t,this.f*=e)},e.transformXDistance=function(t){var e=this.a*t,n=this.b*t;return Math.sqrt(e*e+n*n)},e.transformYDistance=function(t){var e=this.c*t,n=this.d*t;return Math.sqrt(e*e+n*n)},e.transformDistance=function(t,e){var n=this.a*t+this.c*e,r=this.b*t+this.d*e;return Math.sqrt(n*n+r*r)},e.transformPoint=function(t,e){return[this.a*t+this.c*e+this.e,this.b*t+this.d*e+this.f]},e.transformRect=function(t,e,n,r){for(var i,o=[t,t,n,n],a=[e,r,e,r],s=0;s<4;s++)i=this.transformPoint(o[s],a[s]),o[s]=i[0],a[s]=i[1];for(var c=[o[0],o[0],a[0],a[0]],u=1;u<4;u++)c[0]>o[u]&&(c[0]=o[u]),c[1]<o[u]&&(c[1]=o[u]),c[2]>a[u]&&(c[2]=a[u]),c[3]<a[u]&&(c[3]=a[u]);return[c[0],c[2],c[1],c[3]]},e.getXUnit=function(){var t=this.a,e=this.b;return 0===e?Math.abs(t):0===t?Math.abs(e):Math.sqrt(t*t+e*e)},e.getYUnit=function(){var t=this.c,e=this.d;return 0===t?Math.abs(e):0===e?Math.abs(t):Math.sqrt(t*t+e*e)},e.getUnitRect=function(){return this.transformRect(0,0,1,1)},e.matchRect=function(t,e){var n=e[0]-e[2];this.a=Math.abs(n)<.001?1:(t[0]-t[2])/n,n=e[3]-e[1],this.d=Math.abs(n)<.001?1:(t[3]-t[1])/n,this.e=t[0]-e[0]*this.a,this.f=t[3]-e[3]*this.d,this.b=0,this.c=0},e.getAngle=function(){return Math.atan2(this.b,this.a)},e.toArray=function(){return[this.a,this.b,this.c,this.d,this.e,this.f]},t}());function X(t,e){if(!t)throw new Error(e)}function Z(t){return function(t){return"number"==typeof t}(t)&&Math.floor(t)===t}function Q(t){return(t%360+360)%360%90==0}function tt(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(r?t>=e:t>e)&&(i?t<=n:t<n)}function et(t){return"function"==typeof t}function nt(t){return"string"==typeof t}function rt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return new at([t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1])}function it(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new at([1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1])}var ot,at=function(){function t(t){X(Array.isArray(t),"Illegal Matrix values, it should be an array! But actual: "+t),X(16===t.length,"Incorrect matrix values size, it must be 16!"),this.values=t,this.cols=Math.sqrt(t.length)}var e=t.prototype;return e.multiVec4=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return[this.getAt(0,0)*t+this.getAt(0,1)*e+this.getAt(0,2)*n+this.getAt(0,3)*r,this.getAt(1,0)*t+this.getAt(1,1)*e+this.getAt(1,2)*n+this.getAt(1,3)*r,this.getAt(2,0)*t+this.getAt(2,1)*e+this.getAt(2,2)*n+this.getAt(2,3)*r,this.getAt(3,0)*t+this.getAt(3,1)*e+this.getAt(3,2)*n+this.getAt(3,3)*r]},e.getAt=function(t,e){var n=t*this.cols+e;return X(n<this.values.length,"Cannot access value at (".concat(t,",").concat(e,"), it out bound of this matrix!")),this.values[n]},t}(),st=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.a=t,this.b=e,this.c=n,this.d=r}var e=t.prototype;return e.transform=function(e){var n=e.multiVec4(this.a,this.b,this.c,this.d),r=S()(n,4);return new t(r[0],r[1],r[2],r[3])},e.scale=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return this.transform(rt(t,e,n))},e.rotateZ=function(t){return this.transform(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=t/180*Math.PI,n=Math.cos(e),r=Math.sin(e);return new at([n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1])}(t))},e.translate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.transform(it(t,e,n))},t}();function ct(t){return function(){if(!ot){var t=Object(K.getDPI)();ot=[t.x,t.y]}return ot}()[t]}function ut(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t*ct(e)/72}function dt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=new st(t,e,0).scale(n).rotateZ(r);return[Math.round(Math.abs(i.a)),Math.round(Math.abs(i.b))]}var lt=function(){function t(t,e){this.$ui=B()(t),this.pageRender=e,this.docRender=e.docRender,this.viewerRender=this.docRender.viewerRender,this.pdfViewer=this.viewerRender.pdfViewer}var e=t.prototype;return e.rendering=function(){this.closeRenderingFn=this.pdfViewer.viewerUI.loading(this.$ui.get(0))},e.rendered=function(){this.closeRenderingFn&&this.closeRenderingFn()},e.destroy=function(){this.closeRenderingFn&&this.closeRenderingFn(),this.$ui=null},t}(),ht=function(){function t(t,e){this.eCustom=t,this.pdfPageRender=e}var e=t.prototype;return e.render=function(t,e){},e.destroy=function(){this.pdfPageRender=null,this.eCustom=null},t}(),ft=(n(145),function(){function t(){this.isActive=!1}var e=t.prototype;return e.active=function(){this.isActive||(this.isActive=!0,this.doActive())},e.unActive=function(){this.isActive&&(this.isActive=!1,this.doDeactive())},t}()),pt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).activations=[],e}O()(e,t);var n=e.prototype;return n.add=function(t){this.contains(t)||(this.activations.push(t),this.isActive&&!t.isActive&&t.active())},n.remove=function(t){var n=this,r=this.activations.indexOf(t);return r<0?this.activations.some((function(r,i){if(r instanceof e){var o=r.remove(t);return o&&!r.hasActivations()&&n.activations.splice(i,1),o}return!1})):(this.activations.splice(r,1),this.isActive&&t.isActive&&(t instanceof e?(t.activations||[]).forEach((function(t){return t.unActive()})):t.unActive()),!0)},n.exclude=function(t){return this.activations.filter((function(e){return!t.contains(e)}))},n.contains=function(t){return this.activations.indexOf(t)>-1||this.activations.some((function(n){return n instanceof e&&n.contains(t)}))},n.clear=function(){this.activations.forEach((function(t){t.isActive&&t.unActive()})),this.activations.length=0},n.getAllActivations=function(){return this.activations.reduce((function(t,n){return n instanceof e?t.push.apply(t,n.getAllActivations()):t.push(n),t}),[])},n.hasActivations=function(){return this.activations.length>0},n.doActive=function(){this.activations.forEach((function(t){t.isActive||t.active()}))},n.doDeactive=function(){this.activations.forEach((function(t){t.isActive&&t.unActive()})),this.activations.length=0},e}(ft),gt=function(){function t(){}var e=t.prototype;return e.active=function(t){var e,n,r,i;if(this.getCurrentActivatable()!==t){if(this.currentActivatable instanceof pt){if(this.currentActivatable.contains(t))return;if(t instanceof pt){var o=this.currentActivatable.exclude(t);o.length>0?o.forEach((function(t){t.isActive&&t.unActive()})):this.currentActivatable.isActive&&this.currentActivatable.unActive()}else(null===(e=this.currentActivatable)||void 0===e?void 0:e.isActive)&&(null===(n=this.currentActivatable)||void 0===n||n.unActive())}else(null===(r=this.currentActivatable)||void 0===r?void 0:r.isActive)&&(null===(i=this.currentActivatable)||void 0===i||i.unActive());this.currentActivatable=t,t.isActive||t.active()}},e.unActive=function(t){var e=this.getCurrentActivatable();e&&t&&t.isActive&&(e instanceof pt?e.remove(t):e===t&&(t.isActive&&t.unActive(),this.currentActivatable=void 0))},e.unActiveCurrent=function(){var t,e;(null===(t=this.currentActivatable)||void 0===t?void 0:t.isActive)&&(null===(e=this.currentActivatable)||void 0===e||e.unActive()),this.currentActivatable=void 0},e.getCurrentActivatable=function(){var t;if(null===(t=this.currentActivatable)||void 0===t?void 0:t.isActive)return this.currentActivatable},e.getAllCurrentActivatables=function(){var t=this.getCurrentActivatable();return t?t instanceof pt?t.getAllActivations():[t]:[]},e.hasActivations=function(){return null!=this.currentActivatable&&(!(this.currentActivatable instanceof pt)||this.currentActivatable.hasActivations())},e.currentActivableIs=function(t){var e=this.getCurrentActivatable();return e===t||e instanceof pt&&e.contains(t)},t}(),vt=n(22),mt=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null,pdfViewer:null};return(e=t.call(this)||this).disposor=new vt.a,e._parent=n,e._parentName=n.name,e.pdfViewer=n.pdfViewer,e.isDestroyed=!1,e}O()(e,t);var n=e.prototype;return n.addDestroyHook=function(){var t;(t=this.disposor).addDestroyHook.apply(t,arguments)},n.destroy=function(){this._parent=null,this.isDestroyed=!0,this.disposor.destroy()},n.parent=function(t){var e=this._parent;return t?e?t===this._parentName?e:e.parent(t):null:e},n.doActive=function(){},n.doDeactive=function(){},e}(ft),yt=function(){},wt=function(t){function e(n,r,i,o){var a;return(a=t.call(this,o)||this).name=e.getDefaultName(),a.$ui=n,a.$handler=r,a.$page=o.$ui,a.annot=i,a.component=new(a.pdfViewer.annotManager.get(i))(i,n[0],r[0],F()(a)),a}O()(e,t),e.getDefaultName=function(){return"annotRender"};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.annot=null,this.component.destroy(),this.component=null},n.updateSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.component.updateSize(t,e)},n.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=arguments.length>2?arguments[2]:void 0;if(this.isDestroyed||this.component.isDestroyed)return Promise.resolve();var r=this.scale,i=this.rotate;this.scale=t,this.rotate=e;var o=this.component;if(o.setVisibleRect(n),o.isHidden()){if(o.$ui.addClass("fv__markup-annot-invisible"),!o.isFormControl())return Promise.resolve()}else o.isUIVisible()&&o._showUI();return o.$ui.removeClass("fv__markup-annot-invisible"),o.isUIVisible()?Promise.resolve(o.render(t,e)).then((function(n){var a=r!==t||i!==e;return Promise.resolve(o.afterRender({transformed:a,prescale:r,scale:t,prerotate:i,rotate:e})).then((function(t){return n}))})).catch(yt):Promise.resolve()},n.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.scale=t,this.rotate=e,Promise.resolve(this.component.add(t,e))},n.active=function(t){return Promise.resolve(this.component.active(t))},n.unActive=function(){return Promise.resolve(this.component.unActive())},n.destroy=function(){this.component.destroy()},n.focus=function(){return this.component.focus(this.$page)},n.blur=function(){return this.component.blur(this.$page)},n.remove=function(t){var e=this,n=this.parent();if(t)return n.unActiveAnnot(this.annot).then((function(){e.component.remove(),n.removeAnnotRender(e)}));for(var r=this.getRelevanceRenders(),i=[],o=r.length;o--;)i[o]=r[o].remove(!0);return Promise.all(i)},n.showContextMenu=function(t,e){return this.component.showContextMenu(t,e)},n.doubleTapAnnot=function(){this.component.doubleTapAnnot()},n.redraw=function(t,e){if(t)return Promise.resolve(this.component.redraw(e));for(var n=this.getGroupRenders(),r=[],i=n.length;i--;)r[i]=n[i].redraw(!0,e);return Promise.all(r)},n.getAnnot=function(){return this.getPDFAnnot()},n.getPDFAnnot=function(){return this.annot},n.getGroupRenders=function(){var t=this.annot,e=[t];if(!t.IsGrouped||!t.IsGrouped())return[this];e=[].concat(t.getGroupElements());var n=this.parent().getAnnotRenders(),r=[];for(var i in n){var o=n[i],a=e.indexOf(o.getPDFAnnot());if(a>-1&&(r.push(o),e.splice(a,1)),!e.length)break}return r},n.getRelevanceRenders=function(){var t,e=[],n=this.annot;(t=(n=n.getGroupHeader&&n.getGroupHeader()||n).getPopup&&n.getPopup())&&e.push(t),function(t,e){bt(t,"getReplies",e)}(n,e),At(n,e),Pt(n,e);var r=n.isGrouped&&n.isGrouped()?n.getGroupElements():[n];e=e.concat(r);var i=this.parent().getAnnotRenders(),o=[];try{for(var a in i){var s=i[a],c=e.indexOf(s.getPDFAnnot());if(c>-1&&(o.push(s),e.splice(c,1)),!e.length)break}}catch(t){}return o},n.moved=function(t){this.component.moved(),this.component.movedByOther(t)},n.getComponent=function(){return this.component},n.invisibleRender=function(){this.component.invisibleRender()},n.clearCache=function(){this.component.clearCache()},e}(mt);function bt(t,e,n){if(t[e]){var r=t[e](),i=r.length;if(i){n.push.apply(n,r);for(var o=i;o--;){var a=r[o];At(a,n),Pt(a,n),bt(a,e,n)}}}}function At(t,e){return bt(t,"getMarkedStates",e)}function Pt(t,e){return bt(t,"getReviewStates",e)}var Et=function(){return!0},xt=function(t,e){return e[t]},St={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReplyAdded:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationReviewStateAnnotAdded:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationMarkedStateAnnotAdded:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationPositionMoved:"annotation-moved-position",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionAdded:"action-add",actionRemove:"action-remove",actionRemoved:"action-remove",layerVisibleChange:"layer-visible-change",layerVisibleChanged:"layer-visible-change",layerRemoved:"layer-removed",layerMerged:"layer-merged",bookmarkAdded:"bookmark-added",structureBookmarkAdded:"structure-bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageInfoChanged:"page-info-change",pageRotationChange:"page-rotation-change",pageRotationChanged:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptSucceeded:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pwdAndPermRemoved:"remove-password-and-permission",securityTypeChanged:"security-type-changed",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",pagesInserted:"import-pages",importPages:"import-pages",documentAttachmentAdd:"document-attachment-add",docAttachmentAdded:"document-attachment-add",documentAttachmentModify:"document-attachment-modify",docAttachmentModified:"document-attachment-modify",documentAttachmentRemove:"document-attachment-remove",docAttachmentRemoved:"document-attachment-remove",applyRedaction:"apply-redaction",redactionApplied:"apply-redaction",removeReviewState:"remove-review-state",reviewStateRemoved:"remove-review-state",removeMarkedState:"remove-marked-state",markedStateRemoved:"remove-marked-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",COChange:"COChange",COChanged:"COChange",pagesReversed:"pages-reversed",pagesMoved:"pages-moved",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated",pageMeasureScaleRatioChanged:" page-measure-scale-ratio-changed",obtainsPageFromEngine:"obtains-page-from-engine",pagesBoxChange:"pages-box-changed",pagesBoxChanged:"pages-box-changed",pagesLabelChange:"pages-label-change",pagesLabelChanged:"pages-label-change",pagesLabelNeedUpdate:"pages-label-need-change",pagesLabelNeedUpdated:"pages-label-need-change",pagesReplace:"pages-replace",pagesReplaced:"pages-replace",recognitionForm:"recognition-form",removeEmbeddedPageThumbnail:"remove-embedded-page-thumbnail",embeddedPageThumbnailRemoved:"remove-embedded-page-thumbnail",articleThreadAdded:"article-thread-added",articleThreadUpdated:"article-thread-updated",articleThreadRemoved:"article-thread-removed",articleBeadAdded:"article-bead-added",articleBeadRemoved:"article-bead-removed",articleBeadUpdated:"article-bead-updated",articleEnterReadMode:"article-enter-read-mode",articleOutReadMode:"article-out-read-mode",signChinaNoApply:"sign-china-no-apply"},Ct=A()({jrLicenseSuccess:"jr-license-success",srLicenseSuccess:"sr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",beforeLoadPDFDoc:"before-load-pdf-document",startConvert:"start-convert",finishConvert:"finish-convert",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",beforeRenderPage:"before-render-page",renderPageSuccess:"render-page-success",updateZoomMode:"update-zoom-mode",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",unActiveAnnotation:"unactive-annotation",updateActiveAnnotation:"update-action-annotation",updateActionAnnotation:"update-action-annotation",removeActiveAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationBefore:"remove-action-annotation-before",removeActiveAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActiveAnnotationFailed:"remove-action-annotation-failed",removeActionAnnotationFailed:"remove-action-annotation-failed",beforeSwitchStateHandler:"before-switch-state-handler",switchStateHandler:"switch-state-handler",deactiveStateHandler:"deactive-state-handler",redactAnnotRendered:"redact-annot-rendered",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",beforeDocumentRotation:"before-document-rotation",afterDocumentRotation:"after-document-rotation",snapModeChanged:"snap-mode-changed",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",perimeterAnnotCreationStart:"perimeter-creation-start",updateDistanceAnnot:"update-distance-annot",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",addEditImage:"add-edit-image",InkImageSelected:"ink-image-selected",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",sideBarChanged:"sidebar-changed",disableScroll:"disable-scroll",enableScroll:"enable-scroll",updateScrollableStatus:"update-scrollable-status",selectText:"select-text",changeEnableJS:"change-enable-js",toggleEngineSr2JrSuccess:"toggle-engine-sr-to-jr-success",iconInited:"iconInited",iconAdded:"iconAdded",iconRemoved:"iconRemoved",annotationPermissionChanged:"annotation-premission-changed",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page",designerAssistantStatusChanged:"form-designer-assistant-status-changed",mouseEnter:"mouse-enter",mouseLeave:"mouse-leave",setFromFieldHighlight:"set_form_field_highlight",AddFontMaps:"set_font_map",thumbnailClicked:"thumbnail-clicked",layerActionActived:"layer-action-actived",redeModeShowSidebar:"rede-mode-show-sidebar",gridToggle:"grid-toggle",snapGridToggle:"snap-grid-toggle",toggleCollaborationMode:"toggleCollaborationMode",findReplaceDialogVisibleChange:"find-replace-dialog-visible-change",showAllComments:"show-all-comments",hideAllComments:"hide-all-comments",focusInObject:"focus-in-object",blurFromObject:"blur-from-object",documentWillPrint:"document-will-print",documentDidPrint:"document-did-print",documentWillSave:"document-will-save",documentDidSave:"document-did-save",verifyDocSignatureEvent:"verify-doc-signature",verifySignatureEvent:"verify-signature",clearSignatureEvent:"clear-signature",viewSignedVersionDocEvent:"view-signed-version",showFieldPropertiesEvent:"show-field-properties",showSignatureVerifyInfoEvent:"show-signature-tusted-info",compareSignedVersionEvent:"compare-signed-version",showCompareSignedVersionResultEvent:"show-compare-signed-version-result",createInkSignSuccess:"createInkSignSuccess"},St),Dt=(n(203),n(29)),It=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.lastTaskPromise=Promise.resolve(),this.interval=t,this.pending=!1,this.leading=e,this.flag=0,this.cancelLast=Dt.a,this.currentTaskFn=Dt.a}var e=t.prototype;return e.invokeTask=function(t){var e=this,n=t();return n instanceof Promise?n.finally((function(){e.pending=!1})):(this.pending=!1,Promise.resolve(n))},e.exec=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.flag++,this.currentTaskFn=t.bind.apply(t,[r].concat(E()(n)));var i=this.currentTaskFn;if(this.pending)return this.lastTaskPromise;this.leading&&(this.lastTaskPromise=this.lastTaskPromise.finally((function(){return i()})),this.currentTaskFn=Dt.a);var o=z(),a=function t(){e.pending=!0,e.lastTaskPromise=e.lastTaskPromise.finally((function(){var n=setTimeout((function(){if(e.flag>0)e.flag=0,clearTimeout(n),t();else{var r=e.currentTaskFn();r instanceof Promise?r=r.finally((function(){e.pending=!1})):e.pending=!1,o.resolve(r)}}),e.interval)}))};return a(),o.promise},e.waitForLastTask=function(t){return this.lastTaskPromise||Promise.resolve(t)},e.cancel=function(){this.currentTaskFn=Dt.a},e.destroy=function(){this.cancel()},t}(),Rt=n(15),Tt=n.n(Rt),_t=function(){function t(t){this.task=t,this.cancelled=!1,this.defer=z()}var e=t.prototype;return e.cancel=function(){this.defer.resolve(),this.cancelled=!0},e.isCancelled=function(){return this.cancelled},e.reject=function(t){this.defer.reject(t)},e.resolve=function(t){this.defer.resolve(t)},Tt()(t,[{key:"promise",get:function(){return this.defer.promise}}]),t}(),kt=function(){function t(){this.insertions=[],this.executions=[],this.isRunning=!1}var e=t.prototype;return e.notifyExecute=function(){var t=this;if(!this.isRunning){this.isRunning=!0;!function e(){var n,r=t.getAndPopNextExecution();if(r){var i=null===(n=t.executing)||void 0===n?void 0:n.promise,o=function(){if(t.executing=r,r.isCancelled())e();else{var n=r.task;Promise.resolve(function(){try{return n()}catch(t){return Promise.reject(t)}}()).then((function(t){r.resolve(t)}),(function(t){r.reject(t)})).finally((function(){e()}))}};i?i.then(o,o):o()}else t.isRunning=!1}()}},e.execTasks=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===t.length)return this.waitForCurrentRunningTasks();var n,r,i=t.map((function(t){return new _t(Ft(t))}));e?(n=this.executions).unshift.apply(n,E()(i)):(r=this.executions).push.apply(r,E()(i));var o=i[i.length-1].promise;return this.notifyExecute(),o},e.execInverse=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return this.exec(t,e,n,!0)},e.exec=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=("number"==typeof e?Array(e).fill(0).map((function(t,e){return[e]})):e).map((function(e){return t.bind.apply(t,[n].concat(E()(e)))}));return this.execTasks(i,r)},e.insert=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.map(Ft),o=i.map((function(t){return new _t(t)}));(t=this.insertions).push.apply(t,E()(o));var a=Promise.all(o.map((function(t){return t.promise})));return this.notifyExecute(),a},e.resume=function(){},e.cancel=function(){var t;this.insertions.forEach((function(t){t.cancel()})),this.executions.forEach((function(t){t.cancel()})),null===(t=this.executing)||void 0===t||t.cancel()},e.waitForCurrentRunningTasks=function(){var t=this.insertions.concat(this.executions);return this.executing&&t.push(this.executing),Promise.all(t.map((function(t){return t.promise})))},e.waitUntilQuiet=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise((function(n){!function r(){setTimeout((function(){t.executions.length>0?r():n(t.waitForCurrentRunningTasks())}),e)}()}))},e.getRunningTaskCount=function(){return this.executions.filter((function(t){return!t.isCancelled()})).length},e.getAndPopNextExecution=function(){var t;return this.insertions.length>0?(t=this.insertions[0],this.insertions.shift()):this.executions.length>0&&(t=this.executions[0],this.executions.shift()),t},t}();function Ft(t){return"function"==typeof t?t:t.context?Array.isArray(t.args)?(e=t.task).bind.apply(e,[t.context].concat(E()(t.args))):t.task.bind(t.context):t.task;var e}var Mt=function(){},Ot=function(){function t(){this.queue=[],this.promise=Promise.resolve()}var e=t.prototype;return e.push=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return this.queue.push([t,n]),new Promise((function(t,n){setTimeout((function(){return e.exec()}),r)}))},e.exec=function(){var t=this;if(!this.execIng){var e=this.queue.pop();if(e){this.execIng=!0;for(var n=0,r=this.queue.length;n<r;n++)this.queue[n][1]();return this.queue=[],Promise.resolve(e[0]()).catch((function(){try{return Promise.resolve(e[1]()).catch(Mt)}catch(t){}})).finally((function(){t.execIng=!1,setTimeout((function(){t.exec()}),30)}))}}},e.end=function(){this.queue=[]},t}(),Lt=function(){function t(){this.executor=new kt}var e=t.prototype;return e.serial=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.executor.cancel(),this.executor.waitForCurrentRunningTasks().then((function(){return t.executor.resume(),t.executor.execTasks(e.map((function(t){return{task:t}})))}))},e.push=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.executor.execTasks(e.map((function(t){return{task:t}})))},e.unshift=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.executor.insert(e.map((function(t){return{task:t}}))),this.executor.waitForCurrentRunningTasks()},e.concat=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){t.executor.exec(e)})),this.executor.waitForCurrentRunningTasks()},e.exec=function(){return this.executor.waitForCurrentRunningTasks()},e.end=function(){return this.executor.cancel(),this.executor.waitForCurrentRunningTasks()},t}(),Nt=n(28),Vt=n(21);function Bt(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r||Vt.isMobile&&(Nt.isSafari||Vt.isXiaomi||Nt.isUC)||Vt.isIPAD&&Nt.isSafari||Vt.isHuawei){var i,o=null,a=0,s=!1,c=function(t){s=!1,i=void 0,clearTimeout(o),o=null,t.touches&&1!==t.touches.length||(a=0,i={x:t.touches[0].pageX,y:t.touches[0].pageY},o=setTimeout((function(){s||d(t)}),600),t.stopPropagation())},u=function(t){if((!t.touches||1===t.touches.length)&&i){var e=t.touches[0],n=Math.pow(e.pageX-i.x,2)+Math.pow(e.pageY-i.y,2);(a=Math.max(a,n))>10&&(s=!0)}},d=function(n){if(i=null,n.changedTouches&&1===n.changedTouches.length){var r=n.changedTouches[0],a=new Event("contextmenu"),s=["target","currentTarget","clientX","clientY","pageX","pageY","offsetX","offsetY","path"].reduce((function(t,e){return t[e]={value:r[e]},t}),{});s.stopPropagation={value:function(){n.stopPropagation()}},s.preventDefault={value:function(){n.preventDefault()}};var c=Object.create(a,s);e.call(t,c),clearTimeout(o)}else clearTimeout(o)},l=function(){s=!1,clearTimeout(o)};t.addEventListener("touchstart",c,n),document.addEventListener("touchend",l,!0),document.addEventListener("touchmove",u,!0);var h=function(t){t.preventDefault()};return document.addEventListener("contextmenu",h,{capture:!0,passive:!1}),t.addEventListener("contextmenu",h),function(){t.removeEventListener("touchstart",c,n),document.removeEventListener("touchmove",u,!0),document.removeEventListener("touchend",l,!0),document.removeEventListener("contextmenu",h,{capture:!0,passive:!1}),t.removeEventListener("contextmenu",h)}}return t.addEventListener("contextmenu",e,n),function(){t.removeEventListener("contextmenu",e,n)}}function Ut(t,e){if(!(t&&t instanceof Element))return!1;var n=e||{},r=n.visible,i=void 0===r||r,o=n.enable,a=void 0===o||o,s=n.readonly,c=void 0===s||s;if(i){var u=t.getClientRects();if(0===u.length)return!1;var d=u[0];if(d.width*d.height==0)return!1}switch(t.tagName.toLowerCase()){case"input":case"select":case"textarea":var l=t;return(!a||!l.disabled)&&(!c||!l.disabled&&!l.readOnly)}switch(t.contentEditable){case"true":case"plaintext-only":return!0}return!1}function jt(t){return Ut(t,{visible:!1,readonly:!1,enable:!1})}var Ht=n(5),Wt=n(27),$t=new(function(){function t(){this._ctrl=!1,this._shift=!1,this._win=!1,this._alt=!1,this._capsLock=!1,this._bindEvent()}return t.prototype._bindEvent=function(){var t=this;window.addEventListener("keydown",(function(e){t._ctrl=e.ctrlKey,t._shift=e.shiftKey,t._alt=e.altKey,t._win=e.metaKey,t._capsLock=!!e.getModifierState&&e.getModifierState("CapsLock")}),!1),window.addEventListener("keyup",(function(e){t._shift=16!==e.keyCode&&t._shift,t._alt=18!==e.keyCode&&t._alt,t._ctrl=17!==e.keyCode&&t._ctrl,t._win=91!==e.keyCode&&t._win,t._capsLock=20!==e.keyCode&&t._capsLock}),!1),window.addEventListener("mousemove",(function(e){t._ctrl=e.ctrlKey,t._shift=e.shiftKey,t._alt=e.altKey,t._win=e.metaKey,t._capsLock=!!e.getModifierState&&e.getModifierState("CapsLock")}),{capture:!0}),window.addEventListener("wheel",(function(e){t._ctrl=e.ctrlKey,t._shift=e.shiftKey,t._alt=e.altKey,t._win=e.metaKey,t._capsLock=!!e.getModifierState&&e.getModifierState("CapsLock")}),{capture:!0})},Tt()(t,[{key:"isCtrl",get:function(){return this._ctrl}},{key:"isCtrlDown",get:function(){return this._ctrl}},{key:"isShift",get:function(){return this._shift}},{key:"isShiftDown",get:function(){return this._shift}},{key:"isWin",get:function(){return this._win}},{key:"isWinDown",get:function(){return this._win}},{key:"isAlt",get:function(){return this._alt}},{key:"isAltDown",get:function(){return this._alt}},{key:"isCapsLock",get:function(){return this._capsLock}}]),t}()),Yt=(n(47),n(58)),qt=n.n(Yt),Gt=n(306),zt=n.n(Gt),Kt=n(307),Jt=n.n(Kt),Xt=n(308),Zt=n.n(Xt),Qt=n(309),te=n.n(Qt),ee=n(310),ne=n.n(ee),re=n(311),ie=n.n(re),oe=n(312),ae=n.n(oe),se=n(313),ce=n.n(se),ue=n(314),de=n.n(ue),le=n(315),he=n.n(le),fe=n(316),pe=n.n(fe),ge=n(317),ve=n.n(ge);qt.a.locale(te.a),qt.a.locale(ne.a),qt.a.locale(ie.a),qt.a.locale(ae.a),qt.a.locale(ce.a),qt.a.locale(de.a),qt.a.locale(he.a),qt.a.locale(pe.a),qt.a.locale(ve.a),qt.a.extend(zt.a),qt.a.extend(Jt.a),qt.a.extend(Zt.a);var me=qt.a;var ye=function(t,e,n){var r="";if("object"===_()(t)&&t.IsValid){if(!t.IsValid())return r;t=function(t){return new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.milliseconds)}(t)}var i=me(t);if((e=e||"YYYY-MM-DD HH:mm:ss").indexOf("Z")>=0){n=A()({separator:":",prefix:"",showSpace:!0},n);var o=i.format("Z");":"!==n.separator&&(o=o.replace(":",String(n.separator))),""!==n.prefix&&(o=String(n.prefix)+o),e=e.replace(/\s+Z+|Z+/g,"");var a=n.showSpace?" ":"";r=i.format(e)+a+o}else r=i.format(e);return r},we=function(t){return"D:"+ye(t,"YYYYMMDDHHmmssZ",{separator:"'",showSpace:!1})+"'"},be=ye,Ae=(n(110),n(293),n(127),{success:0,file:1,format:2,password:3,handle:4,certificate:5,unknown:6,invalidLicense:7,param:8,unsupported:9,outOfMemory:10,securityHandler:11,notParsed:12,notFound:13,invalidType:14,conflict:15,unknownState:16,dataNotReady:17,invalidData:18,xFALoadError:19,notLoaded:20,invalidState:21,notCDRM:22,canNotConnectToServer:23,invalidUserToken:24,noRights:25,rightsExpired:26,deviceLimitation:27,canNotRemoveSecurityFromServer:28,canNotGetACL:29,canNotSetACL:30,isAlreadyCPDF:31,isAlreadyCDRM:32,canNotUploadDocInfo:33,canNotUploadCDRMInfo:34,invalidWrapper:35,canNotGetClientID:36,canNotGetUserToken:37,invalidACL:38,invalidClientID:39,OCREngineNotInit:40,diskFull:41,OCRTrialIsEnd:42,filePathNotExist:43,complianceEngineNotInit:44,complianceEngineInvalidUnlockCode:45,complianceEngineInitFailed:46,timeStampServerMgrNotInit:47,LTVVerifyModeNotSet:48,LTVRevocationCallbackNotSet:49,LTVCannotSwitchVersion:50,LTVCannotCheckDTS:51,LTVCannotLoadDSS:52,LTVCannotLoadDTS:53,needSigned:54,complianceResourceFile:55,timeStampServerMgrNoDefaltServer:56,defaultTimeStampServer:57,noConnectedPDFModuleRight:58,noXFAModuleRight:59,noRedactionModuleRight:60,noRMSModuleRight:61,noOCRModuleRight:62,noComparisonModuleRight:63,noComplianceModuleRight:64,noOptimizerModuleRight:65,noConversionModuleRight:66,collaborationSession:1400}),Pe={download:1},Ee={normal:0,italic:1,bold:2},xe={solid:0,dashed:1,underline:2,beveled:3,inset:4,cloudy:5},Se={graph:"Graph",pushPin:"PushPin",paperclip:"Paperclip",tag:"Tag"},Ce={Check:"Check",Circle:"Circle",Comment:"Comment",Cross:"Cross",Help:"Help",Insert:"Insert",Key:"Key",NewParagraph:"NewParagraph",Note:"Note",Paragraph:"Paragraph",RightArrow:"RightArrow",RightPointer:"RightPointer",Star:"Star",UpArrow:"UpArrow",UpLeftArrow:"UpLeftArrow"},De={None:0,Square:1,Circle:2,Diamond:3,OpenArrow:4,ClosedArrow:5,Butt:6,ReverseOpenArrow:7,ReverseClosedArrow:8,Slash:9},Ie={left:0,center:1,right:2},Re={moveTo:1,lineTo:2,lineToCloseFigure:3,bezierTo:4,bezierToCloseFigure:5},Te={goto:"TypeGoto",launch:"TypeLaunch",uri:"TypeURI",named:"TypeNamed",thread:"TypeThread",submitForm:"TypeSubmitForm",resetForm:"TypeResetForm",javaScript:"TypeJavaScript",importData:"TypeImportData",hide:"TypeHide"},_e={none:0,invert:1,outline:2,push:3,toggle:4},ke={firstChild:0,lastChild:1,previousSibling:2,nextSibling:3,firstSibling:4,lastSibling:5},Fe={fdf:0,xfdf:1,xml:2,csv:3,txt:4},Me={all:0,field:1,annot:2},Oe={topLeft:"TopLeft",topCenter:"TopCenter",topRight:"TopRight",centerLeft:"CenterLeft",center:"Center",centerRight:"CenterRight",bottomLeft:"BottomLeft",bottomCenter:"BottomCenter",bottomRight:"BottomRight"},Le={asContent:0,asAnnot:1,onTop:2,unprintable:4,display:8},Ne={courier:0,courierBold:1,courierBoldOblique:2,courierOblique:3,helvetica:4,helveticaBold:5,helveticaBoldOblique:6,helveticaOblique:7,timesRoman:8,timesBold:9,timesBoldItalic:10,timesItalic:11,symbol:12,zapfDingbats:13},Ve={rotation0:0,rotation1:1,rotation2:2,rotation3:3},Be={rotation0:0,rotation90:90,rotation180:180,rotation270:270},Ue={caseSensitive:1,wholeWord:2,consecutively:4},je={normal:0,incremental:1,noOriginal:2,XRefStream:8,linearized:4096,removeRedundantObjects:16},He={all:0,even:1,odd:2},We={page:"page",annot:"annot"},$e={print:"print",view:"view"},Ye={MSlashD:0,MSlashDSlashYY:1,MSlashDSlashYYYY:2,MMSlashDDSlashYY:3,MMSlashDDSlashYYYY:4,DSlashMSlashYY:5,DSlashMSlashYYYY:6,DDSlashMMSlashYY:7,DDSlashMMSlashYYYY:8,MMSlashYY:9,MMSlashYYYY:10,MDotDDotYY:11,MDotDDotYYYY:12,MMDotDDDotYY:13,MMDotDDDotYYYY:14,MMDotYY:15,DDotMDotYYYY:16,DDDotMMDotYY:17,DDDotMMDotYYYY:18,YYHyphenMMHyphenDD:19,YYYYHyphenMMHyphenDD:20},qe={default:0,numberOfCount:1,numberSlashCount:2,pageNumber:3,pageNumberOfCount:4},Ge={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144},ze={verifyChange:128,verifyIncredible:256,verifyNoChange:1024,stateVerifyIssueUnknown:2048,verifyIssueValid:4096,verifyIssueUnknown:8192,verifyIssueRevoke:16384,verifyIssueExpire:32768,verifyIssueUncheck:65536,verifyIssueCurrent:131072,verifyTimestampNone:262144,verifyTimestampDoc:524288,verifyTimestampValid:1048576,verifyTimestampInvalid:2097152,verifyTimestampExpire:4194304,verifyTimestampIssueUnknown:8388608,verifyTimestampIssueValid:16777216,verifyTimestampTimeBefore:33554432,verifyChangeLegal:134217728,verifyChangeIllegal:268435456},Ke={showTagImage:1,showLabel:2,showReason:4,showDate:8,showDistinguishName:16,showLocation:32,showSigner:64,showBitmap:128,showText:256},Je={click:-1,keyStroke:7,format:8,validate:9,calculate:10,mouseEnter:11,mouseExit:12,mouseDown:13,mouseUp:14,onFocus:15,onBlur:16},Xe={CalcContentsBox:0,CalcDetection:1},Ze={MediaBox:0,CropBox:1,TrimBox:2,ArtBox:3,BleedBox:4},Qe={Fill:0,Stroke:1,FillStroke:2,Invisible:3,FillClip:4,StrokeClip:5,FillStrokeClip:6,Clip:7},tn={Courier:0,CourierB:1,CourierBI:2,CourierI:3,Helvetica:4,HelveticaB:5,HelveticaBI:6,HelveticaI:7,Times:8,TimesB:9,TimesBI:10,TimesI:11,Symbol:12,ZapfDingbats:13},en={FixedPitch:1,Serif:2,Symbolic:4,Script:8,NonSymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,Bold:262144},nn={ANSI:0,Default:1,Symbol:2,Shift_JIS:128,Hangeul:129,GB2312:134,ChineseBig5:136,Thai:222,EastEurope:238,Russian:204,Greek:161,Turkish:162,Hebrew:177,Arabic:178,Baltic:186},rn={Unknown:0,GB1:1,CNS1:2,JAPAN1:3,KOREA1:4,UNICODE:5},on={None:0,Alternate:1,Winding:2},an={All:0,Text:1,Path:2,Image:3,Shading:4,FormXObject:5},sn={borderColor:"borderColor",fillColor:"fillColor",normalCaption:"normalCaption",downCaption:"downCaption",rolloverCaption:"rolloverCaption"},cn={first:0,last:1,after:2,before:3},un={crossMark:1,checkMark:2,roundRectangle:3,line:4,dot:5},dn={Dests:1,JavaScript:2,EmbeddedFiles:3,Templates:4,Pages:5};function ln(t){return{unknowntype:"UnKnownType",text:"Text",link:"Link",freetext:"FreeText",line:"Line",square:"Square",circle:"Circle",polygon:"Polygon",polyline:"PolyLine",highlight:"Highlight",underline:"Underline",squiggly:"Squiggly",strikeout:"StrikeOut",stamp:"Stamp",caret:"Caret",ink:"Ink",psink:"PsInk",fileattachment:"FileAttachment",sound:"Sound",movie:"Movie",widget:"Widget",screen:"Screen",printermark:"PrinterMark",trapnet:"TrapNet",watermark:"Watermark","3d":"3D",popup:"Popup",redact:"Redact"}[t.toString().toLowerCase()]}var hn="WRRRRRRRRWWRWWRRRRRRRRRRRRRRRRRRWRRRRDRRDDRNRNNDNNNNNNNNNNRRDRDRRRRRRRRRRRRRRRRRRRRRRRRRRRRDRDRRRRRRRRRRRRRRRRRRRRRRRRRRRRRDRDRRWRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRW";function fn(t){var e,n=t.length,r=0;for(e=0;e<n;e++){var i=t.charCodeAt(e);i>=128||"W"==hn[i]||"#"==t[e]||"D"==hn[i]?r+=3:r++}if(r==n)return t;var o="";for(e=0;e<n;e++){var a=t.charCodeAt(e);if(a>=128||"W"==hn[a]||"#"==t[e]||"D"==hn[a]){if("W"==hn[a]&&0==a)continue;o+="#",o+="0123456789ABCDEF"[parseInt(a/16)],o+="0123456789ABCDEF"[a%16]}else o+=t[e]}return o}function pn(t){var e;for(e=0;e<t.length&&!(t.charCodeAt(e)>255);e++);if(e===t.length)return"("+t.replace(/([\(|\)])/g,"\\$1")+")";var n="<FEFF";for(e=0;e<t.length;e++){for(var r=t.charCodeAt(e).toString(16);r.length<4;)r="0"+r;n+=r}return n+">"}function gn(t){for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n));return new Uint8Array(e)}var vn=function(){function t(){}return t.JSONToFDF=function(e){for(var n={next:2,annotRef:[],file:"%FDF-1.2\n1 0 obj<</FDF<</Annots[{annotsRefArray}]>>/Type/Catalog>>endobj\n"},r=[],i=0,o=e.length;i<o;i++){var a=e[i];a.type&&(a.deleted?r.push({name:a.name,page:a.page}):t.singleAnnotJSONToFDF(n,a,!1))}return new Blob([gn(n.file.replace(/\{annotsRefArray\}/,n.annotRef.join(" "))+"trailer\n<</Root 1 0 R>>\n%%EOF")],{type:"application/fdf"})},t.singleAnnotJSONToFDF=function(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.next;if(i?r="Popup":i="popup"==(r=ln(n&&n.type&&n.type.toLowerCase()||"")).toLowerCase(),!r||"link"==r.toLowerCase()||"screen"==r.toLowerCase()||"sound"==r.toLowerCase())return 0;var a=n.style||"S";a=a.toUpperCase()[0];var s=n.width,c=n.color||"",u="C"==a?"C":"S",d=n.intensity,l=0===n.opacity?0:n.opacity||1,h=pn(n.contents||""),f=n.flags||"print",p=f.split(",");for(var g in f=0,Ht.AnnotFlagsName)-1!=p.indexOf(Ht.AnnotFlagsName[g])&&(f|=1<<parseInt(g));var v=n.creationdate,m=n.date,y=n.name||"",w=n.page,b=(n.rect||"").replace(/,/g," "),A=pn(n.subject||"subject"),P=pn(n.title||"title"),E=n["interior-color"]||n.interiorColor,x="".concat(o," 0 obj\n")+"<<"+"/Rect [".concat(b,"]")+"/Subtype /".concat(r)+"/NM (".concat(y,")");for(var S in n.customEntries)x+="/".concat(S," ").concat(pn(n.customEntries[S]),"\n");if(e.annotRef.push("".concat(o," 0 R ")),e.next++,!i){var C;if(x+="/M (".concat(m,")")+"/CA ".concat(l)+"/Contents ".concat(h)+"/CreationDate (".concat(v,")")+"/F ".concat(f)+"/Page ".concat(w)+"/Subj ".concat(A)+"/T ".concat(P)+"/Type /Annot",n.replyType)C="string"==typeof n.replyType&&n.replyType||"Group",x+="/RT /".concat(C[0].toUpperCase()+C.substr(1));n.inreplyto&&(x+="/IRT (".concat(n.inreplyto,")")),n.measureRatio&&(x+="/Measure<</R(".concat(n.measureRatio,")/X[<</C ").concat(n.measureConversionFactor,"/U(").concat(n.measureUnit,")>>]/Type/Measure/Subtype/RL>>"))}if(a||s){a=a||"S",s=s||"0",d=d||"0",u=u||"S";var D=(n.dashes||"").replace(/,/g," ");x+="/BS <</S /".concat(a," /W ").concat(s," /D [").concat(D,"]>>")+"/BE <</S /".concat(u," /I ").concat(d,">>")}"FreeText"!=r?(c&&(x+="/C "+wn(c)),E&&(x+="/IC "+wn(E))):(E&&(x+="/C "+wn(E)),c&&(x+="/IC "+wn(c),x+="/DS (color:".concat(n.fontColor,")"))),void 0!==n.rotation&&(x+="/Rotate ".concat(n.rotation));var I="";switch(r){case"Text":case"Note":var R;x=x.replace(/\/Subtype\s?\/Note/,"/Subtype /Text"),n.icon&&(x+="/Name/".concat(fn(n.icon))),(R=n.state)&&(x+="/State(".concat(R,")/StateModel(").concat(n.statemodel,")"));break;case"Link":return"";case"FreeText":x=x.replace(/\/C\s?\[[\s\S]*?\]/,""),E&&(x+="/C ".concat(wn(E)));var T=n.defaultappearance,_=n.justification,k="/DA (".concat(T,")")+"/Q ".concat(_),F=n.intent||n.IT;if(F&&(k+="/IT /".concat(F)),n.callout){var M=n.callout.replace(/,/g," ");k+="/CL  [".concat(M,"]"),k+="/LE/".concat(n.head)}if(n.fringe){var O=n.fringe.replace(/,/g," ");k+="/RD [".concat(O,"]")}I=k;break;case"Line":var L="yes"===n.caption,N=n.head,V=n.tail,B="[/".concat(N,"/").concat(V,"]"),U=n.leaderLength,j=n.start.replace(/,/g," "),H=n.end.replace(/,/g," "),W=j+" "+H,$=n.leaderExtend,Y=n.leaderOffset,q=n.captionOffset?n.captionOffset.x+" "+n.captionOffset.y:"",G=n.intent,z="/Cap ".concat(L)+"/LE ".concat(B)+"/LL ".concat(U)+"/L [".concat(W,"]")+"/LLE ".concat($)+"/LLO ".concat(Y);q&&(z+="/CO [".concat(q,"]")),G&&(z+="/IT /".concat(G)),I=z;break;case"Square":case"Circle":var K=n.intent,J=n.fringe.replace(/,/g," "),X="/RD [".concat(J,"]");K&&(X+="/IT /".concat(K)),n.measureRatio&&n.measureUnit&&void 0!==n.measureConversionFactor&&(X+="/Measure<</R(".concat(n.measureRatio,")/X[<</C ").concat(n.measureConversionFactor,"/U(").concat(n.measureUnit,")>>]/Type/Measure/Subtype/RL>>")),I=X;break;case"Polygon":case"PolyLine":var Z=n.vertices.replace(/[,|;]/g," "),Q=n.intent,tt="/Vertices [".concat(Z,"]");if(Q&&(tt+="/IT /".concat(Q)),"PolygonDimension"===Q&&n.measureRatio&&n.measureUnit&&void 0!==n.measureConversionFactor&&(tt+="/Measure<</R(".concat(n.measureRatio,")/X[<</C ").concat(n.measureConversionFactor,"/U(").concat(n.measureUnit,")>>]/Type/Measure/Subtype/RL>>")),"PolyLine"==r){var et=n.head,nt=n.tail,rt="[/".concat(et,"/").concat(nt,"]");tt+="/LE ".concat(rt)}I=tt;break;case"Redact":if(I+="/OC "+wn(c),I+="/Repeat "+("yes"==n.repeat?"true":"false"),"Redact"==r){I+="/OverlayText"+pn(n["overlay-text"]||n.overlaText||"");var it=n.defaultappearance;I+="/DA (".concat(it,")"),I+="/Q ".concat(n.justification||0)}case"StrikeOut":case"Highlight":case"Squiggly":case"Underline":if(n.coords){var ot=n.coords.replace(/,/g," ");I+="/QuadPoints [".concat(ot,"]")}break;case"Caret":var at=n.fringe.replace(/,/g," "),st="/RD [".concat(at,"]");I=st;break;case"Stamp":if(n.icon&&(I="/Name/".concat(fn(n.icon))),n.raw&&n.raw.N){var ct=mn(e,n.raw,n.raw.N);I+="/AP<</N ".concat(ct," 0 R>>\n")}break;case"Ink":if("["===n.inklist[0]){var ut=n.inklist.substr(1,n.inklist.length-2).split("],["),dt="";ut.map((function(t){dt+="["+t.replace(/[,|;]/g," ")+"]"}));var lt="/InkList [".concat(dt,"]");I=lt}else I="/InkList [[".concat(n.inklist.replace(/[,|;]/g," "),"]]");break;case"Popup":I="/Open "+("yes"==n.open?"true":"false");break;case"Sound":var ht=mn(e,n,{Filter:"/ASCIIHexDecode",R:n.rate,Type:"/Sound",stream:n.soundStream});I+="/Sound "+ht+" 0 R";case"FileAttachment":if(n.icon&&(I+="/Name/".concat(fn(n.icon))),n.raw){var ft=mn(e,n.raw,n.raw.FS);I+="/FS ".concat(ft," 0 R ")}}if(n.popup){var pt=t.singleAnnotJSONToFDF(e,n.popup,!0);I+="/Popup "+pt+" 0 R"}return e.file+=x+I+">>\nendobj\n",o},t}(),mn=function(t,e,n){var r=t.next;t.next++;var i="";if(i+="".concat(r," 0 obj\n"),"string"==typeof n)i+=n;else if(n instanceof Array)i+="["+n.map((function(n){return yn(t,e,n)})).join(" ")+"]";else{i+="<<\n";for(var o in n)"stream"!=o&&(i+="/"+o+" "+yn(t,e,n[o]));if(i+=">>",n.stream){for(var a="",s=0;s<n.stream.length;s+=2){var c=parseInt(n.stream[s],16),u=parseInt(n.stream[s+1],16);a+=String.fromCharCode((c<<4)+u)}i+="stream\n"+a+"\nendstream"}}return i+="\nendobj\n",t.file+=i,r},yn=function t(e,n,r){if(null===r)return"null";var i,o=_()(r);if("number"==o)return r;if("string"==o)return"/"==r[0]?"/"+fn(r.replace("/","")):"<"==r[0]?r:(i=r.match(/^(\d*)R$/))?mn(e,n,n[i[1]])+" 0 R":"("+r+")";if("boolean"==o)return r?"true":"false";if(r instanceof Array)return"["+r.map((function(r){return t(e,n,r)})).join(" ")+"]";var a="<<";for(var s in r)a+="/".concat(s," ")+t(e,n,r[s]);return a+">>"},wn=function(t){var e=t.match(/\#?(\w{2})(\w{2})(\w{2})/),n=parseInt(e[1],16)/255,r=parseInt(e[2],16)/255,i=parseInt(e[3],16)/255;return"["+n.toFixed(2)+" "+r.toFixed(2)+" "+i.toFixed(2)+"]"},bn=function(t){for(var e in Ht.LineEndingName)if(Ht.LineEndingName[e]==t)return+e;return 0};function An(t){if("number"!=typeof t)throw new TypeError("Unexpected color value:"+t);if(t<0)return-1;var e=t.toString(16),n=6;for(t>16777215&&(n=8);e.length<n;)e="0"+e;return"#"+e}var Pn=Math.pow(2,24);function En(t){var e;return t<16777216?e=255:(e=t/Pn&255,t&=16777215),{r:t>>16&255,g:t>>8&255,b:255&t,a:e}}function xn(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s="";switch("number"==typeof t&&(t=["int",t]),t[0]){case"int":e=(16711680&t[1])>>16,n=(65280&t[1])>>8,r=255&t[1];break;case"T":e=0,n=0,r=0,a=0;break;case"G":e=n=r=255*t[1];break;case"RGB":e=255*t[1],n=255*t[2],r=255*t[3];break;case"CMYK":e=(1-t[4])*(1-t[1])*255,n=(1-t[4])*(1-t[2])*255,r=(1-t[4])*(1-t[3])*255;break;case"r":e=+(i=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/))[1],n=+i[2],r=+i[3];var c=i[4];void 0!==c&&(a=+c);break;case"#":var u=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;i=t.match(u),e=parseInt(i[1],16),n=parseInt(i[2],16),r=parseInt(i[3],16);break;default:throw new Error("Unsupported color format")}switch(o){case"HTML":s=e===n&&n===r&&-1===r?"transparent":"rgba("+parseInt(e)+","+parseInt(n)+","+parseInt(r)+","+a+")";break;case"RGB":s=["RGB",e/255,n/255,r/255];break;case"#":s+=e<16?"#0"+e.toString(16):"#"+e.toString(16),s+=n<16?"0"+n.toString(16):n.toString(16),s+=r<16?"0"+r.toString(16):r.toString(16);break;case"int":s=0,s|=(a*=255)<<24,s|=e<<16,s|=n<<8,s|=r,s>>>=0;break;case"CMYK":var d=255-e,l=255-n,h=255-r,f=Math.min(d,l,h);return["CMYK",d/255,l/255,h/255,f/255];case"GRAY":return["GRAY",(.3*e+.59*n+.11*r)/255]}return s}function Sn(t){return["RGB",((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255]}function Cn(t){return 0===t?"transparent":xn(16777215&t,"#")}var Dn,In,Rn=function(t,e,n,r){this.left=t,this.bottom=e,this.right=n,this.top=r},Tn={print:4,modify:8,extract:16,annotForm:32,fillForm:256,extractAccess:512,assemble:1024,printHigh:2048},_n={contentUpdated:"content-updated",borderInfoUpdated:"borderInfo-updated",borderStyleUpdated:"borderStyle-updated",borderWidthUpdated:"borderWidth-updated",borderColorUpdated:"borderColor-updated",modifiedDateTimeUpdated:"modifiedDateTime-updated",uniqueIDUpdated:"uniqueID-updated",flagsUpdated:"flags-updated",rectUpdated:"rect-updated",innerRectUpdated:"innerRect-updated",iconNameUpdated:"iconName-updated",rotationUpdated:"rotation-updated",defaultAppearanceUpdated:"defaultAppearance-updated",calloutLineEndingStyleUpdated:"calloutLineEndingStyle-updated",calloutLinePointsUpdated:"calloutLinePoints-updated",fillColorUpdated:"fillColor-updated",textColorUpdated:"textColor-updated",alignmentUpdated:"alignment-updated",inkListUpdated:"inkList-updated",endPointUpdated:"endPoint-updated",startPointUpdated:"startPoint-updated",endingStyleUpdated:"endingStyle-updated",enableCaptionUpdated:"enableCaption-updated",leaderCaptionOffsetUpdated:"leaderCaptionOffset-updated",styleFillColorUpdated:"styleFillColor-updated",leaderLineLengthUpdated:"leaderLineLength-updated",leaderLineExtendUpdated:"leaderLineExtend-updated",leaderLineOffsetUpdated:"leaderLineOffset-updated",measureRatioUpdated:"measureRatio-updated",measureUnitUpdated:"measureUnit-updated",measureConversionFactorUpdated:"measureConversionFactor-updated",removeAction:"remove-action",actionDataUpdated:"actionData-updated",addAction:"add-action",highlightingModeUpdated:"highlightingMode-updated",subjectUpdated:"subject-updated",titleUpdated:"title-updated",createDateTimeUpdated:"createDateTime-updated",opacityUpdated:"opacity-updated",intentUpdated:"intent-updated",vertexesUpdated:"vertexes-updated",applyFillColorUpdated:"applyFillColor-updated",overlayTextUpdated:"overlayText-updated",overlayTexAlignmentUpdated:"overlayTextAlignment-updated",repeatUpdated:"repeat-updated",autoFontSizeUpdated:"autoFontSize-updated",redactDefaultAppearanceUpdated:"redactDefaultAppearance-update",redactOpacityUpdated:"redactOpacity-updated",quadPointsUpdated:"quadPoints-updated",reviewStateUpdated:"review-state-updated",markedStateUpdated:"marked-state-updated",statesCleared:"state-cleared",replyAdded:"add-replies",richTextUpdated:"rich-text-updated",richTextRemoved:"rich-text-removed",addDictionary:"add-dictionary",formFieldValueUpdated:"form-field-value",formFieldsMaxLengthUpdated:"maxLength",formFieldItemsUpdated:"setItems",formFieldIconUpdated:"icon",formFieldInsertedItem:"insertItemAt",formFieldExportValueUpdated:"form-field-export-value",formFieldMKPropertyUpdated:"form-field-mk-property",formFieldAlternateName:"form-field-alternate-name",formFieldActionUpdated:"form-field-action"},kn={invisible:1,hidden:2,print:4,noZoom:8,noRotate:16,noView:32,readOnly:64,locked:128,toggleNoView:256,lockedContents:512},Fn=function(){function t(t,e){this._isEmpty=!t,this.info=t||{},this.page=e,this.api=e.api;var n=this.engine=e.engine;this.eventEmitter=n.eventEmitter,this.id=t.id,this.objectNumber=t.objectNumber,this.isDestroyed=!1}var e=t.prototype;return e.destroy=function(){this.isDestroyed=!0,this.info=null,this.page=null,this.api=null,this.eventEmitter=null},e.checkModidyPerm=function(){if("widget"!=this.info.type){if(!this.page.doc.checkPermission(Tn.annotForm))throw new Error("Permission error")}else if(!this.page.doc.checkPermission(Tn.fillForm|Tn.annotForm))throw new Error("Permission error")},e.hasModifyPermission=function(){return"widget"==this.info.type?this.page.doc.checkPermission(Tn.fillForm|Tn.annotForm):this.page.doc.checkPermission(Tn.annotForm)},e.isEmpty=function(){return this._isEmpty},e.getInfo=function(){return this.info},e.getId=function(){return this.info.objectNumber},e.getObjectNumber=function(){return this.info.objectNumber},e.getUniqueID=function(){return this.info.name},e.setUniqueID=function(t){var e=this,n=this.getPDFPage(),r=n.getPDFDoc(),i=this.getUniqueID();return this.page.doc.api.setUniqueId(r.getId(),n.getId(),this.getId(),t).then((function(r){return r?(e.info.name=t,e.update(_n.uniqueIDUpdated).then((function(){return e.eventEmitter.emit(St.annotationIDUpdated,t,i,e,n),r}))):r}))},e.getName=function(){return this.info.name},e.getPDFPage=function(){return this.page},e.getPage=function(){return this.getPDFPage()},e.getType=function(){return this.info.type},e.getTitle=function(){return this.info.title},e.isMarkup=function(){return this.info.isMarkup},e.isDeleted=function(){return this.info.isDeleted},e.getRect=function(){var t=this.info.rect;return new Rn(t.left,t.bottom,t.right,t.top)},e._setRect=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.info.rect=t;var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setAnnotRect(i.getId(),r.getId(),this.getId(),t).then((function(t){return t?e.update(_n.rectUpdated,n).then((function(){return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage()),t})):t}))},e.setRect=function(t){var e=this;this.info.rect=t;var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotRect(r.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update(_n.rectUpdated).then((function(t){return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage()),!0})):t}))},e.setRectAndInnerRect=function(t,e){var n=this;this.info.rect=t,this.info.innerRect=e;var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setAnnotRectAndInnerRect(i.getId(),r.getId(),this.getId(),t,e).then((function(t){return t?n.update(_n.rectUpdated).then((function(t){return n.eventEmitter.emit(St.annotationAppearanceUpdated,[n],n.getPDFPage()),!0})):t}))},e.moveTo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,r=e.top,i=e.action,o=e.triggerAction,a=void 0===o||o,s=A()({},this.info.rect),c=s.right,u=s.bottom,d=n-s.left,l=r-s.top;this.info.rect={left:n,top:r,right:c+d,bottom:u+l};var h=this.getPDFPage(),f=h.getPDFDoc(),p=f.getId(),g=h.getId(),v=this.getId();return this.page.doc.api.moveAnnotTo(p,g,v,{left:n,top:r}).then((function(t){return h.getAnnotsByObjectNumArray(t)})).then((function(e){return Promise.all(e.map((function(t){return t._update()}))).then((function(n){a&&t.eventEmitter.emit(St.annotationUpdated,e,h,_n.rectUpdated),"move"==i&&t.eventEmitter.emit(St.annotationMovedPosition,e,h,t)}))}))},e.getDeviceRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.page.getDeviceRect(this.getRect(),t,e);if(16&this.info.flag){var r=this.page.getDevicePoint([this.info.rect.left,this.info.rect.top],t,e);return{left:r[0],top:r[1],right:r[0]+n.right-n.left,bottom:r[1]+n.bottom-n.top}}return n},e.getDeviceInnerRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.page.getDeviceRect(this.getInnerRect(),t,e)},e.getContent=function(){return this.info.content},e.setContent=function(t){var e=this;return this.checkModidyPerm(),this._setContent(t).then((function(n){return e.info.content=t,e.eventEmitter.emit(St.annotationUpdated,[e],e.getPDFPage(),_n.contentUpdated),e}))},e._setContent=function(t){var e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotContent(n.getId(),e.getId(),this.getId(),t)},e.getBorderColor=function(){return this.info.borderColor},e.setBorderColor=function(t){var e=this;this.checkModidyPerm(),isNaN(t)&&(t=xn(t,"int",1));var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotBorderColor(r.getId(),n.getId(),this.getId(),t).then((function(r){return r?(0===t&&(e.info.hasBorderColor=!1),e.update(_n.borderColorUpdated).then((function(){e.isGrouped&&e.isGrouped()&&e.getGroupElements().map((function(t){t!=e&&e.eventEmitter.emit(St.annotationAppearanceUpdated,[t],n)}));return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n),r}))):r}))},e.getBorderStyle=function(){return this.info.borderInfo.style},e.getBorderStyleWithParam=function(){var t,e=this.info.borderInfo,n=e.style,r=e.cloudIntensity,i=e.dashes;switch(n){case Ht.BORDER_STYLE.SOLID:t=[];break;case Ht.BORDER_STYLE.CLOUDY:t=r;break;case Ht.BORDER_STYLE.DASHED:t=i}return{style:n,param:t}},e.getBorderInfo=function(){return A()({},this.info.borderInfo)},e.setBorderInfo=function(t){var e=this;this.checkModidyPerm();var n=this.getType();if(this.getQuadPoints||"caret"===n||"text"===n)return Promise.resolve();var r=JSON.parse(JSON.stringify(this.info.borderInfo||{}));t=this.info.borderInfo=A()(r,t);var i=this.getPDFPage(),o=i.getPDFDoc();return 1===t.style&&0===t.dashes.length&&(t.dashes=[2,2]),5===t.style&&t.cloudIntensity>2&&(t.cloudIntensity=2),this.page.doc.api.setAnnotBorderInfo(o.getId(),i.getId(),this.getId(),t).then((function(t){if(5===e.info.borderInfo.style)return e._update()})).then((function(t){return e.eventEmitter.emit(St.annotationUpdated,[e],i,_n.borderInfoUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],i),!0}))},e.setBorderStyle=function(t,e){var n=this,r=this.info.borderInfo;switch(r.style=t,t){case 1:r.dashes=e;break;case 5:r.cloudIntensity=e}var i=this.getPDFPage(),o=i.getPDFDoc();return this.page.doc.api.setAnnotBorderStyle(o.getId(),i.getId(),this.getId(),t,e).then((function(t){return i.getAnnotsByObjectNumArray(t)})).then((function(t){for(var e=[],n=t.length;n--;)e.push(t[n]._update());return Promise.all(e)})).then((function(t){return n.eventEmitter.emit(St.annotationUpdated,t,i,_n.borderStyleUpdated),n.eventEmitter.emit(St.annotationAppearanceUpdated,t,i),!0}))},e.getBorderDashes=function(){return A()([],this.info.borderInfo.dashes)},e.getBorderWidth=function(){var t=this.info.borderInfo.width;return void 0===t?1:+t},e.setBorderWidth=function(t){var e=this,n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotBorderWidth(r.getId(),n.getId(),this.getId(),t).then((function(t){return e._update().then((function(e){return t}))})).then((function(t){return t&&(e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.borderWidthUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)),t}))},e.getCloudIntensity=function(){return this.info.borderInfo.cloudIntensity||0},e.reviseSummary=function(t){return Promise.resolve(this)},e.rectIsEmpty=function(){return this.info.rectIsEmpty},e.update=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._update().then((function(){return n&&t&&e.eventEmitter.emit(St.annotationUpdated,[e],e.getPDFPage(),t),e}))},e._update=function(){var t=this,e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getAnnot(n.getId(),e.getId(),this.getId()).then((function(e){return e.rotation&&e.rotation<0&&(e.rotation+=360),t.updateInfo(e),t}))},e._updateMore=function(){},e.getFlags=function(){return this.info.flag},e.getIndex=function(){return this.info.index},e.setFlags=function(t,e){var n=this;this.checkModidyPerm(),this.info.flag=t;var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setAnnotFlag(i.getId(),r.getId(),this.getId(),t).then((function(i){return i&&("widget"==n.getType()&&n.updateUI({type:"display",value:t}),e||(n.eventEmitter.emit(St.annotationUpdated,[n],r,_n.flagsUpdated),n.eventEmitter.emit(St.annotationAppearanceUpdated,[n],r))),i}))},e.setFlagValue=function(t,e){return this.setFlags(t,e)},e.getModifiedDateTime=function(){var t=this.info.modifiedTimestamp;return t<0?null:new Date(t)},e.setModifiedDateTime=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setModifiedDateTime(r.getId(),n.getId(),this.getId(),t).then((function(t){return e.update(_n.modifiedDateTimeUpdated)}))},e._setModifiedDateTime=function(t,e){var n=this;this.checkModidyPerm();var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setModifiedDateTime(i.getId(),r.getId(),this.getId(),t).then((function(t){return n.update(_n.modifiedDateTimeUpdated,e)}))},e.exportToJSON=function(){var t=xn(16777215&this.info.borderColor,"#"),e=this.info.flag,n=[];for(var r in Ht.AnnotFlagsName)e&1<<parseInt(r)&&n.push(Ht.AnnotFlagsName[r]);n=n.join(",");var i=we(new Date(this.info.modifiedTimestamp)),o=this.info.name,a=this.page.getIndex(),s=this.info.rect,c=s.left+","+s.bottom+","+s.right+","+s.top,u=this.info.content,d=this.info.borderInfo,l=this.info.type,h=this.info.customEntries,f={type:l,color:t,flags:n,date:i,name:o,page:a,rect:c,contents:u,width:d.width,customEntries:h,objectNumber:this.info.objectNumber};switch(d.style){case Ht.BORDER_STYLE.SOLID:f.style="solid";break;case Ht.BORDER_STYLE.DASHED:f.style="dashed",f.dashPhase=d.dashPhase,f.dashes=d.dashes.join(",");break;case Ht.BORDER_STYLE.UNDERLINE:f.style="underline";break;case Ht.BORDER_STYLE.BEVELED:f.style="beveled";break;case Ht.BORDER_STYLE.INSET:f.style="inset";break;case Ht.BORDER_STYLE.CLOUDY:f.style="cloudy",f.intensity=d.cloudIntensity}return f},e.updateInfo=function(t){this._isEmpty=!t,this.info=t,this._updateMore(),this.action&&t.action&&(this.action.info=t.action)},e.getIntent=function(){return""},e.setCustomEntries=function(t,e){this.info.customEntries=this.info.customEntries||{},this.info.customEntries[t]=e},e.setDictionaryEntry=function(t,e){var n=this;return this._setDictionaryEntry(t,e).then((function(t){return t&&n.eventEmitter.emit(St.annotationUpdated,[n],n.getPDFPage(),_n.addDictionary),t}))},e._setDictionaryEntry=function(t,e){var n=this,r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setDictionaryEntry(i.getId(),r.getId(),this.getId(),t,e).then((function(r){return r&&n.setCustomEntries(t,e),r}))},e.getDictionaryEntry=function(t){return this._getDictionaryEntry(t)},e._getDictionaryEntry=function(t){var e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getDictionaryEntry(n.getId(),e.getId(),this.getId(),t)},e.resetAppearanceStream=function(){var t=this.getPDFPage(),e=t.getPDFDoc();return this.page.doc.api.resetAppearanceStream(e.getId(),t.getId(),this.getId())},t}(),Mn={ReadOnly:1,Required:2,NoExport:4,Hidden:8,ButtonNoToggleToOff:16384,ButtonRadiosInUnison:33554432,TextMultiline:4096,TextPassword:8192,TextDoNotSpellCheck:4194304,TextDoNotScroll:8388608,TextComb:16777216,ComboEdit:262144,ChoiceMultiSelect:2097152,CommitOnSelChange:67108864,inUnison:function(t){return t&Mn.ButtonRadiosInUnison},isHidden:function(t){return t&Mn.Hidden},isReadOnly:function(t){return t&Mn.ReadOnly},isRequired:function(t){return t&Mn.Required},isNoExport:function(t){return t&Mn.NoExport},isMultiline:function(t){return t&Mn.TextMultiline},isPassword:function(t){return t&Mn.TextPassword},isComb:function(t){return t&Mn.TextComb},isNoSpellCheck:function(t){return t&Mn.TextDoNotSpellCheck},isNoScroll:function(t){return t&Mn.TextDoNotScroll},isComboEdit:function(t){return t&Mn.ComboEdit},isChoiceMultiSelect:function(t){return t&Mn.ChoiceMultiSelect}},On={FlagExclude:1,FlagIncludeNoValueFields:2,FlagExportFormat:4,FlagGetMethod:8,FlagWithCoordinates:16,FlagAsXFDF:32,FlagIncludeAppendSaves:64,FlagIncludeAnnotations:128,FlagSubmitAsPDF:256,FlagCanonicalFormat:512,FlagExclNonUserAnnots:1024,FlagExclFKey:2048,FlagEmbedForm:8192,isExclude:function(t){return t&On.FlagExclude},isIncludeNoValueFields:function(t){return t&On.FlagIncludeNoValueFields},isHTML:function(t){return t&On.FlagExportFormat},isGetMethod:function(t){return t&On.FlagGetMethod},isXFDF:function(t){return t&On.FlagAsXFDF},isPDF:function(t){return t&On.FlagSubmitAsPDF},getType:function(t){var e=On.isHTML(t);if(e)return"HTML";var n=On.isXFDF(t);if(n)return"XFDF";var r=On.isPDF(t);return r?"PDF":e||n||r?void 0:"FDF"}},Ln={Unknown:0,PushButton:1,CheckBox:2,RadioButton:3,Text:6,ListBox:5,ComboBox:4,Sign:7,Barcode:8},Nn=Mn;!function(t){t.STATE_HANDLER_HAND="hand",t.STATE_HANDLER_CHECK_THE_SEARCH="checkTheSearch",t.STATE_HANDLER_CREATE_CARET="createCaret",t.STATE_HANDLER_CREATE_ARROW="createArrow",t.STATE_HANDLER_CREATE_AREA_HIGHLIGHT="createAreaHighlight",t.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT="createAreaHighlight",t.STATE_HANDLER_CREATE_CIRCLE="createCircle",t.STATE_HANDLER_CREATE_FILE_ATTACHMENT="createFileAttachment",t.STATE_HANDLER_CREATE_HIGHLIGHT="createHighlight",t.STATE_HANDLER_CREATE_IMAGE="createImage",t.STATE_HANDLER_CREATE_LINK="createLink",t.STATE_HANDLER_CREATE_LINE="createLine",t.STATE_HANDLER_CREATE_DISTANCE="createDistance",t.STATE_HANDLER_CREATE_PERIMETER="createPerimeter",t.STATE_HANDLER_CREATE_AREA="createArea",t.STATE_HANDLER_CREATE_CIRCLE_AREA="createCircleArea",t.STATE_HANDLER_CREATE_PENCIL="createPencil",t.STATE_HANDLER_CREATE_POLYGON_CLOUD="createPolygonCloud",t.STATE_HANDLER_CREATE_POLYGON="createPolygon",t.STATE_HANDLER_CREATE_POLYLINE="createPolyline",t.STATE_HANDLER_CREATE_REPLACE="createReplace",t.STATE_HANDLER_CREATE_SQUARE="createSquare",t.STATE_HANDLER_CREATE_SQUIGGLY="createSquiggly",t.STATE_HANDLER_CREATE_STAMP="createStamp",t.STATE_HANDLER_CREATE_STRIKE_OUT="createStrikeOut",t.STATE_HANDLER_CREATE_TEXT="createText",t.STATE_HANDLER_CREATE_UNDERLINE="createUnderline",t.STATE_HANDLER_MARQUEE="marquee",t.STATE_HANDLER_ERASER="eraser",t.STATE_HANDLER_LOUPE="loupe",t.STATE_HANDLER_SELECT_TEXT_ANNOTATION="select-text-annotation",t.STATE_HANDLER_SELECT_TEXT_IMAGE="select-text-image",t.STATE_HANDLER_SELECT_ANNOTATION="select-annotation",t.STATE_HANDLER_CREATE_FREETEXT_BOX="createFreeTextBox",t.STATE_HANDLER_CREATE_FREETEXT_CALLOUT="createFreeTextCallout",t.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER="createFreeTextTypewriter",t.STATE_HANDLER_CREATE_FIELD_TEXT="CreateTextStateHandler",t.STATE_HANDLER_CREATE_FIELD_SIGNATURE="CreateSignStateHandler",t.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON="CreatePushButtonStateHandler",t.STATE_HANDLER_CREATE_RADIO_BUTTON="CreateRadioButtonStateHandler",t.STATE_HANDLER_SNAPSHOT_TOOL="snapshot-tool"}(Dn||(Dn={}));var Vn=Dn.STATE_HANDLER_HAND,Bn=Dn.STATE_HANDLER_CHECK_THE_SEARCH,Un=Dn.STATE_HANDLER_CREATE_CARET,jn=Dn.STATE_HANDLER_CREATE_ARROW,Hn=Dn.STATE_HANDLER_CREATE_AREA_HIGHLIGHT,Wn=Dn.STATE_HANDLER_CREATE_AREA_HIGHLIGHT,$n=Dn.STATE_HANDLER_CREATE_CIRCLE,Yn=Dn.STATE_HANDLER_CREATE_FILE_ATTACHMENT,qn=Dn.STATE_HANDLER_CREATE_HIGHLIGHT,Gn=Dn.STATE_HANDLER_CREATE_IMAGE,zn="createEditImage",Kn=Dn.STATE_HANDLER_CREATE_LINK,Jn=Dn.STATE_HANDLER_CREATE_LINE,Xn=Dn.STATE_HANDLER_CREATE_DISTANCE,Zn=Dn.STATE_HANDLER_CREATE_PERIMETER,Qn=Dn.STATE_HANDLER_CREATE_AREA,tr=Dn.STATE_HANDLER_CREATE_CIRCLE_AREA,er=Dn.STATE_HANDLER_CREATE_PENCIL,nr=Dn.STATE_HANDLER_CREATE_POLYGON_CLOUD,rr=Dn.STATE_HANDLER_CREATE_POLYGON,ir=Dn.STATE_HANDLER_CREATE_POLYLINE,or=Dn.STATE_HANDLER_CREATE_REPLACE,ar=Dn.STATE_HANDLER_CREATE_SQUARE,sr="createSquareCrop",cr=Dn.STATE_HANDLER_CREATE_SQUIGGLY,ur=Dn.STATE_HANDLER_CREATE_STAMP,dr=Dn.STATE_HANDLER_CREATE_STRIKE_OUT,lr=Dn.STATE_HANDLER_CREATE_TEXT,hr=Dn.STATE_HANDLER_CREATE_UNDERLINE,fr=Dn.STATE_HANDLER_MARQUEE,pr=Dn.STATE_HANDLER_ERASER,gr=Dn.STATE_HANDLER_LOUPE,vr=Dn.STATE_HANDLER_SELECT_TEXT_ANNOTATION,mr=Dn.STATE_HANDLER_SELECT_TEXT_IMAGE,yr="select-text",wr=Dn.STATE_HANDLER_SELECT_ANNOTATION,br=Dn.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER,Ar=Dn.STATE_HANDLER_CREATE_FREETEXT_CALLOUT,Pr=Dn.STATE_HANDLER_CREATE_FREETEXT_BOX,Er=Dn.STATE_HANDLER_SNAPSHOT_TOOL,xr="create-crop-pages",Sr=Dn.STATE_HANDLER_CREATE_FIELD_TEXT,Cr=Dn.STATE_HANDLER_CREATE_FIELD_SIGNATURE,Dr=Dn.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON,Ir=Dn.STATE_HANDLER_CREATE_RADIO_BUTTON,Rr="CreateArticleButtonStateHandler",Tr=(In={},R()(In,lr,"text"),R()(In,qn,"highlight"),R()(In,dr,"strikeout"),R()(In,hr,"underline"),R()(In,cr,"squiggly"),R()(In,or,"strikeout"),R()(In,Un,"caret"),R()(In,br,"freetext"),R()(In,Ar,"freetext"),R()(In,Pr,"freetext"),R()(In,ar,"square"),R()(In,$n,"circle"),R()(In,Jn,"line"),R()(In,jn,"line"),R()(In,rr,"polygon"),R()(In,ir,"polyline"),R()(In,nr,"polygon"),R()(In,Hn,"highlight"),R()(In,er,"ink"),R()(In,ur,"stamp"),R()(In,Xn,"line"),R()(In,Zn,"polyline"),R()(In,Qn,"polygon"),R()(In,tr,"circle"),R()(In,Yn,"fileattachment"),R()(In,Gn,"screen"),R()(In,Kn,"link"),R()(In,"create-multi-media-state","screen"),R()(In,"create-redaction-text-image-state","redact"),R()(In,"create-redaction-state","redact"),In),_r={CreatePushButtonStateHandler:Ln.PushButton,CreateCheckBoxStateHandler:Ln.CheckBox,CreateRadioButtonStateHandler:Ln.RadioButton,CreateComboBoxStateHandler:Ln.ComboBox,CreateListBoxStateHandler:Ln.ListBox,CreateTextStateHandler:Ln.Text,CreateSignStateHandler:Ln.Sign,CreateDateStateHandler:Ln.Text,CreateImageStateHandler:Ln.PushButton},kr=function(){},Fr=function(t){function e(e,n,r){var i;(i=t.call(this,r)||this).name="annotsRender",i.$ui=e,i.annots=n,i.pageRender=r,i.annotRenders={};var o=i.pdfViewer.customs||{};return i.activeAnnotBefore=o.activeAnnotBefore||kr,i.activeAnnotAfter=o.activeAnnotAfter||kr,i.unActiveAnnotBefore=o.unActiveAnnotBefore||kr,i.unActiveAnnotAfter=o.unActiveAnnotAfter||kr,i.mouseEnterAnnots=[],i.initAnnotEvent(),i}O()(e,t);var n=e.prototype;return n.initAnnotEvent=function(){var t=this,e=this.pdfViewer.getEventEmitter(),n=new Hammer.Manager(this.$ui.get(0));n.add(new Hammer.Tap({event:"doubletap",taps:2})),n.add(new Hammer.Tap({event:"singletap"})),n.get("doubletap").recognizeWith("singletap"),n.get("singletap").requireFailure("doubletap"),n.add(new Hammer.Press),n.on("doubletap",(function(n){if(!jt(n.target)){var r=t._findAnnotRender(n.target);if(r&&!t._isFormWidget(r)){var i=r.annot.getId();e.emit(Ct.doubleTapAnnotation,r,n),t.doubleTapAnnot(i)}}})),n.on("press",(function(n){if(!jt(n.target)){var r=t._findAnnotRender(n.target);r&&!t._isFormWidget(r)&&e.emit(Ct.pressAnnotation,r,n)}}));this.addDestroyHook((function(){n.destroy()}),Bt(this.$ui.get(0),(function(n){var r=t._findAnnotRender(n.target);if(r){var i=r.annot.getType();if("select-annotation"==t.pdfViewer.getStateHandlerManager().currentStateHandler.getStateName()||-1===["link","screen"].indexOf(i)||r.component.isActive||Vt.isMobile){var o=r.annot.getId();e.emit(Ct.rightClickAnnotation,r,n),t.showContextMenu(o,n.clientX,n.clientY,n).then((function(t){!1!==t&&n.preventDefault()}))}else n.preventDefault()}}),{capture:!0}))},n._isFormWidget=function(t){return"widget"===t.annot.getType()},n._findAnnotRender=function(t){var e=this,n=t.closest(".fv__pdf-page-annot-container"),r=function(){return Object.keys(e.annotRenders).map((function(t){return e.annotRenders[t]}))};if(n)return r().filter((function(t){return t.component.$ui.get(0)===n}))[0];var i=t.closest(".fv__pdf-page-annot-handler-container");return i?r().filter((function(t){return t.component.$handler.get(0)===i}))[0]:t.closest(".fv__shape-control.callout")?r().filter((function(t){var e=t.component;return!(t.annot.getIntent()!==Ht.Intents.FREETEXT_CALLOUT||!Wt.a.isPropertyIntialized(e,"shapeControl"))&&e.shapeControl.annot.getId()===t.annot.getId()}))[0]:void 0},n.updateSize=function(t,e){var n=this;this.annots.map((function(r){var i=r.getId(),o=n.annotRenders[i];o&&o.updateSize(t,e)}))},n.render=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(this.isDestroyed)return Promise.resolve();var i=this.renderSerialPromise;i&&i.end().catch(kr),this.scale=t,this.rotate=n;var o=this.annots,a=o.filter((function(t){return!e.annotRenders[t.objectNumber]})).map((function(t){var n=new wt(B()("<div>"),B()("<div>"),t,e);return e.annotRenders[t.objectNumber]=n,n})),s=this.$ui;s.append(a.reduce((function(t,e){return t.append(e.$ui,e.$handler),t}),B()(document.createDocumentFragment())));for(var c=function(){return e.isDestroyed},u=this.annots.filter((function(t){return"popup"!==t.getType()})).map((function(i){var o=e.annotRenders[i.objectNumber];return function(){if(c())return Promise.resolve();try{return o.render(t,n,r)}catch(t){return Promise.reject(t)}}})),d=u.length,l=100,h=Math.ceil(d/l),f=[],p=0;p<h;p++){var g=p*l,v=Math.min(g+l,d);f.push(u.slice(g,v))}return f.reduce((function(t,e){return t.finally((function(){return Promise.all(e.map((function(t){return t()})))}))}),Promise.resolve())},n.adjustHighlightsRender=function(){return Promise.resolve()},n.adjustHighlightAnnots=function(){var t=[];for(var e in this.annotRenders){var n=this.annotRenders[e];"highlight"===n.annot.getType()&&t.push(n.redraw())}return Promise.all(t)},n.destroy=function(){for(var e in t.prototype.destroy.call(this),this.annotRenders){var n=this.annotRenders[e];n&&n.destroy()}this.invisibleRender(),this.annots=[],this.pageRender=null,this.annotRenders=null},n.clickNoteAt=function(t){var e=this.annotRenders[t];e&&e.focus()},n.unActiveAnnot=function(t){var e=this,n=this.pdfViewer.getAllActiveElements();if(!n.length)return Promise.resolve();var r=this.pdfViewer.eventEmitter;return t||this.pdfViewer.clearMultiSelectActiveFlag(),Promise.resolve(this.unActiveAnnotBefore()).then((function(i){if(!1!==i&&null!=e.pageRender){var o=n.filter((function(t){return t.annot}));t instanceof Fn?o=o.filter((function(e){return e.annot===t})):"number"==typeof t&&(o=o.filter((function(e){return e.annot.objectNumber===t}))),o.forEach((function(t){e.pdfViewer.deactivateElement(t),r.emit(Ct.unActiveAnnotation,t,t.annot.getId(),e),e.unActiveAnnotAfter(t)}))}}))},n._unActiveAnnot=function(t){t.unActive()},n._forEachRenderer=function(t){for(var e in this.annotRenders)t.call(this,this.annotRenders[e],e,this.annotRenders)},n.activeAnnot=function(t,e){var n=this,r=this.annotRenders[t];if(!r)return Promise.resolve();var i=this.pdfViewer;if(i.activationManager.currentActivableIs(r.component)&&!$t.isShiftDown)return Promise.resolve(r);var o=i.eventEmitter,a=this.pdfViewer.customs;return Promise.resolve((a.activeAnnotBefore||kr)(r,t,this)).then((function(i){if(o.emit(Ct.activeAnnotationBefore,r,t,n),!1===i)return r;if(r.annot.isGrouped&&r.annot.isGrouped()){var s=[];return r.getGroupRenders().map((function(t){"popup"!==t.annot.getType()&&s.push(t.active())})),Promise.all(s).then((function(){return o.emit(Ct.activeAnnotation,r,t,n),Promise.resolve((a.activeAnnotationAfter||kr)(r,t,n))})).then((function(){return o.emit(Ct.activeAnnotationAfter,r,t,n),r}))}return r.active(e).then((function(){return o.emit(Ct.activeAnnotation,r,t,n),Promise.resolve((a.activeAnnotationAfter||kr)(r,t,n))})).then((function(){return o.emit(Ct.activeAnnotationAfter,r,t,n),r}))}))},n._activeAnnot=function(t,e){var n=this.annotRenders[t];return n?n.active():Promise.resolve()},n.splitAnnotIndexArr=function(t,e,n){for(var r=[],i=[],o=t+1,a=t-1,s=-1,c=0,u=e.length;c<u;c++){var d=e[c],l=d.length;if(1===l&&d[0]===t)return!1;for(var h=0,f=l;h<f;h++){var p=d[h];if(p instanceof Array){var g=p[0],v=p[1];if(t===g){s=c,r=d.slice(0,h),i=(i=v>o?[[o,v]]:[v]).concat(d.slice(h+1));break}if(t===v){s=c,r=d.slice(0,h),g<a?r.push([g,a]):r.push(g),i=d.slice(h+1);break}if(t>g&&t<v){s=c,r=d.slice(0,h),a===g?r.push(g):r.push([g,a]),i=(i=o===v?[v]:[[o,v]]).concat(d.slice(h+1));break}}else if(p===t){s=c,r=d.slice(0,h),i=d.slice(h+1);break}}if(-1!==s)break}if(-1===s)return!1;var m=JSON.stringify(e[s]),y=n[m],w=[s,1];return r.length&&w.push(r),w.push([t]),i.length&&w.push(i),e.splice.apply(e,w),{removeTileCanvas:y,beforeIndexArr:r,splitIndexArr:[t],afterIndexArr:i,tileCanvasMap:n,splitKey:m}},n.splitTileCanvas=function(t,e,n,r,i,o,a,s,c,u){var d=t.beforeIndexArr,l=t.splitIndexArr,h=t.afterIndexArr,f=t.removeTileCanvas,p=t.tileCanvasMap,g=t.splitKey,v=B()(document.createDocumentFragment()),m=[];return d.length&&m.push(this.rangeAnnotTileCanvasRedraw(e,n,d,p,v,r,i,o,a,s,c,u)),m.push(this.renderSplitAnnots(l,e,n,v,r,c,u)),h.length&&m.push(this.rangeAnnotTileCanvasRedraw(e,n,h,p,v,r,i,o,a,s,c,u)),Promise.all(m).then((function(){f.$container.before(v),f.destroy(),delete p[g]}))},n.getAnnotRender=function(t){if("number"==typeof t)return this.annotRenders[t];if(t.trim().length<1)return null;var e=this.annots.find((function(e){return e.getName()===t}));return e?this.annotRenders[e.getId()]:null},n.getAnnotRenderSafely=function(t){var e=this.annots.find((function(e){return e.getId()===t}));return e?this.getOrCreateAnnotRender(e):null},n.removeAnnotRender=function(t){var e=t.annot.getId();delete this.annotRenders[e]},n.showContextMenu=function(t,e,n,r){return this.activeAnnot(t,r).then((function(t){return t&&t.showContextMenu(e,n)}))},n.doubleTapAnnot=function(t){return this.activeAnnot(t).then((function(t){return t&&t.doubleTapAnnot()}))},n.getOrCreateAnnotRender=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$ui[0],n=t.getId();if(this.annotRenders[n])return this.annotRenders[n];var r=B()("<div></div>"),i=B()("<div></div>");return e.appendChild(r[0]),e.appendChild(i[0]),this.annotRenders[n]=new wt(r,i,t,this)},n.addAnnots=function(t){var e=this,n=B()(document.createDocumentFragment());this.annots.reduce((function(t,r){var i=r.getId();return t[i]||(t[i]=e.getOrCreateAnnotRender(r,n[0])),t}),this.annotRenders),this.$ui.append(n);for(var r=!1,i=0,o=t.length;i<o;i++){if("highlight"===t[i].getType()){r=!0;break}}r&&this.parent("pdfPageRender").redrawContent(!0)},n.getAnnotRenders=function(){return this.annotRenders},n.removeAnnotRenders=function(t){var e=this,n=this.annotRenders,r=t.map((function(t){var n=t.getId(),r=e.getAnnotRender(n);return r&&r.remove(!0)}));return Promise.all(r).then((function(){var r=e.annots.map((function(t){return t.getId()}));t.forEach((function(t){var i=t.getId();delete n[i];var o=r.indexOf(i);o>-1&&(r.splice(o,1),e.annots.splice(o,1))}))}))},n.redrawAnnotRenders=function(t){for(var e=t.length;e--;){var n=t[e].getId(),r=this.getAnnotRender(n);r&&r.redraw(!1,!0)}},n.movedAnnotRenders=function(t,e){for(var n=t.length;n--;){var r=t[n].getId(),i=this.getAnnotRender(r);i&&i.moved(e)}},n.addAnnotRenders=function(t){var e,n=this,r=[];t.filter((function(t){var e=t.getId(),i=n.annots.findIndex((function(t){return t.getId()===e}));i>-1?n.annots[i]=t:r.push(t)})),(e=this.annots).push.apply(e,r);var i=r.map((function(t){var e=new wt(B()("<div>"),B()("<div>"),t,n);return n.scale=n.pageRender.scale,e.render(n.scale,n.rotate),e}));if(i.length>0){var o=B()(document.createDocumentFragment());i.forEach((function(t){o.append(t.$ui,t.$handler),n.annotRenders[t.annot.getId()]=t})),this.$ui.append(o)}},n.updateAnnotRendersId=function(t,e){t in this.annotRenders&&(this.annotRenders[e]=this.annotRenders[t],delete this.annotRenders[t])},n.endRender=function(){var t=this.renderSerialPromise;t&&t.end().catch(kr)},n.invisibleRender=function(){this.endRender();var t=this.annotRenders;for(var e in t)t[e].invisibleRender()},e}(mt);n(419);function Mr(){if(Object(K.isRunningInBrowser)()){if(window.crypto)return t=new Uint32Array(1),window.crypto.getRandomValues(t),t[0]/4294967296;if(window.msCrypto)return function(){var t=new Uint32Array(1);return window.msCrypto.getRandomValues(t),t[0]/4294967296}()}var t;return xt("random",Math)()}n(93),document.createElement("div");function Or(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]+"");return n.forEach((function(t){r.appendChild(t)})),r}var Lr="fv__hide",Nr=function(){},Vr=Or("canvas",{width:"0",class:"fv__tiles-canvas"}),Br=Or("div",{class:"fv__tiles-col"},[Vr.cloneNode()]),Ur=Or("div",{class:"fv__tiles-row"}),jr={},Hr=function(t){var e=Ur.cloneNode();return e.classList.add("fv__tiles-row-"+t),e.setAttribute("data-row",t),e},Wr=function(t,e){var n=[t,e].join(",");if(jr[n])return jr[n].cloneNode(!0);var r=Br.cloneNode(!0);r.classList.add("fv__tiles-col-"+[t,e].join("-")),r.setAttribute("data-col",e),r.setAttribute("data-index",n);var i=r.firstElementChild;return i.classList.add("fv__tiles-canvas-"+[t,e].join("-")),i.setAttribute("data-index",n),jr[n]=r,r},$r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!t||t.right-t.left<=e||t.bottom-t.top<=e},Yr=function(t,e){return t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom},qr=function(t,e,n){if(!n&&t.left==e.left&&t.right==e.right&&t.top==e.top&&t.bottom==e.bottom)return[];var r={left:Math.max(t.left,e.left),bottom:Math.min(t.bottom,e.bottom),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top)};if(r.left<r.right&&r.top<r.bottom){if(n)return r;if(Yr(e,t))return[];var i,o;r.left==e.left?(i={left:r.right,right:e.right,top:e.top,bottom:e.bottom},o=r.top==e.top?{left:r.left,right:r.right,top:r.bottom-1,bottom:e.bottom}:{left:r.left,right:r.right,top:e.top-1,bottom:t.top}):r.right==e.right&&(o={left:e.left,right:r.left,top:e.top,bottom:e.bottom},i=r.top==e.top?{left:r.left,right:r.right,top:r.bottom,bottom:e.bottom}:{left:r.left,right:r.right,top:e.top,bottom:r.top});var a=[];return $r(o,1)||a.push(o),$r(i,1)||a.push(i),0!=a.length||$r(e)?a:[e]}return n?null:$r(e)?[]:[e]},Gr=function(){function t(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.isDestroyed=!1,this.enableCache=r,this.cache={},this.getImageData=t,n&&(this.pageRender=n,this.api=n.page.api),this.tileTasks={};var i="fv__tiles-container";e=e?e.addClass(i):B()('<div class="'+i+'"><div class="fv__tiles-row fv__tiles-row-0" data-row="0"><div class="fv__tiles-col fv__tiles-col-0-0" data-col="0" data-index="0,0"><canvas class="fv__tiles-canvas fv__tiles-canvas-0-0" data-index="0,0"></canvas></div></div></div>'),this.setDom(e),this.updateCanvasMore=function(){},this.updateCanvasContainer=Nr,this.defer={}}var e=t.prototype;return e.setDom=function(t){this.$container=t,this.$cols=t.find(".fv__tiles-col"),this.$canvases=t.find(".fv__tiles-canvas");var e=t.find(".fv__tiles-row");this.rows=e.length,this.cols=e.eq(0).find(".fv__tiles-col").length,delete this.tempDom},e.redraw=function(t,e,n,r,i,o,a,s){var c,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if(c=this.renderedRect){var l=this.getRealRect(o,a);if(c.left==l.left&&c.right==l.right&&c.top==l.top&&c.bottom==l.bottom&&this.scale==a&&this.rotate===s&&this.showWidth===n&&this.showHeight===r)return Promise.resolve()}this.showWidth=n,this.showHeight=r;var h=[t,e,n,r,i,o,a,s,u,d,this.visibleRect];return this.lastRedrawParams=h,this.updateDom(t,e,n,r,i,o,a,s,u,d),this.getRectBitmap?(this.scale=a,this.rotate=s,this.clearProgressiveTask(),this.renderVisibleRect(o,a)):(this.scale=a,this.rotate=s,this.updateRenderCanvasSerial(t,e,n,r,i,o,a,s,u,d))},e.isRenderingDone=function(t,e){return t===this.scale&&e===this.$container.width()},e.updateDom=function(t,e,n,r,i,o,a,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;if(0!=n){var d=this.$container,l="px",h={left:c*a+l,top:u*a+l};d.css(h),this.updateCanvasContainer=function(){d.css(h)},d.css(h);var f=!1;if(e>this.cols){for(var p=this.rows;p--;){for(var g=[],v=this.cols,m=e;v<m;v++){var y=Wr(p,v);g.push(y)}d.find(".fv__tiles-row-"+p).append(g)}this.cols=e,f=!0}if(t>this.rows){for(var w=[],b=this.rows,A=t;b<A;b++){for(var P=Hr(b),E=0,x=this.cols;E<x;E++)P.appendChild(Wr(b,E));w.push(P)}d.append(w),this.rows=t,f=!0}f&&(this.$canvases=d.find(".fv__tiles-canvas"),this.$cols=d.find(".fv__tiles-col")),this.pageRender||(this.lastRedrawParams||(this.lastRedrawParams=[t,e,n,r,i,o,a,s]),this.updateCanvasSize()),this.tempDom=this.$container[0].cloneNode(1),B()(this.tempDom).hide()}},e.updateCanvasSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$container,e=S()(this.lastRedrawParams,7),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],u=c/s,d="px",l=t.find(".fv__tiles-row").length,h=t.find(".fv__tiles-row-0>.fv__tiles-col").length,f=a*u;f+=d;var p=parseInt(i%a+.5);p=p||a,p*=u;var g=parseInt(o%a+.5);g=g||a,g*=u,g+=d;for(var v=t.find(".fv__tiles-col"),m=l;m--;){var y=m*h;if(m>=n)for(var w=h;w--;)v.eq(y+w).addClass(Lr);else if(m===n-1)for(var b=h;b--;)b>=r?v.eq(y+b).addClass(Lr):b===r-1?v.eq(y+b).removeClass(Lr).css({width:Math.floor(p),height:g}):v.eq(y+b).removeClass(Lr).css({width:f,height:g});else for(var A=h;A--;)A>=r?v.eq(y+A).addClass(Lr):A===r-1?v.eq(y+A).removeClass(Lr).css({width:Math.floor(p),height:f}):v.eq(y+A).removeClass(Lr).css({width:f,height:f})}},e.updateRenderCanvasSerial=function(t,e,n,r,i,o,a,s){var c=this,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=this.renderContentImageSerial;if(l&&l.end().catch((function(){})),0==n)return this.updateCanvasContainer(),Promise.resolve();l=this.renderContentImageSerial=new Lt;var h=[],f=i*a/o,p=i,g=parseInt(n%i+.5);g=g||i;var v=parseInt(r%i+.5);v=v||i;for(var m=u*a,y=d*a,w=this.visibleRect,b=0,A=t;b<A;b++)for(var P=0,E=e;P<E;P++){if(w){var x=20,S=w.left-x,C=w.right+x,D=w.top-x,I=w.bottom+x,R=m+P*f,T=R+f,_=y+b*f,k=_+f;if(!(T>S&&R<C&&k>D&&_<I)){var F=this.$canvases[e*b+P];F.width=0;continue}}var M=p,O=p;b===t-1&&(O=v),P===e-1&&(M=g),h.push(function(t,e,n,r,i,o){return function(){return c.isDestroyed?Promise.resolve():c.updateCanvas(t,e,n,r,i,o,a,s,u,d)}}(b,P,M,O,i,o))}return l.serial(h)},e.updateCanvas=function(t,e,n,r,i,o,a,s,c,u){return this.renderImageData(t,e,n,r,i,o,a,s,c,u)},e.renderImageData=function(t,e,n,r,i,o,a,s,c,u){var d=this;if(this.isDestroyed)return Promise.resolve();var l=[t,e,n,r,i,o,c,u,s].join("-"),h=this.cache,f=([l,"canvas"].join("-"),[l,"imageData"].join("-")),p=[l,"imageUrl"].join("-"),g=h[f];return(g?Promise.resolve(g):this.getImageData(t,e,n,r,i,o,c,u,s)).then((function(n){if(n){var r=n.width,s=n.height,l=n.buffer,g=n.image,v=n.type,m=n.url;h[f]={width:r,height:s,buffer:l,image:g,type:v,url:m};var y=d.$canvases[d.cols*t+e],w=y.getContext("2d");if(0==r||0==s)return y.width=0,[w,t,e,r,s,i,o,c,u];if(m)return new Promise((function(n,a){var l=h[p];if(l)return y.width=r,y.height=s,d.updateCanvasContainer(),w.drawImage(l,t*i,e*i),n([w,t,e,r,s,i,o,c,u]);var f=new Image;f.onload=function(){y.width=r,y.height=s,h[p]=f,d.updateCanvasContainer(),w.drawImage(f,t*i,e*i),n([w,t,e,r,s,i,o,c,u])},f.src=m}));if(g)return new Promise((function(n,a){var l=h[p];if(l)return y.width=r,y.height=s,d.updateCanvasContainer(),w.drawImage(l,0,0),n([w,t,e,r,s,i,o,c,u]);try{var f=new Image;f.onload=function(){y.width=r,y.height=s,h[p]=f,d.updateCanvasContainer(),w.drawImage(f,0,0),n([w,t,e,r,s,i,o,c,u])},f.src=URL.createObjectURL(g)}catch(t){console.log(t)}}));y.width=r,y.height=s;var b=new(Uint8ClampedArray||Uint8Array)(l),A=w.createImageData(r,s);A.data.set(b),d.updateCanvasContainer();var P=o/a;return d.$container.css({width:d.showWidth/P,height:d.showHeight/P}),w.putImageData(A,0,0),[y,w,t,e,r,s,i,o,c,u]}})).then((function(t){var e=S()(t,7),n=(e[0],e[1]),r=e[2],i=e[3],o=e[4],a=e[5],s=e[6];d.updateCanvasMore(n,r,i,o,a,s,r,i)}))},e.hideContainer=function(){this.$container.hide(),this.invisibleRender()},e.showContainer=function(){var t=this.$container;if(!t.is(":visible")){t.show();var e=this.lastRedrawParams;e&&this.redraw.apply(this,e)}},e.setUpdateCanvasMore=function(t){this.updateCanvasMore=t},e.destroy=function(){this.offRender&&this.offRender(),this.isDestroyed=!0,delete this.getImageData,delete this.$cols,this.$canvases.each((function(t,e){e.width=0})),delete this.$canvases,this.$container.remove(),delete this.$container,this.clearCache()},e.setVisibleRect=function(t){this.visibleRect=t},e.clearCache=function(){var t=this.cache;for(var e in t)delete t[e];this.cache={},this.renderedRect=null,this.clearProgressiveTask()},e.clearProgressiveTask=function(){if(this.getRectBitmap){for(var t in this.tileTasks)this.api.cancleProgress(t);this.offRender=null}},e.invisibleRender=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.enableCache&&this.getRectBitmap&&!t||(this.$canvases.each((function(t,e){e.width=0})),this.clearCache())},e.invisibleCanvas=function(){},e.renderVisibleRect=function(t,e){var n=this;if(0===e)return Promise.resolve();var r=this.getRealRect(t,e),i=[r],o=this.renderedRect;o&&(i=qr(o,r));return i.forEach((function(e){var r={x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top};if(0!=r.width&&0!=r.height){var i=""+Date.now()+Mr();n.tileTasks[i]=!0,n.getRectBitmap(r,t,i,n.rotate).then((function(t){if(t){var e=n.displayImage(t,r);return 100!=t.rate&&function t(e){if(n.api){var r=[];for(var i in n.tileTasks){var o=n.api.continueProgress(i).then(n.displayImage.bind(n));r.push(o)}Promise.all(r).then((function(e){0!=Object.keys(n.tileTasks).length&&(n.timer&&clearTimeout(n.timer),n.timer=setTimeout(t.bind(n),10))}))}}(),e}}))}})),Promise.resolve()},e.displayImage=function(t,e){var n=this,r=t.buffer,i=t.isFirst,o=t.image,a=t.progressiveId,s=t.x,c=t.y,u=t.width,d=t.height,l=t.isVirtual,h=S()(this.lastRedrawParams,7),f=h[0],p=h[1],g=h[2],v=h[3],m=h[4],y=h[5],w=h[6],b=t.scale;if(!(i&&Math.abs(b-4*y/3)>1e-6))if(t.isEmpty||this.isDestroyed||!l&&!this.tileTasks[a])delete this.tileTasks[a];else{var A=i?B()(this.tempDom):this.$container;i&&this.updateCanvasSize(A),A.css({transform:"scale(1)"});var P,E=m,x=parseInt(c/E),C=parseInt((c+d)/E),D=parseInt(s/E),I=parseInt((s+u)/E);C>=f&&(C=f-1),I>=p&&(I=p-1);var R=z();if(o){var T=new Image;T.onload=function(){P=function(t,e,n){t.drawImage(T,e,n)},R.resolve()},T.onerror=function(){R.reject()},T.src=URL.createObjectURL(o)}else{if(!r)return;var _=new(Uint8ClampedArray||Uint8Array)(r),k=A.find("canvas")[0];if(!k)return;var F=k.getContext("2d").createImageData(u,d);F.data.set(_),P=function(t,e,n){t.putImageData(F,e,n)},R.resolve()}R.promise.then((function(){var r=parseInt(g%m+.5);0==r&&(r=m);var o=parseInt(v%m+.5);0==o&&(o=m);for(var l=x,h=D;l<=C;){for(h=D;h<=I;){var b=A.find("canvas")[A.find(".fv__tiles-row-0>.fv__tiles-col").length*l+h],E=h==p-1?r:m,S=l==f-1?o:m;b.width!=E&&(b.width=E),b.height!=S&&(b.height=S);var R=b.getContext("2d"),T=s-h*m,_=c-l*m;P(R,T,_),n.updateCanvasMore(R,s,c,T,_,u,d,m,l,h,e),h+=1}l+=1}if(i&&(n.$container&&(n.$container.parent().append(A),A.show(),n.$container.remove()),n.setDom(A)),100==t.rate&&(n.timer&&(clearTimeout(n.timer),n.timer=null),n.api.cancleProgress(a),delete n.tileTasks[a],0==Object.keys(n.tileTasks).length&&(n.offRender=null,n.enableCache))){var k={left:s,top:c,right:s+u,bottom:c+d};if(n.renderedRect)(n.renderedRect=function(t,e){if(Yr(e,t))return t;if(qr(t,e,!0)){if(e.left==t.left&&e.right==t.right){var n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom);return{left:t.left,right:t.right,top:n,bottom:r}}if(e.bottom==t.bottom&&e.top==t.top)return{left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),top:t.top,bottom:t.bottom}}}(n.renderedRect,k))||(n.renderedRect=n.getRealRect(y,w));else n.renderedRect=n.getRealRect(y,w)}}))}},e.clearCanvas=function(t){for(var e=this.visibleRect,n=e.left,r=e.right,i=e.top,o=e.bottom,a=this.getVisibleRect(n,i,r-n,o-i,t),s=S()(a,4),c=s[0],u=s[1],d=s[2],l=s[3],h=this.rows,f=this.cols,p=this.$canvases,g=0;g<h;g++)if(g<c||g>u)for(var v=0;v<f;v++)p[f*g+v].width=0;else for(var m=0;m<f;m++)(m<d||m>l)&&(p[f*g+m].width=0),m===d&&(m=l)},e.getVisibleRect=function(t,e,n,r,i){return[parseInt(e/i),parseInt((e+r)/i),parseInt(t/i),parseInt((t+n)/i)]},e.getRealRect=function(t,e){var n=this.visibleRect,r=e/t;return{left:parseInt(n.left/r),right:parseInt(n.right/r),top:parseInt(n.top/r),bottom:parseInt(n.bottom/r)}},t}(),zr=n(17),Kr=n.n(zr),Jr=function(){function t(t,e){this.$handler=t,this.render=e,this.states=[]}var e=t.prototype;return e.active=function(){},e.destroy=function(){},e.intoState=function(){},e.outState=function(){},e.resetState=function(){},e.setStates=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.states;this.states=t},e.getStates=function(){return this.states},e.clearStates=function(){},t}();function Xr(t){if("clientX"in t)return t.clientX;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientX;case"touchend":case"touchcancel":return t.changedTouches[0].clientX}}function Zr(t){if("clientY"in t)return t.clientY;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientY;case"touchend":case"touchcancel":return t.changedTouches[0].clientY}}function Qr(){var t,e=this,n=e.$handler,r=n[0],i=this.render,o=i.pdfViewer.eventEmitter,a=new Kr.a.Manager(r,{recognizers:[[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL}]]});return a.add(new Kr.a.Tap({event:"doubletap",taps:2})),a.add(new Kr.a.Tap({event:"singletap"})),a.get("doubletap").recognizeWith("singletap"),a.get("singletap").requireFailure("doubletap"),a.on("singletap",(function(t){var e=i.annotsRender;e?(e.unActiveAnnot(),i.parent("pdfDocRender").getFormRender().blurControl(),o.emit(Ct.tapPage,t)):o.emit(Ct.tapPage,t)})),a.on("doubletap",(function(t){var e=i.annotsRender;e?(e.unActiveAnnot(),i.parent("pdfDocRender").getFormRender().blurControl(),o.emit(Ct.doubleTapPage,t)):o.emit(Ct.doubleTapPage,t)})),a.on("press",(function(t){var e=i.annotsRender;e?(e.unActiveAnnot(),i.parent("pdfDocRender").getFormRender().blurControl(),o.emit(Ct.pressPage,t)):o.emit(Ct.pressPage,t)})),r.oncontextmenu=function(t){t.preventDefault()},n.on("mouseup",t=function(t){if(3===t.which){var e=i.annotsRender;e?(e.unActiveAnnot(),o.emit(Ct.rightClickPage,t)):o.emit(Ct.rightClickPage,t)}}),function(){a.destroy(),n.off("mouseup",t),e=void 0,n=void 0,r=void 0,o=void 0,t=void 0}}var ti=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).handlers={hand:Qr},r.destroyStateHandlers={},r}O()(e,t);var n=e.prototype;return n.active=function(){this.activated||(this.activated=!0,this.$handler.addClass("fv__active"));this.states.length||this.resetState()},n.destroy=function(){this.$handler.removeClass("fv__active")},n.intoState=function(t){var e=this.states;if(-1===e.indexOf(t)){e.push(t);var n=this.handlers[t];n&&(this.destroyStateHandlers[t]=n.bind(this)())}},n.outState=function(t){var e,n;(e=this.destroyStateHandlers[t])&&(e.bind(this)(),delete this.destroyStateHandlers[t]),-1!==(n=this.states.indexOf(t))&&this.states.splice(n,1)},n.resetState=function(){this.setStates(["hand"])},n.setStates=function(t){for(var e=this.states,n=0,r=e.length;n<r;n++)this.outState(e[n]);for(var i=0,o=t.length;i<o;i++)this.intoState(t[i])},n.getStates=function(){return this.states},e}(Jr),ei=function(){function t(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.pageRender=t,this.secondaryScale=i,this.fixedPosition=o;var a=document.createElement("div");a.classList.add("fv__page-area-renderer");var s=document.createElement("canvas");a.appendChild(s),this.canvas=s,this.element=a,this.setDimension(e,n),this.offsetPageX=0,this.offsetPageY=0,t.getPDFPage().then((function(t){r.api=t.doc.api,r.offRender=function(t){r.tasks&&r.api.continueProgress(r.tasks.id).then(r.displayImage.bind(r))},r.api.on("idle",r.offRender)}))}var e=t.prototype;return e.setDimension=function(t,e){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.element.style.cssText+="width: ".concat(t,"px;height:").concat(e,"px")},e.setPosition=function(t,e){this.offsetPageX=t,this.offsetPageY=e},e.setSecondaryScale=function(t){t=Number(t),(!isFinite(t)||t<=0)&&(t=1),this.secondaryScale=t},e.update=function(){var t=this,e=this.pageRender;return e.getPDFPage().then((function(n){var r=t.api;t.tasks&&(r.cancleProgress(t.tasks.id),t.tasks=null);var i=e.scale,o=t.canvas,a=4*i/3*t.secondaryScale,s=e.getShowWidth()*t.secondaryScale,c=e.getShowHeight()*t.secondaryScale,u=o.width,d=o.height,l=u/2,h=d/2,f=t.offsetPageX*t.secondaryScale,p=t.offsetPageY*t.secondaryScale,g=f-l,v=f+l,m=p-h,y=p+h,w=0,b=0;t.fixedPosition?(g<0&&(v=(g=0)+u),v>s&&(g=(v=s)-u),m<0&&(y=(m=0)+d),y>c&&(m=(y=c)-d)):(g<0?w=Math.min(-g,l):v>s&&(w=Math.max(s-v,-l)),m<0?b=Math.min(-m,h):y>c&&(b=Math.max(c-y,-h)),o.style.cssText+="left: ".concat(w,"px; top: ").concat(b,"px"));var A=Math.max(0,g),P=Math.min(v,s),E=Math.max(0,m),x=Math.min(y,c),S=Math.round(P-A),C=Math.round(x-E),D=Math.abs(Math.min(0,w)),I=Math.abs(Math.min(0,b)),R=""+Date.now()+Mr();return t.tasks={id:R,canvasDrawingLeft:D,canvasDrawingTop:I},n.doc.api.getPageBitmap(n.getPDFDoc().getId(),n.getId(),a,t.pageRender.rotate,{x:A,y:E,width:S,height:C},["page","annot"],"print",R,!0).then(t.displayImage.bind(t))}))},e.displayImage=function(t){var e=t.buffer,n=t.image,r=t.progressiveId,i=(t.x,t.y,t.width),o=t.height,a=t.rate;if(!t.isEmpty&&this.tasks){if(this.tasks.id==r){var s=this.canvas,c=s.getContext("2d");if(c.clearRect(0,0,this.canvas.width,this.canvas.height),n)return new Promise((function(t,e){try{var r=new Image;r.onload=function(){c.drawImage(r,0,0,i,o),URL.revokeObjectURL(r.src),t(s)},r.src=URL.createObjectURL(n)}catch(t){console.log(t)}}));var u=c.createImageData(i,o);return u.data.set(new(Uint8ClampedArray||Uint8Array)(e)),c.putImageData(u,this.tasks.canvasDrawingLeft,this.tasks.canvasDrawingTop),100==a&&(this.tasks=null),s}}else this.tasks=null},t}(),ni=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Center",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-45,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100;this.position=t,this.offsetX=e,this.offsetY=n,this.scaleX=r,this.scaleY=i,this.rotation=o,this.opacity=a}var e=t.prototype;return e.setPosition=function(t){this.position=t},e.getPosition=function(){return this.position},e.setOffsetX=function(t){this.offsetX=t},e.getOffsetX=function(){return this.offsetX},e.setOffsetY=function(t){this.offsetY=t},e.getOffsetY=function(){return this.offsetY},e.setScaleX=function(t){this.scaleX=t},e.getScaleX=function(){return this.scaleX},e.setScaleY=function(t){this.scaleY=t},e.getScaleY=function(){return this.scaleY},e.setRotation=function(t){this.rotation=t},e.getRotation=function(){return this.rotation},e.setOpacity=function(t){this.opacity=t},e.getOpacity=function(){return this.opacity},t}(),ri=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Microsoft Yahei",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"center";this.font=t,this.fontSize=e,this.color=n,this.fontStyle=r,this.lineSpace=i,this.alignment=o}var e=t.prototype;return e.setFont=function(t){this.font=t},e.getFont=function(){return this.font},e.setFontSize=function(t){this.fontSize=t},e.getFontSize=function(){return this.fontSize},e.setColor=function(t){this.color=t},e.getColor=function(){return this.color},e.setFontStyle=function(t){this.fontStyle=t},e.getFontStyle=function(){return this.fontStyle},e.setLineSpace=function(t){this.lineSpace=t},e.getLineSpace=function(){return this.lineSpace},e.setAlignment=function(t){this.alignment=t},e.getAlignment=function(){return this.alignment},t}(),ii=(n(420),function(){function t(t,e){this.watermark=t,this.imageURL=e,this.originImageWidth=0,this.originImageHeight=0,this.imagePromise=this.loadImage()}var e=t.prototype;return e.ready=function(){var t=this;return this.imagePromise.then((function(e){return t.image=e,t.originImageWidth=e.width,t.originImageHeight=e.height,t}))},e.render=function(t,e,n,r){if(!this.image)throw new Error("Image watermark renderer has not been ready!");var i=document.createElement("canvas");i.width=n,i.height=r;var o=this.watermark.watermarkSettings,a=o.getOffsetX(),s=o.getOffsetY(),c=o.getScaleX(),u=o.getScaleY(),d=i.getContext("2d"),l=this.watermark.smartScale;d.globalAlpha=o.opacity/100;var h=this.image;return h.width=this.originImageWidth*c*l,h.height=this.originImageHeight*u*l,d.translate(-t,-e),this.performTransformation(d,h),d.drawImage(h,-h.width/2+a,-h.height/2+s,h.width,h.height),i},e.performTransformation=function(t,e){var n=this.watermark.watermarkSettings,r=n.getRotation(),i=function(t,e,n){var r,i,o=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),a=Math.asin(e/2/o)/(Math.PI/180),s=(n+360)%360;s>=270&&s<360||s>=90&&s<180?(r=n-a,i=a+n):(r=n+a,i=n-a);var c=o*Math.abs(Math.sin(r*Math.PI/180));return{x:o*Math.abs(Math.cos(i*Math.PI/180))-t/2,y:c-e/2}}(e.width,e.height,r),o=i.x,a=i.y,s=this.watermark.showWidth,c=this.watermark.showHeight;switch(n.getPosition()){case"TopLeft":u(o+e.width/2,a+e.height/2);break;case"TopCenter":u(s/2,a+e.height/2);break;case"TopRight":u(s-o-e.width/2,a+e.height/2);break;case"CenterLeft":u(o+e.width/2,c/2);break;case"Center":u(s/2,c/2);break;case"CenterRight":u(s-o-e.width/2,c/2);break;case"BottomLeft":u(o+e.width/2,c-a-e.height/2);break;case"BottomCenter":u(s/2,c-a-e.height/2);break;case"BottomRight":u(s-o-e.width/2,c-a-e.height/2)}function u(e,n){t.translate(e,n)}r%360!=0&&t.rotate(r*Math.PI/180)},e.loadImage=function(){var t=this,e=document.createElement("img");return new Promise((function(n,r){e.onload=function(){n(e)},e.onerror=function(e){var n=new Error("Failed to load watermark image: ".concat(t.imageURL));n.originEvent=e,r(n)},e.oncancel=function(e){var n=new Error("Task has been cancelled when loading the watermark image: ".concat(t.imageURL));n.originEvent=e,r(n)},e.src=t.imageURL}))},t}());var oi=function(){function t(t,e){this.watermark=t,this.text=e,this.allLines=e.split(/[\r\n]/)}var e=t.prototype;return e.ready=function(){return Promise.resolve(this)},e.render=function(t,e,n,r){var i=document.createElement("canvas");i.width=n,i.height=r;var o=this.watermark,a=o.smartScale,s=o.watermarkTextProperties,c=o.watermarkSettings,u=s.getFontSize()*a,d=s.getLineSpace()*a,l=s.getColor(),h=s.getFont(),f=i.getContext("2d");f.font="".concat(u,"px ").concat(h),f.fillStyle=l,f.lineWidth=1,f.strokeStyle=l,f.textBaseline="top",f.globalAlpha=c.getOpacity()/100;var p=this.allLines,g=p.length*u+(p.length-1)*d,v=this.resolveMaxWidth(f);return f.translate(-t,-e),this.performTransformation(f,v,g),this.renderText(f,v,g),i},e.renderText=function(t,e,n){var r=this.allLines,i=this.watermark,o=i.smartScale,a=i.watermarkTextProperties,s=i.watermarkSettings,c=a.getFontSize()*o,u=a.getLineSpace()*o,d=a.getFontStyle(),l=a.getAlignment(),h=s.getOffsetX(),f=s.getOffsetY();c<12&&t.scale(c/12,c/12),r.forEach((function(r,i){var o,a,s=r.replace(/(^\s*)|(\s*$)/g,""),p=s.length*c,g=0,v=0;switch(l){case"left":t.textAlign="left",o=-p/2-(e-p)/2,a=p/2-(e-p)/2,g=-e/2,v=-n/2;break;case"right":t.textAlign="right",o=-p/2+(e-p)/2,a=p/2+(e-p)/2,g=e/2,v=-n/2;break;default:t.textAlign="center",o=-p/2,a=p/2,v=-n/2}t.fillText(s,g+h,v+i*(u+c)+f),"underline"===d&&(t.moveTo(o,-n/2+c+i*(c+u)),t.lineTo(a,-n/2+c+i*(c+u)),t.stroke())}))},e.performTransformation=function(t,e,n){var r=this.watermark,i=r.showWidth,o=r.showHeight,a=r.watermarkSettings,s=a.getRotation(),c=function(t,e,n){var r,i,o=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),a=Math.asin(e/2/o)/(Math.PI/180),s=(n+360)%360;s>=270&&s<360||s>=90&&s<180?(r=n-a,i=a+n):(r=n+a,i=n-a);var c=o*Math.abs(Math.sin(r*Math.PI/180));return{x:o*Math.abs(Math.cos(i*Math.PI/180))-t/2,y:c-e/2}}(e,n,s),u=c.x,d=c.y;switch(a.getPosition()){case"TopLeft":l(u+e/2,d+n/2);break;case"TopCenter":l(i/2,d+n/2);break;case"TopRight":l(i-u-e/2,d+n/2);break;case"CenterLeft":l(u+e/2,o/2);break;case"Center":l(i/2,o/2);break;case"CenterRight":l(i-u-e/2,o/2);break;case"BottomLeft":l(u+e/2,o-d-n/2);break;case"BottomCenter":l(i/2,o-d-n/2);break;case"BottomRight":l(i-u-e/2,o-d-n/2)}function l(e,n){t.translate(e,n)}s%360!=0&&t.rotate(s*Math.PI/180)},e.resolveMaxWidth=function(t){var e=this.text.split(/[\r\n]+/);return Math.max.apply(Math,e.map((function(e){return t.measureText(e).width})))},t}();var ai=function(){function t(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{position:"Center",offsetX:0,offsetY:0,scaleX:1,scaleY:1,rotation:-45,opacity:100},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{font:"Microsoft Yahei",fontSize:20,color:"#000000",fontStyle:"normal",lineSpace:10,alignment:"center"};this.showWidth=t,this.showHeight=e,this.tileSize=n,this.smartScale=r;var a=i.position,s=i.offsetX,c=i.offsetY,u=i.scaleX,d=i.scaleY,l=i.rotation,h=i.opacity,f=o.font,p=o.fontSize,g=o.color,v=o.fontStyle,m=o.lineSpace,y=o.alignment;this.watermarkSettings=new ni(a,s,c,u,d,l,h),this.watermarkTextProperties=new ri(f,p,g,v,m,y)}var e=t.prototype;return e.exportDataURL=function(t){var e=t.content,n=t.type,r=function(t){return t.toDataURL()};return"text"===n?this.createTextWatermark(e).then(r):"image"===n?this.createImageWatermark(e).then(r):void 0},e.getWatermarkRenderer=function(t){var e=t.content;switch(t.type){case"text":return new oi(this,e).ready();case"image":return new ii(this,e).ready()}},e.createImageWatermark=function(t){var e=this,n=z(),r=document.createElement("canvas");r.width=this.showWidth,r.height=this.showHeight;var i=r.getContext("2d"),o=r.getContext("2d"),a=new Image;a.src=t;var s=this.watermarkSettings,c=s.getOffsetX(),u=s.getOffsetY(),d=s.getScaleX(),l=s.getScaleY(),h=s.getRotation(),f=this.showWidth,p=this.showHeight;return a.onload=function(){a.width=a.width*d*e.smartScale,a.height=a.height*l*e.smartScale,si(i,s.getOpacity()),i.save();var t=ci(a.width,a.height,h),g=t.x,v=t.y;switch(s.getPosition()){case"TopLeft":o.translate(g+a.width/2,v+a.height/2);break;case"TopCenter":o.translate(f/2,v+a.height/2);break;case"TopRight":o.translate(f-g-a.width/2,v+a.height/2);break;case"CenterLeft":o.translate(g+a.width/2,p/2);break;case"Center":o.translate(f/2,p/2);break;case"CenterRight":o.translate(f-g-a.width/2,p/2);break;case"BottomLeft":o.translate(g+a.width/2,p-v-a.height/2);break;case"BottomCenter":o.translate(f/2,p-v-a.height/2);break;case"BottomRight":o.translate(f-g-a.width/2,p-v-a.height/2)}h%360!=0&&o.rotate(h*Math.PI/180),o.drawImage(a,-a.width/2+c,-a.height/2+u,a.width,a.height),i.restore(),n.resolve(r)},a.onerror=function(t){var e=new Error("Failed to load image");e.originEvent=t,n.reject(e)},a.oncancel=function(t){var e=new Error("Load image has been cancelled");e.originEvent=t,n.reject(e)},n.promise},e.createTextWatermark=function(t){var e=z(),n=document.createElement("canvas");n.width=this.showWidth,n.height=this.showHeight;var r=t.split("\n"),i=n.getContext("2d"),o=n.getContext("2d"),a=this.showWidth,s=this.showHeight,c=this.watermarkTextProperties,u=c.getFontSize()*this.smartScale,d=c.getLineSpace()*this.smartScale,l=c.getFontStyle(),h=c.getColor(),f=c.getAlignment(),p=c.getFont();o.font=u+"px "+p,o.fillStyle=h;var g=this.watermarkSettings,v=g.getOffsetX(),m=g.getOffsetY(),y=(g.getScaleX(),g.getScaleY(),g.getRotation()),w=0,b=r.length,A=b*u+(b-1)*d;r.map((function(t){var e=t.replace(/\s+/g,"");w=Math.max(e.length*u,w)})),o.lineWidth=1,o.strokeStyle=h,i.textBaseline="top",si(i,g.getOpacity());var P=ci(w,A,y),E=P.x,x=P.y;switch(g.getPosition()){case"TopLeft":o.translate(E+w/2,x+A/2);break;case"TopCenter":o.translate(a/2,x+A/2);break;case"TopRight":o.translate(a-E-w/2,x+A/2);break;case"CenterLeft":o.translate(E+w/2,s/2);break;case"Center":o.translate(a/2,s/2);break;case"CenterRight":o.translate(a-E-w/2,s/2);break;case"BottomLeft":o.translate(E+w/2,s-x-A/2);break;case"BottomCenter":o.translate(a/2,s-x-A/2);break;case"BottomRight":o.translate(a-E-w/2,s-x-A/2)}return o.rotate(y*Math.PI/180),u<12&&o.scale(u/12,u/12),r.map((function(t,e){var n,r,a=t.replace(/(^\s*)|(\s*$)/g,""),s=a.length*u,c=0,h=0;switch(f){case"left":i.textAlign="left",n=-s/2-(w-s)/2,r=s/2-(w-s)/2,c=-w/2,h=-A/2;break;case"right":i.textAlign="right",n=-s/2+(w-s)/2,r=s/2+(w-s)/2,c=w/2,h=-A/2;break;default:i.textAlign="center",n=-s/2,r=s/2,h=-A/2}o.fillText(a,c+v,h+e*(d+u)+m),"underline"===l&&(o.moveTo(n,-A/2+u+e*(u+d)),o.lineTo(r,-A/2+u+e*(u+d)),o.stroke())})),e.resolve(n),e.promise},e.getWatermarkSettings=function(){return this.watermarkSettings},e.getWatermarkTextProperties=function(){return this.watermarkTextProperties},e.getHeight=function(){return this.showHeight},e.getWidth=function(){return this.showWidth},t}();function si(t,e){t.globalAlpha=e/100}function ci(t,e,n){var r,i,o=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),a=Math.asin(e/2/o)/(Math.PI/180),s=(n+360)%360;s>=270&&s<360||s>=90&&s<180?(r=n-a,i=a+n):(r=n+a,i=n-a);var c=o*Math.abs(Math.sin(r*Math.PI/180));return{x:o*Math.abs(Math.cos(i*Math.PI/180))-t/2,y:c-e/2}}var ui=function(t){function e(e,n,r){var i;return(i=t.call(this,r)||this).name="customsRender",i.$ui=e,i.customs=n,i.customRenders={},i}O()(e,t);var n=e.prototype;return n.render=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.scale=t,this.rotate=e;var n=this.customs;this.adjustCustomsRenderInit(n);var r=this.pdfViewer.customRenderManager,i=this.customRenders;return Promise.all(n.map((function(n){return i[r.getCustomDataId(n)].render(t,e)})))},n.activeCustom=function(t){var e=this.customRenders[this.customManager.getCustomDataId(t)];return e?(this.currentActiveCustomRender=e,e.render(this.scale,this.rotate)):Promise.reject(new Error("Custom render not found!"))},n.unActiveCustoms=function(){var t=this.currentActiveCustomRender;if(t)return t.unActive()},n.adjustCustomsRenderInit=function(t){var e=this,n=this.pdfViewer.customRenderManager,r=this.customRenders,i=document.createDocumentFragment();t.filter((function(t){return!r[n.getCustomDataId(t)]})).map((function(t){var o=document.createElement("div"),a=document.createElement("div");i.appendChild(o),i.appendChild(a),r[n.getCustomDataId(t)]=new(n.get(t))(o,a,t,e)})).length&&this.$ui.append(i)},n.addCustomRenders=function(t){this.adjustCustomsRenderInit(t);var e=this.pdfViewer.customRenderManager,n=this.customRenders,r=this.scale,i=this.rotate;return Promise.all(t.map((function(t){return n[e.getCustomDataId(t)].render(r,i)})))},n.removeCustomRenders=function(t){var e={},n=this.pdfViewer.customRenderManager,r=this.customRenders;t.map((function(t){var i=n.getCustomDataId(t);e[i]=1,delete r[i]}));for(var i=this.customs,o=i.length;o--;)e[n.getCustomDataId(i[o])]&&i.splice(o,1)},n.destroy=function(){t.prototype.destroy.call(this);var e=this.customRenders;for(var n in e){var r=e[n];r&&r.destroy()}this.customRenders=null},n.updateCustomRenders=function(t){for(var e=this,n={},r=this.pdfViewer.customRenderManager,i=this.customRenders,o=t.map((function(t){var e=r.getCustomDataId(t);return n[e]=t,i[e]})),a=this.customs,s=a.length;s--;){var c=r.getCustomDataId(a[s]);n[c]&&(a[s]=n[c])}return Promise.all(o.map((function(t){return t&&t.render(e.scale,e.rotate)})))},e}(mt),di=function(){function t(){this.init.apply(this,arguments)}var e=t.prototype;return e.init=function(){if(1==arguments.length)this.info={type:arguments[0]};else{var t=Array.prototype.slice.call(arguments),e=t[0],n=t[1],r=t[2],i=(t[3],t[4]),o=t[5];this.info=e,this.factory=n,this.doc=r,this.host=o,this.eventEmitter=i}this.initSubAction()},e.checkInserted=function(){if(!this.doc.api)throw new Error("Please insert this action to a host first.")},e.initSubAction=function(){var t=this;this.subAction=[],this.info.subAction&&this.info.subAction.forEach((function(e){t.subAction.push(t.factory.createAction(e,t.doc,t.doc.api,t.eventEmitter,t.host))}))},e.appendSubAction=function(t){this.subAction.push(t),this.info.subAction=this.info.subAction||[],this.info.subAction.push(t.info)},e.getType=function(){return this.info.type},e.getSubActionCount=function(){return this.info.subAction.length||0},e.getSubAction=function(t){return this.subAction[t]},e.insertSubAction=function(e,n){var r=this;if(this.checkInserted(),"number"!=typeof e)throw new Error("param error. Only number is available.");return e=Math.max(0,Math.min(e,this.getSubActionCount())),n instanceof t&&(n=n.getType()),this.doc.api.insertSubAction(this.doc.getId(),this.info.objNumber,e,n).then((function(t){return r.updateAction(t),t}))},e.setSubAction=function(e,n){var r=this;if(this.checkInserted(),"number"!=typeof e)throw new Error("param error. Only number is available.");var i=this.getSubActionCount();if(0===i)throw new Error("Cannot be set without sub action.");return e=Math.max(0,Math.min(e,i-1)),n instanceof t&&(n=n.getType()),this.doc.api.setSubAction(this.doc.getId(),this.info.objNumber,e,n).then((function(t){return r.updateAction(t),t}))},e.removeAllSubActions=function(){var t=this;if(this.doc.api)return this.doc.api.removeAllSubActions(this.doc.getId(),this.info.objNumber).then((function(e){t.updateAction(e)}))},e.removeSubAction=function(t){var e=this;if(this.doc.api){if("number"!=typeof t)throw new Error("param error. Only number is available.");var n=this.getSubActionCount();if(0===n)throw new Error("Cannot be remove without sub action.");return t=Math.max(0,Math.min(t,n-1)),this.doc.api.removeSubAction(this.doc.getId(),this.info.objNumber,t).then((function(t){e.updateAction(t)}))}},e.setActionData=function(t){var e=this;return this.doc.api.setActionData(this.doc.getId(),this.info.objNumber,t).then((function(t){e.updateAction(t)}))},e.updateAction=function(t){A()(this.info,t),this.initSubAction(),this.host&&(this.eventEmitter.emit(St.actionUpdated,this.host),this.host instanceof Fn&&this.eventEmitter.emit(St.annotationUpdated,[this.host],this.host.getPDFPage(),"widget"===this.host.getType()?_n.formFieldActionUpdated:_n.actionDataUpdated))},e.checkOutData=function(t){return!0},e.exportToJson=function(){return{type:this.getType()}},t}(),li=function(t){function e(e,n,r,i,o,a){var s;return 0==arguments.length?(s=t.call(this,Te.uri)||this,F()(s)):t.call(this,e,n,r,i,o,a)||this}O()(e,t);var n=e.prototype;return n.getURI=function(){return this.info.uri},n.checkOutData=function(t){return t&&t.uri},n.setURI=function(t){var e=this;if(!t&&"string"==typeof t)throw new Error("param error. Only non-empty strings is available.");return this.doc?this.doc.api.setActionURI(this.doc.getId(),this.info.objNumber,t).then((function(t){return e.updateAction(t),t})):(this.info.uri=t,Promise.resolve())},n.exportToJson=function(){var e=t.prototype.exportToJson.call(this);return A()(e,{uri:this.getURI()})},e}(di),hi=(n(94),function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fileSpec=t}var e=t.prototype;return e.setFileName=function(t){this.fileSpec.fileName=t},e.getChecksum=function(){return this.fileSpec.checksum},e.getCreationDateTime=function(){return this.fileSpec.creationDateTime},e.getDescription=function(){return this.fileSpec.description},e.getDict=function(){return this.fileSpec.dict},e.getFileData=function(){return this.fileSpec.fileData},e.getFileName=function(){return this.fileSpec.fileName},e.getFileSize=function(){return this.fileSpec.fileSize},e.getModifiedDateTime=function(){return this.fileSpec.modifiedDateTime},e.getSubtype=function(){return this.fileSpec.subtype},e.isEmbedded=function(){return this.fileSpec.isEmbedded},t}()),fi=function(t){function e(e,n,r,i,o,a){var s;return 0==arguments.length?(s=t.call(this,Te.launch)||this,F()(s)):((s=t.call(this,e,n,r,i,o,a)||this).fileSpec=s.info.fileSpec&&new hi(s.info.fileSpec)||null,F()(s))}O()(e,t);var n=e.prototype;return n.setFileSpec=function(t){this.fileSpec=t,this.info.fileSpec=t.fileSpec},n.getFileSpec=function(){return this.fileSpec},n.checkOutData=function(t){return t&&t.buffer},n.updateAction=function(e){return this.fileSpec=e.fileSpec&&new hi(e.fileSpec)||null,t.prototype.updateAction.call(this,e)},e}(di),pi=function(t){function e(e,n,r,i,o,a){return t.call(this,e,n,r,i,o,a)||this}O()(e,t);var n=e.prototype;return n.getName=function(){return this.info.name},n.checkOutData=function(t){return t&&t.name},e}(di),gi=function(t){function e(e,n,r,i,o,a){var s;return 0==arguments.length?(s=t.call(this,Te.javaScript)||this,F()(s)):((s=t.call(this,e,n,r,i,o,a)||this).info.script&&(s.info.javascript=s.info.script),F()(s))}O()(e,t);var n=e.prototype;return n.getScript=function(){return this.info.javascript},n.checkOutData=function(t){return t&&t.javascript},n.setScript=function(t){var e=this;return this.doc?this.doc.api.setActionScript(this.doc.getId(),this.info.objNumber,t).then((function(t){return e.updateAction(t),t})):(this.info.javascript=t,Promise.resolve())},n.exportToJson=function(){var e=t.prototype.exportToJson.call(this);return A()(e,{script:this.getScript()})},e}(di),vi=function(t){function e(e,n,r,i,o,a){var s;return s=e?t.call(this,e,n,r,i,o,a)||this:t.call(this,Te.submitForm)||this,F()(s)}O()(e,t);var n=e.prototype;return n.getFlags=function(){return this.info.flags},n.getURL=function(){return this.info.url},n.getFieldNames=function(){return this.info.fieldNames},n.checkOutData=function(t){return t&&t.fieldNames&&t.url},n.setData=function(t,e,n){this.info.flags=t,this.info.url=e,this.info.fieldNames=n},e}(di),mi=function(t){function e(){var e;if(0==arguments.length)return e=t.call(this,Te.resetForm)||this,F()(e);var n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5];return t.call(this,r,i,o,a,s,c)||this}O()(e,t);var n=e.prototype;return n.getFlags=function(){return this.info.flags},n.getFieldNames=function(){return this.info.fieldNames},n.checkOutData=function(t){return t&&t.fieldNames},n.setFieldNames=function(t){var e=this;return this.doc?this.doc.api.setActionFieldNames(this.doc.getId(),this.info.objNumber,t).then((function(t){return e.updateAction(t),t})):(this.info.fieldNames=t,Promise.resolve())},n.setFlags=function(t){var e=this;if(!this.doc)return this.info.flags=t,Promise.resolve();if(0!==t&&1!==t)throw new Error("param error. Only 0 or 1 is available.");return this.doc.api.setActionFlags(this.doc.getId(),this.info.objNumber,t).then((function(t){return e.updateAction(t),t}))},n.exportToJson=function(){var e=t.prototype.exportToJson.call(this);return A()(e,{fieldNames:this.getFieldNames(),flags:this.getFlags()})},e}(di),yi=function(t){function e(e,n,r,i,o,a){var s;return 0==arguments.length?(s=t.call(this,Te.importData)||this,F()(s)):((s=t.call(this,e,n,r,i,o,a)||this).fileSpec=s.info.fileSpec&&new hi(s.info.fileSpec)||null,F()(s))}O()(e,t);var n=e.prototype;return n.setFileSpec=function(t){this.fileSpec=t,this.info.fileSpec=t.fileSpec},n.getFileSpec=function(){return this.fileSpec},n.checkOutData=function(t){return t&&t.buffer},n.updateAction=function(e){return this.fileSpec=e.fileSpec&&new hi(e.fileSpec)||null,t.prototype.updateAction.call(this,e)},e}(di),wi=["ZoomXYZ","ZoomFitPage","ZoomFitHorz","ZoomFitRect","ZoomFitBHorz","ZoomFitVert"],bi=function(t){function e(e,n,r,i,o,a){var s;return 0==arguments.length?(s=t.call(this,Te.goto)||this,F()(s)):t.call(this,e,n,r,i,o,a)||this}O()(e,t);var n=e.prototype;return n.getDestination=function(){return this.info.destination},n.checkOutData=function(t){return function(t){var e;return e=!!t.type,{ZoomXYZ:function(){e=t.pageIndex!=null&&t.left!=null&&t.top!=null&&t.zoomFactor!=null},ZoomFitPage:function(){e=!!(t.pageIndex!=null)},ZoomFitHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitVert:function(){e=t.pageIndex!=null&&t.left},ZoomFitRect:function(){e=t.pageIndex!=null&&t.left&&t.top!=null&&t.bottom!=null&&t.right!=null},ZoomFitBBox:function(){e=!!(t.pageIndex!=null)},ZoomFitBHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitBVert:function(){e=t.pageIndex!=null&&t.left!=null}}[t.type](),e}(t)},n.setDestination=function(t){var e=this;if(!this.doc)return this.info.destination=t,Promise.resolve();if(-1===wi.indexOf(t.zoomMode))throw new Error("param error. ZoomMode is invalid.");return t.pageIndex=Math.min(this.doc.getPageCount()-1,Math.max(t.pageIndex,0)),this.doc.api.setActionDestination(this.doc.getId(),this.info.objNumber,t).then((function(t){return e.updateAction(t),t}))},n.exportToJson=function(){var e=t.prototype.exportToJson.call(this);return A()(e,{destination:this.getDestination()})},e}(di);var Ai=function(t){function e(e,n,r,i,o,a){var s;return 0==arguments.length?(s=t.call(this,Te.hide)||this,F()(s)):t.call(this,e,n,r,i,o,a)||this}O()(e,t);var n=e.prototype;return n.getFieldNames=function(){return this.info.fieldNames},n.getHideState=function(){return this.info.hideState},n.setFieldNames=function(t){var e=this;return this.doc?this.doc.api.setActionFieldNames(this.doc.getId(),this.info.objNumber,t).then((function(t){return e.updateAction(t),t})):(this.info.fieldNames=t,Promise.resolve())},n.setHideState=function(t){var e=this;return this.doc?this.doc.api.setActionHideState(this.doc.getId(),this.info.objNumber,t).then((function(t){return e.updateAction(t),t})):(this.info.hideState=t,Promise.resolve())},n.checkOutData=function(t){return t&&t.fieldNames&&t.hideState},n.exportToJson=function(){var e=t.prototype.exportToJson.call(this);return A()(e,{fieldNames:this.getFieldNames(),hideState:this.getHideState()})},e}(di),Pi=function(t){function e(e,n,r,i,o,a){var s;return(s=t.call(this,e,n,r,i,o,a)||this).fileSpec=s.info.fileSpec&&new hi(s.info.fileSpec)||null,s}O()(e,t);var n=e.prototype;return n.getDestinationName=function(){return this.info.destinationName},n.getDestination=function(){return this.info.destination},n.getFileSpec=function(){return this.fileSpec},n.getNewWindowFlag=function(){return this.info.newWindowFlag},n.getFileSpecStream=function(){var t=[];return this.doc.api.getActionFileStream(this.doc.getId(),this.info.objNumber,(function(e){var n=e.arrayBuffer;t.push(n)})).then((function(){return t}))},n.checkOutData=function(t){return function(t){var e;return e=!!t.type,{ZoomXYZ:function(){e=t.pageIndex!=null&&t.left!=null&&t.top!=null&&t.zoomFactor!=null},ZoomFitPage:function(){e=!!(t.pageIndex!=null)},ZoomFitHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitVert:function(){e=t.pageIndex!=null&&t.left},ZoomFitRect:function(){e=t.pageIndex!=null&&t.left&&t.top!=null&&t.bottom!=null&&t.right!=null},ZoomFitBBox:function(){e=!!(t.pageIndex!=null)},ZoomFitBHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitBVert:function(){e=t.pageIndex!=null&&t.left!=null}}[t.type](),e&&t.buffer&&t.newWindowFlag}(t)},e}(di);var Ei=function(t){function e(e,n,r,i,o,a){var s;return(s=t.call(this,e,n,r,i,o,a)||this).rootFile=s.info.rootFile&&new hi(s.info.rootFile)||null,s}O()(e,t);var n=e.prototype;return n.getDestinationName=function(){return this.info.destinationName},n.getDestination=function(){return this.info.destination},n.getRootFile=function(){return this.rootFile},n.getNewWindowFlag=function(){return this.info.newWindowFlag},n.checkOutData=function(t){return function(t){var e;return e=!!t.type,{ZoomXYZ:function(){e=t.pageIndex!=null&&t.left!=null&&t.top!=null&&t.zoomFactor!=null},ZoomFitPage:function(){e=!!(t.pageIndex!=null)},ZoomFitHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitVert:function(){e=t.pageIndex!=null&&t.left},ZoomFitRect:function(){e=t.pageIndex!=null&&t.left&&t.top!=null&&t.bottom!=null&&t.right!=null},ZoomFitBBox:function(){e=!!(t.pageIndex!=null)},ZoomFitBHorz:function(){e=t.pageIndex!=null&&t.top!=null},ZoomFitBVert:function(){e=t.pageIndex!=null&&t.left!=null}}[t.type](),e&&t.buffer&&t.newWindowFlag}(t)},e}(di);var xi,Si=function(t){function e(e,n,r,i,o,a){var s;return 0==arguments.length?(s=t.call(this,Te.thread)||this,F()(s)):((s=t.call(this,e,n,r,i,o,a)||this).info.dest_thread_index&&(s.info.dest_thread_index=s.info.dest_thread_index),F()(s))}O()(e,t);var n=e.prototype;return n.getName=function(){return this.info.name},n.checkOutData=function(t){return t&&t.name},e}(di),Ci=function(t){function e(e,n,r,i,o,a){return t.call(this,e,n,r,i,o,a)||this}O()(e,t);var n=e.prototype;return n.getName=function(){return this.info.name},n.checkOutData=function(t){return t&&t.name},n.setOCGState=function(t){var e=this,n=this._getLayerIds(t),r=n.hideLayerIds,i=n.visibleLayerIds;return this.doc?this.doc.api.setActionOCGState(this.doc.getId(),this.info.objNumber,r,i).then((function(t){return e.updateAction(t),t})):(this.info.hideLayerIds=r,this.info.visibleLayerIds=i,Promise.resolve())},n._getLayerIds=function(t){var e=[],n=[];function r(t){t.children.length>0&&t.children.forEach((function(t){r(t)})),t.visible?n.push(t.id):e.push(t.id)}for(var i=0;i<t.length;i++)r(t[i]);return{hideLayerIds:e,visibleLayerIds:n}},e}(di),Di=function(){function t(){}return t.createAction=function(t,e,n,r,i){if(t)switch(t.type){case"TypeThread":return new Si(t,this,e,n,r,i);case"TypeURI":return new li(t,this,e,n,r,i);case"TypeLaunch":return new fi(t,this,e,n,r,i);case"TypeNamed":return new pi(t,this,e,n,r,i);case"TypeJavaScript":return new gi(t,this,e,n,r,i);case"TypeSubmitForm":return new vi(t,this,e,n,r,i);case"TypeResetForm":return new mi(t,this,e,n,r,i);case"TypeImportData":return new yi(t,this,e,n,r,i);case"TypeGoto":return new bi(t,this,e,n,r,i);case"TypeHide":return new Ai(t,this,e,n,r,i);case"TypeGoToR":return new Pi(t,this,e,n,r,i);case"TypeGoToE":return new Ei(t,this,e,n,r,i);case"TypeSetOCGState":return new Ci(t,this,e,n,r,i);default:return new di(t,this,e,n,r,i)}},t}(),Ii=function(){function t(t,e,n){this.doc=t,this.field=e,this.info=n,this.changes={}}var e=t.prototype;return e.getExportValue=function(){return this.info.exportValue},e.setExportValue=function(t){this.info.exportValue=t},e.updateProperty=function(t,e){return this.changes[t]=e,this.info&&-1==this.info.objectNumber||!this.doc?Promise.resolve():this.doc.api.updateFormControl(this.doc.id,this.field.getName(),this.info.objectNumber,t,e)},e.getProperty=function(t){return this.changes[t]},e.destroy=function(){this.doc=null,this.info=null},e.isEmpty=function(){return this.changes==={}},e.setWidget=function(t){this.widget=t},e.getWidget=function(){return this.widget},e.getWidgetAnnot=function(){var t=this;return this.widget?Promise.resolve(this.widget):this.doc.api.getControlPageIndex(this.doc.id,this.field.getName(),this.info.objectNumber).then((function(e){if(e>=0)return t.doc.getPageAnnots(e)})).then((function(e){return t.widget?t.widget:e?t.widget=e.find((function(e){return e.info.objectNumber==t.info.objectNumber})):void 0}))},e.getIndex=function(){return this.info.index},e.getField=function(){return this.field},e.getDefaultAppearance=function(){var t=this.info&&this.info.DA;if(t&&Object.keys(t).length>0)return t=A()({},this.info.DA);var e=this.getField();return A()({},e.info&&e.info.DA)},e.setDefaultAppearance=function(t){var e=this;if(!this.doc.checkPermission(Tn.fillForm|Tn.annotForm))throw new Error("Permission error");var n=(t=A()({},this.info.DA,t)).textColor,r=t.textSize;if("number"!=typeof n||"number"!=typeof r)throw new Error("param error. Only number is available.");n=(4278190080|n)>>>0,t.textColor=n,t.textSize=r;xn(n,"RGB");var i=JSON.stringify(t);return this.doc.api.updateFormControl(this.doc.id,this.field.getName(),this.info.objectNumber,"DA",i).then((function(){e.info.DA=t;var n=e.widget;if(n)return n.updateMKProperty("DA",t).then((function(r){var i=n.getPDFPage();e.doc.engine.eventEmitter.emit(Ct.annotationUpdated,[n],i,_n.defaultAppearanceUpdated),n.updateUI({type:"DA",value:t})}))}))},t}(),Ri=function(){function t(t){this.match=t}var e=t.prototype;return e.getEndCharIndex=function(){return this.match.endCharIndex},e.getPageIndex=function(){return this.match.pageIndex},e.getRects=function(){return this.match.rectArray},e.getSentence=function(){return this.match.sentence},e.getSentenceStartIndex=function(){return this.match.sentenceStartIndex},e.getStartCharIndex=function(){return this.match.startCharIndex},t}(),Ti=function(){function t(t,e){this.id=t,this.annot=e,this.page=e.getPDFPage(),this.api=this.page.api}var e=t.prototype;return e.getId=function(){return this.id},e.findNext=function(){return this.page.doc.api.textSearchFindNext(this.getId()).then((function(t){return t?new Ri(t):null}))},e.findPrev=function(){return this.page.doc.api.textSearchFindPrev(this.getId()).then((function(t){return t?new Ri(t):null}))},e.destroy=function(){return this.page.doc.api.textSearchDestroy(this.getId())},t}(),_i=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).resetAction(),r.mapFormControl(),r}O()(e,t);var n=e.prototype;return n.resetAction=function(){this.action=this.page.doc.engine.actionFactory.createAction(this.info.action,this.page.doc,this.page.doc.api,this.eventEmitter,this)},n.mapFormControl=function(){var t=this.info,e=this.getField();if(e){var n=e.getControlById(t.objectNumber);n&&!n.isEmpty()&&n.setWidget(this),this.formControl=n}},n.destroy=function(){this.action=null,this.render=null,t.prototype.destroy.call(this)},n.getControl=function(){return this.formControl||this.mapFormControl(),this.formControl},n.setDisplay=function(t,e){var n=this.info.flag;switch(t){case 0:n&=-2,n&=-3,n&=-33,n|=4;break;case 1:n&=-2,n&=-33,n|=6;break;case 2:n&=-2,n&=-5,n&=-3,n&=-33;break;case 3:n|=32,n|=4,n&=-3}return this.setFlagValue(n,e)},n.getObjNum=function(){return this.info.objectNumber},n.getAction=function(){return this.action},n.getRotation=function(){return this.info.rotation},n.getField=function(){if(!this.page)return null;var t=this.page.getPDFDoc().getPDFForm();return t&&t.getField(this.info.field)},n.getMKProperty=function(t){switch(t){case"borderColor":return this.info.MKBorderColor;case"fillColor":return this.info.fillColor;case"normalCaption":case"downCaption":case"rolloverCaption":default:return this.info[t]}},n.setMKProperty=function(t,e){switch(t){case"borderColor":if(this.info.MKBorderColor==e)return Promise.resolve(!0);this.info.MKBorderColor=e;break;default:if(this.info[t]==e)return Promise.resolve(!0);this.info[t]=e}return this.updateMKProperty(t,e)},n.getBorderColor=function(){return this.getMKProperty("borderColor")},n.updateMKProperty=function(t,e){var n=this,r=this.page,i=r.getPDFDoc(),o={type:t,value:e};return this.page.doc.api.updateMKProperty(i.getId(),r.getId(),this.getId(),t,e).then((function(e){return n.triggerUpdateEvent(_n.formFieldMKPropertyUpdated,t),n.updateUI(o),e}))},n.triggerUpdateEvent=function(t,e){this.engine.eventEmitter.emit(St.annotationUpdated,[this],this.getPDFPage(),t,e)},n.updateUI=function(t){this.render&&this.render(t)},n.setRenderNotifier=function(t){this.render=t},n.getAdditionalAction=function(t){if(-1==t)return this.action;var e=this.getField();if(t>=Je.keyStroke&&t<=Je.calculate)return e&&e.getAction(t);if(!this.engineActions)for(var n in this.engineActions={},this.info.AA)this.engineActions[n]=Di.createAction(this.info.AA[n],this.page.getPDFDoc());return this.engineActions[t]?this.engineActions[t]:e&&e.getAction(t)},n.switchAS=function(){var t=this.getField(),e=t.getType();if(3!=e||"Off"==this.info.ApState){1==this.info.ApStates.length&&"Off"!=this.info.ApStates[0]&&(this.info.ApStates[1]="Off"),this.info.ApStates[0]==this.info.ApState?this.info.ApState=this.info.ApStates[1]:this.info.ApState=this.info.ApStates[0];var n=this.info.ApState;3!=e&&2!=e||"Off"==n||(n=this.formControl.getExportValue()),t.setValue(n,this)}},n.setAS=function(t,e){var n="Off",r=this.info.ApStates;switch(this.getField().getType()){case 3:var i=this.getControl().getExportValue(),o=this.getOnAS();n=e==this.info.objectNumber?t==i?o:"Off":(!e||Nn.inUnison(this.getField().getFlags()))&&t==i?o:"Off";break;default:var a=this.getField().getControlById(e);(!e||e&&this.getControl().getExportValue()==a.getExportValue())&&(n="Off"!=t?r[1]:r[0])}this.info.ApState=n;var s=this.page,c=s.getPDFDoc();return this.page.doc.api.setWidgetAS(c.getId(),s.getId(),this.getId(),this.info.ApState)},n.getWidgetMkOption=function(){var t=this.page,e=t.getPDFDoc();return t.doc.api.getWidgetMkOption(e.getId(),t.getId(),this.getId())},n.setWidgetIconCaptionRelation=function(t){var e=this,n=this.page,r=n.getPDFDoc();return n.doc.api.setWidgetIconCaptionRelation(r.getId(),n.getId(),this.getId(),t).then((function(t){e.updateUI({})}))},n.setWidgetHighlighting=function(t){var e=this,n=this.page,r=n.getPDFDoc();return n.doc.api.setWidgetHighlighting(r.getId(),n.getId(),this.getId(),t).then((function(t){e.updateUI({})}))},n.setWidgetMkCaption=function(t,e){var n=this,r=this.page,i=r.getPDFDoc();return r.doc.api.setWidgetMkCaption(i.getId(),r.getId(),this.getId(),t,e).then((function(t){n.updateUI({})}))},n.setWidgetMkIcon=function(t,e){var n=this,r=this.page,i=r.getPDFDoc();return r.doc.api.setWidgetMkIcon(i.getId(),r.getId(),this.getId(),t,e).then((function(t){n.updateUI({})}))},n.getWidgetIconFitOption=function(){var t=this.page,e=t.getPDFDoc();return t.doc.api.getWidgetIconFitOption(e.getId(),t.getId(),this.getId())},n.setWidgetIconFitOption=function(t){var e=this,n=this.page,r=n.getPDFDoc();return n.doc.api.setWidgetIconFitOption(r.getId(),n.getId(),this.getId(),t).then((function(t){e.updateUI({})}))},n.getDAFontSize=function(){var t=this.getDefaultAppearance(),e=t&&t.textSize;return e||this.getField().getDAFontSize()},n.getDirectionRTL=function(){return this.info.directionRTL},n.setDirectionRTL=function(t){var e=this;if(void 0!==t&&0!==t&&1!==t)throw new Error("Unknown directionRTL: "+t);return this.updateMKProperty("directionRTL",t).then((function(){return e.update().then((function(){return e.getField().setAlignment(t?2:0)}))}))},n.getLineSpace=function(){return this.info.lineSpace},n.setLineSpace=function(t){var e=this;if(!(void 0===t||Array.isArray(t)&&2===t.length&&-1!==[0,1,2,3].indexOf(t[0])&&t[1]>=0))throw new Error("Unknown lineSpace: "+t);return this.updateMKProperty("lineSpace",t).then((function(){return e.update()}))},n.getOnAS=function(){return"Off"!=this.info.ApStates[0]?this.info.ApStates[0]:this.info.ApStates[1]},n.getAS=function(){return this.info.ApState},n.getIconObjNum=function(t){switch(t){case 0:return this.info.normalIcon;case 1:return this.info.downIcon;case 2:return this.info.rollIcon}},n.setIconObj=function(t,e){var n;switch(e){case 0:n="normalIcon",this.info.normalIcon=t;break;case 1:n="downIcon",this.info.downIcon=t;break;case 2:n="rolloverIcon",this.info.rollIcon=t}return this.updateMKProperty(n,t)},n.setAdditionalAction=function(t,e){if("string"==typeof e){var n=new gi;n.setScript(e),e=n}return t>=Je.keyStroke&&t<=Je.calculate?this.getField().setAction(t,e):this.setAction(t,e)},n.setAction=function(t,e,n){var r=this;if(!e)throw new Error("No Action!");var i=this.page,o=i.doc;return this.engineActions||this.getAdditionalAction(11),this.page.doc.api.setAction(o.getId(),i.getId(),this.getId(),e.info,t,n).then((function(i){e.init(i,r.page.doc.engine.actionFactory,o,r.page.doc.api,r.page.doc.engine.eventEmitter,r);var a=!1;return-1==t&&r.info.action&&(a=!0),-1!=t&&r.engineActions[t]&&(a=!0),n&&a?-1==t?r.action.appendSubAction(e):r.engineActions[t].appendSubAction(e):-1==t?(r.info.action=e.info,r.action=e):(r.info.AA[t]=e.info,r.engineActions[t]=e),n?(r.eventEmitter.emit(St.actionAdd,r),r.triggerUpdateEvent(_n.addAction)):a?(r.eventEmitter.emit(St.actionUpdated,r),r.triggerUpdateEvent(_n.formFieldActionUpdated)):(r.eventEmitter.emit(St.actionAdd,r),r.triggerUpdateEvent(_n.addAction)),i}))},n.removeAction=function(t,e){var n=this,r=this.getField(),i=0,o=0;e?(i=0,o=e.info.objNumber):delete r.info.AA[t],"-1"==t?(delete this.info.action,delete this.action):(delete this.info.AA[t],this.engineActions&&delete this.engineActions[t],r.engineActions&&delete r.engineActions);var a=this.page,s=a.doc;return s.api.removeAction(s.getId(),a.getId(),this.getId(),t,i,o).then((function(e){var i=e[0];i&&("-1"==t?(n.info.action=i,n.action=Di.createAction(i,n.page.getPDFDoc())):(n.info.AA[t]=i,n.engineActions[t]=Di.createAction(i,n.page.getPDFDoc()))),e[1]&&(r.info.AA[t]=e[1]),n.triggerUpdateEvent(_n.formFieldActionUpdated)}))},n.moveAction=function(t,e,n){return this.page.doc.api.moveAction(this.page.doc.getId(),this.page.getId(),this.getId(),t,e,n)},n.getDAFontColor=function(){var t=this.getDefaultAppearance(),e=t&&t.textColor;return e||this.getField().getDAFontColor()},n.getAlignment=function(){return void 0!==this.info.alignment?this.info.alignment:this.getField().getAlignment()},n.getDefaultAppearance=function(){return this.formControl||this.mapFormControl(),this.formControl&&this.formControl.getDefaultAppearance()},n.setDefaultAppearance=function(t){return this.formControl||this.mapFormControl(),this.formControl&&this.formControl.setDefaultAppearance(t)},n._update=function(e){return this.engineActions=null,t.prototype._update.call(this,e)},n.getTextSearch=function(t,e){var n=this,r=this.page,i=r.doc;return this.page.doc.api.getAnnotTextSearch(i.getId(),r.getId(),this.getId(),t,e).then((function(t){return new Ti(t,n)}))},e}(Fn),ki=function(){function t(t,e){this.fromInchRate=t,this.name=e}var e=t.prototype;return e.convertTo=function(t,e){return t/this.fromInchRate*e.fromInchRate},e.convertAreaTo=function(t,e){return t/Math.pow(this.fromInchRate,2)*Math.pow(e.fromInchRate,2)},Tt()(t,[{key:"isPixel",get:function(){return!1}}]),t}(),Fi=function(t){function e(e){var n;return(n=t.call(this,0,"px")||this).orientation=e,Object.defineProperty(F()(n),"fromInchRate",{get:function(){var t=Object(K.getDPI)();switch(e){case"horizontal":return t.x;case"vertical":return t.y;default:return t.x}}}),n}return O()(e,t),Tt()(e,[{key:"isPixel",get:function(){return!0}}]),e}(ki),Mi={inch:"inch",custom:"custom",mi:"mi",pt:"pt",ft:"ft",yd:"yd",km:"km",m:"m",cm:"cm",mm:"mm",pica:"pica"},Oi=new ki(1,Mi.inch),Li=new ki(1,Mi.custom),Ni=new ki(1/63360,Mi.mi),Vi=new ki(72,Mi.pt),Bi=new ki(1/12,Mi.ft),Ui=new ki(1/36,Mi.yd),ji=new ki(.0254/1e3,Mi.km),Hi=new ki(.0254,Mi.m),Wi=new ki(2.54,Mi.cm),$i=new ki(25.4,Mi.mm),Yi=new ki(6,Mi.pica),qi=new Fi("horizontal"),Gi=new Fi("vertical"),zi=(xi={},R()(xi,Oi.name,Oi),R()(xi,Li.name,Li),R()(xi,Ni.name,Ni),R()(xi,Vi.name,Vi),R()(xi,Bi.name,Bi),R()(xi,Ui.name,Ui),R()(xi,ji.name,ji),R()(xi,Hi.name,Hi),R()(xi,Wi.name,Wi),R()(xi,$i.name,$i),R()(xi,Yi.name,Yi),R()(xi,qi.name,qi),xi);function Ki(t){switch(t){case"in":t="inch";break;case"p":t="pica"}return zi[t]}var Ji,Xi=function(){function t(t,e,n){this.pageRender=t,this.pdfDoc=t.getPDFDoc(),this.pdfArticle=this.pdfDoc.pdfArticle,this.pdfPage=t.page,this.pdfViewer=t.pdfViewer,this.$container=t.$customsContainer,this.articleInfo=e,this.articleBeadInfo=n,this.$dom=null,this.render()}var e=t.prototype;return e.render=function(){this.createDom()},e.updateRender=function(t,e){t&&(this.articleInfo=t),e&&(this.articleBeadInfo=e);var n=this.getDeviceRect(),r=n.left,i=n.top,o=n.right-r,a=n.bottom-i;this.$dom.css({width:o+"px",height:a+"px",top:i+"px",left:r+"px"})},e.read=function(){var t=this;this.$dom.addClass("fv__article-read"),setTimeout((function(){t.$dom.removeClass("fv__article-read")}),500);var e=this.articleBeadInfo,n=e.rect,r=e.pageIndex,i=this.pdfViewer;return i.zoomTo(2).then((function(){return i.goToPage(r,n.top,n.left)}))},e.getDeviceRect=function(){var t=this.articleBeadInfo.rect,e=this.pageRender,n=e.getScale(),r=e.getRotation();return this.pdfPage.getDeviceRect(t,n,r)},e.createDom=function(){var t=this.getDeviceRect(),e=t.left,n=t.top,r=t.right,i=t.bottom;this.$dom=B()('<div style="position:absolute;width:'+(r-e)+"px;height:"+(i-n)+"px;left:"+e+"px;top:"+n+'px;z-index:26;"></div>'),this.$container.append(this.$dom)},e.destroy=function(){this.articleBeadInfo=null,this.$dom.remove(),this.$dom=null,this.pdfDoc=null,this.pdfArticle=null},t}(),Zi={PageOpened:0,PageClosed:1,DocWillClose:2,DocWillSave:3,DocSaved:4,DocWillPrint:5,DocPrinted:6,FieldKeyStroke:7,FieldWillFormat:8,FieldValueChanged:9,FieldRecalculateValue:10,AnnotCursorEnter:11,AnnotCursorExit:12,AnnotMouseButtonPressed:13,AnnotMouseButtonReleased:14,AnnotReceiveInputFocus:15,AnnotLoseInputFocus:16,AnnotPageOpened:17,AnnotPageClosed:18,AnnotPageVisible:19,AnnotPageInvisible:20},Qi=n(88);!function(t){t[t.LEFT=KeyboardEvent.DOM_KEY_LOCATION_LEFT]="LEFT",t[t.RIGHT=KeyboardEvent.DOM_KEY_LOCATION_RIGHT]="RIGHT",t[t.STANDARD=KeyboardEvent.DOM_KEY_LOCATION_STANDARD]="STANDARD",t[t.NUMPAD=KeyboardEvent.DOM_KEY_LOCATION_NUMPAD]="NUMPAD"}(Ji||(Ji={}));var to=function(){function t(t){this.isMatch=t}return t.prototype.match=function(){return this.isMatch},t}(),eo=function(){function t(t){this.keys=t}return t.prototype.match=function(t){return this.keys.some((function(e){return"string"==typeof e?To(t,e):"boolean"==typeof e?e:e.match(t)}))},t}(),no=function(){function t(t){this.callback=t}return t.prototype.match=function(t){return this.callback(t)},t}(),ro=function(){function t(t){this.keys=t}return t.prototype.match=function(t){return this.keys.every((function(e){return"string"==typeof e?To(t,e):"boolean"==typeof e?e:e.match(t)}))},t}(),io=function(){function t(t){this.key=t}return t.prototype.match=function(t){return To(t,this.key)},t}();KeyboardEvent.prototype.getModifierState||(KeyboardEvent.prototype.getModifierState=function(t){switch(t){case"Control":return this.ctrlKey;case"Shift":return this.shiftKey;case"Alt":return this.altKey;case"Meta":return this.metaKey}return!1});var oo=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.event=t,this.detectors=e,this.interrupted=!1}var e=t.prototype;return e.switchers=function(t){return this.ctrl(t).shift(t).meta(t).alt(t)},e.ctrl=function(t){var e=this;return Vo(t)?this.detectors.control=function(){return e.event.getModifierState("Control")===t}:delete this.detectors.control,this},e.filter=function(t){var e=this;return"function"==typeof t&&(this.detectors[Object(Qi.a)("filter")]=function(){return t.call(e,e.event)}),this},e.shift=function(t){var e=this;return Vo(t)?this.detectors.shift=function(){return e.event.getModifierState("Shift")===t}:delete this.detectors.shift,this},e.capsLock=function(t){var e=this;return Vo(t)?this.detectors.capsLock=function(){return e.event.getModifierState("CapsLock")===t}:delete this.detectors.capsLock,this},e.meta=function(t){var e=this;return Vo(t)?this.detectors.meta=function(){return e.event.metaKey===t}:delete this.detectors.meta,this},e.alt=function(t){var e=this;return Vo(t)?this.detectors.alt=function(){return e.event.getModifierState("Alt")===t}:delete this.detectors.alt,this},e.mod=function(t){return Vt.isMac?this.meta(t):this.ctrl(t)},e.location=function(t){var e=this;return this.detectors.location=function(){return Fo(e.event)===t},this},e.standard=function(){return this.location(Ji.STANDARD)},e.numpad=function(){return this.location(Ji.NUMPAD)},e.left=function(){return this.location(Ji.LEFT)},e.right=function(){return this.location(Ji.RIGHT)},e.run=function(t){this.passed()&&(!1===t(this.event)&&(this.interrupted=!0));return this.clone()},e.key=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=new eo(n.map((function(t){switch(_()(t)){case"string":return lo.key(t);case"boolean":return new to(t)}return t})));return this.detectors.keys=function(){return i.match(t.event)},this},e.when=function(t,e){var n;return Array.isArray(t)?(n=this.clone()).key.apply(n,E()(t)).run(e):this.clone().key(t).run(e)},e.clone=function(){return this.interrupted?new ao(this.event,{}):new t(this.event,A()({},this.detectors))},e.passed=function(){return!this.interrupted&&!Object.values(this.detectors).some((function(t){return!t()}))},t}(),ao=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.switchers=function(){return this},n.ctrl=function(){return this},n.shift=function(){return this},n.capsLock=function(){return this},n.meta=function(){return this},n.alt=function(){return this},n.location=function(){return this},n.standard=function(){return this},n.numpad=function(){return this},n.left=function(){return this},n.right=function(){return this},n.run=function(){return this},n.key=function(){return this},n.when=function(){return this},e}(oo);function so(t){return new oo(t)}function co(t,e){var n=new oo(t),r=!1;return n.when(e,(function(){r=!0})),r}var uo=function(t){return new io(t)},lo={or:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new eo(e)},key:uo,and:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new ro(e)},Space:new no(Ro),Home:new no(Do),End:new no(Io),Enter:new no(xo),StandardEnter:new no(So),NumpadEnter:new no(Co),Tab:uo("Tab"),CapsLock:uo("CapsLock"),PageUp:uo("PageUp"),PageDown:uo("PageDown"),ArrowUp:uo("ArrowUp"),ArrowDown:uo("ArrowDown"),ArrowLeft:uo("ArrowLeft"),ArrowRight:uo("ArrowRight"),BackSpace:uo("Backspace"),Delete:uo("Delete"),Escape:uo("Escape"),F1:uo("F1"),F2:uo("F2"),F3:uo("F3"),F4:uo("F4"),F5:uo("F5"),F6:uo("F6"),F7:uo("F7"),F8:uo("F8"),F9:uo("F9"),F10:uo("F10"),F11:uo("F11"),F12:uo("F12")};function ho(t){return fo(t)||po(t)}function fo(t){return ko(t,"Control",1)}function po(t){return ko(t,"Control",2)}function go(t){return vo(t)||mo(t)}function vo(t){return ko(t,"Shift",1)}function mo(t){return ko(t,"Shift",2)}function yo(t){return wo(t)||bo(t)}function wo(t){return ko(t,"Alt",1)}function bo(t){return ko(t,"Alt",2)}function Ao(t){return Po(t)||Eo(t)}function Po(t){return ko(t,"Meta",1)}function Eo(t){return ko(t,"Meta",2)}function xo(t){return So(t)||Co(t)}function So(t){return ko(t,"Enter",0)}function Co(t){return ko(t,"Enter",3)}function Do(t){return ko(t,"Home",0)}function Io(t){return ko(t,"End",0)}function Ro(t){return To(t," ")}function To(t,e){return _o(t)===e}function _o(t){return Mo(t)?t.key:No(t.keyCode,t.shiftKey)}function ko(t,e,n){if(void 0!==n&&Fo(t)!==n)return!1;var r=t.key;return Mo(t)||(r=No(t.keyCode,t.shiftKey)),r===e}function Fo(t){return void 0===t.location?t.keyLocation:t.location}function Mo(t){return void 0!==t.key}var Oo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",189:"_",187:"+",219:"{",220:"|",221:"}",186:":",222:'"',188:"<",190:">",191:"?",192:"~"},Lo={192:"`",191:"/",190:".",189:"-",188:",",220:"\\",222:"'",186:";",221:"]",219:"[",187:"=",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",27:"Escape",9:"Tab",20:"CapsLock",16:"Shift",17:"Control",91:"Meta",18:"Alt",32:" ",33:"PageUp",34:"PageDown",38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",13:"Enter",8:"Backspace",46:"Delete",45:"Insert",35:"End",36:"Home",144:"NumLock",111:"/",106:"*",109:"-",107:"+",110:".",96:0,97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9};function No(t,e){if(t>=65&&t<=90){var n=String.fromCharCode(t);return e?n.toUpperCase():n}return t>=48&&t<=57?e?Oo[t]:String.fromCharCode(t):e?Oo[t]:Lo[t]}function Vo(t){return"boolean"==typeof t}function Bo(t){return"string"==typeof Oo[t.keyCode]&&t.shiftKey}function Uo(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},i=r.ctrlKey,o=r.shiftKey,a=r.altKey,s=r.metaKey,c=document.createEvent("KeyboardEvent"),u=c.initKeyboardEvent?c.initKeyboardEvent:c.initEvent;u.call(c,e,!0,!0,window,i,a,o,s,n,n,0),t.dispatchEvent(c)}n(239);var jo="pdf-viewer-keyboard-event-binder",Ho="activation-annotation-keyboard-event-binder",Wo=n(37);var $o,Yo=function(){function t(t){this.flag=t}var e=t.prototype;return e.getValue=function(){return this.flag},e.checkInvisible=function(){return(this.flag&kn.invisible)===kn.invisible},e.checkHidden=function(){return(this.flag&kn.hidden)===kn.hidden},e.checkPrint=function(){return(this.flag&kn.print)===kn.print},e.checkNoZoom=function(){return(this.flag&kn.noZoom)===kn.noZoom},e.checkNoRotate=function(){return(this.flag&kn.noRotate)===kn.noRotate},e.checkNoView=function(){return(this.flag&kn.noView)===kn.noView},e.checkReadOnly=function(){return(this.flag&kn.readOnly)===kn.readOnly},e.checkLocked=function(){return(this.flag&kn.locked)===kn.locked},e.checkToggleNoView=function(){return(this.flag&kn.toggleNoView)===kn.toggleNoView},e.checkLockedContents=function(){return(this.flag&kn.lockedContents)===kn.lockedContents},e.check=function(t){return(this.flag&t)===t},e.and=function(){return this},e.or=function(t){return this.flag=this.flag|t,this},t}(),qo=n(38);!function(t){t.CREATE_ANNOT="create-annots",t.REMOVE_ANNOT="remove-annots",t.UPDATE_ANNOT="update-annots",t.ADD_REPLY="add-reply",t.REMOVE_REPLY="remove-reply",t.ADD_REVIEW_STATE="add-review-state",t.ADD_MARKED_STATE="add-marked-state",t.UPDATE_ANNOT_CONTENT="update-comment-content",t.PPO_REMOVE_PAGE="ppo-remove-page",t.PPO_REMOVE_PAGES="ppo-remove-pages",t.PPO_INSERT_PAGE="ppo-insert-page",t.PPO_ROTATE_PAGE="ppo-rotate-page",t.PPO_MOVE_PAGE="ppo-move-page",t.MOVE_ANNOTS_BETWEEN_PAGES="move-annotations-between-pages",t.IMPORT_ANNOTATIONS_FILE="import-annotations-file"}($o||($o={}));var Go,zo,Ko,Jo,Xo,Zo,Qo={annotation:"annotation"};!function(t){t.SELECT_ALL="builtin-command-select-all-annotations",t.CREATION_UNDO_LAST="builtin-command-creation-undo-last",t.DELETE_SELECTED_OBJECT="builtin-command-delete-selected-object",t.UNSELECT_OBJECT="builtin-command-unselect-object",t.UNDO_OPERATION="builtin-command-undo",t.REDO_OPERATION="builtin-command-redo",t.CANCEL_CREATING_ANNOTATION_OPERATION="builtin-command-cancel-creating-annotation",t.CLOSE_LAYER="builtin-command-close-closable-layer",t.ARROW_UP="builtin-command-arrow-up",t.ARROW_DOWN="builtin-command-arrow-down",t.ARROW_LEFT="builtin-command-arrow-left",t.ARROW_RIGHT="builtin-command-arrow-right",t.SWITCH_TO_HAND_STATE="builtin-command-switch-hand-state",t.COPY_ACTIVATE_ELEMENT="builtin-command-copy-activate-element",t.CUT_ACTIVATE_ELEMENT="builtin-command-cut-activate-element",t.ADD_BOOKMARK="builtin-command-add-bookmark",t.COPY_TEXT_IMAGE="builtin-command-copy-text-image",t.BLUR_EDITTING_TEXT_OBJECT="builtin-command-blur-editting-text-object",t.ALIGNMENT_REDUCE_WIDTH="builtin-command-alignment-reduce-width",t.ALIGNMENT_RAISE_WIDTH="builtin-command-alignment-raise-width",t.ALIGNMENT_REDUCE_HEIGHT="builtin-command-alignment-reduce-height",t.ALIGNMENT_RAISE_HEIGHT="builtin-command-alignment-raise-height",t.ALIGNMENT_REDUCE_STEP_WIDTH="builtin-command-alignment-reduce-step-width",t.ALIGNMENT_RAISE_STEP_WIDTH="builtin-command-alignment-raise-step-width",t.ALIGNMENT_REDUCE_STEP_HEIGHT="builtin-command-alignment-reduce-step-height",t.ALIGNMENT_RAISE_STEP_HEIGHT="builtin-command-alignment-raise-step-height",t.TAB_NEXT_OPERATION="builtin-command-tab-next",t.TAB_PREVIOUS_OPERATION="builtin-command-tab-previous",t.DELETE_ATTACHMENT="builtin-command-delete-attachment",t.JUMP_TO_NEXT_PAGE="builtin-command-jump-to-next-page",t.JUMP_TO_PREVIOUS_PAGE="builtin-command-jump-to-previsous-page",t.JUMP_TO_FIRST_PAGE="builtin-command-jump-to-first-page",t.JUMP_TO_LAST_PAGE="builtin-command-jump-to-last-page",t.SCROLL_TO_NEXT_VISIBLE_AREA="builtin-command-scroll-to-next-visible-area",t.SCROLL_TO_PREVIOUS_VISIBLE_AREA="builtin-command-scroll-to-previous-visible-area",t.SCROLL_VIEWER_SCROLLBAR_LEFT="builtin-command-scroll-viewer-scrollbar-left",t.SCROLL_VIEWER_SCROLLBAR_RIGHT="builtin-command-scroll-viewer-scrollbar-right",t.SCROLL_VIEWER_SCROLLBAR_UP="builtin-command-scroll-viewer-scrollbar-up",t.SCROLL_VIEWER_SCROLLBAR_DOWN="builtin-command-scroll-viewer-scrollbar-down"}(Xo||(Xo={})),function(t){t.GLOBAL="builtin-shortcut-context-global",t.SELECTION="builtin-shortcut-context-selection",t.BASIC_STATE_HANDLER="builtin-shortcut-context-state-hander",t.ANNOTATION_PROPERTIES="builtin-shortcut-context-annot-properties",t.ACTIVATION_ANY="builtin-shortcut-context-activation-any",t.ACTIVATION_ANNOTATION="builtin-shortcut-context-activation-annot",t.ACTIVATION_WIDGET="builtin-shortcut-context-activation-widget",t.ACTIVATION_GRAPH_OBJ="builtin-shortcut-context-activation-graph_obj",t.VIEWER="builtin-shortcut-context-viewer",t.CREATING_ANNOTATION="builtin-shortcut-context-creating-annotation",t.CLOSABLE_LAYER="builtin-shortcut-context-closable-layer",t.EDIT_TEXT_OBJECT="builtin-shortcut-context-edit-text-object"}(Zo||(Zo={}));var ta=[{context:Zo.GLOBAL,topLayers:[],extends:[],shortcuts:{}},{context:Zo.CLOSABLE_LAYER,topLayers:[Zo.GLOBAL],extends:[],shortcuts:R()({},Xo.CLOSE_LAYER,"Escape")},{context:Zo.VIEWER,topLayers:[Zo.GLOBAL],extends:[],shortcuts:(Go={},R()(Go,Xo.UNDO_OPERATION,"Mod+Z"),R()(Go,Xo.REDO_OPERATION,"Mod+Y"),R()(Go,Xo.ADD_BOOKMARK,"Mod+B"),R()(Go,Xo.DELETE_ATTACHMENT,"Delete"),R()(Go,Xo.JUMP_TO_PREVIOUS_PAGE,"LeftArrow"),R()(Go,Xo.JUMP_TO_NEXT_PAGE,"RightArrow"),R()(Go,Xo.ARROW_UP,"UpArrow"),R()(Go,Xo.ARROW_DOWN,"DownArrow"),R()(Go,Xo.JUMP_TO_FIRST_PAGE,"Home"),R()(Go,Xo.JUMP_TO_LAST_PAGE,"End"),R()(Go,Xo.SCROLL_TO_NEXT_VISIBLE_AREA,"PageDown"),R()(Go,Xo.SCROLL_TO_PREVIOUS_VISIBLE_AREA,"PageUp"),R()(Go,Xo.SCROLL_VIEWER_SCROLLBAR_LEFT,"Shift+LeftArrow"),R()(Go,Xo.SCROLL_VIEWER_SCROLLBAR_RIGHT,"Shift+RightArrow"),R()(Go,Xo.SCROLL_VIEWER_SCROLLBAR_UP,"Shift+UpArrow"),R()(Go,Xo.SCROLL_VIEWER_SCROLLBAR_DOWN,"Shift+DownArrow"),Go)},{context:Zo.EDIT_TEXT_OBJECT,topLayers:[Zo.GLOBAL],extends:[],shortcuts:R()({},Xo.BLUR_EDITTING_TEXT_OBJECT,"Escape")},{context:Zo.CREATING_ANNOTATION,topLayers:[Zo.VIEWER],extends:[],shortcuts:R()({},Xo.CANCEL_CREATING_ANNOTATION_OPERATION,"Escape")},{context:Zo.SELECTION,topLayers:[],extends:[],shortcuts:R()({},Xo.SELECT_ALL,"Mod+A")},{context:Zo.ACTIVATION_ANY,topLayers:[Zo.VIEWER],extends:[Zo.SELECTION],shortcuts:(zo={},R()(zo,Xo.DELETE_SELECTED_OBJECT,"Delete"),R()(zo,Xo.UNSELECT_OBJECT,"Escape"),R()(zo,Xo.COPY_ACTIVATE_ELEMENT,"Mod+C"),R()(zo,Xo.CUT_ACTIVATE_ELEMENT,"Mod+X"),zo)},{context:Zo.ACTIVATION_ANNOTATION,topLayers:[Zo.VIEWER],extends:[Zo.ACTIVATION_ANY],shortcuts:{}},{context:Zo.ACTIVATION_WIDGET,topLayers:[Zo.VIEWER],extends:[Zo.ACTIVATION_ANY],shortcuts:(Ko={},R()(Ko,Xo.ALIGNMENT_REDUCE_WIDTH,"Mod+LeftArrow"),R()(Ko,Xo.ALIGNMENT_RAISE_WIDTH,"Mod+RightArrow"),R()(Ko,Xo.ALIGNMENT_REDUCE_HEIGHT,"Mod+UpArrow"),R()(Ko,Xo.ALIGNMENT_RAISE_HEIGHT,"Mod+DownArrow"),R()(Ko,Xo.ALIGNMENT_REDUCE_STEP_WIDTH,"Mod+Shift+LeftArrow"),R()(Ko,Xo.ALIGNMENT_RAISE_STEP_WIDTH,"Mod+Shift+RightArrow"),R()(Ko,Xo.ALIGNMENT_REDUCE_STEP_HEIGHT,"Mod+Shift+UpArrow"),R()(Ko,Xo.ALIGNMENT_RAISE_STEP_HEIGHT,"Mod+Shift+DownArrow"),Ko)},{context:Zo.ACTIVATION_GRAPH_OBJ,topLayers:[Zo.VIEWER],extends:[Zo.ACTIVATION_ANY],shortcuts:{}},{context:Zo.BASIC_STATE_HANDLER,topLayers:[Zo.VIEWER],extends:[],shortcuts:R()({},Xo.SWITCH_TO_HAND_STATE,"Escape")},{context:lr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Vn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:qn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:dr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:hr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:cr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:or,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Un,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:br,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Ar,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Pr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:ar,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:$n,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Jn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:jn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:rr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:ir,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:nr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Hn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:er,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:ur,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Xn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Zn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Qn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:tr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Yn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Gn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Kn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"create-multi-media-state",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"create-redaction-text-state",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"create-redaction-state",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreatePushButtonStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreateCheckBoxStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreateRadioButtonStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreateComboBoxStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreateListBoxStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreateTextStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreateSignStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreateDateStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:"CreateImageStateHandler",topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Bn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:zn,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:fr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:pr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:gr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:vr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:mr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:(Jo={},R()(Jo,Xo.COPY_TEXT_IMAGE,"Mod+C"),R()(Jo,Xo.ADD_BOOKMARK,"Mod+B"),R()(Jo,Xo.SELECT_ALL,"Mod+A"),Jo)},{context:wr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[Zo.SELECTION],shortcuts:{}},{context:Er,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:Sr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:Cr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:Dr,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:Ir,topLayers:[Zo.BASIC_STATE_HANDLER],extends:[],shortcuts:{}}];function ea(t){return function(e,n){if(t.indexOf(e.command))return n(e)}}function na(t){return function(e,n){if(-1===t.indexOf(e.command))return n(e)}}function ra(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(e,r){n.length>0&&n.indexOf(e.command)>-1?r(e):Ut(e.native.target,t)||r(e)}}function ia(t){return function(e,n){t&&e.command!==t||e.preventDefault(),n(e)}}function oa(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var i;i=e?function(t){return t===document.activeElement||t.contains(document.activeElement)}:function(t){return t===document.activeElement},!!t.find(i)&&r(n)}}var aa,sa="undefined"!=typeof PointerEvent,ca=Nt.isIE10?"MSPointerDown":sa?"pointerdown":"mousedown",ua=Nt.isIE10?"MSPointerDown":"pointerdown",da=function(t){function e(e,n,r,i){var o;(o=t.call(this,i)||this).hasFocus=!1,o.docRender=o.parent("pdfDocRender"),o.name="annot",o.eUi=n,o.element=n;var a=o.$ui=B()(n);if(a.addClass("fv__pdf-page-annot-container").data("zIndexContextMenu",F()(o)),a.attr("objectNumber",e.objectNumber),o.eHandler=r,(o.$handler=B()(r)).addClass("fv__pdf-page-annot-handler-container"),o.$page=i.$page,o.annot=e,o.$$isUIVisible=!0,a.data("component",F()(o)),o.deleteStatus=0,o.annotsRender=i.parent("annotsRender"),o.eventHandlers=[],o.initPointerDownEvent(),o.mouseEnterAnnots=[],o.initMouseEvent(),Vt.isIOS){var s=function(t){return t.preventDefault()};n.addEventListener("touchstart",s),o.addDestroyHook((function(){n.removeEventListener("touchstart",s)}))}var c=function(){o.isDestroyed||o.annot.isDestroyed||o.getAppPermission().then((function(t){o.updateOnPermissionChange(t)}))},u=o.pdfViewer.eventEmitter;return u.on(Ct.permissionChanged,c),u.on(Ct.globalAnnotFlagChanged,c),o.addDestroyHook((function(){u.off(Ct.permissionChanged,c),u.off(Ct.globalAnnotFlagChanged,c)})),o}O()(e,t);var n=e.prototype;return n.getAppPermission=function(){return this.pdfViewer.getAnnotAuthorityManager().getPermission(this.annot)},n.initMouseEvent=function(){var t=this,e=this.pdfViewer.eventEmitter,n=this.getContainerElement();n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",o),this.addDestroyHook((function(){n.removeEventListener("mouseenter",i),n.removeEventListener("mouseleave",o)}));var r=this;function i(t){r.mouseEnterAnnots=a(t),e.emit(Ct.mouseEnter,Qo.annotation,{annots:r.mouseEnterAnnots,e:t}),r.mouseEnter&&r.mouseEnter(Qo.annotation,{annots:r.mouseEnterAnnots,e:t})}function o(t){e.emit(Ct.mouseLeave,Qo.annotation,{annots:r.mouseEnterAnnots,e:t}),r.mouseLeave&&r.mouseLeave(Qo.annotation,{annots:r.mouseEnterAnnots,e:t})}var a=function(e){var n=t.annotsRender.getAnnotRenders(),r=Object.keys(n).map((function(t){return n[t]})),i=e.clientX,o=e.clientY,a=[];return r.forEach((function(e){if(!t.annotsRender._isFormWidget(e)){var n=e.component.$ui.get(0).getBoundingClientRect();i>=n.left&&i<=n.right&&o>=n.top&&o<=n.bottom&&a.push(e.annot)}})),a}},n.initPointerDownEvent=function(){var t=this,e=this.pdfViewer.getEventEmitter(),n=function(n){if(1===n.which&&!n.isManual){var r=t.parent("pdfPageRender"),i=r.getPDFPointFromClientPoint(n.clientX,n.clientY,!0),o=S()(i,2),a=o[0],s=o[1],c=t.parent();r.getPDFPage().then((function(t){var e=r.scale,n=r.rotate,i=t.getDeviceMatrix();return i.scale(e,e),i.rotate(n),t.getAnnotObjectNumAtDevicePoint([a,s],1,[i.a,i.b,i.c,i.d,i.e,i.f])})).then((function(t){var i=r.getAnnotRender(t);if(i&&i!==c)switch(i.annot.getType()){case"watermark":o(c);break;default:o(i)}else o(c);function o(t){var r=t.component,i=r.shapeControl,o=!!i&&i.isActive;return e.emit(Ct.tapAnnotation,t,n),Promise.resolve(r.tapAnnot(n)).then((function(){o||r.triggerPointerDownOnShapeControl(n)}))}}))}};this.eUi.addEventListener(ca,n),this.eHandler.addEventListener(ca,n),this.addDestroyHook((function(){t.eHandler.removeEventListener(ca,n),t.eUi.removeEventListener(ca,n)}))},n.triggerPointerDownOnShapeControl=function(t){var e,n=this.eHandler.querySelector(".fv__shape-control-move-area");n&&("function"!=typeof PointerEvent?((e=document.createEvent("MouseEvent")).initMouseEvent(ua,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,null),e.pointerId=t.pointerId):e=new PointerEvent("pointerdown",t),e.stopPropagation(),e.isManual=!0,n.dispatchEvent(e),n.dispatchEvent(e))},n.getContainerElement=function(){return this.$ui.get(0)},n.getHandlerElement=function(){return this.$handler.get(0)},n.getModel=function(){return this.annot},n.tapAnnot=function(){var t=this,e=this.getModel().getId();return this.pdfViewer.isMultiSelectActive()&&this.pdfViewer.getAllActivatedElements().find((function(e){return e===t}))&&!$t.isShiftDown?this.annotsRender.unActiveAnnot(e):this.annotsRender.activeAnnot(e)},n.getId=function(){return this.id},n.getIndex=function(){return this.annot.getIndex()},n.setId=function(t){var e=this;return this.annot.setUniqueID(t).then((function(){e.id=t}))},n.isHidden=function(){var t=new Yo(this.annot.getFlags());if(t.checkHidden()||t.checkInvisible())return!0;var e=this.pdfViewer.getAnnotManager().getAnnotFlag(this.annot);return!(!e.checkHidden()&&!e.checkNoView())},n._hideUI=function(){this.$ui[0].classList.add("fv__ui-hide"),this.$handler[0].classList.add("fv__ui-hide")},n._showUI=function(){this.$ui[0].classList.remove("fv__ui-hide"),this.$handler[0].classList.remove("fv__ui-hide")},n.hideUI=function(){return this.isUIVisible()?(this.isActive&&this.annotsRender.unActiveAnnot(this.annot),this.$$isUIVisible=!1,this._hideUI(),Promise.resolve(this.redraw())):Promise.resolve()},n.updateSize=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;if(this.scale=e,this.rotate=n,t=this.annot.getDeviceRect(this.scale,this.rotate),8&this.annot.getFlags()){var r=this.annot.getRect();r.top-r.bottom,r.right-r.left}else t.bottom-t.top,t.right-t.left},n.showUI=function(){var t=this;return this.isUIVisible()?Promise.resolve():(this.$$isUIVisible=!0,this._showUI(),Promise.resolve(this.redraw()).then((function(){t.pdfViewer.getAnnotAuthorityManager().update(t.annot)})))},n.isUIVisible=function(){return this.$$isUIVisible},n.render=function(t,e){this.scale=t,this.rotate=e},n.afterRender=function(){if(!this.isDestroyed){var t=this.annot.getType();Nt.isIE10||"text"===t||"fileattachment"===t||this.$ui.find("canvas").css({width:"inherit",height:"inherit"}),Vt.isDesktop&&(this.pdfViewer.config.showAnnotTooltip&&"widget"!==this.annot.getType()||this.pdfViewer.config.showFormFieldTooltip&&"widget"===this.annot.getType())&&(this.pdfViewer.customs.activeTooltip?this.pdfViewer.customs.activeTooltip(this.pdfViewer,this.annot):this.activeTooltip())}},n.add=function(t,e){return this.render(t,e)},n.redraw=function(){},n.willRedraw=function(){},n.afterRedraw=function(){},n.doActive=function(){var t=this;if(this.bindEvent(),!this.pdfViewer.activationManager.currentActivableIs(this)){var e=this.annot;if(e.isGrouped&&e.isGrouped()){var n=new pt;e.groupElements.forEach((function(e){var r=t.pdfViewer.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;n.add(r)})),this.pdfViewer.activeElement(n)}else this.pdfViewer.activeElement(this)}},n.doDeactive=function(){this.unBindEvent()},n.unActive=function(){t.prototype.unActive.call(this)},n.destroy=function(){this.isActive=!1,this.$ui&&this.$ui.remove(),this.$handler&&this.$handler.remove(),this.unBindEvent(),this.eventHandlers=[],t.prototype.destroy.call(this),this.annot=null,this.component=null,this.docRender=null,this.$ui=null,this.eHandler=null,this.$handler=null,this.$page=null,this.annotsRender=null},n.remove=function(){this.destroy()},n.showContextMenu=function(){},n.enableContextMenu=function(t){this._disabledContextMenu=!t},n.contextMenuIsEnable=function(){return!this._disabledContextMenu},n.zIndexDown=function(){this.$ui.addClass("fv__zindex-down"),this.zIndexDownFlag=!0},n.checkZIndexDown=function(){return!this.zIndexDownFlag},n.zIndexRecover=function(){this.$ui.removeClass("fv__zindex-down"),this.zIndexDownFlag=!1},n.moveTo=function(t,e,n){var r,i=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!o)return this.$ui.css({left:t,top:e}),Promise.resolve(!0);if(a)r={left:t,top:e,action:n};else{var s=this.scale,c=this.rotate,u=this.getPDFPage(),d=this.annot.getDeviceRect(s,c),l=t-d.left,h=e-d.top;if("freetext"!==this.annot.getType()&&Math.abs(l)<1&&Math.abs(h)<1)return Promise.resolve();var f=u.reverseDeviceOffset([l,h],s,c),p=S()(f,2),g=p[0],v=p[1],m=this.annot.getRect();r={left:m.left+g,top:m.top+v,action:n}}return this.annot.moveTo(r).then((function(t){return i.updateRender&&i.updateRender().then((function(){i.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,i)}))}))},n.move=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.annot.getDeviceRect(this.scale,this.rotate);return this.moveTo(r.left+t,r.top+e,n)},n.moved=function(){var t=this.annot.getDeviceRect(this.scale,this.rotate);this.$ui.css({left:t.left+"px",top:t.top+"px"}),this.redraw()},n.movedByOther=function(t){},n.setRectInPDF=function(t,e){var n=this;return this.annot._setRect(t,e).then((function(t){return t?n.updateRender().then((function(){return e&&n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n),t})):t}))},n._setRect=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,r=e.top,i=e.width,o=e.height,a=arguments.length>1?arguments[1]:void 0;i=Math.max(.001,i),o=Math.max(.001,o);var s=this.scale,c=this.rotate,u=this.getPDFPage(),d=u.reverseDeviceRect({left:n,top:r,right:n+i,bottom:r+o},s,c);return this.annot._setRect(d,a).then((function(e){return e?t.updateRender().then((function(){return t.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,t),e})):e}))},n.setRect=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,r=e.top,i=e.width,o=e.height;i=Math.max(.001,i),o=Math.max(.001,o);var a=this.scale,s=this.rotate,c=this.getPDFPage(),u=c.reverseDeviceRect({left:n,top:r,right:n+i,bottom:r+o},a,s);return this.annot.setRect(u).then((function(e){return e?t.updateRender().then((function(){return t.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,t),e})):e}))},n.getRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.getPDFPage(),r=this.annot.getRect();return n.getDeviceRect(r,t,e)},n.getBoundary=function(){var t=this.annot.getDeviceRect(this.scale,this.rotate),e=this.annot.getRect(),n=t.right-t.left,r=t.bottom-t.top;return 8&this.annot.getFlags()&&(n=e.right-e.left,r=e.top-e.bottom),{left:t.left,top:t.top,width:n,height:r}},n.getPosition=function(){var t=this.getPDFPage(),e=this.annot.getRect(),n=t.getDevicePoint([e.left,e.top],this.scale,this.rotate),r=S()(n,2);return{left:r[0],top:r[1]}},n.getDimension=function(){var t=this.getPDFPage(),e=this.annot.getRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{width:n.right-n.left,height:n.bottom-n.top}},n.removeAnnot=function(){var t=this;return this.getAppPermission().then((function(e){if(e.ignorable()&&t.getAnnotFlag().checkLocked())throw new Error("The remove operation was rejected because it is locked!");if(e.isDeletable())return t.doRemoveAnnot()}))},n.doRemoveAnnot=function(){},n.deleteDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;var t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},n.replyDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;var t=this.getAnnotFlag();return t.checkReadOnly()||t.checkLocked()},n.propertyDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;var t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},n.moveDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;var t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},n.readOnlyDisabled=function(){return!(32&this.docRender.getUserPermission().getValue())||this.getAnnotFlag().checkReadOnly()},n.bindEvent=function(){var t=this;this.pdfViewer&&this.pdfViewer.getKeyboard().withContext(Zo.ACTIVATION_ANY,(function(e){t.isDestroyed||(t.__off__delete__event__&&t.__off__delete__event__(),t.__off__delete__event__=e.keyup(Xo.DELETE_SELECTED_OBJECT,(function(e){!1!==t.isActive&&(t.removeAnnot(),e.stopPropagation())}),{interceptors:[ra(),function(e,n){var r=t.pdfViewer.getStore().getCurrentValue(qo.c);if(t.annot){var i=t.annot.getType(),o=!0;"redact"==i&&(o=Object.keys(r).find((function(t){return t.startsWith(i)?r[t]:""._}))),o?n(e):t.pdfViewer.viewerUI.alert("dialog.error.noRedactionLicense")}}]}))}))},n.unBindEvent=function(){this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=Wo.a},n.updateDeleteStatus=function(t){t?++this.deleteStatus:--this.deleteStatus,this.deleteStatus>0?this.unBindEvent():this.bindEvent()},n.getPDFAnnot=function(){return this.annot},n.getPDFPage=function(){return this.getPDFAnnot().getPDFPage()},n.getAnnotFlag=function(){return this.pdfViewer.annotManager.getAnnotFlag(this.annot)},n.groupMoveDisabled=function(){var t=!1;return this.annot&&this.annot.isGrouped&&this.annot.isGrouped()&&this.annot.groupElements.map((function(e){var n=e.getType();"strikeout"!==n&&"highlight"!==n&&"squiggly"!==n&&"underline"!==n||(t=!0)})),t},n.setVisibleRect=function(t){this.visibleRect=t},n.invisibleRender=function(){},n.clearCache=function(){},n.getRenderingData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;if(!this.annot)return null;var n=this.annot.getDeviceRect(t,this.rotate),r=this.getRect(),i=this.annot.page,o=this.pdfViewer.getSmartScale(t);return{annotInfo:this.annot.info,annotFlag:this.getAnnotFlag(),smartScale:o,rect:r,outerDeviceRect:n,innerDeviceRect:this.annot.getInnerRect?this.annot.getDeviceInnerRect(t,e):n,engineRenderingRect:i.getDeviceRect(r,o,e),scale:t,rotate:e,page:this.annot.page}},n.toImageURL=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}},e=this.annot.page,n=this.pdfViewer.getSmartScale(this.scale),r=this.annot.getDeviceRect(1,this.rotate);return e.getAnnotBitmap(this.annot.objectNumber,ut(n),this.rotate,t(r,this,this.scale,this.rotate),!0).then((function(t){var e=t.width,n=t.height,r=t.buffer,i=(t.image,t.type,t.url),o=document.createElement("canvas");o.width=e,o.height=n;var a=o.getContext("2d");if(i)return new Promise((function(t){var e=new Image;e.onload=function(){a.drawImage(e,0,0),t(o.toDataURL())},e.src=i}));var s=new(Uint8ClampedArray||Uint8Array)(r),c=a.createImageData(e,n);return c.data.set(s),a.putImageData(c,0,0),o.toDataURL()}))},n.activeTooltip=function(){var t,e=this,n=this.annot.isGrouped&&this.annot.isGrouped()?this.annot.getGroupHeader():this.annot,r="widget"===this.annot.getType()?this.eHandler:this.eUi,i="",o=0,a=0,s=document.createElement("div");document.getElementsByClassName("fv_viewer-tooltip-container").length>0&&(i=document.getElementsByClassName("fv_viewer-tooltip-container")[0]);var c=function(t){var e=document.documentElement.clientHeight,n=i.getBoundingClientRect().width,r=i.getBoundingClientRect().height,o=t.clientX+10,a=t.clientY+10;return document.documentElement.clientWidth-t.clientX<n+10&&(o-=n+10),e-a<r&&(a=t.clientY-t.layerY-r),{x:o,y:a}},u=function(e){clearTimeout(t),i.classList.remove("tooltip-active"),i.classList.add("tooltip-unactive")},d=function(t){if("widget"===e.annot.getType()){var r=n.getField();if(!r.getAlternateName())return;document.getElementsByClassName("fv_viewer-tooltip-title")[0].innerHTML="",document.getElementsByClassName("fv_viewer-tooltip-content")[0].innerHTML=r.getAlternateName()}else document.getElementsByClassName("fv_viewer-tooltip-title")[0].innerHTML=e.annot.getTitle(),document.getElementsByClassName("fv_viewer-tooltip-content")[0].innerHTML=e.annot.getContent();var o,a;o=c(t).x,a=c(t).y,i.style.left=o+"px",i.style.top=a+"px",i.classList.remove("tooltip-unactive"),i.classList.add("tooltip-active")},l=function(e){var n=e.clientX,r=e.clientY;if(clearTimeout(t),Math.abs(n-o)>2&&Math.abs(r-a)>2)return o=n,a=r,void u();t=setTimeout((function(){o=n,a=r,d(e)}),500)};!function(){if(!(document.getElementsByClassName("fv_viewer-tooltip-container").length>0)){s.classList.add("fv_viewer-tooltip-container"),s.classList.add("tooltip-unactive");var t="";t+='<div class="fv_viewer-tooltip-title"> '+n.getTitle()+"</div>",t+='<div class="fv_viewer-tooltip-content"> '+n.getContent()+"</div>",s.innerHTML=t,document.getElementsByTagName("body")[0].appendChild(s),i=document.getElementsByClassName("fv_viewer-tooltip-container")[0]}}(),r.addEventListener("mousemove",l),r.addEventListener("mouseout",u),this.addDestroyHook((function(){r.removeEventListener("mousemove",l),r.removeEventListener("mouseout",u)}))},n.collaborate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$o.UPDATE_ANNOT;switch(t){case $o.UPDATE_ANNOT:return this.pdfViewer.collaborate(t,{annots:[this.annot.exportToJSON()]})}},n.getPropertyOptions=function(){return{}},n.isFormControl=function(){return!1},n.updateOnPermissionChange=function(t){if(!this.isDestroyed&&Wt.a.isPropertyIntialized(this,"shapeControl")){var e=!1;e=!!this.groupMoveDisabled()||(t.ignorable()?this.moveDisabled():this.moveDisabled()||!t.isAdjustable());var n=this.shapeControl;e?n.disable():n.enable()}},Tt()(e,[{key:"id",get:function(){return this.annot?this.annot.getId():void 0}}]),e}(mt),la=n(26),ha=n.n(la);function fa(t,e,n,r){var i=!1,o=function(t){!i&&co(t,n)&&(i=!0)},a=function(t){i&&co(t,n)&&(i=!1,e(t))},s=function(t){(t instanceof FocusEvent||co(t,n))&&(i=!1)};return t.addEventListener("keydown",o,r),t.addEventListener("keyup",a,r),document.addEventListener("keyup",s),window.addEventListener("blur",s),function(){t.removeEventListener("keydown",o,r),t.removeEventListener("keyup",a,r),document.removeEventListener("keyup",s),window.removeEventListener("blur",s)}}!function(t){t[t.Unknown=0]="Unknown",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.PauseBreak=19]="PauseBreak",t[t.CapsLock=20]="CapsLock",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.LeftArrow=37]="LeftArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.DownArrow=40]="DownArrow",t[t.Insert=45]="Insert",t[t.Delete=46]="Delete",t[t.KEY_0=48]="KEY_0",t[t.KEY_1=49]="KEY_1",t[t.KEY_2=50]="KEY_2",t[t.KEY_3=51]="KEY_3",t[t.KEY_4=52]="KEY_4",t[t.KEY_5=53]="KEY_5",t[t.KEY_6=54]="KEY_6",t[t.KEY_7=55]="KEY_7",t[t.KEY_8=56]="KEY_8",t[t.KEY_9=57]="KEY_9",t[t.KEY_A=65]="KEY_A",t[t.KEY_B=66]="KEY_B",t[t.KEY_C=67]="KEY_C",t[t.KEY_D=68]="KEY_D",t[t.KEY_E=69]="KEY_E",t[t.KEY_F=70]="KEY_F",t[t.KEY_G=71]="KEY_G",t[t.KEY_H=72]="KEY_H",t[t.KEY_I=73]="KEY_I",t[t.KEY_J=74]="KEY_J",t[t.KEY_K=75]="KEY_K",t[t.KEY_L=76]="KEY_L",t[t.KEY_M=77]="KEY_M",t[t.KEY_N=78]="KEY_N",t[t.KEY_O=79]="KEY_O",t[t.KEY_P=80]="KEY_P",t[t.KEY_Q=81]="KEY_Q",t[t.KEY_R=82]="KEY_R",t[t.KEY_S=83]="KEY_S",t[t.KEY_T=84]="KEY_T",t[t.KEY_U=85]="KEY_U",t[t.KEY_V=86]="KEY_V",t[t.KEY_W=87]="KEY_W",t[t.KEY_X=88]="KEY_X",t[t.KEY_Y=89]="KEY_Y",t[t.KEY_Z=90]="KEY_Z",t[t.Meta=91]="Meta",t[t.ContextMenu=93]="ContextMenu",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.F13=124]="F13",t[t.F14=125]="F14",t[t.F15=126]="F15",t[t.F16=127]="F16",t[t.F17=128]="F17",t[t.F18=129]="F18",t[t.F19=130]="F19",t[t.NumLock=144]="NumLock",t[t.ScrollLock=145]="ScrollLock",t[t.US_SEMICOLON=186]="US_SEMICOLON",t[t.US_EQUAL=187]="US_EQUAL",t[t.US_COMMA=188]="US_COMMA",t[t.US_MINUS=189]="US_MINUS",t[t.US_DOT=190]="US_DOT",t[t.US_SLASH=191]="US_SLASH",t[t.US_BACKTICK=192]="US_BACKTICK",t[t.US_OPEN_SQUARE_BRACKET=219]="US_OPEN_SQUARE_BRACKET",t[t.US_BACKSLASH=220]="US_BACKSLASH",t[t.US_CLOSE_SQUARE_BRACKET=221]="US_CLOSE_SQUARE_BRACKET",t[t.US_QUOTE=222]="US_QUOTE",t[t.NUMPAD_0=96]="NUMPAD_0",t[t.NUMPAD_1=97]="NUMPAD_1",t[t.NUMPAD_2=98]="NUMPAD_2",t[t.NUMPAD_3=99]="NUMPAD_3",t[t.NUMPAD_4=100]="NUMPAD_4",t[t.NUMPAD_5=101]="NUMPAD_5",t[t.NUMPAD_6=102]="NUMPAD_6",t[t.NUMPAD_7=103]="NUMPAD_7",t[t.NUMPAD_8=104]="NUMPAD_8",t[t.NUMPAD_9=105]="NUMPAD_9",t[t.NUMPAD_MULTIPLY=106]="NUMPAD_MULTIPLY",t[t.NUMPAD_ADD=107]="NUMPAD_ADD",t[t.NUMPAD_SEPARATOR=108]="NUMPAD_SEPARATOR",t[t.NUMPAD_SUBTRACT=109]="NUMPAD_SUBTRACT",t[t.NUMPAD_DECIMAL=110]="NUMPAD_DECIMAL",t[t.NUMPAD_DIVIDE=111]="NUMPAD_DIVIDE",t[t.KEY_IN_COMPOSITION=112]="KEY_IN_COMPOSITION",t[t.ABNT_C1=113]="ABNT_C1",t[t.ABNT_C2=114]="ABNT_C2"}(aa||(aa={}));var pa=new(function(){function t(){this._keyCodeToStr=[],this._strToKeyCode={}}var e=t.prototype;return e.define=function(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t},e.keyCodeToStr=function(t){return this._keyCodeToStr[t]},e.strToKeyCode=function(t){return this._strToKeyCode[t.toLowerCase()]||aa.Unknown},t}());function ga(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){pa.define(t,e)}))}ga(aa.Unknown,"unknown"),ga(aa.Backspace,"Backspace"),ga(aa.Tab,"Tab"),ga(aa.Enter,"Enter"),ga(aa.Shift,"Shift"),ga(aa.Ctrl,"Ctrl"),ga(aa.Alt,"Alt"),ga(aa.PauseBreak,"PauseBreak"),ga(aa.CapsLock,"CapsLock"),ga(aa.Escape,"Escape"),ga(aa.Space,"Space"),ga(aa.PageUp,"PageUp"),ga(aa.PageDown,"PageDown"),ga(aa.End,"End"),ga(aa.Home,"Home"),ga(aa.LeftArrow,"LeftArrow","Left"),ga(aa.UpArrow,"UpArrow","Up"),ga(aa.RightArrow,"RightArrow","Right"),ga(aa.DownArrow,"DownArrow","Down"),ga(aa.Insert,"Insert"),ga(aa.Delete,"Delete"),ga(aa.KEY_0,"0"),ga(aa.KEY_1,"1"),ga(aa.KEY_2,"2"),ga(aa.KEY_3,"3"),ga(aa.KEY_4,"4"),ga(aa.KEY_5,"5"),ga(aa.KEY_6,"6"),ga(aa.KEY_7,"7"),ga(aa.KEY_8,"8"),ga(aa.KEY_9,"9"),ga(aa.KEY_A,"A"),ga(aa.KEY_B,"B"),ga(aa.KEY_C,"C"),ga(aa.KEY_D,"D"),ga(aa.KEY_E,"E"),ga(aa.KEY_F,"F"),ga(aa.KEY_G,"G"),ga(aa.KEY_H,"H"),ga(aa.KEY_I,"I"),ga(aa.KEY_J,"J"),ga(aa.KEY_K,"K"),ga(aa.KEY_L,"L"),ga(aa.KEY_M,"M"),ga(aa.KEY_N,"N"),ga(aa.KEY_O,"O"),ga(aa.KEY_P,"P"),ga(aa.KEY_Q,"Q"),ga(aa.KEY_R,"R"),ga(aa.KEY_S,"S"),ga(aa.KEY_T,"T"),ga(aa.KEY_U,"U"),ga(aa.KEY_V,"V"),ga(aa.KEY_W,"W"),ga(aa.KEY_X,"X"),ga(aa.KEY_Y,"Y"),ga(aa.KEY_Z,"Z"),ga(aa.Meta,"Meta"),ga(aa.ContextMenu,"ContextMenu"),ga(aa.F1,"F1"),ga(aa.F2,"F2"),ga(aa.F3,"F3"),ga(aa.F4,"F4"),ga(aa.F5,"F5"),ga(aa.F6,"F6"),ga(aa.F7,"F7"),ga(aa.F8,"F8"),ga(aa.F9,"F9"),ga(aa.F10,"F10"),ga(aa.F11,"F11"),ga(aa.F12,"F12"),ga(aa.F13,"F13"),ga(aa.F14,"F14"),ga(aa.F15,"F15"),ga(aa.F16,"F16"),ga(aa.F17,"F17"),ga(aa.F18,"F18"),ga(aa.F19,"F19"),ga(aa.NumLock,"NumLock"),ga(aa.ScrollLock,"ScrollLock"),ga(aa.US_SEMICOLON,";",";","OEM_1"),ga(aa.US_EQUAL,"=","=","OEM_PLUS"),ga(aa.US_COMMA,",",",","OEM_COMMA"),ga(aa.US_MINUS,"-","-","OEM_MINUS"),ga(aa.US_DOT,".",".","OEM_PERIOD"),ga(aa.US_SLASH,"/","/","OEM_2"),ga(aa.US_BACKTICK,"`","`","OEM_3"),ga(aa.ABNT_C1,"ABNT_C1"),ga(aa.ABNT_C2,"ABNT_C2"),ga(aa.US_OPEN_SQUARE_BRACKET,"[","[","OEM_4"),ga(aa.US_BACKSLASH,"\\","\\","OEM_5"),ga(aa.US_CLOSE_SQUARE_BRACKET,"]","]","OEM_6"),ga(aa.US_QUOTE,"'","'","OEM_7"),ga(aa.NUMPAD_0,"NumPad0"),ga(aa.NUMPAD_1,"NumPad1"),ga(aa.NUMPAD_2,"NumPad2"),ga(aa.NUMPAD_3,"NumPad3"),ga(aa.NUMPAD_4,"NumPad4"),ga(aa.NUMPAD_5,"NumPad5"),ga(aa.NUMPAD_6,"NumPad6"),ga(aa.NUMPAD_7,"NumPad7"),ga(aa.NUMPAD_8,"NumPad8"),ga(aa.NUMPAD_9,"NumPad9"),ga(aa.NUMPAD_MULTIPLY,"NumPad_Multiply"),ga(aa.NUMPAD_ADD,"NumPad_Add"),ga(aa.NUMPAD_SEPARATOR,"NumPad_Separator"),ga(aa.NUMPAD_SUBTRACT,"NumPad_Subtract"),ga(aa.NUMPAD_DECIMAL,"NumPad_Decimal"),ga(aa.NUMPAD_DIVIDE,"NumPad_Divide");var va=function(){function t(t,e,n,r,i){this.ctrlKey=t,this.shiftKey=e,this.altKey=n,this.metaKey=r,this.keyCode=i}t.from=function(e){var n=function(t){t=t.trim().toLowerCase();var e,n=!1,r=!1,i=!1,o=!1;do{e=!1,/^ctrl[\+\-]/.test(t)&&(n=!0,t=t.substring("ctrl-".length),e=!0),/^shift[\+\-]/.test(t)&&(r=!0,t=t.substring("shift-".length),e=!0),/^alt[\+\-]/.test(t)&&(i=!0,t=t.substring("alt-".length),e=!0),/^meta[\+\-]/.test(t)&&(o=!0,t=t.substring("meta-".length),e=!0),/^win[\+\-]/.test(t)&&(o=!0,t=t.substring("win-".length),e=!0),/^cmd[\+\-]/.test(t)&&(o=!0,t=t.substring("cmd-".length),e=!0),/^mod[\+\-]/.test(t)&&(Vt.isMac?o=!0:n=!0,t=t.substring("mod-".length),e=!0)}while(e);return{ctrl:n,shift:r,alt:i,meta:o,key:t}}(e),r=function(t){return pa.strToKeyCode(t)}(n.key);if(r===aa.Unknown)throw new Error('Incorrect shortcut: "'.concat(e,'", "').concat(n.key,'" is not valid'));return new t(n.ctrl,n.shift,n.alt,n.meta,r)};var e=t.prototype;return e.equals=function(e){return e instanceof t&&(this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode)},e.isError=function(){return this.keyCode===aa.Unknown},e.toString=function(){var t,e=[];return this.ctrlKey&&e.push("Ctrl"),this.shiftKey&&e.push("Shift"),this.altKey&&e.push("Alt"),this.metaKey&&e.push("Meta"),e.join("+")+(e.length>0?"+":"")+(t=this.keyCode,pa.keyCodeToStr(t))},e.match=function(t){return this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode},t}();var ma,ya=[va.from("Mod+V"),va.from("Mod+A"),va.from("Mod+S"),va.from("Mod+Shift+S"),va.from("Mod+P"),va.from("Mod+F")];va.from("Mod+A"),va.from("Mod+Z"),va.from("Mod+Y"),va.from("Delete"),va.from("Backspace"),va.from("Mod+Delete"),va.from("Mod+Backspace");!function(t){t.SHARED_SINGLETON="SHARED-SINGLETON",t.SINGLETON="SINGLETON",t.PROTOTYPE="PROTOTYPE"}(ma||(ma={}));var wa=function(){function t(){}t.scope=function(){return ma.SINGLETON};var e=t.prototype;return e.pressEnter=function(t){if(t&&t instanceof Pa)switch(t.getPDFAnnot().getField().getType()){case Ln.ComboBox:return this.pressEnterOnComboBox(t);case Ln.ListBox:break;case Ln.CheckBox:case Ln.PushButton:case Ln.RadioButton:return this.pressEnterOnPushButton(t);case Ln.Sign:return this.pressEnterOnSignature(t);case Ln.Text:return this.pressEnterOnText(t);case Ln.Unknown:return}},e.pressEnterOnText=function(t){var e=t.getPDFAnnot().getField(),n=t.formRender;Nn.isMultiline(e.getFlags())||Promise.resolve(n.blurControl(!0)).finally((function(){t.parent("pdfPageRender").$ui.get(0).focus({preventScroll:!0})}))},e.pressEnterOnSignature=function(t){var e=t.pdfViewer,n=t.getPDFAnnot();e.eventEmitter.emit(Ct.signatureFieldMouseLButtonUp,n)},e.pressEnterOnComboBox=function(t){t.isActive?t.formRender.blurControl():t.getPDFAnnot().updateUI({type:"focus"})},e.pressEnterOnPushButton=function(t){t.handleEvent(Zi.AnnotMouseButtonReleased,{button:0})},t}(),ba=document.createElement("div");ba.classList.add("fv__ui-form-foreground");var Aa,Pa=function(t){function e(e,n,r,i){var o;(o=t.call(this,e,n,r,i)||this).$input=null,o.$border=null,o.scale=1,o.rotate=0,r=o.$handler,o.name="pdfControlRender",n.classList.add("fv__pdf-form-control-container"),o.formRender=o.parent("pdfDocRender").getFormRender();var a=e.getField(),s=o.$foreground=B()(ba.cloneNode());if(!a)return F()(o);var c=!o.checkInvisible()&&o.pdfViewer.highlightControlsUI()?"block":"none",u="";!o.checkReadOnly()&&1!=a.getType()||7===a.getType()||(c="none",u+="form-field-readonly"),a&&Nn.isRequired(a.getFlags())&&s.addClass("required"),s.addClass(u).css({display:c,position:"absolute",width:"100%",height:"100%",left:0,top:0}),o.normalBackgroundColorHandler(),r.addClass("fv__pdf-form-control-handler-container").append(s).attr("fieldName",a&&a.getName()).attr("tabindex","-1"),e.getMKProperty("fillColor")||(7===e.info.fieldType?r.css("mix-blend-mode","multiply"):r.css("background-blend-mode","multiply")),e.setRenderNotifier((function(t){return o.updateUI(t)})),o.checkInvisible()&&r.hide(),o.bindControlEvent();var d=o.pdfViewer.i18n;ha.a.i18n=function(t){return d.t(t)};var l=function(t,n){if(e.getPDFPage()===t){var r=e.getId(),i=n.find((function(t){return t.info.id===r}));if(i&&i!==e){var a=e.render;i.setRenderNotifier(a),o.annot=i}}};"select-annotation"===o.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()&&s.hide();var h=function(){o.updateOnPermissionChange()};return o.pdfViewer.eventEmitter.on(Ct.annotationLoaded,l),o.pdfViewer.eventEmitter.on(Ct.permissionChanged,h),o.addDestroyHook((function(){o.pdfViewer.eventEmitter.off(Ct.annotationLoaded,l),o.pdfViewer.eventEmitter.off(Ct.permissionChanged,h)})),fa(r.get(0),(function(){o.pdfViewer.getIoC().getInstanceByClass(wa).pressEnter(F()(o))}),va.from("Enter")),o}O()(e,t);var n=e.prototype;return n.updateOnPermissionChange=function(){var t=this.$foreground;if(t){var e=this.checkReadOnly();if(t.toggleClass("form-field-readonly",e),!e)"select-annotation"===this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()?t.hide():(this.formRender.runtimeHighlight,t.show())}},n.initPointerDownEvent=function(){},n.updateSize=function(){arguments.length>0&&void 0!==arguments[0]||this.scale,arguments.length>1&&void 0!==arguments[1]||this.rotate},n.shapeControlOnStart=function(){this.pdfViewer.config.highPerformance&&(this.editAreaDebouncePromise=new It(10))},n.shapeControlOnUpdate=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editAreaDebouncePromise.exec((function(){return n.setRect(t)})),this.$selectedContainer.add(this.$handler).add(this.$handler.find(".fv__tiles-col")).css(t)},n.shapeControlOnMoving=function(t,e){this.$selectedContainer.add(this.$handler).add(this.$handler.find(".fv__tiles-col")).css(t)},n.shapeControlOnEnd=function(t,e){var n=this;return(this.pdfViewer.config.highPerformance?this.editAreaDebouncePromise.waitForLastTask():Promise.resolve()).then((function(){return n.setRect(t).then((function(){return n.render(n.scale,n.rotate,!0)}))}))},n.updateRender=function(){return Promise.resolve()},n.generateUI=function(){},n._hideUI=function(){this.$ui.hide()},n._showUI=function(){this.$ui.show()},n.destroy=function(){this.$handler.off("mouseenter mouseleave mousedown focus blur"),this.addListenAnnotMouseEvent&&this.addListenAnnotMouseEvent(),this.rectHammer&&this.rectHammer.destroy(),this.$foreground.remove(),this.$foreground=null,this.annot.setRenderNotifier(null),this.formRender=null,t.prototype.destroy.call(this),this.tileCanvas=null},n.bindControlEvent=function(){var t,e=this,n=this.$handler,r=this;n.on("mouseenter",(function(t){return e.handleEvent(Zi.AnnotCursorEnter,t)})).on("mouseleave",(function(t){return e.handleEvent(Zi.AnnotCursorExit,t)})).on("mousedown",function(){var n=D()(N.a.mark((function n(i){var o;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.button){n.next=2;break}return n.abrupt("return");case 2:return jt(i.target)||i.preventDefault(),o=r.pdfViewer.getCurrentPDFDoc(),n.next=6,o.readonly();case 6:if(!n.sent){n.next=9;break}return n.abrupt("return");case 9:return i&&i.stopPropagation(),t=i,n.abrupt("return",e.handleEvent(Zi.AnnotMouseButtonPressed,i));case 12:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).on("focus",(function(t){if(B()(t.target).hasClass("fv__pdf-form-control-handler-container"))return e.annot.updateUI&&e.annot.updateUI({type:"focus"}),void e.pdfViewer.eventEmitter.emit("tab-active",e.annot);e.handleEvent(Zi.AnnotReceiveInputFocus,t)})).on("blur",(function(t){B()(t.target).hasClass("fv__pdf-form-control-handler-container")||e.handleEvent(Zi.AnnotLoseInputFocus,t)})).on("contextmenu",(function(t){e.checkReadOnly()?t.preventDefault():e.handleEvent("contextmenu",t)})).on("click",(function(t){e.pdfViewer.eventEmitter.emit("tap-field",e.annot)})).on("mouseenter",(function(t){return e.handleEvent(Zi.AnnotCursorEnter,t)})),this.addListenAnnotMouseEvent=this.pdfViewer.addListenAnnotMouseEvent(function(){var n=D()(N.a.mark((function n(r){var i;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=9;break}n.next=8;break;case 5:if(!n.sent){n.next=8;break}return n.abrupt("return");case 8:i=e.handleEvent(Zi.AnnotMouseButtonReleased,r);case 9:return t=null,n.abrupt("return",i);case 11:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},n.getTileConfig=function(t,e){var n=this.pdfViewer,r=n.getSmartScale(t),i=n.config.tileSize,o=this.annot,a=o.getDeviceRect(1,e),s=o.getDeviceRect(r,e),c=s.right-s.left,u=s.bottom-s.top;return[Math.ceil(u/i),Math.ceil(c/i),c,u,i,r,t,e,a.left,a.top,s]},n.updateForgroundAndHandler=function(t,e){var n=this.annot.getDeviceRect(t,e),r={width:n.right-n.left+.5|0,height:n.bottom-n.top+.5|0,left:n.left,top:n.top};return this.$handler.addClass("active").css(r),r},n.render=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n||r||(n=this.annotsRender.scale,r=this.annotsRender.rotate),t.prototype.render.call(this,n,r,i);var o=this.annot;if(this.checkInvisible()||o.isEmpty()||o.isDeleted()||o.rectIsEmpty()||!o.getField())return this.checkInvisible()&&this.$handler.hide(),Promise.resolve();this.checkInvisible()||this.$handler.show(),this.updateForgroundAndHandler(n,r);var a=this.getTileConfig(n,r),s=this.tileCanvas;return s||(s=this.tileCanvas=new Gr((function(t,e,n,r,i,a,s,c,u){return o.getPDFPage().getAnnotBitmap(o.getId(),ut(a),u,{x:s*a+e*i,y:c*a+t*i,width:n,height:r},!0)}),this.$handler)),i&&s.clearCache(),(e=s).redraw.apply(e,E()(a))},n.doubleTapAnnot=function(){},n.checkReadOnly=function(){var t=this.annot.getField();if(!t)return!0;if(7==t.getType()&&t.isSigned())return!1;var e=!1;return this.formRender.isReadOnly()&&(e=!0),(this.getAnnotFlag().checkReadOnly()||Nn.isReadOnly(t.getFlags()))&&(e=!0),e},n.checkReadOnlyByEsignCN=function(){var t=this.annot.getField();if(!t)return!1;var e=t.getType();if(6!==e&&7!==e)return!1;var n=this.pdfViewer.esignChinaFlowSignData;if(!n||!n.all||n.all.length<1)return!1;var r=this.annot.getId(),i=n.all.some((function(t){if(r===t.id)return!0}));return i&&n.mine&&n.mine.length>0&&(i=!(i=n.mine.some((function(t){if(r===t.id)return!0})))),i},n.checkSignCNList=function(){var t=this.annot.getField();if(!t)return!1;if(7!==t.getType())return!1;var e=this.pdfViewer.esignChinaFlowSignData;if(!e||!e.all||e.all.length<1)return!1;var n=this.annot.getId();return e.all.some((function(t){if(n===t.id&&2!==t.fieldStatus)return!0}))},n.getSignCNItem=function(){var t=this.annot.getField();if(!t)return!1;var e=t.getType();if(6!==e&&7!==e)return!1;var n=this.pdfViewer.esignChinaFlowSignData;if(!n||!n.all||n.all.length<1)return!1;var r,i,o=this.annot.getId();return!!n.all.some((function(t){if(o===t.id&&2!==t.fieldStatus)return r=t.company.length>0?"[企]":"",r+=t.userName,i=t.color,!0}))&&{userName:r,color:i}},n.checkInvisibleByEsignCN=function(){return!1},n.checkInvisible=function(){var t=this.getAnnotFlag();return!(!t.checkHidden()&&!t.checkNoView())},n.handleEvent=function(t,e){var n=this.annot.getField();if(0==e.button&&this.checkReadOnly())return t!=Zi.AnnotMouseButtonReleased&&t!=Zi.AnnotReceiveInputFocus||this.formRender.blurControl(),!0;if(0==e.button){switch(t){case Zi.AnnotMouseButtonPressed:this.formRender.focusControl(this);break;case Zi.AnnotMouseButtonReleased:2!=n.getType()&&3!=n.getType()||(this.annot.switchAS(),this.formRender.calculate(n));var r=this.annot,i=this.formRender;setTimeout((function(){var t=r.getAction();i.execAction("Field",t,n,n)}),0)}this.performAction(t)}},n.updateUI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t.type,n=t.value,r=this.annot.getField(),i=this.$handler,o=this.$foreground,a=this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName();switch(e){case"readonly":n?(i.css("z-index",27),o.hide().addClass("form-field-readonly")):!this.pdfViewer.highlightControlsUI()||"select-annotation"===a||1==r.getType()||this.checkReadOnly()||this.checkInvisible()||(o.show().removeClass("form-field-readonly"),i.css("z-index",29));break;case"required":var s=n?this.pdfViewer._runtimeColorOpacityRequired:this.pdfViewer._runtimeColorOpacity,c=n?this.pdfViewer._runtimeColorRequired:this.pdfViewer._runtimeColor,u=this.pdfViewer.getDisplayHighlightColor(c,s);n?o.addClass("required"):o.removeClass("required"),o.css({"background-color":u});break;case"hidden":if(n){if(i.hide(),6==r.getType())return;return void(this.$input&&this.$input.css("visibility","hidden"))}if(!this.pdfViewer.highlightControlsUI()||"select-annotation"===a||1==r.getType()||this.checkReadOnly()||this.checkInvisible()||o.show().removeClass("form-field-readonly"),i.show(),6==r.getType())return;this.$input&&this.$input.css("visibility","visible");var d=i.get(0).getBoundingClientRect(),l=d.width*d.height;if(!l&&l>0)return;break;case"focus":this.formRender.focusControl(this);break;case"display":var h=this.annot.getFlags();if(2&h||32&h)return void i.hide();!this.pdfViewer.highlightControlsUI()||"select-annotation"===a||1==r.getType()||this.checkReadOnly()||this.checkInvisible()||o.show().removeClass("form-field-readonly"),i.show();var f=i.get(0).getBoundingClientRect(),p=f.width*f.height;if(!p&&p>0)return;break;case"textColor":if(!this.$input)break;var g=this.$input.find("input[type=text]");g||(g=this.$input.find("textarea")),g.css("color",xn(n));break;case"textSize":if(!this.$input)break;var v=this.$input.find("input[type=text]");v||(v=this.$input.find("textarea")),n?v.css("font-size",2*n+"px"):this.autoFontSize(0);break;case"fillColor":n?this.$handler.css("background-blend-mode","unset"):this.$handler.css("background-blend-mode","multiply");break;case"orientation":if(!this.$input)break;var m=this.$input.find("input[type=text]");m||(m=this.$input.find("textarea"));var y=90*(n||0);m.css("transform","rotate("+y+"deg)"),this.updateSize(this.scale,this.rotate,!0);break;case"rename":return void this.render(this.scale,this.rotate,!0)}this.updateUIMore({type:e,value:n})},n.updateUIMore=function(t){t.type,t.value;this.render(this.scale,this.rotate,!0)},n.focus=function(){var t=this;this.hasFocus=!0;var e=this.annot.getField();setTimeout((function(){e&&e.doc&&(t.$foreground.hide(),4!==e.getType()&&t.$handler.addClass("fv__control_focus"))}),50);var n=this.annot.getAdditionalAction(Zi.AnnotReceiveInputFocus);try{return n&&this.formRender.execAction("Field",n,null,e)}finally{this.pdfViewer.eventEmitter.emit(Ct.focusInObject,this)}},n.blur=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hasFocus=!1;var e=this.annot.getField();if(1!=e.getType()&&!this.checkReadOnly()&&this.pdfViewer.highlightControlsUI()){var n=this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName();"select-annotation"===n?this.$foreground.hide():this.$foreground.show()}4!==e.getType()&&this.$handler.removeClass("fv__control_focus");var r=this.annot.getAdditionalAction(Zi.AnnotLoseInputFocus);try{return r&&this.formRender.execAction("Field",r,null,e,"Blur")}finally{this.pdfViewer.eventEmitter.emit(Ct.blurFromObject,this,t)}},n.performAction=function(t,e){this.formRender&&this.formRender.execAction("Field",this.annot.getAdditionalAction(t),null,this.annot.getField(),t,e)},n.autoFontSize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.annot){var n=this.$textInput||this.$input,r=this.annot.getField();if(r){t||(t=r.getValue());var i=this.annot.getDefaultAppearance(),o=i?i.textSize:0,a=4*o/3*this.scale;if(!a&&!Nn.isMultiline(r.getFlags())){a=.7*n.outerHeight();var s=B()(".fwr-font-auto");0==s.length&&(s=B()('<div class="fwr-font-auto" style="position: absolute;top:0;width: fit-content;opacity: 0;"></div>')).appendTo(this.pdfViewer.$ui),s.css("font-size",a+"px").text(t);for(var c=s.outerHeight(),u=n.parent().height();c>u&&a>11;)a--,s.css("font-size",a+"px"),c=s.outerHeight();for(var d=s.outerWidth(),l=n.parent().width();d>l-e&&a>11;)a--,s.css("font-size",a+"px"),d=s.outerWidth();n.css("font-size",a+"px")}}}},n.bindKeyboardEvent=function(){var t=this;this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=this.pdfViewer&&this.pdfViewer.getKeyboardEventBinder(Ho).on("delete-annotation",(function(e){t.removeAnnot()})),this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=this.pdfViewer&&this.pdfViewer.getKeyboardEventBinder(Ho).on("unactive-annotation",(function(e){t.unActiveEditing()})),this._undoSwitchKbBinder&&this._undoSwitchKbBinder(),this._undoSwitchKbBinder=this.pdfViewer.switchKeyboardEventBinder(Ho)},n.unBindKeyboardEvent=function(){this._undoSwitchKbBinder&&this._undoSwitchKbBinder(),this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=Wo.a,this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=Wo.a},n.removeAnnot=function(){var t=this;return this.deleteDisabled()?Promise.resolve():(this.hideFormPropertiesDialog&&this.hideFormPropertiesDialog(),this.unBindKeyboardEvent(),this.pdfViewer.getPDFDocRender().getPDFDoc().loadPDFForm().then((function(e){return e.removeControl(t.annot.getField().getName(),t.annot.getObjNum()).then((function(t){return t}))})))},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.normalBackgroundColorHandler=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)this.$foreground.css({"background-color":"unset"});else{var e=this.annot.getField(),n=this.pdfViewer.getDisplayHighlightColor(this.pdfViewer._runtimeColor,this.pdfViewer._runtimeColorOpacity);e&&Nn.isRequired(e.getFlags())&&(n=this.pdfViewer.getDisplayHighlightColor(this.pdfViewer._runtimeColorRequired,this.pdfViewer._runtimeColorOpacityRequired)),this.$foreground.css({"background-color":n})}},n.isFormControl=function(){return!0},e}(da),Ea=n(36);!function(t){t[t.FROM_NEXT=0]="FROM_NEXT",t[t.FROM_PREV=1]="FROM_PREV"}(Aa||(Aa={}));var xa={"aria-hidden":"true",style:"position: fixed;top: 50%;left:50%;width:0;height:0;opacity: 0;pointer-events:none",tabindex:0},Sa=Ea.a.getLogger("AnnotTabManager"),Ca=function(t){function e(e){var n;for(var r in(n=t.call(this)||this).pageRender=e,n.index=-1,n.jumpPrevElement=document.createElement("div"),n.jumpNextElement=document.createElement("div"),n.taskExecutor=new kt,Wt.a.property(F()(n),"currentOrderedAnnotComponents",(function(){return n.updateAnnots()})),xa)n.jumpNextElement.setAttribute(r,xa[r]),n.jumpPrevElement.setAttribute(r,xa[r]);var i=function(t){n.currentFocusOnAnnotComponent&&t.preventDefault()};return n.addDOMEvent(n.pageRender.$element.get(0),"keydown",(function(t){if(!Ut(t.target)){var e,r=lo.ArrowLeft,i=lo.ArrowRight,o=lo.ArrowDown,a=lo.ArrowUp,s=lo.or;if(co(t,s(r,a)))e=Aa.FROM_PREV;else{if(!co(t,s(i,o)))return;e=Aa.FROM_NEXT}var c=n.currentFocusOnAnnotComponent;if(c&&c instanceof Pa){var u=c.annot.getField(),d=u.controls;if(!(d.length<2)){var l=d.map((function(t){return t.widget}));n.taskExecutor.exec((function(){var t=l.map((function(t){return t.page.getIndex()})).filter((function(t,e,n){return n.indexOf(t)===e})),r=n.pageRender.pagesRender;return Promise.all(t.map((function(t){return r.getPDFPageRender(t).tabManager.currentOrderedAnnotComponents}))).then((function(t){var e;return(e=[]).concat.apply(e,E()(t)).filter((function(t){return l.indexOf(t.annot)>-1})).map((function(t){return t.annot}))})).then((function(t){var n=t.indexOf(c.annot);if(-1!=n){var i=t[((e===Aa.FROM_NEXT?n+1:n-1)+t.length)%t.length];r.getPDFPageRender(i.page.getIndex()).getAnnotRender(i.getObjectNumber()).component.$handler.focus()}else Sa.warn("Unknown error occurred while switching the focus to another widget of same group",c,u)}))})),t.stopPropagation(),t.preventDefault()}}}}),!0),n.addDOMEvent(n.jumpPrevElement,"focus",(function(){n.currentFocusOnAnnotComponent?n.jumpToPrev():n.jumpToNext()})),n.addDOMEvent(n.jumpPrevElement,"keydown",i),n.addDOMEvent(n.jumpNextElement,"focus",(function(){n.jumpToNext()})),n.addDOMEvent(n.jumpNextElement,"keydown",i),n.addViewerEvent(Ct.blurFromObject,(function(t,e){e||setTimeout((function(){n.taskExecutor.exec((function(){t===n.currentFocusOnAnnotComponent&&(n.currentFocusOnAnnotComponent=void 0,n.index=-1)}))}))})),n.addViewerEvent(Ct.focusInObject,(function(t){n.isDestroyed||t.parent("pdfPageRender")===n.pageRender&&n.taskExecutor.exec((function(){if(t!==n.currentFocusOnAnnotComponent)return n.currentFocusOnAnnotComponent=t,n.currentOrderedAnnotComponents.then((function(e){n.index=e.indexOf(t)}))}))})),n.addViewerEvent(Ct.activeAnnotation,(function(t){var e=t.component;e!==n.currentFocusOnAnnotComponent&&e.getPDFPage().getIndex()===n.pageRender.index&&n.taskExecutor.exec((function(){return n.currentOrderedAnnotComponents.then((function(t){var r=t.indexOf(e);-1!==r&&(n.currentFocusOnAnnotComponent=e,n.index=r)}))}))})),n.addViewerEvent(St.docModified,(function(){Wt.a.reset(F()(n),"currentOrderedAnnotComponents")})),n.addDestroyHook((function(){n.taskExecutor.cancel()})),n}O()(e,t);var n=e.prototype;return n.addDOMEvent=function(t,e,n,r){t.addEventListener(e,n,r),this.addDestroyHook((function(){t.removeEventListener(e,n,r)}))},n.addViewerEvent=function(t,e){var n=this.pageRender.pdfViewer.eventEmitter;n.on(t,e),this.addDestroyHook((function(){n.off(t,e)}))},n.updateAnnots=function(){var t=this,e=this.pageRender;return(e.annotsRender?e.getPDFPage():e.render().then((function(){return e.getPDFPage()}))).then((function(e){return e.getAnnotIdArrayByOrder().then((function(t){return e.getAnnotsByObjectNumArray(t)})).then((function(e){return e.filter((function(t){return t instanceof _i&&(t.getField().getFlags()&Nn.ReadOnly)!=Nn.ReadOnly})).map((function(e){var n=t.pageRender.getAnnotRender(e.getObjectNumber());return n&&n.component}))}))}))},n.jumpToNext=function(){var t=this;this.taskExecutor.exec((function(){return t.currentOrderedAnnotComponents.then((function(e){var n=e.length;if(!(n<1)){var r,i=t.pageRender.index,o=t.pageRender.docRender;if(t.currentFocusOnAnnotComponent){if(!(r=e[t.index+1])){var a=o.getPDFPageRender(i+1);if(a)return t.jumpToPage(a.index,Aa.FROM_PREV);var s=Aa.FROM_NEXT;return 0===i&&(s=Aa.FROM_PREV),t.jumpToPage(0,s)}}else r=e[t.index>-1?t.index%n:0];r&&r.$handler.focus()}}))}))},n.jumpToPrev=function(){var t=this;this.taskExecutor.exec((function(){return t.currentOrderedAnnotComponents.then((function(e){var n=e.length;if(!(n<1)){var r,i=t.pageRender.index,o=t.pageRender.docRender;if(t.currentFocusOnAnnotComponent){if(!(r=e[t.index-1])){var a=o.getPDFPageRender(i-1);if(a)return t.jumpToPage(a.index,Aa.FROM_NEXT);var s=o.getPDFDoc().getPageCount()-1,c=Aa.FROM_PREV;return i===s&&(c=Aa.FROM_NEXT),t.jumpToPage(s,c)}}else r=e[t.index<=0?n-1:t.index-1];r&&r.$handler.focus()}}))}))},n.jumpFromPrevPage=function(){return this.currentOrderedAnnotComponents.then((function(t){t[0]&&t[0].$handler.focus()}))},n.jumpFromNextPage=function(){return this.currentOrderedAnnotComponents.then((function(t){var e=t[t.length-1];e&&e.$handler.focus()}))},n.jumpToPage=function(t,e){var n=this.pageRender.docRender,r=n.getPDFPageRender(t);n.goToPage(t).then((function(){return e===Aa.FROM_NEXT?r.tabManager.jumpFromNextPage():r.tabManager.jumpFromPrevPage()}))},n.render=function(){this.pageRender.$ui.prepend(this.jumpPrevElement),this.pageRender.$element.append(this.jumpNextElement)},e}(vt.a);function Da(t,e){var n=[],r=getComputedStyle(t);if("string"==typeof e){var i={};e.split(/;[\r\n\s]*/).forEach((function(t){var e=t.split(/\s*:\s*/),n=S()(e,2),r=n[0],o=n[1];i[r]=o})),e=i}for(var o in e)r[o]!==e[o]&&n.push("".concat(o,":").concat(e[o]));n.length>0&&(t.style.cssText+=n.join(";"))}var Ia,Ra=function(){},Ta=Math.min,_a=Math.max,ka=function(t){function e(n,r,i,o){var a;(a=t.call(this,o)||this).isRendered=!1,a.renderedDefered=z(),a.name=e.getDefaultName(),a.$ui=n,a.$element=n.parent(),a.index=r,a.renderCount=0,n.attr("data-index",r),a.pagesRender=o,a.docRender=o.docRender,a.viewerRender=a.docRender.viewerRender,a.unObserveIntersectionObserver=a.docRender.intersectionObserver.observe(a.$ui.get(0),(function(t,e){a.docRender._updateVisiblePageIndex(a.index,e)}));var s=n[0];a.$rendering=B()(s.querySelector(".fv__pdf-page-rendering")),a.$container=B()(s.querySelector(".fv__pdf-page-container")),a.$container[0].setAttribute("data-index",r),a.$annotsContainer=B()(s.querySelector(".fv__pdf-page-annots-container")),a.$customsContainer=B()(s.querySelector(".fv__pdf-page-customs-container"));var c=a.$handler=B()(s.querySelector(".fv__pdf-page-handler-container"));a.$invisible=B()(s.querySelector(".fv__pdf-invisible-page-container")),a.pageHandler=new ti(c,F()(a)),a.doc=i,a.scale=1,a.rotate=o.rotate;var u=a.pdfViewer.customs||{};return a.pdfPageRendering=new(u.PDFPageRendering||lt)(a.$rendering[0],F()(a)),a.pageCustomRender=new(u.PageCustomRender||ht)(s.querySelector(".fv__pdf-custom-page-container"),F()(a)),a.renderFlags=7,a.renderingDeferreds=[],a.followRenderDeferreds=[],a.watermarkConfig=null,a.excluedHighlights=[],a.annotsRenderDeferred=z(),a.$element.attr({tabindex:"-1"}),a.$ui.addClass("fv__pdf-page-not-rendered"),Wt.a.property(F()(a),"tabManager",(function(){var t=new Ca(F()(a));return a.addDestroyHook(t),t})),a}O()(e,t),e.getDefaultName=function(){return"pdfPageRender"};var n=e.prototype;return n.getHandlerDOM=function(){return this.$handler.get(0)},n.clearCanvasCache=function(t){this.pageContentTiles&&this.pageContentTiles.invisibleRender(t)},n.updateRenderFlags=function(t){this.renderFlags=this.renderFlags|t},n.updateRenderFlagsByScaleAndRotate=function(t,e){t!==this.scale||e!==this.rotate?this.updateRenderFlags(7):this.updateRenderFlags(0)},n.checkRenderLayoutFlags=function(){return 4==(4&this.renderFlags)},n.resetRenderLayoutFlags=function(){this.renderFlags&=-5},n.checkRenderContainerFlags=function(){return this.checkRenderContentFlags()||this.checkRenderAnnotFlags()||this.checkRebuildAnnotFlags()},n.checkRenderContentFlags=function(){return 2==(2&this.renderFlags)},n.resetRenderContentFlags=function(){this.renderFlags&=-3},n.checkRenderAnnotFlags=function(){return 1==(1&this.renderFlags)},n.resetRenderAnnotFlags=function(){this.renderFlags&=-2,this.resetRebuildAnnotFlags()},n.checkRenderCustomFlags=function(){return 16==(16&this.renderFlags)},n.resetRenderCustomFlags=function(){this.renderFlags&=-17,this.resetRebuildCustomFlags()},n.checkRebuildAnnotFlags=function(){return 8==(8&this.renderFlags)},n.resetRebuildAnnotFlags=function(){this.renderFlags&=-9},n.checkRebuildCustomFlags=function(){return 32==(32&this.renderFlags)},n.resetRebuildCustomFlags=function(){this.renderFlags&=-33},n.setStateHandler=function(t){if(this.stateHandler){if(this.stateHandler.constructor.getStateName()===t.getStateName())return;this.stateHandler.destroyPageHandler()}(this.stateHandler=new t(this.pdfViewer)).pageHandler(this)},n.updateIndex=function(t){this.index!==t&&(this.index=t,this.$ui.attr("data-index",t),this.$container.attr("data-index",t))},n.getPDFPage=function(){var t=this;return this.page?Promise.resolve(this.page):this.doc?this.doc.getPageByIndex(this.index).then((function(e){return t.page=e,e.isVirtual()&&t.handleVirtualPage(),e})):Promise.resolve(null)},n.handleVirtualPage=function(){this.$ui.addClass("fv__virtual-pdf-page")},n.getPDFDoc=function(){return this.doc},n.getAnnotRender=function(t){try{return this.annotsRender.getAnnotRender(t)}catch(t){return null}},n.getAnnotRenderSafely=function(t){var e=this;return this.annotsRender?Promise.resolve(this.annotsRender.getAnnotRenderSafely(t)):this.getAnnots().then((function(t){return new Fr(e.$annotsContainer,t,e)})).then((function(e){return e.getAnnotRenderSafely(t)}))},n.getAnnotsRenderSafely=function(){var t=this;return this.getAnnots().then((function(e){return Promise.resolve(new Fr(t.$annotsContainer,e,t))}))},n.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;if(this.endRender(),this.isDestroyed)return this.renderSerialPromise?this.renderSerialPromise.end():Promise.resolve();var r=this.renderSerialPromise;this.updatePageDOMRect(e),0===this.renderCount&&this.rendering(e),this.updateRenderFlagsByScaleAndRotate(e,n),this.scale=e,this.rotate=n;var i=!this.renderCount;return this.renderCount++,this.pdfViewer.eventEmitter.emit(Ct.beforeRenderPage,this,i),this.annotsRender&&this.annotsRender.updateSize(e,n),Promise.resolve(this.pageCustomRender.render(e,n)).then((function(i){if(!1!==i)return(r=t.renderSerialPromise=new Lt(0)).push((function(){var r;if(t.checkRenderLayoutFlags()){t.resetRenderLayoutFlags();var i=t.pageTileConfigPromise=t.getPageTileConfig(e,n);t.pageTileConfig=null,r=Promise.all([i,t.renderLayout(e,n)]).then((function(e){var n=S()(e,1)[0];return t.pageTileConfigPromise=null,t.pageTileConfig=n,n}))}else r=t.getPageTileConfig(e,n);return r.then((function(e){var n=S()(e,8),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],d=n[7],l=t.pageContentTiles;if(!l){t.pageContentTiles=l=new Gr((function(e,n,r,i,o,a){return t.getContentImageDataByTile(e,n,r,i,o,a)}),null,t,t.pdfViewer.tileCache),t.pdfViewer.webPDFSRPromise||(l.getRectBitmap=function(e,n,r,i){return t.getRectBitmap(ut(n),e,r,i)});var h=l.$container;h.addClass("fv__pdf-page-content-container"),t.$container.append(h)}var f=t.containerVisibleRect=t.getContainerVisibleRect();l.setVisibleRect(f),t.checkRenderContentFlags()&&(l.clearCache(),t.resetRenderContentFlags());var p,g,v,m=(p=[],g=t.getWatermarkConfig(),v=t.docRender.getWatermarkConfig(),Array.isArray(g)&&g.length>0?p=g:g&&g.content&&g.type?p=[g]:Array.isArray(v)&&v.length>0?p=v:v&&v.content&&v.type&&(p=[v]),p),y=[];return m.length>0?(m.forEach((function(e){if(e.content&&e.type){var n=t.watermark=new ai(o,a,s,c,e.watermarkSettings,e.watermarkTextProperties);y.push(n.getWatermarkRenderer(e))}})),Promise.all(y).then((function(e){return l.setUpdateCanvasMore((function(n,r,i,o,a,s,c,u,d,l,h){e.forEach((function(t){var e=o<0?l*u:r,h=a<0?d*u:i,f=Math.min(u,s),p=Math.min(u,c),g=t.render(e,h,f,p);n.drawImage(g,Math.max(0,o),Math.max(0,a))})),t.renderLayoutGrid(n,r,i,o,a,s,c)})),l.redraw(r,i,o,a,s,c,u,d)}))):(t.pdfViewer.getLayoutGrid()&&l.setUpdateCanvasMore((function(e,n,r,i,o,a,s,c){t.renderLayoutGrid(e,n,r,i,o,a,s)})),l.redraw(r,i,o,a,s,c,u,d))}))})),r.push((function(){return t.checkRebuildAnnotFlags()?(t.resetRebuildAnnotFlags(),t.rebuildAnnots(e,n,t.containerVisibleRect)):t.renderAnnots(e,n,t.containerVisibleRect)})),r.push((function(){return(t.checkRebuildCustomFlags()?t.rebuildCustoms(e):t.checkRenderCustomFlags()?t.renderCustoms(e):Promise.resolve()).then((function(){t.resetRenderCustomFlags()}))})),r.push((function(){if(!t.stateHandler){var e=t.pdfViewer;(t.stateHandler=new(e.stateHandlerManager.getCurrentStates())(e)).pageHandler(t)}return Promise.resolve()})),r.push((function(){t.scale=e,t.rotate=n,t.rendered(),t.renderSerialPromise=null,t.pdfViewer.eventEmitter.emit(Ct.renderPageSuccess,t),t.tabManager.render()})),r.exec();t.rendered()}))},n.queueRender=function(){var t=this,e=this.renderingDeferreds.length;if(e){var n=this.renderingDeferreds[e-1],r=n.scale,i=n.rotate;this.updateRenderFlagsByScaleAndRotate(r,i),this._render(r,i).then((function(){for(var e=t.renderingDeferreds,n=0,r=e.length;n<r;n++)e[n].deferred.resolve(t);t.followRenderDeferreds.length?(t.renderingDeferreds=t.followRenderDeferreds,t.followRenderDeferreds=[],t.queueRender()):(t.renderingDeferreds=[],t.isRendering=!1)}))}},n._render=function(t,e){var n=this;return this.updatePageDOMRect(t),this.rendering(t),Promise.resolve(this.pageCustomRender.render(t,e)).then((function(r){if(!1!==r)return(n.checkRenderLayoutFlags()?n.renderLayout(t,e):Promise.resolve()).then((function(){return n.resetRenderLayoutFlags(),n.checkRenderContainerFlags()?n.renderContainer(t,e):Promise.resolve()})).then((function(){return n.scale=t,n.rotate=e,n.rendered(),n.pdfViewer.eventEmitter.emit(Ct.renderPageSuccess,n),n}));n.rendered()}))},n.setShowWidth=function(t){this.showWidth=t},n.getShowWidth=function(){return this.showWidth},n.setShowHeight=function(t){this.showHeight=t},n.getShowHeight=function(){return this.showHeight},n.computePageSize=function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,i=function(t){return e.getPDFPage().then((function(n){var i=dt(n.getPxWidth(),n.getPxHeight(),t,r);return e.showWidth=i[0],e.showHeight=i[1],i}))};return"fitVisible"!==n?(t=this.pagesRender.getPageScaleSync(this.index,n,r),i(t)):this.pagesRender.getPageScale(this.index,n,r).then((function(t){return i(t)}))},n.renderLayout=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.docRender.getScale(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=function(r){return t.updateRenderFlagsByScaleAndRotate(r,n),t.scale=r,t.rotate=n,t.computePageSize(r,n).then((function(e){var i=S()(e,2),o=i[0],a=i[1];return t.pagesRender.viewMode.renderViewMode(t,r,n,o,a)})).then((function(){var r=t.$ui;if(r.css({width:t.showWidth,height:t.showHeight}),t.pageContentTiles){var i=r.find(".fv__pdf-page-content-container"),o=e/t.pageContentTiles.scale;o<1?i.css("transform","scaleY("+o+")"):i.css("transform","scale("+o+")")}t.pdfViewer.eventEmitter.emit(Ct.pageLayoutRedraw,t,e,n)}))};if("fitVisible"!==e){var i=this.pagesRender.getPageScaleSync(this.index,e,n);return new Promise((function(e){setTimeout((function(){if(t.isDestroyed)return e();e(r(i))}))}))}return this.pagesRender.getPageScale(this.index,e,n).then((function(t){return r(t)}))},n.renderContainer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.renderPage(t,e)},n.getPageTileConfig=function(t,e){var n=this;return this.getPDFPage().then((function(r){var i=n.getSmartScale(t),o=n.pdfViewer.config,a=o.tileSize;o.getTileSize&&(a=o.getTileSize(n.doc,n.page));var s=dt(r.getPxWidth(),r.getPxHeight(),i,e),c=S()(s,2),u=c[0],d=c[1];return[Math.ceil(d/a),Math.ceil(u/a),u,d,a,i,t,e]}))},n.renderPage=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return(this.checkRenderContentFlags()?this.renderContentImage(e,n):Promise.resolve()).then((function(r){return t.resetRenderContentFlags(),t.checkRebuildAnnotFlags()?t.rebuildAnnots(e,n):t.checkRenderAnnotFlags()?t.renderAnnots(e,n):Promise.resolve()})).then((function(){return t.resetRenderAnnotFlags(),t.checkRebuildCustomFlags()?t.rebuildCustoms(e,n):t.checkRenderCustomFlags()?t.renderCustoms(e,n):Promise.resolve()})).then((function(){if(t.resetRenderCustomFlags(),!t.stateHandler){var e=t.pdfViewer;(t.stateHandler=new(e.stateHandlerManager.getCurrentStates())(e)).pageHandler(t)}}))},n.updateSize=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.getPageTileConfig(e,n).then((function(e){var n=S()(e,8),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],d=n[7],l=t.pageContentTiles;l&&l.updateDom(r,i,o,a,s,c,u,d)}))},n.renderContentImage=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.getPageTileConfig(e,n).then((function(e){var n=S()(e,8),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],d=n[7],l=t.pageContentTiles;return l?l.redraw(r,i,o,a,s,c,u,d):Promise.resolve()}))},n.adjustHighlightInContentImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if([].concat(this.excluedHighlights).sort().join()!==[].concat(t).sort().join())return this.excluedHighlights=t,this.redrawContent(!0)},n.adjustHighlightAnnots=function(){return Promise.resolve()},n.getRotatedRowAndCols=function(t,e,n,r,i){switch(i){case 0:return[t,e];case 90:return[e,r-t];case 180:return[n-t,r-e];case 270:return[e,t]}},n.renderContentImageByTileCanvas=function(t,e,n,r,i,o,a,s){var c=this,u=this.pageContentTiles;if(!u){this.pageContentTiles=u=new Gr((function(t,e,n,r,i,o,a,s,u,d){return c.getContentImageDataByTile(t,e,n,r,i,o)}),null,!0);var d=u.$container;d.addClass("fv__pdf-page-content-container"),this.$container.append(d)}var l=this.getWatermarkConfig()||this.docRender.getWatermarkConfig();l&&l.content&&l.type&&(this.watermark=new ai(n,r,i,o,l.watermarkSettings,l.watermarkTextProperties)).exportDataURL({content:l.content,type:l.type}).then((function(t){var e=new Image;e.src=t,u.setUpdateCanvasMore((function(t,n,r,i,o,a){t.drawImage(e,r*a,n*a,i,o,0,0,i,o)}))}));return u.redraw(t,e,n,r,i,o,a)},n.renderAnnots=function(t,e,n){var r=this,i=function(i){return r.annotsRender?r.annotsRender.render(t,e,n):r.getAnnots().then((function(t){return r.doc.hasForm().then((function(e){return r.doc.PDFForm.getControlCount(r.index).then((function(n){if(!r.doc.needFixPageFields){var i=t.filter((function(t){return t instanceof _i}));i&&i.length!=n&&(r.doc.needFixPageFields=!0)}if(!e||r.doc.needFixPageFields){var o=!1;if(t.find((function(t){return t instanceof _i}))&&(o=!0,r.doc.needFixPageFields=!0),r.doc.fixPages=r.doc.fixPages||[],o&&!r.doc.fixPages[r.index])return r.doc.PDFForm.fixPageFields(r.index).then((function(){return r.doc.fixPages[r.index]=!0,r.doc.reloadPDFForm()})).then((function(){return r.getAnnots(!0)})).then((function(t){return t}))}return t}))}))})).then((function(t){return r.annotsRender||(r.annotsRender=new Fr(r.$annotsContainer,t,r),r.annotsRenderDeferred.resolve(r.annotsRender)),r.annotsRender})).then((function(r){return r.render(t,e,n)}))};return this.parent("pdfDocRender").getFormRender()?this.doc.getPDFForm().addTask(i):Promise.resolve(i())},n.rebuildAnnots=function(t,e,n){var r=this,i=function(){return r.getAnnots(!0).then((function(t){return r.annotsRender&&(r.annotsRender.destroy(),r.annotsRender=null,r.annotsRenderDeferred=z()),r.annotsRender||(r.annotsRender=new Fr(r.$annotsContainer,t,r),r.annotsRenderDeferred.resolve()),r.annotsRender})).then((function(r){return r.render(t,e,n)}))};return this.parent("pdfDocRender").getFormRender()?this.doc.getPDFForm().addTask(i):Promise.resolve(i())},n.renderCustoms=function(t,e){var n=this;return this.customsRender?this.customsRender.render(t,e):this.getPDFPage().then((function(t){return n.pdfViewer.customRenderManager.getPageCustomData(t)})).then((function(t){return n.customsRender&&(n.customsRender.destroy(),n.customsRender=null),n.customsRender=n.customsRender||new ui(n.$customsContainer,t,n)})).then((function(n){return n.render(t,e)}))},n.rebuildCustoms=function(t,e){var n=this;return this.getPDFPage().then((function(t){return n.pdfViewer.customRenderManager.getPageCustomData(t)})).then((function(t){return n.customsRender=n.customsRender||new ui(n.$customsContainer,t,n)})).then((function(n){return n.render(t,e)}))},n.renderAnnot=function(t,e,n){return new(this.pdfViewer.annotManager.get(t.getType()))(t,this).render(e,n)},n.updatePageDOMRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.doc.getPageSize(this.index);if((n||(-1===t&&(t=this.pagesRender.getEstimatedPageScaleSync(this.index,this.scale,this.rotate)),(n=this.doc.getEstimatedPageSize(this.index))&&-1!==t))&&t!=this.scale&&n){switch((e%360+360)%360){case 90:case 270:var r=n.width;n.width=n.height,n.height=r}n.width*=ut(1)*t,n.height*=ut(1)*t;var i=n;this.$ui.height()!=n.width&&(i.minHeight=40);var o=this.$ui.get(0),a=o.classList,s="fv__pdf-page-not-rendered";a.contains(s)&&a.remove(s),Da(o,{width:Math.ceil(i.width)+"px",height:Math.ceil(i.height)+"px","min-height":i.minHeight+"px"})}},n.rendering=function(){arguments.length>0&&void 0!==arguments[0]||this.scale,arguments.length>1&&void 0!==arguments[1]||this.rotate;this.$ui.addClass("fv__rendering"),this.pdfPageRendering.rendering()},n.rendered=function(){var t=this;this.isDestroyed||(this.isRendered=!0,this.$ui.removeClass("fv__rendering"),this.pdfPageRendering.rendered(),this.pdfViewer.isWisWebPDFSR||this.openActionTrigged||!this.pdfViewer.enableOpenAction||this.getPDFPage().then((function(e){var n=e.getAction("open");n&&t.pdfViewer.actionManager.get(n,t).active(),t.openActionTrigged=!0})),this.renderedDefered.resolve())},n.waitRendered=function(){return this.isRendered?Promise.resolve():this.renderedDefered.promise},n.bindEvent=function(t){var e=this,n=t[0],r=this.pageHammer=new Kr.a.Manager(n,{recognizers:[[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL}]]});r.add(new Kr.a.Tap({event:"doubletap",taps:2})),r.add(new Kr.a.Tap({event:"singletap"})),r.get("doubletap").recognizeWith("singletap"),r.get("singletap").requireFailure("doubletap"),r.on("singletap",(function(t){var n=e.pdfViewer.eventEmitter,r=e.annotsRender;r?(r.unActiveAnnot(),n.emit(Ct.tapPage,t)):n.emit(Ct.tapPage,t)})),r.on("doubletap",(function(t){var n=e.pdfViewer.eventEmitter,r=e.annotsRender;r?(r.unActiveAnnot(),n.emit(Ct.doubleTapPage,t,e)):n.emit(Ct.doubleTapPage,t,e)})),r.on("press",(function(t){var n=e.pdfViewer.eventEmitter,r=e.annotsRender;r?(r.unActiveAnnot(),n.emit(Ct.pressPage,t)):n.emit(Ct.pressPage,t)})),n.oncontextmenu=function(t){t.preventDefault()},t.on("mouseup",(function(t){if(3===t.which){var n=e.pdfViewer.eventEmitter,r=e.annotsRender;r?(r.unActiveAnnot(),n.emit(Ct.rightClickPage,t)):n.emit(Ct.rightClickPage,t)}}))},n.destroy=function(){this.isDestroyed||(this.unObserveIntersectionObserver(),t.prototype.destroy.call(this),this.invisibleRender(),this.pageContentTiles&&this.pageContentTiles.destroy(),this.stateHandler&&this.stateHandler.out(),this.contentImageDataCache&&this.contentImageDataCache.destroy(),this.annotsRender&&this.annotsRender.destroy(),this.annotsRenderDeferred=null,this.pageHammer&&this.pageHammer.destroy(),this.pageHandler.destroy(),this.$ui.parent().remove().next(".fv__pdf-view-mode-item-split").remove(),this.eLayoutContainerTransitionStyle&&document.body.removeChild(this.eLayoutContainerTransitionStyle),this.pdfPageRendering.destroy(),this.pageCustomRender&&this.pageCustomRender.destroy(),this.pageCustomRender=null,this.pdfPageRendering=null,this.pageHammer=null,this.pageHandler=null,this.$ui=null,this.eLayoutContainerTransitionStyle=null,this.doc=null,this.page=null,this.contentImageDataCache=null,this.pageContentTiles=null,this.stateHandler=null)},n.getSmartScale=function(t){return this.pdfViewer.getSmartScale(t)},n.getScale=function(){return this.scale},n.getRotation=function(){return this.rotate},n.getRectBitmap=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rotate,i=this.page,o=["page"],a=this.docRender.getUserPermission();a.checkAnnotForm()||a.checkFillForm();return i.getPageBitmap(t,r,e,o,"view",n)},n.previewRectBitmap=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rotate;return this.getRectBitmap(t,e,n,r).then((function(i){var o=document.createElement("canvas"),a=o.getContext("2d"),s=i.buffer,c=i.width,u=i.height,d=i.x,l=i.y,h=new(Uint8ClampedArray||Uint8Array)(s),f=a.createImageData(c,u);f.data.set(h),o.width=c+d,o.height=u+l,a.putImageData(f,0,0);var p={scale:t,rect:e,id:n,rotate:r,url:o.toDataURL()};return console.log(p),p}))},n.getContentImageDataByTile=function(t,e,n,r,i,o){return this.getRectBitmap(ut(o),{x:e*i,y:t*i,width:n,height:r})},n.getAnnots=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getPDFPage().then((function(e){return e.getAnnots(t)}))},n.getTextContinueRectAtDeviceRect=function(t){var e,n=this;return this.getPDFPage().then((function(r){return(e=r).reverseDeviceRect(t,n.scale,n.rotate)})).then((function(t){return e.getTextContinuousRectsAtRect(t)}))},n.getTextContinueRectAtDevicePoints=function(t,e,n,r){return Promise.all([this.getPDFPage(),this.reverseDevicePoint(t),this.reverseDevicePoint(e)]).then((function(t){var e=S()(t,3),i=e[0],o=e[1],a=e[2];return i.getTextContinuousRectsAtPoints(o,a,8,n,r)}))},n.getDoubleClickTextRectAtPoint=function(t){return Promise.all([this.getPDFPage(),this.reverseDevicePoint(t)]).then((function(t){var e=S()(t,2),n=e[0],r=e[1];return n.getDoubleClickTextRectAtPoint(r,8)}))},n.getTextContinuousCharAtDeviceRect=function(t){var e,n=this;return this.getPDFPage().then((function(r){return(e=r).reverseDeviceRect(t,n.scale,n.rotate)})).then((function(t){return e.getTextContinuousCharsAtRect(t)}))},n.getAllTextRect=function(){return this.getPDFPage().then((function(t){return t.getTextContinuousRectsAtRect(t.info.cropBox)}))},n.getAllTextChar=function(){return this.getPDFPage().then((function(t){return t.getTextContinuousCharsAtRect(t.info.cropBox,!0)}))},n.reverseDeviceRect=function(t){var e=this;return this.getPDFPage().then((function(n){return n.reverseDeviceRect(t,e.scale,e.rotate)}))},n.reverseDevicePoint=function(t){var e=S()(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotate;return this.getPDFPage().then((function(t){return t.reverseDevicePoint([n,r],i,o)}))},n.getDeviceRect=function(t){var e=this;return this.getPDFPage().then((function(n){return n.getDeviceRect(t,e.scale,e.rotate)}))},n.transformRectArray=function(t,e){for(var n=[],r=this.scale,i=e.length;i--;){var o=e[i];n[i]=t.getDeviceRect(o,r,this.rotate)}return n},n.getClientPoint=function(t,e){var n=this.$ui[0].getBoundingClientRect();return[t+n.left,e+n.top]},n.redraw=function(t){return t&&(this.updateRenderFlags(7),this.annotsRender&&this.annotsRender.adjustHighlightsRender()),this.render()},n.redrawContent=function(t){var e,n=this;return(t?((e=n.pageContentTiles)&&e.clearCache(),n.contentImageDataCache?n.contentImageDataCache.clear():Promise.resolve()):Promise.resolve()).then((function(){return n.renderContentImage(n.scale,n.rotate)})).then((function(){return n.adjustHighlightAnnots()}))},n.getDevicePointFromEvent=function(t){var e=this.$ui.offset();return[t.pageX-e.left,t.pageY-e.top]},n.removeAnnotRenders=function(t){return this.annotsRender&&this.annotsRender.removeAnnotRenders(t)},n.redrawAnnotRenders=function(t){if("canvas"===this.pdfViewer.config.annotRenderingMode.highlight)return this.annotsRender.redrawAnnotRenders(t);for(var e=[],n=[],r=0,i=t.length;r<i;r++){var o=t[r];"highlight"===o.getType()?e.push(o):n.push(o)}return e.length&&this.renderContentImage(),this.annotsRender.redrawAnnotRenders(n)},n.movedAnnotRenders=function(t,e){return this.annotsRender.movedAnnotRenders(t,e)},n.addAnnotRenders=function(t){var e=this;if(!this.annotsRender)return this.annotsRenderDeferred.promise.then((function(){return e.addAnnotRenders(t)}));return[].length&&this.renderContentImage(),this.annotsRender.addAnnotRenders(t)},n.getPageAreaRenderer=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ei(this,t,e,n,r)},n.getSnapshot=function(t,e,n,r){var i=1,o=window.localStorage.getItem("PREFERENCES-GENNERAL");if(o){var a=JSON.parse(o),s=a.resolution;a.fixedResolution&&(i=s/96)}var c=this.getPageAreaRenderer(n*i,r*i,i,!0);return c.setPosition(t+n/2,e+r/2),c.update().then((function(t){var e=z();return t.toBlob((function(t){return e.resolve(t)}),"image/png"),e.promise}))},n.unActiveAnnotRender=function(){try{this.annotsRender.unActiveAnnot()}catch(t){}},n.activeGraphicsObject=function(t){},n.addCustomRenders=function(t){this.customsRender.addCustomRenders(t)},n.removeCustomRenders=function(t){this.customsRender.removeCustomRenders(t)},n.updateCustomRenders=function(t){this.customsRender.updateCustomRenders(t)},n.setWatermarkConfig=function(t){this.watermarkConfig=t},n.getWatermarkConfig=function(){return this.page&&this.page.isVirtual()?{content:"VIRTUAL PAGE",type:"text",watermarkSettings:void 0,watermarkTextProperties:{font:"Microsoft Yahei",fontSize:40,color:"#000000",fontStyle:"normal",lineSpace:10,alignment:"center"}}:this.watermarkConfig},n.endRender=function(){var t=this.renderSerialPromise;t&&t.end().catch(Ra);var e=this.annotsRender;e&&e.endRender()},n.invisibleRender=function(){this.endRender();var t=this.pageContentTiles;t&&t.invisibleRender();var e=this.annotsRender;e&&e.invisibleRender()},n.move=function(){},n.renderingFollowPromise=function(){},n.triggerAction=function(t){var e=this;this.annotsRender&&this.annotsRender.annots.forEach((function(n){n.getAdditionalAction&&e.docRender.formRender.execAction("annot",n.getAdditionalAction(t),n,n,Zi[t])}))},n.getContainerVisibleRect=function(){var t=this.docRender,e=this.$ui[0].getBoundingClientRect(),n=t.getContainerVisibleRect(),r=n.right-n.left,i=n.bottom-n.top,o=r,a=i;o=r/2,a=i/2;var s=Math.max(e.left,n.left)-e.left-o/2,c=Math.min(e.right,n.right)-e.left+o,u=Math.max(e.top,n.top)-e.top-a/2,d=Math.min(e.bottom,n.bottom)-e.top+a;return s<0&&(s=0),u<0&&(u=0),c>this.getShowWidth()&&(c=this.getShowWidth()),d>this.getShowHeight()&&(d=this.getShowHeight()),{left:s,right:Math.max(s,c),top:u,bottom:Math.max(u,d)}},n.getCurrentVisibleRect=function(){var t=this.docRender,e=this.$ui[0].getBoundingClientRect(),n=t.getContainerVisibleRect(),r=n.right-n.left,i=n.bottom-n.top,o=_a(0,n.left-e.left),a=_a(0,n.top-e.top),s=Ta(_a(0,e.width-o),r),c=Ta(_a(0,e.height-a),i);return{left:o,top:a,width:s,height:c,right:o+s,bottom:a+c}},n.getContainerFullRect=function(){var t=this.docRender,e=this.$ui[0].getBoundingClientRect(),n=t.getContainerVisibleRect();return{left:n.left-e.left,right:n.right-e.right,top:n.top-e.top,bottom:n.bottom-e.bottom}},n.getPDFRectFromClientRect=function(t){var e=this.$ui[0].getBoundingClientRect(),n=t.left-e.left,r=t.top-e.top,i={left:n,top:r,right:n+t.width,bottom:r+t.height};return this.page.reverseDeviceRect(i,this.scale,this.rotate)},n.getPDFPointFromClientPoint=function(t,e,n){var r=this.$ui[0].getBoundingClientRect();return n?[t-r.left,e-r.top]:this.page.reverseDevicePoint([t-r.left,e-r.top],this.scale,this.rotate)},n.formatGridOptions=function(t){if(t){var e=Ki(t.unit);if(e){var n=this.getScale(),r=e.convertTo(t.width*n,qi),i=e.convertTo(t.height*n,Gi),o=e.convertTo(t.offsetLeft*n,qi),a=e.convertTo(t.offsetTop*n,Gi),s=t.subdivisions;return{lineWidth:r,lineHeight:i,offsetLeft:o,offsetTop:a,subLineWidth:r/s,subLineHeight:i/s,maxWidth:this.getShowWidth(),maxHeight:this.getShowHeight()}}}},n.renderLayoutGrid=function(t,e,n,r,i,o,a){var s=this.pdfViewer.getLayoutGrid();if(s&&Ki(s.unit)){var c=s.color,u=c.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/)||[c,127,127,255],d=+u[1],l=+u[2],h=+u[3],f="rgba("+(d+.67*(255-d))+","+(l+.67*(255-l))+","+(h+.67*(255-h))+","+(+u[4]||1)+")",p=this.formatGridOptions(s),g=p.lineWidth,v=p.lineHeight,m=p.offsetLeft,y=p.offsetTop,w=p.subLineWidth,b=p.subLineHeight,A=Math.abs((e-r-m)%g-g)%g,P=Math.abs((n-i-y)%v-v)%v,E=Math.abs((e-r-m)%w-w)%w,x=Math.abs((n-i-y)%b-b)%b,S=r+o,C=i+a;for(r=Math.max(0,r),i=Math.max(0,i),t.beginPath(),t.strokeStyle=f,t.lineWidth=1;E<S;)E<r||(t.moveTo(E,i),t.lineTo(E,C)),E+=w;for(;x<C;)x<i||(t.moveTo(r,x),t.lineTo(S,x)),x+=b;for(t.stroke(),t.beginPath(),t.strokeStyle=c;A<S;)A<r||(t.moveTo(A,i),t.lineTo(A,C)),A+=g;for(;P<C;)P<i||(t.moveTo(r,P),t.lineTo(S,P)),P+=v;t.stroke()}},n.getTextRectsAtRect=function(t){var e,n=this;return this.getPDFPage().then((function(r){return(e=r).reverseDeviceRect(t,n.scale,n.rotate)})).then((function(t){return e.getTextRectsAtRect(t)}))},n.renderArticles=function(t){var e=this;this.doc&&(t&&t.length>0?Promise.resolve(t):this.doc.getPdfArticle().getArticleList()).then((function(t){t.forEach((function(t){(t.children||[]).forEach((function(n){e.renderArticle(t,n)}))}))}))},n.renderArticle=function(t,e){var n=this.articleBeads.hasOwnProperty(e.objNum);e.pageIndex===this.index&&(n?this.articleBeads[e.objNum].updateRender(t,e):this.articleBeads[e.objNum]=new Xi(this,t,e))},e}(mt);function Fa(t){return JSON.parse(JSON.stringify(t)).reduce((function(t,e){if(2===e.length){for(var n=[],r=e[0];r<e[1];r++)n.push(r);e=n}return t.concat(e)}),[])}!function(t){t.IDLE="idle",t.RUNNING="running",t.CANCELLED="cancelled"}(Ia||(Ia={}));var Ma=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.interval=t,this.retainLastTask=e,this.status=Ia.IDLE,this.lastCompleteTime=0,this.lastTaskPromise=Promise.resolve()}var e=t.prototype;return e.exec=function(t,e,n){var r=this,i=function(){if(r.status!==Ia.CANCELLED){r.status=Ia.RUNNING;var i=t.apply(n,e||[])||Promise.resolve();r.lastTaskPromise=i.finally((function(){r.lastCompleteTime=Date.now(),r.status!==Ia.CANCELLED&&(r.status=Ia.IDLE)}))}else r.status=Ia.IDLE},o=Date.now();switch(this.status){case Ia.IDLE:if(o-this.lastCompleteTime>=this.interval){var a=function(){return i(),r.lastTaskPromise};return this.lastTaskPromise.then(a,a)}break;case Ia.CANCELLED:}return this.retainLastTask?new Promise((function(t){clearTimeout(r.retainTaskTimmerId);var e=r.interval-(Date.now()-r.lastCompleteTime)%r.interval;r.retainTaskTimmerId=setTimeout((function(){i(),t(r.lastTaskPromise)}),e)})):this.lastTaskPromise},e.waitForLastTask=function(){return this.lastTaskPromise},e.cancel=function(){this.status=Ia.CANCELLED},e.isRunning=function(){return this.status===Ia.RUNNING},t}();window.ThrottleAsyncTaskExecutor=Ma;var Oa=function(){function t(t){this.viewMode=t,Wt.a.property(this,"executor",(function(){return new Ma(80)}))}var e=t.prototype;return e.getPageCount=function(){var t=this.getPDFDocRender();if(!t)return 0;var e=t.getPDFDoc();return e?e.getPageCount():0},e.getPDFDocRender=function(){return this.viewMode.docRender},e.onKeyReleased=function(t){return!1},t}(),La=function(){function t(t){this.docRender=t,t.$ui.addClass("fv__view-mode"),this.pageDOMs=[],this.shortcutEventHandler=this.generateShortcutEventHandler()}t.getName=function(){};var e=t.prototype;return e.getItems=function(){return this.pageDOMs},e.into=function(t,e){this.pageDOMs=e;var n=document.createDocumentFragment();"function"==typeof n.append?n.append.apply(n,e):e.forEach((function(t){n.appendChild(t)})),t.innerHTML="",t.appendChild(n)},e.updatePageDOMs=function(t){this.pageDOMs=t},e.renderViewMode=function(t,e,n,r,i){},e.afterRenderVisiblePages=function(){},e.jumpToPage=function(t,e){e.x,e.y},e.getFitHeight=function(t){},e.getFitWidth=function(t){},e.getVisibleIndexes=function(){return this.docRender.getVisiblePageIndexes()},e.getCurrentPageIndex=function(){return 0},e.getPrevPageIndex=function(){return Math.max(0,this.getCurrentPageIndex()-1)},e.getNextPageIndex=function(){var t=this.docRender.getPDFDoc().getPageCount();return Math.min(t-1,this.getCurrentPageIndex()+1)},e.out=function(){this.docRender=null,this.pageDOMs=[]},e.generateShortcutEventHandler=function(){},e.getShortcutEventHandler=function(){return this.shortcutEventHandler},t}(),Na=(n(421),function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.onKeyPressed=function(t){var e=this,n=this.viewMode,r=n.fixedVerticalPosition;switch(t.command){case Xo.JUMP_TO_FIRST_PAGE:return this.executor.exec((function(){return e.jumpToFirstPage()})),!0;case Xo.JUMP_TO_LAST_PAGE:return this.executor.exec((function(){return e.jumpToLastPage()})),!0;case Xo.JUMP_TO_PREVIOUS_PAGE:return this.executor.exec((function(){return n.jumpToPrevPage()})),!0;case Xo.JUMP_TO_NEXT_PAGE:return this.executor.exec((function(){return n.jumpToNextPage()})),!0}if(r)switch(t.command){case Xo.SCROLL_TO_PREVIOUS_VISIBLE_AREA:case Xo.ARROW_UP:return this.executor.exec((function(){return n.jumpToPrevPage()})),!0;case Xo.SCROLL_TO_NEXT_VISIBLE_AREA:case Xo.ARROW_DOWN:return this.executor.exec((function(){return n.jumpToNextPage()})),!0}else{var i=n.computePageMetadata(n.currentPageIndex);if(!i)return!1;var o=n.scrollWrap,a=i.pageHeight,s=i.visibleBoxHeight,c=i.visibleBoxWidth,u=i.scrollTop,d=n.scrollWrap.getScrollTop(),l=80;switch(t.command){case Xo.SCROLL_TO_PREVIOUS_VISIBLE_AREA:case Xo.SCROLL_VIEWER_SCROLLBAR_UP:l=s;case Xo.ARROW_UP:return this.executor.exec((function(){if(d>u){var t=d-u;return t=Math.min(l,t),o.scrollBy(0,-t,"smooth"),Promise.resolve()}return n.jumpToPrevPage()})),!0;case Xo.SCROLL_TO_NEXT_VISIBLE_AREA:case Xo.SCROLL_VIEWER_SCROLLBAR_DOWN:l=s;case Xo.ARROW_DOWN:return this.executor.exec((function(){if(d>=u+(a-s))return n.jumpToNextPage();if(d>=u){var t=a-(d-u)-s;t=Math.min(t,l),o.scrollBy(0,t,"smooth")}return Promise.resolve()})),!0;case Xo.SCROLL_VIEWER_SCROLLBAR_LEFT:return o.scrollBy(-c,0,"smooth"),!0;case Xo.SCROLL_VIEWER_SCROLLBAR_RIGHT:return o.scrollBy(c,0,"smooth"),!0}}return!1},n.jumpToFirstPage=function(){return this.viewMode.jumpToPage(0,{x:0,y:0})},n.jumpToLastPage=function(){var t=this.getPageCount();return this.viewMode.jumpToPage(t-1,{x:0,y:0})},e}(Oa)),Va=function(t){function e(e){var n;(n=t.call(this,e)||this).currentPageIndex=0,n.scrollWrap=n.docRender.viewerRender.scrollWrap,n.lastScale=null,n.isZoomin=!1,n.fixedVerticalPosition=!1,n.currentPageOffset=0,n.rerenderViewExecutor=new It(100),n.rerenderPageExecutor=new It(10),n.scrollEventExecutor=new It(100),n.dragScrollbarEventExecutor=new kt,n.mouseWheelExecutor=new kt,n.jumpPageExecutor=new kt,n.unbindScrollEvent=Wo.a,n.unbindMouseEvent=Wo.a,n.unbindWheelEvent=Wo.a,n.allowHandleScrollOnWheel=!1,n.isMouseDownOnScrollbar=!1,n.handledWheel=!1,n.instanceId=Mr(),n.diffJumpPage=n.diffJumpPage.bind(F()(n)),n.currentScrollDirection;var r=n.scrollWrap.getScrollHost();r===window&&(r=document.body);var i,o=function(t){var e=t.clientX,i=r.getBoundingClientRect(),o=getComputedStyle(r),a=(parseInt(o.borderLeftWidth)||0)+(parseInt(o.borderRightWidth)||0),s=r.offsetWidth,c=s-r.clientWidth-a;n.isMouseDownOnScrollbar=e>=s-c+i.left},a=function(t){n.scrollWrap.getScrollTop();n.isMouseDownOnScrollbar,n.isMouseDownOnScrollbar=!1};r.addEventListener("mousedown",o,{capture:!0}),window.addEventListener("mouseup",a,{capture:!0});var s=!1,c=!1,u=function(){var t=n.scrollWrap.getScrollTop(),e=n.computePageMetadata(n.currentPageIndex);if(e){var r=e.scrollTop,i=e.pageHeight,o=e.visibleBoxHeight,a=r+i-o;if("down"===n.currentScrollDirection){if(t-.1*o>a)return void n.jumpToNextPage()}else if("up"===n.currentScrollDirection&&t+.1*o<r)return void n.jumpToPrevPage();t>a?n.scrollToPage(e,"left-bottom",!0):t<r&&n.scrollToPage(e,"left-top",!0)}},d=function(t){clearTimeout(i),c=!0,i=setTimeout((function(){c=!1,n.handledWheel&&s&&(n.handledWheel=!1,u())}),66)},l=function(){s=!0,c||u()},h=function(){s=!1};return Vt.isMobile&&(r.addEventListener("scroll",d,{capture:!0}),r.addEventListener("touchend",l,{capture:!0}),r.addEventListener("touchstart",h,{capture:!0})),n.unbindMouseEvent=function(){r.removeEventListener("mousedown",o,{capture:!0}),window.removeEventListener("mouseup",a,{capture:!0}),r.removeEventListener("scroll",d,{capture:!0}),r.removeEventListener("touchend",l,{capture:!0}),r.removeEventListener("touchstart",h,{capture:!0})},n}O()(e,t),e.getName=function(){return"single-page-view-mode"};var n=e.prototype;return n.diffJumpPage=function(){var t=(new Date).getTime(),e=t;return isNaN(this.countNum)?(this.countNum=0,this.lastCountDateTime=t):(this.countNum++,e=t-this.lastCountDateTime,this.lastCountDateTime=t),e},n.getPDFPageRender=function(t){return this.docRender.pagesRender.pageRenders[t]},n.into=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentPageIndex;this.docContainer=t,this.pageDOMs=e,t.classList.add("fv__viewer-single-view-mode"),this.renderPageContainer(),this.scrolledToPage(n),this.bindScrollEvent(),this.bindWheelEvent()},n.out=function(){this.pageDOMs.forEach((function(t){t.style.top&&(t.style.top="")})),this.unbindScrollEvent(),this.unbindWheelEvent(),this.unbindMouseEvent(),this.rerenderViewExecutor.cancel(),this.rerenderPageExecutor.cancel(),this.jumpPageExecutor.cancel(),this.scrollEventExecutor.cancel(),this.mouseWheelExecutor.cancel(),this.dragScrollbarEventExecutor.cancel(),this.resetCurrentPageDom(),this.enableScroll(),this.docContainer.classList.remove("fv__viewer-single-view-mode"),this.isMouseDownOnScrollbar=!1,this.docContainer.style.height=""},n.rebindScrollEvent=function(){this.bindScrollEvent()},n.keepPagePosition=function(){var t=this;if(this.fixedVerticalPosition){var e=this.currentPageIndex,n=this.pageDOMs[e],r=function(e){var r=t.scrollWrap.getScrollTop();n.style.cssText+="top: ".concat(e.pageOffset+r,"px")};if(!this.isPageRendered(e))return this.computePageMetadataAsync(e).then(r);r(this.computePageMetadata(e))}},n.isValidCurrentPageIndex=function(){var t=this.docRender;if(!t)return!1;var e=t.pagesRender;if(!e)return!1;var n=e.pageRenders;if(!n)return!1;var r=this.currentPageIndex;return r>=0&&r<n.length},n.bindScrollEvent=function(){var t=this;this.unbindScrollEvent();var e=this.scrollWrap.getScrollTop();this.unbindScrollEvent=this.scrollWrap.addScrollEventListener((function(n){if((t.allowHandleScrollOnWheel||(t.allowHandleScrollOnWheel=!0,t.isMouseDownOnScrollbar||!Nt.isChrome&&!Nt.isChromiumEdge))&&t.isValidCurrentPageIndex()){var r=t.keepPagePosition(),i=function(){var n=t.scrollWrap.getScrollTop(),r=e;return e=n,n>r?t.currentScrollDirection="down":n<r&&(t.currentScrollDirection="up"),t.scrollEventExecutor.exec((function(){return t.handleWheel(t.scrollWrap.getScrollTop(),t.currentScrollDirection)})),t.handleWheel(n,t.currentScrollDirection)};r instanceof Promise?r.then(i):i()}}))},n.bindWheelEvent=function(){var t=this;this.unbindWheelEvent();var e=function(e){if(!$t.isCtrlDown){t.allowHandleScrollOnWheel=!1;var n,r=e.deltaY;if(r<0)n="up";else{if(!(r>0))return;n="down"}t.currentScrollDirection=n,t.fixedVerticalPosition?(e.preventDefault(),t.keepPagePosition(),t.mouseWheelExecutor.exec((function(){switch(n){case"down":return t.jumpToNextPage();case"up":return t.jumpToPrevPage()}return Ht.RESOLVED_PROMISE_VOID}))):$t.isShiftDown||!Nt.isChrome&&!Nt.isChromiumEdge||(t.allowHandleScrollOnWheel=!0,Vt.isTablet||(t.scrollWrap.scrollBy(-e.wheelDeltaX,3*-e.wheelDeltaY,"smooth"),e.preventDefault()))}},n=this.scrollWrap.getScrollHost();n.addEventListener("wheel",e,{passive:!1}),this.unbindWheelEvent=function(){n.removeEventListener("wheel",e,{passive:!1})}},n.handleWheel=function(t,e){if(this.fixedVerticalPosition){if(this.isMouseDownOnScrollbar){var n=this.computePageIndex(t);if(n!==this.currentPageIndex)return this.scrolledToPage(n,e)}}else if(this.isMouseDownOnScrollbar){if("up"===e)return this.handleDragUp(t);if("down"===e)return this.handleDragDown(t)}else{if("up"===e)return this.handleWheelUp(t);if("down"===e)return this.handleWheelDown(t)}return Ht.RESOLVED_PROMISE_VOID},n.handleWheelUp=function(t){this.handledWheel=!0;var e=this.computePageMetadata(this.currentPageIndex);if(e){var n=e.scrollTop,r=e.visibleBoxHeight,i=e.pageIndex,o=this.pageDOMs[i];if(Vt.isMobile?t+.5*r<n:t<o.offsetTop){var a=this.getPrevPageIndex();return this.doJumpOnScroll(a)}}},n.handleWheelDown=function(t){this.handledWheel=!0;var e=this.computePageMetadata(this.currentPageIndex);if(e){var n=e.scrollTop,r=e.pageHeight,i=e.visibleBoxHeight,o=e.pageIndex;this.pageDOMs[o];return(Vt.isMobile?n+r-i<t-.5*i:n+r-i<t)?this.jumpToNextPage():void 0}},n.handleDragUp=function(t){var e=this.computePageMetadata(this.currentPageIndex);if(e){var n=e.pageTop,r=e.visibleBoxHeight,i=this.pageDOMs[this.currentPageIndex],o=n-r;if(t>o&&t<n)i.style.cssText+="top: ".concat(t,"px");else if(t<o){var a=this.computePageIndex(t);return this.scrolledToPage(a,"up")}return Ht.RESOLVED_PROMISE_VOID}},n.handleDragDown=function(t){var e=this.computePageIndex(t);if(e!==this.currentPageIndex)return this.scrolledToPage(e,"down");var n=this.currentPageIndex,r=this.scrollWrap.getScrollTop(),i=this.computePageMetadata(n);if(i){var o=i.scrollTop,a=i.pageHeight,s=i.visibleBoxHeight;if(r>o+a-s){var c=r+s-a;this.pageDOMs[n].style.cssText+="top: ".concat(c,"px")}return Ht.RESOLVED_PROMISE_VOID}},n.doJumpOnScroll=function(t){var e=this,n=function(n){var r=n.pageHeight-n.visibleBoxHeight;return e.jumpToPage(t,{y:r},!1).then((function(){e.docRender.getPDFPageRender(n.pageIndex).renderLayout()}))};return this.isPageRendered(t)?n(this.computePageMetadata(t)):this.computePageMetadataAsync(t).then(n)},n.jumpToPage=function(t,e){var n=this;var r=this.docRender.getPDFDoc().getPageCount();if(t<0||t>=r)throw new Error("Illegal page index value: "+t);return this.jumpPageExecutor.exec((function(){return n.unbindScrollEvent(),n.computePageMetadataAsync(t).then((function(r){n.currentPageIndex=t;var i=n.waitForScrollEnd();try{n.rerenderPage(r),n.scrollToPage(r,e),n.docRender.setCurrentPageIndex(t),n.renderPagePosition(r)}finally{return i.finally((function(){n.currentPageIndex=t,n.rebindScrollEvent()}))}}))}))},n.waitForScrollEnd=function(){var t,e=z(),n=this.scrollWrap.addScrollEventListener((function(){clearTimeout(t),t=setTimeout((function(){n(),e.resolve()}),10)}));return t=setTimeout((function(){n(),e.resolve()}),10),e.promise},n.jumpToNextPage=function(){var t=this.getNextPageIndex();return t===this.currentPageIndex?Ht.RESOLVED_PROMISE_VOID:this.jumpToPage(t)},n.jumpToPrevPage=function(){var t=this.getPrevPageIndex();return t===this.currentPageIndex?Ht.RESOLVED_PROMISE_VOID:this.jumpToPage(t,"left-bottom",!1)},n.formatPosition=function(t,e){var n=Math.max(0,t.pageHeight-t.visibleBoxHeight),r=Math.max(0,t.pageWidth-t.visibleBoxWidth);switch(e){case"left-bottom":return{y:n};case"left-top":return{};case"right-top":return{x:r};case"right-bottom":return{x:r,y:n}}return e},n.scrolledToPage=function(t,e){var n=this;this.currentPageIndex=t;var r=function(r){r&&(n.rerenderPage(r),n.renderPagePosition(r,e),n.docRender.setCurrentPageIndex(t))};return this.isPageRendered(t)?(r(this.computePageMetadata(t)),Ht.RESOLVED_PROMISE_VOID):this.computePageMetadataAsync(t).then(r)},n.resetCurrentPageDom=function(){this.currentPageOffset=0,this.pageDOMs[this.currentPageIndex].style.top=""},n.rerenderPage=function(t){var e=this;if(t){var n=t.pageIndex,r=t.pageWidth,i=t.pageHeight,o=t.pageTop,a=t.visibleBoxHeight,s=t.visibleBoxWidth,c=t.refresh,u=this.pageDOMs[n],d=this.docContainer;if(n!==this.currentPageIndex||c||!u.parentElement){var l=d.childNodes;if(l.length>1){if(Nt.isIE)for(var h=l.length-1;h>=0;h--)d.removeChild(l[h]);else d.innerHTML="";d.appendChild(u)}else 1===l.length?d.contains(u)||d.replaceChild(u,l[0]):d.contains(u)||d.appendChild(u);this.resetCurrentPageDom(),this.currentPageIndex=n}var f=r<=s,p=i<=a;this.fixedVerticalPosition=i<=a,u.style.cssText+="top: ".concat(o,"px;");var g=this.docRender,v=this.docRender.getPDFPageRender(n),m=v.pagesRender,y=g.rotation;return m.getPageScale(n,g.scale,y).then((function(t){v.updatePageDOMRect(t,y),e.docRender.pdfViewer.eventEmitter.emit(Ct.updateScrollableStatus,{disableHorizontal:f,disableVertical:p})}))}},n.renderPagePosition=function(t,e){if(t){var n=t.pageHeight,r=t.pageTop,i=t.scrollTop,o=t.visibleBoxHeight,a=this.pageDOMs[t.pageIndex];if(this.fixedVerticalPosition)this.keepPagePosition();else{a.style.cssText+="top: ".concat(r,"px;");var s=this.scrollWrap.getScrollTop();if("down"===e){if(s>i+n-o){var c=s+o-n;a.style.cssText+="top: ".concat(c,"px")}}else if("up"===e){s>r-o&&s<r&&(a.style.cssText+="top: ".concat(s,"px"))}else{var u=a.offsetTop;u>s?a.style.cssText+="top: ".concat(s,"px"):u+n<s+o&&(a.style.cssText+="top: ".concat(s+o-n,"px"))}}}},n.scrollToPage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.visibleBoxHeight,i=t.visibleBoxWidth,o=t.pageHeight,a=t.pageWidth,s=t.scrollTop,c=t.pageTop,u=this.formatPosition(t,e),d=u.x,l=void 0===d?this.scrollWrap.getScrollLeft():d,h=u.y,f=void 0===h?0:h;o<=r&&(f=0),a<i&&(l=0);var p,g,v=l;g=o>=r?c+(o-r):s,p=Math.min(s+Math.max(0,f),g),this.scrollWrap.scrollTo(v,p,n?"smooth":"auto")},n.computePageMetadataAsync=function(t){var e=this;if(this.isPageRendered(t))return Promise.resolve(this.computePageMetadata(t));var n=this.docRender,r=n.scale,i=n.rotation,o=n.pagesRender.pageRenders[t];return o?o.computePageSize(r,i).then((function(){var n=e.computePageMetadata(t);return e.docContainer.style.cssText+="height: ".concat(n.containerHeight,"px"),n})):Promise.resolve()},n.isPageRendered=function(t){var e=this.docRender.pagesRender.pageRenders[t];if(!e)return!1;var n=e.getShowHeight();return"number"==typeof n&&!isNaN(n)&&isFinite(n)},n.computePageMetadata=function(t){var e=this.docRender.pagesRender.pageRenders[t];if(e){var n=this.scrollWrap.getHeight(),r=this.scrollWrap.getWidth(),i=e.getShowHeight(),o=e.getShowWidth(),a=this.computeScrollTop(t),s=this.computeContainerHeight(t,a),c=.5*Math.max(0,n-i);return{visibleBoxHeight:n,visibleBoxWidth:r,pageIndex:t,pageHeight:i,pageWidth:o,containerHeight:s,pageTop:a+c,scrollTop:a,pageOffset:c,occupiedHeight:Math.max(n,i)}}},n.computeScrollTop=function(t){for(var e=this.scrollWrap.getHeight(),n=this.docRender.pagesRender.pageRenders,r=0,i=0,o=0;o<t;o++){var a=n[o].getShowHeight();("number"!=typeof a||isNaN(a))&&(a=o>0?i/o:e),i+=a,r+=Math.max(e,a)}return r},n.computePageIndex=function(t){for(var e=this.docRender.pagesRender.pageRenders,n=this.scrollWrap.getHeight(),r=0,i=0,o=0;o<e.length;o++){var a=e[o].getShowHeight();this.isPageRendered(o)||(a=o>0?i/o:n);var s=Math.max(a,n),c=r+s,u=!(o<e.length-1)||t<=c;if(r<=t&&u)return o;i+=a,r+=s}return-1},n.computeContainerHeight=function(t,e){var n=this.scrollWrap.getHeight(),r=this.docRender.pagesRender&&this.docRender.pagesRender.pageRenders,i=e;if(r)for(var o=t;o<r.length;o++){var a=r[o].getShowHeight();("number"!=typeof a||isNaN(a))&&(a=o>0?i/o:i),i+=Math.max(n,a)}return Vt.isMobile&&(i+=10),i},n.renderViewMode=function(t){var e=this;if(t.index===this.currentPageIndex){var n=this.computePageMetadata(t.index),r=t.getScale();null==this.lastScale?this.isZoomin=!1:this.isZoomin=this.lastScale<r,this.lastScale=r,n.refresh=!0,this.rerenderPage(n),this.renderPagePosition(n)}this.rerenderViewExecutor.exec((function(){e.renderPageContainer()}))},n.renderPageContainer=function(){var t=this.computeContainerHeight(0,0);this.docContainer.style.cssText+="height: ".concat(t,"px"),this.keepPagePosition()},n.disableScroll=function(t){this.docRender.pdfViewer.eventEmitter.emit(Ct.disableScroll,t)},n.enableScroll=function(t){this.docRender.pdfViewer.eventEmitter.emit(Ct.enableScroll,t)},n.getFitWidth=function(t){return this.scrollWrap.getWidth()},n.getFitHeight=function(t){return this.scrollWrap.getHeight()},n.getVisibleIndexes=function(){return[this.currentPageIndex]},n.getCurrentPageIndex=function(){return this.currentPageIndex},n.generateShortcutEventHandler=function(){return new Na(this)},e}(La),Ba=Ea.a.getLogger("PDFPagesRender"),Ua=function(t){function e(n,r,i){var o;(o=t.call(this,i)||this).name=e.getDefaultName(),o.$element=n.parent(),o.$ui=n,o.pageDOMs=[],o.doc=r,o.docRender=i;var a=i.viewerRender.ViewMode;return o.viewMode=new a(i),o.viewerRender=i.viewerRender,o.pdfViewer=o.viewerRender.pdfViewer,o.pageRenders=[],o.scale=1,o.rotate=0,o.neverRendered=!0,o.minScale=+o.pdfViewer.config.minScale,o.maxScale=+o.pdfViewer.config.maxScale,o.isPageDOMsLoaded=!1,o.pdfViewer.eventEmitter.on(Ct.layerVisibleChange,o.layerVisibleChange=function(t){o.doc===t&&(o.setRenderFlags(2),o.renderVisiblePages().catch((function(t){0})),o.pageRenders.forEach((function(t){t.rebuildAnnots(t.scale,t.rotate)})))}),o.pdfViewer.eventEmitter.on(Ct.imageAdded,o.imageAdded=function(t){o.pageRenders[t.getIndex()].redrawContent(!0).then((function(t){o.setRenderFlags(2),o.renderVisiblePages()}))}),o.pdfViewer.eventEmitter.on(Ct.watermarkAdded,o.watermarkAdded=o.imageAdded),o.pdfViewer.eventEmitter.on(Ct.graphicsUpdated,o.graphicsUpdated=o.imageAdded),o.pdfViewer.eventEmitter.on(Ct.pageAdded,o.pageAdded=function(t){var e=t.getIndex();o.addNewPageByIndex(e)}),o.pdfViewer.eventEmitter.on(Ct.pageMoved,o.pageMoved=function(t,e){o.movePageRender(t,e)}),o.pdfViewer.eventEmitter.on(Ct.pagesMoved,o.pagesMoved=function(t,e,n){o.movePagesRender(t,e,n)}),o.pdfViewer.eventEmitter.on(Ct.pageRemoved,o.pageRemoved=function(t){o.removePageByIndex(t);var e=o.pageRenders.length,n=o.viewMode.getCurrentPageIndex();if(n===t){var r=Math.min(n,e-1);o.docRender.goToPage(r),o.viewMode.currentPageIndex=r}}),o.pdfViewer.eventEmitter.on(Ct.pagesRemoved,o.pagesRemoved=function(t){var e=Fa(t).sort((function(t,e){return e-t})),n=o.viewMode.getCurrentPageIndex();e.forEach((function(t){var e=o.pageRenders[t];e&&(e.destroy(),o.pageRenders.splice(t,1),t<n&&n--)})),o.pageRenders.forEach((function(t,e){t.updateIndex(e)})),o.updatePageDOMs();var r=o.doc.getPageCount();n=Math.max(0,Math.min(n,r-1)),o.docRender.goToPage(n),o.viewMode.currentPageIndex=n}),o.pdfViewer.eventEmitter.on(Ct.importPages,o.importPages=function(t){o.importPagesByArray(t)}),o.pdfViewer.eventEmitter.on(Ct.pagesReplace,o.pagesReplace=function(t){var e=t.delPageRange,n=t.pages;e.sort((function(t,e){return e-t})).forEach((function(t){o.removePageByIndex(t)})),o.importPagesByArray(n)}),o.pdfViewer.eventEmitter.on(Ct.applyRedaction,o.applyRedaction=function(t){var e=o.pdfViewer;if(!1!==t){var n=e.getPDFDocRender(),r=n.pagesRender;if(!r)return;t.forEach((function(t){var e=t.pageIndex,r=t.removedAnnots,i=n.pagesRender.pageRenders[e];if(i.annotsRender)for(var o=i.annotsRender.annots,a=o.length-1;a>=0;a--){var s=o[a];-1!==r.indexOf(s.objectNumber)&&(s.info.isDeleted=!0,o.splice(a,1))}})),r.setRenderFlags(10),r.renderVisiblePages(),e.eventEmitter.emit(Ct.redactAnnotApplyed,F()(o))}}),o.pdfViewer.eventEmitter.on(Ct.flattened,o.flattened=function(t){o.setRenderFlags(10),o.renderVisiblePages()}),o.pdfViewer.eventEmitter.on(Ct.headerFooterUpdated,o.headerFooterUpdated=o.flattened),o.pdfViewer.eventEmitter.on(Ct.headerFooterAdded,o.headerFooterAdded=o.flattened),o.pdfViewer.eventEmitter.on(Ct.updateZoomMode,o.updateZoomMode=function(t){return o.updatePagesDomSize(t,!0,o.viewMode.pageDOMs)}),o}O()(e,t),e.getDefaultName=function(){return"pdfPagesRender"};var n=e.prototype;return n.setViewMode=function(t){var e=this,n=this.viewMode,r=n.getCurrentPageIndex();return this.getScaleRatio().then((function(i){if(n.out(),!e.docRender.isDestroyed){e.viewMode=new t(e.docRender),e.viewMode.into(e.$ui.get(0),e.pageDOMs,r),e.setRenderFlags(4),e.docRender.goToPage(r,{x:0,y:0});var o=Object.keys(e.doc.getPageSizesSync());return e.loadPageSize(o,0).then((function(t){return e.renderVisiblePages(i)})).then((function(){"fitWidth"===e.scale&&e.renderVisiblePages()})).catch((function(t){0}))}}))},n.getViewMode=function(){return this.viewMode},n.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.scale=e,this.rotate=n,this.createPagesStructure(),this.viewMode.pageDOMs.length||this.viewMode.into(this.$ui.get(0),this.pageDOMs),this.docRender.rendered(),Promise.resolve().then((function(e){return t.docRender.move()}))},n.getScaleSyncOrNot=function(t,e,n,r){"fitVisible"!==n?t(this.getPageScaleSync(e,n,r)):this.getPageScale(e,n,r).then((function(e){t(e)}))},n.movePageRender=function(t,e){var n=this,r=this.pageRenders[t];if(r){var i=r.$ui.parent(),o=this.pageRenders[e];if(o){var a=o.$ui.parent();t<e?i.insertAfter(a):i.insertBefore(a),this.pageRenders.splice(t,1),this.pageRenders.splice(e,0,r);for(var s=Math.min(t,e),c=Math.max(t,e),u=s;u<=c;u++)this.pageRenders[u].updateIndex(u);this.updatePageDOMs(),this.getScaleRatio().then((function(t){return n.renderVisiblePages(t).catch((function(t){0}))}))}}},n.movePagesRenderBAK=function(t,e){var n=this,r=t.filter((function(t){return t<e})),i=t.filter((function(t){return t>=e})),o=this.pageRenders.length,a=e===o,s=function(t,e){var r=n.pageRenders[t];if(r){var i=r.$ui.parent(),o=n.pageRenders[e];if(o){var a=o.$ui.parent();i.insertBefore(a)}}};r.reverse().forEach((function(t,r){var i=n.pageRenders[t];s(t,e-r),n.pageRenders.splice(t,1),n.pageRenders.splice(e-r-1,0,i)})),i.forEach((function(t,r){var i=n.pageRenders[t];s(t,e+r),n.pageRenders.splice(t,1),n.pageRenders.splice(e+r,0,i)}));for(var c=a?e-1:e,u=Math.min(Math.min.apply(null,t),c),d=Math.max(Math.max.apply(null,t),c),l=u;l<=d;l++)this.pageRenders[l].updateIndex(l);this.updatePageDOMs(),this.getScaleRatio().then((function(t){return n.renderVisiblePages(t).catch((function(t){0}))}))},n.movePagesRender=function(t,e,n){var r=this,i=this.pageRenders.length;t.reduce((function(t,n){var o=r.pageRenders[n].$ui.parent();return t?o.insertAfter(t):""===t&&(e===i?o.insertAfter(r.pageRenders[i-1].$ui.parent()):o.insertBefore(r.pageRenders[e].$ui.parent())),o}),"");var o,a=this.pageRenders;t.map((function(t){return a[t]})).forEach((function(t,n){var r=a.indexOf(t);if(a.splice(r,1),0===n)r<e?a.splice(e-1,0,t):a.splice(e,0,t);else{var i=a.indexOf(o);a.splice(i+1,0,t)}o=t})),a.forEach((function(t,e){t.updateIndex(e)})),this.updatePageDOMs(),this.getScaleRatio().then((function(t){return r.renderVisiblePages(t).catch((function(t){0}))}))},n._updatePageRenders=function(t,e){var n=B()(G.a),r=n.get(0);if(this.pageRenders[t]){if(!e){var i=this.pageRenders[t].$ui.parent();n.insertBefore(i)}this.pageDOMs.splice(t,0,r)}else e||this.$ui.append(n),this.pageDOMs.push(r);var o=n.find(".fv__pdf-page-layout"),a=new ka(o,t,this.doc,this);this.pageRenders.splice(t,0,a);for(var s=t+1;s<this.pageRenders.length;s++)this.pageRenders[s].updateIndex(s)},n.addNewPageByIndex=function(t){var e=this,n=this.viewMode instanceof Va;return this._updatePageRenders(t,n),this.updatePageDOMs(),this.getScaleRatio().then((function(n){var r=e.pageRenders[t];if(r)return e.getScaleSyncOrNot((function(t){return r.updatePageDOMRect(t,e.rotate)}),t,n,e.rotate),e.renderVisiblePages(n).catch((function(t){0}))}))},n.importPagesByArray=function(t){var e=this,n=z(),r=this.importPagesByArrayPromises=this.importPagesByArrayPromises||Promise.resolve();return this.importPagesByArrayPromises=r.finally((function(){var r=e.viewMode instanceof Va;return t.forEach((function(t){var n=t.getIndex();e._updatePageRenders(n,r);var i=e.pageRenders[n];i&&e.getScaleSyncOrNot((function(t){return i.updatePageDOMRect(t,e.rotate)}),n,e.scale,e.rotate)})),e.updatePageDOMs(),e.docRender.loadFormRender(!0).then((function(t){return e.setRenderFlags(8),e.renderVisiblePages(e.scale)})).then((function(){return n.resolve()})).catch((function(t){return n.reject()}))})),n.promise},n.removePageByIndex=function(t){if(this.pageRenders[t]){var e=this.pageRenders.splice(t,1)[0];e.$ui.parent().remove().next(".fv__pdf-view-mode-item-split").remove(),e.destroy();for(var n=t;n<this.pageRenders.length;n++)this.pageRenders[n].updateIndex(n);this.pageDOMs.splice(t,1)}this.updatePageDOMs(),this.renderVisiblePages(this.scale).catch((function(t){0}))},n.updatePageDOMs=function(){this.pageDOMs=this.pageRenders.map((function(t){return t.$element.get(0)})),this.viewMode.updatePageDOMs(this.pageDOMs)},n.setRenderFlags=function(t){for(var e=this.pageRenders,n=0,r=e.length;n<r;n++)e[n].updateRenderFlags(t)},n.loadPageSize=function(t){for(var e,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;this.doc.getPageSize(t[i]);)i++;if(i==t.length)e=Promise.resolve();else{var o=t[i];e=this.doc.getPageSizes(o+r,7)}return e.then((function(t){var e=n.doc.getPageSizesSync(),r=function(t){if(t=+t,!n.pageRenders[t])return i=t,{v:void 0};n.getScaleSyncOrNot((function(e){return n.pageRenders[t].updatePageDOMRect(e,n.rotate)}),t,n.scale,n.rotate),i=t};for(var i in e){var o=r(i);if("object"===_()(o))return o.v}}))},n.renderVisiblePages=function(){var t=this;arguments.length>0&&void 0!==arguments[0]||this.docRender.getScale(),arguments.length>1&&void 0!==arguments[1]||this.rotate;if(this.isDestroyed)return Promise.resolve();var e=function(){var e=t.viewMode.getVisibleIndexes();return t.loadPageSize(e,-3).then((function(){return t.adjustRenderVisiblePages(t.scale,t.rotate)})).then((function(){t.viewMode.afterRenderVisiblePages(),t.pdfViewer.eventEmitter.emit(Ct.visiblePagesRenderCompleted),t.renderingTask=null}))};return this.renderingTask=e()},n.adjustRenderVisiblePages=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.docRender.getScale(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=this.viewMode,i=r.getVisibleIndexes();return this.renderPages(i,e,n).then((function(){if(r.docRender&&0!==r.pageDOMs.length)return r.getVisibleIndexes().filter((function(t){return-1===i.indexOf(t)})).length>0?t.adjustRenderVisiblePages(e,n):void 0}))},n.renderPages=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.docRender.getScale(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotate;if(this.isDestroyed)return Promise.resolve();var i=this.docRender.doc,o=this.renderPagesSerial;o&&o.end().catch((function(t){0})),o=this.renderPagesSerial=new Lt;for(var a=0;i.getPageSize(e[a]);)a++;var s=[];a<e.length&&s.push((function(t){return i.getPageSizes(e[a],e.length)}));for(var c=0,u=e.length;c<u;c++){var d=e[c];s.push(function(e,n){return function(){return t.getPageScale(e,n,r).then((function(n){var i=t.pageRenders[e];return i?i.render(n,r).then((function(t){var e=i.$annotsContainer.get(0),n="fv__viewer-annot-container-hide";e.classList.contains(n)&&e.classList.remove(n)})):Promise.resolve()})).catch((function(t){return console.log("PDFPagesRender ~ renderPages => getPageScale ~ err",t),Promise.resolve()}))}}(d,n))}return o.serial(s)},n.renderPagesLayout=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isDestroyed)return Promise.resolve();var r=this.renderPagesSerial;r&&r.end().catch((function(t){0})),r=this.renderPagesSerial=new Lt;for(var i=0;this.doc.getPageSize(e[i++]););for(var o=[function(n){return t.doc.getPageSizes(e[i],e.length-i)}],a=0,s=e.length;a<s;a++){var c=e[a];o.push(function(e,n){return function(){return t.getPageScale(e,n).then((function(n){if(t.pageRenders[e])return t.pageRenders[e].renderLayout(n)}))}}(c,n))}return r.serial(o)},n.destroy=function(){var e=this;t.prototype.destroy.call(this);for(var n=this.pageRenders.length;n--;)this.pageRenders[n].destroy();this.pageRenders=[],this.renderPagesSerial&&this.renderPagesSerial.end().catch((function(t){0})),this.viewMode.out(),this.viewMode=null,this.$ui.empty(),this.pageDOMs.length=0;var r=this.pdfViewer.eventEmitter;["actionAdd","actionRemove","layerVisibleChange","imageAdded","watermarkAdded","graphicsUpdated","pageAdded","pagesInserted","pageMoved","pagesMoved","pageRemoved","pagesRemoved","importPages","applyRedaction","flattened","headerFooterUpdated","headerFooterAdded","pagesReplace","articleThreadUpdated","articleBeadAdded","articleBeadUpdated","updateZoomMode"].forEach((function(t){e[t]&&r.off(Ct[t],e[t]),e[t]=null})),this.renderPagesSerial&&this.renderPagesSerial.end(),this.renderPagesSerial=null},n.goToPage=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=this.getPDFPageRender(t);if(o)return o.getPDFPage().then((function(a){return o.renderLayout(e).then((function(){return n.viewMode.jumpToPage(t,{x:r,y:i}),n.renderVisiblePages()})).then((function(){n.viewMode.jumpToPage(t,{x:r,y:i})})).catch((function(t){Ba.debug(t)}))}))},n.updatePagesDomSize=function(t,e,n){var r=this,i=this.viewMode.getCurrentPageIndex(),o=this.pageRenders[i].pageContentTiles,a=o?o.scale:0,s=4*t/3;return!e&&Math.abs(a-t)<1e-6?Promise.resolve():(isNaN(t)?this.getPageScale(0,t).then((function(t){return s=4*t/3})):Promise.resolve()).then((function(e){var i=r.doc,o=i.getPageSize(0);o||(o=i.getEstimatedPageSize(0));var c=o,u=c.width,d=c.height;switch(r.rotate/90){case 1:case 3:var l=u;u=d,d=l}var h=n?B()(n):r.$ui;h.find(".fv__pdf-page-layout").css({width:u*s,height:d*s});var f=h.find(".fv__pdf-page-content-container"),p=t/a;p<1?f.css("transform","scaleY("+p+")"):f.css("transform","scale("+p+")")}))},n.zoomTo=function(t,e){var n=this;this.scale=t,this.doc.clearAllDesignerAssistCache();var r=[];return r.push(this.updatePagesDomSize(t,!1,this.viewMode.pageDOMs)),this.doc.isPageSameSize()?this.pageRenders.forEach((function(e){e.page?r.push(n.getPageScale(e.index,t,n.rotate).then((function(t){return e.updateRenderFlagsByScaleAndRotate(t,n.rotate),e.scale=t,e.rotate=n.rotate,e.computePageSize(t,n.rotate).then((function(r){var i=S()(r,2),o=i[0],a=i[1];return n.viewMode.renderViewMode(e,t,n.rotate,o,a)}))}))):(e.scale=t,e.rotate=n.rotate)})):this.pageRenders.forEach((function(e){e.page?r.push(n.getPageScale(e.index,t,n.rotate).then((function(t){return e.renderLayout(t)}))):(e.scale=t,e.rotate=n.rotate)})),Promise.all(r).then((function(r){var i=e.pageIndex;if("device"==e.type)return Promise.resolve(n.viewMode.jumpToPage(i,e));var o=n.pageRenders[i],a=o.page;return n.getPageScale(i,t,n.rotate).then((function(t){if(a){var r=a.getDevicePoint([e.x,e.y],t,n.rotate);return r[1]+=8,Promise.resolve(n.viewMode.jumpToPage(i,{x:r[0],y:r[1]}))}return o.getPDFPage().then((function(r){var o=r.getDevicePoint([e.x,e.y],t,n.rotate);return o[1]+=8,Promise.resolve(n.viewMode.jumpToPage(i,{x:o[0],y:o[1]}))}))}))}))},n.getScaleRatio=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.docRender.getScale(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.viewMode.getCurrentPageIndex();return n>=this.docRender.getPDFDoc().getPageCount()&&(n=this.docRender.getPDFDoc().getPageCount()-1),this.getPageScale(n,t,e)},n.rotateTo=function(t){var e=this;X(Q(t),"Illegal rotation angle: ".concat(t,", it should be 0,90,180 or 270")),this.rotate=(t%360+360)%360;var n=this.viewMode.getVisibleIndexes();return Promise.all(n.map((function(t){var n=e.pageRenders[t];return n.$annotsContainer.addClass("fv__viewer-annot-container-hide"),n.clearCanvasCache(!0),n.renderLayout(void 0,e.rotate)}))).then((function(t){return e.setRenderFlags(7),e.renderVisiblePages(e.scale,e.rotate)})).then((function(t){return Promise.all(e.pageRenders.map((function(t){if(-1===n.indexOf(t.index))return t.renderLayout(void 0,e.rotate)})))})).finally((function(t){e.pdfViewer.eventEmitter.emit(Ct.fitWidthResizeViewport)}))},n.adjustFitPage=function(t){var e,n,r=this.doc.getPageSize(t);return r&&(e=r.height,n=r.width),e||(e=(r=this.doc.getPageSize(0)).height,n=r.width),e/n>this.viewMode.getFitHeight(t)/this.viewMode.getFitWidth(t)?"fitHeight":"fitWidth"},n.getPageScaleSync=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this._getPageScaleSync(t,e,n)},n._getPageScaleSync=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return n.doc.getPageSize(t)};if(r=(r%360+360)%360,"fitHeight"===e&&(e=this.adjustFitPage(t)),+e>this.minScale)return Math.min(+e,this.maxScale);if(+e<=this.minScale)return this.minScale;if("fitWidth"===e){var o=i();if(o||(o=this.doc.getEstimatedPageSize(t)),o){var a=this.viewMode.getFitWidth(t),s=90===r||270===r?o.height:o.width;return a/(s*ut(1))}}else if("fitHeight"===e){var c=i();if(c||(c=this.doc.getEstimatedPageSize(t)),c){var u=90===r||270===r?c.width:c.height;return this.viewMode.getFitHeight(t)/(u*ut(1))}}return-1},n.getEstimatedPageScaleSync=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this._getPageScaleSync(t,e,r,(function(){return n.doc.getEstimatedPageSize(t)}))},n.getPageScale=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotate;return this.viewMode&&this.doc?("fitHeight"===e&&(e=this.adjustFitPage(t)),+e>this.minScale?Promise.resolve(Math.min(+e,this.maxScale)):+e<=this.minScale?Promise.resolve(this.minScale):"fitWidth"===e?this.doc.getPageByIndex(t).then((function(e){return n.viewMode?n.viewMode.getFitWidth(t)/(90===r||270===r?e.getPxHeight():e.getPxWidth()):Promise.resolve(1)})):"fitVisible"===e?this.doc.getPageByIndex(t).then((function(e){return e.calcPageContentBBox(Xe.CalcContentsBox).then((function(i){if(!n.viewMode)return Promise.resolve(1);var o=1,a=e.getRotation(),s=n.viewMode.getFitWidth(t);return i&&void 0!==i.left&&i.left!==i.right&&i.top!==i.bottom&&(o=(o=1===a||3===a?e.info.mediaHeight/Math.abs(i.top-i.bottom):e.info.mediaWidth/Math.abs(i.right-i.left))>1.5?1.5:o),s*o/(90===r||270===r?e.getPxHeight():e.getPxWidth())}))})):"fitHeight"===e?Promise.all([this.viewMode.getFitHeight(t),this.pageRenders[t].getPDFPage().then((function(t){return 90===r||270===r?t.getPxWidth():t.getPxHeight()}))]).then((function(t){var e=S()(t,2);return e[0]/e[1]})):Promise.resolve(1)):Promise.resolve(1)},n.createPagesStructure=function(){var t=this;if(!this.pageDOMs.length){var e=this.doc.getPageCount(),n=function(){var t=document.createElement("div");t.innerHTML=G.a;var e=t.firstElementChild;return t.removeChild(e),e}(),r=Array(e).fill(0).map((function(t){return n.cloneNode(!0)}));r.forEach((function(e,n){var r=e.firstElementChild;t.pageRenders[n]||(t.pageRenders[n]=new ka(B()(r),n,t.doc,t))})),this.pageDOMs=r,this.isPageDOMsLoaded=!0}},n.getPDFPageRender=function(t){try{return this.pageRenders[t]}catch(t){return null}},n.unActiveAnnotRender=function(){for(var t=this.pageRenders||[],e=t.length;e--;){t[e].unActiveAnnotRender()}},n.moveTo=function(t){return this.pagesEndRender(t),this.renderPages(t)},n.pagesEndRender=function(t){var e=this.pageRenders||[],n=e.length,r=t[0]||0;if(--r>-1)for(var i=r;i--;){var o=e[i];o&&o.invisibleRender()}var a=t[t.length-1]||0;if(++a<n)for(var s=a;s<n;s++){var c=e[s];c&&c.invisibleRender()}},e}(mt),ja=function(){function t(t,e){this.$ui=B()(t),this.docRender=e,this.viewerRender=e.viewerRender,this.pdfViewer=this.viewerRender.pdfViewer}var e=t.prototype;return e.rendering=function(){this.closeLoadingFn=this.pdfViewer.viewerUI.loading(this.$ui.get(0))},e.rendered=function(){this.closeLoadingFn&&this.closeLoadingFn(),this.$ui.empty()},e.destroy=function(){this.$ui=null},t}(),Ha=function(){function t(t,e){this.eCustom=t,this.pdfDocRender=e,this.doc=e.doc}var e=t.prototype;return e.render=function(t){},e.destroy=function(){this.pdfDocRender=null,this.doc=null},t}();var Wa=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4294967292;this.permissions=t}var e=t.prototype;return e.getValue=function(){return this.permissions},e.checkPrint=function(){return this.permissions&Tn.print},e.checkModify=function(){return this.permissions&Tn.modify},e.checkExtract=function(){return this.permissions&Tn.extract},e.checkAnnotForm=function(){return this.permissions&Tn.annotForm},e.checkFillForm=function(){return this.permissions&Tn.fillForm},e.checkExtractAccess=function(){return this.permissions&Tn.extractAccess},e.checkAssemble=function(){return this.permissions&Tn.assemble},e.checkPrintHigh=function(){return this.permissions&Tn.printHigh},e.checkCannotModifyAny=function(){return 0==(1323&this.permissions)},e.putCannotModifyAny=function(){return this.or(-1324)},e.checkCannotModifyExcludeAssemble=function(){return 0==(299&this.permissions)},e.putCannotModifyExcludeAssemble=function(){return this.or(-300)},e.and=function(t){return this.permissions=this.permissions&t,this},e.or=function(t){return this.permissions=this.permissions|t,this},t}(),$a=(n(103),n(241)),Ya=n.n($a);function qa(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ga(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ga(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ga(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var za=["CreatePushButtonStateHandler","CreateCheckBoxStateHandler","CreateRadioButtonStateHandler","CreateComboBoxStateHandler","CreateListBoxStateHandler","CreateTextStateHandler","CreateSignStateHandler","CreateDateStateHandler","CreateImageStateHandler"];var Ka=function(t){function e(e,n){var r,i;(i=t.call(this,n)||this).doc=e,i.docRender=n,i.isRunningAction=!1;var o=e.getPDFForm();if(!o)return F()(i);o.setActionHandler((function(t,e,n,r){return i.execAction("Field",t,e,n,r)}));var a=i.viewerEvents=(r={},R()(r,Ct.switchStateHandler,(function(t,e){i.blurControl()})),R()(r,Ct.tapPage,(function(){i.blurControl(),i.initTabParams()})),R()(r,Ct.tapAnnotation,(function(){i.blurControl()})),R()(r,Ct.openFileSuccess,(function(){i.control=null,i.initTabParams()})),R()(r,Ct.renderPageSuccess,(function(t){i.currentDocId!==t.doc.id&&i.initTabParams(),i.currentDocId=t.doc.id,i.afterPageRender&&(i.afterPageRender(),i.afterPageRender=null)})),R()(r,Ct.activeAnnotation,(function(t){var e=t.getAnnot();i.initTabParams(e)})),R()(r,"tap-field",(function(t){i.initTabParams(t)})),r);for(var s in a)i.pdfViewer.eventEmitter.on(s,a[s]);return i.runtimeHighlight=!0,i}O()(e,t);var n=e.prototype;return n.usingHTML=function(t){var e,n=(e={},R()(e,Ln.Unknown,""),R()(e,Ln.PushButton,"pushButton"),R()(e,Ln.CheckBox,""),R()(e,Ln.RadioButton,"radioButton"),R()(e,Ln.Text,"textField"),R()(e,Ln.ListBox,"listBox"),R()(e,Ln.ComboBox,"comboBox"),R()(e,Ln.Sign,""),e)[t];return"canvas"===this.pdfViewer.config.annotRenderingMode[n]},n.addTask=function(t,e){return this.doc.getPDFForm()?this.doc.getPDFForm().addTask(t,e):Promise.resolve(t())},n.initJS=function(){var t=this.doc.getJsNameTree(),e="";for(var n in t)"!ADBE::0200_VersChkCode_XFACheck"!==n&&(e+=t[n]+"\n");var r=this.doc.action;r&&r.getScript&&(e+=r.getScript());var i=this.pdfViewer.JSEngine;i.initEvent(13,null,null,"Init",{doc:this.doc}),i.resetClosure(e);var o=this.doc.getPDFForm();if(o&&!o.isEmpty())return o.addTask().then((function(t){return o.setState("jsInited")}));o&&o.setState("jsInited")},n.goPreviousOrNextWidget=function(t){var e=this,n=this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName(),r=this.pdfViewer.getPDFPageRender(this.currentPageNumber).page;r&&r.getAnnotIdArrayByOrder().then((function(n){if(e.tabIndex+="previous"===t?-1:1,!(e.tabIndex<0||e.tabIndex>n.length-1)){var i=n[e.tabIndex];return r.getAnnotsByObjectNumArray([i])}e.goToPreviousOrNextPage(t)})).then((function(r){if(r){var i=r[0];if(i&&"widget"===i.getType())if("hand"===n){var o=i.getField();if(!o)return;var a=1===Nn.isReadOnly(o.getFlags()),s=e.checkWidgetVisibleType(i);a||"hidden"===s||"hiddenButPrintable"===s?e.goPreviousOrNextWidget(t):(i.updateUI&&i.updateUI({type:"focus"}),e.pdfViewer.eventEmitter.emit("tab-active",i))}else"hand"!==n&&e.pdfViewer.eventEmitter.emit("tab-active",i);else e.goPreviousOrNextWidget(t)}}))},n.goToPreviousOrNextPage=function(t){var e=this,n=this.doc.getPageCount(),r=this.currentPageNumber,i="previous"===t?r-1:r+1;i<0?i=n-1:i>=n&&(i=0),this.doc.getPageByIndex(i).then((function(t){return t.getAnnotIdArrayByOrder().then((function(e){var n,r=!1,i=qa(t.annots);try{for(i.s();!(n=i.n()).done;){if("widget"===n.value.getType()){r=!0;break}}}catch(t){i.e(t)}finally{i.f()}return[e,r]}))})).then((function(r){var o=S()(r,2),a=o[0],s=o[1];if(e.currentPageNumber=i,s){if(e.tabIndex="previous"===t?a.length:-1,e.docRender.currentPageNumber===i)return void e.goPreviousOrNextWidget(t);e.docRender.goToPage(i,0,0,!1).then((function(){1===n?e.goPreviousOrNextWidget(t):e.afterPageRender=function(){return e.goPreviousOrNextWidget(t)}}))}else e.goToPreviousOrNextPage(t)}))},n.setTabIndexByAnnotId=function(t){},n.initTabParams=function(t){var e=this;if(this.tabIndex=-1,this.currentPageNumber=this.docRender.currentPageNumber,t){var n=t.objectNumber,r=t.getPage();this.currentPageNumber=r.getIndex(),r.getAnnotIdArrayByOrder().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.tabIndex=t.indexOf(n)}))}},n.checkWidgetVisibleType=function(t){var e=t.getFlags(),n=e&kn.print,r=e&kn.noView,i="".concat(e&kn.hidden,"_").concat(n,"_").concat(r);switch(i){case"0_4_0":i="visible";break;case"2_4_0":i="hidden";break;case"0_0_0":i="visibleButUnprintable";break;case"0_4_32":i="hiddenButPrintable"}return i},n.showWigetInArea=function(t,e){var n=document.getElementsByClassName("fv__ui-pdfviewer")[0],r=t.annotsRender.getAnnotRender(e.getId()).component.$handler[0],i=r.getBoundingClientRect(),o=document.body.clientWidth,a=document.body.clientHeight;(o-i.x<i.width||i.x<i.width)&&(n.scrollLeft=r.offsetLeft),(a-i.y<i.height||i.y<i.height)&&(n.scrollTop=r.offsetTop)},n.getNextStepWidget=function(t,e){var n=this.pageIndex;return e?this.getPreviousWidget(t,n):this.getNextWidget(t,n)},n.getFilterAnnot=function(){var t=this,e={},n={},r=this.pdfViewer.currentPDFDoc.getPDFForm().fields,i=[];return r.map((function(t){return t.controls.map((function(t){return t.getWidgetAnnot()}))})).forEach((function(t){i=i.concat(t)})),Promise.all(i).then((function(r){return(r=r.sort((function(t,e){return t.getPage().getIndex()<e.getPage().getIndex()?-1:1}))).forEach((function(t,e){null==n[t.getPage().getIndex()]&&(n[t.getPage().getIndex()]=[]),n[t.getPage().getIndex()].push(t)})),Object.keys(n).forEach((function(r){var i=t.filterWidgets(n[r]);i.length>0&&(e[r]=i)})),e}))},n.filterWidgets=function(t){var e=t.filter((function(t){return"widget"==t.getType()&&261!==t.getField().getFlags()}));return e=(e=e.filter((function(t){var e=t.getFlags()&kn.hidden,n=t.getFlags()&kn.print,r=t.getFlags()&kn.noView;return!(Nn.isReadOnly(t.getField().getFlags())||2==e&&4==n&&0==r||0==e&&4==n&&32==r)}))).sort((function(t,e){return t.info.index<e.info.index?-1:1}))},n.getPreviousWidget=function(t,e){var n=this,r={},i=Object.keys(t),o=t[e].findIndex((function(t){t.getField().getControlById(n.widget.getObjNum());return n.widget.getObjNum()==t.getObjNum()}));if(0==o){var a=i[i.length-1];if(e>0){var s=i.findIndex((function(t){return t==e}));e=i[s-=1]}else e=a;r=t[e][t[e].length-1]}else o>0&&o<=t[e].length-1&&--o,r=t[e][o];return r},n.getNextWidget=function(t,e){var n=this,r={},i=Object.keys(t),o=t[e].findIndex((function(t){return n.widget.getObjNum()==t.getObjNum()}));if(o==t[e].length-1){var a=i[i.length-1];if(e<a){var s=i.findIndex((function(t){return t==e}));e=i[s+=1]}else e=0;r=t[e][0]}else o>=0&&o<t[e].length-1&&++o,r=t[e][o];return r},n.destroy=function(){var t=this.viewerEvents;for(var e in t)this.pdfViewer.eventEmitter.off(e,t[e]),t[e]=null;this.viewerEvents=null,this.msgQueue&&(this.msgQueue.destroy(),delete this.msgQueue)},n.setRuntimeHighlight=function(t){var e=".fv__ui-form-foreground:not(.form-field-readonly)";t&&this.pdfViewer.highlightControlsUI()?B()(e).show():B()(e).hide(),this.runtimeHighlight=!1},n.setRuntimeHighlightColor=function(t,e,n,r){[e,r].forEach((function(e,r){var i=".fv__ui-form-foreground"+(0==r?":not(.required)":".required");B()(i).css("background-color",xn(0==r?t:n,"HTML",e))}))},n.isReadOnly=function(){var t=this.docRender.getUserPermission().getValue();return!(32&t||256&t)},n.isSameTarget=function(t){return this.control==t},n.focusControl=function(t,e){var n=this;if(this.control!=t){if(t&&function(t){var e=t.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);return e.bottom<100||e.top>n}(t.$handler[0])){var r=t.annot,i=r.getPage().getIndex(),o=r.getRect();this.pdfViewer.getPDFDocRender().goToPage(i,{x:o.left,y:o.bottom,width:o.right-o.left,height:o.top-o.bottom},!0)}return(this.control&&this.control.annot?Promise.resolve(this.blurControl()):Promise.resolve(!1)).then((function(r){r&&!e||(n.control=t,t&&t.focus(e))}))}},n.blurControl=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this.isRunningAction||this.control&&this.control.isOnFocus)){var e=this.pdfViewer,n=e.getStateHandlerManager().getCurrentStates().getStateName();za.indexOf(n)>-1?e.setHighlightControlsUI(!1):e.setHighlightControlsUI(e.highlightControls());var r=this.control;return this.control=null,r&&r.annot?(e.unActiveElement(r),r.blur(t,t)):void 0}},n.setValue=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.getField(),i=r.getValue();r.setValueWithoutAction(e);var o={rc:!0},a=!0;e===i&&(a=!1);var s=!1,c=r.getAction(Zi.FieldKeyStroke);if(a&&c){if(o=this.execAction("Field",c,null,r,Zi.FieldKeyStroke,{change:e,willCommit:n}),!r.form||!r.doc)return Promise.resolve(!1);o&&-1!==o&&(o.rc?(o.changed||(o.change=e),r.setValueWithoutAction(o.change)):(s=!0,e=i))}if(s)return r.setValue(i).then((function(){return Promise.resolve(o.rc)}));if(c=r.getAction(Zi.FieldValueChanged),a&&c){if(o=this.execAction("Field",c,null,r,Zi.FieldValueChanged),!r.form||!r.doc)return Promise.resolve(!1);-1!==o&&(o.rc?(void 0===o.value&&(o.value=e),r.setValueWithoutAction(o.value)):s=!0)}return r.form&&r.doc?s?r.setValue(i).then((function(){return Promise.resolve(o.rc)})):a?r.syncValue(r.getValue(),this).then((function(){return r.form?(r.form.calculate(r),Promise.resolve(o&&o.rc)):Promise.resolve(!1)})):(c=r.getAction(Zi.FieldWillFormat),r.getValue()&&c&&(o=this.execAction("Field",c,null,r,Zi.FieldWillFormat)),r.form?o&&!o.rc?r.setValue(i).then((function(){return Promise.resolve(o.rc)})):Promise.resolve(o&&o.rc):Promise.resolve(!1)):Promise.resolve(!1)},n.calculate=function(t){this.doc.getPDFForm().calculate(t)},n.execAction=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!e)return!0;var s=this.pdfViewer.actionManager.get(e,this);s.setSourceTarget(r,i);var c=e.getType();switch(c){case"TypeJavaScript":return s.setTypeName(t,o),s.setParam(a),s.active();case"TypeURI":return this.isRunningAction=!0,s.active((function(t){if(n.isRunningAction=!1,n.control){var e=n.control.$textInput;e&&e.focus()}}));default:s.active()}return-1},n.getFormatedData=function(t){var e=this,n={},r=this.doc.getPDFForm();return r.enumFields([],0,(function(i,o,a){var s=r.getField(o),c=s.getAction(Zi.FieldWillFormat);if(6==i&&c){var u=a;if("display"==t)if(s.getDisplayValue())n[o]=s.getDisplayValue();else{var d=a.length>0&&c&&e.execAction("Field",c,null,s,Zi.FieldWillFormat);!1!==d&&d&&d.rc&&(u=d.value),n[o]=u}else n[o]=u}})),n},n.reshowDTPicker=function(t){this.dt._input||(this.dt._input=this.dt._inputTemp),this.dt.open(null,t)},n.showDateTimePicker=function(t,e,n,r){var i=this,o=-1!==e.indexOf("H"),a=-1!==e.indexOf("s")||-1!==e.indexOf("S"),s={onClose:[r],onMonthChange:[function(t,n,o){var a=new Date(t[0].getTime());a.setMonth(o.currentMonth),a.setFullYear(o.currentYear);var s=o.formatDate(a,e);i.dt.setDate(s,!1,e),r("",s)}],onYearChange:[function(t,n,o){if(e.match(/y|Y/)){var a=new Date(t[0].getTime());a.setMonth(o.currentMonth),a.setFullYear(o.currentYear);var s=o.formatDate(a,e);i.dt.setDate(s,!1,e),r("",s)}}],clickOpens:!1,now:new Date,allowInput:!0,dateFormat:e,enableTime:!0,time_24hr:!1,enableSeconds:!0},c=this.dt=this.dt||Ya()(n,s);this.dt._input||(this.dt._input=this.dt._inputTemp),B()(c.timeContainer).toggle(!!e.match(/h|H|i/));var u=!!e.match(/m|d|y|F|M|Y/);B()(c.monthNav).toggle(u),B()(c.innerContainer).toggle(u),o?c.amPMTemp||(c.amPMTemp=c.amPM,delete c.amPM):c.amPM||(c.amPM=c.amPMTemp,delete c.amPMTemp),B()(c.amPM||c.amPMTemp).toggle(!o),o?(B()(c.hourElement).attr("min",0),B()(c.hourElement).attr("max",23)):(B()(c.hourElement).attr("min",0),B()(c.hourElement).attr("max",12)),c.element=c.input=n,s.time_24hr=o,s.enableSeconds=a,A()(c.config,s);var d=t,l=e;if(t.length>0&&-1===e.indexOf("d")){var h=new Date,f=t.indexOf("/");d=t.slice(0,f)+"/"+h.getDate()+t.slice(f),f=e.indexOf("/"),l=e.slice(0,f)+"/d"+e.slice(f)}c.setDate(d,!1,l),B()(c).find(".flatpickr-time .flatpickr-time-separator").toggle(!!e.match(/d/));var p=B()(c.timeContainer).find(".flatpickr-second").parent();p.toggle(a),p.prev().toggle(a),setTimeout((function(){c.redraw(),c.open(null,n)}),10),delete n._flatpickr},n._bindTabEvent=function(t){var e=this;this.doc.getAnnots().then((function(n){n.some((function(t){return t.some((function(t){return"widget"!==t.getType}))}))&&e.goPreviousOrNextWidget(t)}))},n._stopInterceptor=function(t,e){var n=t.native.target;(!!n.closest(".fv__pdf-form-control-handler-container")||"BODY"===n.nodeName)&&e(t)},e}(mt),Ja=(n(422),function(){function t(t,e){this.pdfviewer=t,this.docRender=e,this.$ui=B()('<canvas class="fv_shapes_ui"></canvas>')}var e=t.prototype;return e.initPageShapes=function(t){if(this.targetPage&&this.targetPage.index==t)return!0;var e=this.targetPage=this.docRender.pagesRender.pageRenders[t],n=this.targetPage.$ui[0].getBoundingClientRect(),r=this.$ui.width(),i=this.$ui.height();return r>n.width||i>n.height?(this.targetPage=null,this.hide(),!1):(e.$ui.append(this.$ui.show()),this.drawShape(),!0)},e.setOffset=function(t,e){var n=1e6,r=1e6,i=0,o=0,a=this.path={};for(var s in this.pdfviewer.getAllActiveElements().forEach((function(t){var e=t[t instanceof da?"$ui":"$label"][0].getBoundingClientRect();e.left<n&&(n=e.left),e.top<r&&(r=e.top),e.right>i&&(i=e.right),e.bottom>o&&(o=e.bottom),a[t.annot.getId()]={left:e.left,top:e.top,width:e.width,height:e.height}})),this.path){var c=this.path[s];c.left-=n,c.top-=r}this.deltaX=t-n,this.deltaY=e-r;var u={width:i-n+2,height:o-r+2};this.$ui.css(u).attr(u)},e.drawShape=function(){var t=this.$ui[0],e=t.getContext("2d");for(var n in e.clearRect(0,0,t.offsetWidth,t.offsetHeight),e.save(),e.beginPath(),e.strokeStyle="#5aa",e.lineWidth=2,this.path){var r=this.path[n];e.rect(r.left+1,r.top+1,r.width,r.height)}e.stroke(),e.restore()},e.update=function(t,e){if(this.targetPage){var n=this.targetPage.$ui[0].getBoundingClientRect(),r=Math.max(n.left,t-this.deltaX),i=Math.max(n.top,e-this.deltaY),o=this.$ui[0];r+o.offsetWidth>n.right&&(r=n.right-o.offsetWidth),i+o.offsetHeight>n.bottom&&(i=n.bottom-o.offsetHeight),this.$ui.css({left:r-n.left,top:i-n.top})}},e.hide=function(){return this.targetPage=null,this.$ui&&this.$ui.hide(),!1},e.destroy=function(){this.pdfviewer=null,this.docRender=null,this.$ui&&(this.$ui.remove(),this.$ui=null)},e.moveAnnot=function(t){var e=this,n=t[0].annot.getPDFPage(),r=this.targetPage;if(!r)return Promise.resolve(this.hide());var i=r.page,o=n.getIndex(),a=r.index;if(a==o)return Promise.resolve(this.hide());var s=n.doc,c=t.reduce((function(t,e){return e.getRelevanceRenders?[].concat(E()(t),E()(e.getRelevanceRenders(!0))):[].concat(E()(t),[e.annot.getId()])}),[]).reduce((function(t,i){var a=n.annotIdMap[i],s={},c={},u=e.path[i];if(u){var d=e.pdfviewer.getAnnotRender(o,i);d=d.component,s="FreeTextCallout"==a.getIntent()?d.backupProperty.rect:a.getRect();var l=u.left,h=u.top,f=e.$ui[0].getBoundingClientRect(),p=d.getRect();f={width:p.right-p.left,height:p.bottom-p.top,left:f.left+l,top:f.top+h},c=r.getPDFRectFromClientRect(f)}return t[i]={rect:c,oldRect:s},t}),{});return this.pdfviewer.killFocus().then((function(t){var r=Object.keys(c).map((function(t){return Number(t)}));return n.getAnnotsByObjectNumArray(r).then((function(t){var r=t.reduce((function(t,e){return t[e.getUniqueID()]=c[e.getObjectNumber()],t}),{});return s.moveAnnotsToPage(n,i,c).then((function(t){return e.pdfviewer.collaborate($o.MOVE_ANNOTS_BETWEEN_PAGES,{fromPageIndex:o,toPageIndex:a,annots:r}),t}))}))})).then((function(t){return e.hide(),t}))},t}()),Xa=["movingstart","movingend","movingcancel"],Za=["mousemove"],Qa=function(){function t(t,e){this.pdfviewer=t,this.docRender=e,this.state=0,this.initHammer(t,e)}var e=t.prototype;return e.initHammer=function(t,e){var n=this;if("JR"===t.config.engineMode){var r=e.$doc;this.movingstart=function(i){i.deltaX,i.deltaY;var o=i.srcEvent;if(0==n.state){var a=n.shapeManager=new Ja(t,e);n.mousemove=function(t){if(!(n.state<2)){n.state=2;var e,r,i=(e=t.target,(r=B()(e).parents(".fv__pdf-page-layout")).length?r.attr("data-index"):-1),o=n.getActiveElement();if(-1!=i&&o&&o.length)if(!n.toggleShapeControl(o,i))a.initPageShapes(i)?(a.update(t.clientX,t.clientY),n.state=3):(n.state=1,n.getActiveElement().forEach((function(t){var e=t.shapeControl;e&&(e.show(),e.enable())})))}},Za.forEach((function(t){return r.on(t,n[t])}))}n.shapeManager&&(n.shapeManager.setOffset(o.clientX,o.clientY),n.state=2)},this.movingend=function(t){n.shapeManager&&(3==n.state&&n.shapeManager&&n.shapeManager.moveAnnot(n.getActiveElement()).then((function(t){n.getActiveElement().forEach((function(t){var e=t.shapeControl;e&&(t instanceof da?(t._applyShapeChange(),e.show(),e.enable()):t.shapeControlOnEnd())}))})),n.state=1)},this.movingcancel=function(t){n.shapeManager&&(n.shapeManager.hide(),n.state=1)},Xa.forEach((function(e){return t.eventEmitter.on(e,n[e])}))}},e.toggleShapeControl=function(t,e){var n=this,r=t[0].annot.getPDFPage().getIndex(),i=!1;return t.forEach((function(t){var o=t.shapeControl;-1==e||e==r?(o&&(o.show(),o.enable()),t instanceof da||t.$label.show(),n.shapeManager.hide(),i=!0):(o&&(o.hide(),o.disable()),t instanceof da||t.$label.hide())})),i},e.getActiveElement=function(){return this.pdfviewer.getAllActiveElements()},e.destroy=function(){var t=this,e=this.pdfviewer;Xa.forEach((function(n){e.eventEmitter.off(n,t[n]),t[n]=null}));var n=this.docRender.$doc;Za.forEach((function(e){n.off(e,t[e]),t[e]=null})),this.pdfviewer=null,this.docRender=null,this.shapeManager&&this.shapeManager.destroy()},t}(),ts=n(99),es=[{background:"#ffffff",foreground:"#000000"},{background:"#faf9de",foreground:"#1f1f00"},{background:"#fff2e2",foreground:"#381f00"},{background:"#dce2f1",foreground:"#232a3c"},{background:"#3b3537",foreground:"#b0afac"},{background:"#333333",foreground:"#838383",type:"moon"}],ns=function(t){for(var e in delete(t=JSON.parse(JSON.stringify(t))).type,t)t.hasOwnProperty(e)&&(t[e]=Number(t[e].replace("#","0xff")));return t},rs=function(){var t={background:null,foreground:null},e=localStorage.getItem("change-color-user-choice");return e&&es[Number(e)]&&(t=ns(es[Number(e)])),t},is=(ts.a,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;this.top=t,this.left=e,this.bottom=n,this.right=r}),os=function(){function t(t){this.offsetLeft=0,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.target=t}t.isOverlap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Math.max(t.left,e.left),i=Math[n?"min":"max"](t.top,e.top),o=Math[n?"max":"min"](t.bottom,e.bottom),a=Math.min(t.right,e.right);if(r<=a)if(n){if(i>=o)return(a-r)*(i-o)}else if(i<=o)return(a-r)*(o-i);return 0},t.isInRect=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t>=n.left&&t<=n.right)if(r){if(e>=n.bottom&&e<=n.top)return!0}else if(e<=n.bottom&&e>=n.top)return!0;return!1},t.rectInRect=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.left>=e.left&&t.right<=e.right;return!!r&&(n?t.top<=e.top&&t.bottom>=e.bottom:t.top>=e.top&&t.bottom<=e.bottom)},t.on=function(e){return new t(e)},t.subtract=function(t,e){return new is(t.top-e.top,t.left-e.left,t.bottom-e.bottom,t.right-e.right)},t.expandOffset=function(t,e){return new is(t.top-e.top,t.left-e.left,e.bottom-t.bottom,e.right-t.right)},t.copyTo=function(t,e){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom};var e=t.prototype;return e.moveLeft=function(t){return this.offsetLeft+=t,this.offsetRight+=t,this},e.moveTop=function(t){return this.offsetTop+=t,this.offsetBottom+=t,this},e.move=function(t,e){return this.moveLeft(t).moveTop(e)},e.moveTo=function(t,e){return this.offsetLeft=this.offsetRight=this.target.left-t,this.offsetTop=this.offsetBottom=this.target.top-e,this},e.shrink=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return this.add(new is(t,e,-n,-r))},e.expand=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return this.add(new is(-t,-e,n,r))},e.zoom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",r=this.target.right+this.offsetRight-(this.target.left+this.offsetLeft),i=this.target.bottom+this.offsetBottom-(this.target.top+this.offsetTop),o=r*t,a=i*t,s=o-r,c=a-i,u=0,d=0,l=0,h=0;switch(e){case"right":u=-s;break;case"center":u=-s/2,d=s/2;break;case"left":default:d=s}switch(n){case"bottom":l=-c;break;case"center":l=-c/2,h=c/2;break;case"top":default:h=c}return this.add(new is(l,u,h,d))},e.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.top,n=void 0===e?0:e,r=t.left,i=void 0===r?n:r,o=t.bottom,a=void 0===o?n:o,s=t.right,c=void 0===s?i:s;return this.offsetLeft+=i,this.offsetRight+=c,this.offsetBottom+=a,this.offsetTop+=n,this},e.extract=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight;return{left:t,top:this.target.top+this.offsetTop,right:e,bottom:this.target.bottom+this.offsetBottom}},e.boundary=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop;return{left:t,top:n,width:e-t,height:this.target.bottom+this.offsetBottom-n}},e.intersect=function(e){e instanceof t||(e=t.on(e));var n=this.toPlainObject(),r=e.toPlainObject(),i={left:Math.max(n.left,r.left),right:Math.min(n.right,r.right),top:Math.max(n.top,r.top),bottom:Math.min(n.bottom,r.bottom)};return t.on(i)},e.toPlainObject=function(){return{left:this.target.left+this.offsetLeft,right:this.target.right+this.offsetRight,top:this.target.top+this.offsetTop,bottom:this.target.bottom+this.offsetBottom}},t}(),as=n(318);function ss(t,e,n){if(Vt.isMobile&&Nt.isSafari&&(new RegExp(/\sversion\/(.*?)\s/i).test(navigator.userAgent.toLowerCase())&&Number(RegExp.$1)<13))return window.pdfviewer.viewerUI.alert("alert.browserNotSupportDownload");void 0===n&&(n="application/octet-stream");var r=t instanceof Blob?t:new Blob(t,{type:n});Object(as.saveAs)(r,e)}var cs=n(146),us=(n(177),n(204),function(t){function e(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(n=t.call(this)||this).observePairs=new Map;var i=new Set;return n.observer=new IntersectionObserver((function(t){var e=t.filter((function(t){return t.isIntersecting})).map((function(t){return t.target})),r=t.filter((function(t){return!t.isIntersecting})).map((function(t){return t.target}));e.forEach((function(t){return i.add(t)}));var o=r.filter((function(t){return i.has(t)}));o.forEach((function(t){i.delete(t)})),o.forEach((function(t){var e=n.observePairs.get(t);null==e||e.callback.call(null,t,!1)})),e.forEach((function(t){var e=n.observePairs.get(t);null==e||e.callback.call(null,t,!0)}))}),{root:e,threshold:r}),n.addDestroyHook((function(){n.observer.disconnect(),n.observePairs.clear()})),n}return O()(e,t),e.prototype.observe=function(t,e){var n=this,r={callback:e,element:t};return this.observePairs.set(t,r),this.observer.observe(t),function(){n.observer.unobserve(t),n.observePairs.delete(t)}},e}(vt.a)),ds=n(55),ls=fs("hand"),hs=(fs("annot"),Ea.a.getLogger("PDFDocRender"));function fs(t){return"state-"+t}var ps=function(t){function e(e,n,r){var i;(i=t.call(this,r)||this).name="pdfDocRender",i.$ui=e,i.rotation=0,i.doc=n,i.lastPageNumber=0,i.currentPageNumber=0,i.currentAnnot=null,i.viewerRender=r;var o=r.scrollWrap.getScrollHost();(o instanceof Window||o===document.body||o==document.documentElement)&&(o=document),i.intersectionObserver=new us(o),i.visiblePageIndexesStore=new ds.b,i.visiblePageIndexesStore.reduce((function(t){return t.slice(0)})),i.visiblePageIndexesStore.dispatch([0]);var a=i.pdfViewer=r.pdfViewer,s=B()(Y.a);s[0].id=n.id,e.append(s),i.$doc=s,i.$rendering=s.find(".fv__pdf-doc-rendering"),i.$container=s.find(".fv__pdf-doc-container"),i.pdfDocRendering=new(a.customs.PDFDocRendering||ja)(i.$rendering[0],F()(i)),i.docCustomRender=new(a.customs.DocCustomRender||Ha)(s.find(".fv__pdf-doc-custom-container")[0],F()(i)),i.zoomToTaskExecutor=new It(80,!0),i.bindEvent(),i.controlStateClass=ls,i.$container.addClass(ls),i.handlerInit(s.find(".fv__pdf-doc-handler-container")),i.initTransparencyGridChecked(),i.watermarkConfig=a.config.watermarkConfig;var c=i.customPermission_=a.customs.getDocPermissions||function(){return-1};n.setCustomPermission("standard",c),c=a.customs.getAdditionalPerm||function(){return-1},n.setCustomPermission("additional",c),n.setCustomPermission("replaceStandard",a.customs.getStandardPermissions);var u=a.eventEmitter;return u.on(Ct.annotationAppearanceUpdated,i.annotationAppearanceUpdatedBind=function(t,e){if(e.getPDFDoc()===i.doc)try{i.getPDFPageRender(e.getIndex()).redrawAnnotRenders(t)}catch(t){}}),u.on(Ct.annotationMovedPosition,i.annotationMovedPositionBind=function(t,e,n){if(e.getPDFDoc()===i.doc)try{i.getPDFPageRender(e.getIndex()).movedAnnotRenders(t,n)}catch(t){}}),u.on(Ct.annotationRemoved,i.annotationRemovedBind=function(t,e){if(e.getPDFDoc()===i.doc)try{i.getPDFPageRender(e.getIndex()).removeAnnotRenders(t)}catch(t){}}),u.on(Ct.annotationImported,i.updateImportedAnnotsBind=function(t,e){if(t===n&&i.pagesRender)try{i.pagesRender.setRenderFlags(10);var r=e.filter((function(t){return t.newAnnots.length>0})).map((function(t){return t.page.getIndex()})).reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),i.pagesRender.viewMode.getVisibleIndexes());i.pagesRender.renderPages(r).catch((function(t){0}))}catch(t){hs.warn(t)}}),u.on(Ct.annotationAdd,i.updateAddAnnotsBind=function(t,e){if(e.getPDFDoc()===i.doc)try{var n=i.getPDFPageRender(e.getIndex());n&&n.addAnnotRenders(t)}catch(t){console.error(t)}}),u.on(Ct.pageRotationChange,i.rotationPageBind=function(t,e,n){if(t.getPDFDoc()===i.doc)try{var r=i.pagesRender.pageRenders[t.getIndex()];r.$annotsContainer.addClass("fv__viewer-annot-container-hide"),r.clearCanvasCache(!0),i.pagesRender.setRenderFlags(7),i.pagesRender.renderVisiblePages()}catch(t){console.error(t)}}),u.on(Ct.pagesRotated,i.rotationPagesBind=function(t,e,n){t.forEach((function(t,r){i.rotationPageBind(t,e,n[r])}))}),u.on(Ct.customDataAdd,i.customDataAddBind=function(t,e,n){if(i.doc.getId()===n)try{i.getPDFPageRender(e).addCustomRenders(t)}catch(t){}}),u.on(Ct.customDataImported,i.customDataImportedBind=function(t){if(i.doc.getId()===t)try{i.pagesRender.setRenderFlags(32),i.pagesRender.renderVisiblePages().catch((function(t){0}))}catch(t){}}),u.on(Ct.customDataRemoved,i.customDataRemovedBind=function(t,e,n){if(i.doc.getId()===n)try{i.getPDFPageRender(e).removeCustomRenders(t)}catch(t){}}),u.on(Ct.customDataUpdated,i.customDataUpdatedBind=function(t,e,n){if(i.doc.getId()===n)try{i.getPDFPageRender(e).updateCustomRenders(t)}catch(t){}}),u.on(Ct.pagesBoxChange,(function(t){i.pagesRender&&i.pagesRender.setRenderFlags(8),i.pdfViewer.redraw(!0)})),u.on(Ct.pageRemoved,(function(t){var e=i.visiblePageIndexesStore.getCurrentValue([]),n=e.indexOf(t);n>-1&&e.splice(n,1),i.visiblePageIndexesStore.dispatch(e)})),u.on(Ct.pagesRemoved,(function(t){var e=t.reduce((function(t,e){return 1===e.length?t.concat(e[0]):e.length>1?t.concat(function(t,e,n){n||(n=t>e?-1:1);for(var r=[],i=t;i<e;i+=n)r.push(i);return r.push(e),r}(e[0],e[1]-1)):t}),[]),n=i.visiblePageIndexesStore.getCurrentValue([]);e.forEach((function(t){var e=n.indexOf(t);e>-1&&n.splice(e,1)})),i.visiblePageIndexesStore.dispatch(n)})),i.noInteraction=i.getUserPermission().checkCannotModifyExcludeAssemble()&&!i.doc.hasSignature(),u.on(Ct.permissionChanged,i.permissionChangedBind=function(){var t=i.getUserPermission().checkCannotModifyExcludeAssemble();i.noInteraction=t&&!i.doc.hasSignature();i.getUserPermission();i.loadFormRender().then((function(t){i.pdfViewer.redraw(!0)}))}),u.on(Ct.switchStateHandler,i.switchStateHandlerBind=function(t,e){t.getStateName()!==Vn&&i.resetReadModeData&&i.quitReadMode(!1)}),i.docHandler=new Qa(a,F()(i)),i.allCommentVisible=!0,i}O()(e,t);var n=e.prototype;return n._updateVisiblePageIndex=function(t,e){var n=this.visiblePageIndexesStore.getCurrentValue(),r=n.indexOf(t);if(e){if(r>-1)return;n.push(t)}else r>-1&&n.splice(r,1);this.visiblePageIndexesStore.dispatch(n)},n.getVisiblePageIndexes=function(){return this.visiblePageIndexesStore.getCurrentValue()},n.initTransparencyGridChecked=function(){var t=localStorage.getItem("PAGE_DISPLAY_DATA");if(t){var e=JSON.parse(t);this.doc.pageDisplayPreferences=e,this.doc.setPageDisplayPreferences(e)}},n.getHandlerDOM=function(){return this.$doc.get(0)},n.getBoundingClientRects=function(){var t=this.$container.find(".fv__pdf-view-mode-item"),e=this.viewerRender.scrollWrap.getScrollHost();e==window&&(e=document.body);for(var n=e.getBoundingClientRect(),r=[],i=0;i<t.length;i++){var o=t[i],a=B()(o).find(".fv__pdf-page-layout")[0].getBoundingClientRect();if(a.bottom>n.top&&a.top<n.bottom&&a.left<n.right&&a.right>n.left){var s={index:i,scale:this.getPDFPageRender(i).scale,left:Math.max(n.left,a.left)-a.left,right:Math.min(n.right,a.right)-a.left,top:Math.max(n.top,a.top)-a.top,bottom:Math.min(n.bottom,a.bottom)-a.top};s.x=s.left,s.y=s.top,s.height=s.bottom-s.top,s.width=s.right-s.left,r.push(s)}}return r},n.handlerInit=function(t){var e=this;t.on("click",(function(){e.unActiveAnnotRender()}))},n.getFormRender=function(){return this.formRender},n.setStateHandler=function(t){if(this.stateHandler){if(this.stateHandler.constructor.getStateName()===t.getStateName())return;this.stateHandler.destroyDocHandler()}(this.stateHandler=new t(this.pdfViewer)).docHandler(this)},n.setViewMode=function(t){return this.pagesRender?this.pagesRender.setViewMode(t):Promise.resolve()},n.getViewMode=function(){return this.pagesRender?this.pagesRender.getViewMode():void 0},n.prevPage=function(){var t=this.getCurrentViewMode().getPrevPageIndex();return this.goToPage(t,{x:0,y:0})},n.nextPage=function(){var t=this.getCurrentViewMode().getNextPageIndex();return this.goToPage(t,{x:0,y:0})},n.goToPage=function(t){var e,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.x,a=void 0===o?0:o,s=i.y,c=void 0===s?0:s,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments[1];d&&(e=d.width,n=d.height),this.isGoto=!0,t>=this.doc.getPageCount()?t=this.doc.getPageCount()-1:t<0&&(t=0);var l=this.pagesRender,h=l.getPDFPageRender(t);if(h)return h.getPDFPage().then((function(i){return l.getPageScale(t,r.scale).then((function(t){if(u){if(void 0!==e){var o=i.getDeviceRect({left:a,right:a+e,top:c+n,bottom:c},t,r.rotation);a=o.left,c=o.top,o.right<a&&(a=o.right),o.bottom<c&&(c=o.bottom)}else{var s=i.getDevicePoint([a,c],t,r.rotation),d=S()(s,2),l=d[0],h=d[1],f=i.info.height;(c>f||h<0)&&(h=0),a=l,c=h}return[t,a,c]}return[t,a,c]}))})).then((function(e){var n=S()(e,3),i=n[0],o=n[1],a=n[2],s=l.goToPage(t,i,o,a);return"fitVisible"===r.scale&&s?s.then((function(){return r.zoomTo("fitVisible")})):s})).catch((function(t){0})).finally((function(){r.moveDebounce()}));this.isGoto=!1},n.setCurrentPageIndex=function(t){void 0!==t&&this.pageNumberChange(t)},n.getCurrentPageIndex=function(){var t=this.getCurrentViewMode();return t&&"function"==typeof t.getCurrentPageIndex?t.getCurrentPageIndex():0},n.pageNumberChange=function(t){if(t>=0&&this.currentPageNumber!==t){if(this.lastVIs){var e=this.getPDFPageRender(this.currentPageNumber);e&&e.triggerAction(18),this.getPDFPageRender(t).triggerAction(17)}this.lastPageNumber=this.currentPageNumber,this.currentPageNumber=t}this.pdfViewer.eventEmitter.emit(Ct.pageNumberChange,t+1)},n.bindEvent=function(){},n.destroy=function(e){if(!this.isDestroyed){var n=this.pdfViewer.eventEmitter;this.pagesRender&&this.pagesRender.destroy(),this.visiblePageIndexesStore.destroy(),t.prototype.destroy.call(this),this.$doc.addClass("fv__destroying"),this.stateHandler&&this.stateHandler.destroyDocHandler(),this.docCustomRender.destroy(),this.$doc.remove(),this.zoomToTaskExecutor.destroy(),this.zoomToTaskExecutor=null,n.off(Ct.annotationAppearanceUpdated,this.annotationAppearanceUpdatedBind),n.off(Ct.annotationMovedPosition,this.annotationMovedPositionBind),n.off(Ct.annotationRemoved,this.annotationRemovedBind),n.off(Ct.annotationImported,this.updateImportedAnnotsBind),n.off(Ct.annotationAdd,this.updateAddAnnotsBind),n.off(Ct.pageRotationChange,this.rotationPageBind),n.off(Ct.pagesRotated,this.rotationPagesBind),n.off(Ct.customDataAdd,this.customDataAddBind),n.off(Ct.customDataImported,this.customDataImportedBind),n.off(Ct.customDataRemoved,this.customDataRemovedBind),n.off(Ct.customDataUpdated,this.customDataUpdatedBind),n.off(Ct.permissionChanged,this.permissionChangedBind),this.formRender&&this.formRender.destroy(),this.formRender=null;var r=null;if(e&&e.destroyCurrentDoc){var i=this.doc.id;this.pdfViewer.getWebPDFJR().then((function(t){t.pdfDocCacheMap.delete(i)})),r=this.doc.destroy()}return this.pdfDocRendering.destroy(),this.pdfDocRendering=null,this.pagesRender=this.docCustomRender=this.stateHandler=null,this.annotationAppearanceUpdatedBind=null,this.annotationMovedPositionBind=null,this.annotationRemovedBind=null,this.updateImportedAnnotsBind=null,this.updateAddAnnotsBind=null,this.rotationPageBind=null,this.rotationPagesBind=null,this.customDataAddBind=null,this.customDataImportedBind=null,this.customDataRemovedBind=null,this.customDataUpdatedBind=null,this.permissionChangedBind=null,this.docHandler.destroy(),r}},n.rendering=function(){this.$doc.addClass("fv__doc-rendering"),this.pdfDocRendering.rendering()},n.rendered=function(){this.$doc.removeClass("fv__doc-rendering"),this.pdfDocRendering.rendered()},n.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fitWidth",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotation;return this.scale=e,this.rotation=n,this.rendering(),this.doc&&this.doc.setColors(rs()),Promise.resolve(this.docCustomRender.render(e,n)).then((function(e){if(!1!==e)return t.doc.getPageSizes(0,t.pdfViewer.config.sizeCount).then((function(e){return t.doc.getLayerNodesJson()})).then((function(e){return t.doc.getTemplates()})).then((function(e){if(t.doc){var r=t.pagesRender=t.pagesRender||new Ua(t.$container,t.doc,t),i=t.loadFormRender(),o=Promise.resolve();if(t.pdfViewer.enableOpenAction){var a=localStorage.getItem("PAGE_DISPLAY_DATA"),s=t.doc.getViewerPreference().then((function(e){var n=e.uiLayout;if(a){var r=JSON.parse(a);r.navigation&&"useInitialView"!==r.navigation&&(n=t.transfUiLayoutKey(r.navigation))}t.executeNavigationAction(n),"FullScreen"===n&&(n=e.viewerPreference.NonFullScreenPageMode,t.executeNavigationAction(n))})),c=t.doc.getViewerPreference().then((function(e){var n=a?JSON.parse(a):void 0;t.executeLayeroutAction(e.pageLayout,n);var i=t.executeScaleAction(t.doc.action,n),o=i.pageIndex,s=i.scale;if(o>0){r.createPagesStructure();var c=r.viewMode;c.into(r.$ui.get(0),r.pageDOMs),c.jumpToPage(o,{x:0,y:0})}if(null!=s&&(t.scale=s),n){var u=n.customMarginChecked,d=n.margin,l=n.customFacingChecked,h=n.facingPages;u||(d=10),t.pdfViewer.setCustomMargin(d);["facing-page-view-mode","multipage-view-mode","facing-continuous-page-view-mode"].forEach((function(e){var n=t.pdfViewer.viewModeManager.ViewModes[e];l?n.setMultipage(h):n.setMultipage(2)}))}return Promise.resolve()}));o=s.then((function(){return c}))}return o.then((function(e){return r.render(t.scale,n)})).then((function(t){return i})).then((function(){if(!t.stateHandler){var e=t.pdfViewer;(t.stateHandler=new(e.stateHandlerManager.getCurrentStates())(e)).docHandler(t)}Object.keys(t.doc.metadata).length<2&&t.doc.getMetadata(),"fitWidth"!=t.scale&&t.pdfViewer.eventEmitter.emit(Ct.updateZoomMode,t.scale)}))}}));t.rendered()}))},n.loadFormRender=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e?this.doc.reloadPDFForm():this.doc.loadPDFForm();return n.then((function(e){return(t.formRender=new Ka(t.doc,t)).initJS()}))},n.hidden=function(){this.$doc.addClass("fv__hidden")},n.show=function(){this.$doc.removeClass("fv__hidden")},n.zoomTo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1?arguments[1]:void 0,r=this.scale;this.scale=e;var i=Promise.resolve(n);return n?"fitVisible"==e&&(i=this.getPDFPageRender(n.pageIndex).getPDFPage().then((function(t){return t.calcPageContentBBox(0)})).then((function(t){return n.x=t.left,n}))):i="fitVisible"!==e?this.getViewBoxCenter(!0,"topLeft").then((function(t){return{pageIndex:t[0].getIndex(),x:t[1][0],y:t[1][1]}})):this.getViewerStartPosition(),i.then((function(e){return Promise.all([t.pagesRender.getPageScale(0,r,t.rotation),t.getScaleRatio()]).then((function(n){var i=S()(n,2),o=i[0],a=i[1],s=t.pdfViewer;return s.eventEmitter.emit(Ct.beforeZoomTo,a,o),t.pagesRender.zoomTo(t.scale,e).then((function(){return s.eventEmitter.emit(Ct.zoomToSuccess,t.scale,r,a,o),a}),(function(e){return t.scale=r,s.eventEmitter.emit(Ct.zoomToFailed,a,t.scale),Promise.reject(e)}))}))}))},n.getScaleRatio=function(){var t=this,e=function(){switch(_()(t.scale)){case"number":return t.scale;case"string":return t.pagesRender?t.pagesRender.getScaleRatio(t.scale,t.rotate):1;default:return 1}};return this.zoomToTaskExecutor.waitForLastTask().then(e,e)},n.getScale=function(){return this.scale},n.getRotation=function(){return this.rotation},n.rotateTo=function(t){var e=this.rotation;return this.rotation=(t%360+360)%360,this.applyRotation(e,this.rotation)},n.applyRotation=function(t,e){var n=this,r=this.pdfViewer.eventEmitter;r.emit(Ct.beforeDocumentRotation,e,t);var i=this.getCurrentPageIndex();return this.pagesRender.rotateTo(e).then((function(){return n.goToPage(i)})).then((function(n){return r.emit(Ct.afterDocumentRotation,e,t),n}))},n.getPDFDoc=function(){return this.doc},n.getPDFPageRender=function(t){try{return this.pagesRender.getPDFPageRender(t)}catch(t){return null}},n.getCurrentViewMode=function(){try{return this.pagesRender.viewMode}catch(t){return null}},n.getAnnotRender=function(t,e){try{return this.getPDFPageRender(t).getAnnotRender(e)}catch(t){return null}},n.getAllAnnotRender=function(){for(var t=this.doc.getPageCount(),e=[],n=0;n<t;n++)e=e.concat(this.getPDFPageRender(n).getAllAnnotRender());return e},n.unActiveAnnotRender=function(t){if(t)return t.unActive();try{this.pagesRender.unActiveAnnotRender()}catch(t){}},n.setCurrentAnnotHandler=function(){var t=this.pdfViewer.stateHandlerManager.currentStateHandler.getStateName(),e=this.pdfViewer.getAllActiveElements().reverse();try{e.sort((function(t,e){return t.annot.getId()>e.annot.getId()?1:-1}))}catch(t){}"edit-all"!==t&&e.length?(e.forEach((function(t){t.shapeControl&&B()(t.shapeControl.ui).removeClass("current-annot")})),this.pdfViewer.isMultiSelectActive()?this.currentAnnot=e[e.length-1]:this.currentAnnot=e[0],this.currentAnnot.shapeControl&&B()(this.currentAnnot.shapeControl.ui).addClass("current-annot")):this.currentAnnot=null},n.setWatermarkConfig=function(t){this.watermarkConfig=t},n.getWatermarkConfig=function(){return this.watermarkConfig},n.getUserPermission=function(){var t=this.doc,e=this.customPermission_(t),n=t.getPermissionsSync();return new Wa(e&n)},n.getOffsetInfo=function(){var t,e=0,n=0,r=0,i=this.pagesRender;if(!i)return(t=i.getPDFPageRender(e)).reverseDevicePoint([n,r]).then((function(n){var r=S()(n,2),i=r[0],o=r[1];return{index:e,left:i,top:o,scale:t.getScale(),rotate:t.getRotation()}}));for(var o=this.pdfViewer.$ui,a=o.parent()[0].getBoundingClientRect(),s=i.viewMode.getVisibleIndexes(),c=0,u=s.length;c<u;c++){e=s[c];var d=this.getCurrentViewMode().constructor.getName(),l=e;"single-page-view-mode"===d&&(l=0);var h=o.find(".fv__pdf-page-layout").eq(l)[0].getBoundingClientRect();if(!(h.bottom<=a.top)){(n=a.left-h.left)<0&&(n=0),(r=a.top-h.top)<0&&(r=0);break}}return(t=i.getPDFPageRender(e)).reverseDevicePoint([n,r]).then((function(n){var r=S()(n,2),i=r[0],o=r[1];return{index:e,left:i,top:o,scale:t.getScale(),rotation:t.getRotation()}}))},n.getViewerStartPosition=function(t){return void 0===t&&(t=this.getCurrentPageIndex()),this.doc.getPageByIndex(t).then((function(e){return e.calcPageContentBBox(Xe.CalcContentsBox).then((function(n){n&&void 0!==n.left&&n.left!==n.right&&n.top!==n.bottom||(n={left:0,right:e.info.mediaWidth,top:e.info.mediaHeight,bottom:0});var r=e.getRotation(),i=[n.left,n.top];switch(r){case 0:i=[n.left,n.top];break;case 1:i=[n.left,n.bottom];break;case 2:i=[n.right,n.bottom];break;case 3:i=[n.right,n.top]}return{pageIndex:t,x:i[0],y:i[1],rotation:r}}))}))},n.getViewBoxCenter=function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",r=this.getCurrentPageIndex(),i=this.viewerRender.scrollWrap.getScrollHost(),o=(t=i===window?{x:0,y:0,right:window.innerWidth,height:window.innerHeight}:i.getBoundingClientRect()).x+t.width/2,a=t.y+t.height/2,s={left:o-20,right:o+20,top:a-20,bottom:a+20},c=function(t){if(!t)return Promise.resolve();var n=t.$ui.get(0).getBoundingClientRect(),r=n.x,i=n.y,c=i+n.height,u=n.right;return os.isOverlap(s,{left:r,right:u,bottom:c,top:i},!1)?t.getPDFPage().then((function(n){if(e){var s=Math.max(0,o-r),c=Math.max(0,a-i);return Promise.all([n,n.reverseDevicePoint([s,c],t.getScale(),t.getRotation())])}return Promise.all([n,[o-r,a-i]])})):void 0};if("topLeft"==n){var u=this.pagesRender.viewMode.getVisibleIndexes(),d=-1===u.indexOf(r)||Vt.isMobile?u[0]:r,l=this.getPDFPageRender(d),h=l.page,f=l.$ui.get(0).getBoundingClientRect();o=Math.max(t.x,f.x),a=Math.max(t.y,f.y);var p=Math.max(0,o-f.x),g=Math.max(0,a-f.y);return h?Promise.all([h,h.reverseDevicePoint([p,g],l.getScale(),l.getRotation())]):l.getPDFPage().then((function(t){return Promise.all([t,t.reverseDevicePoint([p,g],l.getScale(),l.getRotation())])}))}for(var v=r;v<this.doc.getPageCount();v++){var m=this.getPDFPageRender(v),y=c(m);if(y)return y}for(var w=r-1;w>-1;w--){var b=this.getPDFPageRender(w),A=c(b);if(A)return A}return this.doc.getPageByIndex(r).then((function(t){return Promise.all([t,[0,0]])}))},n.renderPages=function(t,e){return this.pagesRender.renderPages(t,e).catch((function(t){0}))},n.moveDebounce=function(){var t=this;this._moveDebounce||(this._moveDebounce=Object(cs.b)((function(){t.move()}),Nt.isChromiumEdge||Nt.isChrome||Nt.isFirefox||Nt.isSafari?30:100)),this._moveDebounce()},n.move=function(){var t=this;if(this.isDestroyed)return Promise.resolve();var e=this.getCurrentViewMode(),n=this.pagesRender.pageRenders,r=this.getCurrentPageIndex();if(r>=n.length)return this.goToPage(r-1);var i=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.isDestroyed?[]:t.visiblePageIndexesStore.takeWhile().then((function(t){return 0===t.length&&n<10?new Promise((function(t){return setTimeout(t,0)})).then((function(){return e(n+1)})):t}))};return i().then((function(n){var r=t.currentPageNumber;return t.setCurrentPageIndex(t.getCurrentPageIndex()),function(){var e=D()(N.a.mark((function e(n){var r,o,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pagesRender.moveTo(n);case 2:e.sent,r=5;case 4:if(!(r>=0)){e.next=19;break}return e.next=7,i();case 7:if(o=e.sent,!((a=o.filter((function(t){return-1===n.indexOf(t)}))).length>0)){e.next=14;break}return e.next=12,t.pagesRender.moveTo(a);case 12:e.next=15;break;case 14:return e.abrupt("break",19);case 15:n=o,r--,e.next=4;break;case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(n).then((function(){var i=t.currentPageNumber,o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:19;e.forEach((function(e){t.getPDFPageRender(e)&&t.getPDFPageRender(e).triggerAction(n)}))};if(t.lastVIs){var a=t.lastVIs.filter((function(t){return-1==n.indexOf(t)}));o(a,20),o(a=n.filter((function(e){return-1==t.lastVIs.indexOf(e)})))}else o(n);(t.lastVIs=n,"fitVisible"===t.scale&&e&&i!==r)&&("single-page-view-mode"===e.constructor.getName()&&t.zoomTo("fitVisible"))}))}))},n.getContainerOffsetLeftTop=function(){var t=this._offsetTop;if("number"==typeof t)return{left:this._offsetLeft,top:t};t=0;for(var e=0,n=this.$container[0],r=this.viewerRender.scrollWrap.getScrollHost();n&&(t+=n.offsetTop,e+=n.offsetLeft,(n=n.offsetParent)!==r););return{left:e,top:t}},n.getContainerVisibleRect=function(){var t=document.documentElement,e=t.clientWidth,n=t.clientHeight,r=this.viewerRender.scrollWrap.getScrollHost(),i=0,o=e,a=0,s=n;if(r instanceof HTMLElement){var c=r.getBoundingClientRect();i=Math.max(i,c.left),o=Math.min(o,c.right),a=Math.max(a,c.top),s=Math.min(s,c.bottom)}return{left:i,right:o,top:a,bottom:s}},n.getContainerVisiblePageIndexes=function(){if(!this.viewerRender||!this.getViewMode())return[];switch(this.viewerRender.getViewMode().getName()){case"single-page-view-mode":case"facing-continuous-page-view-mode":case"facing-page-view-mode":case"continuous-view-mode":return this.getViewMode().getVisibleIndexes()}for(var t,e,n,r,i=this.getCurrentPageIndex(),o=B()(this.pagesRender.pageDOMs),a=o.length,s=i-1,c=i,u=[],d=this.getContainerVisibleRect(),l=d.left,h=d.right,f=d.top,p=d.bottom;;){if(!r&&c<a){var g=o[c],v=B()(g).find(".fv__pdf-page-container"),m=v.length>0?v[0].getBoundingClientRect():g.getBoundingClientRect();m.right>l&&m.left<h&&m.bottom>f&&m.top<p?(u.push(B()(g).index()),n=!0):n&&(r=!0),c++}else!r&&c>=a&&(r=!0);if(!e&&s>-1){var y=o[s],w=B()(y).find(".fv__pdf-page-container"),b=w.length>0?w[0].getBoundingClientRect():y.getBoundingClientRect();b.right>l&&b.left<h&&b.bottom>f&&b.top<p?(u.unshift(B()(y).index()),t=!0):t&&(e=!0),s--}else!e&&s<=-1&&(e=!0);if(r&&e)break}return u},n.downloadFileSpec=function(t,e){this.doc.getFileSpecStream(t).then((function(t){ss(t,e,"application/octet-stream")}))},n.performAction=function(t){var e=this.doc.getAdditionalAction(t);this.pdfViewer.actionManager.get(e,this).active(!0)},n.transfUiLayoutKey=function(t){var e="";switch(t){case"pageOnly":e="PageOnly";break;case"bookmarksPanelAndPage":e="UseOutlines";break;case"pagesPanelAndPage":e="UseThumbs";break;case"attachmentsPanelAndPage":e="UseAttachments";break;case"layersPanelAndPage":e="UseOC"}return e},n.executeNavigationAction=function(t){this.pdfViewer.customs.executeNavigationAction(t,this.pdfViewer)},n.executeLayeroutAction=function(t,e){if(1!=this.doc.getPageCount()){var n=t;if("Default"===n&&e&&e.defaultPageLayout)switch(e.defaultPageLayout){case"continuous":n="OneColumn";break;case"singlePage":n="SinglePage";break;case"facing":n="TwoPageLeft";break;case"continuous-Facing":n="TwoColumnLeft"}var r="";switch(n){case"SinglePage":r="single-page-view-mode";break;case"OneColumn":r="continuous-view-mode";break;case"TwoPageLeft":r="facing-page-view-mode";break;case"TwoColumnLeft":r="facing-continuous-page-view-mode"}r&&this.pdfViewer.viewModeManager.set(r)}},n.executeScaleAction=function(t,e){var n,r,i={pageIndex:void 0,scale:void 0};if(!(t&&"TypeGoto"===t.getType()||e))return i;if(t&&t.getDestination&&(r=(n=t.getDestination()).pageIndex),n&&void 0!==n.zoomMode&&"ZoomXYZ"!==n.zoomMode||n&&n.zoomFactor>0){var o=n.zoomFactor;switch(n.zoomMode){case"actualSize":o=1;break;case"ZoomFitPage":o="fitHeight";break;case"ZoomFitHorz":o="fitWidth";break;case"ZoomFitVert":o="fitHeight";break;case"ZoomFitBHorz":o="fitVisible"}i={pageIndex:r,scale:o}}else if(e){var a=e.zoom;switch(Number.isNaN(parseFloat(a))||(a/=100),e.zoom){case"autoMatic":a="fitWidth";break;case"actualSize":a=1;break;case"fitPage":a="fitHeight";break;case"fitWidth":a="fitWidth";break;case"fitVisible":a="fitVisible"}a&&(i={pageIndex:r,scale:a})}return i},n.isHandReadArticles=function(){var t=window.localStorage.getItem("PREFERENCES-GENNERAL");return!t||JSON.parse(t).handReadArticles},n.startReadMode=function(t){var e=this,n=this.pdfViewer,r=this.$doc,i=r.get(0),o=n.stateHandlerManager,a=o.currentStateHandler.getStateName(),s=this.scale,c=t.children,u=c[0].pageIndex,d=0,l=function(){var t=c[d],n=t.objNum,r=t.pageIndex;e.pagesRender.pageRenders[r].articleBeads[n].read(),d+=1};o.switchTo(Vn),n.goToPage(u,0,0,!1).then(l),r.get(0).addEventListener("click",this.readArticle=function(t){e.isHandReadArticles()&&(B()(t.target).closest(".fv__pdf-page-annots-container").length>0||(d>=c.length?e.quitReadMode():l()))},{capture:!0}),this.readArticleCursor&&i.removeEventListener("mouseover",this.readArticleCursor),i.addEventListener("mouseover",this.readArticleCursor=function(t){var n=e.isHandReadArticles(),i=!!e.resetReadModeData;r.toggleClass("fv__cursor-frame",n&&i),r.find(".fv__pdf-page-handler-container").toggleClass("fv__cursor-frame",n&&i)}),this.isHandReadArticles()&&(r.addClass("fv__cursor-frame"),r.find(".fv__pdf-page-handler-container").addClass("fv__cursor-frame")),this.resetReadModeData={pageIndex:u,scale:s,statesName:a,thread:t},n.eventEmitter.emit(Ct.articleEnterReadMode,t.objNum)},n.quitReadMode=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.pdfViewer,n=this.$doc,r=e.getStateHandlerManager();n.get(0).removeEventListener("click",this.readArticle,{capture:!0}),n.get(0).removeEventListener("mouseover",this.readArticleCursor),n.removeClass("fv__cursor-frame"),n.find(".fv__pdf-page-handler-container").removeClass("fv__cursor-frame");var i=this.resetReadModeData,o=i.pageIndex,a=i.scale,s=i.statesName,c=i.thread;t&&r.switchTo(s),e.goToPage(o,0,0,!1).then((function(){e.zoomTo(a)})),e.eventEmitter.emit(Ct.articleOutReadMode,c.objNum),this.resetReadModeData=null,this.readArticle=null,this.readArticleCursor=null},n.fullscreen=function(){this.pdfViewer.viewerUI.rootComponent.querySelector("float-bar").controller.fullScreen()},e}(mt),gs=function(t){function e(e){var n;return(n=t.call(this)||this).viewerRender=e,n}O()(e,t);var n=e.prototype;return n.getScrollHost=function(){return window},n.scrollBy=function(t,e){this.getScrollHost().scrollBy(t,e)},n.scrollTo=function(t,e){this.getScrollHost().scrollTo(t,e)},n.getScrollOffsetTop=function(){return this.viewerRender.$ui[0].offsetTop},n.getScrollOffsetLeft=function(){return this.viewerRender.$ui[0].offsetLeft},n.getScrollY=function(){return this.getScrollTop()},n.getScrollX=function(){return this.getScrollLeft()},n.getWidth=function(){var t=this.getScrollHost();return vs(t)?(document.scrollingElement?document.scrollingElement.clientWidth:t.innerWidth)-100:t.clientWidth},n.getHeight=function(){var t=this.getScrollHost();return vs(t)?(document.scrollingElement?document.scrollingElement.clientHeight:t.innerHeight)-30:t.clientHeight},n.getScrollTop=function(){var t=this.getScrollHost();return vs(t)?document.scrollingElement?document.scrollingElement.scrollTop:t.scrollY||t.pageYOffset||0:t.scrollTop},n.getScrollLeft=function(){var t=this.getScrollHost();return vs(t)?document.scrollingElement?document.scrollingElement.scrollLeft:window.scrollX||window.pageXOffset||0:t.scrollLeft},n.addScrollEventListener=function(t){var e=this.getScrollHost();function n(n){t(n,e)}e===document.body&&(e=document),e.addEventListener("scroll",n);var r=function(){return e.removeEventListener("scroll",n)};return this.addDestroyHook(r),r},e}(vt.a);function vs(t){return t instanceof Window||t instanceof Document}var ms=n(39),ys=function(){function t(t){this.pdfViewer=t}t.getStateName=function(){Object(ms.a)()},t.getKeyboardBinderName=function(){return null},t.setParams=function(t){};var e=t.prototype;return e.docHandler=function(t){},e.destroyDocHandler=function(){},e.pageHandler=function(t){},e.destroyPageHandler=function(){},e.out=function(){this.pdfViewer.keyboard.activeDefaultBinde&&this.pdfViewer.keyboard.activeDefaultBinder()},t}();n(111);function ws(){var t=window.localStorage.getItem("PREFERENCES-GENNERAL");return t?JSON.parse(t):{}}function bs(){return ws().handSelectText}function As(t,e,n){var r=t.getBoundingClientRect();return[e-r.left,n-r.top]}function Ps(t,e,n){var r,i=t[0],o=t[1],a=i+e,s=o+n;return a<i&&(r=i,i=a,a=r),s<o&&(r=o,o=s,s=r),{left:i,right:a,top:o,bottom:s}}function Es(t){t.find(".fv__mark-selection-blank").remove()}function xs(t){var e,n,r=t[t.length-1],i={};switch(r.rotation){case 0:n=2*(e=r.top-r.bottom)/5,i.left=r.right-n,i.right=r.right+n,i.top=(r.top+r.bottom)/2,i.bottom=i.top-e;break;case 3:e=4*(n=r.right-r.left)/5,i.left=(r.right+r.left)/2,i.right=i.left+n,i.top=r.top+e/2,i.bottom=i.top-e;break;case 2:n=2*(e=r.top-r.bottom)/5,i.left=r.left-n,i.right=r.left+n,i.bottom=(r.top+r.bottom)/2,i.top=i.bottom+e;break;case 1:e=4*(n=r.right-r.left)/5,i.right=(r.right+r.left)/2,i.left=i.right-n,i.top=r.bottom+e/2,i.bottom=i.top-e}return{rect:i,rotate:r.rotation*Math.PI/2}}var Ss=function(t,e){var n=t.getBoundingClientRect(),r=e.srcEvent,i=Xr(r),o=Zr(r);return{x:i-n.left-e.deltaX,y:o-n.top-e.deltaY}},Cs=function(t,e){(e||t.$handler).find(".fv__mark-text-selection-range").remove()},Ds=function(t,e,n){var r=t.$handler;r.find(".fv__mark-selection-blank:not(.rectangle)").remove();for(var i=B()(document.createDocumentFragment()),o=r.get(0).getBoundingClientRect(),a=0,s=e.length;a<s;a++){var c=e[a],u={top:c.top/o.height*100+"%",left:c.left/o.width*100+"%",width:(c.right-c.left)/o.width*100+"%",height:(c.bottom-c.top)/o.height*100+"%"};i.append(B()('<mark class="fv__mark-selection-blank" type="'+n+'"></mark>').css(u))}r.append(i)},Is=function(t,e,n,r){var i=Ps(e,n,r);return t.getTextRectsAtRect(i).then((function(e){return Promise.all([t.getPDFPage(),e]).then((function(e){var n=S()(e,2),r=n[0],i=n[1],o=t.transformRectArray(r,i);return Ds(t,o,an.Text),{page:r,rectArray:i,rectArrayInPixel:o}}))}))},Rs=function(t,e,n){var r=t.$handler;r.find(".fv__mark-selection-blank.rectangle").remove();var i=r.get(0).getBoundingClientRect(),o={top:Math.min(e[1],n[1])/i.height*100+"%",left:Math.min(e[0],n[0])/i.width*100+"%",width:Math.abs(e[0]-n[0])/i.width*100+"%",height:Math.abs(e[1]-n[1])/i.height*100+"%"};r.append(B()('<mark class="fv__mark-selection-blank rectangle" type="rectangle"></mark>').css(o))},Ts=function(t,e,n,r){var i,o=t.point,a=t.rectArray,s=t.isReadSelectText,c=void 0===s||s,u=t.characterIndexStart,d=void 0===u?-1:u,l=(t.characterIndexEnd,t.panStartEvent),h=t.panMoveArr,f=n.pdfViewer,p=n.doc,g=(a||[])[0];g&&("string"==typeof g.text&&(d=g.start,g.end,i=g.text),-1!==d&&Promise.all([n.getPDFPage(),a]).then((function(t){var a=S()(t,2),s=a[0],u=a[1],d=Ps(o,e.deltaX,e.deltaY);("string"==typeof i?Promise.resolve(i):n.getTextContinuousCharAtDeviceRect(d)).then((function(t){var i={type:an.Text,pageRender:n,rectArray:u,text:t,e:e,panStartEvent:l,panMoveArr:h};p.setSelectedInfo(i),f.getStore().dispatch(Ht.STORE_NAMES.SELECTION_INFO,{page:s,text:t,rectArray:u,isReadSelectText:c,e:e,panStartEvent:l,panMoveArr:h}),f.eventEmitter.emit(Ct.selectText,{page:s,text:t,rectArray:u,e:e,panStartEvent:l,panMoveArr:h});var o=n.transformRectArray(s,u);Ds(n,o,an.Text);var a=o[0];a&&r.showAt((a.left+a.right)/2,a.top,t,o)}))})))},_s=function(t){t.currentPDFDoc&&t.currentPDFDoc.setSelectedInfo(null),t.getStore().dispatch(Ht.STORE_NAMES.SELECTION_INFO,null),t.getPDFDocRender().pagesRender.pageRenders.forEach((function(t){t.$handler.find(".fv__mark-selection-blank").remove()}))},ks=function(){function t(t,e,n,r){var i=this;if([Vn,mr].includes(r)){var o,a,s=-1,c=-1,u="unknown",d=e.$handler.addClass("fv__select-text-image-state-handler"),l=d[0],h=e.pdfViewer,f=h.viewerUI.rootComponent.pdfUI,p=h.eventEmitter,g=null,v=null,m=[],y=e.doc;this.pdfViewer=h,this.pageRender=e,this.tooltip=n,this.stateName=r,this.altEnter=!1,this.altSwitch=!1,this.textSelecting=!1,this.readyTextSelection=!1,this.addAltEvent(d),f.openDialog("fv--selected-text-contextmenu").then((function(t){var n="click.text.".concat(e.index);B()(t.element).find("[component-type=contextmenu-item]").off(n).on(n,(function(t){var n=0,r=y.selectedInfo;if(r||(n=1),r&&r.pageRender===e&&!B()(t.currentTarget).hasClass("disabled")){switch(B()(t.currentTarget).attr("component-name")){case"fv--contextmenu-item-copy":i.doTextCopy();break;case"fv--contextmenu-item-exportSelectionAs":i.doExportSelectionText();break;case"fv--contextmenu-item-highlight":i.createTextMarkupAnnot("highlight");break;case"fv--contextmenu-item-strikeout":i.createTextMarkupAnnot("strikeout");break;case"fv--contextmenu-item-underline":i.createTextMarkupAnnot("underline");break;case"fv--contextmenu-item-squigglyUnderline":i.createTextMarkupAnnot("squiggly");break;case"fv--contextmenu-item-replaceText":i.createTextMarkupAnnot("replace");break;case"fv--contextmenu-item-selectAll":i.doTextSelectAll(e);break;case"fv--contextmenu-item-bookmark":i.createBookmark(e);break;case"fv--contextmenu-item-createLink":i.createLink();break;case"fv--contextmenu-item-editText":i.doEditText();break;case"fv--contextmenu-item-wordCount":i.doWordCount();break;case"fv--contextmenu-item-lookUp":i.doLookUp()}n&&y.clearSelectedInfo()}}))})),d.on("mousemove",this.mousemove.bind(this)),t.on("doubletap",(function(t){_s(h),n.tooltipComponent.hide(),function(t,e,n,r){var i=Ss(e,t),o=[i.x,i.y];n.getDoubleClickTextRectAtPoint(o).then((function(e){Ts({point:o,rectArray:e,isReadSelectText:!1},t,n,r)}))}(t,l,e,n)})),t.on("panstart",(function(t){var d=Ss(l,t);e.getTextContinueRectAtDevicePoints([d.x,d.y],[d.x+5,d.y+5],-1,-1).then((function(e){if(u=!(e||[])[0],r===Vn){var l=h.customs.isCollaborationMode(),f=h.customs.getCommentPermission();if(Vt.isTouchDevice&&(i.readyTextSelection=!0),!bs()||u||!i.readyTextSelection)return void(i.startMovePage=!0);if(i.startMovePage=!1,l&&!f)return;i.textSelecting=!0,p.emit("can-scroll",!1)}v=t,m=[],s=-1,c=-1,void 0,o=[d.x,d.y],a=new Ot,y.clearSelectedInfo(),_s(h),n.tooltipComponent.hide(),h.killFocus(),i.altSwitch=i.altEnter}))})),t.on("panmove",(function(t){if(r===Vn){if("unknown"===u||!bs()||i.startMovePage)return}else if("unknown"===u)return;a||(a=new Ot),a.push((function(){m.push(t);var n=[o[0]+t.deltaX,o[1]+t.deltaY];if(r===Vn){if(i.altSwitch)return i.textSelecting=!0,function(t,e,n){var r=t.$handler;r.find(".fv__mark-selection-blank.rectangle").remove(),Cs(t,r);var i={top:Math.min(e[1],n[1]),left:Math.min(e[0],n[0]),width:Math.abs(e[0]-n[0]),height:Math.abs(e[1]-n[1])};r.append(B()('<div class="fv__mark-text-selection-range"></div>').css(i))}(e,o,n),Is(e,o,t.deltaX,t.deltaY);if(u)return g={type:"rectangle",pageRender:e},y.setSelectedInfo(g),Rs(e,o,n),Promise.resolve()}return e.getTextContinueRectAtDevicePoints(o,n,s,c).then((function(t){var n=(t||[])[0];n&&("string"==typeof n.text&&(s=n.start,c=n.end),-1!==s&&Promise.all([e.getPDFPage(),t]).then((function(t){var n=S()(t,2),r=n[0],i=n[1],o=e.transformRectArray(r,i);Ds(e,o,an.Text)})))}))}))})),t.on("panend",(function(t){if(r===Vn){if(!i.textSelecting||!bs()||"unknown"===u||i.startMovePage)return;i.textSelecting=!1,i.pdfViewer.eventEmitter.emit("can-scroll",!0)}else if("unknown"===u)return;a&&(a.end(),a=null);var d=[o[0]+t.deltaX,o[1]+t.deltaY];return i.altSwitch&&r===Vn?(i.altSwitch=!1,Cs(e),Is(e,o,t.deltaX,t.deltaY).then((function(r){var i=r.page,o=r.rectArray,a=r.rectArrayInPixel,s=o[0].texts||"";g={type:an.Text,pageRender:e,rectArray:o,text:s,showTooltip:!0,e:t,panStartEvent:v,panMoveArr:m},y.setSelectedInfo(g),h.getStore().dispatch(Ht.STORE_NAMES.SELECTION_INFO,{page:i,text:s,rectArray:o,e:t,panStartEvent:v,panMoveArr:m}),p.emit(Ct.selectText,{page:i,text:s,rectArray:o,e:t,panStartEvent:v,panMoveArr:m});var c=a[0];c&&n.showAt((c.left+c.right)/2,c.top,g.text,a)}))):u&&r===Vn?(g={type:"rectangle",pageRender:e,e:t,panStartEvent:v,panMoveArr:m},y.setSelectedInfo(g),Rs(e,o,d),void(u="unknown")):e.getTextContinueRectAtDevicePoints(o,d,s,c).then((function(r){Ts({point:o,rectArray:r,characterIndexStart:s,characterIndexEnd:c,panStartEvent:v,panMoveArr:m},t,e,n)}))})),f.addViewerEventListener(Ct.activeElementChanged,(function(){n.hide()})),f.addViewerEventListener(Ct.switchStateHandler,(function(){n.hide()}))}}var e=t.prototype;return e.destroy=function(){this.removeAltEvent(),this.pageRender.$handler.off("mousemove"),this.timer&&(clearTimeout(this.timer),this.timer=null)},e.doTextCopy=function(){var t=this,e=this.pageRender.doc.selectedInfo.text;void 0!==e&&Object(K.copyText)(e).then((function(n){t.pdfViewer.eventEmitter.emit(n?Ct.copyTextSuccess:Ct.copyTextFailed,e)}))},e.doExportSelectionText=function(){var t=this.pdfViewer.viewerUI.rootComponent.pdfUI;if(!(t.customs&&t.customs.isAccountExpired&&t.customs.isAccountExpired(!0,{btnName:"fv--contextmenu-item-exportSelectionAs",tabName:"convert_tab"}))){var e=this.pageRender,n=this.pageRender.doc;if(n.selectedInfo)!function(n){t.customs&&t.customs.showSaveAsDialog&&t.customs.showSaveAsDialog("convert-pdf-to-word",JSON.stringify([{pageIndex:e.index,rectArray:n}]))}(n.selectedInfo.rectArray.map((function(t){return{left:t.left,right:t.right,top:t.top,bottom:t.bottom}})))}},e.createTextMarkupAnnot=function(t){var e=this,n=this.pageRender.doc;return this.pageRender.getPDFPage().then((function(r){var i=0;if(n.selectedInfo){var o=n.selectedInfo.rectArray;if(i&&(n.selectedInfo=null),"replace"===t){var a=xs(o),s=a.rect,c=a.rotate;return r.addAnnotGroup([{flags:4,type:"strikeout",rect:{left:0,right:0,top:0,bottom:0},coords:o,noPopup:!0,typeAlias:"Replace",intent:"StrikeOutTextEdit",subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Replace")},{type:"caret",flags:4,rect:s,typeAlias:"Replace",intent:"Replace",rotation:c,subject:e.pdfViewer.i18n.t("viewer_:annotSubjects.Replace")}],1)}return r.addAnnot({type:t,rect:{left:0,right:0,top:0,bottom:0},flags:4,coords:o,subject:e.pdfViewer.i18n.t("viewer_:annotSubjects."+t[0].toUpperCase()+t.substr(1))})}i=1})).then((function(t){var n=t[0];e.pdfViewer.eventEmitter.emit(Ct.addAnnotSuccess,n),e.pageRender.annotsRender.activeAnnot(n.getId()),_s(e.pdfViewer),e.tooltip.tooltipComponent.hide()}))},e.doTextSelectAll=function(t){var e=this.pdfViewer;_s(e),this.tooltip&&this.tooltip.tooltipComponent.hide(),Promise.all([t.getAllTextRect(),t.getAllTextChar(),t.getPDFPage()]).then((function(n){var r=S()(n,3),i=r[0],o=r[1],a=r[2];e.getStore().dispatch(Ht.STORE_NAMES.SELECTION_INFO,{page:a,text:o,rectArray:i}),e.eventEmitter.emit(Ct.selectText,{page:a,text:o,rectArray:i});var s=t.transformRectArray(a,i);Ds(t,s,an.Text)}))},e.createBookmark=function(t){var e=this,n=this.pageRender.doc;if(n.selectedInfo){var r=this.pdfViewer.viewerUI.rootComponent;r.getComponentByName("sidebar-bookmark").active();var i=n.selectedInfo,o=i.type,a=i.text,s=i.graphicsObject,c=i.rectArray;t.getPDFPage().then((function(t){var n=o===an.Text?c[0]:s.getRect(),i=n.left,u=n.top,d=o===an.Text?a:e.pdfViewer.i18n.t("sidebar.bookmark.untitled"),l=t.getIndex(),h=r.getComponentByName("fv-bookmark-sidebar-panel");e.pdfViewer.eventEmitter.emit("bookmark-create-current-view",{bookmarkId:h.currentBookmarkId,left:i,top:u,title:d,relationship:3,pageIndex:l})}))}},e.doEditText=function(){var t=this.pdfViewer.viewerUI.rootComponent.pdfUI,e=this.pageRender.doc;t.getComponentByName("edit-text").then((function(t){var n=0;e.selectedInfo?(t.controller.handle(e.selectedInfo.e,!0,e.selectedInfo),n&&e.clearSelectedInfo()):n=1}))},e.createLink=function(){var t=this,e=this.pageRender,n=this.pageRender.doc;e.getPDFPage().then((function(r){var i=0;if(n.selectedInfo){var o=n.selectedInfo.rectArray,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,c=-Number.MAX_VALUE,u=Number.MAX_VALUE;o.forEach((function(t){a=Math.min(a,t.left),s=Math.max(s,t.right),c=Math.max(c,t.top),u=Math.min(u,t.bottom)})),i&&(n.selectedInfo=null),r.addAnnot({type:"link",rect:{left:a,right:s,top:c,bottom:u},color:"0000FF"}).then((function(n){var r=t.pageRender.getAnnotRender(n[0].getId()).component;r.showCreateDialog(),Vt.isMobile&&t.pdfViewer.getStateHandlerManager().switchTo(Vn),e.pdfViewer.eventEmitter.emit(Ct.addAnnotSuccess,r.annot),_s(t.pdfViewer),t.tooltip.tooltipComponent.hide()}))}else i=1}))},e.doWordCount=function(){var t=this.pageRender.doc.selectedInfo.text;this.pdfViewer.viewerUI.rootComponent.pdfUI.callAddonAPI("WordCount","showDialog",t)},e.getLoopUpText=function(){var t=!1,e=this.pageRender.doc;if(e.selectedInfo){var n=e.selectedInfo.text;return n=n.trim(),Vt.isWindows&&(n=n.substr(n.lastIndexOf(" ")+1)),e.selectedInfo.lookUpText=n,t&&(e.selectedInfo=null),n}t=!0},e.doLookUp=function(){var t=this.pageRender.doc.selectedInfo.lookUpText;Vt.isMacOS?location.href="dict:///"+t:(this.dictionaryWindow&&this.dictionaryWindow.close(),this.dictionaryWindow=window.open("https://www.dictionary.com/misspelling?term="+t))},e.mousemove=function(t){this.timer&&(clearTimeout(this.timer),this.timer=null),this.textSelecting||(this.mousemoveEvent=t,this.mousemoveHandler(t))},e.mousemoveHandler=function(t){var e=this,n=this.pageRender,r={x:t.originalEvent.layerX,y:t.originalEvent.layerY};n.getTextContinueRectAtDevicePoints([r.x,r.y],[r.x+5,r.y+5],-1,-1).then((function(r){if(r[0]){if(e.stateName==Vn&&!bs())return;var i={x:t.originalEvent.layerX,y:t.originalEvent.layerY};e.timer=setTimeout((function(){i.x==e.mousemoveEvent.originalEvent.layerX||i.y==e.mousemoveEvent.originalEvent.layerY?(n.$handler.removeClass("fv__cursor-grab").addClass("fv__cursor-text"),e.pdfViewer.eventEmitter.emit("can-scroll",!1),e.readyTextSelection=!0):e.readyTextSelection=!1}),70)}else e.stateName==Vn?n.$handler.removeClass("fv__cursor-text").addClass("fv__cursor-grab"):n.$handler.removeClass("fv__cursor-text"),e.readyTextSelection=!1}))},e.hasModifyPermissions=function(t){var e=t.doc.getPermissions();return 8&e&&32&e},e.checkPerm=function(t){return this.pageRender.docRender.getUserPermission()[t]()},e.addAltEvent=function(t){var e=this;this.keydownUpEvent=function(t){"keyup"===t.type&&e.altEnter?(t.stopPropagation(),t.preventDefault(),e.altEnter=!1):t.altKey&&(t.stopPropagation(),t.preventDefault(),e.altEnter=!0)},B()(window).on("keydown keyup",this.keydownUpEvent)},e.removeAltEvent=function(){B()(window).off("keydown keyup",this.keydownUpEvent)},e.isTextSelecting=function(){return!!this.textSelecting},t}(),Fs=!0,Ms=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-grab",n.hasText=!1,n.timeStamp=0,n.pdfViewer=e,n}O()(e,t),e.getStateName=function(){return Vn},e.getDefaultContextMenuConfig=function(){return{selector:".fv__hand-state-contextmenu-container",items:{zoomin:{name:"zoomin",nameI18nKey:"viewer_:contextmenu.hand.zoomin",callback:function(t,e,n){this.data("hand-state").zoomIn()},visible:function(){return this.data("hand-state").allowZoomIn()}},zoomout:{name:"zoomout",nameI18nKey:"viewer_:contextmenu.hand.zoomout",callback:function(t,e,n){this.data("hand-state").zoomOut()},visible:function(){return this.data("hand-state").allowZoomOut()}}}}};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t;t.$ui.addClass("fv__annot-container-zindex-up fv__allow-modify-form-control");var r=n.$handler;r.addClass("fv__hand-state-handler"),r.addClass(this.cursorStyle);var i=r[0],o=t.pdfViewer,a=this.eventEmitter=o.eventEmitter;a.emit("can-scroll",!0);this.tooltip=o.viewerUI.createTextSelectionTooltip(t);var s=this.hammer=new Kr.a.Manager(i,{recognizers:[[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL}]]});s.add(new Kr.a.Tap({event:"doubletap",taps:2})),s.add(new Kr.a.Tap({event:"singletap"})),s.add(new Kr.a.Press),s.get("doubletap").recognizeWith("singletap"),s.get("singletap").requireFailure("doubletap"),s.on("singletap",(function(n){_s(e.pdfViewer);var r=t.annotsRender;r?(r.unActiveAnnot(),a.emit(Ct.tapPage,n)):a.emit(Ct.tapPage,n)})),s.on("doubletap",(function(e){var n=t.annotsRender;n?(n.unActiveAnnot(),a.emit(Ct.doubleTapPage,e,t)):a.emit(Ct.doubleTapPage,e,t)})),s.on("press",(function(n){var r=t.annotsRender;e.eventEmitter.emit("can-scroll",!0),r?(r.unActiveAnnot(),a.emit(Ct.pressPage,n)):a.emit(Ct.pressPage,n)})),r.on("mousedown",this.mousedown=function(t){r.removeClass(e.cursorStyle),e.cursorStyle="fv__cursor-grabbing",r.addClass(e.cursorStyle)}),r.on("mousemove",this.mousemove.bind(this)),r.on("mouseup",this.mouseup=function(n){if(r.removeClass(e.cursorStyle),e.cursorStyle="fv__cursor-grab",r.addClass(e.cursorStyle),3===n.which){var i=t.annotsRender;i?(i.unActiveAnnot(),a.emit(Ct.rightClickPage,n)):a.emit(Ct.rightClickPage,n)}});var c=B()('<div class="fv__hand-state-contextmenu-container fv__contextmenu-container"></div>');r.append(c),c.data("hand-state",this)},n.mousemove=function(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){bs()&&e.mousemoveHandler(t)}),200)},n.mousemoveHandler=function(t){var e=this,n=this.pageRender,r={x:t.originalEvent.layerX,y:t.originalEvent.layerY};n.getTextContinueRectAtDevicePoints([r.x,r.y],[r.x+5,r.y+5],-1,-1).then((function(t){t[0]?(e.cursorStyle="fv__cursor-text",e.eventEmitter.emit("can-scroll",!1),e.hasText=!0,n.$handler.removeClass("fv__cursor-grab").addClass(e.cursorStyle)):(n.$handler.removeClass("fv__cursor-text").addClass("fv__cursor-grab"),e.hasText=!1)}))},n.emitCanScroll=function(){var t=this;Fs&&(Fs=!1,this.scrollTimer=setTimeout((function(){t.eventEmitter.emit("can-scroll",!0),Fs=!0}),30))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$ui.removeClass("fv__annot-container-zindex-up fv__allow-modify-form-control"),this.pageRender.$handler.off("mousedown",this.mousedown).off("mouseup",this.mouseup).off("mousemove").removeClass("fv__hand-state-handler").removeClass(this.cursorStyle).find(".fv__hand-state-contextmenu-container").remove(),this.pageRender.annotsRender&&this.pageRender.annotsRender.unActiveAnnot(),this.pageRender.$handler.removeClass("fv__cursor-grab").removeClass("fv__cursor-grabbing"),this._destroyTouchScrollEvent&&this._destroyTouchScrollEvent()},n.out=function(){this.destroyPageHandler(),this.destroyDocHandler(),this.pageRender=null},n.allowZoomIn=function(){var t=this.pageRender,e=t.pdfViewer;return t.getScale()<e.config.maxScale},n.zoomIn=function(){var t=this.pageRender,e=t.getScale();e=Math.ceil(4*e+1)/4,t.pdfViewer.zoomTo(e).catch((function(){}))},n.allowZoomOut=function(){var t=this.pageRender,e=t.pdfViewer;return t.getScale()>e.config.minScale},n.zoomOut=function(){var t=this.pageRender,e=t.getScale();e=Math.floor(4*e-1)/4,t.pdfViewer.zoomTo(e).catch((function(){}))},n.clockwiseRoataion=function(){this.pageRender.getPDFPage().then((function(t){var e=(t.getRotation()+1)%4;t.setRotation(e)}))},n.contrarotate=function(){this.pageRender.getPDFPage().then((function(t){var e=(t.getRotation()+3)%4;t.setRotation(e)}))},e}(ys),Os=function(t){function e(e,n){var r;return(r=t.call(this)||this).pdfViewer=e,r.scrollHost=n,r.prepare(),r.canScroll=!0,r}O()(e,t);var n=e.prototype;return n.addViewerEventListener=function(t,e){var n=this;this.pdfViewer.eventEmitter.on(t,e),this.addDestroyHook((function(){n.pdfViewer.eventEmitter.off(t,e)}))},n.prepare=function(){var t,e,n=this;this.taskExecutor=new It(66);var r=!1,i=this.pdfViewer,o=i.getStateHandlerManager().getCurrentStates()===Ms,a=o,s=[nr,rr,ir];this.addViewerEventListener(Ct.switchStateHandler,(function(t){a=o=t===Ms,(Vt.isMobile||Vt.isTablet)&&(a=a||s.some((function(e){return e===t.getStateName()})))})),this.addViewerEventListener("can-scroll",(function(t){n.canScroll=t})),this.addViewerEventListener(Ct.updateScrollableStatus,(function(n){var r=n.disableHorizontal,i=n.disableVertical;t=r,e=i})),this.addViewerEventListener(Ct.changeViewModeSuccess,(function(n){n!==Va&&(t=!1,e=!1)}));var c=this.scrollHost,u=function(t,e){c.scrollBy?c.scrollBy(t,e):(c.scrollLeft=c.scrollLeft+t,c.scrollTop=c.scrollTop+e)},d=new Hammer.Manager(c);d.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL}));var l,h=0,f=0,p=0,g=0,v=0,m=function(t){h=0,f=0,v=0},y=function(r,o){if(a){var s=r-h,c=o-f;if(t&&(s=0),e){var d=o-v;if(Math.abs(d)>10)return n.scrollSinglePage(d),void(v=o);c=0}u(-s,-c),i.eventEmitter.emit(Ct.scrollingPage,{touched:!0,distanceX:p,distanceY:g}),h=r,f=o,p=r,g=o}},w=!1,b=!0,A=!1,P=function(t){var e,n,r,i=t.clientX;if(c instanceof Window)e=0,n=0,r=0;else{e=c.getBoundingClientRect().left;var o=getComputedStyle(c);n=parseInt(o.borderLeftWidth)||0,r=parseInt(o.borderRightWidth)||0}var a=n+r,s=c.offsetWidth,u=s-c.clientWidth-a;A=i>=s-u+e},E=function(){A=!1};c.addEventListener("mousedown",P),c.addEventListener("touchstart",P),c.addEventListener("mouseup",E),c.addEventListener("touchend",E),c.addEventListener("touchcancel",E);var x=function(t){var e=Object(K.eventPath)(t).some((function(t){return!!t.classList&&t.classList.contains("fv__pdf-page-annots-container")}));r=e};window.addEventListener("mousedown",x,!0),window.addEventListener("touchstart",x,!0);var S=["fv__pdf-page-handler-container","fv__hand-state-contextmenu-container","fv__rendering-container"],C=function(t){var e=t.classList;return o||S.some((function(t){return e.contains(t)}))},D=!1,I=!1;d.on("panstart",(function(t){D=!1,!a||r||A||(I?I=!1:(C(t.srcEvent.srcElement)&&(D=!0,i.eventEmitter.emit(Ct.startScrollingPage,{})),p=0,g=0,w=!1,b=!0,cancelAnimationFrame(l),t.pointers.length>1||n.canScroll&&y(t.deltaX,t.deltaY)))})),d.on("panmove",(function(t){D&&C(t.srcEvent.srcElement)?w||!a||r||t.pointers.length>1||n.canScroll&&y(t.deltaX,t.deltaY):D=!1})),d.on("panend",(function(n){if(D&&C(n.srcEvent.srcElement)){if(!(n.pointers.length>1||!a||r)){var o=n.velocityX*(1e3/60),s=n.velocityY*(1e3/60);t&&(o=0),e&&(s=0),m();var c=o<0?-.8:.8,d=s<0?-.8:.8;b=!1,l=requestAnimationFrame((function t(){var e=Math.abs(o),n=Math.abs(s);e<.8&&n<.8||b?i.eventEmitter.emit(Ct.endScrollingPage,{distanceX:p,distanceY:g}):(l=requestAnimationFrame(t),u(-o,-s),e>=.8&&(o-=c),n>=.8&&(s-=d),p+=o,g+=s,i.eventEmitter.emit(Ct.scrollingPage,{touched:!1,distanceX:p,distanceY:g}))}))}}else D=!1})),d.on("pancancel",m);var R=function(){w=!0,m()};window.addEventListener("touchend",R),window.addEventListener("touchcancel",R),window.addEventListener("mouseup",R);var T=function(t){var e=window[t];return window[t]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=e.apply(window,n);return I=!0,i},function(){window[t]=e}};this.addDestroyHook(T("alert"),T("confirm"),T("prompt")),this.addDestroyHook((function(){d.destroy(),l&&cancelAnimationFrame(l),c.removeEventListener("mousedown",P),c.removeEventListener("touchstart",P),c.removeEventListener("mouseup",E),c.removeEventListener("touchend",E),c.removeEventListener("touchcancel",E),window.removeEventListener("touchend",R),window.removeEventListener("mouseup",R),window.removeEventListener("touchcancel",R),window.removeEventListener("mousedown",x,!0),window.removeEventListener("touchstart",x,!0)}))},n.scrollSinglePage=function(t){var e=this;0!==t&&this.taskExecutor.exec((function(){return Promise.resolve().then((function(){var n=e.pdfViewer.getPDFDocRender().getViewMode();n instanceof Va&&(t>0?n.jumpToPrevPage():n.jumpToNextPage())}))}))},e}(vt.a),Ls=j()(),Ns=Ea.a.getLogger("PDFViewerRender"),Vs=function(t){function e(n,r,i){var o,a;(a=t.call(this)||this).name=e.getDefaultName(),a.pdfViewer=i,a.ViewMode=r,a.$ui=n;var s=a.scrollWrap=new(a.pdfViewer.customs.ScrollWrap||gs)(F()(a)),c=100;(Nt.isChromiumEdge||Nt.isChrome||Nt.isFirefox||Nt.isSafari)&&(c=30),a.unBindScrollEvent=s.addScrollEventListener((function(){a.pdfDocRender&&(a.pdfDocRender.isDestroyed||a.pdfDocRender.moveDebounce())}));var u;n.on("scroll",".fv__pdf-view-mode-item",a._scrollPageBind=function(t){clearTimeout(u);var e,n=t.currentTarget;try{if(!(e=a.pdfDocRender.pagesRender).length)return}catch(t){return}u=setTimeout((function(){for(var t=n.previousSibling,r=0;t;)t.classList.contains("fv__pdf-view-mode-item")&&r++,t=t.previousSibling;var i=e[r];if(i)try{i.move()}catch(t){}}),c)});a.addDestroyHook((function(){clearTimeout(u)})),n.addClass("fv__pdf-viewer").html(Ls),a.$rendering=n.find(".fv__pdf-viewer-rendering"),a.$container=n.find(".fv__pdf-viewer-container"),a.pdfViewerRendering=new(i.customs.PDFViewerRendering||H)(a.$rendering[0],F()(a)),(a.handler=new(i.customs.PDFViewerHandler||Jr)(n.find(".fv__pdf-viewer-handler-container"),F()(a))).active(),a.oldPdfDocRenders=[],a.touchToScrollViewer=new Os(i,s.getScrollHost());var d,l=i.getKeyboard(),h=function(t){var e=a.pdfDocRender;if(e){var n=e.getViewMode();if(d=n.getShortcutEventHandler())d.onKeyPressed(t)&&t.native.preventDefault()}},f={interceptors:[function(t,e){"input"!=t.native.target.tagName.toLowerCase()&&(0===i.getAllActiveElements().length&&e(t))}]},p=function(t){d&&(d.onKeyReleased(t)&&t.native.preventDefault(),d=void 0)},g=[Xo.ARROW_UP,Xo.ARROW_DOWN,Xo.JUMP_TO_FIRST_PAGE,Xo.JUMP_TO_LAST_PAGE,Xo.JUMP_TO_NEXT_PAGE,Xo.JUMP_TO_PREVIOUS_PAGE,Xo.SCROLL_TO_NEXT_VISIBLE_AREA,Xo.SCROLL_TO_PREVIOUS_VISIBLE_AREA,Xo.SCROLL_VIEWER_SCROLLBAR_LEFT,Xo.SCROLL_VIEWER_SCROLLBAR_RIGHT,Xo.SCROLL_VIEWER_SCROLLBAR_UP,Xo.SCROLL_VIEWER_SCROLLBAR_DOWN];return(o=a).addDestroyHook.apply(o,E()(g.map((function(t){return l.keydown(t,h,f)}))).concat(E()(g.map((function(t){return l.keyup(t,p,f)}))))),a}O()(e,t),e.getDefaultName=function(){return"pdfViewerRender"};var n=e.prototype;return n.setViewMode=function(t){var e=this;if(t!==this.ViewMode){var n=this.ViewMode;this.ViewMode=t;var r=this.pdfDocRender;if(r){this.pdfViewer.eventEmitter.emit(Ct.startChangeViewMode,t,n);var i=r.getViewMode(),o=i?i.getVisibleIndexes():[];return r.setViewMode(t).then((function(){if(!r.isDestroyed){var i=r.getViewMode();e.pdfViewer.eventEmitter.emit(Ct.changeViewModeSuccess,t,n,i);var a=r.pagesRender;if(a){var s=i&&i.docRender?i.getVisibleIndexes():[];if(!function(t,e){if(t.length!==e.length)return!1;return!t.some((function(t){return-1===e.indexOf(t)}))}(o,s))return a.renderVisiblePages()}}}),(function(i){e.ViewMode=n,e.pdfViewer.eventEmitter.emit(Ct.changeViewModeFailed,t,n,r.getViewMode(),i),Ns.warn("change view mode fail",i)}))}}return Promise.resolve()},n.getViewMode=function(){return this.ViewMode},n.rendering=function(){this.$ui.addClass("fv__view-rendering"),this.pdfViewerRendering.rendering()},n.rendered=function(){this.$ui.removeClass("fv__view-rendering"),this.pdfViewerRendering.rendered()},n.renderDoc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pdfViewer.config.defaultScale,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new ps(this.$container,t,this);return this.pdfDocRender=r,this.oldPdfDocRenders.push(r),this.rendered(),r.render(e,n)},n.rotateTo=function(t){return X(Q(t),"Incorrect rotation degree: ".concat(t)),this.pdfDocRender?this.pdfDocRender.rotateTo(t):Promise.reject(new Error("Cannot perform rotation without document opening!"))},n.getRotation=function(){return this.pdfDocRender?this.pdfDocRender.getRotation():0},n.closeOldDocRender=function(t){for(var e,n=[],r=this.oldPdfDocRenders,i=r.length;i--;)n[i]=((e=r[i]).hidden(),e.destroy(t)),this.pdfDocRender==r[i]&&(this.pdfDocRender=null),r.splice(i,1);return Promise.all(n)},n.bindEvent=function(){},n.zoomTo=function(t,e){if(!this.pdfDocRender)return Promise.reject(new Error("doc renderer has not been initialized!"));try{return this.pdfDocRender.zoomTo(t,e)}catch(t){return Promise.reject(t)}},n.goToPage=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.pdfDocRender.goToPage(t,{x:n,y:e},r)},n.zoomAt=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};if(!this.pdfDocRender)throw new Error("No PDF files are currently open");return this.getScaleRatio().then((function(r){return t.zoomTo(e).then((function(){return t.getScaleRatio().then((function(e){var i=e/r,o=n.x*(i-1),a=n.y*(i-1);t.scrollWrap.scrollBy(o,a)}))}))}))},n.setLayerNodeVisible=function(t,e){return this.pdfDocRender?this.pdfDocRender.setLayerNodeVisible(t,e):Promise.reject(new Error("doc renderer has not been initialized!"))},n.getScaleRatio=function(){return this.pdfDocRender?this.pdfDocRender.getScaleRatio():Promise.reject(new Error("doc renderer has not been initialized!"))},n.destroy=function(){t.prototype.destroy.call(this),this.scrollWrap.destroy(),this.touchToScrollViewer.destroy(),this.pdfDocRender&&this.closeOldDocRender(),this.unBindScrollEvent(),this.$ui.off("scroll")},e}(vt.a),Bs=n(319),Us=n.n(Bs),js=n(320),Hs=n.n(js),Ws=n(321),$s=n.n(Ws),Ys=n(322),qs=n.n(Ys),Gs={version:"011856006f38abe590902fb7c793c8ea",versions:{"de-DE":{ui_:"4f71d0a9e27d447bcd61a87da3780dd3",viewer_:"2bee06e27986498b6d1c5f4b138826bb"},"en-US":{ui_:"7cf8df6672b83e38efd8dcb4d2900963",viewer_:"7ad12e944f0a4f94822eaa00b880404a"},"es-419":{ui_:"17fbfb970a273c1a66bc4443327e5afb",viewer_:"78b3401c58094f4cbaaaf28ac650ff71"},"fr-FR":{ui_:"25dddbca730cd1afc838600068b178e9",viewer_:"805d21a362ff6bb835995699d77aedfd"},"it-IT":{ui_:"aec22de527a0f7f38a6f0ddef39fb188",viewer_:"9a283ab5e6433ba0dfde17aebee922fd"},"ja-JP":{ui_:"e55a20ccf6fe3496d8f0cd18cc034cf9",viewer_:"f5c37d103fb7fbfc5de4bcf4c4bef2b9"},"nl-NL":{ui_:"1d13b080cd3a69e21737661e2b3e21c4",viewer_:"8762f37bd49a968a366b950731305827"},"zh-CN":{ui_:"7afd1a17d68c0773f1d22fcb64051a5b",viewer_:"eaf4ce8568c2e510167716e70c22c40a"},"zh-TW":{ui_:"545a920f0932fa3870efa3fb20c35dd5",viewer_:"c64d497c3a4717a64ea34d66349352c6"}},languageVersions:{"de-DE":"7d9816d63e9cc098bce5d189b2aab365","en-US":"21c3afe951cea7b1aae8302a16dc86c6","es-419":"86f597acbfa0096c689ae151e6cccf52","fr-FR":"625381791ad969bbc19cee77393f5833","it-IT":"ff7f15727b8431aa3fba07c96ba9a9dc","ja-JP":"df33fd46d1dcb9add09b28b327e0818c","nl-NL":"f8afcfa9fae038327aa1cba460b8657c","zh-CN":"c915f45b63d1edc4bb9d19a4a767bf05","zh-TW":"ee7e1551cdea9b8cd62d42f13d10f368"}};function zs(t,e){var n=Ks(t);return{loadPath:function(t,r){var i;try{i=n.versions[t.join(" ")][r.join(" ")]}catch(t){i=n.version}return e+"/{{lng}}/{{ns}}.json?v="+i}}}function Ks(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return A()({},Gs,t)}var Js=function(t){var e,n=Us.a.createInstance();return n.use(Hs.a).init(A()({},{load:"currentOnly",fallbackLng:"en-US",backend:{backends:[$s.a,qs.a],backendOptions:t.backendOptions||[(e=t.version,{prefix:"foxit_pdf_sdk_for_web_i18next_",expirationTime:6048e6,versions:Ks(e).versions}),zs(t.version,t.absolutePath)]}},t.initOption)),n};function Xs(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="arraybuffer",r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300||304===r.status?e(r.response):n(new Error("Could not load image!")))},r.onerror=function(){n(new Error("Could not load image!"))},r.send()}))}var Zs=function(){function t(t){this.pdfViewer=t}return t.prototype.getPassword=function(){var t=this,e=z();return setTimeout((function(){var n=prompt(t.pdfViewer.i18n.t("viewer_:tip.inputPassword"),"");if(null===n)return e.reject(new Error("User has been cancelled the prompt dialog"));e.resolve(n)}),0),e.promise},t}(),Qs=n(95),tc=n.n(Qs);function ec(){if(document.baseURI)return document.baseURI;var t=document.head.querySelector("base");if(!t)return location.href;var e=t.href,n=location.pathname;return e?/^\w+?:\/+/.test(e)?e:location.origin+ac(n,e):location.href}function nc(t){if("string"!=typeof t)throw new Error("invalid url type: (".concat(_()(t),")!"));return 0===(t=t.trim()).indexOf("file:")?new ic(t):new rc(t)}var rc=function(){function t(e){var n=t.REGEX.exec(e);if(!n)throw new Error('Illegal argument: incorrect url: "'.concat(e,'"'));this.protocol=n[1],this.port=parseInt(n[5]),isNaN(this.port)&&(this.port=""),this.pathname=n[6]||"/",this.pathname=this.pathname.replace(/(\/|\\)+/g,"/");var r=/(.*[\/\\]+)[^\/\\]+$/.exec(this.pathname)||[this.pathname,this.pathname],i=S()(r,2)[1];this.dirname=i,this.hostname=n[3]||"",this.host=this.hostname+(this.port?":"+this.port:""),this.query=n[7]||"",this.hash=n[8]||""}t.isValid=function(e){return t.REGEX.test(e)};var e=t.prototype;return e.join=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=ac.apply(void 0,[this.dirname].concat(n));return new t("".concat(this.protocol,"://").concat(this.host).concat(i).concat(this.query).concat(this.hash))},e.absolute=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?"".concat(this.protocol,"://").concat(this.host).concat(this.pathname).concat(this.query).concat(this.hash):"".concat(this.protocol,"://").concat(this.host).concat(this.pathname)},e.absoluteDir=function(){return"".concat(this.protocol,"://").concat(this.host).concat(this.dirname)},Tt()(t,null,[{key:"REGEX",get:function(){return/^([a-z]+)\:\/\/(([\w\-\.]+)(\:(\d+))?(\/[^?#]*)?(\?[^#]*)?(#.*)?)$/}}]),t}(),ic=function(){function t(e){this.protocol="file";var n=t.REGEX.exec(e);if(!n)throw new Error('Illegal argument: incorrect URL: "'.concat(e,'"'));this.path=(n[3]||"").replace(/[\\/]+/g,"/");var r=/(.*[\/\\]+)[^\/\\]+$/.exec(this.path)||[this.path,this.path],i=S()(r,2)[1];this.dir=i,this.disk=n[2],this.disk||("/"===this.path[0]&&(this.path=this.path.slice(1)),this.disk=""),this.hash=n[5]||"",this.query=n[4]||""}t.isValid=function(e){return t.REGEX.test(e)};var e=t.prototype;return e.join=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=ac.apply(void 0,[this.dir].concat(n));return new t("file:///".concat(this.disk).concat(i).concat(this.query).concat(this.hash))},e.absolute=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?"file:///".concat(this.disk).concat(this.path).concat(this.query).concat(this.hash):"file:///".concat(this.disk).concat(this.path)},e.absoluteDir=function(){return"file:///".concat(this.disk).concat(this.dir)},Tt()(t,null,[{key:"REGEX",get:function(){return/^(file:\/\/\/)([a-z]\:)?(.+?)(\?([^?#]*))?(#([^#]*))?$/i}}]),t}();function oc(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=nc(t)).join.apply(e,r).absolute()}function ac(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e[0];if(i.match(/^\w+?:\/\//)){var o=/^(\w+?:\/\/[^\/]+)(\/?.*)/,a=i.match(o);a&&(r=a[1],e[0]=a[2]||"/")}var s=e.filter((function(t){return"string"==typeof t&&t.length>0})),c=s.map((function(t){return t.replace(/[\/\\]+/,"/").split("/").filter((function(t,e,n){return""!==t||0===e}))})).reduce((function(t,e){return e.forEach((function(e,n){switch(e){case".":break;case"..":t.pop();break;case"":t=[""];break;default:t.push(e)}})),t}),[]).join("/");return s.length>0&&(/[\/\\\\]/.test(s[0][0])||0===s[0].indexOf(".."))&&"/"!==c[0]&&(c="/"+c),r?r+c:c}function sc(t){return rc.isValid(t)||ic.isValid(t)}window.createURL=nc;var cc=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.onKeyPressed=function(t){var e=this.getPDFDocRender(),n=e.viewerRender.scrollWrap,r=n.getWidth(),i=n.getHeight();switch(t.command){case Xo.JUMP_TO_PREVIOUS_PAGE:return this.executor.exec((function(){return e.prevPage()})),!0;case Xo.JUMP_TO_NEXT_PAGE:return this.executor.exec((function(){return e.nextPage()})),!0;case Xo.JUMP_TO_LAST_PAGE:var o=this.getPageCount();return e.goToPage(o-1,{x:0,y:0}),!0;case Xo.JUMP_TO_FIRST_PAGE:return e.goToPage(0),!0;case Xo.SCROLL_VIEWER_SCROLLBAR_LEFT:return n.scrollBy(-r,0,"smooth"),!0;case Xo.SCROLL_VIEWER_SCROLLBAR_RIGHT:return n.scrollBy(r,0,"smooth"),!0;case Xo.SCROLL_VIEWER_SCROLLBAR_UP:return n.scrollBy(0,-i,"smooth"),!0;case Xo.SCROLL_VIEWER_SCROLLBAR_DOWN:return n.scrollBy(0,i,"smooth"),!0}return!1},e}(Oa),uc=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e}(cc),dc=function(t){function e(e){return t.call(this,e)||this}O()(e,t),e.getName=function(){return"continuous-view-mode"};var n=e.prototype;return n.into=function(n,r){t.prototype.into.call(this,n,r),this.updatePageDOMs(r),this.docRender.$container.addClass(e.getName())},n.updatePageDOMs=function(e){t.prototype.updatePageDOMs.call(this,e),Wt.a.property(this,"pageElements",(function(){return e.map((function(t){return t.querySelector(".fv__pdf-page-layout")}))}))},n.getDocLayoutWidth=function(){var t=this.docRender.doc.pageCache,e=0;return t.forEach((function(t){e=Math.max(t.getPxWidth(),e)})),e},n.getFitHeight=function(t){var e=this.docRender.viewerRender.scrollWrap;return e.getHeight()-e.getScrollOffsetTop()},n.getFitWidth=function(t){var e=this.docRender.viewerRender.scrollWrap;return e.getWidth()-e.getScrollOffsetLeft()},n.jumpToPage=function(t,e){var n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i;this.lastJumpPageIndex=t;var a=this.getItems();t>=a.length?t=a.length-1:t<0&&(t=0);var s=a[t],c=s.offsetLeft+r,u=s.offsetTop+o+parseInt(B()(s).css("margin-top"));this.docRender.viewerRender.scrollWrap.scrollTo(c,u)},n.out=function(){this.docRender&&this.docRender.$container.removeClass(e.getName()),this._unwatchScrollEvent&&this._unwatchScrollEvent(),t.prototype.out.call(this)},n.getCurrentPageIndex=function(){var t,e=this.getItems(),n=this.docRender.viewerRender.scrollWrap.getScrollHost(),r=(t=n===window?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:n.getBoundingClientRect()).left+(t.right-t.left)/2,i=t.top+(t.bottom-t.top)/2,o=this.pageElements,a=this.lastJumpPageIndex;if(void 0!==a){var s=o[a];if(s){var c=s.getBoundingClientRect();if(c.left<r&&c.right>=r){if(this.getVisibleIndexes().length>2&&c.top<t.bottom&&c.bottom>t.top)return a;if(c.top<i&&c.bottom>=i)return a;if(c.top>=t.bottom&&c.bottom<=t.top)return a}}}for(var u=0;u<e.length;u++)if(o[u]){var d=o[u].getBoundingClientRect();if(d&&d.left<r&&d.right>=r){if(d.top<i&&d.bottom>=i)return u;if(d.top>=t.bottom&&d.bottom<=t.top)return u}}return 0},n.getNextPageIndex=function(){var t=this.docRender.doc.getPageCount(),e=this.getCurrentPageIndex();return e<t-1&&e++,e},n.getPrevPageIndex=function(){var t=this.getCurrentPageIndex();return t>0&&t--,t},n.generateShortcutEventHandler=function(){return new uc(this)},e}(La),lc=function(){function t(t){this.ViewModes={},this.pdfViewer=t,this.register(dc),this.register(Va)}var e=t.prototype;return e.register=function(t){return this.ViewModes[t.getName()]=t},e.get=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dc.getName();return this.ViewModes[t]||dc},e.set=function(t){var e=this.get(t),n=this.currentViewMode;this.currentViewMode=e,this.pdfViewer.eventEmitter.emit(Ct.startChangeViewMode,e,n);var r=this.pdfViewer.pdfViewerRender;if(r){r.ViewMode=e;var i=r.pdfDocRender;if(i){var o=i.pagesRender;o&&(o.viewMode=new e(i),this.pdfViewer.eventEmitter.emit(Ct.changeViewModeSuccess,e,n,o.viewMode))}}},e.switchTo=function(t){var e=this.currentViewMode,n=this.get(t);if(e!==n){this.currentViewMode=n;var r=this.pdfViewer,i=r.pdfViewerRender;if(i)return r.activeElement(null),i.setViewMode(n)}},e.getCurrentViewMode=function(){return this.currentViewMode||dc},e.getAll=function(){return this.ViewModes},t}(),hc={reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data("annotComponent").showReplyDialog("reply")},disabled:function(){return this.data("annotComponent").replyDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n,r){this.data("annotComponent").showPropertiesDialog(t,e,n,r)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};function fc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:hc,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}var pc,gc=n(112),vc=n.n(gc),mc=n(323),yc=n.n(mc),wc=function(){function t(t,e,n){this.viewerComponent=t;var r=this.viewerComponent.getModel();n=n||this.viewerComponent.getPropertyOptions();var i=yc()(n);e&&e!==document.body||(i='<dialog class="fv__dialog fv__annot-properties-dialog">'.concat(i,"</dialog>"));var o=B()(i);this.$propertiesDialog=o,this.$fillColor=o.find("#fillcolor-input"),this.$txThickness=o.find("#thickness-input-tx"),this.updateBorderInfo(r,n),this.bindChangeEvent();var a=e||document.body;if(o.appendTo(a),!e||e===document.body){var s=o[0];vc.a.registerDialog(s),s.showModal()}}var e=t.prototype;return e.toggle=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?this.$propertiesDialog.find("input,select").removeAttr("disabled"):this.$propertiesDialog.find("input,select").attr("disabled","true")},e.updateBorderInfo=function(t,e){var n=this.$propertiesDialog;if(e.lineEndStyle&&n.find("#endstyle-select [value="+t.getEndingStyle()+"]").attr("selected",!0),e.lineStartStyle)switch(t.getType()){case"freetext":n.find("#startstyle-select [value="+t.getCalloutLineEndingStyle()+"]").attr("selected",!0);break;default:n.find("#startstyle-select [value="+t.getStartStyle()+"]").attr("selected",!0)}if(void 0!==e.highlightingMode&&n.find("#highlighting-select [value="+t.getHighlightingMode()+"]").attr("selected",!0),void 0!==e.rotation&&n.find("#rotation-select [value="+t.getRotation()+"]").attr("selected",!0),!1!==e.borderStyle){var r=t.getBorderDashes();if(1==t.getBorderStyle()&&r.length>0){var i=Math.max.apply(Math,r),o=Math.min.apply(Math,r);o==i?o>3?n.find("#borderStyle-select [value=3]").attr("selected",!0):o>2?n.find("#borderStyle-select [value=2]").attr("selected",!0):o<2||2==o?n.find("#borderStyle-select [value=1]").attr("selected",!0):n.find("#borderStyle-select [value=3]").attr("selected",!0):i>8?n.find("#borderStyle-select [value=6]").attr("selected",!0):i>4?n.find("#borderStyle-select [value=5]").attr("selected",!0):n.find("#borderStyle-select [value=4]").attr("selected",!0)}else if(t.getBorderStyle()==Ht.BORDER_STYLE.CLOUDY){switch(t.getCloudIntensity()){case 1:n.find("#borderStyle-select [value=7]").attr("selected",!0);break;case 2:n.find("#borderStyle-select [value=8]").attr("selected",!0)}}}},e.bindChangeEvent=function(){var t=this;this.$propertiesDialog.on("click",".fv__btn-close",(function(){t.viewerComponent.hidePropertiesDialog?t.viewerComponent.hidePropertiesDialog():t.close()})).on("change","#color-input",(function(e){var n=e.target,r=parseInt(n.value.replace("#",""),16);t.viewerComponent.setColor(r)})).on("change","#opacity-input",(function(e){var n=e.target.value;t.viewerComponent.setOpacity(+n)})).on("change","#thickness-input",(function(t){return r("#thickness-input","#thickness-input-tx")})).on("blur","#thickness-input",(function(t){return r("#thickness-input","#thickness-input-tx")})).on("blur","#thickness-input-tx",(function(t){return r("#thickness-input-tx","#thickness-input")})).on("change","#thickness-input-tx",(function(t){return r("#thickness-input-tx","#thickness-input")})).on("change","#borderStyle-select",(function(e){var n=e.target.value,r=Ht.BORDER_STYLE.DASHED;switch(n){case"0":n=[],r=Ht.BORDER_STYLE.SOLID;break;case"1":n=[2,2,2,2];break;case"2":n=[3,3,3,3];break;case"3":n=[4,4,4,4];break;case"4":n=[4,3,2,3];break;case"5":n=[8,4,4,4];break;case"6":n=[4,3,16,3];break;case"7":n=1,r=Ht.BORDER_STYLE.CLOUDY;break;case"8":n=2,r=Ht.BORDER_STYLE.CLOUDY}t.viewerComponent.setBorderStyle(r,n)})).on("change","#fillcolor-input",(function(e){var n=e.target,r=parseInt(n.value.replace("#",""),16);t.viewerComponent.setFillColor(r)})).on("change","#fillColor-transparent-input",(function(e){e.target.checked?(t.$fillColor.val("#ffffff"),t.$fillColor.attr("disabled",!0),t.viewerComponent.setFillColor(0)):t.$fillColor.removeAttr("disabled")})).on("change","#startstyle-select",(function(e){var n=e.target.value;t.viewerComponent.setEndingStyle(!0,n)})).on("change","#endstyle-select",(function(e){var n=e.target.value;t.viewerComponent.setEndingStyle(!1,n)})).on("change","#hasCap-input",(function(e){var n=e.target.checked;t.viewerComponent.enableCaption(n)})).on("change","#highlighting-select",(function(e){var n=e.target.value;t.viewerComponent.setHighlightingMode(n)})).on("change","#rotation-select",(function(e){var n=e.target.value;t.viewerComponent.setRotation(90*+n)}));var e=this,n=!1;function r(t,r){if(!n){n=!0;var i=e.$propertiesDialog,o=i.find(t).val();e.viewerComponent.getModel().getBorderWidth()!=o?(e.viewerComponent.setBorderWidth(+o),n=!1,i.find(r).val(o)):n=!1}}},e.close=function(){var t=this.$propertiesDialog;t&&(t[0].close(),t.remove(),this.$propertiesDialog=null)},t}(),bc=n(324),Ac=n.n(bc),Pc=n(242),Ec=n.n(Pc),xc=n(243),Sc=n.n(xc),Cc=function(){function t(t){this.component=t,this.prepared=!1}var e=t.prototype;return e.prepare=function(){this.prepared||(this.prepared=!0,this.doPrepare())},e.doPrepare=function(){},e.show=function(){this.prepared&&this.doShow()},e.doShow=function(){},e.hide=function(){this.prepared&&this.doHide()},e.doHide=function(){},e.destroy=function(){this.component=null,this.prepared=!1},e.willRender=function(){},e.afterRender=function(){},e.render=function(t,e,n){return this.prepared||this.prepare(),this.doRender(t,e,n)},e.doRender=function(t,e){return Promise.resolve()},e.numberToRGBAString=function(t){var e=En(t);return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},e.invisibleRender=function(){},t}(),Dc=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.prepare=function(){var t=this.component,e=t.annot;this.tileCanvas=this.tileCanvas||new Gr((function(n,r,i,o,a,s,c,u,d){return t.getPDFPage().getAnnotBitmap(e.getId(),ut(s),d,{x:c*s+r*a,y:u*s+n*a,width:i,height:o},!0,t.renderAppearanceType)}),t.$ui)},n.doHide=function(){this.tileCanvas.hideContainer()},n.doShow=function(){this.tileCanvas.showContainer()},n.doRender=function(t,e,n){this.tileCanvas.setVisibleRect(n);var r=!0;if(n){var i=this.component.getRect(),o={left:Math.max(i.left,n.left),top:Math.max(i.top,n.top),right:Math.min(i.right,n.right),bottom:Math.min(i.bottom,n.bottom)};r=o.right>=o.left&&o.bottom>=o.top}var a,s,c=this.component.getTileConfig(t,e);return r?(a=this.tileCanvas).redraw.apply(a,E()(c)):((s=this.tileCanvas).updateDom.apply(s,E()(c)),Promise.resolve())},n.willRender=function(){this.tileCanvas.$container.get(0).style.willChange="left, top, width, height"},n.afterRender=function(){this.tileCanvas.$container.get(0).style.willChange="auto"},n.destroy=function(){this.prepared&&(t.prototype.destroy.call(this),this.tileCanvas.destroy(),this.tileCanvas=null)},n.clearCache=function(){this.tileCanvas.clearCache()},n.invisibleRender=function(){try{this.tileCanvas.invisibleRender()}catch(t){}},e}(Cc),Ic=fc(".fv__pdf-page-annot-handler-rect"),Rc=function(t){function e(e,n,r,i){var o;(o=t.call(this,e,n,r,i)||this).name="markup",o.eUi=n,o.$ui.addClass("pdf-page-markup-annot-container"),o.$handler.addClass("pdf-page-markup-annot-handler-container"),o.apRenderer=o.generateApRenderer();var a=o.pdfViewer.i18n;ha.a.i18n=function(t){return a.t(t)},o.currentRenderDefer=z(),o.currentRenderDefer.isPending=!0,Wt.a.property(F()(o),"contextMenu",(function(){if(o.contextMenuIsEnable())return o.pdfViewer.viewerUI.createContextMenu(F()(o),r,o.getContextMenuConfig())}));var s=o.pdfViewer.getAnnotAuthorityManager();o.addDestroyHook(s.subscribe(o.annot,(function(t){o.updateOnPermissionChange(t)})));var c=o.pdfViewer.eventEmitter,u=function(){o.isDestroyed||o.annot.isDestroyed||s.getPermission(o.annot).then((function(t){o.updateOnPermissionChange(t)}))};return c.on(Ct.permissionChanged,u),o.addDestroyHook((function(){c.off(Ct.permissionChanged,u)})),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return Ic},e.setContextMenuConfig=function(t){pc=t};var n=e.prototype;return n.updateOnPermissionChange=function(t){if(!this.isDestroyed&&Wt.a.isPropertyIntialized(this,"shapeControl")){var e=!1;e=!!this.groupMoveDisabled()||(t.ignorable()?this.moveDisabled():this.moveDisabled()||!t.isAdjustable());var n=this.shapeControl;e?n.disable():n.enable()}},n.isHTMLSimulate=function(t){return"canvas"===this.pdfViewer.config.annotRenderingMode[t||this.name]},n.generateApRenderer=function(){return new Dc(this)},n.getRenderPromise=function(){return this.currentRenderDefer.promise},n.getTileConfig=function(t,e){var n=this.pdfViewer,r=n.getSmartScale(t),i=n.config.tileSize,o=this.annot,a=o.getDeviceRect(1,e),s=o.getDeviceRect(r,e),c=s.right-s.left,u=s.bottom-s.top;return this.getAnnotFlag().checkNoZoom()&&(c=a.right-a.left,u=a.bottom-a.top),[Math.ceil(u/i),Math.ceil(c/i),c+=1,u+=1,i,r,t,e,a.left,a.top]},n.render=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,i=this.annot,o=this.getAnnotFlag();return this.scale=n,this.rotate=r,this.currentRenderDefer.isPending||(this.currentRenderDefer=z()),o.checkNoView()||o.checkInvisible()||o.checkHidden()||i.isEmpty()||i.isDeleted()||i.rectIsEmpty()?(this.$ui.addClass("fv__markup-annot-invisible"),this.currentRenderDefer.resolve(),Promise.resolve()):(this.$ui.removeClass(["fv__annot-flags-nozoom","fv__markup-annot-invisible"]),this.apRenderer.render(n,r,this.visibleRect).then((function(){if(!e.isDestroyed){if(o.checkNoZoom()||"text"===i.getType()){var t,n;e.$ui.addClass("fv__annot-flags-nozoom"),n=(t=e.annot.getRect()).top-t.bottom;var r=t.right-t.left;e.$ui.css({width:r+"px",height:n+"px"}).find(".fv__tiles-canvas").css({width:"auto",height:"auto"})}var a=i.getPopup();a&&a.getOpenStatus&&a.getOpenStatus()?e.showPopup():e.hidePopup()}})).finally((function(){e.currentRenderDefer.resolve(),t.prototype.afterRender.call(e)})))},n.afterRender=function(t){t.transformed&&this.isActive&&this.active()},n.redraw=function(t){if(this.activeRect(),t&&this.apRenderer)try{this.apRenderer.clearCache()}catch(t){}return this.render()},n.active=function(){t.prototype.active.call(this),this.$handler.addClass("active")},n.activeMore=function(t,e){},n.activeMoreItem=function(){},n.unActive=function(){var e=this;if(this.isActive){var n=this.pdfViewer;n.unActiveElement(this),t.prototype.unActive.call(this),n.eventEmitter.emit(Ct.unActiveAnnotation,this),this.$handler.removeClass("active"),this.getGroupRenders().map((function(t){t.component!=e&&t.component.unActive()}))}},n.unActiveMore=function(){},n.renderDestroy=function(){this.apRenderer.destry(),this.$handler.remove()},n.showReplyDialog=function(){var t=this;this.updateDeleteStatus(!0);var e=this.annot,n={},r=e.getGroupHeader()||e,i=n.content=r.getContent(),o=n.replies=[];this.iterationGetRepliesInfo(r,o);var a=o.length,s=Ac()(n),c=B()(s);this.$replyDialog=c;var u=c[0],d=c.find(".fv__btn-reply")[0],l=c.find(".reply-textarea")[0],h=!1;this.replyDisabled()?(c.find(".fv__btn-reply").addClass("fv__btn-replay-disabled"),c.find(".content-textarea").prop({disabled:!0}),c.find(".reply-textarea").prop({disabled:!0})):(c.find(".fv__btn-reply").removeClass("fv__btn-replay-disabled"),c.find(".content-textarea").prop({disabled:!1}),c.find(".reply-textarea").prop({disabled:!1})),c.on("click",".fv__btn-close",(function(){t.hideReplyDialog()})).on("change",".content-textarea",(function(e){var n=e.target,r=n.value;t.setContent(r).then((function(t){if(t)return i=r;n.value=i}))})).on("input",".reply-textarea",(function(t){d.disabled=!l.value})).on("click",".fv__btn-reply",(function(e){if(!t.replyDisabled()&&!h){d.disabled=!0,h=!0;var n=l.value;t.addReply(n).then((function(e){var n={content:e.getContent()},r=n.replies=[];t.iterationGetRepliesInfo(e,r),a?c.find(".fv__replies_list").first().append(Sc()(n)):c.find(".fv__dialog-replies-block").first().html(Ec()([n])),a=!0,l.value="",d.disabled=!1,h=!1}),(function(){d.disabled=!1}))}})),c.appendTo(document.body),vc.a.registerDialog(u),u.showModal()},n.hideReplyDialog=function(){var t=this.$replyDialog;t&&(t[0].close(),t.remove(),this.$replyDialog=null),this.updateDeleteStatus(!1)},n.addReply=function(t){var e=this;return this.annot.addReply(t).then((function(t){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t}))},n.showContextMenu=function(t,e){return!!this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},n.hideContextMenu=function(){},n.getPropertyOptions=function(){var t=this.annot;return{color:xn(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderStyle:!1,disabled:this.propertyDisabled()}},n.showPropertiesDialog=function(){this.$propertiesControl=new wc(this),this.updateDeleteStatus(!0)},n.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.bindEvent(),this.updateDeleteStatus(!1)},n.updateRender=function(){return Promise.resolve()},n.setContent=function(t){var e=this;return this.annot.setContent(t).then((function(t){return t&&e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t}))},n.setColor=function(t){var e=this;return this.annot.setBorderColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setOpacity=function(t){var e=this;return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.destroy=function(){this.hidePopup(),this.hidePropertiesDialog(),this.unBindEvent(),this.$propertiesControl=null,this.hideReplyDialog(),Wt.a.isPropertyIntialized(this,"contextMenu")&&this.contextMenu&&this.contextMenu.destroy(),this.blankHammar&&this.blankHammar.destroy(),this.pdfViewer.deactivateElement(this),this.unActiveMore(),t.prototype.destroy.call(this),this.apRenderer.destroy(),this.eUi&&this.eUi.removeEventListener("mouseenter",this.annotTooltipMouseover),this.eUi=null,this.tooltip=null},n.remove=function(){this.destroy()},n.iterationGetRepliesInfo=function(t,e){for(var n=t.getReplies(),r=0,i=n.length;r<i;r++){var o=n[r];if(!o.isDeleted()){var a={content:o.getContent(),replies:[]};this.iterationGetRepliesInfo(o,a.replies),e.push(a)}}},n.removeAnnot=function(){var t=this;return this.getAppPermission().then((function(e){return e.ignorable()&&t.deleteDisabled()?Promise.resolve():e.isDeletable()&&!t.deleteDisabled()?t.doRemoveAnnot():void 0})).then((function(e){var n=t.pdfViewer.getCurrentActivatable();return n&&n.remove&&n.remove(t),e}))},n.doRemoveAnnot=function(){var t=this,e=this.pdfViewer,n=e.eventEmitter,r=this.annot;return Promise.resolve((e.customs.removeAnnotBefore||Dt.a)(this)).then((function(e){if(n.emit(Ct.removeActionAnnotationBefore,t),!1!==e)return r.getPDFPage().removeAnnot(r).then((function(e){return n.emit(Ct[e?"removeActionAnnotationSuccess":"removeActionAnnotationFailed"],t,r),e}),(function(){n.emit(Ct.removeActionAnnotationFailed,t)}))}))},n.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},n.willRedraw=function(){t.prototype.willRedraw.call(this),this.apRenderer.willRender(),(this.$rect=this.$rect||this.rectInit()).get(0).willChange="left, top, width, height"},n.afterRedraw=function(){t.prototype.afterRedraw.call(this),this.apRenderer.afterRender(),(this.$rect=this.$rect||this.rectInit()).get(0).willChange="auto"},n.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,r=this.rotate,i=t.getDeviceRect(n,r);e.css({left:i.left+"px",top:i.top+"px",width:i.right-i.left+"px",height:i.bottom-i.top+"px"})},n.rectInit=function(){var t=this.$handler,e=B()(this.createRectDom());return t.append(e),this.contextMenuIsEnable()&&e.data("annotComponent",this),e},n.rectSingleTap=function(){},n.rectDoubleTap=function(t){var e=this;this.getAppPermission().then((function(t){t.isEditable()&&e.showReplyDialog("comment")}))},n.createRectDom=function(){return B()('<div class="fv__pdf-page-annot-handler-rect">')},n.doubleTapAnnot=function(){var t=this;this.getAppPermission().then((function(e){e.isEditable()&&t.showReplyDialog("comment")}))},n.getContextMenuConfig=function(){if(pc)return pc;var t=this.constructor.getDefaultContextMenuConfig();for(var e in t)switch(e){case"items":var n=t[e],r=this.pdfViewer.i18n;for(var i in n){var o=n[i];o.nameI18nKey&&(o.name=r.t(o.nameI18nKey))}}return t},n.getRelevanceRenders=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.parent("annotsRender"),n=this.annot.getGroupHeader()||this.annot,r=[],i=n.getPopup(),o=[],a=[],s=[];_c(n,o),kc(n,a),Fc(n,s),i&&r.push(i.getId()),r.push.apply(r,o),r.push.apply(r,a),r.push.apply(r,s);var c=n.isGrouped()?n.getGroupElements():[n];return r.push.apply(r,E()(c.map((function(t){return t.getId()})))),t?r:r.map((function(t){return e.getAnnotRender(t)})).filter((function(t){return!!t}))},n.getGroupRenders=function(){var t=this.parent("annotsRender"),e=this.annot;return((e=e.getGroupHeader()||e).isGrouped()?e.getGroupElements():[e]).map((function(e){return t.getAnnotRender(e.getId())}))},n.getGroupRect=function(){var t=this.getGroupRenders();if(t.length>1){var e=t.map((function(t){return t.component.getRect()}));return{left:Math.min.apply(Math,E()(e.map((function(t){return t.left})))),right:Math.max.apply(Math,E()(e.map((function(t){return t.right})))),top:Math.min.apply(Math,E()(e.map((function(t){return t.top})))),bottom:Math.max.apply(Math,E()(e.map((function(t){return t.bottom}))))}}if(!t[0])return A()({},{});var n=t[0].component.getRect();return A()({},n)},n.showPopup=function(){},n.hidePopup=function(){},n.onDoubleTap=function(t){},n.invisibleRender=function(){this.apRenderer.invisibleRender()},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n);return A()(r,{opacity:this.annot.getOpacity(),tileConfig:this.getTileConfig(e,n)})},n.processShapeControlPermissionCtrl=function(){var t=this;this.pdfViewer.getAnnotAuthorityManager().getPermission(this.annot).then((function(e){t.updateOnPermissionChange(e)}))},e}(da);function Tc(t,e,n){var r=t[e](),i=r.length;if(!i)return n;for(var o=0;o<i;o++){var a=r[o];Tc(a,e,n),kc(a,n),Fc(a,n),n.push(a.getId())}return n}function _c(t,e){return Tc(t,"getReplies",e)}function kc(t,e){return Tc(t,"getMarkedStates",e)}function Fc(t,e){return Tc(t,"getReviewStates",e)}var Mc=n(246),Oc=n.n(Mc),Lc=n(325),Nc=n.n(Lc),Vc=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.left,n=void 0===e?0:e,r=t.right,i=void 0===r?0:r,o=t.bottom,a=void 0===o?0:o,s=t.top,c=void 0===s?0:s,u=t.box,d=t.marginBox,l=void 0===d?{left:0,top:0,right:0,bottom:0}:d,h=t.expansion,f=void 0===h?{left:0,top:0,right:0,bottom:0}:h;this.processing=!1,this.boundary={left:n,right:i,bottom:a,top:c},this.freeBoundary=null,this.marginBox=l,this.shape=this.calculateShape(),this.setBoundaryBox(u),this.tasks=[],this.expansion=f}var e=t.prototype;return e.process=function(){this.tasks=[],this.processing=!0,this.freeBoundary=A()({},this.boundary)},e.end=function(){this.tasks=[],this.processing=!1,this.boundary=this.squareBoundary||this.freeBoundary,this.freeBoundary=null,this.squareBoundary=null,this.shape=this.calculateShape()},e.cancel=function(){this.tasks=[],this.processing=!1,this.freeBoundary=null,this.squareBoundary=null},e.setBoundaryBox=function(t){var e=this;this.box=t,this.boxStrict=t?function(n){return e._adjustBoundaryByBox(t,n)}:Dt.a},e.undo=function(){var t=this.tasks.pop();"function"==typeof t&&t()},e.addTask=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.tasks.push((function(){return t.apply(void 0,n)}))},e.recordFreeBoundary=function(){var t=this,e=this.freeBoundary?A()({},this.freeBoundary):null;this.addTask((function(e){t.freeBoundary=e}),e)},e.recordSquareBoundary=function(){var t=this,e=this.squareBoundary?A()({},this.squareBoundary):null;this.addTask((function(e){t.squareBoundary=e}),e)},e.adjustWest=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ADJUST_MODE_FREE;this.recordFreeBoundary();var r=this.freeBoundary,i=this.freeBoundary.left+e,o=this.freeBoundary.right;switch(r.left=Math.min(i,o),r.right=Math.max(i,o),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareH();break;case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),o<i?"east":"west"},e.adjustEast=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ADJUST_MODE_FREE;this.recordFreeBoundary();var r=this.freeBoundary.right+e,i=this.freeBoundary.left;switch(this.freeBoundary.left=Math.min(i,r),this.freeBoundary.right=Math.max(i,r),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareH();break;case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),r<i?"west":"east"},e._adjustToSquareH=function(){var t=this.freeBoundary,e=t.right-t.left,n=t.bottom-t.top,r=t.top+n/2-e/2,i=r+e;t.top=r,t.bottom=i},e.adjustNorth=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ADJUST_MODE_FREE;this.recordFreeBoundary();var r=this.freeBoundary.top+e,i=this.freeBoundary.bottom;switch(this.freeBoundary.top=Math.min(r,i),this.freeBoundary.bottom=Math.max(r,i),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareV();break;case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),i<r?"south":"north"},e.adjustSouth=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ADJUST_MODE_FREE;this.recordFreeBoundary();var r=this.freeBoundary.bottom+e,i=this.freeBoundary.top;switch(this.freeBoundary.top=Math.min(i,r),this.freeBoundary.bottom=Math.max(i,r),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareV();break;case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),r<i?"north":"south"},e._adjustToSquareV=function(){var t=this.freeBoundary,e=t.right-t.left,n=t.bottom-t.top,r=t.left+e/2-n/2,i=r+n;t.left=r,t.right=i},e._adjustToSquare=function(t,e){var n=this.freeBoundary.right-this.freeBoundary.left,r=this.freeBoundary.bottom-this.freeBoundary.top,i=Math.min(n,r);this.squareBoundary=A()({},this.freeBoundary),"west"==e?this.squareBoundary.left=this.freeBoundary.right-i:this.squareBoundary.right=this.freeBoundary.left+i,"south"==t?this.squareBoundary.bottom=this.freeBoundary.top+i:this.squareBoundary.top=this.freeBoundary.bottom-i},e.adjustNorthWest=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.ADJUST_MODE_FREE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(this.recordFreeBoundary(),this.recordSquareBoundary(),this.squareBoundary=null,r){case t.ADJUST_MODE_UNIFORM:return this._adjustNorthWestUniform(e,n,i),this.boxStrict(this.freeBoundary),"north-west";case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:var o=this.adjustNorth(n),a=this.adjustWest(e);return r==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(o,a),this.boxStrict(this.squareBoundary)),"".concat(o,"-").concat(a)}},e._adjustNorthWestUniform=function(t,e,n){var r=this.freeBoundary,i=r.right,o=r.bottom,a=r.left,s=r.top,c=i-(a+t),u=o-(s+e),d=i-a,l=o-s,h=Math.min(c,u);h>=n&&(h===c?u=h/d*l:c=h/l*d,this.freeBoundary.left=i-c,this.freeBoundary.top=o-u)},e.adjustNorthEast=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.ADJUST_MODE_FREE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(this.recordFreeBoundary(),this.recordSquareBoundary(),r){case t.ADJUST_MODE_UNIFORM:return this._adjustNorthEastUniform(e,n,i),this.boxStrict(this.freeBoundary),"north-east";case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:var o=this.adjustNorth(n),a=this.adjustEast(e);return this.squareBoundary=null,r==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(o,a),this.boxStrict(this.squareBoundary)),"".concat(o,"-").concat(a)}},e._adjustNorthEastUniform=function(t,e,n){var r=this.freeBoundary,i=r.right,o=r.bottom,a=r.left,s=r.top,c=i+t-a,u=o-(s+e),d=i-a,l=o-s,h=Math.min(c,u);h>=n&&(h===c?u=h/d*l:c=h/l*d,this.freeBoundary.right=a+c,this.freeBoundary.top=o-u)},e.adjustSouthWest=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.ADJUST_MODE_FREE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(this.recordFreeBoundary(),this.recordSquareBoundary(),r){case t.ADJUST_MODE_UNIFORM:return this._adjustSouthWestUniform(e,n,i),this.boxStrict(this.freeBoundary),"south-west";case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:var o=this.adjustSouth(n),a=this.adjustWest(e);return this.squareBoundary=null,r==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(o,a),this.boxStrict(this.squareBoundary)),"".concat(o,"-").concat(a)}},e._adjustSouthWestUniform=function(t,e,n){var r=this.freeBoundary,i=r.right,o=r.bottom,a=r.left,s=r.top,c=i-(a+t),u=o+e-s,d=i-a,l=o-s,h=Math.min(c,u);h>=n&&(h===c?u=h/d*l:c=h/l*d,this.freeBoundary.left=i-c,this.freeBoundary.bottom=s+u)},e.adjustSouthEast=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.ADJUST_MODE_FREE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(this.recordFreeBoundary(),this.recordSquareBoundary(),r){case t.ADJUST_MODE_UNIFORM:return this._adjustSouthEastUniform(e,n,i),this.boxStrict(this.freeBoundary),"south-east";case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:var o=this.adjustSouth(n),a=this.adjustEast(e);return this.squareBoundary=null,r==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(o,a),this.boxStrict(this.squareBoundary)),"".concat(o,"-").concat(a)}},e._adjustSouthEastUniform=function(t,e,n){var r=this.freeBoundary,i=r.right,o=r.bottom,a=r.left,s=r.top,c=i+t-a,u=o+e-s,d=i-a,l=o-s,h=Math.min(c,u);h>=n&&(h===c?u=h/d*l:c=h/l*d,this.freeBoundary.right=a+c,this.freeBoundary.bottom=s+u)},e.adjustPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.recordFreeBoundary(),this.freeBoundary&&(this.freeBoundary.left+=t,this.freeBoundary.right+=t,this.freeBoundary.top+=e,this.freeBoundary.bottom+=e,this.boxStrict(this.freeBoundary))},e.adjustPositionTo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.freeBoundary.left,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.freeBoundary.top;this.adjustPosition(t-this.freeBoundary.left,e-this.freeBoundary.top)},e._adjustMovingBoundaryByBox=function(t,e){var n=e.right-e.left,r=e.bottom-e.top;this.boundary.right>t.right&&(this.boundary.right=t.right,this.boundary.left=t.right-n),this.boundary.bottom>t.bottom&&(this.boundary.bottom=t.bottom,this.boundary.top=t.bottom-r),this.boundary.left<t.left&&(this.boundary.left=t.left,this.boundary.right=t.left+n),this.boundary.top<t.top&&(this.boundary.top=t.top,this.boundary.bottom,t.top)},e._adjustBoundaryByBox=function(t,e){var n=this.marginBox;n||(n={}),n.left=n.left||0,n.top=n.top||0,n.bottom=n.bottom||0,n.right=n.right||0;var r=os.on(e).expand(n.top,n.left,n.bottom,n.right).extract(),i=r.right-r.left,o=r.bottom-r.top;r.right>t.right&&(r.right=t.right,r.left=t.right-i),r.bottom>t.bottom&&(r.bottom=t.bottom,r.top=t.bottom-o),r.left<t.left&&(r.left=t.left,r.right=t.left+i),r.top<t.top&&(r.top=t.top,r.bottom=t.top+o);var a=os.on(r).shrink(n.top,n.left,n.bottom,n.right).extract();os.copyTo(a,e)},e.setMargin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.marginBox,e=t.left,n=void 0===e?0:e,r=t.top,i=void 0===r?0:r,o=t.right,a=void 0===o?0:o,s=t.bottom,c=void 0===s?0:s;this.marginBox={left:n,top:i,right:a,bottom:c}},e.getAdjustRect=function(){var t=this.squareBoundary||this.freeBoundary;return t?A()({},t):null},e.getAdjustShape=function(){var t=this.squareBoundary||this.freeBoundary;return t?{left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top}:null},e.getRect=function(){return A()({},this.boundary)},e.getShape=function(){return A()({},this.shape)},e.calculateShape=function(){var t=this.boundary;return{left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top}},e.applyToDom=function(t,e){e=e||this.getShape();var n=this.expansion;t.style.cssText+="\n                left: ".concat(e.left-n.left,"px;\n                top: ").concat(e.top-n.top,"px;\n                width: ").concat(e.width+(n.left+n.right),"px;\n                height: ").concat(e.height+(n.top+n.bottom),"px;\n                ")},e.applyAdjustingToDom=function(t,e){e=e||this.getAdjustShape();var n=this.expansion;t.style.cssText+="\n                left: ".concat(e.left-n.left,"px;\n                top: ").concat(e.top-n.top,"px;\n                width: ").concat(e.width+(n.left+n.right),"px;\n                height: ").concat(e.height+(n.top+n.bottom),"px;\n                ")},Tt()(t,null,[{key:"ADJUST_MODE_FREE",get:function(){return"free"}},{key:"ADJUST_MODE_UNIFORM",get:function(){return"uniform"}},{key:"ADJUST_MODE_SQUARE",get:function(){return"square"}}]),t}(),Bc=Et,Uc=Ea.a.getLogger("ShapeControl"),jc={};function Hc(t){var e=Object.keys(t).sort().map((function(e){return t[e]?1:0})).join("");if(e in jc)return jc[e].cloneNode(!0);var n=(new DOMParser).parseFromString(Nc()(t),"text/html").body.firstChild;return jc[e]=n,n.cloneNode(!0)}var Wc=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.emitter,i=n.prestart,o=void 0===i?Dt.a:i,a=n.start,s=void 0===a?Dt.a:a,c=n.update,u=void 0===c?Dt.a:c,d=n.interceptor,l=void 0===d?Bc:d,h=n.moving,f=void 0===h?Dt.a:h,p=n.end,g=void 0===p?Dt.a:p,v=n.afterEnd,m=void 0===v?Dt.a:v,y=n.rotate,w=void 0===y?Dt.a:y,b=n.beforeRotateStart,A=void 0===b?Dt.a:b,P=n.rotateStart,E=void 0===P?Dt.a:P,x=n.rotateEnd,S=void 0===x?Dt.a:x,C=n.afterRotateEnd,D=void 0===C?Dt.a:C,I=n.enableDiagonally,R=void 0!==I&&I,T=n.enableFrame,_=void 0===T||T,k=n.enableSizeBox,F=void 0!==k&&k,M=n.resizable,O=void 0===M||M,L=n.moveable,N=void 0===L||L,V=n.rotatable,B=void 0!==V&&V,U=n.previewer,j=void 0!==U&&U,H=n.enableUniform,W=void 0!==H&&H,$=n.minUniformSize,Y=void 0===$?15:$,q=n.annotRender,G=void 0===q?null:q,z=n.expansion,K=void 0===z?{left:1,top:1,right:1,bottom:1}:z,J=n.degreeInitVisibility,X=void 0===J||J,Z=n.resizeCompanions,Q=void 0!==Z&&Z,tt=n.onStatusChange,et=void 0===tt?Dt.a:tt;return(e=t.call(this)||this).ui=Hc({enableDiagonally:R,resizable:O,enableFrame:_,rotatable:B,moveable:N,previewer:j,enableSizeBox:F,degreeInitVisibility:X}),e.emitter=r,e.onPrestart=o,e.onStart=s,e.onUpdate=u,e.onMoving=f,e.interceptor=l,e.onEnd=g,e.onAfterEnd=m,e.onBeforeRotateStart=A,e.onAfterRotateEnd=D,e.rotate=w,e.onRotateStart=E,e.onRotateEnd=S,e.enableUniform=W,e.minUniformSize=Y,e.rotatable=B,e.moveable=N,e.enablePreviewer=j,e.isDisabled=!1,e.isMoveDisabled=!1,e.enableDiagonally=R,e.enableFrame=_,e.enableSizeBox=F,e.resizable=O,e.annotRender=G,e.rotateCursorStyle="fv__cursor-rotation",e.rotateDegree=0,e.isRotateStarted=!1,e.expansion=K,e.resizeCompanions=Q,e.companions=[],e.degreeInitVisibility=X,e.isActive=!1,e.onStatusChange=et,e}O()(e,t);var n=e.prototype;return n.init=function(){if(!this._isInitted){this._isInitted=!0;var t=this.ui.querySelector(".fv__shape-control-previewer");this.rotatingRod=this.ui.querySelector(".fv__shape-rotate"),this.shapeSizeBox=this.ui.querySelector(".fv__shape-size"),this.context=t.getContext("2d"),this.companionMargin={left:0,right:0,top:0,bottom:0},this.rotateDegreeBox=this.ui.querySelector(".fv-shape-rotate-degree"),this.updateRotateDegreeBox(this.rotateDegree),this.bindEvents()}},n.companion=function(t){var e=this;if(t===this)return Dt.a;var n="function"==typeof t.getCompanionObject?t.getCompanionObject():void 0;return n?-1!==this.companions.indexOf(n)||n.companions.indexOf(this)>-1?Dt.a:(this.companions.push(n),this.updateMargin(),function(){var t=e.companions.indexOf(n);t>-1&&e.companions.splice(t,1)}):Dt.a},n.getCompanionObject=function(){return this},n.updateMargin=function(){if(0===this.companions.length)return this.setMargin(this.originMargin),void(this.companionMargin={left:0,right:0,top:0,bottom:0});var t=this.shape.getRect(),e=t.left,n=t.right,r=t.top,i=t.bottom;this.companions.forEach((function(t){var o=t.shape.getRect();e=Math.min(o.left,e),r=Math.min(o.top,r),n=Math.max(o.right,n),i=Math.max(o.bottom,i)}));var o=t.left-e,a=n-t.right,s=t.top-r,c=i-t.bottom;this.companionMargin={left:o,right:a,top:s,bottom:c},this.originMargin=this.shape.marginBox;var u={left:Math.max(this.companionMargin.left,this.originMargin.left),right:Math.max(this.companionMargin.right,this.originMargin.right),top:Math.max(this.companionMargin.top,this.originMargin.top),bottom:Math.max(this.companionMargin.bottom,this.originMargin.bottom)};this.setMargin(u)},n.clearCompanions=function(){this.companions.length=0,this.updateMargin()},n.getPreviewerContext=function(){return this.context},n.bindEvents=function(){var t=this,e=this.ui.querySelectorAll(".fv__shape-controller");Array.prototype.slice.call(e).forEach((function(e){return t._bindControllerEvents(e)})),this.moveable&&this._bindMoveAreaEvents(),this.rotatable&&this._bindRotateEvents()},n._bindControllerEvents=function(t){var n,r,i=this,o=new zr.Manager(t);o.add(new zr.Pan({direction:zr.DIRECTION_ALL})),o.on("panmove",(function(e){var o=e.deltaX,a=e.deltaY;if(!i.isDisabled&&i.isActive){var s=o-n,c=a-r;n=o,r=a,i.resize(t.getAttribute("direction"),s,c),i._resizeSizeBox()}})),o.on("panstart",(function(e){var o=e.deltaX,a=e.deltaY;!i.isDisabled&&i.isActive&&(n=o,r=a,i.start(),i.resizeCompanions||i.setMargin({left:0,right:0,top:0,bottom:0}),i.resize(t.getAttribute("direction"),o,a,!0))})),o.on("panend",(function(t){!i.isDisabled&&i.isActive&&i.end(e.ACTION_RESIZE)})),o.on("pancancel",(function(t){!i.isDisabled&&i.isActive&&i.cancel(e.ACTION_RESIZE)})),this.addDestroyHook((function(){o.destroy()}))},n._resizeSizeBox=function(){if(this.shapeSizeBox){var t=this.shape.getAdjustShape();t||(t=this.shape.shape);var e=parseInt(t.width),n=parseInt(t.height);this.shapeSizeBox.innerHTML=e<120?e+"px*"+n+"px":e<170?"W: "+e+"px, H: "+n+"px":"Width: "+e+"px, Height: "+n+"px",this.shapeSizeBox.style.top=n>100?"1px":"-22px"}},n._bindMoveAreaEvents=function(){var t,n,r=this,i=this.ui,o=new zr.Manager(i.querySelector(".fv__shape-control-move-area"),{domEvents:!0});o.add(new zr.Pan({direction:zr.DIRECTION_ALL})),o.on("panstart",(function(e){var i=e.deltaX,a=e.deltaY,s=e.center,c=e.srcEvent;if(!r.isDisabled&&!r.isMoveDisabled&&r.isActive){var u=o.element.getBoundingClientRect(),d=u.width,l=u.height;(d||l)&&(t=i,n=a,r.start(),r.trigger("movingstart",{deltaX:s.x+i,deltaY:s.y+a,srcEvent:c}),r.move(t,n,!0))}})),o.on("panend",(function(t){if(r.trigger("movingend",t),!r.isDisabled&&!r.isMoveDisabled&&r.isActive){var n=o.element.getBoundingClientRect(),i=n.width,a=n.height;(i||a)&&r.end(e.ACTION_MOVE)}})),o.on("pancancel",(function(t){if(r.trigger("movingcancel"),!r.isDisabled&&!r.isMoveDisabled&&r.isActive){var n=o.element.getBoundingClientRect(),i=n.width,a=n.height;(i||a)&&r.cancel(e.ACTION_MOVE)}})),o.on("panmove",(function(e){var i=e.deltaX,a=e.deltaY;e.center,e.direction;if(!r.isDisabled&&!r.isMoveDisabled&&r.isActive){var s=o.element.getBoundingClientRect(),c=s.width,u=s.height;if(c||u){var d=i-t,l=a-n;t=i,n=a,r.move(d,l)}}})),this.addDestroyHook((function(){o.destroy()}))},n.disable=function(){this.isDisabled=!0,this.ui.classList.add("disabled"),this.onStatusChange()},n.enable=function(){this.isDisabled=!1,this.ui.classList.remove("disabled"),this.onStatusChange()},n.moveDisable=function(){this.moveable&&(this.isMoveDisabled=!0,this.ui.classList.add("move-disabled"),this.onStatusChange())},n.moveEnable=function(){this.moveable&&(this.isMoveDisabled=!1,this.ui.classList.remove("move-disabled"),this.onStatusChange())},n.start=function(){this.isDisabled||(this.doStart(),this.onPrestart(),this.companions.forEach((function(t){return t.doStart()})))},n.doStart=function(){this.ui.style.willChange="left, top, width, height",this.shape.process()},n.move=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isDisabled&&!this.isMoveDisabled){var i=this.shape.getAdjustRect();this.shape.adjustPosition(t,n);var o=this.getSnapRect(this.shape.getAdjustRect()),a=o.left-i.left,s=o.top-i.top;if(this.interceptor(this.shape.getAdjustShape())){var c=this.getShapeFromRect(o);this.shape.applyAdjustingToDom(this.ui,c),r&&this.onStart(c,this.context,e.ACTION_MOVE),this.onMoving(c,this.context,{offsetLeft:a,offsetTop:s}),this.companions.forEach((function(t){return t.move(a,s,r)}))}else this.shape.undo()}},n.resize=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.isDisabled){switch(t){case"east":case"west":case"north":case"south":case"north-east":case"north-west":case"south-east":case"south-west":break;default:throw new Error("Incorrect direction: ".concat(t))}if(this._resize(t,n,r),this.interceptor(this.shape.getAdjustShape())){var o=this.getShapeFromRect(this.getDirectionSnapRect(this.shape.getAdjustRect(),t));this.shape.applyAdjustingToDom(this.ui,o),this._updatePreviewer(),i&&this.onStart(o,this.context,e.ACTION_RESIZE),this.onUpdate(o,this.context,{offsetLeft:n,offsetTop:r,direction:t}),this.resizeCompanions&&this.companions.forEach((function(e){return e.resize(t,n,r,i)}))}else this.shape.undo()}},n.end=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(this.isDisabled||"move"===t&&this.isMoveDisabled)){n=n==this.companions.length,this.ui.style.willChange="auto";var r=this.shape.getAdjustRect();if(r){var i=this.getShapeFromRect(t===e.ACTION_MOVE?this.getSnapRect(r):this.getDirectionSnapRect(r));this.onEnd(i,this.context,t,n),this.shape.end(),this.shape.applyToDom(this.ui,i),(t!=e.ACTION_RESIZE||this.resizeCompanions)&&this.companions.forEach((function(e,n){return e.end(t,n)}))}this.onAfterEnd(t)}},n.cancel=function(t){this.isDisabled||(this.shape.cancel(),this.shape.applyToDom(this.ui),this.onEnd(this.shape.getShape(),this.context,t),this.companions.forEach((function(e){return e.cancel(t)})),this.onAfterEnd(t))},n.rotateStart=function(){var t=this.ui.getBoundingClientRect(),e={x:t.left+.5*t.width,y:t.top+.5*t.height};this.rotationOffsetCenter=e,this.onRotateStart(this.rotateDegree,this.shape,this.context),this.companions.forEach((function(t){t.isRotateStarted=!0,t.rotateStart()}))},n.rotating=function(t,e){if(this.isRotateStarted){var n=t-this.rotationOffsetCenter.x,r=e-this.rotationOffsetCenter.y,i=Math.atan2(r,n)/Math.PI*180+90;this.ui.style.transform="rotate(".concat(i,"deg)"),this.updateRotateDegreeBox(i);var o=this.rotatingDegree;this.rotatingDegree=i,this.rotate(i,o),this.companions.forEach((function(t){t.ui.style.transform="rotate(".concat(i,"deg)"),t.updateRotateDegreeBox(i);var e=t.rotatingDegree;t.rotatingDegree=i,t.rotate(i,e)}))}},n.rotateEnd=function(){var t=this;if(this.isRotateStarted){this.isRotateStarted=!1;var e=this.rotatingDegree-this.rotateDegree;this.rotateDegree=this.rotatingDegree,this.rotatingDegree=void 0,this.onRotateEnd(this.rotateDegree,e,this.shape,this.context).then((function(e){t.rotatingRod.style.transform="rotate(".concat(e,"deg)")})),this.companions.forEach((function(t){t.rotateEnd()}))}},n.moveDirectly=function(t,e){if(!this.isDisabled){this.start();try{this.move(t,e,!0)}catch(t){throw this.cancel(),t}this.end()}},n.resizeDirectly=function(t,e,n){if(!this.isDisabled){this.start();try{this.resize(t,e,n,!0)}catch(t){throw this.cancel(),t}this.end()}},n._updatePreviewer=function(){if(this.enablePreviewer){var t=this.ui.querySelector(".fv__shape-control-previewer");t.setAttribute("width",this.ui.offsetWidth),t.setAttribute("height",this.ui.offsetHeight)}},n.hidePreviewer=function(){},n.showPreviewer=function(){},n.hide=function(){this.ui.style.display="none"},n.show=function(){this.ui.style.display="block"},n._resize=function(t,e,n){var r,i=this.ui;switch(r=this.enableUniform?Vc.ADJUST_MODE_UNIFORM:$t.isShift?Vc.ADJUST_MODE_SQUARE:Vc.ADJUST_MODE_FREE,t){case"north":o(t,this.shape.adjustNorth(n,r));break;case"south":o(t,this.shape.adjustSouth(n,r));break;case"east":o(t,this.shape.adjustEast(e,r));break;case"west":o(t,this.shape.adjustWest(e,r));break;case"north-west":o(t,this.shape.adjustNorthWest(e,n,r,this.minUniformSize));break;case"north-east":o(t,this.shape.adjustNorthEast(e,n,r,this.minUniformSize));break;case"south-west":o(t,this.shape.adjustSouthWest(e,n,r,this.minUniformSize));break;case"south-east":o(t,this.shape.adjustSouthEast(e,n,r,this.minUniformSize));break;default:throw new Error("Incorrect direction: "+t)}function o(t,e){if(t!==e){var n=i.querySelector("[direction=".concat(e,"]")),r=i.querySelector("[direction=".concat(t,"]"));n.setAttribute("direction",t),r.setAttribute("direction",e)}}},n.active=function(t,e,n){if(this.init(),this._applyAnnotBoundary(e),t){var r=t instanceof Element?t:t.get(0);this.ui.parentElement!==r&&r.appendChild(this.ui)}var i=!!this.shape&&this.shape.processing;this.shape=new Vc({left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height,box:n,expansion:this.expansion}),i&&this.shape.process(),this.originMargin=this.shape.marginBox,this._updatePreviewer(),this._resizeSizeBox(),this.updateRotateDegreeBox(this.rotateDegree),this.isActive=!0},n.updateRotateDegreeBox=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(t=parseInt(t))>180&&(t-=360),t*=-1,this.rotateDegreeBox&&(this.rotateDegreeBox.innerHTML=t+"°",this.rotateDegreeBox.style.transform="rotate(".concat(t,"deg)"))},n.updateBoundary=function(t,e){A()(this.shape.boundary,t),this._applyAnnotBoundary(this.shape.boundary),e&&this.updateBoundaryBox(e),this._updatePreviewer()},n.setMargin=function(t){t&&this.shape&&this.shape.setMargin(t)},n.updateBoundaryBox=function(t){this.shape.setBoundaryBox(t)},n.getCurrentShape=function(){return this.shape.getShape()},n.getAdjustingShape=function(){return this.shape.getAdjustShape()},n.getAdjustedOffset=function(){var t=this.getAdjustedRectDiff();return{offsetLeft:t.left,offsetTop:t.top}},n.getAdjustedRectDiff=function(){return os.subtract(this.shape.getAdjustRect(),this.shape.getRect())},n.deactive=function(){this.ui.parentNode&&this.ui.parentNode.removeChild(this.ui),this.isActive=!1},n.destroy=function(){t.prototype.destroy.call(this),this.disable(),this.ui.parentNode&&this.ui.parentNode.removeChild(this.ui)},n._applyAnnotBoundary=function(t){var e=t.left,n=t.top,r=t.width,i=t.height,o=this.expansion;this.ui.style.cssText+="\n            width: ".concat(r+(o.left+o.right),"px;\n            height: ").concat(i+(o.top+o.bottom),"px;\n            left: ").concat(e-o.left,"px;\n            top: ").concat(n-o.top,"px;\n            ")},n._bindRotateEvents=function(){var t=this,e=this.ui.querySelector(".fv-shape-rotate-handle"),n=new zr.Manager(e);n.add(new zr.Pan({direction:zr.DIRECTION_ALL}));n.on("panstart",(function(e){!t.isDisabled&&t.isActive&&(t.onBeforeRotateStart(),t.isRotateStarted=!0,t.companions.forEach((function(t){return t.isRotateStarted=!0})),t.rotateStart())})),n.on("panend",(function(e){e.deltaX,e.deltaY;!t.isDisabled&&t.isRotateStarted&&(t.rotateEnd(),t.onAfterRotateEnd())})),n.on("pancancel",(function(t){Uc.debug("rotate c")})),n.on("panmove",(function(e){e.deltaX,e.deltaY;var n=e.center;!t.isDisabled&&t.isRotateStarted&&t.rotating(n.x,n.y)}))},n.trigger=function(t,e){var n=this.emitter;n&&n.emit(t,e)},n.setSnapGrid=function(t){this.snapGrid=t},n.getSnapGrid=function(){return this.snapGrid},n.getSnapMaxRect=function(t){if(!t)return t;var e=this.getSnapGrid();if(!e)return t;var n=t.left,r=t.right,i=t.top,o=t.bottom,a=e.offsetLeft,s=e.offsetTop,c=e.subLineWidth,u=e.subLineHeight,d=e.maxWidth,l=e.maxHeight,h=(n-a)%c,f=(i-s)%u;return h<0&&(h+=a),r+=Math.abs((r-a)%c-c)%c,f<0&&(f+=s),o+=Math.abs((o-s)%u-u)%u,{left:n-=h,right:r=Math.min(d,r),top:i-=f,bottom:o=Math.min(l,o)}},n.getSnapRect=function(t){if(!t)return t;var e=this.getSnapGrid();if(!e)return t;var n=e.maxWidth,r=e.maxHeight,i=t.left,o=t.right,a=t.top,s=t.bottom;if(i<=0||a<=0||o>=n||s>=r)return t;var c=e.offsetLeft,u=e.offsetTop,d=e.subLineWidth,l=e.subLineHeight,h=(i-c)%d,f=Math.abs(h-d)%d,p=(o-c)%d,g=Math.abs(p-d)%d,v=(a-u)%l,m=Math.abs(v-l)%l,y=(s-u)%l,w=Math.abs(y-l)%l,b=Math.min(h,p),A=Math.min(f,g),P=Math.min(v,y),E=Math.min(m,w);return b<A?(i-=b,o-=b):(i+=A,o+=A),P<E?(a-=P,s-=P):(a+=E,s+=E),{left:i,right:o,top:a,bottom:s}},n.getDirectionSnapRect=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastDirection;if(this.lastDirection=e,!t)return t;var n=this.getSnapGrid();if(!n)return t;var r=n.offsetLeft,i=n.offsetTop,o=n.subLineWidth,a=n.subLineHeight,s=n.maxWidth,c=n.maxHeight,u=t.left,d=t.right,l=t.top,h=t.bottom;if(u<=0||l<=0||d>=s||h>=c)return t.left=Math.max(0,u),t.right=Math.min(s,d),t.top=Math.max(0,l),t.bottom=Math.min(c,h),t;var f=(u-r)%o,p=Math.abs((d-r)%o-o)%o,g=(l-i)%a,v=Math.abs((h-i)%a-a)%a;switch(e){case"north":l-=g;break;case"south":h+=v;break;case"east":d+=p;break;case"west":u-=f;break;case"north-west":u-=f,l-=g;break;case"north-east":d+=p,l-=g;break;case"south-west":u-=f,h+=v;break;case"south-east":d+=p,h+=v;break;default:throw new Error("Incorrect direction: "+e)}return{left:u,right:d,top:l,bottom:h}},n.getShapeFromRect=function(t){if(t){var e=t.left,n=t.top;return{left:e,top:n,width:t.right-e,height:t.bottom-n}}},Tt()(e,null,[{key:"ACTION_RESIZE",get:function(){return"resize"}},{key:"ACTION_MOVE",get:function(){return"move"}}]),e}(vt.a),$c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"annotComponent",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".fv__pdf-page-annot-handler-rect";return{selector:e,items:{copy:{name:"copy",nameI18nKey:"viewer_:contextmenu.annot.copy",callback:function(e,n,r){this.data(t).copyText()},visible:function(){var e=this.data(t);if(!e.annot.isArea())return!e.annot.isReplace||!e.annot.isReplace()}},reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data(t).showReplyDialog("reply")},disabled:function(){return this.data(t).replyDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(e,n,r){this.data(t).showPropertiesDialog(e,n,r)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(t).removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}},events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}("annotComponent",".fv__pdf-page-annot-handler-rect"),Yc=Oc()({direction:"left"}),qc=Oc()({direction:"right"}),Gc=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="textmarkup",o.$ui.addClass("fv__pdf-page-textmarkup-annot-container"),o.$handler.addClass("fv__pdf-page-textmarkup-annot-handler-container"),o.annot.isArea()&&o.createShapeControl(),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return $c};var n=e.prototype;return n.redraw=function(e){var n=this;return this.getAppPermission().then((function(t){(t.ignorable()||t.isAdjustable())&&!n.moveDisabled()?n.boundaryEnabled():n.boundaryDisabled()})),t.prototype.redraw.call(this,e)},n.createShapeControl=function(){var t=this;Wt.a.property(this,"shapeControl",(function(){var e={start:function(){return t.onStartUpdateShape()},update:function(e,n){return t.onShapeUpdating(e,n)},moving:function(e,n){return t.onShapeMoving(e,n)},end:function(e,n,r){return t.onShapeUpdateEnd(e,n,r)},enableDiagonally:!0};t.annot.isReplace()&&(e.moveable=!1),t.annot.isArea()&&(e.emitter=t.pdfViewer.eventEmitter);var n=new Wc(e);return t.processShapeControlPermissionCtrl(n),t.addDestroyHook((function(){n.destroy()})),n}))},n._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox();this.annot.isArea()&&!this.shapeControl&&this.createShapeControl(),this.shapeControl.active(this.$handler,this.getBoundary(),t)},n.active=function(){var e=this;t.prototype.active.call(this);var n=this.annot.isArea();this.$rect&&(this.$rect.remove(),this.$rect=null),this.getAppPermission().then((function(t){var r=!0;r=(t.ignorable()||t.isAdjustable())&&!e.moveDisabled(),n?(e.activeRect(),e.$rect.addClass("active"),e._applyShapeChange(),e.boundaryRemove(),r?e.shapeControl.enable():e.shapeControl.disable()):(e.activeTextBoundary(),r?e.boundaryEnabled():e.boundaryDisabled())}))},n.unActive=function(){var e=this;t.prototype.unActive.call(this),this.annot.isArea()&&this.$rect&&this.$rect.removeClass("active"),this.annot.isGrouped()&&this.annot.groupElements.map((function(t){var n=e.pdfViewer.getAnnotRender(t.getPDFPage().getIndex(),t.getId()),r=n&&n.component;r&&r.isActive&&r.unActive&&r.unActive(),r&&r.deactive&&r.deactive()}))},n.afterRender=function(t){var e=t.transformed;(this.$ui.find("canvas").css({width:"",height:""}),e&&this.isActive)&&(this.annot.isArea()?(this.activeRect(),this._applyShapeChange()):this.activeTextBoundary())},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.createRectDom=function(){return this.annot.isArea()?(!this.shapeControl&&this.createShapeControl(),this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui):t.prototype.createRectDom.call(this)},n.copyText=function(){var t=this,e=this.annot.getContinuousText();return Object(K.copyText)(e).then((function(n){return n?t.pdfViewer.eventEmitter.emit(Ct.copyTextSuccess,e):t.pdfViewer.eventEmitter.emit(Ct.copyTextFailed,e),n}))},n.getBoundaryCss_=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getCharQuadPoints_(t),r=this.getCssTransform_(t),i=ut(this.getQuadPointsHeight_(n))/K.dpr,o=this.getPDFPage(),a=this.scale,s=this.rotate,c=o.getDeviceMatrix(s);c.scale(a,a);var u=[Math.min,Math.max][e](n[0].x,n[1].x,n[2].x,n[3].x),d=[Math.max,Math.min][e](n[0].y,n[1].y,n[2].y,n[3].y),l=c.transformPoint(u,d);return{transform:r,height:i,left:l[0],top:l[1]}},n.getCssTransform_=function(t){return"rotate("+(90*(t.rotation+this.annot.getPDFPage().getRotation())+this.rotate)+"deg)"},n.getCharQuadPoints_=function(t){return(0,this.annot.engine.getUtils().getQuadPointsFromRect)(t,t.rotation)},n.getQuadPointsHeight_=function(t){return Math.sqrt(Math.pow(t[2].x-t[0].x,2)+Math.pow(t[2].y-t[0].y,2))},n.activeTextBoundary=function(){var t=this.annot,e=t.getStartCharInfo(),n=t.getEndCharInfo();if(e&&n){var r=this.$leftTextBoundary=this.$leftTextBoundary||this.leftTextBoundaryInit(),i=this.$rightTextBoundary=this.$rightTextBoundary||this.rightTextBoundaryInit(),o=this.getBoundaryCss_(e);r.css({height:o.height+"px",transform:o.transform,top:o.top+"px",left:o.left+"px"});var a=this.getBoundaryCss_(n,1);i.css({height:a.height+"px",transform:a.transform,top:a.top-a.height+"px",left:a.left+"px"})}this.activeRect(t)},n.leftTextBoundaryInit=function(){var t,e,n,r,i,o=this,a=this.$handler,s=B()(Yc),c=s[0],u=new Kr.a(c);return u.get("pan").set({direction:Kr.a.DIRECTION_ALL}),u.on("panstart",(function(e){!1!==o.onLeftPanStart(e)&&(r=o.scale,i=o.rotate,t={left:parseFloat(s.css("left")),top:parseFloat(s.css("top")),height:parseFloat(s.css("height")),transform:s.css("transform")},n=t,o.textBoundaryStart())})),u.on("panmove",(function(a){if(!1!==o.onLeftPanMove(a)){var c=a.deltaX,u=a.deltaY;if(o.pdfViewer.config.highPerformance){var d=t.height;u+=d/2;var l=o.getPDFPage().reverseDevicePoint([t.left+c,t.top+u],r,i),h=o.annot,f=o.editDebouncePromise=o.editDebouncePromise||new Ot;f.push((function(){return o.getPDFPage().getCharInfoAtPoint(l,d/2/ut(r)).then((function(t){if(!t)return[!1];var n=t.charIndex,r=h.getEndCharIndex();if(n>r)return Promise.resolve([!1]);var i={left:(e=o.getBoundaryCss_(t)).left+"px",top:e.top+"px",height:e.height+"px",transform:e.transform};return Promise.all([h.updateQuadPointsByCharIndex(n,r),t,i])})).then((function(t){var r=S()(t,3),i=r[0],a=r[1],c=r[2];if(i)return s.css(c),e&&(n=e),o.updateRender().then((function(){return o.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,o),o.textBoundaryEnd(),o.onLeftChangeSuccess(a)}));s.css({left:n.left+"px",top:n.top+"px",height:n.height+"px",transform:n.transform})}),(function(){s.css({left:n.left+"px",top:n.top+"px",height:n.height+"px",transform:n.transform})}))})),f.exec()}else s.css({left:n.left+c+"px",top:n.top+u+"px"})}})),u.on("panend",(function(a){if(!1!==o.onLeftPanEnd(a)){var c=a.deltaX,u=a.deltaY,d=t.height;u+=d/2;var l=o.getPDFPage().reverseDevicePoint([t.left+c,t.top+u],r,i),h=o.annot,f=o.editDebouncePromise=o.editDebouncePromise||new Ot;f.push((function(){return o.getPDFPage().getCharInfoAtPoint(l,d/2/ut(r)).then((function(t){if(!t)return[!1];var n=t.charIndex,r=h.getEndCharIndex();return n>r?Promise.resolve([!1]):(e=o.getBoundaryCss_(t),s.css({left:e.left+"px",top:e.top+"px",height:e.height+"px",transform:e.transform}),Promise.all([h.updateQuadPointsByCharIndex(n,r),t]))})).then((function(t){var r=S()(t,2),i=r[0],a=r[1];if(i)return e&&(n=e),o.updateRender().then((function(){return o.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,o),o.onLeftChangeSuccess(a)}));s.css({left:n.left+"px",top:n.top+"px",height:n.height+"px",transform:n.transform})}),(function(){s.css({left:n.left+"px",top:n.top+"px",height:n.height+"px",transform:n.transform})}))})),f.exec()}})),this.leftHammer=u,a.append(s),this.addDestroyHook((function(){u.destroy()})),s},n.rightTextBoundaryInit=function(){var t,e,n,r,i,o=this,a=this.$handler,s=B()(qc),c=s[0],u=new Kr.a(c);return u.get("pan").set({direction:Kr.a.DIRECTION_ALL}),u.on("panstart",(function(e){!1!==o.onRightPanStart(e)&&(r=o.scale,i=o.rotate,t={left:parseFloat(s.css("left")),top:parseFloat(s.css("top")),height:parseFloat(s.css("height")),transform:s.css("transform")},n=t,o.textBoundaryStart())})),u.on("panmove",(function(a){if(!1!==o.onRightPanMove(a)){var c=a.deltaX,u=a.deltaY;if(o.pdfViewer.config.highPerformance)s.css({left:n.left+c+"px",top:n.top+u+"px"});else{var d=t.height;u+=d/2;var l=o.getPDFPage().reverseDevicePoint([t.left+c,t.top+d+u],r,i),h=o.annot,f=o.editDebouncePromise=o.editDebouncePromise||new Ot;f.push((function(){return o.getPDFPage().getCharInfoAtPoint(l,d/2/ut(r)).then((function(t){if(!t)return[!1];var n=h.getStartCharIndex(),r=t.charIndex;return n>r?Promise.resolve([!1]):(e=o.getBoundaryCss_(t,1),s.css({left:e.left+"px",top:e.top-e.height+"px",height:e.height+"px",transform:e.transform}),Promise.all([h.updateQuadPointsByCharIndex(n,r),t]))})).then((function(t){var r=S()(t,2),i=r[0],a=r[1];if(i)return e&&(n=e),o.updateRender().then((function(){return o.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,o),o.onRightChangeSuccess(a)}));s.css({left:n.left+"px",top:n.top-e.height+"px",height:n.height+"px",transform:e.transform})}),(function(){s.css({left:n.left+"px",top:n.top-e.height+"px",height:n.height+"px",transform:e.transform})}))})),f.exec()}}})),u.on("panend",(function(a){if(!1!==o.onRightPanEnd(a)){var c=a.deltaX,u=a.deltaY,d=t.height;u-=d/2;var l=o.getPDFPage().reverseDevicePoint([t.left+c,t.top+d+u],r,i),h=o.annot,f=o.editDebouncePromise=o.editDebouncePromise||new Ot;f.push((function(){return o.getPDFPage().getCharInfoAtPoint(l,d/2/ut(r)).then((function(t){if(!t)return[!1];var n=h.getStartCharIndex(),r=t.charIndex;return n>r?Promise.resolve([!1]):(e=o.getBoundaryCss_(t,1),s.css({left:e.left+"px",top:e.top-e.height+"px",height:e.height+"px",transform:e.transform}),Promise.all([h.updateQuadPointsByCharIndex(n,r),t]))})).then((function(t){var r=S()(t,2),i=r[0],a=r[1];if(i)return e&&(n=e),o.updateRender().then((function(){return o.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,o),o.textBoundaryEnd(),o.onRightChangeSuccess(a)}));s.css({left:n.left+"px",top:n.top+"px",height:n.height+"px",transform:n.transform})}),(function(){s.css({left:n.left+"px",top:n.top+"px",height:n.height+"px",transform:n.transform})}))})),f.exec()}})),this.rightHammer=u,a.append(s),this.addDestroyHook((function(){u.destroy()})),s},n.textBoundaryStart=function(){},n.textBoundaryEnd=function(){},n.boundaryDisabled=function(){this.toggleBoundary(!1)},n.boundaryEnabled=function(){this.toggleBoundary(!0)},n.toggleBoundary=function(t){this.$leftTextBoundary&&(this.$leftTextBoundary.toggleClass("ban",!t),this.$rightTextBoundary.toggleClass("ban",!t),this.leftHammer.get("pan").set({enable:t}),this.rightHammer.get("pan").set({enable:t}))},n.onStartUpdateShape=function(){this.pdfViewer.config.highPerformance&&this.annot.isArea()&&(this.editAreaDebouncePromise=new It(10))},n.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.annot.isArea()&&this.editAreaDebouncePromise.exec((function(){return n.setRect(t)}))},n.onShapeMoving=function(t,e){},n.onShapeUpdateEnd=function(t,e,n){var r=this;return this.editAreaDebouncePromise?this.editAreaDebouncePromise.waitForLastTask().then((function(){return r.setRect(t).then((function(t){"move"==n&&r.pdfViewer.eventEmitter.emit(Ct.annotationMovedPosition,[r.annot],r.getPDFPage(),r.annot)}))})):this.setRect(t).then((function(t){"move"==n&&r.pdfViewer.eventEmitter.emit(Ct.annotationMovedPosition,[r.annot],r.getPDFPage(),r.annot)}))},n.onLeftPanStart=function(t){},n.onLeftPanMove=function(t){},n.onLeftChangeSuccess=function(){},n.onLeftPanEnd=function(t){},n.onRightPanStart=function(t){},n.onRightPanMove=function(t){},n.onRightChangeSuccess=function(){return Promise.resolve()},n.onRightPanEnd=function(t){},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n);return A()(r,{quadPoints:this.annot.getQuadPoints()})},n.boundaryRemove=function(){this.$leftTextBoundary&&(this.$leftTextBoundary.remove(),this.$leftTextBoundary=null,this.leftHammer.destroy(),this.leftHammer=null),this.$rightTextBoundary&&(this.$rightTextBoundary.remove(),this.$rightTextBoundary=null,this.rightHammer.destroy(),this.rightHammer=null)},e}(Rc),zc=function(t){function e(e){return t.call(this,e)||this}O()(e,t);var n=e.prototype;return n.prepare=function(){this.prepared||(this.canvas=document.createElement("canvas"),this.container=this.component.getContainerElement(),this.container.appendChild(this.canvas),t.prototype.prepare.call(this))},n.destroy=function(){t.prototype.destroy.call(this),this.prepared&&this.canvas.remove()},n.doShow=function(){this.canvas.classList.remove("fv__ui-hide")},n.doHide=function(){this.canvas.classList.add("fv__ui-hide")},n.convertPointToPixel=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Vi.convertTo(t,qi)*e},n.willRender=function(){this.canvas.style.willChange="left, top, width, height",this.container.style.willChange="left; top"},n.afterRender=function(){this.canvas.style.willChange="auto",this.container.style.willChange="auto"},n.render=function(t,e){this.prepared||this.prepare();var n=this.component.getRenderingData(t,e);if(!n)return Promise.resolve();var r=n.annotInfo,i=r.borderInfo||{},o=this.convertPointToPixel(i.width,t),a=n.smartScale;!n.annotFlag.checkNoZoom()||(t=1);var s=n.rect,c=n.outerDeviceRect,u=n.innerDeviceRect;A()(u,{width:u.right-u.left,height:u.bottom-u.top}),A()(c,{width:c.right-c.left,height:c.bottom-c.top}),this.resetCanvasSize(c.width,c.height),this.container.style.cssText+="\n            left: ".concat(s.left,"px;\n            top: ").concat(s.top,"px;\n        ");var d=this.canvas.style;if(0===o&&0===r.borderColor&&!r.fillColor)return d.visibility="hidden",Promise.resolve();if(0===r.opacity)return d.visibility="hidden",Promise.resolve();d.visibility="unset";try{return Promise.resolve(this.doRender({outerRect:c,innerRect:u,deviceRect:s,scale:t,smartScale:a,rotate:e,renderingData:n}))}catch(t){return console.error(t),Promise.resolve()}},n.doRender=function(t){t.outerRect,t.innerRect,t.deviceRect,t.scale,t.rotate},n.resetCanvasSize=function(t,e){this.canvas.width=Math.ceil(t),this.canvas.height=Math.ceil(e),this.canvas.style.width=null,this.canvas.style.height=null},n.invisibleRender=function(){try{this.canvas.width=0}catch(t){}},e}(Cc),Kc=function(t){function e(e){var n;return(n=t.call(this,e)||this).lastRenderPromise=Promise.resolve(),n.lastX=0,n.lastY=0,n}O()(e,t);var n=e.prototype;return n.resetCanvasSize=function(){},n.closeTo=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(t-e)<n},n.render=function(e,n){var r=this;this.prepared||this.prepare();var i=this.component,o=i.getRenderingData(e,n),a=(o.page,this.canvas.getContext("2d")),s=S()(o.tileConfig,10),c=(s[0],s[1],s[2],s[3],s[4],s[5]),u=(s[6],s[7],s[8]),d=s[9],l=(o.rect,o.engineRenderingRect),h=o.outerDeviceRect,f=h.right-h.left,p=h.bottom-h.top,g=l.right-l.left,v=l.bottom-l.top;if((!this.closeTo(l.left,this.lastX)||!this.closeTo(l.top,this.lastY))&&this.canvas.width){var m=l.left-this.lastX,y=l.top-this.lastY,w=a.getImageData(0,0,this.canvas.width,this.canvas.height);t.prototype.resetCanvasSize.call(this,g,v),this.canvas.style.cssText+="width: ".concat(f,"px;height: ").concat(p,"px;"),this.container.style.cssText+="\n                left: ".concat(h.left,"px;\n                top: ").concat(h.top,"px;\n            "),a.putImageData(w,-m,-y)}return this.lastX=l.left,this.lastY=l.top,i.getPDFPage().getPageAndHighlightBitmap(ut(c),n,{x:Math.ceil(u*c),y:Math.ceil(d*c),width:g,height:v}).then((function(e){var n=e.buffer,i=e.width,o=e.height,s=e.image;if(s){var c=new Image;c.onload=function(){a.drawImage(c,0,0,i,o),URL.revokeObjectURL(c.src)},c.src=URL.createObjectURL(s)}else{var u=new(Uint8ClampedArray||Uint8Array)(n),d=a.createImageData(i,o);d.data.set(u),t.prototype.resetCanvasSize.call(r,i,o),r.container.style.cssText+="\n                    left: ".concat(h.left,"px;\n                    top: ").concat(h.top,"px;\n                "),r.canvas.style.cssText+="width: ".concat(f,"px;height: ").concat(p,"px;"),a.putImageData(d,0,0)}}))},e}(zc),Jc=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.convertToCanvasBasedPoint=function(t,e,n,r,i,o){var a=i.getDevicePoint([t,e],r,o),s=S()(a,2),c=s[0],u=s[1];return{x:c-n.left,y:u-n.top}},n.doRender=function(t){var e=this,n=t.scale,r=t.renderingData,i=t.rotate,o=r.page,a=r.annotInfo,s=a.startCharInfo,c=a.endCharInfo,u=r.quadPoints,d=r.outerDeviceRect;if(!s){var l=u[0];s={left:l[0].x,top:l[0].y,right:l[1].x,bottom:l[2].y}}if(!c){var h=u[u.length-1];c={left:h[0].x,top:h[0].y,right:h[1].x,bottom:h[2].y}}var f=u.map((function(t,r){var a=t.map((function(t){return e.convertToCanvasBasedPoint(t.x,t.y,d,n,o,i)})),s=a.map((function(t){return t.x})),c=a.map((function(t){return t.y})),u=Math.min.apply(Math,E()(s)),l=Math.max.apply(Math,E()(s)),h=Math.max.apply(Math,E()(c)),f=Math.min.apply(Math,E()(c));return{left:u,right:l,bottom:h,top:f,width:l-u,height:h-f,textBlockHeight:h-f}}));t.quadRects=f},e}(zc),Xc=function(t){function e(e){var n;return(n=t.call(this,e)||this).lastX=0,n.lastY=0,n}O()(e,t);var n=e.prototype;return n.prepare=function(){t.prototype.prepare.call(this),Nt.isChrome||Nt.isFirefox||Nt.isSafari||Nt.isChromiumEdge||(this.canvas.style.cssText+='\n            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n            -ms-filter: alpha(opacity=50);\n            filter: alpha(opacity=50);\n            -moz-opacity: 0.5;\n            -khtml-opacity: 0.5;\n            opacity: 0.5;\n        ')},n.doRender=function(e){e.smartScale,e.scale,this.component;var n=e.renderingData,r=n.annotInfo;if(0!=r.hasBorderColor){var i=this.canvas.getContext("2d"),o=n.outerDeviceRect,a=o.right-o.left,s=o.bottom-o.top;if(this.container.style.cssText+="\n                left: ".concat(o.left,"px;\n                top: ").concat(o.top,"px;\n            "),this.canvas.style.cssText+="width: ".concat(a,"px;height: ").concat(s,"px;"),i.save(),i.fillStyle=this.numberToRGBAString(r.color),i.globalAlpha=n.opacity,n.isArea)i.fillRect(0,0,this.canvas.width,this.canvas.height);else t.prototype.doRender.call(this,e),e.quadRects.forEach((function(t){i.fillRect(t.left,t.top,t.width,t.textBlockHeight)}));i.restore()}},e}(Jc),Zc=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="highlight",o.$ui.addClass("fv__pdf-page-highlight-annot-container"),o.$handler.addClass("fv__pdf-page-highlight-annot-handler-container"),o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new Xc(this):new Kc(this)},n.onShapeUpdating=function(e){if(this.checkRenderingModeIs("canvas"))return t.prototype.onShapeUpdating.call(this,e)},n.onShapeMoving=function(e){if(this.checkRenderingModeIs("canvas"))return t.prototype.onShapeMoving.call(this,e)},n.updateRender=function(){return this.redraw()},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.highlight===t},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n);return A()(r,{isArea:this.annot.isArea()})},e}(Gc),Qc=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.doRender=function(e){var n=this;t.prototype.doRender.call(this,e);var r=e.renderingData,i=r.annotInfo,o=r.rotate,a=e.quadRects,s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height),s.save(),s.globalAlpha=i.opacity,a.forEach((function(t){s.beginPath();var e=90==o||270==o?.12568*t.width:.12568*t.height;0===e||!1===i.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=n.numberToRGBAString(i.color),s.lineWidth=Math.max(1,e);var r=t.left,a=t.right,c=t.top+t.textBlockHeight/2;switch(o){case 90:s.moveTo(a-t.width/2,0),s.lineTo(a-t.width/2,t.textBlockHeight);break;case 180:s.moveTo(t.right,t.top+t.height/2),s.lineTo(t.left,t.top+t.height/2);break;case 270:s.moveTo(a-t.width/2,t.bottom),s.lineTo(a-t.width/2,t.bottom-t.textBlockHeight);break;default:s.moveTo(r,c),s.lineTo(a,c)}s.stroke()})),s.restore()},e}(Jc),tu=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="strikeout",o.$ui.addClass("fv__pdf-page-strikeout-annot-container"),o.$handler.addClass("fv__pdf-page-strikeout-annot-handler-container"),o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new Qc(this):t.prototype.generateApRenderer.call(this)},n.updateRender=function(){var t=this.annot,e=[],n=[],r=this.parent("annotsRender");if(t.isGrouped())for(var i=t.getGroupElements(),o=i.length;o--;){var a=i[o];n[o]=r.getAnnotRender(a.getId()).component,e[o]=a.update()}else n=[this],e=[t.update()];return Promise.all(e).then((function(){for(var t=[],e=n.length;e--;)t[e]=n[e].render();return Promise.all(t)}))},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.strikeout===t},e}(Gc),eu=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.doRender=function(e){t.prototype.doRender.call(this,e);var n=e.renderingData,r=n.annotInfo,i=n.rotate,o=e.quadRects,a=this.canvas.getContext("2d");a.clearRect(0,0,this.canvas.width,this.canvas.height),a.save(),a.globalAlpha=r.opacity,0===Math.max(1,.12568*o[0].height)||!1===r.hasBorderColor?a.strokeStyle="transparent":a.strokeStyle=this.numberToRGBAString(r.color),o.forEach((function(t){a.beginPath();var e=t.left,n=t.right,r=90==i||270==i?.22568*o[0].width:.12568*o[0].height,s=t.top+t.textBlockHeight-r/2;switch(i){case 90:a.moveTo(e+r/2,t.bottom),a.lineTo(e+r/2,t.top);break;case 180:a.moveTo(t.right,t.top+r/2),a.lineTo(t.left,t.top+r/2);break;case 270:a.moveTo(n,t.bottom),a.lineTo(n,t.bottom-t.textBlockHeight);break;default:a.moveTo(e,s),a.lineTo(n,s)}a.lineWidth=r,a.stroke()})),a.restore()},e}(Jc),nu=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="Underline",o.$ui.addClass("fv__pdf-page-Underline-annot-container"),o.$handler.addClass("fv__pdf-page-Underline-annot-handler-container"),o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new eu(this):t.prototype.generateApRenderer.call(this)},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.underline===t},e}(Gc),ru=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.doRender=function(e){t.prototype.doRender.call(this,e);var n=this.component.annot.info,r=e.renderingData.page.getRotationAngle(),i=e.renderingData.rotate+r,o=e.quadRects,a=this.canvas.getContext("2d");a.clearRect(0,0,this.canvas.width,this.canvas.height),a.save(),a.globalAlpha=n.opacity;var s=this.numberToRGBAString(n.color);o.forEach((function(t){var e=i;switch(i){case 0:case 180:2*t.width<t.height&&(e+=90);break;case 90:case 270:2*t.height<t.width&&(e+=90)}var r=90==(e%=360)||270==e?o[0].width:o[0].height;0===r||!1===n.hasBorderColor?a.strokeStyle="transparent":a.strokeStyle=s,a.lineWidth=Math.max(1,.12568*r),a.beginPath();var c=0,u=0,d=0,l=0;switch(e){case 90:c=.2504*t.width,u=Math.ceil(t.height/c),d=t.right-c,l=t.right,a.moveTo(t.left,t.bottom);for(var h=1;h<=u;h++){var f=h%2==0?0:c;a.lineTo(t.left+f,t.bottom-h*c)}break;case 180:c=.2504*t.height,u=Math.ceil(t.width/c),d=t.bottom-c,l=t.bottom,a.moveTo(t.left,t.top);for(var p=1;p<=u;p++){var g=p%2==0?0:c;a.lineTo(t.left+p*c,t.top+g)}break;case 270:c=.2504*t.width,u=Math.ceil(t.height/c),d=t.right-c,l=t.right,a.moveTo(t.right,t.bottom);for(var v=1;v<=u;v++){var m=v%2==0?0:c,y=t.bottom-v*c;y=y<=0?0:y,a.lineTo(t.right-m,y)}break;default:c=.2504*t.height,u=Math.ceil(t.width/c),d=t.bottom-c,l=t.bottom,a.moveTo(t.left,d);for(var w=1;w<=u;w++)a.lineTo(t.left+w*c,w%2==0?d:l)}a.stroke()})),a.restore()},e}(Jc),iu=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="strikeout",o.$ui.addClass("fv__pdf-page-squiggly-annot-container"),o.$handler.addClass("fv__pdf-page-squiggly-annot-handler-container"),o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new ru(this):t.prototype.generateApRenderer.call(this)},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.squiggly===t},e}(Gc),ou=n(207),au=n.n(ou),su=n(326),cu=n.n(su);function uu(t,e){var n=t.x,r=t.y,i=e.left,o=e.right,a=e.top,s=e.bottom;return n>=i&&n<=o&&r>=s&&r<=a}var du={unKnownType:"unknowntype",text:"text",link:"link",freeText:"freetext",line:"line",square:"square",circle:"circle",polygon:"polygon",polyLine:"polyline",polyline:"polyline",highlight:"highlight",underline:"underline",squiggly:"squiggly",strikeOut:"strikeout",stamp:"stamp",caret:"caret",ink:"ink",psInk:"psink",fileAttachment:"fileattachment",sound:"sound",movie:"movie",widget:"widget",screen:"screen",printerMark:"printermark",trapNet:"trapnet",watermark:"watermark",threeD:"3d",popup:"popup",redact:"redact"},lu=function(){function t(t,e){this.x=t,this.y=e}var e=t.prototype;return e.add=function(e,n){return new t(this.x+e,this.y+n)},e.addp=function(e){return new t(this.x+e.x,this.y+e.y)},e.subtractp=function(e){return new t(this.x-e.x,this.y-e.y)},e.subtract=function(e,n){return new t(this.x-e,this.y-n)},e.move=function(e,n){var r=n.x-this.x,i=n.y-this.y,o=e/Math.sqrt(r*r+i*i);return new t(this.x+r*o,this.y+i*o)},e.rotate=function(e,n){var r=this.x-n.x,i=this.y-n.y,o=Math.sqrt(r*r+i*i),a=Math.atan2(i,r)-e,s=o*Math.cos(a),c=o*Math.sin(a);return new t(n.x+s,n.y+c)},e.distanceTo=function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},e.slope=function(t){var e=this._dot(t);return Math.acos(e/(this._disp()*t._disp()))},e._dot=function(t){return this.x*t.x+this.y*t.y},e._disp=function(){return Math.sqrt(this._dot(this))},e.equalTo=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n=Math.abs(n),e instanceof t&&Math.abs(this.x-e.x)<=n&&Math.abs(this.y-e.y)<=n},e.clone=function(){return new t(this.x,this.y)},t}(),hu=function(){function t(t){this.component=t}var e=t.prototype;return e.numberToRGBAString=function(t){if("string"==typeof t)return t;var e=En(t);return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},e.renderLineEnd=function(t,e,n,r,i,o){if(0!==r){var a=n.renderingData,s=a.fillColor;"line"===a.annotInfo.type&&(s=a.annotInfo.styleFillColor);var c=n.scale,u=Math.atan2(o.y-i.y,o.x-i.x);switch(t.save(),t.lineJoin="miter",t.beginPath(),r){case Ht.LineEndingStyle.Square:this.renderSquareEnding(t,o,u,c,e);break;case Ht.LineEndingStyle.Circle:this.renderCircleEnding(t,o,u,c,e);break;case Ht.LineEndingStyle.Diamond:this.renderDiamondEnding(t,o,u,c,e);break;case Ht.LineEndingStyle.OpenArrow:o=o.move(e/2,i),this.renderOpenArrowEnding(t,o,u,c,e);break;case Ht.LineEndingStyle.ClosedArrow:o=o.move(e/2,i),this.renderClosedArrowEnding(t,o,u,c,e);break;case Ht.LineEndingStyle.Butt:this.renderButtEnding(t,o,u,c,e);break;case Ht.LineEndingStyle.ROpenArrow:this.renderROpenArrowEnding(t,o,u,c,e);break;case Ht.LineEndingStyle.RClosedArrow:this.renderRClosedArrowEnding(t,o,u,c,e);break;case Ht.LineEndingStyle.Slash:this.renderSlashEnding(t,o,u,c,e)}switch(r){case Ht.LineEndingStyle.ClosedArrow:case Ht.LineEndingStyle.RClosedArrow:case Ht.LineEndingStyle.Diamond:case Ht.LineEndingStyle.Square:case Ht.LineEndingStyle.Circle:s&&(t.fillStyle=this.numberToRGBAString(s),t.fill())}t.stroke(),t.restore()}},e.renderSquareEnding=function(t,e,n,r,i){var o=4.396*r+3.1*i,a=o/2;t.translate(e.x,e.y),t.rotate(n),t.moveTo(-a,-a),t.rect(-a,-a,o,o)},e.renderCircleEnding=function(t,e,n,r,i){var o=1.75862*r+2*i;t.translate(e.x,e.y),t.rotate(n),t.moveTo(o,0),t.arc(0,0,o,0,2*Math.PI)},e.renderDiamondEnding=function(t,e,n,r,i){var o=4.396*r+3.1*i,a=o/2;t.translate(e.x,e.y),t.rotate(n+Math.PI/4),t.moveTo(-a,-a),t.rect(-a,-a,o,o)},e.renderOpenArrowEnding=function(t,e,n,r,i){var o=30/180*Math.PI;this.renderArrow(t,e,n,r,i,o,!1)},e.renderClosedArrowEnding=function(t,e,n,r,i){var o=30/180*Math.PI;this.renderArrow(t,e,n,r,i,o,!0)},e.renderButtEnding=function(t,e,n,r,i){var o=Math.PI/2,a=4.396*r+3.1*i,s=new lu(e.x+a/2,e.y).rotate(Math.PI-n+o,e),c=s.rotate(Math.PI,e);t.moveTo(s.x,s.y),t.lineTo(c.x,c.y)},e.renderROpenArrowEnding=function(t,e,n,r,i){var o=150/180*Math.PI;this.renderArrow(t,e,n,r,i,o,!1)},e.renderRClosedArrowEnding=function(t,e,n,r,i){var o=150/180*Math.PI;this.renderArrow(t,e,n,r,i,o,!0)},e.renderArrow=function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=4.396*r+3.1*i,c=new lu(e.x+s,e.y),u=c.rotate(Math.PI-n+o,e),d=c.rotate(Math.PI-n-o,e);t.moveTo(u.x,u.y),t.lineTo(e.x,e.y),t.lineTo(d.x,d.y),a&&t.closePath()},e.renderSlashEnding=function(t,e,n,r,i){var o=60/180*Math.PI,a=4.396*r+3.1*i,s=new lu(e.x+a/2,e.y).rotate(Math.PI-n+o,e),c=s.rotate(Math.PI,e);t.moveTo(s.x,s.y),t.lineTo(c.x,c.y)},t}(),fu=function(t,e,n){var r=t.getRenderingData(e,n);!r.annotFlag.checkNoZoom()||(e=1);var i=r.outerDeviceRect,o=r.innerDeviceRect;return A()(o,{width:o.right-o.left,height:o.bottom-o.top}),A()(i,{width:i.right-i.left,height:i.bottom-i.top}),{renderingData:r,innerRect:o,outerRect:i,scale:e,rotate:n}},pu=function(t,e){var n=t.canvas,r=n.width,i=n.height,o=e.x,a=e.y;o-=4,a-=4,(o=Math.max(o,2))+8>r&&(o=r-8-2),(a=Math.max(a,2))+8>i&&(a=i-8-2),t.rotate(0),t.fillStyle="#ffffff",t.rect(o,a,8,8),t.stroke(),t.fill()},gu=Math.log(2),vu=function(t){function e(e){var n;return(n=t.call(this,e)||this).helper=new hu(e),n}O()(e,t);var n=e.prototype;return n.doRender=function(t){var e=this,n=t.renderingData,r=n.page,i=n.annotInfo,o=i.borderInfo||{},a=t.scale,s=t.rotate,c=this.convertPointToPixel(o.width,a);if(0!=c||-1!=i.borderColor||i.fillColor){var u=this.canvas.getContext("2d");u.clearRect(0,0,this.canvas.width,this.canvas.height),u.save(),t.lineWidth=c,u.globalAlpha=i.opacity,u.lineWidth=c,0===c||!1===i.hasBorderColor?u.strokeStyle="transparent":u.strokeStyle=this.numberToRGBAString(i.color);var d=t.outerRect,l=this.convertToPathPoint(n.startPoint,a,d,r,s),h=this.convertToPathPoint(n.endPoint,a,d,r,s),f=n.leaderLinePoints,p=this.convertToPathPoint(f.start,a,d,r,s),g=this.convertToPathPoint(f.end,a,d,r,s);if(n.leaderLineOffset>0){var v=n.annotInfo.leaderLineLength>0?1:-1,m=this.convertPointToPixel(n.leaderLineOffset,a),y=l.move(m,h).rotate(v*Math.PI/2,l);h=h.move(m,l).rotate(v*-Math.PI/2,h),l=y,y=p.move(m,g).rotate(v*Math.PI/2,p),g=g.move(m,p).rotate(v*-Math.PI/2,g),p=y}var w=n.captionOffset,b=new lu(this.convertPointToPixel(w.x,a),-this.convertPointToPixel(w.y,a)),A=this.convertPointToPixel(n.leaderLineExtend,a);try{if(o.style===Ht.BORDER_STYLE.DASHED){var P=o.dashes||[],E=o.dashPhase||0;u.setLineDash&&u.setLineDash(P.map((function(t){return e.convertPointToPixel(t,a)}))),u.lineDashOffset=this.convertPointToPixel(E,a)}u.beginPath(),this.renderLine(u,l,h,p,g,A),u.closePath(),u.stroke(),this.helper.renderLineEnd(u,c,t,n.startStyle,g,p),this.helper.renderLineEnd(u,c,t,n.endingStyle,p,g),this.renderLineCaption(u,t,c,p,g,b)}finally{u.restore()}}},n.convertToPathPoint=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=r.getDevicePoint([t.x,t.y],e,i),a=S()(o,2),s=a[0],c=a[1];return new lu(s-n.left,c-n.top)},n.renderLine=function(t,e,n,r,i,o){if(t.moveTo(r.x,r.y),t.lineTo(i.x,i.y),t.moveTo(e.x,e.y),t.lineTo(r.x,r.y),t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),o>0){var a=r.move(-o,e),s=i.move(-o,n);t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.moveTo(i.x,i.y),t.lineTo(s.x,s.y),t.moveTo(s.x,s.y)}},n.renderLineCaption=function(t,e,n,r,i,o){var a=e.renderingData,s=e.scale,c=a.annotInfo,u=c.content;if("string"==typeof u&&!((u=u.trim()).length<1)){var d,l,h=Math.atan2(i.y-r.y,i.x-r.x),f=r.distanceTo(i),p=r.move(.5*f,i),g=16*(d=s+1,Math.log(d)/gu),v=16777215-(16777215&c.borderColor^10855845);t.save(),t.fillStyle=this.numberToRGBAString(v),t.font=g+"px bold Arial",t.textBaseline="middle",t.textAlign="center";var m=t.measureText(u),y=m.actualBoundingBoxAscent+m.actualBoundingBoxDescent,w=p.move(o.y,r).rotate(Math.PI/2,p),b=Math.PI/2;switch(b=o.y>0?-Math.PI/2:Math.PI/2,a.captionPos){case Ht.LINE_CAPTION_POSITION.POS_INLINE:if(0!=o.y&&0!=o.x){l=w.move(o.x,p).rotate(b,w);break}l=w;break;case Ht.LINE_CAPTION_POSITION.POS_TOP:var A=p.move(.5*(n+y)-o.y,i).rotate(Math.PI/2,p);l=0!=o.x?A.move(o.x,p).rotate(b,w):A}if(a.hasCaption&&(t.translate(l.x,l.y),t.rotate(h),t.fillText(u,0,0),t.restore()),t.beginPath(),!(Math.abs(o.x)<f/2+m.width/2&&Math.abs(o.y)<y)){var P=o.x>0?-1:1,E=o.x+P*m.width/2;if(Math.abs(o.x)<=m.width/2){E=0;var x=y/2+4,S=o.y>0?1:-1,C=0;Math.abs(o.y)>y&&(C=o.y-S*x),w=p.move(C,r).rotate(Math.PI/2,p)}var D=w.move(E,p).rotate(b,w),I=D.move(Math.abs(E)+n/2,w);t.moveTo(p.x,p.y),t.lineTo(w.x,w.y),t.moveTo(I.x,I.y),t.lineTo(D.x,D.y),t.moveTo(D.x,D.y),t.closePath(),t.stroke()}}},n.setMarkUp=function(t,e){var n=fu(this.component,t,e),r=n.renderingData,i=n.outerRect;t=n.scale,e=n.rotate;var o=r.page,a=r.annotInfo,s=a.borderInfo||{},c=this.convertPointToPixel(s.width,t),u=this.canvas.getContext("2d");u.clearRect(0,0,this.canvas.width,this.canvas.height),u.save(),u.lineWidth=c,u.strokeStyle=this.numberToRGBAString(a.color);var d=this.convertToPathPoint(r.startPoint,t,i,o,e),l=this.convertToPathPoint(r.endPoint,t,i,o,e),h=r.leaderLinePoints,f=this.convertToPathPoint(h.start,t,i,o,e),p=this.convertToPathPoint(h.end,t,i,o,e);if(r.leaderLineOffset>0){var g=r.annotInfo.leaderLineLength>0?1:-1,v=this.convertPointToPixel(r.leaderLineOffset,t),m=d.move(v,l).rotate(g*Math.PI/2,d);l=l.move(v,d).rotate(g*-Math.PI/2,l),d=m,m=f.move(v,p).rotate(g*Math.PI/2,f),p=p.move(v,f).rotate(g*-Math.PI/2,p),f=m}var y=this.convertPointToPixel(r.leaderLineExtend,t);u.beginPath(),this.renderLine(u,d,l,f,p,y),u.closePath(),pu(u,d),pu(u,l)},e}(zc),mu=function(){function t(){}return t.convertPoint2RealUnit=function(t,e){if(!e)return t;var n=e.userSpaceScaleValue,r=e.userSpaceUnit,i=e.realScaleValue;return Vi.convertTo(t,r)*(i/n)},t.caculateDistance=function(e,n,r){var i=n.x-e.x,o=n.y-e.y,a=Math.abs(i),s=Math.abs(o),c=Math.sqrt(a*a+s*s);return t.convertPoint2RealUnit(c,r)},t.caculateAngle=function(e,n,r,i){var o=t.caculateDistance(e,n,i),a=t.caculateDistance(n,r,i),s=t.caculateDistance(e,r,i),c=(Math.pow(o,2)+Math.pow(a,2)-Math.pow(s,2))/(2*o*a);return Number.isNaN(c)||Number.isNaN(Math.acos(c))?0:Math.round(Math.abs(Math.acos(c))/Math.PI*180*100)/100},t.caculateTriangleArea=function(t,e,n,r){var i=t.x*e.y+e.x*n.y+n.x*t.y-(t.x*n.y+e.x*t.y+n.x*e.y);if(i/=2,!r)return i;var o=r.userSpaceScaleValue,a=r.userSpaceUnit,s=r.realScaleValue;return Vi.convertAreaTo(i,a)*Math.pow(s/o,2)},t.caculatePolygonArea=function(e,n){for(var r={x:0,y:0},i=0,o=1;o<=e.length;++o)o<e.length?i+=t.caculateTriangleArea(r,e[o-1],e[o],n):i+=t.caculateTriangleArea(r,e[o-1],e[0],n);return Math.abs(i)},t.caculateCircleArea=function(t,e){var n=(t.right-t.left)*(t.top-t.bottom)*Math.PI;if(!e)return n;var r=e.userSpaceScaleValue,i=e.userSpaceUnit,o=e.realScaleValue;return Vi.convertAreaTo(n/4,i)*Math.pow(o/r,2)},t}(),yu=Math.log(2),wu=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="line",Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,start:function(){return o.onStartUpdateShape()},update:function(t,e){return o.onShapeUpdating&&o.onShapeUpdating(t,e)},moving:function(t,e,n){return o.onShapeMoving(t,e,n)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},resizable:!1,onStatusChange:function(){o.updateHandlerPointStatus()}});return o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),o.pdfViewer.eventEmitter.on(Ct.pageMeasureScaleRatioChanged,(function(t){if(o.annot){var n=o.getPDFPage().getIndex();t.getIndex()===n&&t.getMeasureScaleRatio().then((function(n){var r=n.ratioMap,i=n.unitName,a=n.scale;t.getViewportRect().then((function(t){var n=e.getType(),s=!0;switch(n){case"line":s=uu(e.getStartPoint(),t);break;case"polyline":case"polygon":var c=e.getVertexes(),u=au()(c).slice(0);if(u.length<1)return;s=uu({x:u[0].x,y:u[0].y},t)}var d,l,h,f=o.pdfViewer.getStore().getCurrentValue("measurementInfo");if(a&&s)f=r.length?{userSpaceScaleValue:d=r[0].value,userSpaceUnit:l=Ki(r[0].unit),realScaleValue:h=r[1].value,realUnit:Ki(r[1].unit)}:null;else{if(f)return;a=1,d=f.userSpaceScaleValue,l=f.userSpaceUnit,h=f.realScaleValue,f.realUnit}var p=e.getContent(),g=p.indexOf("\n");g>=0&&(g+=1);var v=p.substr(0,g),m=0;switch(n){case"line":var y=e.getStartPoint(),w=e.getEndPoint();m=bu(y,w);break;case"polyline":for(var b=e.getVertexes(),A=b[0],P=1;P<b.length;P++)m+=bu(A,b[P]),A=b[P];break;case"polygon":var E=e.getVertexes(),x=mu.caculatePolygonArea(E,f);return void e.setContent("".concat(v).concat(parseFloat(x*Math.pow(a,2)).toFixed(2)," sq ").concat(i))}var S=m;f?S=Vi.convertTo(m*a,l)*(h/d):S=m*a;e.setContent("".concat(v).concat(parseFloat(S).toFixed(2)," ").concat(i))}))}))}})),o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.annot.getType()===du.line&&this.annot.getCaptionOffset()?new vu(this):t.prototype.generateApRenderer.call(this)},n.active=function(){t.prototype.active.call(this),this.activeRect(),this.activeMore();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin(),this.updateHandlerPosition()},n.movedByOther=function(){if(this.isActive){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin(),this.updateHandlerPosition()}},n.unActive=function(){t.prototype.unActive.call(this),Wt.a.isPropertyIntialized(this,"shapeControl")&&this.shapeControl.deactive()},n.afterRender=function(t){if(t.transformed&&this.isActive){this.activeRect(),this.activeMore();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin(),this.updateHandlerPosition()}},n.activeMore=function(){this.$handler.addClass("fv__annot-line-container");var t=2;0!==this.annot.getLeaderLineLength()&&(t=4),this.hammerInited=this.hammerInited||this.initHammer(t)},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.onStartUpdateShape=function(t,e){this.editDebouncePromise||(this.editDebouncePromise=new It(0)),this.willRedraw()},n.onShapeMoving=function(t,e){},n.onShapeUpdateEnd=function(t,e,n){var r=this;return this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((function(){return r.moveTo(t.left,t.top,n).then((function(e){return r._setRect(t,!1)})).then((function(t){return r._applyShapeChange()})).then((function(t){r.afterRedraw()}))})):Promise.resolve()},n._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)},n.getPropertyOptions=function(){var t=this.annot,e=xn(t.getBorderColor(),"#"),n=t.getOpacity(),r=t.getBorderWidth(),i=t.getStyleFillColor(),o=this.propertyDisabled();return{color:e,opacity:n,borderWidth:r,lineStartStyle:t.getStartStyle(),lineEndStyle:t.getEndingStyle(),hasCap:t.hasCaption(),fillColor:i,disabled:o,borderStyle:!0}},n.redraw=function(e){var n=this;return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e).then((function(){"line"==n.name&&n.annot.calculateLeaderLine(),n.updateHandlerPosition(),n.setMargin()}))},n.updateRender=function(){return this.redraw()},n.initHammer=function(t){var e=this,n=this.$handler,r=cu()({anchorCount:t,isLineDimension:this.annot.getIntent()==Ht.Intents.LINE_DIMENSION,captionText:this.annot.getContent()}),i=B()(r);n.append(i);var o=this.annot.getType(),a=n.find(".fv__pdf-annot-line-point"),s=function(){return e.moveDisabled()};return this.addDestroyHook(this.pdfViewer.getAnnotAuthorityManager().subscribe(this.annot,(function(t){s=function(){return t.ignorable()?e.moveDisabled():!t.isAdjustable()}}))),a.each((function(t,n){var r,i,c=new Hammer.Manager(n,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});e.addDestroyHook((function(){c.destroy()}));var u=!1;function d(e,n){if("line"!==o||!$t.isShift)return[e,n];var i=a.eq(1^t),s=parseFloat(i.css("left")),c=parseFloat(i.css("top")),u=r.x+e,d=r.y+n,l=Math.sqrt(Math.pow(u-s,2)+Math.pow(d-c,2)),h=Math.atan2(d-c,u-s),f=.25*Math.PI,p=Math.round(h/f)*f,g=l*Math.cos(p),v=c+l*Math.sin(p);return[s+g-r.x,v-r.y]}c.on("panstart",(function(t){s()?u=!1:(u=!0,"fv__pdf-annot-line-point-item"==(i=B()(t.target)).attr("class")&&(i=i.parent()),r={x:parseFloat(i.css("left")),y:parseFloat(i.css("top"))},e.backupProperty(n),e.boundaryChangeStart(t),e.willRedraw())})).on("panmove",(function(n){if(u){var o=d(n.deltaX,n.deltaY),a=S()(o,2),s=a[0],c=a[1];e.pdfViewer.config.highPerformance?e.updatePoint(s,c,t):i.css({left:r.x+s+"px",top:r.y+c+"px"})}})).on("panend",(function(n){if(u){var r=d(n.deltaX,n.deltaY),i=S()(r,2),o=i[0],a=i[1];e.updatePoint(o,a,t).then((function(t){e.boundaryChangeEnd(n),e.afterRedraw()}))}}))})),this.captionHammerHandler(),!0},n.captionHammerHandler=function(){var t=this,e=function(){return t.moveDisabled()};this.addDestroyHook(this.pdfViewer.getAnnotAuthorityManager().subscribe(this.annot,(function(n){e=function(){return n.ignorable()?t.moveDisabled():!n.isAdjustable()}})));var n=this.$handler.find(".fv__pdf-annot-line-caption");if(n[0]){var r=new Hammer.Manager(n[0],{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});this.addDestroyHook((function(){r.destroy()}));var i,o,a=!1;r.on("panstart",(function(n){e()?a=!1:(a=!0,o=B()(n.target),i={x:parseFloat(o.css("left")),y:parseFloat(o.css("top"))},o.css("border","1px solid #5aa"),t.boundaryChangeStart(n),t.willRedraw())})).on("panmove",(function(e){a&&(t.pdfViewer.config.highPerformance?t.updatePoint(e.deltaX,e.deltaY,4):o.css({left:i.x+e.deltaX+"px",top:i.y+e.deltaY+"px"}))})).on("panend",(function(e){a&&(B()(e.target).css("border","none"),t.updatePoint(e.deltaX,e.deltaY,4).then((function(n){t.boundaryChangeEnd(e),t.afterRedraw()})))}))}},n.boundaryChangeStart=function(t){},n.boundaryChangeEnd=function(t){},n.updateHandlerPosition=function(){var t=this.$handler,e=this.scale,n=this.rotate,r=[],i=this.annot.getStartPoint();r.push(this.annot.page.getDevicePoint([i.x,i.y],e,n));var o=this.annot.getEndPoint();if(r.push(this.annot.page.getDevicePoint([o.x,o.y],e,n)),0!=this.annot.getLeaderLineLength()){var a=this.annot.getLeaderLinePoints();r.push(this.annot.page.getDevicePoint([a.start.x,a.start.y],e,n)),r.push(this.annot.page.getDevicePoint([a.end.x,a.end.y],e,n))}for(var s=t.get(0).querySelectorAll("[data-index]"),c=0;c<r.length;c++){var u=s[c];u&&(u.style.cssText+="\n                left: ".concat(r[c][0],"px;\n                top: ").concat(r[c][1],"px;\n            "))}this.updateCaptionPosition()},n.updateCaptionPosition=function(){if(this.annot.hasCaption()){var t=this.$handler.find(".fv__pdf-annot-line-caption"),e=this.scale,n=this.rotate,r=t.width(),i=t.height(),o=this.annot.getLeaderLinePoints(),a=o.start,s=o.end,c=this.annot.getCaptionPoint(),u=this.annot.page.getDevicePoint([c.x,c.y],e,n),d=u[0]-r/2,l=u[1]-i/2,h=-Math.atan2(s.y-a.y,s.x-a.x)*(180/Math.PI),f=16*(p=e+1,Math.log(p)/yu);t.css({left:"".concat(d).concat("px"),top:"".concat(l).concat("px"),transform:"rotate(".concat(h,"deg)"),"font-size":"".concat(f).concat("px")})}var p},n.updateHandlerPointStatus=function(){var t=this.$handler.get(0).querySelectorAll("[data-index]"),e=this.shapeControl.isDisabled;t.forEach((function(t){t.style.display=e?"none":"block"}))},n.moved=function(){t.prototype.moved.call(this),this.updateHandlerPosition(),this.setMargin()},n.setContent=function(t){return t===this.annot.getContent()?Promise.resolve(!0):this.annot.setContent(t)},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.annot.update().then((function(t){return!0})):t})).then((function(t){return t?e.updateRender().then((function(){var n=e._getShapeControllerBoundaryBox();return e.shapeControl.active(e.$handler,e.getBoundary(),n),e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setFillColor=function(t){var e=this,n=this.annot.setStyleFillColor;return n||(n=this.annot.setFillColor),n.call(this.annot,t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setEndingStyle=function(t,e){var n=this;return this.annot.setEndingStyle(t,e).then((function(){return n.redraw().then((function(){var t=n._getShapeControllerBoundaryBox();n.shapeControl.active(n.$handler,n.getBoundary(),t),n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n)}))}))},n.setMeasureUnit=function(t){var e=this;return t instanceof ki&&(t=t.name),this.annot.setMeasureUnit(t).then((function(){return e.updateRender()})).then((function(){e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e)}))},n.setMeasureRatio=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userSpaceValue,r=void 0===n?1:n,i=e.userSpaceUnit,o=void 0===i?Oi.name:i,a=e.realValue,s=void 0===a?1:a,c=e.realUnit,u=void 0===c?Oi.name:c;return o instanceof ki&&(o=o.name),u instanceof ki&&(u=u.name),this.annot.setMeasureRatio({userSpaceValue:r,userSpaceUnit:o,realValue:s,realUnit:u}).then((function(){return t.updateRender()})).then((function(){t.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,t)}))},n.getMeasureRatio=function(){var t=this.annot.info.measureRatio,e=/(\d+(\.\d+)?)(?:\s+)(\w+)(?:\s+\=\s+)(\d+(\.\d+)?)(?:\s+)(\w+)/.exec(t),n=S()(e,7),r=n[1],i=n[3],o=n[4],a=n[6];return{userSpaceValue:Number(r),userSpaceUnit:i,realValue:Number(o),realUnit:a}},n.enableCaption=function(t){var e=this;return this.annot.enableCaption(t).then((function(){return e.redraw().then((function(){e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e)}))}))},n.hasCaption=function(){return this.annot.hasCaption()},n.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(){return n.updateRender()})).then((function(){n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n)}))},n.backupProperty=function(t){switch(t?B()(t).data("index"):""){default:return this.oldRect=A()({},this.annot.getRect());case 1:return this.oldEndPoint=A()({},this.annot.getEndPoint());case 0:return this.oldStartPoint=A()({},this.annot.getStartPoint());case 3:case 2:return this.oldLeaderEndPoint=A()({},this.annot.leaderEndPoint)}},n.updateLeaderLineLength=function(t,e,n){var r=this.oldLeaderEndPoint,i=this.annot.getEndPoint(),o=this.annot.getStartPoint(),a=this.annot.Eb,s=this.annot.k;n&&(r=this.oldLeaderEndPoint,i=this.annot.getEndPoint(),o=this.annot.getStartPoint(),a=this.annot.Eb);var c,u,d=r.x+t,l=r.y+e,h=!0;if((i.x-o.x)*(l-i.y)-(d-i.x)*(i.y-o.y)>0&&(h=!1),isFinite(s)){var f=(s*(l-a)+d)/(s*s+1),p={x:f,y:s*f+a};c=p.x-i.x,u=p.y-i.y}else c=0,u=l-i.y;var g=Math.sqrt(c*c+u*u);return h&&(g=-g),this.annot.setLeaderLineLength(g)},n.updatePoint=function(t,e,n){var r,i=this,o=this.annot.page.reverseDeviceOffset([t,e],this.scale,this.rotate),a=S()(o,2),s=a[0],c=a[1];switch(n){case 1:r=this.annot.setEndPoint({x:this.oldEndPoint.x+s,y:this.oldEndPoint.y+c});break;case 0:r=this.annot.setStartPoint({x:this.oldStartPoint.x+s,y:this.oldStartPoint.y+c});break;case 2:r=this.updateLeaderLineLength(s,c,!1);break;case 3:r=this.updateLeaderLineLength(s,c,!0);break;case 4:r=this.updateCaptionOffset(s,c)}return r.then((function(){return i.updateRender().then((function(){var t=i._getShapeControllerBoundaryBox();i.shapeControl.active(i.$handler,i.getBoundary(),t),i.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,i)}))}))},n.updateCaptionOffset=function(t,e){var n=this.annot,r=n.getCaptionPoint(),i=n.getLeaderLinePoints(),o=i.start,a=i.end,s=new lu(o.x,o.y),c=new lu(a.x,a.y),u=n.getLeaderLineOffset();if(u>0){var d=s.move(u,c),l=c.move(u,s);s=d.rotate(-Math.PI/2,s),c=l.rotate(Math.PI/2,c)}var h,f,p=s.distanceTo(c),g=s.move(p/2,c),v=r.x+t,m=r.y+e,y=m-g.y,w=v-g.x,b=Math.sqrt(Math.pow(w,2)+Math.pow(y,2)),A=this.annot.k;if(isFinite(A)){var P=m-A*v,E=1,x=1,S=-1/A;if(isFinite(S)){var C=S*v+(s.y-S*s.x)<=m,D=A*v+(g.y-A*g.x)<=m;s.x<=c.x?(x=C?1:-1,E=S>0?D?1:-1:D?-1:1):(x=C?-1:1,E=S>0?D?-1:1:D?1:-1)}else s.y>=c.y?(E=y>0?-1:1,x=w>0?1:-1):(E=y>0?1:-1,x=w>0?-1:1);h=E*Math.abs(A*g.x-g.y+P)/Math.sqrt(Math.pow(A,2)+1),f=x*Math.sqrt(Math.pow(b,2)-Math.pow(h,2))}else{var I=s.x>c.x?-1:1;h=I*w,f=I*y}return n.setCaptionOffset(h,f)},n.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(os.expandOffset(e,t))},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n),i=this.annot;return A()(r,{leaderLineExtend:i.getLeaderLineExtend?i.getLeaderLineExtend():void 0,startPoint:i.getStartPoint?i.getStartPoint():void 0,endPoint:i.getEndPoint?i.getEndPoint():void 0,leaderLinePoints:i.getLeaderLinePoints?i.getLeaderLinePoints():void 0,leaderLineOffset:i.getLeaderLineOffset?i.getLeaderLineOffset():void 0,captionOffset:i.getCaptionOffset?i.getCaptionOffset():void 0,startStyle:i.getStartStyle?i.getStartStyle():void 0,endingStyle:i.getEndingStyle?i.getEndingStyle():void 0,hasCaption:i.hasCaption?i.hasCaption():void 0,captionPos:i.getCaptionPos?i.getCaptionPos():void 0,fillColor:i.getFillColor()||(i.getStyleFillColor?i.getStyleFillColor():void 0),content:i.info.content})},e}(Rc),bu=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.abs(n),o=Math.abs(r);return Math.sqrt(i*i+o*o)},Au=wu,Pu=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="lineMeasurement",o}O()(e,t);var n=e.prototype;return n.getLengthInInchUnit=function(){var t=this.getDimension(),e=t.width,n=t.height;return this._getLengthInInchUnit(e,n)},n._getLengthInInchUnit=function(t,e){var n=qi.convertTo(t,Oi),r=Gi.convertTo(e,Oi);return Math.round(100*Math.sqrt(n*n+r*r))/100},e}(Au),Eu=function(){function t(){this.segments=[]}var e=t.prototype;return e.addSegment=function(t){t instanceof xu&&this.segments.push(t)},e.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),t.closePath()},t}(),xu=function(){function t(t,e){this.from=t,this.to=e}var e=t.prototype;return e.render=function(t){Object(ms.a)()},e.isJoinedBefore=function(t){return this.to.equalTo(t.from)},e.isJoinedAfter=function(t){return t.to.equalTo(this.from)},e.isJoinedWith=function(t){return this.isJoinedBefore(t)||this.isJoinedAfter(t)},t}(),Su=function(){function t(){}return t.prototype.generate=function(){Object(ms.a)()},t}(),Cu=function(t){function e(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(n=t.call(this)||this).closing=r,e.length>1&&e.reduce((function(t,e,r){return n.addSegment(new Du(t,e,1===r)),e})),n}return O()(e,t),e.prototype.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),this.closing&&t.closePath()},e}(Eu),Du=function(t){function e(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(r=t.call(this,e,n)||this).atTheStart=i,r}return O()(e,t),e.prototype.render=function(t){this.atTheStart&&t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y)},e}(xu);function Iu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;t.fillStyle="#fff",e.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,n,0,360),t.stroke(),t.fill()}))}var Ru=function(t){function e(e){var n;return(n=t.call(this,e)||this).helper=new hu(e),n}O()(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polyline")},n.doRender=function(t){var e=t.renderingData,n=e.annotInfo,r=n.borderInfo||{},i=t.scale,o=t.rotate,a=this.canvas.getContext("2d"),s=this.convertPointToPixel(0==r.width?.5:r.width,i);if(0!=s||-1!=n.borderColor||n.fillColor){a.clearRect(0,0,this.canvas.width,this.canvas.height);var c=e.page,u=t.innerRect,d=e.vertexes.map((function(t){var e=c.getDevicePoint([t.x,t.y],i,o),n=S()(e,2),r=n[0],a=n[1];return new lu(r-u.left,a-u.top)}));t.vertexes=d,a.save(),t.lineWidth=s,a.globalAlpha=n.opacity,a.lineWidth=s,0===s||!1===n.hasBorderColor?a.strokeStyle="transparent":a.strokeStyle=this.numberToRGBAString(n.color);try{switch(r.style){case Ht.BORDER_STYLE.DASHED:case Ht.BORDER_STYLE.SOLID:this.renderSolid(a,n,t);break;case Ht.BORDER_STYLE.BEVELED:}var l=d[d.length-1],h=d[d.length-2],f=d[0],p=d[1];this.helper.renderLineEnd(a,s,t,e.startStyle,p,f),this.helper.renderLineEnd(a,s,t,e.endingStyle,h,l)}finally{a.restore()}}},n.renderSolid=function(t,e,n){var r=this,i=n.scale,o=e.borderInfo,a=o.dashes||[],s=o.dashPhase||0;o.style===Ht.BORDER_STYLE.DASHED&&(t.setLineDash&&t.setLineDash(a.map((function(t){return r.convertPointToPixel(t,i)}))),t.lineDashOffset=this.convertPointToPixel(s,i)),new Cu(n.vertexes,!1,5).render(t),t.stroke();try{if(!Vt.isTouchDevice)return;void 0===n.renderingData.annotInfo.id&&Iu(t,n.vertexes)}catch(t){}},n.setMarkUp=function(t,e){var n=fu(this.component,t,e),r=n.renderingData,i=n.innerRect;t=n.scale,e=n.rotate;var o=r.annotInfo,a=this.canvas.getContext("2d"),s=r.page;a.strokeStyle=this.numberToRGBAString(o.color),r.vertexes.map((function(n){var r=s.getDevicePoint([n.x,n.y],t,e),o=S()(r,2),a=o[0],c=o[1];return new lu(a-i.left,c-i.top)})).forEach((function(t){return pu(a,t)})),a.restore()},e}(zc),Tu=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="polyline",o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return new Ru(this)},n.activeMore=function(){this.annot.getVertexes();this.$handler.addClass("fv__pdf-annot-polyLine-container");var t=this.annot.getVertexes().length;this.hammerInited=this.hammerInited||this.initHammer(t)},n.getPropertyOptions=function(){var t=this.annot,e=xn(t.getBorderColor(),"#"),n=t.getOpacity(),r=t.getBorderWidth(),i=t.getStyleFillColor(),o=this.propertyDisabled();return{color:e,opacity:n,fillColor:i,borderWidth:r,lineStartStyle:t.getStartStyle(),lineEndStyle:t.getEndingStyle(),disabled:o,borderStyle:!0}},n.backupProperty=function(t){if(!t)return this.oldRect=A()({},this.annot.getRect());this.oldVertex=A()({},this.annot.getVertexes())},n.updatePoint=function(t,e,n){var r=this;return this.movePointAt(n,{offsetX:t,offsetY:e}).then((function(){r.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,r)}))},n.movePointAt=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.offsetX,i=void 0===r?0:r,o=n.offsetY,a=void 0===o?0:o,s=this.annot.page.reverseDeviceOffset([i,a],this.scale,this.rotate),c=S()(s,2),u=c[0],d=c[1],l=this.oldVertex||this.annot.getVertexes(),h={x:l[t].x+u,y:l[t].y+d},f=this.getPDFPage(),p=f.getWidth(),g=f.getHeight(),v=f.getRotationAngle(),m=0==(v/90&1)?p:g,y=0==(v/90&1)?g:p;return h.x=Math.max(h.x,0),h.y=Math.max(h.y,0),h.x=Math.min(h.x,m),h.y=Math.min(h.y,y),this.annot.updateVertexes(t,h).then((function(){return e.updateRender()})).then((function(){e.shapeControl.active(e.$handler,e.getBoundary(),e._getShapeControllerBoundaryBox())}))},n.setLastPoint=function(t,e){var n=this.rotate,r=this.scale,i=this.annot.getVertexes().slice(0),o=i[i.length-1],a=this.annot.page.getDevicePoint([o.x,o.y],r,n),s=S()(a,2),c=s[0],u=s[1];t="number"==typeof t?t:c,e="number"==typeof e?e:u;var d=this.annot.page.reverseDevicePoint([t,e],r,n),l=S()(d,2),h=l[0],f=l[1];return o.x=h,o.y=f,this.setVertexes(i)},n.addPoint=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.annot.page.reverseDevicePoint([t,e],this.scale,this.rotate),r=S()(n,2),i=r[0],o=r[1],a=this.annot.getVertexes().concat({x:i,y:o});return this.setVertexes(a)},n.setVertexes=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getVertexes();return this.annot.setVertexes(e).then((function(){return t.updateRender()})).then((function(){t.shapeControl.active(t.$handler,t.getBoundary(),t._getShapeControllerBoundaryBox())}))},n.getVertexes=function(){return this.annot.getVertexes()},n.deleteVertex=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getVertexes().length-1,e=this.annot.getVertexes().filter((function(e,n){return n!==t}));return this.setVertexes(e)},n.updateHandlerPosition=function(){for(var t=this.$handler,e=this.scale,n=this.rotate,r=this.annot.getVertexes(),i=0;i<r.length;i++){var o=t.find("[data-index=".concat(i,"]")),a=r[i];a=this.annot.page.getDevicePoint([a.x,a.y],e,n),o.css({left:a[0]+"px",top:a[1]+"px",display:this.shapeControl.isDisabled?"none":"block"})}},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n);return A()(r,{vertexes:this.getVertexes()})},e}(Au),_u=function(t){function e(e,n,r){var i;return(i=t.call(this,null,r)||this).controlPoint1=e,i.controlPoint2=n,i}return O()(e,t),e.prototype.render=function(t){t.bezierCurveTo(this.controlPoint1.x,this.controlPoint1.y,this.controlPoint2.x,this.controlPoint2.y,this.to.x,this.to.y)},e}(xu),ku=function(t){function e(e){return t.call(this,e)||this}return O()(e,t),e.prototype.render=function(t){t.moveTo(this.from.x,this.from.y)},e}(xu),Fu=3.14159265358979,Mu=function(t){function e(e,n,r){var i;return(i=t.call(this)||this).points=e,i.innerRect=n,i.outerRect=r,i}return O()(e,t),e.prototype.generate=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=new Eu,r=this.points.map((function(e){return e.y=t.innerRect.height-e.y,e})),i=r.length,o=i*e,a=r.map((function(t,e){return t.distanceTo(r[(e+1)%i])})).reduce((function(t,e){return t+e})),s={left:r[0].x,right:r[0].x,top:r[0].y,bottom:r[0].y},c=a/o;if(0==c)return n;for(var u=[],d=0,l=r[0],h=r[1],f=l.distanceTo(h),p=0,g=1;p<o;p++){for(;d>f;)d-=f,g++,l=h,h=r[g%i],f=l.distanceTo(h);u.push(l.move(d,h)),d+=c}var v=u.length,m=!0,y=5*c/8;return u.forEach((function(e,r){w(u[0==r?v-1:r-1],e,u[(r+1)%v]).forEach((function(e){var r=function(e){e&&(e.x+=t.innerRect.left-t.outerRect.left,e.y=t.innerRect.height-e.y+(t.innerRect.top-t.outerRect.top))};r(e.from),r(e.to),r(e.controlPoint1),r(e.controlPoint2),n.addSegment(e)}))})),n.rect=s,n;function w(t,e,n){var r=t.subtractp(e),i=n.subtractp(e),o=[],a=Math.atan2(r.y,r.x),s=Math.atan2(i.y,i.x);a+=Math.acos(t.distanceTo(e)/(2*y))-Fu/9,(s-=Math.acos(n.distanceTo(e)/(2*y)))<a&&(s+=2*Fu);var c={left:e.x-y,right:e.x+y,bottom:e.y-y,top:e.y+y},u=Ou(c,a,s,m);o.push.apply(o,E()(u.arrAp)),m=!1;var d=e.subtractp(n);return a=Math.atan2(d.y,d.x),s=(a+=Math.acos(n.distanceTo(e)/(2*y)))-Fu/9,u=Ou(c={left:n.x-y,right:n.x+y,bottom:n.y-y,top:n.y+y},a,s,m),o.push.apply(o,E()(u.arrAp)),o}},e}(Su);function Ou(t,e,n,r){var i,o,a,s,c,u,d,l,h,f,p,g,v,m,y,w,b,A,P,E,x,S,C,D,I={};if(t.left>=t.right||t.bottom>=t.top)return{arrAp:[],pdfRect:I};if(Math.abs(n-e)<=1e-4)return{arrAp:[],pdfRect:I};var R=[];i=(t.right+t.left)/2,o=(t.top+t.bottom)/2,a=Math.abs(t.right-t.left)/2,s=Math.abs(t.top-t.bottom)/2,C=e,x=i+(p=a*Math.cos(C)),S=o+(g=s*Math.sin(C)),I.left=I.right=x,I.bottom=I.top=S,r&&R.push(new ku(new lu(x,S)));var T=1;n<e&&(T=-1);var _=Math.floor(2*e/Fu);T>0&&(_+=1),_*=Fu/2;for(var k=!1;D=_,T>0?n<=_&&(D=n,k=!0):n>=_&&(D=n,k=!0),p=a*Math.cos(C),g=s*Math.sin(C),b=a*Math.cos(D),h=f=-a*a*s*s,v=p+.5522847498308*(x=(P=((d=a*a*g)*f-(l=a*a*(A=s*Math.sin(D)))*h)/((c=s*s*p)*l-(u=s*s*b)*d))-p),m=g+.5522847498308*(S=(E=(u*h-c*f)/(c*l-u*d))-g),y=b+.5522847498308*(x=P-b),w=A+.5522847498308*(S=E-A),v=x=i+v,m=S=o+m,I.left>v&&(I.left=v),I.bottom>m&&(I.bottom=m),I.right<v&&(I.right=v),I.top<m&&(I.top=m),y=x=i+y,w=S=o+w,I.left>y&&(I.left=y),I.bottom>w&&(I.bottom=w),I.right<y&&(I.right=y),I.top<w&&(I.top=w),b=x=i+b,A=S=o+A,I.left>b&&(I.left=b),I.bottom>A&&(I.bottom=A),I.right<b&&(I.right=b),I.top<A&&(I.top=A),R.push(new _u(new lu(v,m),new lu(y,w),new lu(b,A))),!k;)C=D,_+=T*Fu/2;return{arrAp:R,pdfRect:I}}var Lu=function(t){function e(e){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(n=t.call(this,e)||this).closing=r,n}O()(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polygon")},n.doRender=function(t){var e=t.renderingData,n=e.annotInfo,r=n.borderInfo||{},i=t.scale,o=t.rotate,a=this.convertPointToPixel(0==r.width?.5:r.width,i);if(0!=a||-1!=n.borderColor||n.fillColor){var s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height);var c=e.page,u=t.innerRect,d=e.vertexes.map((function(t){var e=c.getDevicePoint([t.x,t.y],i,o),n=S()(e,2),r=n[0],a=n[1];return new lu(r-u.left,a-u.top)}));t.vertexes=d,s.save(),t.lineWidth=a,s.globalAlpha=n.opacity,0===a||!1===n.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=this.numberToRGBAString(n.color),s.lineWidth=a;try{switch(r.style){case Ht.BORDER_STYLE.DASHED:case Ht.BORDER_STYLE.SOLID:case Ht.BORDER_STYLE.UNDERLINE:case Ht.BORDER_STYLE.BEVELED:this.renderSolid(s,n,t);break;case Ht.BORDER_STYLE.CLOUDY:0==a?this.renderSolid(s,n,t):this.renderCloud(s,n,t)}}finally{s.restore()}}},n.renderCloud=function(t,e,n){var r=e.fillColor,i=e.borderInfo.cloudIntensity,o=n.innerRect,a=n.outerRect;new Mu(n.vertexes,o,a).generate(16/i).render(t),r&&(t.fillStyle=this.numberToRGBAString(r),t.fill()),t.stroke();try{if(!Vt.isTouchDevice)return;var s=[],c=o.left-a.left,u=o.top-a.top;n.vertexes.forEach((function(t){s.push({x:t.x+c,y:o.height-t.y+u})})),void 0===n.renderingData.annotInfo.id&&Iu(t,s)}catch(t){}},n.renderSolid=function(t,e,n){var r=this,i=n.scale,o=e.borderInfo,a=o.dashes||[],s=o.dashPhase||0,c=e.fillColor;o.style===Ht.BORDER_STYLE.DASHED&&(t.setLineDash&&t.setLineDash(a.map((function(t){return r.convertPointToPixel(t,i)}))),t.lineDashOffset=this.convertPointToPixel(s,i)),new Cu(n.vertexes,this.closing).render(t),c&&(t.fillStyle=this.numberToRGBAString(c),t.fill()),t.stroke();try{if(!Vt.isTouchDevice)return;void 0===n.renderingData.annotInfo.id&&Iu(t,n.vertexes)}catch(t){}},n.setMarkUp=function(t,e){var n=fu(this.component,t,e),r=n.renderingData,i=n.innerRect;t=n.scale,e=n.rotate;var o=r.annotInfo,a=o.borderInfo||{},s=this.convertPointToPixel(a.width,t),c=this.canvas.getContext("2d");c.clearRect(0,0,this.canvas.width,this.canvas.height);var u=r.page,d=r.vertexes.map((function(n){var r=u.getDevicePoint([n.x,n.y],t,e),o=S()(r,2),a=o[0],s=o[1];return new lu(a-i.left,s-i.top)}));c.save(),c.strokeStyle=this.numberToRGBAString(o.color),c.lineWidth=s;var l=this.closing;this.closing=!0,this.renderSolid(c,o,{vertexes:d}),c.beginPath(),d.forEach((function(t){return pu(c,t)})),this.closing=l},e}(zc),Nu=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="polygon",o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return new Lu(this,!0)},n.activeMore=function(){var t=this.annot.getVertexes();this.$handler.addClass("fv__pdf-annot-polygon-container");var e=t.length;this.hammerInited=this.hammerInited||this.initHammer(e)},n.updateRender=function(){var e=this;return this.annot.update().then((function(){var t=e._getShapeControllerBoundaryBox();e.shapeControl.active(e.$handler,e.getBoundary(),t)})).then((function(n){return t.prototype.updateRender.call(e)}))},n.getPropertyOptions=function(){var t=this.annot;return{color:xn(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled(),borderStyle:!0}},n.updateBorderProperty=function(t){switch(this.annot.getCloudIntensity()){case 1:t.find("#borderStyle-select [value=6]").attr("selected",!0);break;case 2:t.find("#borderStyle-select [value=7]").attr("selected",!0)}},n.backupProperty=function(t){if(!t)return this.oldRect=A()({},this.annot.getRect());this.oldVertex=A()({},this.annot.getVertexes())},n.setCloudyIntensity=function(t){var e=this;this.annot.setBorderStyle(Ht.BORDER_STYLE.CLOUDY,t).then((function(){return e.updateRender().then((function(){e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e)}))}))},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n);return A()(r,{})},e}(Tu),Vu={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data("annotComponent").showPropertiesDialog(t,e,n)}},actions:{name:"actions",nameI18nKey:"viewer_:contextmenu.annot.actions",callback:function(){this.data("annotComponent").showActionsDialog()},disabled:function(){return this.data("annotComponent").actionsDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};var Bu=n(327),Uu=n.n(Bu),ju=(n(433),function(){function t(t,e,n){var r=this;this.annotRender=t,this.annot=this.annotRender.annot,this.pdfViewer=this.annotRender.pdfViewer;var i={};if(n)switch(i.type=n.getType(),i.type){case"TypeURI":i.uri=n.getURI();break;case"TypeGoto":i.destination=n.getDestination()}var o=Uu()(i);e||(o='<dialog class="fv__dialog fv__annot-properties-dialog">'.concat(o,"</dialog>"));var a=B()(o);this.$actionsDialog=a;var s=e||document.body;if(a.appendTo(s),this.bindChangeEvent(),this.update(i),!e||e===document.body){var c=a[0];vc.a.registerDialog(c),c.showModal()}this.$gotoInput=a.find("#goto-input"),this.$gotoLeftValue=a.find(".fv__action-dialog-goto-left-value"),this.$gotoTopValue=a.find(".fv__action-dialog-goto-top-value"),this.$urlInput=a.find("#url-input");var u=this.pdfViewer.getPDFDocRender().getPDFDoc().getPageCount();if(this.$gotoInput.attr({max:u}),i&&i.type)switch(i.type){case"TypeURI":this.$urlInput.val(i.uri);break;case"TypeGoto":this.$gotoInput.val(i.destination.pageIndex+1);var d=this.pdfViewer.getPDFPageRender(i.destination.pageIndex);d&&d.getPDFPage().then((function(t){var e=t.getDevicePoint([i.destination.left,i.destination.top],d.getScale(),d.getRotation()),n=S()(e,2),o=n[0],a=n[1];r.$gotoLeftValue.html(o.toFixed(2)),r.$gotoTopValue.html(a.toFixed(2))}))}}var e=t.prototype;return e.update=function(t){var e=this.$actionsDialog;t&&t.type&&(e.find("#select-action [value="+t.type+"]").attr("selected",!0),e.find(".fv__action-dialog-box").css("display","none"),e.find("[data-type="+t.type+"]").css("display","block"))},e.bindChangeEvent=function(){var t=this,e=this.$actionsDialog,n=this.pdfViewer.getPDFDocRender(),r=n.viewerRender.scrollWrap;this.pdfViewer.eventEmitter.on(Ct.zoomToSuccess,(function(t,e){o()})),this._unwatchScrollEvent=r.addScrollEventListener(o);var i=this;function o(){var t=function(t){for(var e=t.$container.find(".fv__pdf-view-mode-item"),n=t.viewerRender.scrollWrap,r=n.getScrollTop(),i=(n.getHeight(),n.getScrollLeft()),o=(n.getWidth(),0),a=0,s=0,c=0;c<e.length;c++){var u=e[c],d=B()(u).width(),l=B()(u).height(),h=u.offsetTop,f=h+l,p=u.offsetLeft,g=p+d;if(f>r&&g>i){o=c,s=r-h,a=i-p;break}}return{pageIndex:o,left:a,top:s}}(n);i.$gotoInput.val(t.pageIndex+1),i.$gotoLeftValue.html(t.left.toFixed(2)),i.$gotoTopValue.html(t.top.toFixed(2))}e.on("click",".fv__action-btn-cancel",(function(){t.annotRender.hideActionsDialog()})).on("click",".fv__action-dialog-close-icon",(function(){t.annotRender.hideActionsDialog()})).on("change","#select-action",(function(t){var n=t.target.value;e.find(".fv__action-dialog-box").css("display","none"),e.find("[data-type="+n+"]").css("display","block")})).on("click",".fv__action-btn-ok",(function(n){var r=e.find("#select-action").val();if("TypeURI"===r){var o=e.find("#url-input").val(),a=new li;t.annot.setAction(-1,a).then((function(){t.annot.setActionData({uri:o}).then((function(){t.annotRender.hideActionsDialog()}))}))}else if("TypeGoto"===r){var s=t.pdfViewer.getPDFDocRender().getScale(),c=new bi;t.annot.setAction(-1,c).then((function(){var e={};e.pageIndex=t.$gotoInput.val()-1;var n=i.pdfViewer.getPDFPageRender(e.pageIndex),r=n.getScale();n.getPDFPage().then((function(i){var o=i.reverseDevicePoint([Number(t.$gotoLeftValue.html()),Number(t.$gotoTopValue.html())],r,n.getRotation()),a=S()(o,2),c=a[0],u=a[1];e.left=c,e.top=u,"fitWidth"===s?e.type="ZoomFitHorz":"fitHeight"===s?e.type="ZoomFitPage":(e.type="ZoomXYZ",e.zoomFactor=r),t.annot.setActionData(e).then((function(){t.annotRender.hideActionsDialog()}))}))}))}})).on("input","#goto-input",(function(e){var n=e.target.value;t.pdfViewer.getPDFDocRender().goToPage(n-1,{x:0,y:0})}))},e.close=function(){var t=this.$actionsDialog;this._unwatchScrollEvent&&this._unwatchScrollEvent(),t&&(t[0].close(),t.remove(),this.$actionsDialog=null)},t}());var Hu,Wu=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-square-canvas")},n.doRender=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.renderingData,r=n.annotInfo,i=r.borderInfo||{},o=this.convertPointToPixel(i.width||1,t.scale),a=this.canvas.getContext("2d");a.clearRect(0,0,this.canvas.width,this.canvas.height),a.save(),t.lineWidth=o,e&&(a.globalAlpha=r.opacity),0===o||!1===r.hasBorderColor?a.strokeStyle="transparent":a.strokeStyle=this.numberToRGBAString(r.color),a.lineWidth=o;try{switch(i.style){case Ht.BORDER_STYLE.BEVELED:case Ht.BORDER_STYLE.UNDERLINE:case Ht.BORDER_STYLE.SOLID:this.renderSolid(a,r,t);break;case Ht.BORDER_STYLE.DASHED:this.renderDashed(a,r,t);break;case Ht.BORDER_STYLE.CLOUDY:this.renderCloud(a,r,t)}var s=r.fillColor;s&&(a.fillStyle=this.numberToRGBAString(s),a.fill()),a.stroke()}finally{a.restore()}},n.shrinkRect=function(t,e){var n=os.on(t).shrink(e).extract();return A()(n,{width:n.right-n.left,height:n.bottom-n.top})},n.renderCloud=function(t,e,n){e.fillColor;var r=e.borderInfo.cloudIntensity,i=this.shrinkRect(n.innerRect,0),o=this.shrinkRect(n.outerRect,0),a=i.width,s=i.height;new Mu([new lu(0,s),new lu(a,s),new lu(a,0),new lu(0,0)],i,o).generate(32/3/r).render(t)},n.renderDashed=function(t,e,n){var r=this,i=e.borderInfo,o=i.dashes||[],a=i.dashPhase||0,s=n.scale;t.save(),t.setLineDash&&t.setLineDash(o.map((function(t){return r.convertPointToPixel(t,s)}))),t.lineDashOffset=this.convertPointToPixel(a,s),this.renderSolid(t,e,n)},n.renderSolid=function(t,e,n){var r=n.lineWidth,i=n.innerRect,o=n.outerRect,a=i.width,s=i.height,c=.5*r,u=i.left-o.left,d=i.top-o.top;t.beginPath(),t.rect(c+u,c+d,a-r,s-r),t.closePath()},e}(zc),$u=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.style.cssText+="box-sizing: content-box;"},n.doRender=function(t){var e=t.renderingData;return e.highlightModeIsActive?this.doRenderHighlightMode(t):(e.highlightingMode===Ht.HIGHLIGHTING_MODE.PUSH&&(this.canvas.style.cssText+="border: none; border-color: none;"),this.doRenderNormal(t))},n.doRenderHighlightMode=function(t){switch(t.renderingData.highlightingMode){case Ht.HIGHLIGHTING_MODE.NONE:return this.doRenderNormal(t);case Ht.HIGHLIGHTING_MODE.OUTLINE:return this.renderOutline(t);case Ht.HIGHLIGHTING_MODE.INVERT:return this.renderInvert(t);case Ht.HIGHLIGHTING_MODE.PUSH:return this.renderPush(t);case Ht.HIGHLIGHTING_MODE.TOGGLE:return this.renderToggle(t)}},n.doRenderNormal=function(t){this.renderSquare(t)},n.getLineWidth=function(t,e){return this.convertPointToPixel(t,e)/2},n.renderSquare=function(t){var e=t.renderingData.annotInfo,n=e.borderInfo,r=this.getLineWidth(n.width,t.scale);if(0!=r||-1!=e.borderColor||e.fillColor){var i=this.canvas.getContext("2d");switch(i.clearRect(0,0,this.canvas.width,this.canvas.height),i.save(),t.lineWidth=r,i.globalAlpha=e.opacity,0===r||!1===e.hasBorderColor?i.strokeStyle="transparent":i.strokeStyle=this.numberToRGBAString(e.color),i.lineWidth=r,n.style){case Ht.BORDER_STYLE.DASHED:this.renderDashed(i,e,t);break;default:this.renderSolid(i,e,t)}i.stroke()}},n.renderInvert=function(t){var e=this,n=this.canvas.getContext("2d"),r=t.renderingData,i=r.page,o=r.annotInfo.borderInfo||{},a=(this.getLineWidth(o.width||0,t.scale),t.outerRect),s={x:a.left,y:a.top,width:a.width,height:a.height};i.getPageBitmap(4*t.scale/3,t.rotate,s,["page","annot"]).then((function(t){var r=t.width,i=t.height,o=t.buffer;n.clearRect(0,0,e.canvas.width,e.canvas.height);var a=new(Uint8ClampedArray||Uint8Array)(o),s=n.createImageData(r,i);s.data.set(a),n.save();for(var c=s.data,u=0;u<c.length;u+=4)c[u]^=255,c[u+1]^=255,c[u+2]^=0;n.putImageData(s,0,0),n.restore()}))},n.renderToggle=function(t){},n.renderPush=function(t){var e=this,n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.style.cssText+="\n            border: 1px solid;\n            border-color: black #aaa #aaa black;\n        ";var r=t.renderingData.page,i=t.outerRect,o={x:i.left,y:i.top,width:i.width,height:i.height};r.getPageBitmap(4*t.scale/3,t.rotate,o,["page","annot"]).then((function(r){var i=r.width,o=r.height,a=r.buffer;n.clearRect(0,0,e.canvas.width,e.canvas.height);var s=new(Uint8ClampedArray||Uint8Array)(a),c=n.createImageData(i,o);c.data.set(s),n.putImageData(c,0,0),e.renderSquare(t)}))},n.renderOutline=function(t){var e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height);var n=t.renderingData.annotInfo.borderInfo||{};this.renderSquare(t);var r=5*this.getLineWidth(n.width||0,t.scale)/6,i=.5*r,o=t.outerRect;e.save(),e.lineWidth=r,e.strokeStyle="black",e.strokeRect(i,i,o.width-r,o.height-r),e.restore()},e}(Wu),Yu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:Vu,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),qu=function(t){function e(e,n,r,i){var o;o=t.call(this,e,n,r,i)||this,Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,start:function(t,e,n){return o.onStartUpdateShape(t,e,n)},update:function(t,e){return o.onShapeUpdating(t,e)},moving:function(t,e){return o.onShapeMoving(t,e)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},resizable:!0,enableDiagonally:!0});return o.moveDisabled()&&t.disable(),o.addDestroyHook((function(){t.destroy()})),t})),o.apRenderer=o.generateApRenderer(),o.name="link",o.highlightModeIsActive=!1,o.$ui.addClass("pdf-page-link-annot-container"),o.$handler.addClass("pdf-page-link-annot-handler-container");var a=o.pdfViewer.i18n;ha.a.i18n=function(t){return a.t(t)};var s=Vt.isTouchDevice?"touchstart":"mousedown";return o.$ui.on(s,(function(t){o.highlightModeIsActive=!0,o.render();var e=Vt.isTouchDevice?"touchend":"mouseup";window.addEventListener(e,(function(){o.highlightModeIsActive=!1,o.render()}),{capture:!0,once:!0})})),o.pdfViewer.eventEmitter.on(Ct.pageRemoved,o.pageRemoved=function(t){var e=o.annot&&"TypeGoto"==o.annot.action.info.type&&o.annot.action.info.destination&&o.annot.action.info.destination.pageIndex;if(o.annot&&"number"==typeof e&&e==t){var n=o.annot;n.hasPA().then((function(t){t&&n.resetAByPA()}))}}),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return Yu},e.setContextMenuConfig=function(t){Hu=t};var n=e.prototype;return n.actionsDisabled=function(){return!(32&this.docRender.getUserPermission().getValue())},n.onStartUpdateShape=function(t,e,n){},n.onShapeUpdating=function(t){t.width<1||t.height<1||this.setRect(t)},n.onShapeMoving=function(t,e){this.$ui.css({left:t.left,top:t.top})},n.onShapeUpdateEnd=function(t,e,n){switch(n){case Wc.ACTION_MOVE:return this.moveTo(t.left,t.top,n);case Wc.ACTION_RESIZE:return t.width<1||t.height<1?Promise.resolve():this.setRect(t)}},n.getTileConfig=function(t,e){var n=this.pdfViewer,r=n.getSmartScale(t),i=n.config.tileSize,o=this.annot,a=o.getDeviceRect(1,e),s=o.getDeviceRect(r,e),c=s.right-s.left,u=s.bottom-s.top;return[Math.ceil(u/i),Math.ceil(c/i),c,u,i,r,t,e,a.left,a.top]},n.generateApRenderer=function(){return new $u(this)},n.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.annot;if(this.scale=t,this.rotate=e,n.isEmpty()||n.isDeleted()||n.rectIsEmpty())return this.renderDestroy(),Promise.resolve();var r=this.getAnnotFlag();return r.checkHidden()||this.$ui.removeClass(["fv__markup-annot-invisible"]),this.apRenderer.render(t,e,this.visibleRect)},n.movedByOther=function(){this.isActive&&(this.activeRect(),this.shapeControl.updateBoundary(this.getBoundary()))},n.doAction=function(){this.pdfViewer.actionManager.get(this.annot.action,this).active()},n.afterRender=function(t){if(t.transformed&&this.isActive){this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e)}},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.activeMore=function(t,e){},n.activeMoreItem=function(){},n.unActive=function(){t.prototype.unActive.call(this),this.$handler.removeClass("active"),this.shapeControl.deactive()},n.unActiveMore=function(){},n.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.$handler.remove()},n.updateBorderProperty=function(){},n.getPropertyOptions=function(){var t=this.annot;return{color:xn(t.getBorderColor(),"#"),borderWidth:t.getBorderWidth(),highlightingMode:t.getHighlightingMode(),actionType:this.$action&&this.$action.getType(),disabled:this.propertyDisabled(),minBorderWidth:0,borderStyle:!0}},n.showPropertiesDialog=function(){this.$propertiesControl=new wc(this,document.body),this.updateDeleteStatus(!0)},n.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.updateDeleteStatus(!1)},n.showActionsDialog=function(){this.$actionsControl=new ju(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},n.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},n.setColor=function(t){var e=this;return this.annot.setBorderColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(){return n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n)}))}))},n.setHighlightingMode=function(t){var e=this;return this.annot.setHighlightingMode(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.redraw=function(){return this.activeRect(),this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),this.render()},n.updateRender=function(){return Promise.resolve()},n.destroy=function(){this.$propertiesControl=null,this.contextMenu&&this.contextMenu.destroy(),this.pageRemoved&&this.pdfViewer.eventEmitter.off(Ct.pageRemoved,this.pageRemoved),this.pageRemoved=null,t.prototype.destroy.call(this)},n.showContextMenu=function(t,e){return!(!this.contextMenu||this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===Vn)&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},n.removeAnnot=function(){var t=this;return this.getAppPermission().then((function(e){return e.ignorable()&&t.deleteDisabled()?Promise.resolve():e.isDeletable()?t.doRemoveAnnot():void 0})).then((function(e){var n=t.pdfViewer.getCurrentActivatable();return n&&n.remove&&n.remove(t),e}))},n.doRemoveAnnot=function(){var t=this,e=this.pdfViewer,n=e.eventEmitter,r=this.annot;return Promise.resolve((e.customs.removeAnnotBefore||Dt.a)(this)).then((function(e){if(n.emit(Ct.removeActionAnnotationBefore,t),!1!==e)return r.getPDFPage().removeAnnot(r).then((function(e){return n.emit(Ct[e?"removeActionAnnotationSuccess":"removeActionAnnotationFailed"],t,r),e}),(function(){n.emit(Ct.removeActionAnnotationFailed,t)}))}))},n.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},n.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,r=this.rotate,i=t.getDeviceRect(n,r);e.css({left:i.left+"px",top:i.top+"px",width:i.right-i.left+"px",height:i.bottom-i.top+"px"})},n.rectInit=function(){var t=this.$handler,e=B()(this.createRectDom());t.append(e);var n=e[0],r=this.rectHammer=new Hammer.Manager(n,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return r.add(new Hammer.Tap({event:"doubletap",taps:2})),r.add(new Hammer.Tap({event:"singletap"})),r.get("doubletap").recognizeWith("singletap"),r.get("singletap").requireFailure("doubletap"),this.contextMenuIsEnable()&&(t.on("contextmenu",(function(t){t.preventDefault()})),t.on("mouseup",(function(t){t.stopPropagation()})),this.contextMenu=this.pdfViewer.viewerUI.createContextMenu(this,t.get(0),this.getContextMenuConfig()),e.data("annotComponent",this)),this.addDestroyHook((function(){r.destroy()})),e},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.getContextMenuConfig=function(){if(Hu)return Hu;var t=this.constructor.getDefaultContextMenuConfig();for(var e in this.updateContextMenuConfig(t),t)switch(e){case"items":var n=t[e],r=this.pdfViewer.i18n;for(var i in n){var o=n[i];o.nameI18nKey&&(o.name=r.t(o.nameI18nKey))}}return t},n.doubleTapAnnot=function(){},n.updateContextMenuConfig=function(t){},n.active=function(e){t.prototype.active.call(this),this.$handler.addClass("active"),this.activeRect();var n=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),n)},n.tapAnnot=function(e){if(this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()!==Vn)return t.prototype.tapAnnot.call(this,e);e&&0==e.button&&this.doAction()},n.invisibleRender=function(){this.apRenderer.invisibleRender()},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n);return A()(r,{highlightingMode:this.annot.getHighlightingMode(),highlightModeIsActive:this.highlightModeIsActive})},e}(da),Gu=2*Math.PI;var zu=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.doRender=function(t){var e=t.renderingData.annotInfo,n=e.borderInfo||{},r=this.convertPointToPixel(n.width||1,t.scale);if(0!=r||-1!=e.borderColor||e.fillColor){var i=this.canvas.getContext("2d");i.clearRect(0,0,this.canvas.width,this.canvas.height),i.save(),t.lineWidth=r,i.globalAlpha=e.opacity,0===r||!1===e.hasBorderColor?i.strokeStyle="transparent":i.strokeStyle=this.numberToRGBAString(e.color),i.lineWidth=r;try{switch(n.style){case Ht.BORDER_STYLE.SOLID:this.renderSolid(i,e,t);break;case Ht.BORDER_STYLE.BEVELED:break;case Ht.BORDER_STYLE.DASHED:this.renderDashed(i,e,t);break;case Ht.BORDER_STYLE.CLOUDY:0==n.cloudIntensity?this.renderSolid(i,e,t):this.renderCloud(i,e,t)}var o=e.fillColor;o&&(i.fillStyle=this.numberToRGBAString(o),i.fill()),i.stroke()}finally{i.restore()}}},n.renderSolid=function(t,e,n){this.renderDashed(t,e,n)},n.renderDashed=function(t,e,n){var r=e.borderInfo,i=n.lineWidth,o=n.innerRect,a=n.outerRect,s=r.dashes||[],c=r.dashPhase||0,u=.5*i,d=new lu(.5*(o.left+o.right)-a.left,.5*(o.top+o.bottom)-a.top),l=Math.abs(.5*o.height-u),h=Math.abs(.5*o.width-u);t.lineDashOffset=c,t.setLineDash&&t.setLineDash(s),t.beginPath(),function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI,c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];t.ellipse?t.ellipse(e,n,r,i,o,a,s,c):(t.save(),t.translate(e,n),t.rotate(o),t.scale(r,i),t.arc(0,0,1,a,s,c),t.restore())}(t,d.x,d.y,h,l),t.closePath()},n.renderCloud=function(t,e,n){var r=e.borderInfo.cloudIntensity,i=.5*n.lineWidth,o=this.shrinkRect(n.innerRect,i),a=this.shrinkRect(n.outerRect,i),s=new lu(.5*(a.right-a.left)-(o.left-a.left),.5*(a.bottom-a.top)-(o.top-a.top)),c=.5*o.height-i,u=.5*o.width-i,d=16/r,l=Math.PI/d,h=2*Math.PI,f=Array(Math.floor(h/l)-1).fill(0).map((function(t,e){return e*l%h})).map((function(t){var e=u*Math.cos(h-t),n=c*Math.sin(h-t);return s.add(e,n)}));new Mu(f,o,a).generate(1,t).render(t)},n.shrinkRect=function(t,e){var n=os.on(t).shrink(e).extract();return A()(n,{width:n.right-n.left,height:n.bottom-n.top})},e}(zc);var Ku=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return fc(t)}(),Ju=function(t){function e(e,n,r,i){var o;return o=t.call(this,e,n,r,i)||this,Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,start:function(){return o.onStartUpdateShape()},update:function(t,e){return o.onShapeUpdating(t,e)},moving:function(t,e){return o.onShapeMoving(t,e)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)}});return o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),o.$ui.addClass("circle-ui"),o.pdfViewer.eventEmitter.on(Ct.pageMeasureScaleRatioChanged,(function(t){if(o.annot){var n=o.getPDFPage().getIndex();t.getIndex()===n&&e.getIntent()==Ht.Intents.CIRCLE_DIMENSION&&t.getMeasureScaleRatio().then((function(n){var r=n.ratioMap,i=n.unitName,a=n.scale;t.getViewportRect().then((function(t){var n=e.getRect(),s=uu({x:n.left,y:n.top},t),c=o.pdfViewer.getStore().getCurrentValue("measurementInfo");if(a&&s)c=r.length?{userSpaceScaleValue:r[0].value,userSpaceUnit:Ki(r[0].unit),realScaleValue:r[1].value,realUnit:Ki(r[1].unit)}:null;else{if(c)return;a=1,c.userSpaceScaleValue,c.userSpaceUnit,c.realScaleValue,c.realUnit}var u=e.getContent(),d=u.indexOf("\n");d>=0&&(d+=1);var l=u.substr(0,d),h=mu.caculateCircleArea(e.getRect(),c);e.setContent("".concat(l).concat(parseFloat(h*Math.pow(a,2)).toFixed(2)," sq ").concat(i))}))}))}})),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return Ku};var n=e.prototype;return n.generateApRenderer=function(){return new zu(this)},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox(),e=this.getInnerBoundary();this.shapeControl.active(this.$handler,e,t),this._updateShapeControlMargin()},n.active=function(){t.prototype.active.call(this),this.activeRect(this.annot),this._applyShapeChange();var e=this.shapeControl.getPreviewerContext();this._previewUpdatedShape(this.shapeControl.getCurrentShape(),e)},n.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,r=this.rotate,i=t.getDeviceInnerRect(n,r),o="px";e.css({left:i.left+o,top:i.top+o,width:i.right-i.left+o,height:i.bottom-i.top+o})},n._updateShapeControllerBoundaryBox=function(){this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox()),this._updateShapeControlMargin()},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2),r=n[0],i=n[1],o=this.getInnerRect(),a=this.getRect(),s=os.subtract(o,a);return os.on({left:0,top:0,right:r,bottom:i}).add(s).extract()},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.onStartUpdateShape=function(t,e){this.editDebouncePromise||(this.editDebouncePromise=new It(0))},n.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&(this._previewUpdatedShape(t,e),this.editDebouncePromise&&this.editDebouncePromise.exec((function(){return n.setRect(n._transformShapeOfInnerRectToOuterRect(t)).then((function(t){n._updateShapeControllerBoundaryBox()}))})))},n.onShapeMoving=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((function(){var e=n.getRect(),r=n.getInnerRect(),i=e.left-r.left,o=e.top-r.top;return n.moveTo(t.left+i,t.top+o).then((function(t){n._updateShapeControllerBoundaryBox()}))}))},n.onShapeUpdateEnd=function(t,e,n){var r=this;this._previewUpdatedShape(t,e);var i=this.getRect(),o=this.getInnerRect(),a=i.left-o.left,s=i.top-o.top;return this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((function(){return r.moveTo(t.left+a,t.top+s,n).then((function(e){return r._setRect(r._transformShapeOfInnerRectToOuterRect(t),!1)})).then((function(t){r._updateShapeControllerBoundaryBox()}))})):Promise.resolve()},n._transformShapeOfInnerRectToOuterRect=function(t){var e={left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},n=os.subtract(this.getRect(),this.getInnerRect()),r=os.on(e).add(n).extract();return{left:r.left,top:r.top,width:r.right-r.left,height:r.bottom-r.top}},n._previewUpdatedShape=function(t,e){e.clearRect(0,0,t.width,t.height);var n=t.width/2,r=t.height/2,i=n,o=r;e.strokeStyle="#759DB8",e.lineWidth=1,function(t,e,n,r,i){var o=Math.max(r,i),a=r/o,s=i/o;t.save(),t.scale(a,s),t.beginPath(),t.arc(e/a,n/s,o,0,Gu,!1),t.closePath(),t.restore()}(e,n,r,i,o),e.stroke()},n.getPropertyOptions=function(){var t=this.annot;return{color:xn(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled(),borderStyle:!0}},n.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return t.prototype.render.call(this,e,n)},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return e._handlerRerender(t)}))},n.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return n._handlerRerender(t)}))},n.setCloudIntencity=function(t){return this.setBorderStyle(Ht.BORDER_STYLE.CLOUDY,t)},n.setFillColor=function(t){var e=this;return this.annot.setFillColor(t).then((function(t){return e._handlerRerender(t)}))},n.getInnerRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.getPDFPage(),r=this.annot.getInnerRect(),i=n.getDeviceRect(r,t,e);return{left:i.left,top:i.top,right:i.right,bottom:i.bottom}},n.getInnerBoundary=function(){var t=this.getPDFPage(),e=this.annot.getInnerRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},n._handlerRerender=function(t){var e=this;return t?this.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t},n._updateShapeControlMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(os.expandOffset(e,t))},e}(Rc),Xu=n(328),Zu=n.n(Xu),Qu=n(329),td=n.n(Qu),ed=n(330),nd=n.n(ed),rd=n(331),id=n.n(rd),od=n(332),ad=n.n(od),sd=n(333),cd=n.n(sd),ud=n(334),dd=n.n(ud),ld=n(335),hd=n.n(ld),fd=n(336),pd=n.n(fd),gd=n(337),vd=n.n(gd),md=n(338),yd=n.n(md),wd=n(339),bd=n.n(wd),Ad=n(340),Pd=n.n(Ad),Ed=n(341),xd=n.n(Ed),Sd=n(342),Cd=n.n(Sd),Dd={Check:Zu.a,Circle:td.a,Comment:nd.a,Cross:id.a,Help:ad.a,Insert:cd.a,Key:dd.a,NewParagraph:hd.a,Note:pd.a,Paragraph:vd.a,RightArrow:yd.a,RightPointer:bd.a,Star:Pd.a,UpArrow:xd.a,UpLeftArrow:Cd.a},Id=n(343),Rd=n.n(Id),Td=n(344),_d=n.n(Td),kd=n(345),Fd=n.n(kd),Md=n(346),Od=n.n(Md),Ld={Graph:Rd.a,Paperclip:_d.a,PushPin:Fd.a,Tag:Od.a},Nd=n(347),Vd=n.n(Nd),Bd=n(348),Ud=n.n(Bd),jd=n(349),Hd=n.n(jd),Wd={Ear:Vd.a,Mic:Ud.a,Speaker:Hd.a},$d={};var Yd,qd=function(t){function e(e){var n;return(n=t.call(this,e)||this).annot=e.annot,n}O()(e,t);var n=e.prototype;return n.render=function(t,e){var n=this.annot,r=n.getFlags(),i=n.getDeviceRect(t,e);i.width=i.right-i.left,i.height=i.bottom-i.top,8&r&&(i.width/=4*t/3,i.height/=4*t/3);var o=function(t,e,n){if(!t||!e)return"";var r,i=t+e+n;if(i in $d)return $d[i];if("text"===t?r=Dd:"fileattachment"===t?r=Ld:"sound"===t&&(r=Wd),!r)return"";var o=r[e]({fillColor:n});return $d[i]=o}(n.getType(),n.getIconName(),xn(n.getBorderColor(),"#"));return this.component.$ui.css({left:i.left,top:i.top,width:i.width,height:i.height,opacity:n.getOpacity()}).empty().html(o),Promise.resolve()},n.destroy=function(){t.prototype.destroy.call(this),this.annot=null},e}(Cc);!function(t){t.fully="fully",t.playable="playable",t.adjustable="adjustable",t.deletable="deletable",t.modifiable="modifiable",t.attachmentDownloadable="attachmentDownloadable",t.redactionApplicable="redactionApplicable",t.replyable="replyable",t.editable="editable"}(Yd||(Yd={}));var Gd=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="note",o.$ui.addClass("fv__pdf-page-note-annot-container"),o.$handler.addClass("fv__pdf-page-note-annot-handler-container"),Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,start:function(){return o.onStartUpdateShape()},moving:function(t,e,n){return o.onShapeMoving(t,e,n)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},resizable:!1});return t.ui.classList.add("fv__pdf-page-annot-handler-rect"),o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),o}O()(e,t);var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this.activeRect(),this._applyShapeChange()},n._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin()},n.activeRect=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,r=this.$rect=this.$rect||this.rectInit(),i=this.scale,o=this.rotate,a=n.getDeviceRect(i,o);if(8&this.annot.getFlags()){var s=this.annot.getRect();t=s.right-s.left,e=s.top-s.bottom}else{var c=this.annot.getDeviceRect(1,o);t=c.right-c.left,e=c.bottom-c.top}r.css({left:a.left,top:a.top,width:t,height:e})},n.movedByOther=function(){this.isActive&&(this.activeRect(),this._applyShapeChange())},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.setIconName=function(t){return this.annot.setIconName(t).then((function(t){return t}))},n.createRectDom=function(){return this.shapeControl.ui},n.onStartUpdateShape=function(){this.editDebouncePromiseQueue||(this.editDebouncePromiseQueue=new It(0))},n.onShapeMoving=function(t,e,n){var r=this;if(this.pdfViewer.config.highPerformance)this.editDebouncePromiseQueue.exec((function(){return r.moveTo(t.left,t.top).then((function(t){r.setMargin(),r._applyShapeChange()}))}));else{var i=this._moveOffset||{},o=i.offsetLeft||0,a=i.offsetTop||0;this._moveOffset={offsetLeft:o+n.offsetLeft,offsetTop:a+n.offsetTop}}},n.onShapeUpdateEnd=function(t,e){var n=this;return this.editDebouncePromiseQueue.waitForLastTask().then((function(){return n.moveTo(t.left,t.top,"move").then((function(t){n.setMargin(),n._applyShapeChange()}))}))},n.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(os.expandOffset(e,t))},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.generateApRenderer=function(){return this.isHTMLSimulate("note")?new qd(this):t.prototype.generateApRenderer.call(this)},n.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=this.annot.info;if("R"==r.RT&&(0!=r.IRT||null!=r.RT))return Promise.resolve();if(t.prototype.render.call(this,e,n),1!=K.dpr&&this.tileCanvas){var i=this.getTileConfig(e,n),o=Math.max(.5,e*K.dpr/i[5]);this.tileCanvas.$container.css({transform:"scale("+o+")"})}},e}(Rc),zd=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.doRender=function(e,n,r){var i=this;return t.prototype.doRender.call(this,e,n,r).then((function(){i.tileCanvas.$container.get(0).style.cssText+="\n                transform-origin: center;\n                transform: rotate(-".concat(n,"deg);\n            ")}))},e}(Dc),Kd=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="file",o.$ui.addClass("fv__pdf-page-file-annot-container"),o.$handler.addClass("fv__pdf-page-file-annot-handler-container"),Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,start:function(){return o.onStartUpdateShape()},moving:function(t,e,n){return o.onShapeMoving(t,e,n)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},resizable:!1});return t.ui.classList.add("fv__pdf-page-annot-handler-rect"),(o.groupMoveDisabled()||o.moveDisabled())&&t.disable(),o.getAppPermission().then((function(e){e.isEditable()||t.disable()})),o.addDestroyHook((function(){t.destroy()})),t})),o}O()(e,t);var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this.activeRect(),this._applyShapeChange()},n.activeRect=function(){arguments.length>0&&void 0!==arguments[0]||this.annot;var t=this.$rect=this.$rect||this.rectInit(),e=this.scale,n=this.rotate,r=this.getRect(e,n);t.css({left:r.left,top:r.top,width:r.right-r.left,height:r.bottom-r.top})},n._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin()},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.setIconName=function(t){var e=this;return this.annot.setIconName(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.createRectDom=function(){return this.shapeControl.ui},n.onStartUpdateShape=function(t,e){this.editDebouncePromise||(this.editDebouncePromise=new It(0))},n.onShapeMoving=function(t,e,n){var r=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((function(){return r.moveTo(t.left,t.top).then((function(t){r.setMargin(),r._applyShapeChange()}))}))},n.onShapeUpdateEnd=function(t,e){var n=this;return this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((function(){return n.moveTo(t.left,t.top,"move").then((function(t){n.setMargin(),n._applyShapeChange()}))})):Promise.resolve()},n.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(os.expandOffset(e,t))},n.onDoubleTap=function(){return!1},n.doubleTapAnnot=function(){this.rectDoubleTap()},n.rectDoubleTap=function(){this.download()},n.download=function(){var t=this;this.getAppPermission().then((function(e){e.isAttachmentDownloadable()&&t.doDownload()}))},n.doDownload=function(){var t=this,e=this.pdfViewer;if(!this.annot.getFileSpec())return e.viewerUI.alert({message:"sidebar.attachment.emptyFile",level:"warning"});var n=Promise.resolve();e.getSafeReadingMode()&&(n=e.viewerUI.confirm({message:"sidebar.attachment.safeModeDownload",level:"warning"})),n.then((function(){t.annot.getFileattachmentStream().then((function(e){ss(e,t.annot.getFileSpec().getFileName(),"application/octet-stream")}))}),Wo.a)},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.generateApRenderer=function(){return this.isHTMLSimulate("fileAttachment")?new qd(this):new zd(this)},n.getRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.getPDFPage(),r=this.annot.getRect(),i=n.getDeviceRect(r,t,e),o=n.getDeviceRect(r,t,0),a=o.right-o.left,s=o.bottom-o.top;return 8&this.annot.getFlags()&&(a=r.right-r.left,s=r.top-r.bottom),{left:i.left,top:i.top,right:i.left+a,bottom:i.top+s}},n.getBoundary=function(){var t=this.annot.getDeviceRect(this.scale,this.rotate),e=this.annot.getDeviceRect(this.scale,0),n=this.annot.getRect(),r=e.right-e.left,i=e.bottom-e.top;return 8&this.annot.getFlags()&&(r=n.right-n.left,i=n.top-n.bottom),{left:t.left,top:t.top,width:r,height:i}},e}(Rc),Jd=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.doRender=function(t){var e=this.component.annot.info,n=t.outerRect,r=(t.rotate%360+360)%360;if(-1!=e.borderColor){var i=this.canvas.getContext("2d");i.clearRect(0,0,this.canvas.width,this.canvas.height),i.save(),i.globalAlpha=e.opacity;var o=.2*n.width;0===o||!1===e.hasBorderColor?i.strokeStyle="transparent":i.strokeStyle=this.numberToRGBAString(e.color);var a=.5*o,s=a,c=n.width-a,u=n.height-2*a/3,d=Math.atan2(u,n.width/2),l=o/Math.sin(d)+.3*a,h=new Cu([new lu(s,u),new lu(n.width/2,l),new lu(c,u)],!1);i.lineWidth=o;var f=r/180*Math.PI,p=0,g=0;switch(r){case 90:p=-s,g=-(u+l);break;case 270:p=-c;break;case 180:p=-(s+c),g=-u}i.rotate(f),i.translate(p,g),h.render(i),i.stroke(),i.restore()}},e}(zc),Xd=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="caret",o.$ui.addClass("fv__pdf-page-caret-annot-container"),o.$handler.addClass("fv__pdf-page-caret-annot-handler-container"),o}O()(e,t);var n=e.prototype;return n.updateOnPermissionChange=function(t){if(!this.isDestroyed){!!this.readOnlyDisabled()||!t.ignorable()&&!t.isModifiable()?this.$handler.addClass("disabled"):this.$handler.removeClass("disabled")}},n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new Jd(this):t.prototype.generateApRenderer.call(this)},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.caret===t},n.active=function(){t.prototype.active.call(this),this.activeRect(),this.$rect.addClass("active")},n.afterRender=function(t){t.transformed&&this.isActive&&this.activeRect()},n.unActive=function(){t.prototype.unActive.call(this);var e=this.$rect;e&&e.removeClass("active")},n.isReplace=function(){return this.annot.isGrouped()&&"replace"===(this.annot.getIntent()||"").toLowerCase()},n.showUI=function(){var e=this;if(this.isReplace()){var n=this.annot.getGroupElements().filter((function(t){return t!==e.annot}))[0];if(n&&n.isDeleted())return t.prototype.showUI.call(this);var r=this.parent("annotsRender").getAnnotRender(n.getId());return t.prototype.showUI.call(this).then((function(){return r.component.showUI()}))}return t.prototype.showUI.call(this)},n.hideUI=function(){var e=this;if(this.isReplace()){var n=this.annot.getGroupElements().filter((function(t){return t!==e.annot}))[0];if(n&&n.isDeleted())return t.prototype.hideUI.call(this);var r=this.parent("annotsRender").getAnnotRender(n.getId());return t.prototype.hideUI.call(this).then((function(){return r.component.hideUI()}))}return t.prototype.hideUI.call(this)},e}(Rc);var Zd=fc(),Qd=function(t){function e(e,n,r,i){var o;return o=t.call(this,e,n,r,i)||this,Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,start:function(t,e,n){return o.onStartUpdateShape(t,e,n)},moving:function(t,e){return o.onShapeMoving(t,e)},update:function(t,e){return o.onShapeUpdating(t,e)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},resizable:!0,enableDiagonally:!0});return o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return Zd};var n=e.prototype;return n.generateApRenderer=function(){return this.isHTMLSimulate("square")?new Wu(this):t.prototype.generateApRenderer.call(this)},n.onStartUpdateShape=function(t,e,n){this.editDebouncePromise||(this.editDebouncePromise=new It(0))},n.onShapeMoving=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((function(){var e=n.getRect(),r=n.getInnerRect(),i=e.left-r.left,o=e.top-r.top;return n.moveTo(t.left+i,t.top+o).then((function(t){n._updateShapeControlMargin(),n._updateShapeControllerBoundaryBox()}))}))},n.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((function(){return n.setRect(n._transformShapeOfInnerRectToOuterRect(t)).then((function(t){n._updateShapeControlMargin(),n._updateShapeControllerBoundaryBox()}))}))},n.onShapeUpdateEnd=function(t,e,n){var r=this;return this.editDebouncePromise?this.editDebouncePromise.exec((function(){var e=r.getRect(),i=r.getInnerRect(),o=e.left-i.left,a=e.top-i.top;return r.moveTo(t.left+o,t.top+a,n).then((function(e){return r._setRect(r._transformShapeOfInnerRectToOuterRect(t),!1)})).then((function(t){r._updateShapeControlMargin(),r._updateShapeControllerBoundaryBox()}))})):Promise.resolve()},n._transformShapeOfInnerRectToOuterRect=function(t){var e={left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},n=os.subtract(this.getRect(),this.getInnerRect()),r=os.on(e).add(n).extract();return{left:r.left,top:r.top,width:r.right-r.left,height:r.bottom-r.top}},n.active=function(){t.prototype.active.call(this),this.activeRect(this.annot),this._applyShapeChange();var e=this.shapeControl.getPreviewerContext();this._previewUpdatedShape(this.shapeControl.getCurrentShape(),e)},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n._applyShapeChange=function(){var t=this.getInnerBoundary(),e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,t,e),this._updateShapeControlMargin()},n.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,r=this.rotate,i=t.getDeviceInnerRect(n,r),o="px";e.css({left:i.left+o,top:i.top+o,width:i.right-i.left+o,height:i.bottom-i.top+o})},n._updateShapeControllerBoundaryBox=function(){this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox())},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2),r=n[0],i=n[1],o=this.getInnerRect(),a=this.getRect(),s=os.subtract(o,a);return os.on({left:0,top:0,right:r,bottom:i}).add(s).extract()},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.getPropertyOptions=function(){var t=this.annot;return{color:xn(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled(),borderStyle:!0}},n._previewUpdatedShape=function(t,e){e.clearRect(0,0,t.width,t.height),e.strokeStyle="#759DB8",e.lineWidth=1,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;t.save(),t.beginPath(),t.rect(e,n,r,i),t.closePath(),t.restore()}(e,0,0,t.width,t.height),e.stroke()},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return e._handlerRerender(t)}))},n.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return n._handlerRerender(t)}))},n.setFillColor=function(t){var e=this;return this.annot.setFillColor(t).then((function(t){return e._handlerRerender(t)}))},n.getInnerRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.getPDFPage(),r=this.annot.getInnerRect(),i=n.getDeviceRect(r,t,e);return{left:i.left,top:i.top,right:i.right,bottom:i.bottom}},n.getInnerBoundary=function(){var t=this.getPDFPage(),e=this.annot.getInnerRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},n._handlerRerender=function(t){var e=this;return t?this.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t},n._updateShapeControlMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(os.expandOffset(e,t))},e}(Rc);function tl(t){var e=document.createElement("img");return new Promise((function(n){e.onload=function(){n(e),URL.revokeObjectURL(e.src)},e.src=URL.createObjectURL(t)}))}function el(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");return il(t).then(tl).then((function(t){return n.drawImage(t,0,0),e}))}function nl(t){return il(t).then(tl)}function rl(t){return il(t).then((function(t){var e=new FileReader;return new Promise((function(n){e.onloadend=function(){n(e.result)},e.readAsArrayBuffer(t)}))}))}function il(t){if(t.buffer){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d"),r=new(Uint8ClampedArray||Uint8Array)(t.buffer),i=n.createImageData(t.width,t.height);return i.data.set(r),n.putImageData(i,0,0),new Promise((function(t){e.toBlob(t)}))}return t.image?Promise.resolve(t.image):Promise.reject(t)}window.toImage=nl;var ol=function(){function t(t,e,n){this.page=e,this.doc=e.doc,this.engine=n,this.info=t}var e=t.prototype;return e.destroy=function(){this.page=null,this.doc=null,this.engine=null,this.info=null},e.getId=function(){return this.info.id},e.getPDFPage=function(){return this.page},e.getBitmap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas",r=this.getPDFPage();return r.doc.api.getGraphicsObjectBitmap(r.getPDFDoc().getId(),r.getId(),this.getId(),t*Object(K.getPtPxRatio)(),e).then((function(t){if(!t.width||!t.height)return null;switch(n||"canvas"){case"canvas":return el(t);case"image":return nl(t);case"buffer":return rl(t);default:throw new Error("Invalid options.type: ".concat(n))}}))},e.getRect=function(){return this.info.rect},e.setRect=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var n=this.getPDFPage();this.info.rect=t;var r=arguments[1];return n.doc.api.setGraphicsObjectRect(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,r&&e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},e.setMatrix=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.matrix=t,n.doc.api.setGraphicsObjectMatrix(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},e.getMatrix=function(){var t=this.info.matrix;return new J(t.a,t.b,t.c,t.d,t.e,t.f)},e.getDeviceMatrix=function(){var t=this.getMatrix();t.translate(0,-this.getPDFPage().getHeight());var e=ut(1);return t.scale(e,-e),t},e.getType=function(){return this.info.type},e.getBorderDashes=function(){return al(this.getType()),this.info.graphState.dashes},e.getBorderStyle=function(){return al(this.getType()),this.info.graphState.dashes.length>0?1:0},e.setBorderStyle=function(t,e){var n=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");al(this.getType());var r=this.getPDFPage();return this.info.graphState.dashes=e,r.doc.api.setGraphicsObjectBorderStyle(r.getPDFDoc().getId(),r.getId(),this.getId(),t,e).then((function(t){n.info=t,n.doc.engine.eventEmitter.emit(St.graphicsUpdated,r)}))},e.getBorderWidth=function(){return al(this.getType()),this.info.graphState.lineWidth},e.setBorderWidth=function(t){var e=this;if(al(this.getType()),!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.graphState.lineWidth=t,n.doc.api.setGraphicsObjectBorderWidth(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},e.getBorderColor=function(){return al(this.getType()),(4278190080|this.info.strokeColor)>>>0},e.setBorderColor=function(t){var e=this;if(al(this.getType()),!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var n=this.getPDFPage();return n.doc.api.setGraphicsObjectBorderColor(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t||e.info,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},e.getFillColor=function(){return al(this.getType()),(4278190080|this.info.fillColor)>>>0},e.setFillColor=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");al(this.getType());var n=this.getPDFPage();return n.doc.api.setGraphicsObjectFillColor(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},e.getOpacity=function(){return((4278190080&this.info.strokeColor)>>>0)/4278190080},e.setOpacity=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var n=this.getPDFPage();return n.doc.api.setGraphicsObjectOpacity(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},e.remove=function(){if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");return this.getPDFPage().removeGraphicsObject(this)},e.moveToPosition=function(t,e){var n=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var r=this.getPDFPage();if(-1===Object.values(cn).findIndex((function(e){return e==t})))throw new Error("Type error");var i=null;return t!=cn.first&&t!=cn.last&&(i=e.getId()),r.doc.api.moveGraphicsObjectByPosition(r.getPDFDoc().getId(),r.getId(),this.getId(),t,i).then((function(t){n.doc.engine.eventEmitter.emit(St.graphicsUpdated,r)}))},t}(),al=function(t){if(1!=t&&2!=t&&5!=t)throw new Error("only text, path object are supported")},sl=function(t){function e(e,n,r,i){var o;return o=t.call(this,e,n,r,i)||this,Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,start:function(t,e,n){return o.onStartUpdateShape(t,e,n)},moving:function(t,e){return o.onShapeMoving(t,e)},update:function(t,e){return o.onShapeUpdating(t,e)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},rotateEnd:function(t){return o.onRotateEnd(t)},afterRotateEnd:function(){return o.onAfterRotateEnd()},rotateStart:function(){return o.onRotateStart()},resizable:!0,rotatable:"sign-china-stamp"!==e.info.iconName,degree:0,enableDiagonally:!0,enableFrame:!1,previewer:!1,enableUniform:!0,degreeInitVisibility:!1});o.processShapeControlPermissionCtrl(t);var n=function(e,n,r){if(t&&r===_n.rotationUpdated){var i=o.getInnerBoundary(),a=o._getShapeControllerBoundaryBox();t.active(o.$handler,i,a)}};return o.addDestroyHook((function(){o.pdfViewer.eventEmitter.off(Ct.annotationUpdated,n),t.destroy()})),o.pdfViewer.eventEmitter.on(Ct.annotationUpdated,n),t})),o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return new Dc(this)},n.getInnerRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.getRect(t,e)},n.getPropertyOptions=function(){var t=this.annot;xn(t.getBorderColor(),"#");return{opacity:t.getOpacity(),borderStyle:!1,disabled:this.propertyDisabled(),rotationFree:(this.annot.getRotation()+360)%360}},n.setBitmap=function(t,e){var n=this;return this.annot.setBitmap(t,e).then((function(t){return n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n),n.render(n.scale,n.rotate)}))},n.updateRender=function(){return this.render()},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.onRotateStart=function(){this.shapeControl.rotateDegreeBox.style.visibility="visible"},n.onRotateEnd=function(t){var e=this;t=this.getStandardizedRotation(t);var n=this.annot.getRotation();return n=this.getStandardizedRotation(n),t+=Math.abs(n),t=this.getStandardizedRotation(t),this.setRotation(t).then((function(n){return e.updateShapeControl(t),t}))},n.onAfterRotateEnd=function(){this.shapeControl.clearCompanions(),this.shapeControl.rotateDegree=0,this.shapeControl.rotateDegreeBox.style.visibility="hidden"},n.setRotation=function(t){var e=this;return this.annot.setRotation(t).then((function(t){return t?e.updateRender().then((function(){var n=e.getInnerBoundary(),r=e._getShapeControllerBoundaryBox();return e.shapeControl.active(e.$handler,n,r),e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.updateShapeControl=function(t){this.shapeControl.ui.style.transform=""},n.getStandardizedRotation=function(t){return(t=parseInt(t))<0?t=360-Math.abs(t):t>360&&(t-=360),t},n.showContextMenu=function(){var e=D()(N.a.mark((function e(n,r){var i,o,a,s,c,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.prototype.showContextMenu.call(this,n,r));case 2:if(!this.contextMenu){e.next=12;break}return i=this.contextMenu.contextMenuComponent,o=i.getComponentByName("fv--contextmenu-item-reply"),a=i.getComponentByName("fv--contextmenu-item-properties"),s=i.getComponentByName("fv--contextmenu-item-default-prop"),c=i.getAllComponentsByType("contextmenu-separator"),e.next=10,window.pdfui.getAllActivatedElements();case 10:u=e.sent,"sign-china-stamp"===this.annot.info.iconName?(setTimeout((function(){c.forEach((function(t,e){return 2!==e&&t.hide()})),s.doHidden();var t=i.getComponentByName("fv--contextmenu-item-group");u&&u.length>1?t.doShown():t.doHidden()}),200),o.doHidden(),a.doHidden()):(o.doShown(),a.doShown(),s.doShown());case 12:return e.abrupt("return",t.prototype.showContextMenu.call(this,n,r));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e}(Qd),cl=function(t){function e(e){var n;return(n=t.call(this,e)||this).executor=new It(260),n}O()(e,t);var n=e.prototype;return n.resetCanvasSize=function(t,e){this.canvas.style.cssText+="\n            width: ".concat(Math.floor(t),"px;\n            height: ").concat(Math.floor(e),"px;\n        ")},n.doRender=function(t){var e=this;t.renderingData.inkList.length>1e3?this.executor.exec((function(){e.component.isDestroyed||e.executeRender(t)})):this.executeRender(t)},n.getMinDistance=function(){return 1.13136},n.executeRender=function(e){var n=e.renderingData,r=n.page,i=n.annotInfo,o=i.borderInfo||{},a=e.scale,s=e.rotate,c=this.convertPointToPixel(o.width,a);if(0!=c||-1!=i.borderColor||i.fillColor){var u=e.outerRect;t.prototype.resetCanvasSize.call(this,u.width,u.height);var d=this.canvas.getContext("2d");d.clearRect(0,0,this.canvas.width,this.canvas.height),d.beginPath(),d.save(),e.lineWidth=c,d.lineCap="round",d.lineJoin="round",d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.globalAlpha=i.opacity,d.lineWidth=c,0===c||!1===i.hasBorderColor?d.strokeStyle="transparent":d.strokeStyle=this.numberToRGBAString(i.color);var l=this.getMinDistance();n.inkList.map((function(t){var e=t.x,n=t.y,i=t.type,o=r.getDevicePoint([e,n],a,s),c=S()(o,2),d=c[0],l=c[1];return{x:d-u.left,y:l-u.top,type:i}})).reduce((function(t,e,n){if(0===n||1===e.type)t.push(e);else{var r=t[t.length-1];Math.abs(e.x-r.x)+Math.abs(e.y-r.y)>=l&&t.push(e)}return t}),[]).forEach((function(t,e,n){var r=t.x,i=t.y;1===t.type?(d.stroke(),d.beginPath(),d.moveTo(r,i)):d.lineTo(r,i)})),d.stroke(),d.restore()}},e}(zc),ul=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="ink",o.$ui.addClass("pdf-page-ink-annot-container"),o.$handler.addClass("pdf-page-ink-annot-handler-container"),Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,interceptor:function(t){return o.checkSize(t)},start:function(){return o.onStartUpdateShape()},update:function(t,e){return o.onShapeUpdating(t,e)},moving:function(t,e,n){return o.onShapeMoving(t,e,n)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},enableDiagonally:!0});return o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),o}O()(e,t);var n=e.prototype;return n.checkSize=function(t){return!(t.width<10||t.height<10)},n.generateApRenderer=function(){var t=this.getInkList();return t&&t.length<1e3?new cl(this):new Dc(this)},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.active=function(){t.prototype.active.call(this),this.activeRect(),this._applyShapeChange()},n._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin()},n.movedByOther=function(){this.isActive&&(this.activeRect(),this.shapeControl.updateBoundary(this.getBoundary()),this.setMargin())},n.afterRender=function(t){if(t.transformed&&this.isActive){this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin()}},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.onStartUpdateShape=function(){this.editDebouncePromise||(this.editDebouncePromise=new It(0))},n.onShapeUpdating=function(t,e){this.pdfViewer.config.highPerformance&&(t.width<10&&(t.width=10),this.setRect(t),this.setMargin())},n.onShapeMoving=function(t,e,n){var r=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((function(){return r.moveTo(t.left,t.top).then((function(){r.setMargin()}))}))},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2),r=n[0],i=n[1];return os.on({left:0,top:0,right:r,bottom:i}).extract()},n.onShapeUpdateEnd=function(t,e,n){var r=this;return t.width<10&&(t.width=10),"resize"!==n||this.pdfViewer.config.highPerformance?this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((function(){return r.moveTo(t.left,t.top,n).then((function(t){r.setMargin()}))})):Promise.resolve():this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((function(){return r.setRect(t)})).then((function(t){r.setMargin()})):Promise.resolve()},n.getPropertyOptions=function(){var t=this.annot;return{color:xn(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),borderStyle:!1,disabled:this.propertyDisabled()}},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.getInkList=function(){return this.annot.getInkList()},n.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(os.expandOffset(e,t)),this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox())},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n),i=this.getInkList();return A()(r,{inkList:i})},n.unActive=function(){t.prototype.unActive.call(this),Wt.a.get(this,"shapeControl",(function(t){t.deactive()}))},e}(Rc),dl=n(350),ll=n.n(dl),hl=(n(434),function(){function t(t,e,n){this.viewerComponent=t,this.docPageCount=n;var r="max page: "+n,i=ll()(r);e||(i='<dialog class="fv__dialog fv__annot-properties-dialog">'.concat(i,"</dialog>"));var o=this.$dialog=B()(i);this.bindChangeEvent();var a=e||document.body;if(o.appendTo(a),!e){var s=o[0];vc.a.registerDialog(s),s.showModal()}}var e=t.prototype;return e.bindChangeEvent=function(){var t=this;this.$dialog.on("click",".fv__redaction-cancel",(function(){t.close()})).on("click",".fv__place-redaction-dialog-close-icon",(function(){t.close()})).on("click",".fv__redaction-btn",(function(e){t.submit()})).on("change",".redaction-page-radio",(function(e){e.target.checked&&(t.hideError(),"1"==e.target.value?B()(".fv__redaction-page-range").attr("disabled",""):B()(".fv__redaction-page-range").removeAttr("disabled"))})).on("keydown",".fv__redaction-page-range",(function(e){t.hideError()}))},e.submit=function(){var t=this,e=this.docPageCount,n=[];if("1"==B()(".redaction-page-radio:checked").val())for(var r=0;r<e;r++)n.push(r);else{var i=B()(".fv__redaction-page-range").val();if(new RegExp(/[^\d\-,]/).test(i))return void this.showError();for(var o=i.split(","),a=0;a<o.length;a++){var s=o[a];if(s.indexOf("-")>-1){var c=s.split("-");if(c.length>2)return void this.showError();if(c[0]<1||c[0]>e||c[1]<1||c[1]>e)return void this.showError();for(var u=Math.min(c[0],c[1]),d=Math.max(c[0],c[1]),l=u;l<=d;l++)-1===n.indexOf(l)&&n.push(l-1)}else{if(s<1||s>e)return void this.showError();-1===n.indexOf(n)&&n.push(s-1)}}}this.viewerComponent.placeRedact(n).then((function(e){t.close()}))},e.reset=function(){this.hideError(),this.element.querySelector(".redaction-page-radio").checked=!0,this.element.querySelector(".fv__redaction-page-range").value=""},e.showError=function(){this.$dialog[0].querySelector(".fv__redaction-page-range").classList.add("fv__redaction-error")},e.hideError=function(){this.$dialog[0].querySelector(".fv__redaction-page-range").classList.remove("fv__redaction-error")},e.close=function(){var t=this.$dialog;t&&(t[0].close(),t.remove(),this.$dialog=null)},t}()),fl={reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data("annotComponent").showReplyDialog("reply")},disabled:function(){return this.data("annotComponent").replyDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}},apply:{name:"apply",nameI18nKey:"viewer_:contextmenu.annot.apply",callback:function(){return this.data("annotComponent").apply()},disabled:function(){return this.data("annotComponent").assembleDocDisabled()}},applyAll:{name:"applyAll",nameI18nKey:"viewer_:contextmenu.annot.applyAll",callback:function(){return this.data("annotComponent").applyAll()},disabled:function(){return this.data("annotComponent").assembleDocDisabled()}},place:{name:"place",nameI18nKey:"viewer_:contextmenu.annot.place",callback:function(t,e,n){this.data("annotComponent").showPlaceMarkDialog(t,e,n)},disabled:function(){return this.data("annotComponent").moveDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data("annotComponent").showPropertiesDialog(t,e,n)}}};var pl=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.doRender=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.component.renderAppearanceType;if("rollover"!==r)return t.prototype.doRender.call(this,e,n);var i=this.canvas.getContext("2d");i.save(),i.fillStyle="black",i.fillRect(0,0,this.canvas.width,this.canvas.height),i.restore()},e}(Wu),gl=[{name:"U.S. FOIA",children:["(b) (1) (A)","(b) (1) (B)","(b) (2)","(b) (3) (A)","(b) (3) (B)","(b) (4)","(b) (5)","(b) (6)","(b) (7)(A)","(b) (7)(B)","(b) (7)(C)","(b) (7)(D)","(b) (7)(E)","(b) (7)(F)","(b) (8)","(b) (9)"]},{name:"U.S. Privacy Act",children:["(b)","(d)(5)","(j)(1)","(j)(2)","(k)(1)","(k)(2)","(k)(3)","(k)(4)","(k)(5)","(k)(6)","(k)(7)"]}];var vl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:fl,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),ml=function(){},yl=function(t){function e(e,n,r,i){var o,a;return(o=t.call(this,e,n,r,i)||this).name="redact",o.$ui.addClass("fv__pdf-page-redact-annot-container"),o.$handler.addClass("fv__pdf-page-redact-annot-handler-container"),o.$ui.css("z-index",99),o.$handler.css("z-index",99),a=!!e.isArea(),o.pdfViewer.eventEmitter.emit(Ct.redactAnnotRendered,F()(o)),Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc({emitter:o.pdfViewer.eventEmitter,start:function(t,e,n){return o.onStartUpdateShape(t,e,n)},update:function(t,e){return o.onShapeUpdating(t,e)},moving:function(t,e){return o.onShapeMoving(t,e)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},resizable:a,enableDiagonally:!0});return e.isArea()?o.processShapeControlPermissionCtrl(t):t.disable(),o.addDestroyHook((function(){t.destroy()})),t})),o.apRenderer=o.generateApRenderer(),o}O()(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.isHTMLSimulate("redact")?new pl(this):t.prototype.generateApRenderer.call(this)},e.getDefaultContextMenuConfig=function(){return vl},n.assembleDocDisabled=function(){return 40!=(40&this.docRender.getUserPermission().getValue())},n.onStartUpdateShape=function(t,e,n){this.editDebouncePromise||(this.editDebouncePromise=new It(0))},n.onShapeUpdating=function(t,e){var n=this;this.editDebouncePromise.exec((function(){return n.setRect(t)}))},n.onShapeMoving=function(t,e){},n.onShapeUpdateEnd=function(t,e,n){var r=this;return this.editDebouncePromise?this.editDebouncePromise.exec((function(){return r.moveTo(t.left,t.top,n)})):Promise.resolve()},n.active=function(){var e,n=this.annot,r=n.info.overlayCode;if(r.length){var i,o=(e=localStorage.getItem("modifiedUSCodes"))?JSON.parse(e):[].concat(gl),a="";r.forEach((function(t,e){e%2?a+=1!=e?","+i[t]:i[t]:i=o[t].children})),a!=n.info.overlayText&&n.setRedactAppearance({overlayText:n.info.overlayText,redactionCode:[]})}t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active"),this._applyShapeChange()},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox(),e={left:t.left,top:t.top,width:t.width+2,height:t.height+2};this.shapeControl.active(this.$handler,this.getBoundary(),e)},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.redraw=function(t){if(t&&this.apRenderer)try{this.apRenderer.clearCache()}catch(t){}return this.render()},n.updateRender=function(){return Promise.resolve()},n.showPlaceMarkDialog=function(){if(this.$placeRedactionControl&&this.$placeRedactionControl.$dialog);else{var t=this.pdfViewer.currentPDFDoc.info.pageCount;this.$placeRedactionControl=new hl(this,document.body,t)}},n.hidePlaceMarkDialog=function(){this.$actionsControl.close()},n.placeRedact=function(t){var e=this.annot.getRects(),n=this.pdfViewer,r=this.annot,i=t.map((function(t){return n.currentPDFDoc.getPageByIndex(t).then((function(t){if(!t.isVirtual()){var n=A()({color:r.getBorderColor()},r.getRedactAppearance());return t.markRedactAnnot(e,n).then((function(t){var e=[];return r.replies.map((function(n){e.push(t[0].addReply(n.info))})),Promise.all(e).then((function(){return t}))}))}}))}));return Promise.all(i).then((function(t){return t.filter(Boolean)}))},n.apply=function(){var t=this,e=this.pdfViewer;if(e)return e.viewerUI.confirm({message:"viewer_:contextmenu.annot.applyConfirm",level:"warning"}).then((function(){return t.annot.apply()}),ml)},n.applyAll=function(){var t=this.pdfViewer;if(t)return t.viewerUI.confirm({message:"viewer_:contextmenu.annot.applyConfirm",level:"warning"}).then((function(){var e=t.getCurrentPDFDoc();return e.redacted=!0,e.applyRedaction()}),ml)},n.getPropertyOptions=function(){var t=this.annot,e=xn(t.getBorderColor(),"#"),n=t.getApplyFillColor()||4278190080,r=this.propertyDisabled(),i=t.info,o=i.overlayText,a=i.fontName,s=i.isAutoFontSize,c=i.justification,u=i.isRepeat,d=i.isOverlayCode,l=i.defaultAppearance;return{color:e,applyFillColor:n,borderStyle:!1,disabled:r,overlayText:o,fontName:a,isAutoFontSize:s,justification:c,isRepeat:u,isOverlayCode:d,textSize:l.textSize,textColor:l.textColor,overlayCode:i.overlayCode}},n.setApplyFillColor=function(t){return this.annot.setRedactApplyFillColor(t)},n.getTileConfig=function(t,e){var n=this.pdfViewer,r=n.getSmartScale(t),i=n.config.tileSize,o=this.annot,a=o.getDeviceRect(1,e),s=o.getDeviceRect(r,e),c=s.right-s.left,u=s.bottom-s.top;this.getAnnotFlag().checkNoZoom()&&(c=a.right-a.left,u=a.bottom-a.top);var d=Math.ceil(u/i),l=Math.ceil(c/i),h=ut(1)*t*2;return[d,l,c+=h,u+=h,i,r,t,e,a.left,a.top]},n.mouseEnter=function(){this.renderAppearanceType="rollover",this.redraw(!0)},n.mouseLeave=function(){this.renderAppearanceType="normal",this.redraw(!0)},e}(Rc),wl=fc(),bl=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="polygonCloud",o}return O()(e,t),e.getDefaultContextMenuConfig=function(){return wl},e}(Nu),Al={};"function"==typeof FontFace?function(t,e){return Al[t]?Al[t]:Al[t]=new Promise((function(n,r){e().then((function(e){if(!e)return r(),void Al[t];var i=new FontFace(t,e.buffer||e.url);i.load().then((function(){document.fonts.add(i),n(i)}),(function(){r(),delete Al[t]}))}),(function(){r(),delete Al[t]}))}))}:function(t,e){return Al[t]?Al[t]:Al[t]=new Promise((function(n,r){e().then((function(e){return e?e.buffer?URL.createObjectURL(new Blob([e.buffer],"application/x-font-woff")):e.url:(r("woff is invalid"),void delete Al[t])})).then((function(e){if(!e)return r();var i=document.createElement("style");i.innerHTML='@font-face{font-family:"'+t+'"; src:url("'+e+'");}',document.head.appendChild(i),n(i)}))}))};var Pl={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data("annotComponent").showPropertiesDialog(t,e,n)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};var El=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:Pl,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),xl=function(t){function e(e,n,r,i){var o,a;return(o=t.call(this,e,n,r,i)||this).name="freetext",o.$ui.addClass("fv__pdf-page-freetext-annot-container"),o.$handler.addClass("fv__pdf-page-freetext-annot-handler-container"),o.$textInput=B()("<textarea class='fv__ui-freetext-editor ".concat(o.annot.getIntent(),"'></textarea>")),a=o.$textInput,o.$handler.append(a),o.bindTextInputEvent(a),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return El};var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this.activeRect(),this.$rect&&this.$rect.show()},n.setContent=function(t){var e=this;return this.annot.setContent(t).then((function(t){return e.collaborate(),t}))},n.getInnerBoundary=function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=this.getPDFPage();if(t=this.annot.getIntent()!==Ht.Intents.FREETEXT_TYPEWRITER?this.annot.getInnerRect():this.annot.getRect(),e&&this.annot.getIntent()!=Ht.Intents.FREETEXT_TYPEWRITER){var i=this.annot.getBorderWidth();t.left+=i,t.right-=i,t.top-=i,t.bottom+=i}var o=r.getDeviceRect(t,this.scale,n);return{left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top}},n.setInnerRect=function(t){return this.annot.setInnerRectNoAction(t)},n.setCalloutLinePoints=function(t){return this.annot.setCalloutLinePoints(t)},n.showReplyDialog=function(){var t=this.getAnnotFlag();try{return this.annot.checkModidyPerm(),!(t.checkLockedContents()||t.checkReadOnly()||t.checkLocked())&&(this.shapeControl&&this.shapeControl.deactive(),this.backup(),this.enableEditMode(),!0)}catch(t){return!1}},n.backup=function(){this.backupProperty={rect:A()({},this.annot.getRect()),innerRect:A()({},this.annot.getInnerRect())}},n.getStyle=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.annot.getRotation(),r=this.annot.page.getRotationAngle(),i=this.getRect(),o=this.getRect(this.scale,n+r),a=o.right-o.left,s=o.bottom-o.top,c=this.annot,u=c.getFillColor(),d=c.getDefaultAppearance(),l=d.textColor,h=4*d.textSize/3*this.scale,f=this.fontSizeScale=h/12;f>1&&(f=this.fontSizeScale=1);var p=1.1*h/f,g=xn(16777215&u,"#");0==u&&(g=e?"white":"transparent");var v=xn(16777215&l,"#");0==l&&(v="black");var m=d.font||{},y=this.annot.getAlignment();switch(y){case 0:y="left";break;case 1:y="center";break;case 2:y="right"}var w="center";switch((this.rotate+n+r)%360){case 0:w="center";break;case 90:w="".concat(s/2,"px center");break;case 180:w="center";break;case 270:w="".concat(a/2,"px ").concat(a/2,"px")}p=Math.min(p,s)+"px";var b=A()({"text-align":y,color:v,background:g,display:"block","font-size":h,fontFamily:'"'+[m.baseName,m.familyName,m.nameKey,m.name,"FoxitPDFSDKForWeb"].join('","')+'"',lineHeight:p},t?{left:i.left,top:i.top,width:a,height:s,"transform-origin":w,transform:"rotate(".concat(n+this.rotate+r,"deg)")}:{});return b},n.setDomRect=function(t){var e=this.annot.getRotation()+this.annot.page.getRotationAngle()+this.rotate,n=this.getInnerBoundary(!0),r=n.left,i=n.top,o=n.width,a=n.height,s=new J,c=o,u=a,d=r,l=i;switch(e%360){case 90:c=-o,d=r+o;break;case 180:c=-o,d=r+o,u=-a,l=i+a;break;case 270:u=-a,l=i+a}s.rotate((360-e)*Math.PI/180);var h=s.transformRect(0,0,c,u);t.left=h[0]+d,t.top=h[1]+l,t.width=h[2]-h[0],t.height=h[3]-h[1],t["transform-origin"]="0 0",t.transform="rotate(".concat(e,"deg)")},n.showContextMenu=function(e,n){return"editing"!==this.status&&t.prototype.showContextMenu.call(this,e,n)},n.enableEditMode=function(){var t=this,e=this.docRender.pdfViewer.getGroupCount(),n=S()(e,3),r=(n[0],n[1],n[2]);if(this.annot.isGrouped()){var i=this.annot.getGroupHeader().getId(),o=r[i];for(var a in delete r[i],r[-1].forEach((function(e){return t.docRender.pdfViewer.unActiveElement(e)})),r)r[a].forEach((function(e){return t.docRender.pdfViewer.unActiveElement(e)}));o.forEach((function(e){e.getId()!=t.getId()&&t.docRender.pdfViewer.unActiveElement(e)}))}else for(var s in r)r[s].forEach((function(e){e.getId()!=t.getId()&&t.docRender.pdfViewer.unActiveElement(e)}));this.status="editing";var c=this.annot,u=this.getStyle(!1,!0);this.$handler.addClass("active"),this.setDomRect(u),this.fontSizeScale>=1?this.$handler.css("transform","scale(1)"):(this.$handler.css("transform","scale(".concat(this.fontSizeScale,")")),u.left/=this.fontSizeScale,u.top/=this.fontSizeScale,u.width/=this.fontSizeScale,u.height/=this.fontSizeScale,u.lineHeight="12px"),this.$textInput.css(u).val(c.getContent()).focus(),c.getIntent()==Ht.Intents.FREETEXT_TYPEWRITER&&this.setHeight(this.$textInput,13,u)},n.bindEvent=function(){var e=this;t.prototype.bindEvent.call(this);var n=function(t){so(t).when(lo.Escape,(function(){t.preventDefault(),e.$textInput.blur()}))};this.$textInput.on("keyup",n).on("keydown",n)},n.unActive=function(){this.$textInput.trigger("blur"),this.$textInput.css("display","none"),t.prototype.unActive.call(this),this.$rect&&this.$rect.hide(),clearInterval(this.pressInterval)},n.bindTextInputEvent=function(t){var e=this;t.on("focus",(function(t){e.oldInnerRect=e.annot.getInnerRect(),e.oldRect=e.annot.getRect(),e.oldCalloutLinePoints=e.annot.getCalloutLinePoints&&e.annot.getCalloutLinePoints()})).on("keydown",(function(t){27!==t.keyCode&&(clearInterval(e.pressInterval),e.pressInterval=setInterval((function(){e.setHeight(e.$textInput,t.keyCode)}),100))})).on("keyup",(function(t){27!==t.keyCode&&(e.setHeight(e.$textInput,t.keyCode),clearInterval(e.pressInterval))})).on("blur",(function(t){if("editing"==e.status){var n=e.$textInput[0].getBoundingClientRect();e.$textInput.css("display","none"),e.$handler.css("transform","scale(1)"),e.status="viewing";var r=e.parent("pdfPageRender").getPDFRectFromClientRect(n);if(!e.beforeBlur(t,r)){var i;switch(e.annot.getIntent()){case Ht.Intents.FREETEXT_TYPEWRITER:i=e.setRectInPDF(r,!1);break;default:i=e.setInnerRectHeight(r)}i.then((function(n){var r=e.annot.getContent();if(t.target.value!==r)return e.setContent(t.target.value)})).then((function(n){e.pdfViewer.activeElement(),B()(t.target).css({display:"none"}).removeAttr("contenteditable")})).then((function(t){return e.$textInput.css("display","none"),e.oldInnerRect=null,e.oldRect=null,e.oldCalloutLinePoints=null,e.$handler.css("transform","scale(1)"),e.postBlur()})).then((function(t){return e.redraw()}))}}else e.$handler.css("transform","scale(1)")}))},n.beforeBlur=function(){return!1},n.postBlur=function(){},n.setHeight=function(t){},n.getPadding=function(){var t=this.annot,e=t.getRect(),n=t.getBorderInfo(),r=0;if(5!=n.style){var i=n.width||1;r=1.5*i,this.isHTMLSimulate("freetext")?r=2*i:e.top-e.bottom<2*r&&(r=i)}else r=t.getInnerRect().left-e.left;return r},n.setDefaultAppearance=function(t,e){var n=this;"textColor"==t&&(e=xn(e,"int",1));var r=this.annot.getDefaultAppearance();return r[t]=e,this.annot.setDefaultAppearance(r).then((function(t){n.activeRect(),n.shapeControl.adjustPointControl&&n.shapeControl.adjustPointControl(),n._applyShapeChange&&n._applyShapeChange(),n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n)}))},e}(Rc),Sl=function(t){function e(e,n,r,i){var o;(o=t.call(this,e,n,r,i)||this).name="typewritter",Wt.a.property(F()(o),"shapeControl",(function(){var t=new Wc(o.getShapeOptions());return o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),o.$ui.addClass("fv__pdf-page-typewritter-annot-container"),o.$handler.addClass("fv__pdf-page-typewritter-annot-handler-container");var a=B()("<div class='fv__ftui-container'><pre class='fv__typewriter_ui'></pre></div>");return o.$pre=a.find("pre"),o.$ui.append(a),o}O()(e,t);var n=e.prototype;return n.getShapeOptions=function(){var t=this;return{emitter:this.pdfViewer.eventEmitter,resizable:!1,start:function(){return t.onStartUpdateShape()},update:function(e,n){return t.onShapeUpdating(e,n)},moving:function(e,n,r){return t.onShapeMoving(e,n,r)},end:function(e,n,r){return t.onShapeUpdateEnd(e,n,r)},enableDiagonally:!0}},n.afterRender=function(t){t.transformed&&this.isActive&&(this.activeRect(),this.$rect&&this.$rect.show())},n.onStartUpdateShape=function(t,e,n){},n.onShapeUpdating=function(t,e){},n.onShapeMoving=function(t,e,n){this.annot.isGrouped()&&this.pdfViewer.eventEmitter.emit("freetextGroupMoving")},n.onShapeUpdateEnd=function(t,e,n){var r=this,i=Promise.resolve();switch(n){case"move":i=this.moveTo(t.left,t.top,n);break;case"resize":i=this.setRect(t),this.render()}return this.annot.isGrouped()&&this.pdfViewer.eventEmitter.emit("freetextGroupMovingEnd"),i.then((function(){return r.updateToobarPostion()}))},n.updateToobarPostion=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.$toolbar){var e=this.$toolbar,n=5,r=this.annot.getRect(),i=this.annotsRender.pageRender,o=i.page,a=o.getDeviceRect(r,i.getScale(),i.getRotation());if(e.css({top:a.top+"px",left:a.left-n+"px"}),a.top<30){var s=a.bottom-a.top;e.css({transform:"translatey(".concat(s+n,"px)")})}var c=i.getScale(),u=o.getPxWidth()*c,d=B()(".fv__ui-sidebar"),l=d[0].getBoundingClientRect(),h=e[0].getBoundingClientRect();if(h.right-l.right>u){var f=h.right-l.right-u;t?e.css({left:-5-f-5+"px"}):e.css({left:a.left-f-5+"px"})}}},n.showToolbar=function(t){var e=this;this.$toolbar&&this.$toolbar.remove();var n=B()('<div class="fv__text-fill-sign-toolbar">\n                                            <div class="fv__text-fill-sign-toolbar-base">\n                                                <div class="fv__text-fill-sign-toolbar-icon fv__text-fill-sign-toolbar-decrease"></div>\n                                                <div class="fv__text-fill-sign-toolbar-icon fv__text-fill-sign-toolbar-increase"></div>\n                                            </div>\n                                        </div>');t.after(n),this.$toolbar=n,this.updateToobarPostion(),this.$toolbar.find(".fv__text-fill-sign-toolbar-decrease").on("click",(function(t){var n=e.annot.getDefaultAppearance().textSize;n<7||e.annot.setDefaultAppearance({textSize:n-1})})),this.$toolbar.find(".fv__text-fill-sign-toolbar-increase").on("click",(function(t){var n=e.annot.getDefaultAppearance().textSize;n>20||e.annot.setDefaultAppearance({textSize:n+1})}))},n.hideToolbar=function(){this.$toolbar&&this.$toolbar.remove()},n.active=function(){t.prototype.active.call(this),this._applyShapeChange()},n._applyShapeChange=function(){var t,e=this,n=this._getShapeControllerBoundaryBox();t=this.getBoundary(),this.getAppPermission().then((function(r){if(!e.isDestroyed){!!e.groupMoveDisabled()||(r.ignorable()?e.moveDisabled():!r.isAdjustable()||e.moveDisabled())?e.shapeControl.disable():e.shapeControl.enable(),e.shapeControl.active(e.$handler,t,n),e.setMargin()}}))},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);var e=this.annot;return{opacity:e.getOpacity(),borderStyle:!1,disabled:this.propertyDisabled(),fontColor:e.getFontColor(),fontSize:e.getDefaultAppearance().textSize}},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive(),this.hideToolbar()},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(os.expandOffset(e,t))},n.redraw=function(e){return this.moveDisabled()||this.groupMoveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.setHeight=function(t,e){for(var n=this.annot.page.getRotationAngle(),r=((this.annot.getRotation()+n+this.rotate)%360+360)%360,i=this.parent("pdfPageRender").$ui[0].getBoundingClientRect();0!=t.scrollTop();){var o=t[0].getBoundingClientRect(),a=o.left,s=o.top,c=o.bottom,u=o.right,d=o.width,l=o.height;(Vt.isMobile||Vt.isMiPad||Vt.isIPAD||Vt.isTablet)&&(d=t.width(),l=t.height());var h=void 0;switch(r){case 0:a+(h=1.2*d)>i.right&&(h=i.right-a);break;case 90:s+(h=1.2*l)>i.bottom&&(h=i.bottom-s);break;case 270:c-(h=1.2*l)<i.top&&(h=c-i.top);break;case 180:u-(h=1.2*d)<i.left&&(h=u-i.left)}t.width(h),t.height(t.scrollTop()+t.height())}},n.beforeBlur=function(t,e){if(this.$textInput.val().length<1)return this.$ui.hide(),this.removeAnnot(),!0;var n=this.annot,r=this.annot.getContent();if(!this.isHTMLSimulate("freetext"))return this.$ui.show(),!1;if(r==t.target.value)return this.$pre.html(r).show(),!0;r=t.target.value,n.info.content=r,n.info.RC="",n.info.rect=e;var i=this.getInnerBoundary(!1);this.$ui.css(i),this.$pre.html(r).show();var o=this.$ui.get(0).style,a=parseFloat(o.left)*this.fontSizeScale,s=parseFloat(o.top)*this.fontSizeScale,c=this.$ui.get(0).getBoundingClientRect(),u={left:a,top:s,right:a+c.width*this.fontSizeScale,bottom:s+c.height*this.fontSizeScale};return e=this.annot.page.reverseDeviceRect(u,this.scale,this.rotate),n._setRect(e),n._setContent(r),!0},n.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;if(this.scale=e,this.rotate=n,!this.isHTMLSimulate("freetext")||"typewritter"!=this.name)return this.isHTMLSimulate("freetext")&&"textbox"==this.name?(this.$ui.css({overflow:"hidden"}),t.prototype.render.call(this,e,n)):t.prototype.render.call(this,e,n);var r=this.getStyle();r["word-break"]="keep-all",r["white-space"]="nowrap",r.opacity=this.annot.getOpacity();var i=this.$ui.find(".fv__ftui-container"),o=this.fontSizeScale;i.css({transform:"scale(".concat(o,")"),width:100/o+"%"}),this.$ui.css(r),this.$pre.text(this.annot.getContent())},n.updateSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.isHTMLSimulate("freetext")?this.render(e,n):t.prototype.updateSize.call(this,e,n)},n.enableEditMode=function(){this.isHTMLSimulate("freetext")?this.$pre.hide():"typewritter"==this.name&&this.$ui.hide(),t.prototype.enableEditMode.call(this)},e}(xl),Cl=n(351),Dl=n.n(Cl),Il=function(){function t(){}var e=t.prototype;return e.init=function(t,e){this.calloutRender=t,this.$ui=B()(e),this.$ui.hide()},e.draw=function(t,e,n){var r=this.$ui[0];r.width=e.right-e.left,r.height=e.bottom-e.top;var i=r.getContext("2d");i.save(),i.clearRect(0,0,this.$ui.width(),this.$ui.height()),i.beginPath(),t.length>1&&(i.moveTo(t[0][0]-e.left,t[0][1]-e.top),i.lineTo(t[1][0]-e.left,t[1][1]-e.top)),t.length>2&&i.lineTo(t[2][0]-e.left,t[2][1]-e.top),i.strokeStyle="#5aa",i.lineWidth=2,i.stroke(),i.save();var o=n.width||n.right-n.left,a=n.height||Math.abs(n.top-n.bottom);i.rect(n.left-e.left,n.top-e.top,o,a),i.fillStyle="rgba(88, 176, 176, 0.5)",i.stroke(),i.fillRect(n.left-e.left,n.top-e.top,o,a),i.restore()},e.show=function(t,e,n){t&&this.draw(t,e,n),this.$ui.show()},e.hide=function(){this.$ui&&this.$ui.hide()},t}();var Rl=function(){function t(t){var e=this;this.control=t,this.annot=t.annot,this.companions=[],this.shape={getRect:function(){return e.annot.getRect()}},this.deltaX=0,this.deltaY=0,this.companionMargin={left:0,top:0,bottom:0,right:0}}var e=t.prototype;return e.companion=function(t){this!==t&&(this.companions.indexOf(t)>-1||(this.companions.push(t),this.updateMargin()))},e.updateMargin=function(){if(0!==this.companions.length){var t=this.shape.getRect(),e=t.left,n=t.right,r=t.top,i=t.bottom;this.companions.forEach((function(t){var o=t.shape.getRect();e=Math.min(o.left,e),r=Math.min(o.top,r),n=Math.max(o.right,n),i=Math.max(o.bottom,i)}));var o=t.left-e,a=n-t.right,s=t.top-r,c=i-t.bottom;this.companionMargin={left:o,right:a,top:s,bottom:c}}else this.companionMargin={left:0,top:0,bottom:0,right:0}},e.doStart=function(){this.deltaX=0,this.deltaY=0,this.control.showShape(),this.control.start("area")},e.move=function(t,e,n){var r=this;this.deltaX+=t,this.deltaY+=e,this.control.move("area",-1,this.deltaX,this.deltaY).then((function(t){if(t){var e=t.rect,n=t.innerRect,i=t.points;B()(r.control.calloutController).css(r.annot.getBoundary()),r.control.showShape(i,e,n)}}))},e.resize=function(t,e,n,r){},e.end=function(t,e){this.control.calloutShape.hide(),"move"===t&&this.control.end("area")},e.cancel=function(t){},e.rotateStart=function(){},e.updateRotateDegreeBox=function(t){},e.rotate=function(t,e){},e.rotateEnd=function(){},e.clearCompanions=function(){this.companions.length=0,this.companionMargin={left:0,top:0,bottom:0,right:0}},t}(),Tl=Et,_l=function(){function t(t){var e=new DOMParser;this.whole=e.parseFromString(Dl()({}),"text/html").body.firstChild,this.calloutController=this.ui=this.whole.querySelector(".fv__shape-control"),this.isMoveDisabled=!1,this.bindMovingEvent(),this.calloutShape=new Il,this.emitter=t}var e=t.prototype;return e.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.start,n=void 0===e?Dt.a:e,r=t.update,i=void 0===r?Dt.a:r,o=t.interceptor,a=void 0===o?Tl:o,s=t.moving,c=void 0===s?Dt.a:s,u=t.end,d=void 0===u?Dt.a:u,l=t.cancel,h=void 0===l?Dt.a:l,f=arguments.length>1?arguments[1]:void 0;this.start=n,this.update=i,this.move=c,this.interceptor=a,this.end=d,this.cancel=h,this.annot=f,this.calloutShape.init(f,this.calloutController.querySelector(".fv__shape-control-previewer")),this.companionObject=new Rl(this)},e.getCompanionObject=function(){return this.companionObject},e.companion=function(t){"function"==typeof t.getCompanionObject&&this.companionObject.companion(t.getCompanionObject())},e.clearCompanions=function(){this.companionObject.clearCompanions()},e.getMargin=function(){return this.companionObject.companionMargin},e.active=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.annot.getBoundary(),n=arguments.length>2?arguments[2]:void 0;t.append(this.calloutController),B()(this.calloutController).css(e),this.box=n,this.adjustPointControl(),this.calloutController.style.display="block"},e.show=function(){B()(this.calloutController).show()},e.hide=function(){B()(this.calloutController).hide()},e.disable=function(){this.isDisabled=!0,this.calloutController.classList.add("disabled")},e.enable=function(){this.isDisabled=!1,this.calloutController.classList.remove("disabled")},e.moveDisable=function(){this.isMoveDisabled=!0,this.calloutController.classList.add("move-disabled")},e.moveEnable=function(){this.isMoveDisabled=!1,this.calloutController.classList.remove("move-disabled")},e.deactive=function(){this.calloutController.style.display="none"},e.destroy=function(){this.calloutController.parentNode&&this.calloutController.parentNode.removeChild(this.calloutController)},e.bindMovingEvent=function(){var t=this;this._bindMoveAreaEvents("area"),this._bindMoveAreaEvents("text");var e=this.ui.querySelectorAll(".fv__shape-controller");Array.prototype.slice.call(e).forEach((function(e){return t._bindMovePointEvents(e)})),Bt(this.calloutController,(function(e){t.annot.showContextMenu(e.clientX,e.clientY),e.preventDefault()}));this.ui},e._bindMoveAreaEvents=function(t){var e=this,n=this.ui,r=".fv__shape-control-move-area";"text"==t&&(r=".fv__shape-control-text-area");var i,o,a=new zr.Manager(n.querySelector(r));a.add(new zr.Pan({direction:zr.DIRECTION_ALL})),a.on("panstart",(function(n){var r=n.deltaX,a=n.deltaY,s=n.srcEvent,c=n.center;e.isDisabled||"area"==t&&e.isMoveDisabled||(i=r,o=a,"area"===t&&(e.onPrestart&&e.onPrestart(),e.companionObject.companions.forEach((function(t){t.doStart(),t.move(r,a,!0)}))),e.showShape(),e.start(t),"area"==t&&e.trigger("movingstart",{deltaX:c.x+r,deltaY:c.y+a,srcEvent:s}))})),a.on("panend",(function(n){"area"==t&&e.trigger("movingend"),e.isDisabled||"area"==t&&e.isMoveDisabled||("area"===t&&e.companionObject.companions.forEach((function(t){t.end("move")})),e.calloutShape.hide(),e.end(t),"area"===t&&e.onAfterEnd&&e.onAfterEnd("move"))})),a.on("pancancel",(function(n){"area"==t&&e.trigger("movingcancel"),e.isDisabled||"area"==t&&e.isMoveDisabled||(e.cancel(t),"area"===t&&e.onAfterEnd&&e.onAfterEnd("move"))})),a.on("panmove",(function(n){var r=n.deltaX,a=n.deltaY;n.center,n.direction;if(!(e.isDisabled||"area"==t&&e.isMoveDisabled)){var s=r-i,c=a-o,u=e.annot.getRect();e.move(t,-1,s,c).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n){var r=e.annot.getRect();if("area"===t){var i=r.left-u.left,o=r.top-u.top;e.companionObject.companions.forEach((function(t){t.move(i,o)}))}B()(e.calloutController).css(e.annot.getBoundary());var a=n.rect,s=n.innerRect,c=n.points;"text"==t&&e.adjustPointControl(c,a,s),e.showShape(c,a,s)}}))}}))},e._bindMovePointEvents=function(t){var e,n,r=this,i=new zr.Manager(t);i.add(new zr.Pan({direction:zr.DIRECTION_ALL})),i.on("panmove",(function(i){var o=i.deltaX,a=i.deltaY;i.center,i.direction,i.target;if(!r.isDisabled){var s=o-e,c=a-n;return r.move("resize",t.classList[2],s,c).then((function(t){if(t){B()(r.calloutController).css(r.annot.getBoundary());var e=t.rect,n=t.innerRect,i=t.points;r.adjustPointControl(i,e,n),r.showShape(i,e,n)}})),!1}})),i.on("panstart",(function(t){var i=t.deltaX,o=t.deltaY;t.center;if(!r.isDisabled)return e=i,n=o,r.showShape(),r.start("resize"),!1})),i.on("pancancel",(function(t){if(!r.isDisabled)return r.cancel("resize"),!1})),i.on("panend",(function(t){if(!r.isDisabled)return r.calloutShape.hide(),r.end("resize"),!1}))},e.showShape=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getCalloutPointers(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.annot.getRect(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.annot.getInnerBoundary();this.calloutShape.show(t,e,n)},e.adjustPointControl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getCalloutPointers(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.annot.getRect(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.annot.getInnerBoundary(),r=this.ui,i={left:n.left-e.left,top:n.top-e.top,width:n.width,height:n.height},o=r.querySelector(".fv__shape-control-text-area");B()(o).css(i);var a=r.querySelector(".fv__shape-control-inner-area");if(B()(a).css(i),t.length>1){var s=r.querySelector(".fv__shape-controller.calloutStart");B()(s).css({display:"block",left:t[0][0]-e.left-4,top:t[0][1]-e.top-4}),s=r.querySelector(".fv__shape-controller.calloutKnee"),B()(s).css({display:"block",left:t[1][0]-e.left-4,top:t[1][1]-e.top-4})}else{var c=r.querySelector(".fv__shape-controller.calloutStart");B()(c).css({display:"none"}),c=r.querySelector(".fv__shape-controller.calloutKnee"),B()(c).css({display:"none"})}},e.trigger=function(t,e){var n=this.emitter;n&&n.emit(t,e)},e.setSnapGrid=function(t){this.snapGrid=t},t}(),kl=function(){function t(){}return t.calcCalloutPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.start,r=e.end,i=e.page,o=e.width,a=void 0===o?r[0]+110:o,s=e.height,c=void 0===s?r[1]+30:s,u=e.borderStyle,d=e.endingStyle,l=e.scale,h=e.rotate;r[0]=Math.max(r[0],2),r[1]=Math.max(r[1],12);var f=100*l*4/3,p=20*l*2/3,g=i.getOriginX(),v=i.getOriginY(),m=i.reverseDeviceRect({left:r[0],right:r[0]+f,top:r[1]-p,bottom:r[1]+p},l,h);n=i.reverseDevicePoint(n,l,h),r=i.reverseDevicePoint(r,l,h),m.left<g&&(m.left=g),m.bottom<v&&(m.bottom=v);var y=[{x:n[0],y:n[1]},{x:m.left-15,y:m.top+10},{x:m.left-.1,y:m.top+10}];if(!(y=t.checkKneePoint(0,y,m))||Fl(y[0],y[1])<15||Fl(y[2],y[1])<15)return{invalid:!0};var w=t.recalculateRect({points:y,innerRect:m,width:a,height:c,borderStyle:u,endingStyle:d}),b=w.left<g+5||w.right>a-5||w.bottom<v+5||w.top>c-5;return b?{invalid:!0}:{calloutLinePoints:y,rect:w,innerRect:m}},t.checkKneePoint=function(e,n,r){if(e>3||n.length<2)return null;var i=JSON.parse(JSON.stringify(n));switch(e){case 0:i[2]={x:r.left-.1,y:(r.top+r.bottom)/2-.1},i[1]={x:i[2].x-15,y:i[2].y};break;case 1:i[1]={x:(r.left+r.right)/2,y:r.bottom-15},i[2]={x:i[1].x-.1,y:r.bottom-.1};break;case 2:i[1]={x:r.right+15,y:(r.top+r.bottom)/2},i[2]={x:r.right-.1,y:i[1].y-.1};break;case 3:i[1]={x:(r.left+r.right)/2,y:r.top+15},i[2]={x:i[1].x-.1,y:r.top-.1}}var o=Fl(i[2],i[0]),a=Fl(i[2],i[1]),s=Fl(i[1],i[0]),c=Math.acos((o-a-s)/(2*Math.sqrt(a)*Math.sqrt(s)));return Math.PI>c&&c>Math.PI/2?t.checkKneePoint(e+1,n,r):i},t.recalculateRect=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.points,n=t.innerRect,r=t.width,i=void 0===r?1e4:r,o=t.height,a=void 0===o?1e4:o,s=t.rotate,c=t.borderInfo,u=t.endingStyle,d=1/0,l=d,h=-d,f=-d,p=d,g=0;g<3;g++)e[g].x<l&&(l=e[g].x),e[g].x>h&&(h=e[g].x),e[g].y>f&&(f=e[g].y),e[g].y<p&&(p=e[g].y);s%2&&(i^=a,i^=a^=i);var v=0;c&&5==c.style&&(v=1==c.cloudIntensity?6:9);var m={left:Math.max(Math.min(l,n.left)-1,0),top:Math.max(f,n.top)+1,right:Math.min(Math.max(h,n.right)+1,i),bottom:Math.min(p,n.bottom)-1};0!==v&&(Math.abs(m.left-n.left)<2&&(m.left-=v),Math.abs(m.right-n.right)<2&&(m.right+=v),Math.abs(m.top-n.top)<2&&(m.top+=v),Math.abs(m.bottom-n.bottom)<2&&(m.bottom-=v));var y=0;switch(u){case 7:case 8:y=8;break;case 2:case 1:case 3:case 6:case 9:y=6}return 0!=y&&(m.left-=y,m.right+=y,m.top+=y,m.bottom-=y),m},t}(),Fl=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},Ml=kl,Ol=function(t){function e(e){var n;return(n=t.call(this,e)||this).helper=new hu(e),n}O()(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-square-canvas")},n.doRender=function(t){t.renderingData;var e=this.component.annot,n=e.info,r=n.borderInfo||{},i=t.scale,o=t.rotate,a=this.convertPointToPixel(r.width||1,i),s=e.page,c=t.outerRect,u=e.getCalloutLinePoints().map((function(t){var e=s.getDevicePoint([t.x,t.y],i,o);return[e[0]-c.left,e[1]-c.top]})),d=this.canvas.getContext("2d");d.clearRect(0,0,this.canvas.width,this.canvas.height),d.save(),t.lineWidth=a,0===a||!1===n.hasBorderColor?d.strokeStyle="transparent":d.strokeStyle=this.numberToRGBAString(n.color),d.lineWidth=a;try{switch(r.style){case Ht.BORDER_STYLE.BEVELED:case Ht.BORDER_STYLE.UNDERLINE:case Ht.BORDER_STYLE.SOLID:this.renderSolid(d,n,t);break;case Ht.BORDER_STYLE.DASHED:this.renderDashed(d,n,t);break;case Ht.BORDER_STYLE.CLOUDY:this.renderCloud(d,n,t)}var l=n.fillColor;l?(l=this.numberToRGBAString(l),d.fillStyle=l,d.fill()):l="transparent",t.renderingData.fillColor=l,this.renderCallout(d,t,n.borderColor,e.getCalloutLineEndingStyle(),u,a),this.component.$pre.css({height:t.innerRect.height,overflow:"hidden"}),d.stroke()}finally{d.restore()}this.afterRender(t)},n.convertToPathPoint=function(t,e,n,r){var i=r.getDevicePoint([t.x,t.y],e),o=S()(i,2),a=o[0],s=o[1];return new lu(a-n.left,s-n.top)},n.shrinkRect=function(t,e){var n=os.on(t).shrink(e).extract();return A()(n,{width:n.right-n.left,height:n.bottom-n.top})},n.renderCloud=function(t,e,n){e.fillColor;var r=e.borderInfo.cloudIntensity,i=this.shrinkRect(n.innerRect,0),o=this.shrinkRect(n.outerRect,0),a=i.width,s=i.height;new Mu([new lu(0,s),new lu(a,s),new lu(a,0),new lu(0,0)],i,o).generate(32/3/r).render(t)},n.renderDashed=function(t,e,n){var r=this,i=e.borderInfo,o=i.dashes||[],a=i.dashPhase||0,s=n.scale;t.save(),t.setLineDash&&t.setLineDash(o.map((function(t){return r.convertPointToPixel(t,s)}))),t.lineDashOffset=this.convertPointToPixel(a,s),this.renderSolid(t,e,n)},n.renderSolid=function(t,e,n){var r=n.outerRect,i=n.innerRect,o=n.lineWidth,a=i.width,s=i.height,c=i.left-r.left,u=i.top-r.top,d=.5*o;t.beginPath(),t.rect(c+d,u+d,a-o,s-o),t.closePath()},n.renderCallout=function(t,e,n,r,i,o){t.save();t.lineWidth=o,t.strokeStyle=this.numberToRGBAString(n),t.moveTo(i[0][0],i[0][1]),i.map((function(e){t.lineTo(e[0],e[1])})),t.stroke();var a=new lu(i[1][0],i[1][1]),s=new lu(i[0][0],i[0][1]);this.helper.renderLineEnd(t,o,e,r,a,s),t.restore()},n.afterRender=function(e){var n=e.outerRect,r=e.innerRect;t.prototype.afterRender.call(this);var i=this.component,o=i.annot,a=i.$pre;a.html(o.getContent());var s=i.getStyle(!1);delete s.background;var c=4*o.getBorderWidth()/3*i.scale;5===o.getBorderInfo().style&&(c=0);var u=i.fontSizeScale;s.margin=[(r.top-n.top+c)/u,(n.right-r.right+c)/u,(n.bottom-r.bottom+c)/u,(r.left-n.left+c)/u].join("px ")+"px",i.$ui.find(".fv__ftui-container").css({transform:"scale(".concat(u,")"),width:100/u+"%"}),a.css(s),i.$ui.css("opacity",o.getOpacity())},e}(zc),Ll=["left","bottom","right","top"],Nl=function(t){function e(e,n,r,i){var o;(o=t.call(this,e,n,r,i)||this).annot=e,o.name="callout",o.$ui.removeClass("fv__pdf-page-textbox-annot-container"),o.$handler.removeClass("fv__pdf-page-textbox-annot-handler-container"),o.$ui.addClass("fv__pdf-page-callout-annot-container"),o.$handler.addClass("fv__pdf-page-callout-annot-handler-container"),Wt.a.property(F()(o),"shapeControl",(function(){var t=new _l(o.pdfViewer.eventEmitter);return o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),o.editDebouncePromiseQueue=new Ot;var a=B()("<div class='fv__ftui-container'><pre class='fv__textbox_ui'></pre></div>");return o.$pre=a.find("pre"),o.$ui.append(a),o}O()(e,t);var n=e.prototype;return n.updateOnPermissionChange=function(t){if(!this.isDestroyed&&(Wt.a.isPropertyIntialized(this,"shapeControl")&&!this.isDestroyed)){var e=!1;e=!!this.groupMoveDisabled()||(t.ignorable()?this.moveDisabled():!t.isAdjustable()||this.moveDisabled());var n=this.shapeControl;e?n.disable():n.enable()}},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.generateApRenderer=function(){return this.isHTMLSimulate("freetext")?new Ol(this):t.prototype.generateApRenderer.call(this)},n.active=function(){var e=this;t.prototype.active.call(this);var n=this._getShapeControllerBoundaryBox(),r=this.getBoundary();this.shapeControl.init({start:function(t){return e.onStartUpdateShape(t)},moving:function(t,n,r,i){return e.onShapeMoving(t,n,r,i)},end:function(t){return e.onShapeUpdateEnd(null,null,t)}},this),this.getAppPermission().then((function(t){!!e.groupMoveDisabled()||(t.ignorable()?e.moveDisabled():!t.isAdjustable()||e.moveDisabled())?e.shapeControl.disable():e.shapeControl.enable(),e.shapeControl.active(e.$handler,r,n)}))},n.movedByOther=function(){if(this.isActive){this.activeRect();var t=this._getShapeControllerBoundaryBox(),e=this.getBoundary();this.shapeControl.active(this.$page,e,t),this.shapeControl.adjustPointControl()}},n.afterRender=function(t){t.transformed&&this.isActive&&this.movedByOther()},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.backup=function(){var t=this,e=this.annot.getCalloutLinePoints();if(this.backupProperty={points:JSON.parse(JSON.stringify(e)),rect:A()({},this.annot.getRect()),innerRect:A()({},this.annot.getInnerRect())},e.length<3){var n=this.annot.getBorderStyle(),r=Ml.calcCalloutPosition({start:[0,0],end:[this.backupProperty.innerRect.left,(this.backupProperty.innerRect.top+this.backupProperty.innerRect.bottom)/2],width:this.getPDFPage().getWidth(),height:this.getPDFPage().getHeight(),rotate:this.getPDFPage().getRotation()-this.rotate,borderStyle:n,endingStyle:this.annot.getCalloutLineEndingStyle()});this.setCalloutLinePoints(r.calloutLinePoints).then((function(e){var n,r=t._getShapeControllerBoundaryBox();n=t.getBoundary(),t.shapeControl.active(t.$rect,n,r)}))}},n.onStartUpdateShape=function(t){this.backup()},n.onShapeMoving=function(t,e,n,r){var i=this,o=this.annot.page.reverseDeviceOffset([n,r],this.scale,this.rotate),a=S()(o,2),s=a[0],c=a[1];return this.updatePromise=this.updatePromise||Promise.resolve(),this.updatePromise=this.updatePromise.then((function(){switch(t){case"text":return i.updateTextRect(s,c);case"area":return i.updateRect(s,c);case"resize":return i.updatePoint(e,s,c)}})).then((function(t){return i.annot.isGrouped(),t}))},n.onShapeUpdateEnd=function(t,e,n){var r=this,i=this.annot.info.rect,o=this.annot.info.innerRect,a=this.annot.info.calloutLinePoints;return this._flushEdit(i,o,a).then((function(t){r.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,r),"area"==n&&r.pdfViewer.eventEmitter.emit(Ct.annotationMovedPosition,[r.annot],r.annot.page,r.annot)}))},n._flushEdit=function(t,e,n){var r=this,i=Promise.resolve();return this.annot.isGrouped()&&(i=this.annot.moveTo({left:t.left,top:t.top})),i.then((function(){return r.setRectInPDF(t,!1)})).then((function(t){return r.activeRect(),r.setInnerRect(e)})).then((function(t){return r.setCalloutLinePoints(n)})).then((function(t){r.redraw()}))},n.updateRect=function(t,e){var n=A()({},this.backupProperty.rect);if(n.left+=t,n.right+=t,n.bottom+=e,n.top+=e,!this.checkRect(n,!0))return Promise.resolve(!1);if(t=n.left-this.backupProperty.rect.left,e=n.top-this.backupProperty.rect.top,0==t&&0==e)return Promise.resolve();var r=A()({},this.backupProperty.innerRect);r.left+=t,r.right+=t,r.top+=e,r.bottom+=e;var i=JSON.parse(JSON.stringify(this.backupProperty.points));return i[0].x+=t,i[0].y+=e,i[1].x+=t,i[1].y+=e,i[2].x+=t,i[2].y+=e,this.annot.info.rect=n,this.annot.info.innerRect=r,this.annot.info.calloutLinePoints=i,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})},n.updateTextRect=function(t,e){var n=A()({},this.backupProperty.innerRect),r=this.annot.getCalloutLinePoints();if(n.left+=t,n.right+=t,n.top+=e,n.bottom+=e,!this.checkRect(n,!0))return Promise.resolve(!1);if(!(r=Ml.checkKneePoint(0,r,n)))return Promise.resolve(!1);var i=this.getPDFPage(),o=Ml.recalculateRect({points:r,innerRect:n,width:i.getWidth(),height:i.getHeight(),rotate:i.getRotation(),borderInfo:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});return this.annot.info.rect=o,this.annot.info.innerRect=n,this.annot.info.calloutLinePoints=r,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})},n.updatePoint=function(t,e,n){var r=this.annot.page,i=this.backupProperty.points,o=JSON.parse(JSON.stringify(this.annot.getCalloutLinePoints())),a=!0,s=A()({},this.backupProperty.innerRect);switch(t){case"calloutStart":o[0].x=i[0].x+e,o[0].y=i[0].y+n;if(s.left-20<o[0].x&&o[0].x<s.right+20&&s.bottom-20<o[0].y&&o[0].y<s.top+20)return Promise.resolve();break;case"calloutKnee":if(o[1].x==o[2].x){if(e=0,i[1].y<i[2].y&&i[1].y+n>=i[2].y)return Promise.resolve();if(i[1].y>i[2].y&&i[1].y+n<=i[2].y)return Promise.resolve()}else if(o[1].y==o[2].y){if(n=0,i[1].x<i[2].x&&i[1].x+e>=i[2].x)return Promise.resolve();if(i[1].x>i[2].x&&i[1].x+e<=i[2].x)return Promise.resolve()}if(i[1].x+e<0||i[1].y+n<0)return Promise.resolve();a=!1,o[1].x=i[1].x+e,o[1].y=i[1].y+n;break;default:for(var c=[].concat(Ll),u=0;u<this.rotate/90+this.annot.page.getRotation();u++){var d=c.shift();c.push(d)}switch(t){case"left":s[c[0]]+=Vl(c[0],e,n);break;case"bottom":s[c[1]]+=Vl(c[1],e,n);break;case"right":s[c[2]]+=Vl(c[2],e,n);break;case"top":s[c[3]]+=Vl(c[3],e,n)}}if(a&&!(o=Ml.checkKneePoint(0,o,s)))return Promise.resolve(!1);var l=Ml.recalculateRect({points:o,innerRect:s,width:r.getWidth(),height:r.getHeight(),rotate:r.getRotation(),borderStyle:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});return this.checkRect(l)?(this.annot.info.rect=l,this.annot.info.innerRect=s,this.annot.info.calloutLinePoints=o,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})):Promise.resolve()},n.setEndingStyle=function(t,e){var n=this;return this.annot.setCalloutLineEndingStyle(+e).then((function(){return n.annot.update()})).then((function(){n.activeRect(),n.redraw()}))},n.setFillColor=function(t){var e=this;return this.annot.setFillColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(){return n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n)}))}))},n.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);var e=this.annot,n=xn(e.getBorderColor(),"#"),r=e.getOpacity(),i=this.annot.getFillColor(),o=e.getBorderWidth(),a=this.propertyDisabled(),s=e.getFontColor(),c=e.getDefaultAppearance().textSize;return{color:n,opacity:r,fillColor:i,lineStartStyle:e.getCalloutLineEndingStyle(),borderWidth:o,cloudy:!0,disabled:a,fontColor:s,fontSize:c,borderStyle:!0}},n.getCalloutPointers=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot.getCalloutLinePoints(),e=[],n=0;n<t.length;n++){var r=this.annot.page.getDevicePoint([t[n].x,t[n].y],this.scale,this.rotate);e.push(r)}return e},n.setInnerRectHeight=function(t){var e=A()({},this.backupProperty.innerRect),n=this.annot.getBorderWidth();5===this.annot.getBorderInfo().style&&(n=0);var r={left:t.left-e.left-n,right:t.right-e.right+n,top:t.top-e.top+n,bottom:t.bottom-e.bottom-n},i=0;return Math.abs(r.left)<3&&(i++,r.left=0),Math.abs(r.right)<3&&(i++,r.right=0),Math.abs(r.top)<3&&(i++,r.top=0),Math.abs(r.bottom)<3&&(i++,r.bottom=0),4==i?Promise.resolve(!1):this.setInnerRectProperty({left:e.left+r.left,bottom:e.bottom+r.bottom,top:e.top+r.top,right:e.right+r.right})},n.setInnerRectProperty=function(t){var e=this,n=JSON.parse(JSON.stringify(this.backupProperty.points));if(!(n=Ml.checkKneePoint(0,n,t)))return Promise.resolve(!1);var r=this.annot.page,i=Ml.recalculateRect({points:n,innerRect:t,width:r.getWidth(),height:r.getHeight(),rotate:r.getRotation(),borderStyle:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});Promise.resolve(),this.annot.getRect();return this.setRectInPDF(i,!1).then((function(n){return e.setInnerRect(t)})).then((function(t){return e.setCalloutLinePoints(n)}))},n.checkRect=function(t,e){var n=this.annot.page,r=this.shapeControl.getMargin(),i=n.reverseDeviceOffset([r.left,r.top],this.scale,this.rotate),o=S()(i,2),a=o[0],s=o[1],c=n.reverseDeviceOffset([r.right,r.bottom],this.scale,this.rotate),u=S()(c,2),d=u[0],l=u[1],h=Math.abs(a),f=Math.abs(l),p=Math.abs(d),g=Math.abs(s),v=n.getOriginX()+h,m=n.getOriginX()+n.getMediaWidth()-p,y=n.getOriginY()+f,w=n.getOriginY()+n.getMediaHeight()-g;if(e){if(t.left<v+2){var b=h+2-t.left;t.left+=b,t.right+=b}else if(t.right>m-1){var A=m-1-t.right;t.left+=A,t.right+=A}if(t.bottom<y+2){var P=f+2-t.bottom;t.bottom+=P,t.top+=P}else if(t.top>w-2){var E=w-2-t.top;t.bottom+=E,t.top+=E}return!0}return!(t.left<v||t.bottom<y||t.top>w||t.right>m)},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.redraw=function(e){return this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.setHeight=function(t,e){this.annot.page.getRotationAngle(),this.annot.getRotation();t[0].style.height=t[0].scrollTop+t[0].scrollHeight+"px";var n=t[0].getBoundingClientRect(),r=this.parent("pdfPageRender").getPDFRectFromClientRect(n);this.setInnerRectHeight(r)},e}(xl),Vl=function(t,e,n){return"left"===t||"right"==t?e:n},Bl=Nl,Ul=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.doRender=function(e){isNaN(e.innerRect.left)||(t.prototype.doRender.call(this,e,!1),this.afterRender())},n.afterRender=function(){t.prototype.afterRender.call(this);var e=this.component,n=e.annot,r=e.$pre;r.html(n.getContent());var i=e.getStyle(!0);delete i.background,delete i.left,delete i.top,i.padding=4*e.getPadding()/3*e.scale,r.css(i);var o=e.$ui.find(".fv__ftui-container"),a=e.fontSizeScale;o.css({transform:"scale(".concat(a,")"),width:100/a+"%"}),e.$ui.css("opacity",n.getOpacity())},e}(Wu),jl=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).name="textbox",o.$ui.removeClass("fv__pdf-page-typewritter-annot-container"),o.$handler.removeClass("fv__pdf-page-typewritter-annot-handler-container"),o.$ui.addClass("fv__pdf-page-textbox-annot-container"),o.$handler.addClass("fv__pdf-page-textbox-annot-handler-container"),o.$pre.addClass("fv__textbox_ui"),o}O()(e,t);var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this.fontSizeScale<1&&this.$handler.css("transform","scale(1)")},n.getShapeOptions=function(){var e=t.prototype.getShapeOptions.call(this);return e.resizable=!0,e},n.generateApRenderer=function(){return this.isHTMLSimulate("freetext")?new Ul(this):t.prototype.generateApRenderer.call(this)},n.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);var e=this.annot,n=xn(e.getBorderColor(),"#"),r=e.getOpacity(),i=e.getBorderWidth();return{color:n,opacity:r,fillColor:e.getFillColor(),borderWidth:i,cloudy:!0,disabled:this.propertyDisabled(),fontColor:e.getFontColor(),fontSize:e.getDefaultAppearance().textSize,borderStyle:!0}},n.setHeight=function(t,e){t[0].style.height=t[0].scrollTop+t[0].scrollHeight+"px";var n=t[0].getBoundingClientRect(),r=this.parent("pdfPageRender").getPDFRectFromClientRect(n);this.setInnerRectHeight(r)},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t}))},n.setFillColor=function(t){var e=this;return this.annot.setFillColor(t).then((function(t){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t}))},n.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n),t}))},n.setInnerRectHeight=function(t){var e,n=this,r=this.annot.getBorderInfo(),i=A()({},this.backupProperty.rect),o=this.getPadding();e=5==r.style?A()({},this.backupProperty.innerRect):{left:i.left+o,right:i.right-o,top:i.top-o,bottom:i.bottom+o};var a={left:t.left-e.left,right:t.right-e.right,top:t.top-e.top,bottom:t.bottom-e.bottom},s=0;return Math.abs(a.left)<3&&(s++,a.left=0),Math.abs(a.right)<3&&(s++,a.right=0),Math.abs(a.top)<3&&(s++,a.top=0),Math.abs(a.bottom)<3&&(s++,a.bottom=0),4==s?Promise.resolve():(i={left:i.left+a.left,right:i.right+a.right,top:i.top+a.top,bottom:i.bottom+a.bottom},e={left:e.left+a.left,right:e.right+a.right,top:e.top+a.top,bottom:e.bottom+a.bottom},this.annot.setInnerRectNoAction(t).then((function(t){return n.annot._setRect(i)})))},n.backup=function(){this.backupProperty={rect:A()({},this.annot.getRect()),innerRect:A()({},this.annot.getInnerRect())}},n.onStartUpdateShape=function(t,e,n){this.backup()},n.onShapeUpdateEnd=function(t,e,n){var r=this,i=Promise.resolve();switch(n){case"move":i=this.moveTo(t.left,t.top,n);break;case"resize":var o=this.backupProperty.rect,a=this.backupProperty.innerRect,s={left:a.left-o.left,right:o.right-a.right,bottom:a.bottom-o.bottom,top:o.top-a.top},c=this.getPDFPage().reverseDeviceRect({left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},this.scale,this.rotate),u={left:c.left-s.left,right:c.right+s.right,bottom:c.bottom-s.bottom,top:c.top+s.top};i=this.setRectInPDF(u,!1).then((function(t){return r.activeRect(),r.setInnerRect(c)})).then((function(t){r.redraw()})).finally((function(){r.pdfViewer.eventEmitter.emit(Ct.updateActiveAnnotation,r)}))}return this.annot.isGrouped()&&this.pdfViewer.eventEmitter.emit("freetextGroupMovingEnd"),i},n.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,r=this.rotate,i=t.getDeviceInnerRect(n,r),o="px";e.css({left:i.left+o,top:i.top+o,width:i.right-i.left+o,height:i.bottom-i.top+o})},n.getBoundary=function(){var t=this.annot.getDeviceInnerRect(this.scale,this.rotate),e=this.annot.getInnerRect(),n=t.right-t.left,r=t.bottom-t.top;return 8&this.annot.getFlags()&&(n=e.right-e.left,r=e.top-e.bottom),{left:t.left,top:t.top,width:n,height:r}},n.beforeBlur=function(){return!1},e}(Sl),Hl=n(352),Wl=n.n(Hl),$l="object"===("undefined"==typeof window?"undefined":_()(window))?window:"function"==typeof importScripts?self:{},Yl=$l.indexedDB||$l.mozIndexedDB||$l.webkitIndexedDB||$l.msIndexedDB,ql=$l.IDBTransaction||$l.webkitIDBTransaction||$l.msIDBTransaction,Gl={},zl=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.dbName=e,this.storeName=t,this.keyPath="id",this.version=n,this.indexArr=r}var e=t.prototype;return e._getDB=function(){var t=this,e=this.dbName,n=Gl[e];if(n)return n;var r=z(),i=Gl[e]=r.promise,o=Yl.open(e,this.version),a=this.keyPath;return o.onerror=function(t){r.reject(t)},o.onupgradeneeded=function(e){var n=e.target.result;if(!n.objectStoreNames.contains(t.storeName)){var r=n.createObjectStore(t.storeName,{keyPath:a});t.indexArr.length&&t.indexArr.forEach((function(t){var e=t.indexKey,n=t.unique,i=void 0!==n&&n;r.createIndex(e,e,{unique:i})}))}},o.onsuccess=function(t){r.resolve(t.target.result)},i},e.set=function(t,e){var n=this;return Yl?this._getDB().then((function(r){var i=n.storeName,o=n.keyPath,a=r.transaction([i],ql.READ_WRITE||"readwrite").objectStore(i),s={value:e};s[o]=t.toString();var c=a.put(s),u=z();return c.onsuccess=function(t){u.resolve()},c.onerror=function(t){u.reject(t)},u.promise})):Promise.resolve()},e.get=function(t){var e=this;return Yl?this._getDB().then((function(n){var r=z(),i=e.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var o=n.transaction([i]).objectStore(i).get(t);return o.onsuccess=function(t){var e=t.target.result;if(!e)return r.resolve();r.resolve(e.value)},o.onerror=function(t){r.reject(t)},o.oncomplete=function(t){},r.promise})):Promise.resolve(null)},e.getByIndex=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Yl&&this.indexArr.some((function(e){return e.indexKey===t}))?this._getDB().then((function(i){var o=z(),a=n.storeName;if(!i.objectStoreNames.contains(a))return o.resolve();var s=i.transaction([a]).objectStore(a).index(t).openCursor(null,"next"),c=[];return s.onsuccess=function(n){var i=n.target.result;if(i){var a=i.value[t];return r?a.toLowerCase().indexOf(e.toLowerCase())>-1&&c.push(i.value):a===e&&c.push(i.value),void i.continue()}o.resolve(c)},s.onerror=function(t){o.reject(t)},s.oncomplete=function(t){},o.promise})):Promise.resolve(null)},e.remove=function(t){var e=this;return Yl?this._getDB().then((function(n){var r=e.storeName;if(n.objectStoreNames.contains(r)){var i=n.transaction([r],ql.READ_WRITE||"readwrite").objectStore(r).delete(t),o=z();return i.onsuccess=function(t){o.resolve()},i.onerror=function(t){o.reject()},o.promise}})):Promise.resolve()},e.clear=function(){var t=this;return Yl?this._getDB().then((function(e){var n=t.storeName;if(e.objectStoreNames.contains(n)){var r=e.transaction([n],ql.READ_WRITE||"readwrite").objectStore(n).clear(),i=z();return r.onsuccess=function(t){i.resolve()},r.onerror=function(t){i.reject()},i.promise}})):Promise.resolve()},e.destroy=function(){var t=this.dbName;delete Gl[t],Yl&&Yl.deleteDatabase(t)},t}(),Kl=function(t){function e(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(r=t.call(this,e,n,i,a)||this).keyPath=o,r}O()(e,t);var n=e.prototype;return n.set=function(){throw new Error('This method is duplicated, please use "add" instead.')},n.add=function(t){var e=this;return Yl?this._getDB().then((function(n){var r=e.storeName,i=(e.keyPath,n.transaction([r],ql.READ_WRITE||"readwrite").objectStore(r).put(t)),o=z();return i.onsuccess=function(t){o.resolve()},i.onerror=function(t){o.reject(t)},o.promise})):Promise.resolve()},n.addItems=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)&&e.length&&Yl?this._getDB().then((function(n){for(var r=t.storeName,i=(t.keyPath,n.transaction([r],ql.READ_WRITE||"readwrite").objectStore(r)),o=e.length,a=[],s=function(t){var n=e[t],r=i.put(n),o=z();r.onsuccess=function(t){o.resolve()},r.onerror=function(t){o.reject(t)},a.push(o.promise)},c=0;c<o;c++)s(c);return Promise.all(a)})):Promise.resolve()},n.update=function(t,e,n){var r=this;return Yl?this.get(t).then((function(t){return t[e]=n,r.add(t)})):Promise.resolve()},n.get=function(t){var e=this;return Yl?this._getDB().then((function(n){var r=z(),i=e.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var o=n.transaction([i]).objectStore(i).get(t);return o.onsuccess=function(t){var e=t.target.result;if(!e)return r.resolve();r.resolve(e)},o.onerror=function(t){r.reject(t)},o.oncomplete=function(t){},r.promise})):Promise.resolve(null)},n.getAll=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Yl?this._getDB().then((function(r){var i=z(),o=t.storeName;if(!r.objectStoreNames.contains(o))return i.resolve();var a=r.transaction([o]).objectStore(o);if(IDBObjectStore.prototype.getAll){var s=a.getAll(e,n);return s.onsuccess=function(t){var e=t.target.result;if(!e)return i.resolve();i.resolve(e)},s.onerror=function(t){i.reject(t)},i.promise}var c=a.openCursor(e),u=[];return c.onsuccess=function(t){var e=t.target.result;e&&(u.push(e.value),void 0===n||u.length<n)?e.continue():i.resolve(u)},c.onerror=function(t){i.reject(t)},i.promise})):Promise.resolve(null)},n.getAllKeys=function(t){var e=this;return Yl?this._getDB().then((function(n){var r=z(),i=e.storeName;if(!n.objectStoreNames.contains(i))return r.resolve();var o=n.transaction([i]).objectStore(i);if(IDBObjectStore.prototype.getAllKeys){var a=o.getAllKeys(null,t);return a.onsuccess=function(t){var e=t.target.result;if(!e)return r.resolve();r.resolve(e)},a.onerror=function(t){r.reject(t)},r.promise}var s=o.openCursor(key),c=[];return s.onsuccess=function(e){var n=e.target.result;n&&(c.push(n.key),void 0===t||c.length<t)?n.continue():r.resolve(c)},s.onerror=function(t){r.reject(t)},r.promise})):Promise.resolve(null)},e}(zl);function Jl(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Xl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zl(t){return/^[\d\(\)\.\-\s]*\d+[\d\(\)\.\-\s]*$/.test(t)}function Ql(t){var e=t.getFlags();return t.getType()===Ln.Text&&!Nn.isPassword(e)&&!Nn.isHidden(e)&&!Nn.isReadOnly(e)}function th(t){return{text:t}}var eh=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.dbName="autocomplete",n=this.primaryName="text";this.db=new Kl(e,Ht.DB_PREFIX+e,1,n),this.pdfViewer=t}var e=t.prototype;return e.getFormEntries=function(){var t=this;return this.pdfViewer?this.pdfViewer.getCurrentPDFDoc().loadPDFForm().then((function(e){var n,r=[],i=e.fields,o=t.pdfViewer.getAutoCompleteSetting().rememberNumericalData,a=Jl(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(Ql(s)){var c=s.getValue();if(!o&&Zl(c))continue;r.push(th(s.getValue()))}}}catch(t){a.e(t)}finally{a.f()}return r})):Promise.resolve([])},e.getDbEntries=function(){return this.db.getAll()},e.getAllEntries=function(){var t=this;return Promise.all([this.getFormEntries(),this.getDbEntries()]).then((function(e){var n=S()(e,2),r=n[0],i=n[1];i=i||[];var o,a={},s=Jl(r=r||[]);try{for(s.s();!(o=s.n()).done;){var c=o.value;a[c[t.primaryName]]=c}}catch(t){s.e(t)}finally{s.f()}var u,d=Jl(i);try{for(d.s();!(u=d.n()).done;){var l=u.value;a[l[t.primaryName]]=l}}catch(t){d.e(t)}finally{d.f()}return Object.values(a)}))},e.saveDbEntry=function(t){!this.pdfViewer.getAutoCompleteSetting().rememberNumericalData&&Zl(t)||this.db.add(th(t))},e.clearDbEntries=function(){return this.db.clear()},e.deleteEntry=function(t){return this.db.remove(t)},t}();var nh,rh=function(t){function e(n,r){var i,o=r.bindInputEvent,a=void 0===o||o,s=r.entryGetter,c=r.entryMatcher,u=void 0===c?e.defaultMatcher:c,d=r.entrySorter,l=void 0===d?e.defaultSorter:d,h=r.parent,f=void 0===h?"body":h;return(i=t.call(this)||this).bindInputEvent=a,i.entryGetter=s,i.entryMatcher=u,i.entrySorter=l,i.isOpen=!1,i.focusIndex=0,i.$input="string"==typeof n?B()(n):n,i.parent="string"==typeof f?B()(f):f,i._initData(),i._initUI(),i._initEvent(),i}O()(e,t);var n=e.prototype;return n._initData=function(){this.entries=this.entryGetter()},n._initUI=function(){var t=this.$input.offset(),e=t.top,n=t.left,r=this.parent.offset(),i=r.top,o=r.left,a=this.$input.outerHeight(),s="top: ".concat(e-i+a,"px; left: ").concat(n-o,"px");this.$ul=B()('\n            <ul class="'.concat("fv__autocomp-ul"," ").concat("fv__autocomp-close",'" style="').concat(s,'"></ul>\n        ')),this.parent.append(this.$ul)},n._initEvent=function(){this.bindInputEvent&&(this._unbindInputEvent=this._bindInputEvent()),this._unbindUlEvent=this._bindUlEvent()},n._bindInputEvent=function(){},n._bindUlEvent=function(){var t=this,e=function(e){t.$input.val(B()(e.target).data("text")),t.emit("select"),t.close()};return this.$ul.on("click","li",e),function(){return t.$ul.off("click","li",e)}},n.evaluate=function(){var t=this;this.$ul.empty(),this.focusIndex=0;var e=this.entries;e instanceof Promise?e.then((function(e){t.entries=e,t._displayEntries(e)})):this._displayEntries(e)},n._displayEntries=function(t){if((t=this.entrySorter(this.entryMatcher(t,this.$input.val()))).length>0){var e=[];for(var n in t){var r=t[n],i=this.focusIndex==n?"active":"";e.push(B()('<li class="'.concat("fv__autocomp-li"," ").concat(i,'" data-text="').concat(r.text,'">').concat(r.text,"</li>")))}this.$ul.append(e),this.open()}else this.close()},n.open=function(){this.$ul.removeClass("fv__autocomp-close"),this.$ul.addClass("fv__autocomp-open"),this.isOpen=!0},n.close=function(){this.$ul.removeClass("fv__autocomp-open"),this.$ul.addClass("fv__autocomp-close"),this.focusIndex=0,this.isOpen=!1},n.goto=function(t){if(this.isOpen){this.$ul.children().eq(this.focusIndex).removeClass("active");var e=this.$ul.children().eq(t);e.addClass("active"),this.focusIndex=t;var n=this.$ul,r=n.height(),i=n.scrollTop(),o=e.outerHeight(),a=e.position().top-n.children().first().position().top;a+o>r+i&&n.scrollTop(a+o-r),a<i&&n.scrollTop(a)}},n.next=function(){var t=this.$ul.find("li.".concat("fv__autocomp-li")).length;if(this.isOpen&&this.entries&&0!==t){var e=(this.focusIndex+1)%t;this.goto(e)}},n.previous=function(){var t=this.$ul.find("li.".concat("fv__autocomp-li")).length;if(this.isOpen&&this.entries&&0!==t){var e=(this.focusIndex-1)%t;e<0&&(e=t-1),this.goto(e)}},n.select=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.focusIndex;this.$input.val(this.$ul.children().eq(t).data("text"))},n.destroy=function(){this._unbindInputEvent&&this._unbindInputEvent(),this._unbindUlEvent&&this._unbindUlEvent(),this.$ul.remove()},n.setMatcher=function(t){this.entryMatcher=t},e.defaultMatcher=function(t,e){return t.filter((function(t){return t.text.startsWith(e)&&e!==t.text}))},e.defaultSorter=function(t){return t},e}(tc.a),ih=["Jan","Feb","Mar","Apr","May","Jun","Ju","Aug","Sep","Oct","Nov","Dec"],oh=["January","February","March","April","May","June","July","August","September","October","November","December"],ah=function(){function t(){}return t.MakeFixed=function(t,e){return(Array(e).join("0")+t).slice(-e)},t.FormatDateTimeString=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,i=t.GetDate(e,r);n&&""!=n||(i=new Date),"Invalid Date"==i.toString()&&(i=new Date);for(var o="",a="",s=i.getFullYear(),c=i.getMonth()+1,u=i.getDate(),d=i.getHours(),l=i.getMinutes(),h=i.getSeconds(),f=0,p=0;f<n.length;){switch(a="",p=n[f]){case"y":case"m":case"d":case"H":case"h":case"M":case"s":case"t":if(n[f+1]!=p){switch(p){case"y":a+=p;break;case"m":a=c;break;case"d":a=u;break;case"H":a=d;break;case"h":a=d>12?d-12:d;break;case"M":a=l;break;case"s":a=h;break;case"t":a+=d>=12?"p":"a"}f++}else if(n[f+1]==p&&n[f+2]!=p){switch(p){case"y":a=this.MakeFixed(s-100*parseInt(s/100),2);break;case"m":a=this.MakeFixed(c,2);break;case"d":a=this.MakeFixed(u,2);break;case"H":a=this.MakeFixed(d,2);break;case"h":a=this.MakeFixed(d>12?d-12:d,2);break;case"M":a=this.MakeFixed(l,2);break;case"s":a=this.MakeFixed(h,2);break;case"t":a=d>=12?"pm":"am"}f+=2}else if(n[f+1]==p&&n[f+2]==p&&n[f+3]!=p)switch(p){case"m":f+=3,a+=ih[c-1];break;default:f+=3,a+=p,a+=p,a+=p}else if(n[f+1]==p&&n[f+2]==p&&n[f+3]==p&&n[f+4]!=p)switch(p){case"y":a=s,f+=4;break;case"m":f+=4,a+=oh[c-1];break;default:f+=4,a+=p,a+=p,a+=p,a+=p}else f++,a+=p;break;default:f++,a+=p}o+=a}return o},t.GetDate=function(t,e,n){e=(e=(e=e.replace("MM","ii")).replace("M","i")).toLowerCase();for(var r=new Date(t),i=new Date,o=i.getFullYear(),a=i.getMonth(),s=i.getDate(),c=0,u=0;u<e.length&&c<t.length;){switch(e[u]){case"y":for(var d="";"0"<=t[c]&&t[c]<="9";)d+=t[c],c++;for(;"y"==e[u];)u++;switch(d.length){case 2:d="20"+d}o=parseInt(d);break;case"m":var l="";if("A"<=t[c]&&t[c]<="Z")for(;c<t.length&&t[c].match(/[a-zA-Z]/);)l+=t[c],c++;else for(;"0"<=t[c]&&t[c]<="9";)l+=t[c],c++;for(;"m"==e[u];)u++;switch(l.length){case 1:case 2:a=parseInt(l)-1;break;case 3:a=ih.indexOf(l);break;case 4:a=oh.indexOf(l)}break;case"d":for(var h="";"0"<=t[c]&&t[c]<="9";)h+=t[c],c++;for(;"d"==e[u];)u++;s=parseInt(h);break;case"i":for(var f="";"0"<=t[c]&&t[c]<="9";)f+=t[c],c++;for(;"i"==e[u];)u++;i.setMinutes(parseInt(f));break;case"h":for(var p="";"0"<=t[c]&&t[c]<="9";)p+=t[c],c++;for(;"h"==e[u];)u++;i.setHours(parseInt(p));break;case"s":for(var g="";"0"<=t[c]&&t[c]<="9";)g+=t[c],c++;for(;"s"==e[u];)u++;i.setSeconds(parseInt(g));break;case"t":for(var v="";t[c]&&t[c].match(/[AaPpMm]/);)v+=t[c],c++;for(;"t"==e[u];)u++;if("pm"==v.toLowerCase()){var m=i.getHours();m<12&&(m+=12),i.setHours(m)}else{12==i.getHours()&&i.setHours(0)}break;default:c++,u++}}1==a&&29==s&&o%4!=0&&(o&=4294967292),i.setFullYear(o),i.setMonth(a),i.setDate(s);var y=new Date;return Math.abs(r.getFullYear()-y.getFullYear())<Math.abs(i.getFullYear()-y.getFullYear())||Math.abs(r.getMonth()-y.getMonth())<Math.abs(i.getMonth()-y.getMonth())||Math.abs(r.getDate()-y.getDate())<Math.abs(i.getDate()-y.getDate())?r:i},t.getMonth=function(t,e){switch(e){case"m":return t;case"F":return oh[t];case"M":return ih[t]}},t.switchFormat=function(t,e){return"toLib"==e?t.replace("yyyy","Y").replace("yy","y").replace("dd","d").replace("HH","H").replace("hh","h").replace("MM","i").replace("M","i").replace("mmmm","F").replace("mmm","M").replace("mm","m").replace("ss","S").replace("tt","K"):t.replace("Y","yyyy").replace("y","yy").replace("d","dd").replace("H","HH").replace("h","hh").replace("i","MM").replace("F","mmmm").replace("M","mmm").replace("m","mm").replace("S","ss").replace("K","tt")},t}(),sh=n(209),ch=n.n(sh),uh=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).engineForm=o.parent("pdfDocRender").doc.getPDFForm(),o.$ui.addClass("form_text_field"),e.setRenderNotifier((function(t){return o.updateUI(t)})),o.defaultEvnet=!1,o.mousewheel(),o.generateHandler(1)&&o.bindInputEvent(),o.isOnFocus=!1,o}O()(e,t);var n=e.prototype;return n.genLabelUI=function(){arguments.length>1&&void 0!==arguments[1]||this.rotate;var t=this.annot,e=t.getField();if(!e)return!1;var n=ch()();return this.$foreground.after(B()(n)),!0},n.mousewheel=function(){var t=this,e=this.parent("pdfViewerRender");this.disposor.addDestroyHook(e.scrollWrap.addScrollEventListener((function(){var e=t.formRender.dt;e&&e._positionCalendar&&t.isActive&&e.isOpen&&e._positionCalendar(t.$handler.get(0))})))},n.updateOnPermissionChange=function(){if(this.$textInput){t.prototype.updateOnPermissionChange.call(this);var e=this.checkReadOnly();this.$textInput[0].readOnly=e}},n.destroy=function(){this.$textInput.off("change keydown keyup blur dblclick input"),this.$input.remove(),this.$input=null,this.$textInput=null,t.prototype.destroy.call(this),this.engineForm=null,this.destroyAutocomplete()},n.generateHandler=function(t){var e=this.annot,n=e.getField();if(!n)return!1;var r=90*(4-this.annot.getRotation()+e.getPage().getRotation()),i=this.checkReadOnly(),o=4*e.getBorderWidth()/3*t,a=Cn(e.getMKProperty("borderColor")),s=Cn(e.getMKProperty("fillColor"));this.$handler.css("background-color",s);var c=e.getAlignment(),u=Nn.isMultiline(n.getFlags()),d=Nn.isPassword(n.getFlags()),l=Nn.isNoScroll(n.getFlags()),h=Nn.isNoSpellCheck(n.getFlags()),f=Nn.isComb(n.getFlags())&&n.getMaxLength()>0,p=!this.checkInvisible(),g=xn(16777215&e.getDAFontColor(),"#"),v=this.getFontSize(n,e);v?v+="px":v=u?"16px":"xx-large";var m=n.getValue(),y=Wl()({borderWidth:o,borderColor:a,background:"transparent",isSafari:Nt.isSafari,isMultiline:u,isPassword:d,isNoScroll:l,isNoSpellCheck:h,comb:f,readonly:i,align:c,value:m,maxLength:n.getMaxLength(),visible:p,color:g,fontSize:v,rotation:r+this.rotate,left:"0",top:"0",width:"100%",height:"100%"}),w=this.$input=B()(y),b=this.$textInput=w.find("input");if(0==b.length&&(b=this.$textInput=w.find("textarea")),this.$foreground.before(w),f&&b.hide(),this.formRender.usingHTML(6)){this.$input.hide();var A=this.annotsRender.pageRender;this.render(A.getScale(),A.getRotation())}else this.$input.css("visibility","hidden");return!0},n.getFontSize=function(t,e){var n=e.getDefaultAppearance(),r=t.getDAFontSize();return n&&n.textSize&&(r=n.textSize),4*r/3},n.updateSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.render(t,e,n)},n.render=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.annot)return Promise.resolve();var o=this.annot,a=o.getField();this.scale=n,this.rotate=r;var s=this.updateForgroundAndHandler(n,r);if(a){var c=this.getFontSize(a,o)*n;if(c)c+="px";else if(Nn.isMultiline(a.getFlags()))c=16*n+"px";else{clearTimeout(this.autoFontSizeTimeout);var u=this;this.autoFontSizeTimeout=setTimeout((function(){u.annot&&u.formRender&&(u.autoFontSize(),u.formRender.usingHTML(6)&&u.$input.show())}),20)}var d,l,h=((this.getPDFPage().getRotationAngle()+r-90*o.getRotation())%360+360)%360,f="center";switch(h){case 90:case 270:d=s.height,l=s.width,f=270===h?"".concat(d/2,"px ").concat(d/2,"px"):"".concat(l/2,"px");break;default:d=s.width,l=s.height}var p=Nn.isComb(a.getFlags())&&a.getMaxLength()>0;p&&this.$input.find(".textComb").css({width:s.width/a.getMaxLength(),height:s.height,"line-height":s.height+"px",fontSize:c});var g=4*o.getBorderWidth()/3*n,v={"font-size":c,"border-width":g+"px",transform:"rotate(".concat(h,"deg)"),"transform-origin":f,width:d+"px",height:l+"px","line-height":Nn.isMultiline(a.getFlags())?"1":l-2*g+"px"};this.$input.show(),this.$textInput.css(v)}return this.formRender.usingHTML(6)?Promise.resolve():t.prototype.render.call(this,n,r,i).then((function(t){var n=e.annot&&e.annot.getField();if(n){var r=n.getDisplayValue();r&&n.showDisplayValue(r)}}))},n.focus=function(t){var e=this;this.hasFocus=!0,this.$handler.find(".fv__tiles-row").hide(),this.$input.css("visibility","visible");var n=this.annot.getField(),r=this.$textInput;t||(this.lastAvailableValue=n.getValue()),this.isOnFocus=!0,setTimeout((function(){e.$foreground.hide(),e.isOnFocus=!1,document.activeElement!=r[0]&&r[0].focus()}),50),this.$input.find(".textCombContainer").hide(),r.show();var i,o=n.getAction(Zi.FieldWillFormat),a=this.getDateTimeFormat();if(a&&(0==(a=ah.switchFormat(a,"toLib")).length&&(a="m-d-y"),this.formRender.showDateTimePicker(r.val(),a,r[0],(function(t,n,i){r.val(n),e.valueChanged=!0}))),"basic"===this.pdfViewer.getAutoCompleteSetting().level&&Ql(n)&&!this.isDate){var s=new eh(this.pdfViewer),c=n.getMaxLength(),u=this.$autocomplete=new rh(this.$textInput,{entryGetter:s.getAllEntries.bind(s),parent:this.parent("pdfPageRender").$annotsContainer});c&&u.setMatcher((i=c,function(t,e){return t.filter((function(t){var n=t.text;return n.startsWith(e)&&n!==e&&n.length<=i}))})),u.on("select",(function(){e.valueChanged=!0,e.formRender.blurControl()}))}n&&r.val(n.getValue()||""),o=this.annot.getAdditionalAction(Zi.AnnotReceiveInputFocus);try{return o&&this.formRender.execAction("Field",o,null,n)}finally{this.isActive=!0,this.pdfViewer.eventEmitter.emit(Ct.focusInObject,this)}},n.handleEvent=function(t,e){if(!this.$ui.hasClass("selected")&&!this.$ui.hasClass("editing")){0;var n=this.formRender;if(this.checkReadOnly()||this.checkInvisible())t!=Zi.AnnotMouseButtonReleased&&t!=Zi.AnnotReceiveInputFocus||n.blurControl();else{switch(t){case Zi.AnnotMouseButtonPressed:n.focusControl(this);break;case Zi.AnnotMouseButtonReleased:if(!n.isSameTarget(this))return;var r=this.annot.action;r&&n.execAction("Field",r,null,this.annot.getField());var i=this.$textInput;setTimeout((function(){document.activeElement!=i[0]&&i.focus()}),50),this.$input.find(".textCombContainer").hide(),i.show(),this.getDateTimeFormat()&&this.formRender.reshowDTPicker(i[0])}this.performAction(t)}}},n.bindInputEvent=function(){var t=this;this.$textInput.on("keydown",(function(e){27==e.keyCode&&e.preventDefault();var n=t.$autocomplete;n&&(38===e.keyCode&&n.isOpen&&(n.previous(),e.preventDefault()),40===e.keyCode&&(n.isOpen?n.next():n.evaluate(),e.preventDefault()),13===e.keyCode&&n.isOpen&&(n.select(),e.preventDefault(),e.stopPropagation()))})).on("keyup",(function(e){if(co(e,lo.Escape)&&e.preventDefault(),!t.checkReadOnly())if(t.valueChanged=!0,setTimeout((function(){t.autoFontSize(t.$textInput.val())}),0),co(e,lo.Enter)){var n=t.annot.getField();!Nn.isMultiline(n.getFlags())&&t.blur()}else if(!co(e,lo.Tab)){var r=t.formRender.dt;r&&(r._inputTemp||(r._inputTemp=r._input),delete r._input,r.close())}})).on("dblclick",(function(e){t.$autocomplete&&t.$autocomplete.evaluate()})).on("input",(function(e){t.$autocomplete&&(e.target.value.length>0?t.$autocomplete.evaluate():t.$autocomplete.close())})).on("blur",(function(e){t.getDateTimeFormat()||t.$autocomplete||t.formRender.blurControl()}))},n.updateUIMore=function(e){var n=this,r=e.type,i=e.value,o=this.annot,a=this.$input,s=this.$textInput,c=o.getField();if(c){var u=Promise.resolve();switch(r){case"value":var d=c.getAction(Zi.FieldWillFormat),l=c.getAction(Zi.FieldValueChanged);if(c.NeedExecuteValidateAction&&0!=c.getValue().length&&l)if(!this.formRender.execAction("Field",l,null,c,Zi.FieldValueChanged).rc){c.setValue(this.lastAvailableValue,this.annot),this.valueChange(!1,c);break}u.then((function(t){if(0!=c.getValue().length&&d&&n.formRender){var e=n.formRender.execAction("Field",d,null,c,Zi.FieldWillFormat);e&&-1!==e&&!e.rc&&(c.setValue(n.lastAvailableValue,n.annot),n.valueChange(!1,c))}0===c.getValue().length&&c.setDisplayValue(i)}));break;case"displayValue":if(Nn.isComb(c.getFlags())&&c.getMaxLength()>0){var h=c.getMaxLength();switch(c.getAlignment()){default:for(var f=0;f<i.length;f++)a.find(".textComb[data-index=".concat(f,"]")).html(i[f]);for(var p=i.length;p<h;p++)a.find(".textComb[data-index=".concat(p,"]")).html("");break;case 2:var g=a.find(".textComb").length,v=i.length,m=g-i.length-1,y=0;m<-1&&(m=-1),i.length>g&&(y=i.length-g);for(var w=g-1;w>m;w--)a.find(".textComb[data-index=".concat(w,"]")).html(i[w-g+v-y]);for(var b=m;b>-1;b--)a.find(".textComb[data-index=".concat(b,"]")).html("")}}u=c.setDisplayValue(i),s.val(i);break;case"align":s.css("text-align",i);break;case"borderStyle":s.css("border-style",i);break;case"borderColor":i=Cn(i),a.find(".textComb").css("border-color",i),s.css("border-color",i);break;case"maxLength":void 0===i?s.removeAttr("maxlength"):(s.attr("maxlength",i),s.val(s.val().substr(0,i)));break;case"noSpellCheck":s.prop("spellcheck",!i);break;case"noScroll":case"comb":case"multiline":case"lineSpace":a.remove(),this.generateHandler(this.scale),this.bindInputEvent(),this.isActive&&this.focus(),this.render(this.scale,this.rotate,!0);break;case"fillColor":this.$handler.css("background-color",Cn(i));break;case"password":s.attr("type",i?"password":"text");break;case"readonly":i?(this.$foreground.addClass("form-field-readonly").css("visibility","hidden"),s.attr("readonly",!0)):(this.checkReadOnly()||this.checkInvisible()||this.$foreground.removeClass("form-field-readonly").css("visibility","visible"),s.removeAttr("readonly"));var A=Cn(o.getMKProperty("fillColor"));i&&(A="transparent"),s.css("background-color",A);break;case"hidden":var P=this.$handler;i?P.hide():P.show();break;case"textColor":s.css("color",i)}this.formRender.usingHTML(6)||u.then((function(e){return n.annot&&t.prototype.render.call(n,n.scale,n.rotate,!0)}))}},n.blur=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hasFocus=!1;var n=this.$textInput;setTimeout((function(){t.destroyAutocomplete()}),0),this.isActive=!1,this.formRender.usingHTML(6)||this.$input.css("visibility","hidden"),this.$handler.find(".fv__tiles-row").show();try{return this.setValue(n.val(),e)}finally{this.pdfViewer.eventEmitter.emit(Ct.blurFromObject,this,e)}},n.setValue=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.annot,i=r.getField();i.setValueWithoutAction(t),t===this.lastAvailableValue&&(this.valueChanged=!1);var o=!1,a=i.getAction(Zi.FieldKeyStroke);return this.valueChanged&&a&&-1!==(e=this.formRender.execAction("Field",a,null,i,Zi.FieldKeyStroke,{change:t,willCommit:!0}))&&(e.rc?(void 0!==e.change&&null!==e.change||(e.change=t),i.setValueWithoutAction(e.change)):(o=!0,t=this.lastAvailableValue)),o?(i.setValue(this.lastAvailableValue,this.annot),this.valueChange(o,i,n)):(a=i.getAction(Zi.FieldValueChanged),this.valueChanged&&a&&-1!==(e=this.formRender.execAction("Field",a,null,i,Zi.FieldValueChanged))&&(e.rc?(void 0===e.value&&(e.value=t),i.setValueWithoutAction(e.value)):o=!0),o?i.setValue(this.lastAvailableValue,this.annot):this.valueChanged?i.syncValue(i.getValue()):(a=i.getAction(Zi.FieldWillFormat),(e=i.getValue()&&a&&this.formRender.execAction("Field",a,null,i,Zi.FieldWillFormat))&&!e.rc?(i.setValue(this.lastAvailableValue,this.annot),this.valueChange(!1,i,n)):this.valueChanged&&i.syncValue(i.getValue())),this.valueChange(o,i,n))},n.valueChange=function(e,n,r){return this.valueChanged&&!e&&this.formRender.calculate(n),this.valueChanged=!1,!e&&"basic"===this.pdfViewer.getAutoCompleteSetting().level&&Ql(n)&&new eh(this.pdfViewer).saveDbEntry(n.getValue()),n&&Nn.isComb(n.getFlags())&&n.getMaxLength()>0&&(this.$textInput.hide(),this.$input.find(".textCombContainer").show()),t.prototype.blur.call(this,r),e},n.isComb=function(){var t=this.annot.getField();return Nn.isComb(t.getFlags())&&t.getMaxLength()>0},n.destroyAutocomplete=function(){this.$autocomplete&&this.$autocomplete.destroy(),this.$autocomplete=null},n.getDateTimeFormat=function(){var t=this.annot.getField().getAction(Zi.FieldWillFormat);if(t&&t.getScript){var e,n=t.getScript();if(-1!==n.indexOf("AFDate_Format")){e=/AFDate_Format(?:Ex)?\("([\s\S]*?)"\)/;var r=n.match(e);if(r&&2==r.length)return r[1].trim()}else if(-1!==n.indexOf("AFTime_Format")){e=/AFTime_Format(?:Ex)?\(([\s\S]*?)\)/;var i=n.match(e);if(i&&2==i.length)return dh[i[1]]||i[1].replace(/"/g,"")}}},e}(Pa),dh=["HH:MM","h:MM tt","HH:MM:ss","h:MM:ss tt"],lh=uh,hh=n(353),fh=n.n(hh),ph=function(t){return String(t).replace(/[<>&"]/g,(function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[t]}))},gh=function(t){return String(t).replace(/[<>&"\s]/g,(function(t){return{" ":"&nbsp;","<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[t]}))},vh=function(t){return String(t).replace(/([!\"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")},mh=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).engineForm=o.parent("pdfDocRender").doc.getPDFForm(),o.$ui.addClass("form_listbox_field"),e.setRenderNotifier((function(t){return o.updateUI(t)})),o.generateHandler(1),o}O()(e,t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.$input.remove(),this.engineForm=null},n.render=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;this.scale=t,this.rotate=e,this.updateForgroundAndHandler(t,e);var n=this.annot.getField(),r=n.getDAFontSize()*t*4/3;r||(r=16*t),r+="px";var i=4*this.annot.getBorderWidth()/3*t;this.$input.css({"font-size":r,"border-width":i+"px"});var o,a,s=this.getRect(t,e),c=s.right-s.left,u=s.bottom-s.top,d=((this.getPDFPage().getRotationAngle()+e-90*this.annot.getRotation())%360+360)%360,l="center";switch(d){case 90:case 270:o=u,a=c,l=270===d?"".concat(o/2,"px ").concat(o/2,"px"):"".concat(a/2,"px");break;default:o=c,a=u}this.$input.css({width:o-1,height:a,transform:"rotate(".concat(d,"deg)"),"transform-origin":l});var h=this.$input.find(".selected");!this.scrollSet&&h.length>0&&(this.scrollSet=!0,this.$input[0].scrollTop=h[0].offsetTop)},n.generateHandler=function(t){var e=this.annot.getField();if(e){var n=this.checkReadOnly(),r=4*this.annot.getBorderWidth()/3*t,i=Cn(this.annot.getMKProperty("borderColor")),o=Cn(this.annot.getMKProperty("fillColor")),a=e.getAlignment(),s=e.getOptions(),c=e.getOptions(),u=e.getValue();c.map((function(t){"object"==_()(t)&&u===t.value&&(u=t.label)}));var d=xn(16777215&(this.annot.getDefaultAppearance()||{}).textColor,"#"),l=4*e.getDAFontSize()/3;l?l+="px":l="12px";var h={0:"solid",1:"dashed",2:"underline",3:"beveled",4:"inset"}[this.annot.getBorderStyle()||"solid"],f=fh()({borderWidth:r,borderColor:i,background:o,options:s,align:a,readonly:n,value:u,color:d,fontSize:l,borderStyle:h});this.checkInvisible()&&this.$handler.hide();var p=this.$input=B()(f);this.$handler.append(p)}},n.focus=function(){t.prototype.focus.call(this),this.lastAvailableValue=this.annot.getField().getValue()},n.handleEvent=function(t,e){var n=this,r=this.formRender,i=this.annot;if(this.checkReadOnly())t!=Zi.AnnotMouseButtonReleased&&t!=Zi.AnnotReceiveInputFocus||r.blurControl();else{var o=i.getField();if(o){switch(t){case Zi.AnnotMouseButtonPressed:r.focusControl(this);break;case Zi.AnnotMouseButtonReleased:if(B()(e.target).hasClass("form-field-option")){var a=B()(e.target).index(),s=Nn.isChoiceMultiSelect(o.getFlags())&&(Vt.isMac?$t.isWinDown:$t.isCtrlDown),c=o.getOptions(),u=c[a];s?u.selected?u.selected=!1:u.selected=!0:(c.forEach((function(t){return t.selected=!1})),u.selected=!0);var d=c.reduce((function(t,e){return e.selected&&t.push(e.value),t}),[]);s||(d=d[0]),o.setValueWithoutAction(""),r.setValue(i,d).then((function(t){o.setOptions(c,!0),n.lastAvailableValue=d}))}setTimeout((function(){var t=i.action;r.execAction("Field",t,null,i.getField())}),0)}this.performAction(t)}}},n.updateUIMore=function(t){var e=this,n=t.type,r=t.value,i=this.$input,o=this.annot.getField(),a=Promise.resolve(),s=!1;switch(n){case"value":o.setValueEx(r,null,!1);var c=i.find(".form-field-option");o.getOptions().forEach((function(t,e){B()(c.get(e)).toggleClass("selected",t.selected)}));break;case"align":i.css("text-align",r);break;case"borderStyle":i.css("border-style",r);break;case"clearItems":this.updateUIMore({type:"value",value:o.getValue()}),i.find(".form-field-option").remove(),s=!0;break;case"deleteItems":this.updateUIMore({type:"value",value:o.getValue()}),i.find(".form-field-option:nth-child("+(r+1)+")").remove(),this.updateUIMore({type:"value",value:o.getValue()}),s=!0;break;case"insertItemAt":var u=this.annot.getField().getOptions()[r],d='<div class="form-field-option" data-val="'.concat(u.value,'" data-index="').concat(r,'" style="white-space: nowrap; overflow-x: hidden;">').concat(ph(u.label||""),"</div>");i.children().length<=r?i.append(d):i.find(".form-field-option:nth-child("+(r+1)+")").before(d),this.updateUIMore({type:"value",value:o.getValue()}),s=!0;break;case"borderColor":i.css("border-color",Cn(r));break;case"fillColor":i.css("background-color",Cn(r));break;case"setItems":var l=this.annot.getField().getOptions().map((function(t){return'<div class="form-field-option '.concat(t.selected?"selected":"",'" data-val="').concat(t.value,'" data-index="').concat(r,'" style="white-space: nowrap; overflow-x: hidden;">').concat(ph(t.label||""),"</div>")}));i.find(".form-field-option").remove(),i.append(l.join("")),s=!0;break;case"textColor":i.find(".form-field-option").css("color",Cn(r));break;case"choiceMultiSelect":break;case"DA":var h=this.scale,f=this.annot.getControl().getDefaultAppearance().textSize*h*4/3;f||(f=16*h),f+="px",this.$input.find(".form-field-option").css({"font-size":f})}if(s){var p=this.$input.find(".selected");p.length>0&&(this.scrollSet=!0,this.$input[0].scrollTop=p[0].offsetTop)}this.formRender.usingHTML(Ln.ListBox)||a.then((function(t){return e.annot&&e.render(e.scale,e.rotate,!0)}))},e}(Pa),yh=n(354),wh=n.n(yh),bh=n(244),Ah=n.n(bh),Ph=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).engineForm=o.parent("pdfDocRender").doc.getPDFForm(),o.$handler.addClass("fv_combobox_field"),o.available=!0,o.genDropDownUI(1),o.genLabelUI(),o.bindDropDownUIEvent(),o}O()(e,t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.$optionsList&&(this.$optionsList.off("click"),this.$optionsList.remove()),this.engineForm=null,this.$optionsList=null},n.render=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;if(this.annot&&(this.scale=n,this.rotate=r,this.available)){var i=this.updateForgroundAndHandler(n,r),o=(i.width,i.height);i.left<1&&(i.left=1);var a=this.annotsRender.pageRender.getShowHeight(),s=this.annotsRender.pageRender.getShowWidth(),c=this.annot.getDirectionRTL(),u=1===c?"right":"left";this.$optionsList.css({"text-align":u,"font-size":"16px","overflow-y":"auto"});var d=4*this.annot.getBorderWidth()/3*n,l=this.annot.getField();if(!l)return!1;var h,f,p,g,v,m,y=this.getRect(n,r),w=y.right-y.left,b=y.bottom-y.top,A=200,P=((this.getPDFPage().getRotationAngle()+r-90*this.annot.getRotation())%360+360)%360;switch(P){case 270:h=w,g=p="".concat((f=b)/2,"px ").concat(f/2,"px"),m=y.left+h,v=y.top,A+m>=s&&(A=s-m-1);break;case 90:f=b,p="".concat((h=w)/2,"px"),g="".concat(h/2,"px -").concat(h/2,"px"),m=y.left,v=y.top+h,m-A<=0&&(A=m-1);break;case 180:f=w,h=b,p="center",g="center top",m=y.left,(v=y.top)-A<=0&&(A=v-1);break;default:f=w,h=b,p="center",g="center",v=y.top+h,m=y.left,A+v>=a&&(A=a-v)}var E=4*l.getDAFontSize()/3,x={"text-align":u,"font-size":E=(E?2*E:.7*h)+"px","border-width":d+"px",padding:d+"px",height:h+"px",width:f+"px",transform:"rotate(".concat(P,"deg)"),"transform-origin":p},S=.3*o>20?20:.3*o;i.width<S+10?x.opacity=0:x.opacity=1,this.$textInput.css(x),this.formRender.usingHTML(Ln.ComboBox)&&this.$handler.css({left:y.left,top:y.top,width:f,height:h,transform:"rotate(".concat(P,"deg)"),"transform-origin":p}),this.$optionsList.css({top:v,left:m,width:f,maxHeight:A,transform:"rotate(".concat(P,"deg)"),"transform-origin":g}),this.$handler.find(".fwr__ui-combo-dropdown").css({"border-width":"".concat(S,"px ").concat(.6*S,"px 0"),top:"".concat((h-S)/2,"px")}),this.arrowRender(d,f,h,P),!E&&this.formRender.usingHTML(Ln.ComboBox)?(clearTimeout(this.autoFontSizeTimeout),this.autoFontSizeTimeout=setTimeout((function(){e.autoFontSize(e.$textInput.val(),2*S)}),200)):E+="px",this.formRender.usingHTML(Ln.ComboBox)||t.prototype.render.call(this,n,r).then((function(t){var n=e.annot&&e.annot.getField();if(n){var r=n.getDisplayValue();r&&n.showDisplayValue(r)}}))}},n.arrowRender=function(t,e,n,r){var i,o,a,s,c=this.annot.getDirectionRTL();switch(r){case 90:a=n-3*t,i=1===c?-(20-t):a+t,o=e-n+t,s="100% 100%";break;case 180:a=n-2*t,i=1===c?t:e-t-20,o=t,s="50% 50%";break;case 270:a=n-2*t,i=1===c?a+t:-(20-t),o=-(n+2*t-30),s="0 100%";break;default:a=n-2*t,i=1===c?e-t-20:t,o=t,s="0 0"}this.$arrow.css({right:i,top:o,height:a,width:20*this.scale,"max-width":20,transform:"rotate(".concat(r,"deg)"),"transform-origin":s}),this.$arrow.find(">span").css({transform:"scale(".concat(Math.min(this.scale,1),")"),"transform-origin":"-36% 0"})},n.handleEvent=function(t,e){if(this.checkReadOnly())t!=Zi.AnnotMouseButtonReleased&&t!=Zi.AnnotReceiveInputFocus||this.formRender.blurControl();else{switch(t){case Zi.AnnotMouseButtonPressed:this.optionsMounted=this.optionsMounted||this.$handler.after(this.$optionsList),this.$optionsList.show(),this.formRender.focusControl(this);break;case Zi.AnnotMouseButtonReleased:B()(e.target).hasClass("form-field-option")&&(e.stopPropagation(),this.$optionsList.hide())}this.performAction(t)}},n.genDropDownUI=function(t){var e=this.annot,n=this.annot.getField();if(n){var r=4*e.getBorderWidth()/3*t,i=e.getMKProperty("borderColor"),o=xn(i,"#");0===i&&(o="gray");var a=e.getMKProperty("fillColor"),s=xn(a,"#");0===a&&(s="white");var c=n.getOptions(),u=n.getValue(),d=wh()({borderWidth:r,borderColorHex:o,fillColorHex:s,background:"white",options:c,value:u});this.$optionsList=B()(d),this.$optionsList.hide()}else this.available=!1},n.bindDropDownUIEvent=function(){var t=this;if(this.available){var e=this.formRender,n=this.annot;this.$optionsList.on("click",(function(r){var i=n.getField(),o=i.getOptions();if(B()(r.target).hasClass("form-field-option")){var a=B()(r.target).data("val")+"";if(r.stopPropagation(),t.$optionsList.hide(),t.$optionsList.find(".selected").removeClass("selected"),B()(r.target).addClass("selected"),!i)return;o.forEach((function(t){t.selected=!1}));var s=B()(r.target).index();if(o[s].selected=!0,i.getFlags()&Nn.CommitOnSelChange){if(i.getValue()===a)return;e.setValue(n,a,!1)}else t.$textInput.css("visibility","visible"),t.$handler.find(".fv__tiles-row").hide(),s<o.length&&(a=o[s].label),t.$textInput.val(a),t.$textInput.focus()}setTimeout((function(){var t=n.action;e.execAction("Field",t,null,n.getField())}),150)}))}},n.blur=function(){var e=this;this.hasFocus=!1,this.formRender.usingHTML(Ln.ComboBox)||this.$input.css("visibility","hidden"),this.$arrow.css("visibility","visible");var n=this.formRender,r=this.annot;this.$optionsList.hide();var i=z();if(this.$textInput.length>0){var o=this.$textInput.val();setTimeout((function(){var t=r.getField();if(t){var a=o,s=t.getFlags();if(!(Nn.ComboEdit&s))t.getOptions().forEach((function(t){t.label==o&&(a=t.value)}));n.setValue(r,a).then((function(){e.$handler.find(".fv__tiles-row").show(),i.resolve(!1)}))}}),0)}return t.prototype.blur.call(this),i.promise},n.focus=function(){var e=this;t.prototype.focus.call(this);var n=this.annot.getField();if(n){var r=n.getValue(),i=r;n.getOptions().forEach((function(t){r==t.value+""&&(i=t.label)})),this.$textInput.val(i),setTimeout((function(){Nn.isComboEdit(n.getFlags())?(e.$textInput.css("visibility","visible").prop("readonly",!1),e.$handler.find(".fv__tiles-row").hide(),e.$textInput.focus()):(e.$textInput.css("visibility","hidden").prop("readonly",!0),e.$handler.find(".fv__tiles-row").show())}),10)}},n.genLabelUI=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.annot,r=n.getField();if(!r)return!1;var i=Ah()(this.getStyle(t,e)),o=this.$input=B()(i);return this.$foreground.after(o),this.$textInput=this.$handler.find("input"),this.formRender.usingHTML(Ln.ComboBox)||this.$input.css("visibility","hidden"),this.$arrow=this.$handler.find(".fwr__ui-combo-arrow"),this.$arrow.css("visibility","visible"),!0},n.updateUIMore=function(e){var n=this,r=e.type,i=e.value,o=this.$textInput,a=this.$optionsList,s=this.annot.getField();if(s&&2!=(2&this.annot.info.flag)){var c=1===this.annot.getDirectionRTL()?"right":"left",u=Promise.resolve();switch(r){case"value":u.then((function(t){var e=s.getAction(Zi.FieldWillFormat);if(0!=s.getValue().length&&e)n.formRender.execAction("Field",e,null,s,Zi.FieldWillFormat);0===s.getValue().length&&s.setDisplayValue(i)})),o.val(i),a.find(".selected").removeClass("selected"),a.find(".form-field-option").each((function(t,e){B()(e).css("text-align",c),B()(e).attr("data-val")===i&&B()(e).addClass("selected")}));break;case"displayValue":u=s.setDisplayValue(i),o.val(i);break;case"align":o.css("text-align",i),a.css("text-align",i),this.render(this.scale,this.rotate,!0);break;case"borderStyle":o.css("border-style",i);break;case"borderColor":o.css("border-color",Cn(i));break;case"borderWidth":case"orientation":this.render(this.scale,this.rotate,!0);break;case"fillColor":this.$input.find(".textCombContainer").css("background-color",Cn(i)),o.css("background-color",Cn(i));break;case"readonly":i?(this.$foreground.hide().addClass("form-field-readonly").css("visibility","hidden"),o.attr("readonly",!0)):(this.$foreground.show().removeClass("form-field-readonly").css("visibility","visible"),o.removeAttr("readonly"));break;case"clearItems":a.find(".form-field-option").remove(),this.updateUIMore({type:"value",value:s.getValue()});break;case"deleteItems":a.find(".form-field-option:nth-child("+(i+1)+")").remove(),this.updateUIMore({type:"value",value:s.getValue()});break;case"insertItemAt":var d=this.annot.getField().getOptions(),l="";d.forEach((function(t,e){l+='<div class="form-field-option '.concat(t.selected?"selected":"",'" data-val="').concat(t.value,'" data-index="').concat(e,'" style="white-space: nowrap; overflow-x: hidden;">').concat(ph(t.label||""),"</div>")})),a.empty().append(l),this.updateUIMore({type:"value",value:s.getValue()});break;case"setItems":var h=this.annot.getField().getOptions().map((function(t){return'<div class="form-field-option '.concat(t.selected?"selected":"",'" data-val="').concat(t.value,'" data-index="').concat(i,'" style="white-space: nowrap; overflow-x: hidden;">').concat(ph(t.label||""),"</div>")}));a.find(".form-field-option").remove(),a.append(h.join(""));break;case"rect":this.render(this.scale,this.rotate,!0)}this.formRender.usingHTML(Ln.ComboBox)||u.then((function(e){return t.prototype.render.call(n,n.scale,n.rotate,!0)}))}},n.getStyle=function(t,e){var n=this.annot,r=n.getField();if(!r)return!1;var i=this.checkReadOnly(),o=4*n.getBorderWidth()/3*t,a=Cn(n.getMKProperty("borderColor")),s=Cn(n.getMKProperty("fillColor")),c=r.getAlignment(),u=!this.checkInvisible(),d=xn(16777215&r.getDAFontColor(),"#"),l=4*r.getDAFontSize()/3;l=(l?2*l:16)+"px";var h=Nn.isComboEdit(r.getFlags()),f=r.getOptions(),p=r.getValue();return f.map((function(t){"object"==_()(t)&&p===t.value&&(p=t.label)})),{comboEditable:h,borderWidth:o,borderColor:a,background:s,readonly:i,align:c,value:p,maxLength:r.getMaxLength(),visible:u,color:d,fontSize:l,width:"100%",height:"100%"}},n.updateSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;return this.render(t,e)},e}(Pa),Eh={sign:{name:"Sign",nameI18nKey:"viewer_:contextmenu.annot.sign",callback:function(t,e,n,r){this.data("annotComponent").sign(t,e,n,r)},show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n,r){this.data("annotComponent").showPropertiesDialog(t,e,n,r)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};var xh,Sh=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:Eh,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),Ch=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).$esignChinaContainer=null,o.genLabelUI(),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return Sh},e.setContextMenuConfig=function(t){nh=t},e.getContextMenuConfig=function(){return nh};var n=e.prototype;return n.genLabelUI=function(){arguments.length>1&&void 0!==arguments[1]||this.rotate;var t=this.annot,e=t.getField();if(!e)return!1;var n=ch()();return this.$foreground.after(B()(n)),!0},n.getControlContext=function(){return this.contextMenu?this.contextMenu:this.contextMenu=this.pdfViewer.viewerUI.createContextMenu(this,this.$ui.get(0),this.getContextMenuConfig())},n.getContextMenuConfig=function(){var t=this.constructor,e=t.getContextMenuConfig();if(e)return e;var n=t.getDefaultContextMenuConfig();for(var r in n)switch(r){case"items":var i=n[r],o=this.pdfViewer.i18n;for(var a in i){var s=i[a];s.nameI18nKey&&(s.name=o.t(s.nameI18nKey))}}return t.setContextMenuConfig(n),n},n.showContextMenu=function(t,e){var n;(n=this.contextMenu)&&(n.setCurrentTarget(this),n.showAt(t,e))},n.getContextMenuComponentName=function(){return"fv--field-signature-contextmenu"},n.handleEvent=function(e,n){var r=t.prototype.handleEvent.call(this,e,n);if(r)return r;switch(e){case"contextmenu":if(n.preventDefault(),this.checkReadOnly())return;var i;return this.contextMenu||(this.contextMenu=this.getControlContext(this)),(i=this.contextMenu)&&(i.setCurrentTarget(this),this.handleContextMenu(i),i.showAt(n.clientX,n.clientY)),!1;case Zi.AnnotMouseButtonPressed:0==n.button&&this.pdfViewer.eventEmitter.emit(Ct.signatureFieldMouseLButtonDown,this.annot);break;case Zi.AnnotMouseButtonReleased:0==n.button&&this.pdfViewer.eventEmitter.emit(Ct.signatureFieldMouseLButtonUp,this.annot,!1,this.$esignChinaContainer,this);break;case Zi.AnnotCursorEnter:this.pdfViewer.eventEmitter.emit(Ct.signatureFieldMouseEnter,this.annot);break;case Zi.AnnotCursorExit:this.pdfViewer.eventEmitter.emit(Ct.signatureFieldMouseExit,this.annot)}},n.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.prototype.render.call(this,e,n,r)},n.blur=function(){var e=this;return setTimeout((function(){e.$esignChinaContainer&&(e.$esignChinaContainer.parent().css({zIndex:""}),e.$esignChinaContainer.hide())}),50),t.prototype.blur.call(this)},n.focus=function(){var t=this;this.hasFocus=!0,setTimeout((function(){t.$handler.addClass("fv__control_focus")}),50);var e=this.annot.getField(),n=this.annot.getAdditionalAction(Zi.AnnotReceiveInputFocus);try{n&&this.formRender.execAction("Field",n,null,e)}finally{this.pdfViewer.eventEmitter.emit(Ct.focusInObject,this)}},n.handleContextMenu=function(t){if(t&&t.contextMenuComponent){var e=this.annot.getField().isSigned(),n=t.contextMenuComponent.$container.$children;e?n.forEach((function(t){return B()(t.element).show()})):n.forEach((function(t){var e=B()(t.element);"fv--contextmenu-item-form-sign"==e.attr("name")?e.show():e.hide()}))}},e}(Pa),Dh="normalCaption",Ih=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}O()(e,t);var n=e.prototype;return n.generateUI=function(){var t=this.$input=B()("<div></div>"),e=this.annot,n=xn(e.getDefaultAppearance().textColor||4278190080,"#"),r=e.getMKProperty(Dh),i=Cn(e.getMKProperty("fillColor")),o=Cn(this.annot.getMKProperty("borderColor")),a=0===this.annot.getBorderStyle()?"solid":"dashed";t.css({color:n,fontSize:5,"background-color":i,borderWidth:1,borderColor:o,textAlign:"center",borderStyle:a}).html(r),this.$foreground.before(t),t.hide()},n.updateSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;this.render(t,e)},n.updateUIMore=function(e){var n=e.type,r=e.value,i=this.$input;if(!i)return t.prototype.updateUIMore.call(this,{type:n,value:r});switch(n){case"borderStyle":i.css("border-style",r);break;case"borderColor":r=Cn(r),i.css("border-color",r);break;case"fillColor":i.css("background-color",Cn(r));break;case Dh:i.html(r);break;case"rect":var o=this.updateForgroundAndHandler(this.scale||this.parent("annotsRender").scale,this.rotate);i.css(o)}},n.render=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!i&&n==this.scale&&r==this.rotate)return Promise.resolve();if(this.scale=n,this.rotate=r,!this.formRender.usingHTML(Ln.PushButton))return t.prototype.render.call(this,n,r,i);this.$input||this.generateUI();var o=this.annot,a=this.updateForgroundAndHandler(n,r);a.borderWidth=4*o.getBorderWidth()/3*n,a.width="100%",a.height="100%",a.lineHeight="100%";var s=o.getDefaultAppearance();return s.textSize?(a.fontSize=4*s.textSize/3*n,this.$input.css(a).show()):setTimeout((function(){e.annot&&e.autoFontSize(e.annot.getMKProperty(Dh)+"pend"),e.$input&&e.$input.css(a).show()}),0),Promise.resolve()},n.handleEvent=function(e,n){if(!this.checkReadOnly()){var r;switch(e){case Zi.AnnotCursorEnter:0==(r=this.annot.getMKProperty("rolloverCaption")).length&&(r=this.annot.getMKProperty(Dh));break;case Zi.AnnotMouseButtonPressed:0==(r=this.annot.getMKProperty("downCaption")).length&&(r=this.annot.getMKProperty("rolloverCaption")),0==r.length&&(r=this.annot.getMKProperty(Dh));break;case Zi.AnnotMouseButtonReleased:0==(r=this.pdfViewer.getCurrentActivatable()==this?this.annot.getMKProperty("rolloverCaption"):this.annot.getMKProperty(Dh)).length&&(r=this.annot.getMKProperty(Dh));break;case Zi.AnnotCursorExit:r=this.annot.getMKProperty(Dh)}this.$input&&this.$input.html(r)}return t.prototype.handleEvent.call(this,e,n)},e}(Pa),Rh={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n,r){this.data("annotComponent").showPropertiesDialog(t,e,n,r)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}};function Th(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:Rh,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}var _h,kh=Th(".fv__pdf-page-annot-handler-rect"),Fh=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).generateUI(),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return kh},e.setContextMenuConfig=function(t){xh=t},e.getContextMenuConfig=function(){return xh};var n=e.prototype;return n.generateUI=function(){var t=this.$input=B()("<div></div>"),e=this.annot,n=e.getDefaultAppearance();if(""==e.getMKProperty("normalCaption").trim()){var r=e.getField();2==r.getType()?r.setMKProperty("normalCaption","4"):r.setMKProperty("normalCaption","l")}var i=xn(n.textColor||4278190080,"#"),o=e.getMKProperty("normalCaption"),a=Cn(e.getMKProperty("fillColor")),s=Cn(this.annot.getMKProperty("borderColor")),c=0===this.annot.getBorderStyle()?"solid":"dashed";t.css({color:i,fontSize:5,"background-color":a,borderWidth:1,borderColor:s,textAlign:"center",borderStyle:c}).html(o),this.$foreground.before(t),t.hide()},n.updateSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;this.render(t,e)},n.updateUIMore=function(e){e.type,e.value;t.prototype.render.call(this,this.scale,this.rotate,!0)},n.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;this.annot;return this.scale=e,this.rotate=n,this.formRender.usingHTML(Ln.PushButton)?Promise.resolve():t.prototype.render.call(this,e,n)},n.handleEvent=function(e,n){var r;if(!this.checkReadOnly())switch(e){case Zi.AnnotCursorEnter:0==(r=this.annot.getMKProperty("rolloverCaption")).length&&(r=this.annot.getMKProperty("normalCaption"));break;case Zi.AnnotMouseButtonPressed:0==(r=this.annot.getMKProperty("downCaption")).length&&(r=this.annot.getMKProperty("rolloverCaption")),0==r.length&&(r=this.annot.getMKProperty("normalCaption"));break;case Zi.AnnotMouseButtonReleased:0==(r=this.pdfViewer.getCurrentActivatable()==this?this.annot.getMKProperty("rolloverCaption"):this.annot.getMKProperty("normalCaption")).length&&(r=this.annot.getMKProperty("normalCaption"));break;case Zi.AnnotCursorExit:r=this.annot.getMKProperty("normalCaption")}return t.prototype.handleEvent.call(this,e,n)},e}(Pa),Mh=Th(".fv__pdf-page-annot-handler-rect"),Oh=document.createElement("div"),Lh=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).generateUI(),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return Mh},e.setContextMenuConfig=function(t){_h=t},e.getContextMenuConfig=function(){return _h};var n=e.prototype;return n.generateUI=function(){var t=this.$input=B()(Oh.cloneNode()),e=this.annot,n=e.getDefaultAppearance();if(""==e.getMKProperty("normalCaption").trim()){var r=e.getField();2==r.getType()?r.setMKProperty("normalCaption","4"):r.setMKProperty("normalCaption","l")}var i=xn(n&&n.textColor||4278190080,"#"),o=e.getMKProperty("normalCaption"),a=Cn(e.getMKProperty("fillColor")),s=Cn(this.annot.getMKProperty("borderColor")),c=0===this.annot.getBorderStyle()?"solid":"dashed";return t.css({color:i,fontSize:5,"background-color":a,borderWidth:1,borderColor:s,textAlign:"center",borderStyle:c}).html(o),t.hide(),this.$foreground.before(t),!0},n.updateSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;this.render(t,e)},n.updateUIMore=function(e){e.type,e.value;t.prototype.render.call(this,this.scale,this.rotate,!0)},n.render=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate;this.annot;return this.scale=e,this.rotate=n,this.formRender.usingHTML(Ln.PushButton)?Promise.resolve():t.prototype.render.call(this,e,n)},n.handleEvent=function(e,n){var r;if(!this.checkReadOnly())switch(e){case Zi.AnnotCursorEnter:0==(r=this.annot.getMKProperty("rolloverCaption")).length&&(r=this.annot.getMKProperty("normalCaption"));break;case Zi.AnnotMouseButtonPressed:0==(r=this.annot.getMKProperty("downCaption")).length&&(r=this.annot.getMKProperty("rolloverCaption")),0==r.length&&(r=this.annot.getMKProperty("normalCaption"));break;case Zi.AnnotMouseButtonReleased:0==(r=this.pdfViewer.getCurrentActivatable()==this?this.annot.getMKProperty("rolloverCaption"):this.annot.getMKProperty("normalCaption")).length&&(r=this.annot.getMKProperty("normalCaption"));break;case Zi.AnnotCursorExit:r=this.annot.getMKProperty("normalCaption")}return t.prototype.handleEvent.call(this,e,n)},e}(Pa);n(355),n(356),n(357),n(358),n(359),n(360);var Nh=function(t,e){var n,r=e.page.doc.getPDFForm();if(!r||r.isEmpty()||!(n=e.getField())||n.isDAFontEmbedded()&&1&n.getFlags())return Pa;switch(n.getType()){case Ln.Text:case Ln.File:return lh;case Ln.ListBox:return mh;case Ln.ComboBox:return Ph;case Ln.Sign:return t.config.enableSignature?Ch:da;case Ln.PushButton:return"canvas"==t.config.annotRenderingMode.pushButton?Ih:Pa;case Ln.CheckBox:return Lh;case Ln.RadioButton:return Fh;default:return Pa}},Vh={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data("annotComponent").showPropertiesDialog(t,e,n)}},actions:{name:"actions",nameI18nKey:"viewer_:contextmenu.annot.actions",callback:function(){this.data("annotComponent").showActionsDialog()},disabled:function(){return this.data("annotComponent").readOnlyDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}},Bh={properties:Vh.properties,download:{name:"download",nameI18nKey:"viewer_:contextmenu.annot.download",callback:function(){this.data("annotComponent").download()},disabled:function(){return this.data("annotComponent").readOnlyDisabled()}},remove:Vh.remove};var Uh,jh,Hh,Wh={PDF_VIEWER_ALIVE:"PDF-VIEWER-ALIVE",PDF_DOCUMENT_CLOSING:"PDF-DOCUMENT-CLOSING",BROWSER_RELOAD:"BROWSER-RELOAD"},$h={OBJECT_URL:"object-url-creation"},Yh=n(210),qh=n.n(Yh),Gh=n(361),zh=n.n(Gh),Kh=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:Vh,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),Jh=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:Bh,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),Xh=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype._resize=function(e,n,r){this.enableUniform="north"!=e&&"south"!=e&&"east"!=e&&"west"!=e,t.prototype._resize.call(this,e,n,r)},e}(Wc),Zh=function(t){function e(e,n,r,i){var o;(o=t.call(this,e,n,r,i)||this).name="screen",o.$ui.addClass("fv__pdf-page-screen-annot-container"),o.$handler.addClass("fv__pdf-page-screen-annot-handler-container"),o.fileExt="",o.isVideoAudio=e.info.isAudioVideo,o.$Dialog=null,Wt.a.property(F()(o),"shapeControl",(function(){var t=new Xh({start:function(t,e,n){return o.onStartUpdateShape(t,e,n)},update:function(t,e){return o.onShapeUpdating(t,e)},moving:function(t,e,n){return o.onShapeMoving(t,e,n)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},resizable:!0,enableDiagonally:!0,annotRender:i});return o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),Wt.a.property(F()(o),"contextMenu",(function(){if(o.contextMenuIsEnable())return o.pdfViewer.viewerUI.createContextMenu(F()(o),r,o.getContextMenuConfig())}));var a=o.pdfViewer.i18n;ha.a.i18n=function(t){return a.t(t)};var s=o.pdfViewer.getAnnotAuthorityManager();o.addDestroyHook(s.subscribe(o.annot,(function(t){o.updateOnPermissionChange(t)})));var c=o.pdfViewer.eventEmitter,u=function(){o.isDestroyed||e.isDestroyed||s.getPermission(e).then((function(t){o.updateOnPermissionChange(t)}))};return c.on(Ct.permissionChanged,u),o.addDestroyHook((function(){c.off(Ct.permissionChanged,u)})),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return Kh},e.getMultiMediaContextMenuConfig=function(){return Jh},e.setContextMenuConfig=function(t){Uh=t},e.setMultiMediaContextMenuConfig=function(t){jh=t};var n=e.prototype;return n.updateOnPermissionChange=function(t){if(!this.isDestroyed){if(this.isMultiMedia()&&this.iconContainer)this.pdfViewer.getPDFDocRender().noInteraction?this.iconContainer.hide():this.iconContainer.show();if(Wt.a.isPropertyIntialized(this,"shapeControl")){var e=!1;e=!!this.groupMoveDisabled()||(t.ignorable()?this.moveDisabled():!t.isAdjustable());var n=this.shapeControl;e?n.disable():n.enable()}}},n.processShapeControlPermissionCtrl=function(t){var e=this;this.pdfViewer.getAnnotAuthorityManager().getPermission(this.annot).then((function(t){e.updateOnPermissionChange(t)}))},n.isMultiMedia=function(){return this.isVideoAudio},n.redraw=function(t){return this.activeRect(),this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t&&this.tileCanvas&&this.tileCanvas.clearCache(),this.render()},n.getTileConfig=function(t,e){var n=this.pdfViewer,r=n.getSmartScale(t),i=n.config.tileSize,o=this.annot,a=o.getDeviceRect(1,e),s=o.getDeviceRect(r,e),c=s.right-s.left,u=s.bottom-s.top;return[Math.ceil(u/i),Math.ceil(c/i),c,u,i,r,t,e,a.left,a.top]},n.render=function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,i=this.annot;this.scale=n,this.rotate=r;var o=this.getAnnotFlag();if(o.checkInvisible()||o.checkHidden()||i.isEmpty()||i.isDeleted()||i.rectIsEmpty())return this.tileCanvas&&this.tileCanvas.hideContainer(),Promise.resolve();this.$ui.removeClass(["fv__markup-annot-invisible"]),this.updatePayerRect(),this.tileCanvas&&this.tileCanvas.showContainer();var a,s=this.getTileConfig(n,r),c=this.tileCanvas;if(c)return(a=c).redraw.apply(a,E()(s));if(c=this.tileCanvas=new Gr((function(t,n,r,o,a,s,c,u,d){return e.getPDFPage().getAnnotBitmap(i.getId(),ut(s),d,{x:c*s+n*a,y:u*s+t*a,width:r,height:o},!0)}),this.$ui),this.isMultiMedia()){this.iconContainer=B()('<div class="fv__pdf-page-multi-media-annot-container play"></div>'),this.$ui.append(this.iconContainer);var u=this.pdfViewer.getPDFDocRender();u.noInteraction?this.iconContainer.hide():this.iconContainer.show()}return(t=c).redraw.apply(t,E()(s))},n.afterRender=function(t){if(t.transformed){if(this.isActive){this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e)}if(this.isMultiMedia()&&this.$player&&this.$player.is(":visible")){var n=this.annot.getDeviceRect(this.scale,this.rotate);this.$player.css({left:n.left+"px",top:n.top+"px",width:n.right-n.left+"px",height:n.bottom-n.top+"px"})}}},n.onShapeRotated=function(t){t<0&&(t+=360),t<=45||t>315?t=0:t>45&&t<=135?t=270:t>135&&t<=225?t=180:t>225&&t<=315||t>-135&&t<=-45?t=90:console.warn("degree error: "+t);var e=this.annot.getRotation();return(e+=t)>=360&&(e-=360),this.setRotation(e)},n.onStartUpdateShape=function(t,e,n){this.editDebouncePromise||(this.editDebouncePromise=new It(0))},n.onShapeUpdating=function(t,e){var n=this;if(this.pdfViewer.config.highPerformance)return this.editDebouncePromise?this.editDebouncePromise.exec((function(){return n.setRect(t)})):Promise.resolve()},n.onShapeMoving=function(t,e){var n=this;if(this.pdfViewer.config.highPerformance)return this.editDebouncePromise?this.editDebouncePromise.exec((function(){return n.moveTo(t.left,t.top)})):Promise.resolve()},n.onShapeUpdateEnd=function(t,e,n){var r=this;return this.editDebouncePromise.exec((function(){return r.setRect(t).then((function(t){"move"==n&&r.pdfViewer.eventEmitter.emit(Ct.annotationMovedPosition,[r.annot],r.getPDFPage(),r.annot)}))}))},n.activeHandleFuc=function(e){t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active"),this._applyShapeChange(),e&&this.play(),this.closeConfirmDia()},n.closeConfirmDia=function(){this.$Dialog&&(this.$Dialog[0].close(),this.$Dialog.remove())},n.active=function(t){var e=this,n=this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName(),r=this.annot.info.annotScreenDetailType;if(["create-multi-media-state","select-annotation","createImage"].includes(n)||r&&"screen_img"===r)this.activeHandleFuc(!1);else{var i=localStorage.getItem("TRUST_MANAGE_SET"),o=!1;o=i?JSON.parse(i).enable:this.pdfViewer.getSafeReadingMode(),this.pdfViewer.currentPDFDoc.getCurFileSymbolId().then((function(t){var n=localStorage.getItem("OpenFileMap");if(n){var r=(n=JSON.parse(n))[t],i=r.trustMode,a=(r.trustToClose,r.trustOneSet,o?qh()():zh()()),s=B()(a);e.$Dialog=s;s[0];if(o){var c=s.find('input[value="'.concat(i,'"]'));c&&c[0]&&(c[0].checked=!0)}e.activeHandleFuc(!0)}else localStorage.setItem("OpenFileMap",JSON.stringify(R()({},t,{trustMode:"one",trustOneSet:!1,trustToClose:!1,count:0})))}))}},n._applyShapeChange=function(){var t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n.getMultiMediaUrl=function(){var t=this,e=this.pdfViewer.resourceGenerator(Wh.PDF_DOCUMENT_CLOSING,$h.OBJECT_URL).expose().URL;return this.annot.getActionPromise().then((function(n){var r=n.info;if(t.multiMediaUrl)return t.multiMediaUrl;if(r&&"TypeRendition"==r.type)for(var i=0;i<r.renditions.length;i++){var o=r.renditions[i].fileName,a=r.renditions[i].contentType;if(o){var s=o.substr(o.lastIndexOf(".")).toLowerCase();if(t.fileExt=s,[".mp4",".mp3",".wav",".ogg",".m4a",".mov",".avi"].indexOf(s)>-1){t.isMultiMediaAnnot=!0;var c=r.renditions[i].buffer,u=new Blob([c.buffer],{type:a}),d=e.createObjectURL(u);t.multiMediaUrl=d,t.multiMediaFilename=o,t.actionBlob=u;break}}}return t.multiMediaUrl}))},n.play=function(){var t=this,e=this.pdfViewer.getPDFDocRender();e&&!e.noInteraction&&this.getAppPermission().then((function(e){t.isPaused()?e.isPlayable()&&t.doAction():t.pause()}))},n.pause=function(){this.player&&this.player.pause()},n.isPaused=function(){return!this.player||this.player.paused},n.updatePayerRect=function(){if(this.$player){var t=this.annot.getDeviceRect(this.scale,this.rotate);this.$player.css({left:t.left+"px",top:t.top+"px",width:t.right-t.left+"px",height:t.bottom-t.top+"px"})}},n.doAction=function(){var t=this;this.isMultiMedia()?this.getMultiMediaUrl().then((function(e){if(e){if(t.$handler.addClass("active"),t.$player)t.$player.show();else{if([".mp3",".wav",".ogg"].indexOf(t.fileExt)>-1){var n=Vt.isMobile||Nt.isSafari?"":"fv__hide";t.$handler.append('<div class="fv__pdf-player '+n+'" style="position:absolute;" ><audio class="player" src="'+e+'" poster="#" width="100%" height="100%" controls="controls" controlsList="nodownload" style="width: 100%; height: 100%;">Your browser does not support the video tag.</audio><button><i class="fv__close-video"></i></button></div>')}else t.$handler.append('<div class="fv__pdf-player" style="position:absolute;" ><video class="player" src="'+e+'" poster="#" width="100%" height="100%" controls="controls" controlsList="nodownload">Your browser does not support the video tag.</video><button><i class="fv__close-video"></i></button></div>');t.$player=t.$handler.find(".fv__pdf-player"),t.player=t.$handler[0].querySelector(".fv__pdf-player .player"),(Nt.isIE||Nt.isEdge)&&t.player.addClass("IE-player");var r=t.$handler[0].querySelector(".fv__close-video").parentNode;r.addEventListener("click",(function(e){t.player&&t.player.pause&&t.player.pause(),t.$player.hide(),e.stopPropagation()})),r.addEventListener("mousedown",(function(t){t.stopPropagation()})),r.addEventListener("pointerdown",(function(t){t.stopPropagation()})),r.addEventListener("touchstart",(function(t){t.stopPropagation()}));var i=function(e){t.iconContainer.removeClass("play pause").addClass("pause")},o=function(e){t.iconContainer.removeClass("play pause").addClass("play")},a=function(e){t.iconContainer.removeClass("play pause").addClass("play")},s=function(t){t.preventDefault()};t.player.addEventListener("play",i),t.player.addEventListener("pause",o),t.player.addEventListener("ended",a),t.player.addEventListener("click",s),t.addDestroyHook((function(){t.player.removeEventListener("play",i),t.player.removeEventListener("pause",o),t.player.removeEventListener("ended",a),t.player.removeEventListener("click",s)}))}if(t.updatePayerRect(),t.$rect&&t.$rect.css({left:"-100px",top:"-100px",width:0,height:0}),t.player)if(t.player.paused){var c=t.player.play();void 0!==c&&c.then((function(){Nt.isSafari&&t.player.play()})).catch((function(e){if(!Nt.isSafari){var n=t.pdfViewer.i18n.t("viewer_:contextmenu.annot.noSptPlayPlsDownload");t.$player.remove(),t.pdfViewer.viewerUI.alert({message:n,level:"warning",isHTML:!0})}}))}else t.player.pause()}})):this.pdfViewer.actionManager.get(this.annot.action,this).active()},n.download=function(){var t=this;this.getAppPermission().then((function(e){e.isAttachmentDownloadable()&&t.isMultiMedia()&&t.getMultiMediaUrl().then((function(e){ss(t.actionBlob,t.multiMediaFilename,t.actionBlob.type)}))}))},n.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,r=this.rotate,i=t.getDeviceRect(n,r);e.css({left:i.left+"px",top:i.top+"px",width:i.right-i.left+"px",height:i.bottom-i.top+"px"})},n.rectInit=function(){var t=this,e=this.$handler,n=B()(this.createRectDom());e.append(n);var r=n[0],i=this.rectHammer=new Hammer.Manager(r,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return i.add(new Hammer.Tap({event:"doubletap",taps:2})),i.add(new Hammer.Tap({event:"singletap"})),i.get("doubletap").recognizeWith("singletap"),i.get("singletap").requireFailure("doubletap"),i.on("singletap",(function(e){t.rectSingleTap(e)})),e.on("contextmenu",(function(t){t.preventDefault()})),e.on("mouseup",(function(t){t.stopPropagation()})),n.data("annotComponent",this),this.addDestroyHook((function(){i.destroy()})),n},n.showContextMenu=function(t,e){return!!this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.getContextMenuConfig=function(){var t;if(this.isMultiMedia()){if(jh)return jh;t=this.constructor.getMultiMediaContextMenuConfig()}else{if(Uh)return Uh;t=this.constructor.getDefaultContextMenuConfig()}for(var e in t)switch(e){case"items":var n=t[e],r=this.pdfViewer.i18n;for(var i in n){var o=n[i];o.nameI18nKey&&(o.name=r.t(o.nameI18nKey))}}return this.isMultiMedia()?this.constructor.setMultiMediaContextMenuConfig(t):this.constructor.setContextMenuConfig(t),t},n.updateRender=function(){return this.updateSize(),Promise.resolve()},n.unActive=function(){t.prototype.unActive.call(this),this.$handler&&this.$handler.removeClass("active")},n.unActiveMore=function(){},n.rectSingleTap=function(t){},n.removeAnnot=function(){var t=this;return this.getAppPermission().then((function(e){return e.ignorable()&&t.deleteDisabled()?Promise.resolve():e.isDeletable()?t.doRemoveAnnot():void 0})).then((function(e){var n=t.pdfViewer.getCurrentActivatable();return n&&n.remove&&n.remove(t),e}))},n.doRemoveAnnot=function(){var t=this,e=this.pdfViewer,n=e.eventEmitter,r=this.annot;return Promise.resolve((e.customs.removeAnnotBefore||Dt.a)(this)).then((function(e){if(n.emit(Ct.removeActionAnnotationBefore,t),!1!==e)return r.getPDFPage().removeAnnot(r).then((function(e){return n.emit(Ct[e?"removeActionAnnotationSuccess":"removeActionAnnotationFailed"],t,r),e}),(function(){n.emit(Ct.removeActionAnnotationFailed,t)}))}))},n.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},n.getPropertyOptions=function(){var t=this.annot,e=xn(t.getBorderColor(),"#");-1==e&&(e=0);var n=t.getBorderWidth(),r=360-t.getRotation();return{color:e,opacity:t.getOpacity(),borderWidth:n,borderStyle:!0,disabled:this.propertyDisabled(),rotation:r}},n.updateContextMenu=function(){var t=this.getContextMenuConfig();this.isMultiMedia()&&(this.player.paused?delete t.items.pause:delete t.items.play),this.$handler.contextMenu(t)},n.showPropertiesDialog=function(){this.$propertiesControl=new wc(this,document.body),this.updateDeleteStatus(!0)},n.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.updateDeleteStatus(!1)},n.showActionsDialog=function(){this.$actionsControl=new ju(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},n.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setColor=function(t){var e=this;return this.annot.setBorderColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return t?n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n)})):t}))},n.setOpacity=function(t){var e=this;return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setRotation=function(t){var e=this,n=this.annot.getRotation(),r=Math.abs(t-n);if(0==r)return!0;var i=this.annot.getRect(),o=i.right-i.left,a=i.top-i.bottom;if(90==r||270==r){var s=(o-a)/2;i.left+=s,i.right-=s,i.top+=s,i.bottom-=s}return this.annot.setRect(i).then((function(n){return n?e.annot.setRotation(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t})):n}))},n.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.tileCanvas&&this.$handler.remove()},n.doubleTapAnnot=function(){return!1},n.tapAnnot=function(e){return this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===Vn?this.play():t.prototype.tapAnnot.call(this,e)},n.destroy=function(){t.prototype.destroy.call(this),Wt.a.isPropertyIntialized(this,"contextMenu")&&this.contextMenu&&this.contextMenu.destroy()},e}(da),Qh=function(t){function e(e,n,r,i){var o;o=t.call(this,e,n,r,i)||this;var a=e.getGroupHeader();return a&&"Replace"===a.getIntent()&&(o.isReplace=!0,o.caretAnnot=a),o}return O()(e,t),e.prototype.onRightChangeSuccess=function(t){if(this.isReplace)return this.caretAnnot.moveRectByCharIndex(t.charIndex)},e}(tu),tf=function(t){function e(e,n,r,i){var o;return(o=t.call(this,e,n,r,i)||this).$ui.addClass("fv__pdf-page-watermark-annot-container"),o}O()(e,t);var n=e.prototype;return n.getTileConfig=function(t,e){var n=this.pdfViewer,r=n.getSmartScale(t),i=n.config.tileSize,o=this.annot,a=o.getDeviceRect(1,e),s=o.getDeviceRect(r,e),c=s.right-s.left,u=s.bottom-s.top;return[Math.ceil(u/i),Math.ceil(c/i),c,u,i,r,t,e,a.left,a.top]},n.render=function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,i=arguments.length>2?arguments[2]:void 0,o=this.annot;if(this.scale=n,this.rotate=r,o.isEmpty()||o.isDeleted()||o.rectIsEmpty())return this.renderDestroy(),Promise.resolve();var a=this.tileCanvas,s=o.getBorderWidth();if(!s)return a&&a.hideContainer(),Promise.resolve();var c=this.getTileConfig(n,r);return a||(a=this.tileCanvas=new Gr((function(t,n,r,i,a,s,c,u){return e.getPDFPage().getAnnotBitmap(o.getId(),ut(s),e.rotate,{x:c*s+n*a,y:u*s+t*a,width:r,height:i},!0)}),this.$ui)),a.setVisibleRect(i),a.showContainer(),(t=a).redraw.apply(t,E()(c))},e}(da),ef=(n(435),{play:{name:"play",nameI18nKey:"viewer_:contextmenu.annot.play",callback:function(){this.data("annotComponent")},disabled:function(){return this.data("annotComponent").readOnlyDisabled()}},pause:{name:"pause",nameI18nKey:"viewer_:contextmenu.annot.pause",callback:function(){this.data("annotComponent")},disabled:function(){return this.data("annotComponent").readOnlyDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data("annotComponent").removeAnnot()},disabled:function(){return this.data("annotComponent").deleteDisabled()}}});function nf(t,e,n){for(var r=0;r<n.length;r++,e++){var i=n[r];t.setInt8(e,i)}}function rf(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}var of=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".fv__pdf-page-annot-handler-rect";return{selector:t,items:ef,events:{show:function(){return this.data("annotComponent").updateDeleteStatus(!0),!0},hide:function(){return this.data("annotComponent").updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),af=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype._resize=function(e,n,r){this.enableUniform="north"!=e&&"south"!=e&&"east"!=e&&"west"!=e,t.prototype._resize.call(this,e,n,r)},e}(Wc),sf=function(t){function e(e,n,r,i){var o;(o=t.call(this,e,n,r,i)||this).name="sound",o.$ui.addClass("fv__pdf-page-sound-annot-container"),o.$handler.addClass("fv__pdf-page-sound-annot-handler-container"),e.action&&(o.actionViewer=o.pdfViewer.actionManager.get(e.action,F()(o))),o.isVideoAudio=e.info.isAudioVideo,o.audioUrl="",o.audioBlobData=null,o.multiMediaFilename="",Wt.a.property(F()(o),"shapeControl",(function(){var t=new af({emitter:o.pdfViewer.eventEmitter,start:function(t,e,n){return o.onStartUpdateShape(t,e,n)},update:function(t,e){return o.onShapeUpdating(t,e)},moving:function(t,e,n){return o.onShapeMoving(t,e,n)},end:function(t,e,n){return o.onShapeUpdateEnd(t,e,n)},resizable:!1,enableDiagonally:!0,moveable:!1,rotatable:!1,annotRender:i,enableSizeBox:!o.isMultiMedia()});return o.processShapeControlPermissionCtrl(t),o.addDestroyHook((function(){t.destroy()})),t})),Wt.a.property(F()(o),"contextMenu",(function(){if(o.contextMenuIsEnable())return o.pdfViewer.viewerUI.createContextMenu(F()(o),r,o.getContextMenuConfig())}));var a=o.pdfViewer.i18n;return ha.a.i18n=function(t){return a.t(t)},o.apRenderer=new qd(F()(o)),o}O()(e,t),e.getDefaultContextMenuConfig=function(){return of},e.setContextMenuConfig=function(t){Hh=t};var n=e.prototype;return n.isMultiMedia=function(){return this.isVideoAudio},n.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),this.render()},n.getTileConfig=function(t,e){var n=this.pdfViewer,r=n.getSmartScale(t),i=n.config.tileSize,o=this.annot,a=o.getDeviceRect(1,e),s=o.getDeviceRect(r,e),c=s.right-s.left,u=s.bottom-s.top;return[Math.ceil(u/i),Math.ceil(c/i),c,u,i,r,t,e,a.left,a.top]},n.swapLowHighBit=function(t){for(var e=new Int8Array(t).length,n=new DataView(t),r=new Int8Array(e),i=0;i<e;i+=2)r[i]=i+1==e?0:n.getInt8(i+1),r[i+1]=n.getInt8(i);return r},n.getMultiMediaUrl=function(){var t=this.annot;if(!this.audioBlobData){var e=t.info.soundObj,n=e.data;this.multiMediaFilename=t.info.title;var r=e.sampleRate,i=e.sampleBits,o=e.channel,a=this.swapLowHighBit(n),s=(a.length,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=new ArrayBuffer(44+t.length),o=new DataView(i);return rf(o,0,"RIFF"),o.setUint32(4,36+t.length,!0),rf(o,8,"WAVE"),rf(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,e,!0),o.setUint32(24,n,!0),o.setUint32(28,n*e,!0),o.setUint16(32,e,!0),o.setUint16(34,r,!0),rf(o,36,"data"),o.setUint32(40,t.length,!0),nf(o,44,t),o}(a,o,r,i)),c=new Blob([new Int8Array(s.buffer)],{type:"audio/wav"});this.audioBlobData=c}var u=this.pdfViewer.resourceGenerator(Wh.PDF_DOCUMENT_CLOSING,$h.OBJECT_URL).expose().URL;return this.audioUrl=u.createObjectURL(this.audioBlobData,{type:"audio/wav"}),this.audioUrl},n.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=arguments.length>2?arguments[2]:void 0,i=this.annot;this.scale=e,this.rotate=n;var o,a,s=this.getTileConfig(e,n),c=this.tileCanvas,u=this.getAnnotFlag();return u.checkInvisible()||u.checkHidden()||i.isEmpty()||i.isDeleted()||i.rectIsEmpty()?(c&&c.hideContainer(),Promise.resolve()):(c&&c.showContainer(),this.isHTMLSimulate()?this.apRenderer.render(e,n):c?(c.setVisibleRect(r),(o=c).redraw.apply(o,E()(s))):(c=this.tileCanvas=new Gr((function(e,n,r,o,a,s,c,u){return t.getPDFPage().getAnnotBitmap(i.getId(),ut(s),t.rotate,{x:c*s+n*a,y:u*s+e*a,width:r,height:o},!0)}),this.$ui),this.isMultiMedia()&&this.$ui.append('<div class="fv__pdf-page-sound-annot-container"></div>'),c.setVisibleRect(r),(a=c).redraw.apply(a,E()(s))))},n.afterRender=function(t){if(t.transformed){if(this.isActive){this.activeRect();var e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e)}if(this.isMultiMedia()&&this.$player&&this.$player.is(":visible")){var n=this.annot.getDeviceRect(this.scale,this.rotate);this.$player.css({left:n.left+"px",top:n.top+"px",width:n.right-n.left+"px",height:n.bottom-n.top+"px"})}}},n.activeRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.annot,e=this.$rect=this.$rect||this.rectInit(),n=this.scale,r=this.rotate,i=t.getDeviceRect(n,r);e.css({left:i.left+"px",top:i.top+"px",width:i.right-i.left+"px",height:i.bottom-i.top+"px"})},n.rectInit=function(){var t=this,e=this.$handler,n=B()(this.createRectDom());e.append(n);var r=n[0],i=this.rectHammer=new Hammer.Manager(r,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return i.add(new Hammer.Tap({event:"doubletap",taps:2})),i.add(new Hammer.Tap({event:"singletap"})),i.get("doubletap").recognizeWith("singletap"),i.get("singletap").requireFailure("doubletap"),i.on("doubletap",(function(e){!1!==t.onDoubleTap(e)&&t.rectDoubleTap()})),this.contextMenuIsEnable()&&n.data("annotComponent",this),this.addDestroyHook((function(){i.destroy()})),n},n.getContextMenuConfig=function(){if(Hh)return Hh;var t=this.constructor.getDefaultContextMenuConfig();for(var e in t)switch(e){case"items":var n=t[e],r=this.pdfViewer.i18n;for(var i in n){var o=n[i];o.nameI18nKey&&(o.name=r.t(o.nameI18nKey))}}return this.constructor.setContextMenuConfig(t),t},n.onShapeRotated=function(t){t<0&&(t+=360),t<=45||t>315?t=0:t>45&&t<=135?t=270:t>135&&t<=225?t=180:t>225&&t<=315||t>-135&&t<=-45?t=90:console.warn("degree error: "+t);var e=this.annot.getRotation();return(e+=t)>=360&&(e-=360),this.setRotation(e)},n.onStartUpdateShape=function(t,e,n){this.editDebouncePromise||(this.editDebouncePromise=new It(0))},n.onShapeUpdating=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((function(){return n.setRect(t)}))},n.onShapeMoving=function(t,e){var n=this;this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((function(){return n.moveTo(t.left,t.top).then((function(t){n.setMargin()}))}))},n.onShapeUpdateEnd=function(t,e,n){var r=this;return this.editDebouncePromise?this.editDebouncePromise.exec((function(){return r.moveTo(t.left,t.top,n,!1).then((function(e){return r.setRect(t)})).then((function(t){r.setMargin()}))})):Promise.resolve()},n.setMargin=function(){var t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(os.expandOffset(e,t))},n.active=function(){t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active")},n.play=function(){var t=this;this.getAppPermission().then((function(e){t.isPaused()?e.isPlayable()&&t.doAction():t.pause()}))},n.pause=function(){this.player&&this.player.pause()},n.isPaused=function(){return!this.player||this.player.paused},n.doAction=function(){var t=this;if(this.isMultiMedia()){var e=this.getMultiMediaUrl();if(!e)return;if(this.$handler.addClass("active"),this.$player)this.$player.show();else{if(Nt.isIE&&!Nt.isEdge){var n=this.pdfViewer.i18n.t("viewer_:contextmenu.annot.noSptPlayPlsDownload");return this.pdfViewer.viewerUI.alert({message:n,level:"warning"}),!1}this.$handler.append('<div class="fv__pdf-player fv__hide" style="position:absolute;" ><audio style="width: 200px" src="'+e+'" poster="#" width="100px" height="100%" controls="controls" controlsList="nodownload">Your browser does not support the video tag.</audio><button><i class="fv__close-video"></i></button></div>'),this.$player=this.$handler.find(".fv__pdf-player"),this.player=this.$handler[0].querySelector(".fv__pdf-player audio"),(Nt.isIE||Nt.isEdge)&&this.player.addClass("IE-player"),(Vt.isMobile||Vt.isTablet)&&this.player.removeAttribute("controls"),this.$handler[0].querySelector(".fv__close-video").addEventListener("click",(function(e){URL.revokeObjectURL(t.audioUrl),t.player&&t.player.pause&&t.player.pause(),t.$player.hide()}))}var r=this.annot.getDeviceRect(this.scale,this.rotate);if(this.$player.css({left:r.left+"px",top:r.top+"px",width:r.right-r.left+"px",height:r.bottom-r.top+"px"}),this.$rect&&this.$rect.css({left:"-100px",top:"-100px",width:0,height:0}),!this.player)return;this.player.paused?this.player.play&&this.player.play():this.player.pause&&this.player.pause()}else this.actionViewer&&this.actionViewer.active()},n.download=function(){var t=this;this.getAppPermission().then((function(e){if(e.isAttachmentDownloadable()){var n=t.audioBlobData;Nt.isIE&&!Nt.isEdge&&(t.multiMediaFilename=t.multiMediaFilename+".wav"),ss(n,t.multiMediaFilename,{type:"audio/wav"})}}))},n.addAction=function(t){this.actionViewer=this.pdfViewer.actionManager.get(t,this)},n.showContextMenu=function(t,e){return!!this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n._getShapeControllerBoundaryBox=function(){var t=this.getPDFPage(),e=dt(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),n=S()(e,2);return{left:0,top:0,right:n[0],bottom:n[1]}},n.updateRender=function(){return Promise.resolve()},n.unActive=function(){t.prototype.unActive.call(this),this.$handler.removeClass("active")},n.removeAnnot=function(){var t=this;return this.getAppPermission().then((function(e){return e.ignorable()&&("function"==typeof t.deleteDisabled&&t.deleteDisabled()||!t.deleteDisabled)?Promise.resolve():e.isDeletable()?t.doRemoveAnnot():void 0})).then((function(e){var n=t.pdfViewer.getCurrentActivatable();return n&&n.remove&&n.remove(t),e}))},n.doRemoveAnnot=function(){var t=this,e=this.pdfViewer,n=e.eventEmitter,r=this.annot;return Promise.resolve((e.customs.removeAnnotBefore||Dt.a)(this)).then((function(e){if(n.emit(Ct.removeActionAnnotationBefore,t),!1!==e)return r.getPDFPage().removeAnnot(r).then((function(e){if(e)return n.emit(Ct.removeActionAnnotationSuccess,t,r);n.emit(Ct.removeActionAnnotationFailed,t)}),(function(){n.emit(Ct.removeActionAnnotationFailed,t)}))}))},n.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},n.removeAction=function(){this.actionViewer=null},n.getPropertyOptions=function(){var t=this.annot,e=xn(t.getBorderColor(),"#");-1==e&&(e=0);var n=t.getBorderWidth(),r=t.getBorderStyle();return{color:e,opacity:t.getOpacity(),borderWidth:n,borderStyle:r,disabled:this.propertyDisabled()}},n.updateContextMenu=function(){var t=this.getContextMenuConfig();this.isMultiMedia()&&(this.player.paused?delete t.items.pause:delete t.items.play),this.$handler.contextMenu(t)},n.showPropertiesDialog=function(){this.$propertiesControl=new wc(this,document.body),this.updateDeleteStatus(!0)},n.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.updateDeleteStatus(!1)},n.showActionsDialog=function(){this.$actionsControl=new ju(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},n.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},n.setBorderWidth=function(t){var e=this;return this.annot.setBorderWidth(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setColor=function(t){var e=this;return this.annot.setBorderColor(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setBorderStyle=function(t,e){var n=this;return this.annot.setBorderStyle(t,e).then((function(t){return t?n.updateRender().then((function(){n.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,n)})):t}))},n.setOpacity=function(t){var e=this;return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((function(t){return t?e.updateRender().then((function(){return e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t}))},n.setRotation=function(t){var e=this,n=this.annot.getRotation(),r=Math.abs(t-n);if(0==r)return!0;var i=this.annot.getRect(),o=i.right-i.left,a=i.top-i.bottom;if(90==r||270==r){var s=(o-a)/2;i.left+=s,i.right-=s,i.top+=s,i.bottom-=s}return this.annot.setRect(i).then((function(n){return n?e.annot.setRotation(t).then((function(t){return t?e.updateRender().then((function(){return e.active(),e.pdfViewer.eventEmitter.emit(Ct.updateActionAnnotation,e),t})):t})):n}))},n.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.tileCanvas&&this.$handler.remove()},n.doubleTapAnnot=function(){return!1},n.tapAnnot=function(e){return this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===Vn?this.play():t.prototype.tapAnnot.call(this,e)},n.destroy=function(){t.prototype.destroy.call(this),Wt.a.isPropertyIntialized(this,"contextMenu")&&this.contextMenu&&this.contextMenu.destroy()},e}(Rc),cf=function(){function t(t){this.pdfViewer=t,this.matchRules=[],this.getAnnotFlag_=function(){return 0}}var e=t.prototype;return e.registerMatchRule=function(t){return this.matchRules.push(t),t},e.unRegisterMatchRule=function(t){var e=this.matchRules.indexOf(t);-1!==e&&this.matchRules.splice(e,1)},e.get=function(t){for(var e,n=this.matchRules,r=this.getDefault(t),i=0,o=n.length;i<o;i++){var a=n[i];if("function"==typeof a){var s=a(t,r);s&&(e=s,r=s)}}return e||r},e.getDefault=function(t){switch(t.getType()){case"highlight":return Zc;case"squiggly":return iu;case"strikeout":switch(t.getIntent()){case Ht.Intents.STRIKEOUT_TEXTEDIT:return Qh}return tu;case"underline":return nu;case"line":switch(t.getIntent()){case Ht.Intents.LINE_DIMENSION:return Pu}return Au;case"polyline":return Tu;case"fileattachment":return Kd;case"text":return Gd;case"circle":return Ju;case"caret":return Xd;case"freetext":switch(t.getIntent()){case Ht.Intents.FREETEXT_TYPEWRITER:return Sl;case Ht.Intents.FREETEXT_CALLOUT:return Bl;default:return jl}case"ink":return ul;case"polygon":switch(t.getIntent()){case Ht.Intents.POLYGON_CLOUD:return bl;case Ht.Intents.POLYGON_DIMENSION:default:return Nu}case"square":return Qd;case"sound":return sf;case"stamp":return sl;case"link":return qu;case"widget":return Nh(this.pdfViewer,t);case"screen":return Zh;case"redact":return yl;case"watermark":return tf;default:return da}},e.getAnnotFlag=function(t){var e=new Yo(t.getFlags());return e.or(this.getAnnotFlag_(t)),e},e.setViewerAnnotFlag=function(t){this.getAnnotFlag_=t,this.pdfViewer.eventEmitter.emit(Ct.globalAnnotFlagChanged)},t}(),uf=function(t){function e(e,n){var r;return(r=t.call(this)||this).action=e,r.annot=n,r.pdfViewer=n.pdfViewer,r.initSubAction(),r}O()(e,t);var n=e.prototype;return n.active=function(){this.subAction.forEach((function(t){t.active()}))},n.setSourceTarget=function(t,e){var n=this;this.source=t,this.target=e,this.action&&this.subAction.forEach((function(t){t.setSourceTarget(n.source,n.target)}))},n.initSubAction=function(){var t=this;this.subAction=[],this.action&&this.action.subAction.forEach((function(e){t.subAction.push(t.pdfViewer.actionManager.get(e,t.annot))}))},n.updateAction=function(t){this.action=t,this.initSubAction()},n.destroy=function(){t.prototype.destroy.call(this),this.action=null,this.subAction.length=0,this.source=null,this.target=null},e}(vt.a),df=n(118),lf=n.n(df),hf=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wo.a,r=this.annot.pdfViewer,i=r.customs;Promise.resolve((i.URIActionCallback||Wo.a)(this.getURI())).then((function(t){if(!1!==t){var i=e.getURI();if(/\w*:\/\/[\s\S]*/.test(i)){if("file"===i.match(/(\w*):\/+[\s\S]*/)[0])return}else i="http://"+i;if(r.getSafeReadingMode()){var o=i.lastIndexOf("@"),a=i;if(-1!=o){a=i.substr(o+1);var s=i.indexOf("//");-1!=s&&(a=i.substr(0,s+2)+a)}var c=r.i18n.t("viewer_:pdfjs.launchURLHint");return r.viewerUI.confirm(c+"\n"+lf.a.toASCII(a)).then((function(){window.open(i),n(!0)}),(function(){return n(!1)}))}window.open(i)}})),t.prototype.active.call(this)},n.getURI=function(){return this.action.getURI()},n.setURI=function(t){return this.action.setURI(t)},e}(uf),ff=function(){function t(t){this.fileSpec=t}var e=t.prototype;return e.getChecksum=function(){return this.fileSpec.getChecksum()},e.getCreationDateTime=function(){return this.fileSpec.getCreationDateTime()},e.getDescription=function(){return this.fileSpec.getDescription()},e.getDict=function(){return this.fileSpec.dict},e.getFileData=function(){return this.fileSpec.fileData},e.getFileName=function(){return this.fileSpec.getFileName()},e.getFileSize=function(){return this.fileSpec.fileSize},e.getModifiedDateTime=function(){return this.fileSpec.modifiedDateTime},e.getSubtype=function(){return this.fileSpec.subtype},e.isEmbedded=function(){return this.fileSpec.isEmbedded},t}(),pf=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).fileSpec=r.getFileSpec()&&new ff(r.getFileSpec())||null,r}O()(e,t);var n=e.prototype;return n.active=function(){var e=this.annot.pdfViewer.customs;Promise.resolve((e.launchActionCallback||Wo.a)(this.getFileSpec())).then((function(t){})),t.prototype.active.call(this)},n.getFileSpec=function(){return this.action.getFileSpec()},e}(uf),gf={HandMenuItem:"[icon-class=fv__icon-toolbar-hand]",Print:"[icon-class=fv__icon-toolbar-print]",FirstPage:"[icon-class=fv__icon-float-bar-first-page]",PrevPage:"[icon-class=fv__icon-float-bar-previous-page]",NextPage:"[icon-class=fv__icon-float-bar-next-page]",LastPage:"[icon-class=fv__icon-float-bar-last-page]",PrevView:"[icon-class=fv__icon-float-bar-previous-view]",NextView:"[icon-class=fv__icon-float-bar-next-view]",ZoomViewIn:"[icon-class=fv__icon-float-bar-zoom-in]",ZoomViewOut:"[icon-class=fv__icon-float-bar-zoom-out]",ActualSize:".float-bar .fv__ui-editable_zoom_dropdown .fv__ui-dropdown-list li:nth-child(7)",FitPage:".float-bar .fv__ui-editable_zoom_dropdown .fv__ui-dropdown-list li:nth-child(1)",FitVisible:".float-bar .fv__ui-editable_zoom_dropdown .fv__ui-dropdown-list li:nth-child(3)",FitWidth:".float-bar .fv__ui-editable_zoom_dropdown .fv__ui-dropdown-list li:nth-child(2)",SinglePage:"[icon-class=fv__icon-toolbar-single-page]",OneColumn:"[icon-class=fv__icon-toolbar-continuous-page]",TwoPages:"[icon-class=fv__icon-toolbar-double-page]",TwoColumns:"[icon-class=fv__icon-toolbar-facing-continuous-page]",GeneralInfo:"[icon-class=fv__icon-properties]",GeneralPrefs:"[icon-class=fv__icon-toolbar-preferences]",AddFileAttachment:"[icon-class=fv__icon-toolbar-doc-attachment]",ExtractPages:"[icon-class=fv__icon-toolbar-extract-pages]",ReplacePages:"[icon-class=fv__icon-toolbar-replace-pages]",DeletePages:"[icon-class=fv__icon-toolbar-delete-pages]",CropPages:"[icon-class=fv__icon-toolbar-crop-pages]",RotatePages:"[icon-class=fv__icon-toolbar-rotate-multiple]","Annots:Tool:InkMenuItem":"[icon-class=fv__icon-toolbar-pencil]",SaveAs:"[icon-class=fv__icon-toolbar-download]",FullScreen:"[icon-class=fv__icon-float-bar-full-screen]"},vf={ShowHideBookmarks:1,ShowHideAnnotManager:2,ShowHideThumbnailss:3,ShowHideOptCont:4,Find:5,ShowHideFileAttachment:7},mf={GoToPage:".fv__ui-grouplist-item [name=gotopage-input]",ZoomViewTo:'[name="editable-zoom-dropdown"] .fv__ui-dropdown-editor'};var yf=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){var e=this,n=this.annot.pdfViewer.customs;Promise.resolve((n.namedActionCallback||Wo.a)(this.getName())).then((function(t){!1!==t&&function(t){if(gf[t]){var e=B()(gf[t]);if(e.hasClass("active")||e.hasClass("disabled"))return;var n=e[0];setTimeout((function(){n&&n.click()}),200)}if(mf[t]&&B()(mf[t]).each((function(){B()(this).hasClass("disabled")||B()(this)[0].focus()})),vf[t]){var r=B()(".fv__ui-sidebar-nav a").eq(vf[t]-1);if(r.hasClass("active"))return;var i=r[0];i&&i.click()}}(e.getName())})),t.prototype.active.call(this)},n.setActionData=function(t){return this.action.setActionData(t)},n.getName=function(){return this.action.getName()},e}(uf),wf=["exportToXFDF","exportAsFDF","activeDocs","persistentData","curDoc","execMenuItem","mailMsg","browseForDoc","newDoc","newConnection","csFuntionName","importAnFDF","importAnXFDF","removeDataObject","removeTemplate","importDataObject","importTextData","mailForm","print","saveAs","mailDoc","createDataObject","createIcon","createTemplate","getPageNthWord","extractPages","exportDataObject","newPage","insertPages","replacePages","addWatermarkFromFile","fileSelect","setLock","signatureSetSeedValue","signatureSign","query","addIndex","removeIndex","appearances","digitalIDs","isLoggedIn","loginName","loginPath","name","uiName","signAuthor","signVisible","signInvisible","signValidate","login","logout","newUser","getHandler","importFromFile"],bf=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).$Dialog=null,r.JsMap=wf,r}O()(e,t);var n=e.prototype;return n.activeHandleFuc=function(){var e,n=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.annot.pdfViewer.JSEngine,o=this.annot.pdfViewer.customs;return i.getEnableJS()?r?Promise.resolve((o.javascriptActionCallback||Wo.a)(this.getScript())).then((function(t){if(!1!==t){i.initEvent(n.getType(),n.source,n.target,n.name);var r=n.getScript();e=i.exec(r)}})):!1!==(e=(o.javascriptActionCallback||Wo.a)(this.getScript()))&&(i.initEvent(this.getType(),this.source,this.target,this.name,this.param),e=i.exec(this.getScript())):((o.javascriptDisabledActionCallback||Wo.a)(),e={rc:!0}),t.prototype.active.call(this),this.closeConfirmDia(),e},n.closeConfirmDia=function(){this.$Dialog&&(this.$Dialog[0].close(),this.$Dialog.remove())},n.active=function(){var e,n=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.annot.pdfViewer.JSEngine,o=this.annot.pdfViewer.customs;return i.getEnableJS()?r?Promise.resolve((o.javascriptActionCallback||Wo.a)(this.getScript())).then((function(t){if(!1!==t){i.initEvent(n.getType(),n.source,n.target,n.name);var r=n.getScript();e=i.exec(r)}})):!1!==(e=(o.javascriptActionCallback||Wo.a)(this.getScript()))&&(i.initEvent(this.getType(),this.source,this.target,this.name,this.param),e=i.exec(this.getScript())):((o.javascriptDisabledActionCallback||Wo.a)(),e={rc:!0}),t.prototype.active.call(this),e},n.setTypeName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.type=t,this.name=e},n.getType=function(){return this.type},n.executeScript=function(){var t=this.annot.pdfViewer.JSEngine,e=this.getScript();if("string"==typeof e&&e.trim().length>0)return t.exec(e)},n.getScript=function(){return this.action.getScript()},n.setScript=function(t){return this.action.setScript(t)},n.setParam=function(t){this.param=t},e}(uf),Af=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){var e=this,n=this.annot.pdfViewer.customs;Promise.resolve((n.submitFormActionCallback||Wo.a)({flags:this.getFlags(),url:this.getURL(),fieldNames:this.getFieldNames()})).then((function(t){var r=e.getURL();if(!(!1===t||r&&-1!==r.indexOf("mail")))if(e.annot.pdfViewer.getSafeReadingMode()){if(!n.submitFormActionCallback){var i=e.pdfViewer.i18n.t("viewer_:pdfjs.safeModeSubmit",{URL:e.getURL(),interpolation:{escapeValue:!1}});if(!confirm(i))return}e.pdfViewer.getCurrentPDFDoc().getPDFForm().submitForm(e.getURL(),e.getFieldNames(),e.getFlags())}else e.pdfViewer.getCurrentPDFDoc().getPDFForm().submitForm(e.getURL(),e.getFieldNames(),e.getFlags())})),t.prototype.active.call(this)},n.setActionData=function(t){return this.action.setActionData(t)},n.getFlags=function(){return this.action.getFlags()},n.getURL=function(){return this.action.getURL()},n.getFieldNames=function(){return this.action.getFieldNames()},e}(uf),Pf=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){var e=this,n=this.annot.pdfViewer.customs;Promise.resolve((n.resetFormActionCallback||Wo.a)(this.getFlags(),this.getFieldNames())).then((function(t){!1!==t&&e.annot.pdfViewer.pdfViewerRender.pdfDocRender.doc.getPDFForm().resetForm(e.getFieldNames(),e.getFlags(),e.source)})),t.prototype.active.call(this)},n.setActionData=function(t){return this.action.setActionData(t)},n.getFlags=function(){return this.action.getFlags()},n.getFieldNames=function(){return this.action.getFieldNames()},e}(uf),Ef=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){var e=this.annot.pdfViewer.customs;Promise.resolve((e.importDataActionCallback||Wo.a)(this.getFileSpec())).then((function(t){})),t.prototype.active.call(this)},n.getFileSpec=function(){return this.action.getFileSpec()},e}(uf),xf=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){var e=this,n=this.annot.pdfViewer.customs;Promise.resolve((n.gotoActionCallback||Wo.a)(this.getDestination())).then((function(t){!1!==t&&function(t,e){var n=e.getPDFDocRender();if(!t||t.pageIndex<0)return;n.getPDFDoc().getPageByIndex(t.pageIndex).then((function(n){var r=t.zoomFactor,i=n.getWidth(),o=n.getHeight(),a=t.left>i?i:t.left,s=t.top>o?o:t.top;switch(t.zoomMode){case"ZoomFitHorz":e.zoomTo("fitWidth",{x:a,y:s,pageIndex:t.pageIndex});break;case"ZoomFitPage":e.zoomTo("fitHeight",{x:0,y:0,pageIndex:t.pageIndex,type:"device"});break;case"ZoomFitRect":var c=e.getPDFViewerRender().scrollWrap.getScrollHost(),u=c.clientWidth,d=c.clientHeight,l=e.getPDFPageRender(t.pageIndex);l.getPDFPage().then((function(n){var i=n.getDeviceRect({left:t.left,top:t.top,bottom:t.bottom,right:t.right},1,l.getRotation()),o=i.right-i.left,c=i.bottom-i.top;r=Math.min(u/o,d/c),e.zoomTo(r,{x:a,y:s,pageIndex:t.pageIndex})}));break;case"ZoomFitBHorz":e.zoomTo("fitVisible",{x:a,y:s,pageIndex:t.pageIndex});break;case"ZoomXYZ":default:0===r?e.getPDFDocRender().goToPage(t.pageIndex,{x:a,y:s},0!==s):e.zoomTo(r,{x:a,y:s,pageIndex:t.pageIndex})}}))}(e.getDestination(),e.pdfViewer)})),t.prototype.active.call(this)},n.getDestination=function(){return this.action.getDestination()},n.setActionData=function(t){return this.action.setActionData(t)},e}(uf);var Sf=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){var e=this,n=this.annot.pdfViewer.getPDFDocRender().getPDFDoc();this.getFieldNames().forEach((function(t){var r=n.getPDFForm().getField(t);r&&r.setHidden(e.getHideState())})),t.prototype.active.call(this)},n.getFieldNames=function(){return this.action.getFieldNames()},n.getHideState=function(){return this.action.getHideState()},n.setActionData=function(t){return this.action.setActionData(t)},e}(uf),Cf=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){var e=this,n=this.annot.pdfViewer,r=n.resourceGenerator(Wh.PDF_DOCUMENT_CLOSING,$h.OBJECT_URL).expose().URL,i=this.annot.pdfViewer.customs,o=this;Promise.resolve((i.remoteGotoActionCallback||Wo.a)(this.getDestination())).then((function(t){if(!1!==t){var i=e.action.getFileSpec();if(i.isEmbedded()){var a=e.getDestination();e.action.getFileSpecStream().then((function(t){var n=new Blob(t,{type:"application/pdf"}),i=r.createObjectURL(n);window.open(xt("href",location)+"#FOXITPDFREMOTE");function s(t){t.source!==window&&t.data.isReady&&t.source.postMessage(A()({foxitSdkActionType:o.action.getType(),foxitSdkActionUrl:i,foxitSdkActionFileName:o.action.getFileSpec().getFileName()},a),window.location.origin)}window.addEventListener("message",s,!1),e.addDestroyHook((function(){window.removeEventListener("message",s,!1)}))}))}else{var s=n.i18n.t("viewer_:dialog.action.remoteGoto.message");n.viewerUI.alert({message:s+"("+i.getFileName()+")",level:"warning"})}}})),t.prototype.active.call(this)},n.getDestination=function(){return this.action.getDestination()},e}(uf),Df=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this._doAction()},n._doAction=function(){var t=D()(N.a.mark((function t(){var e,n,r,i,o,a,s=this;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.annot.pdfViewer.currentPDFDoc,n=this.action.info,r=n.hideLayerIds,i=n.visibleLayerIds,t.next=4,e.getLayerNodesJson();case 4:o=t.sent,a=this._objNumsToIds(o.children,{hideLayerObjNums:r,visibleLayerObjNums:i}),Object.keys(a).forEach((function(t){var n="visibleLayerIds"===t;a[t].map((function(t){t&&(e.setLayerNodeVisible(t,n),s.annot.pdfViewer.eventEmitter.emit("layer-action-actived",{id:t,visible:n}))}))}));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n._objNumsToIds=function(t,e){var n=e.hideLayerObjNums,r=e.visibleLayerObjNums,i={};return function t(e){for(var n=0;n<e.length;n++){var r=e[n];r.children.length>0&&t(r.children);var o=r.objNum,a=r.id;o&&(i[o]=a)}}(t),{hideLayerIds:n?n.map((function(t){return i[t]})):[],visibleLayerIds:r?r.map((function(t){return i[t]})):[]}},e}(uf),If=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.active=function(){var t=D()(N.a.mark((function t(){var e,n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.action.info.dest_thread_index,t.next=3,this.getArticleThread(e);case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return");case 6:r=this.pdfViewer,r.getPDFDocRender().startReadMode(n);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.collapseSidebar=function(){this.pdfViewer.viewerUI.rootComponent.getComponentByName("sidebar").collapse()},n.getArTicleByIndex=function(){var t=D()(N.a.mark((function t(e){var n,r,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.pdfViewer.currentPDFDoc,r=n.getPdfArticle(),t.next=4,r.getArticleList();case 4:return i=t.sent,t.abrupt("return",i[e].children[0]);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.getArticleThread=function(){var t=D()(N.a.mark((function t(e){var n,r,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.pdfViewer.currentPDFDoc,r=n.getPdfArticle(),t.next=4,r.getArticleList();case 4:return i=t.sent,t.abrupt("return",i[e]);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(uf),Rf=function(){function t(t){this.pdfViewer=t,this.actionOptions=t.actionOptions;var e=this.actionOptions.remoteGotoActionInit;e&&e()}return t.prototype.get=function(t,e){switch(t&&t.getType()||null){case"TypeURI":return new hf(t,e);case"TypeLaunch":return new pf(t,e);case"TypeNamed":return new yf(t,e);case"TypeJavaScript":return new bf(t,e);case"TypeSubmitForm":return new Af(t,e);case"TypeResetForm":return new Pf(t,e);case"TypeImportData":return new Ef(t,e);case"TypeHide":return new Sf(t,e);case"TypeGoto":return new xf(t,e);case"TypeGoToR":return new Cf(t,e);case"TypeSetOCGState":return new Df(t,e);case"TypeThread":return new If(t,e);default:return new uf(t,e)}},t}(),Tf={error:"data:audio/mp3;base64,SUQzBAAAAAAAJ1RTU0UAAAATAAADVVBZVU4gVHJhbnNjb2RpbmcAAAAAAAAAAAAAAP/zwMAAAAAAAAAAAABJbmZvAAAADwAAAA4AABh8ACIiIiIiIiIzMzMzMzMzRERERERERFVVVVVVVVVmZmZmZmZmd3d3d3d3d4iIiIiIiIiZmZmZmZmZmaqqqqqqqqq7u7u7u7u7zMzMzMzMzN3d3d3d3d3u7u7u7u7u/////////wAAAABMYXZjNTguMzUAAAAAAAAAAAAAAAAkAuAAAAAAAAAYfNJCphkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/zwMQAUHwOTAdawAEmXGgLFAkxKU3Mk6dc6s04bESZmMQHJlnHdmnKhwOmpVby2ZccsgYQUY4kZIcAiDNS3ZhQoGDlrEAiRDEIpdfdh6p0AhdwtgWULIFmEADTKFYQv4WUMAAEBAAwSldtdiwipExEVEVFNISw8tgAAGARkIZiGQRdhkJjWfvH7RyUGAfUuuWTL5w0X/RTdeu6aX6Adf6NhrWaRo5y5yHcsV7fPwqRh2HcnJW1hYRQBIRIhYjXJ1212MQZZLOZ/hSRu/KIxYm3bh+1Dcbt/Xlcbn5Q1tr8Py/uGGG6TD+6lEYsStyHIhyWYfnTxt/IcpOf/1425DuP5GJZSWMMKent9lD+OQ7ksl+eqljn1H8Ym1+H6enjb/w/L+aqUlJYwqRhy4fn9UljCpSP+/7tuW5blv/fiDO2vw/flEMP5GLHf/CpSUgGAAZMWhiMZldMDSOMgUPABaGRbgnPqSmaoJnuYgms5DHh4SmrooGFwTFAImIADAYPDBQCRgIjRRg1g+OGRjM2gyxCOUKzJVA2lEMrQwgqMuAjAf/zwsRSbOQWeUGd2AAJMnIjSA8AAQUCBKCCqMa+YhcUHkwyMHNJBzBSk18QNKLTdAAwwtMDCACTmCghpQwr8UFCZEMoFTgx0FHAgLx0QMTHTC0ImUzDyUILSJOAwgYIJmjppiZ6JHQ8RG6EgWK14GzFxhDUY+BGKiBoIqAAEyozNFWzA1My0oLhg0XBIYBTQORC38lfZZbpmCCxjpwAScwYmIids6uyANMRATCyMwUqNcBjBykmBn+0MgVKYSEtqt1PRCgSD42iorG7bwS6XiqKWAuDUxwYAhAEGCcsZXSohN1xAgAJETkFUJJQkaDC4sPKTa2ls6z/xuKNYguWSGXxFnb9vxJZfAk9Xv0jxvbFlJS+H3NiEXjtDHIy9Lk3HYbu3yg8XiTuO5F4xBU3XiNSV2oHr34foJZar5Z4apO7vd4zClmH2fqSN1f2TWX8lcPPz8/R5Uk9pxJC9blTVO772xjCVReVU7y0NmtnScoAAFxgMgBGya0Gigx3CwsODHM9AoiMj105eUjQYmNvloyuEjVLUMagIBCIwGOjJoLMNir/88LEM2YsEpInnNAAHjOEBdACGejmgjKAzRgTfiDDHzBIQwalCRbkAaJpEVEC8LAQN4QACxwUCApqAhw9WCo4aJGQJBi8RhQ41NAUkZoOq0CA1jAwQRapoLiSySUpnBSUapGsGYKBQO4xpgxiCwcCLyGBGpymEFmZImFLgkE0kEjAQPSjNYGMsGCBwcER9hgwAxMF0tQwwpIhS5R0cIl9luRWlZ6+wwDAgcDBC4aZsmqrAl4xESWVVWysHIV5yuN33SpfMCIKAicW2dpcW1Y3vkawVPIgShUNlyTiSzNVaI/FI0vqG5uQOsxZyUe2JOomIw1O1AIwaGmJyqJNHymyUA3N2H0pWVtfo4+1l53YZRFXmVNJ5svDKm4sqZk48teliGLxXVKEPUQGGK2Kna8y1kTIl8yBEZ/WCzrKJe2lxrLLVZUTGPtYYm4sQhl9ZI56jL3uPm5fJmRI9tbeFdD2syVlhDYIMa4xZerFnOgqMSal7QAACYAQoNjKPfMFhwzHyTCQUMu6MwqvAULDVDOM2B85YrjKRDEiWYBBaCcYE5hQ//PCxC9fZA6J45zQAUxiQkmOMnWCgvgASR0kAS5MmcMEYMOdQBEQkcRGJJGjGoEysMBmQqbHugANgqiaUyEVBQQgBAx0InCM4a8EPIUhzaGxYaWYNWWEA8jbu8YUgGETAnTHEkmwoUDgRjEI4JL6mdbmPXmDELtK35gAoQPN0kM8WByIWWGYFiMCp8GnRCVRAV6FxRgDJpQ4AFPzCm5NUXGIxIIEiEaAiTK4feZVYKAhEISFMyiMABVroIBeNiKkUWlwNiT0QvWM2N1IKeJj8vCiRJaDVg21X8n9FHYmo889pAcPAFnLJUPgGCWgPZHJc06/Q15tu1IzidoZulppRUqTcTuT0alz8P7Vzk0hlGolK5uU3ex+OUUO0fY5QcmZu3SV6CmoKstksrr1LHfp4VP3Mr9/+xDKPR37duP1KWclMpl9/f2//T+ZvVdkEKkteWU0rwi9TDOtYtCFIABMP0Bs1BIVQCAghGTAngoBE4Dl4zD5HCXgzIwKQETA7AlMMkRUxuh90Uk3QcAmycxxT45FxY8/yJgLZlzL8TnXuYlEGf/zwsRGaTwOLAue6ACTSBmwTstKi9gFA2KAAHAAZbKmaFDeY2HaZ2tBVrQDSgYGBUAQ4AwcDYKkYx+Hsw6IUw2HQzPMatAMM0kdBgGBAKGEQGJSojmW6pAqCzS50wuKpnknZn0MJiUOcZj0fiMCuk4S/03wgCxIE2gJhhgBmEwtGeq3GSRwmGhDGPoRGFgkmFALmDgSiAN5e9UNV4Khq3U0lohQHAI7dSpVi+jJ40zLAgTAkDiULzJ5BzDUZjE0MDD8WjAUHjB0BBgAzA4NzDgI6aIwzSR2U83vn75Vl7lw04i1I/P09axIL4KBlHlghgiFw6BhheHBhaDBf0Kg4YZhoDQKDAeMFBFBIDGAoBA4AssvrZd//xx+rjzdJLP/+/3WFjPD8PMAwYDgaUWAAKmCgJmCgImAANmEgOlmFSp7MHLmkABAoEkvnmWBUyk8R/mv+tl3LXf/8cf3jz8cqSc7hf5nP8zv7zn+W7agYDSZHEcDgcDgZGJNsx9TDzafmvkAXAvhoKgUn8a7ybFSKBgBAEIWmA4AAJAEmGwMGYt4OKL/88LENmiD9sJfnvIDISAMmAsACAADzO8UMNxqCY3JDmC8RgCABAYBlKpRZSRlIh3mB6F+Yyoms2py3OlgaCTtUi6Nzpxo28kEDVzKXj8SvuQ0+G3zrGWWsebmaQ5kQBEmBkR0ZwhIUmcaeppDWW58M0Zx6ugmm+TOYYguBoelUmSiPaYLIVhlYiOQRk7TawmVW3Vhqdaky65TGWcTUYGAe5wVJRGEcL2YcoCphyA3GCuG+YWIGJmGmiy+OwXHL36uZy2GYpP4/3KoZAo9Zi0hEmHsGYYKAKZhnhJmDQEWYfYdphAgEmEaB+BQGzBVA3MNAHIwHABU5XfhEAO5D/ZHbr7orDMLm78k7LMedrY+WvSgScBwCBgXgShwD8ohpxIm5Lvv2AgBFLIEuY6r5y/9bu4freOf7s8ztawyyt/97vFTuO/6VjKGmLvZfU44cjQBsvtILqb0c01h+Kmdi3e7T5/jVynrNT9/v+0GpqJ53ebzv5Y2ZgUCAVAgMFIICEzHBkwUC0xYXU+0NYCBKYiGqa0D2AidIhBMbASSMRSL0uyF//PCxClfZAZ0Ad3YAUEDA4RDAkJK5lGBQXApHkyJJIZCgaA0EkLDBwBNMCwcTFBqm6kKloBogWgzJQIqh5ADgZQMMVyJjYgBDwWOjBilYUISjExswlsN6BwYCiEACCxlYhDBUPMaIzAREBBBWCMVOFCRgqfAwgMAJoHBhmomQlCIZyg474OCwdumFlCV5c4VIC8gVDWdP8ASYaDBI4QSI2jVkYmQAJhS4BAuEIwGL3ZkTSqaRuQz2wpg2NLgGiq2FmrjCpIMDrXYaDhtPSHqezChoRgJewJE2fKEOIm8lgrVDjQWmwLBzPMYQ0iflRICVZVAeFqkuyqgotTMYd7ll08FP3HhZ1I4FsbpatiWP9DMVci3Aj1XbV2HMoo/sc3Zcegn6fuo1K4s9N2vM5Uz72rzgcn8e7huTTkQqwfGY3KsJbDFyjrzNHepqSVRmMVKK9KaSWT2r1i7Lbuu16aeuLwKC04vkIzkPMk4zQrA9KDUw6CUwVNE/d8w5YGKDRDRwFKkY2xKbmkOtyFhJ/hyRDBD+ZyEcVggoMUyKBxn4BewiP/zwsRAVgQWfALfdCBLutIbiBeiQIQ0UsTSMUHMMCJpTzkMBq5mQyihEnGDxYmDYiGCoAIiDYGfFDMdYLQIogULFg+BUSYyCgyDTiBxUwBYVIA4Md9Wl8W+OqGLBomDJujo4eOFrIsx8KoU9FeqLCAYMDBlaVgk5S4AsbLUSi0/M18bbHJnHdNQguwvpoa5VZg7u97+rmaVGMnglQ0LhqbJAz9LMkaqTQFiw1ZVWi3wuWXoalmC0mhyaW26LVSilWNDjZgG/jCZVLqePt49N/PVNT09iEx/GV5RWVx2mrflM7k03N0tNS7lMbhOdqGt0VnOXw5U+L3a9PO5yimkUNcwuXZVvVDLsKty3G6T3hlb8VJe/Ev5Ny2SZVqSXzOfK+Wt473aEKGy6IVGEHHEYBgmYaPMcCEaYPBYBBLNVwDAwFkIIGKYBsHcVRZsEMiw9ICxIADF8P13IkmPYsCoKIklm3WRLJBRUcka+l9JrGEYRiQcA4ISAApgmnlSQGDlxjLQiGGeArAEQ4VUlioRXXbIAmTU1tjxoxYkGAhABR/V0Jz/88LEfVS0FnwE7pk8ERD2IlrguZKBphjr4Bhc4EJGwoRHAIkAgmVFUIsooirDR1iwYJTOFk7/vYHbQY7L5oREBoMBEgWHLzTrkHwxBsIhL4MdLPPwRC0piUSYMM3bSoXfbNSvRTlvIAlw6HgBTiGWMSFZUGU605VC2w9nobnLDlreder2XZUVNcpal6BXQlVd0oAZpGYahl2YftuZuD8XamESATLuLdcbgdctF3IulfVGVZn25V4uJOuHh9x080kdOVx0zqq3I4nF7+GpNJw2KZahYMC02nNzo8SMtNTmJJYhfkxBTUUzLjEwMKqqqqqqqqqqqqoluQ+g0VSaDiUIguK3g0KXwwRGDCkaHEymoJAYGIS27a3YAZAYUACSqqphIYS1iBlISjAEU8gpDaURkQL6Tji77xoAdrOFk22UxQSCsiAyqKiDyhNOsExccIJOChSUJtNCrqJusBCXaJmxUEgOC4qHF30gBxFfYOmWuXiM+dRJk4HWR2KClzthKyFVXjnB0x6UsnrHQQgNERC9khKc+SSUu3AtS1L5uQxZ8J1J//PCxKxQTBaIBuZe/NaPA0DNHIsJNBj/tju7Yj8E/SS+Fqbi0choMQ73i0arWtJy7tEy0Db1JSNT6cYGobVEV+HJPw0DiRBpBycFfN4bsrC62UauWEG1vXF+4zrhpcG5mT7ZGXTCulQpynZ/M3zk1gxUwwYzd+0vpCrQyO3Ipl20oTBc19/cuS8eJxHswahubA/mMNDmGDRzrHcJIMNitBs5VUxP0qAIiIQEwHQHDAaADMIUpw01Q3zAnBVBgnx2pUGJAEAR+Z6EA8DBYDAYDwGMg0CEskFIXAhiRaumGBw4OaiEbCwNBR2QgYcDGwm40GkS+pik6nSZ1MA5fMtBhCOs4NGCRYXNaAlLwSFkVAaINCAkKCsgVQDQDTioyKhQ0pgICEAmBkQKMyCcBKwAEkmSl2EYkEERCJgQZBy+bAECAtHisA1hgQ8Y6BnDDoVEg6LBAQSCossig5HB4MMFNQAImNAy2IbNtCjAXQqAgEBQKECzIRJj6Tia8NV2sQCjCX9TKfEGES2y7AwEpLGoCKtsNiw0pqrXcj7aGBhS8H5MIP/zwsT+ZMwWbAD3NlBVrhEIMRHQJHMcBKRbxe5ddAzp8oYaJF6dHkaAGCwFSx+7UkUAXIhEoFa4/cLchrb1y+IqxMyfiK9tRa9p22ZwtwNPZUm5yPbkER058pxh61C4egLNyYap3Esyycymm+g+jbDTbiee3RgqzEX7jkPWKO7WrNvWiE3Nv5ledl9oGf6kzq2KDCNQ7AM1I5RbnrNzeFnt/qoOkozAdDZAQXCoTAvA7NMcEwwhQKTBlAcMfAF9cZgZAMGDMBOOgGF8wCAIxwDAMGCqBkKANmBOBKYPITRgGALGBsBAYdAPIGA2L1gIpMJDUGjUkcx8dAwUOACPCKhm8cBlg0QEAQaTA5pIeYyugaQMIAjDzcDRhjYeABoSLzBkwwaUMrGRYDTLIlJAGyAygLCDoSPTOAQwIuBpGa4kGHFzQzBRAIABJvNHIQCVgYCC1KlWZWImxsgCGCh6Gh4VFzGQkiIwwAeUwYrQqMWCUcmeGsBAwpDRADgZSZEykREyCCVq1nOfOGEmVFFsCwUYCDBgIHDq7U+ha/c9h40AOIr/88LE/2b0FnADXtgATf+LKaAAR62UQjjxI0vtkRDaA5tY0hPaFArptpFWiW6j8kQK154L8Qnp2I/AvYYkbCs5Io5WV12KJmwO3sxSdkv5vw7cQpIAlboU83TxyRy/CET8teSYkV6YlbKs67XpZYq3Y6tnKYeGG6PdHYlL2UEhe+NRhtb0RiNufo7MnpXifqD5x06CbiF2LT85fnr0a07NeNz+Nmlpbcut6gEYQ43poHJHggGIw9wwIarm/+UcZKgPZhVDPiEFRmStxh4g5mCoHsYNoFhgRgsPfSGNxunCipAtMzCIKTCkbgwj8u6MLSiNWwMMfSWBIIDQJmAwF5d4aFI+YsDSaIDgabFGYDgwkOYChgYSid/47NHR8NgSeMXSiMNT1MQhdMLwDMQhRfwdAUwyF/lbK1VMZjnEkEMHBHMm26MymJMWTJBIlmBYVGF4XGHIjAUMDGMYDA8O3dx5r/35g2exlOLZiQbpkYboYUgYI4FA4wCGoIGwGgQCgKQZMFAlMKApZinyYAgwMgR+v////DjkMsQ9MOQUMBBaMWSH//PCxPhnw7ZQA57oATDMGy8piQGZgYFYVBwLBkTDKUAuYShQBgPUxSOFARQZMBgFSRoXVCoEJpL+///f////+FwCYACgTJAEGQIAIKlyQCBRVB0Kgk5ZYAQtegssoLgfDMNSuHXShTAX2kTAd7fWU0r6//////////+IQBL8l0QcDrzFQCCYEEvkx1yhQAVFIuRACs9SoCAWtjj+RtwXlYE0plymS8kimXTVO7OMqnppypFFTEFNRTMuMTAwqqqqqqqqqqqqqqqqAlZVvVpAgyZUZmWDoYCGKlBmZgZKJItAQdNXgjnaQ5lyMhAzQGc3h1NcMxAPGhrxoyaaEcmXD4QCGUohqKcZ6OEoqZcgmbMGPDA4E1sCBTEBwgC3AGggAFMIFBQFtC3RgwRfJ4y6pd5AMmFC1yoqrpljSlMUxVNYwgmLTIpOMxkCijJljJiE6zCEzMFzHA1WAUsZxmb6GbpSEFDOtDgvjYmC65lFpqWxu3Rs0QYPMwxN05NURHAxnVRnD5mCJiga6DBjjJkAUSSdMMNAQJ+qbcZf2W3I1GaWl//zwsTZW6P9CZXb0AEfyy3jVjMtwlT/S67GY1TU1reONa1NO0/1uGXJh25DUZjMts1qamy3Ko1Ls5S/strRqzrLL8asMxVuKQqYMUUyQeWtBqmK7nejVeGXdis0/0t53//VNaiTWmvUcMuTDtA/0trU3caWlpb0Ray12ifZyn6vxF2mdONTuCzl+Zp2pbzLv/ulszLku7YdpyoeoXZjVr4ooKpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=",warning:"data:audio/mp3;base64,SUQzBAAAAAADBVRDT04AAAAHAAADT3RoZXIAVElUMgAAACEAAAPDlcK+wrPCpMOLw5jCssOEKHNjLmNoaW5hei5jb20pAFRYWFgAAAApAAADY29tbWVudADDlcK+wrPCpMOLw5jCssOEKHNjLmNoaW5hei5jb20pAFRBTEIAAAAhAAADw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUWFhYAAAAJgAAA1RZRVIAw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUWFhYAAAALAAAA2x5cmljcy1jaGkAw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUUEUxAAAAIQAAA8OVwr7Cs8Kkw4vDmMKyw4Qoc2MuY2hpbmF6LmNvbSkAUFJJVgAAABEAAEF2ZXJhZ2VMZXZlbAB7DAAAUFJJVgAAAA4AAFBlYWtWYWx1ZQAhewAAVFNTRQAAABMAAANVUFlVTiBUcmFuc2NvZGluZwAAAAAAAAAAAAAA//uQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAARAAAdYgAcHBwcHCoqKioqKjg4ODg4OEdHR0dHR1VVVVVVVWNjY2NjY3FxcXFxcX9/f39/f46Ojo6OnJycnJycqqqqqqqquLi4uLi4x8fHx8fH1dXV1dXV4+Pj4+Pj8fHx8fHx//////8AAAAATGF2YzU4LjM1AAAAAAAAAAAAAAAAJAJAAAAAAAAAHWJUiMoVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQZAAI81BSOKmGTTAAAA0gAAABD/09FhTGAAAAADSCgAAEAJAVbVtVpKZFAPBHOIWq2r/9/TOMqjc8XwGpRbVm9nOIhwsIPKmlLVlTqk4uIts2C6zjCOE6TWIRcTihGldXJzE6/9Xu5ue5Re2xf91F72NzYLpMubYnC/8zc3JRacSI1Llm5v+5ubjbcKr218Dh21VYSCYlBMD5PfzU4Cw/o2wXxLBoTIvqSxHecmxIdX/S7B+dk+BkzXnZPilOZiWjcbucKDs/YZEMRyeeVX4weOQ2P70c6862s67FJ9juO4zisY4Fi9X0kV5zfXktX0ziwwP2N9gSCYeV5iI7fmWKHZPfYcxYspkJmSy2/Hz3Do0EgdDgjCIRAQTrYEsCm0aRgGMVvUeViS3EjDGkRylySjhmxgdxXG/fuMiSRxdNidBmjkuuwE9DCzgACh524Etu/qKQKGCGWCgu/cTj0zSTkIrLFQBQplk465sKGgVI5TIeySkfyWUsDwmlS4MgQxBERJGtCvGsqtyilD8zEtp6LO+rhOtx77bvBFKSekMd//uSZEmABw1hTG5nIAAAAA0gwAAAGIVhVfmcAAAAADSDAAAA7XlGrFB9i3Us8zl0sYApoXbfNphjil83vpu6jd7tLe7Uln2Kt3VJR7uWtloyy6a7E0v2TwI4brq4pf//////////5+HP//////tssjF2wzkyiYAQAQBRngYBAUAwGkHUoYnESIx7LX2ulnAECj5bFhUPhACWAlaFlstL1KXQU6SkQcdGWRRZdkAR9lTeO+XrcJbwQJgEu3FJFYpZ5dKpUJKwxfHH+x+KQPKKK/J00XwjrVWYSScfnt6iksUpLkowuyuT3KatfiMQy53/ktNUm7+GqXCT09qNWsKaNSXnLef4Ycp62X0EooOXr04+1FJqCdlupmzbsW6etup+dr62W7n4b+r/43c8f//////+1ij6yyI8AAAAAJmuneg/VEzFQEeKTqBQDEqDqVrgJqhUMARsYFhmLYpnAWLGKKRhIUQhxiIgYaNmhG5sAjByWEPJjRJ+nKW2NBa73HpZTP7lqMwoBF7GGN2et/KRhqsIkOlz0vlFmLwxDDwoBQEGlv/7kmQ1hvYzStNPb2ACAAANIOAAARVdOU3OYZVAAAA0gAAABO1xrBLPgiPRNMVlLS4Bp2TTWD/OnA09RQLbtcvRvLnMr9itTUkZkeql7dqpL4blj+UWGu00WlU5Kae5LK9PKrmFPT50dWlraxzq4U9vDD8+6u5Uk0iMZdj/2/+E8qAAGnjg/chdiKQM8RZcw2jU4pDbiDnQ4lWIBmYJpAVA5MAJibUeYe3JgJgkhGbxXF37ncu4y1hICCLbyv7q1pdOonAprrWIdoLMaXkhKOPAlFPHtyO+zqRMoCNyu/Fo3yasOCiByW52t8vRJVNpEm/9bxxjMFQdK8Zl2+uror6tqfPFMRN33LLmoDYDiy9v8xQiUHcc1eZd7vZv/w12uTMp2gVO4C4AFgaqLJMAYAACAAADkWKMvaXbdpCe8CW4YABk5It4snXkYGALxqoDwuJIsAj3G2mt9SQ+2r8rHMQBRZ8st6q1Y02BNQOB1atjr/rtLMGgJ87tacwyyX2ikWta64N+9N+9aEtUi3Gfuo1qn+MJykxGnjYVhoCGrN9Rb1//+5JkO4D1UFfTe49HEgAADSAAAAEVIT9HjeF1QAAANIAAAAQrutoSjEIkUB0TFXLFi4hiFbMtiyi4YepW4MQQgUqan1KE+pMTc39CCIj/enAs73/qMfMfIAAAAAASrePMwSwuxw0bBYXOSQR4MgeO3mxMDUgZaVmVnQEGEV1gViMoeGqmOF00MYYMjbu35XjNI7AqTfYT2Vj5XEW4SudrWq9FA0uR9UFdWb+3WjyYggKzVtbvZzGcgtB8WTKZjG/nT226M/X7Oa1lW+5N1LPP2fYeBIMS2nq1uG8fScfW10RvTDEhTJLcXSwxLzptZxhyp1WVzLUuPuuO1En4qc4lSmQAEAAAAAAmIwa6Cy3jhuUPiSESbmmbOQNdjLxRsyR03Ng0ClSxY0jguUL2MIXMKeMEDmrTdS/+zmbYFY2cVkg2lit0kHTKvryy5awsq0fQ4jNgB/FubTQuLpNQySrrgSsVvn831ONlVVn6wrcn+7++K8JIg02W6GCsYNTis+LnSDvhMlikI33fwWMvR9gbE87DK10pXL9l8Nvw+7I0njDi//uSZFED9FRD0nNPTTIAAA0gAAABEUEvPgykdcgAADSAAAAEPKkUAVdLk62bufGkvmDLmgaGRfzJVW2rmclNrREBRdk1iA6kWsmPxFCwhD6ECASPoCoqZVILApphps+nLEBV9IVftNybfGJk2qik2cVDyN0KqPGJB/Wj5nZTUeirQ99kilXPilC1JvX1MkFgW9M9uS9WijVIAAAoTqNmBhM+noBoC7lwS9A2kfNpCfDqtqDvjzYS0lhTTr6bRZJ4MBDWpfKSRW+tNZ0JdR9FoESoS5ZNBUoEEItQojmGniTQQ+UEl2jbC0q0rXXh3y3h6ddciVZ2TBckcziirgehSNAZ//BC9VFvbbD+cdzXwGIUtXJkggAJRl0QUGadflbKnPS9fCGpVFokuZp8OkA4nWgEGTxCKh4gEIZMo3QPQuQZSclrRBOhIVkwfNVbmVlRMyqowXWXZRY487H3C4MAjCh934SVB4MMiU7pzLTUxkJIdkTZZNuLmDTXU1EBKdsxfyYRNaZebMNoNoF76p5CoAAAADFBRYyxmsMXkErZDFXWev/7kmSFg/PjStBDDDSQAAANIAAAAQ81GT0MJNFAAAA0gAAABKHn1dKYo6WMhkGwZlZh+IjEkaFIhx1RImTWSm5pemaqa0tganV45rygnCp5BOcqu2JrRqSubsN6cJM0rOC87KpQIunHIKrtIUqe+ElJtKu9xtIi9MqHIehJgdJn8l/+1v/oACwIIGAAC0nnp44a4wsCsLQO5BxkypGIg9lMw3htzpmzrSXtgSuahaJc2lQ1AdiWU4OOHFZgRtBD7SNht6kx0CmgsKMsGLlujJo1SXYYoZ+kj4ACGCAmbBlqBADoNWqt2My+extwucHgQXCIapaFvhkDAFBGozLIaq137qX5flgnokmY0KhISPHi4OERN5WdSK7EpZA8Ay3CM0taWO5PwwkwOAlWp4GAKFwRZi3QLgZa+jty1wW4QVA7k8yfi3J5Rbmrkss0/QSJac6NE0FDdnSqq11Nl0TP1qb///////7n////////8YZP2mdWhoiFhWdkRrvNrbI2gADIQYqAaiJaD0cpgMDy+YABJhMIigBQFGAwUYQF5UIZlSP/+5JkyYADtUFP5WEgAgAADSCgAAEdXYEbGa0AAAAANIMAAADhAiMHDsws9M7Ozt3A0sHkb1Gok5sRwBA00x3MxRjVR5f0NNeBwuRAjS1vNCYe87oz8qcJQZWUu3GlrwwmVRgQAFgkvbEZxpTYlBntSbhxpj0PA6q5SIMWQ+S5XK1T9Xkps7DQ4Ga5AjXWT4NxdiBlV5BFrUq07NyNP85MBuBDTbvi6kMZwbDM1DbrZulp6u1ZTr62NWq4rfNbcedrUMzF5dduXcKWcs6q1Q0HcjKf3EhxONwOCQ2GMJAkAgAE8beG31SsmvGwQ+6YODjQhowECDB2nZaYkZCILMeNzBAd+XVP9kxb1FIPf9y6wFINAgAXKxLveliiYEArHAB5csYlMUovzDCwyLwGPJQAYAZASaaeZisGQWuUHSq4gRTGLNPVqRTZgrSLAMLRmR4KBkeR0FWiXtJjluWw1Rw/DExFJu+4S2H6aarbDK3oddqEtu0d/KK3UwvZ9tZVXCtQdBeDrvhH5ZFm3jzWmCv+0yIOhz//n7//905JG4KpalLT//uSZNeABwdJUP5zYAAAAA0gwAAAHFU/M7m8gBAAADSDAAAAZ0e4W/dE883Uikows2v6hifgqH76IEAAAD8FUBYq/bwTjiukyyMx19JK6anbhOyygIye4gBRn4QQuJLlWaQ9Tef5TWgn6n3BVPXZxqZXKlgWHiPY1avFwWE8ag9nZQHyfrCXJDDMsb4sK2rH1mKp2TotdFGfbaquiJ1sqjnmkcZsMZ0p85k64rCAqfieZXNYcF0ha4MhUSsU1G1WlmkzGaCamUYch9phFLgv6BPYvk6TRxmKM+TXSa4VzabsiPUDcwttUQ8guLdElhv82vSPOS0CQ5oiAIAGFjEQKjURYEqbyJjN6jkUDS3wF2sOiUs2Ss0SwIIChzo5Dxql4JQp2qT9qMmoq+mZoGGkNtrh31CCKDCVP1aMTRUlOYZL7EMgdtLhR0tVvWnmYx6xlBrLMkyxsDF0laVDE00KNMUg9G5M71O8LjkL5XTVO6ABEQAAAAMEoxh4VBpHvglBugQB4LtD0PUQtitHcL8I4Ogv51nGJIdI/znW106HyDiAg//7kmS0gvXhVEzHZeACAAANIOAAAQ8BNUXHpM/AAAA0gAAABBBml4QPYmd4wHOZpTjUBRbgOosqTjBpkqeYy3aT3p3aO0Z3b/2zd2aHxHTKxHi3cvEgM9OxTkSzdc2bgwhDpvSRQQKg9bFSKuhe4pUAQRhlVdUkCp7GKB8YWahkQLpyiQNMCAFW4woNBATQ1vnpngbnOJqsJJoATUcPDoi5A6RtPjpiGoUKTHWeZhg6GpgklOgYNAO/bXHbgB3l6M0bG762mku0tEuuGDsPa2/S4Ef33X0vFW9myPaDSChbB7V0WH7ijW1lo5y+XOxSx5+AKGMY5vQCeW1pYb1vVk5+Oo1hMQlNqLFjeMPOwXfbYpNkKpy5SzeWZWa26savjyd5O4kGhOFAA0IW8tYqS0NAAgAAAAMWBFdRF9YKWWMk43AHTEgQBQAZPAbpF7jHdJNumUw8CJIw9iA0DzCxWBIRBAEQrljV0nkGjLQDX40F7qGVU6TJEfZnN8lCuhaRm8Yk0GRmXHMchgny5D6v4tkEVKqK4Ze9LyVwagPoF2Ii7z7/+5Jk2QHz6EnS8e8xcAAADSAAAAEYBSVJbmWPwAAANIAAAATx9eZuJLkb1rcdc7QXPT4axL5hucuYCkHDcgo79PVXvhf8/XHIMwaOEMte0ZlQsOYsfgtE2v/IBWJaljkbR6fq2FTLDJ2vpt61bX5T8v1/cnOlgd1gxLvyZSwCAAAA2bjLHDrrLU6MYgYmCjcHApq60jAhNONlEDCNqDtMfiAJDBlUxGVAdDMjwtvgZZHeqsfzOMrfYudBtbnMZ2XIIlLKLd+kT2QvCKOvTaxbkXeJDtkhNNOwIpkqMoAweXY4u0xJEFRxmlm/H2VOu0Fl8j+/DMJay+j8WMasM2FnwkShUMiA+QPihyElG/7gzKEHLkTXlresUDToQRfMdybFBZF/u/8OVWtQAgAAAAAAAUiGr5l2UCDAVDFZwslw4Bw/m6k67AUGJ0iSDwEg2o3idKd4MARq4VsOma16bwFCR66rvleZgoQmSmz3CUWoALhzmtyuFXhGEaQF3tqzUgsxEziKX9DsxlecICiNfyqRu9thooO396pjQYTitzyZ1rkz//uSZPkD9mNRU3OZZVAAAA0gAAABFVkPVc5hM4gAADSAAAAE9M7tH+vdQfSUdiFnF4ZFnCh5hUIMde5K3DcLSOfTt1Gwe7uXUpZqt9bbufq3rt/+WO//LjtPv4TPAhP85rPyVoABEwExWNuxI3ySvMTBHAyBhcDUGV9w6pUYCAecXreYBAKqZT5cYwPARyTAQQhKFmfQ6+rrUccHGwMQ7saxg+346lM0/34rTVAo2wfHN+J+y+4umyyVXH/qx0YMNjuFwzBjrzUpTQH04HlDpy3T/Er6/71aG7tLOA1VUMeudnpVgX+tYfn8xcIgYpGtXu8iVz692lxwjbQs6ZmJgOgQRSPixW0rAyqtt4Nx2xFOerBdEV7SFu/b0Qv/+frV8tTyykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqfQCAAAAAABqtFdpCy482NFwwspgMLodYa1SDWqAwIHdFQBgvzBeiCrgA0IhE4NBbnc76h4s2z2zf7ivKtf+bsbmE9IVV3J9Q+/gsmM45xq7BQP/7kmT8BvXLWlR7mVzgAAANIAAAARgBW0ku5XPAAAA0gAAABMUA9RWTxCesLAGIiFWeUZ+gUoKEyfH6mUslBMHP8bXx932S0VrDsCGDbeJthQPjronGBwEo8fEPCALB8qQ9JDVC2/VVd1Uul89s8/+9f/lSjNvsABKA5FGIsndVq6QoCwYsYE0BUGK7Y0IQeYaoxoOKmBhAWrVjKAIRApXZVtBzsE24lKaebMRNXuNPTWvxQpnO/qVVET0odVbExWQbMlBpuqSVZx4wlD3CXteh6H50ZBA2yENarf3gXsLttpFn9fa88K3jMDajZlGdRrAiBdWU/PcwCgVY3Fl0ZSZ+p2qcCcK6TUXAGNarvZUK5BOLmZpTuWfHbaCCYVI1I49MQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpJUAEAAB9AABeJgJp1kTHLWAUPMiFsOCbponvxAzeGGSQc1Co0H2WQA+r4x8QJX5znb9WmRyT5VUcOCIrI3oTNo6O/y22J2a/f/83ZREn/+5Jk6Ab1HVbT65hEcAAADSAAAAEVbSdHbmUxwAAANIAAAAR/MKnI4FWUmdSU7vLAjxb28a3aiqzN93M7X0KQsD/ju9uAmn26mvz0b3iKg7KjTbZWDwkMV1qKmJqMHmQ2FAXDxBTJcBNl0fmjAAAwAAAAQJTsGQHHl9jgaMA4oRgZrhEGYkIwCKAoxnNzoswMPhEIAiJi8xYMlzTApvDAu5Fi7SZ3DEPSraRk28ZfFsUX+M25VYm2GK+7fxkdVsZwqtChiT1JywIIkI2hxrOHo2wsCjMSpppypVEY2GLX4znuUQY+Is1LLFJH6FYAaEfOGKs5RXc8refb05XaPB0/rCtnYvfvLHCRABnF4K05G76zZG/ba2/nXjuuSKuFT+pFTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUpAAAAACoAAF4oEZWsKxqZboxkzdtVDEljSiKppGDKZ8AghC/z9xpyHZBQaRBdNnzW5tPpjzeTL301Z//uSZOYA9LREVHuYLHAAAA0gAAABFoUtQ05lM8AAADSAAAAEmE9/3tVppxtfz8tI7qmleGGV2UEgNEI/3uGZ+I11WucZPdLdqxukMkUe2fhyMBH7gw83oBV/1fd/rtUXMyx8XEzViqX7w+381u81qg64FJqx3D47AGAAEgSnHKLk32YpvGdRUIxvGBgBc9pjxGCgkHDwYlACOs/LJk0k7iAUAwFovPSm1SEqR4ER1MyibvNSpfvXLOmqKEUm5dWjESMUWAyuxPyGNjhBg7THehcXkbcQaRmt14cJiVpppDN/HZdTzDZQLMiDKc4ei/IZYNIreNDK62IAETmxRhITMecU9KFVG2Wji0C7PwgQio8VG8BEkM6qnEy1vOfuM3/mVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVSmAYAAACAAABUoAKqun9yWLLzjUtoalKg0plLuGGhx+wG51SihxmEKQ/j2OO98IQurKIjWmZDUg7HX//twluVnerLxojSfCYxp6q//7kmTchPRvTVR7b0cQAAANIAAAARUtNUWO4ROAAAA0gAAABAT3WMqeesugLNnJmkqZ6T13c7dsyhfbmZa7q/K1g7W7V7LUTfliZsgYlHJCwqkaXpFeHPIjjCxKLh4+ULDDt7nDq/UmAAJCGITwoAmsAgAFgcm9nYnDAwOFqhphkTmPzSbR8Z7QdGSBcDAOYLHZAMEakgb7KoOjedE4RgWX7n8bnv+1hrNq5Z3Mu2kE887B0tvsHKhSizsx5riuIRNDhWDSqal7GmWp1DeKCRPtDkpec8mgx9Yu69I6gp+OuBIofuwtP8u9Tuo5HJmWihZqKagy9MZ/fr27FSxFf1fy1OUE/nf/l3Kkzsdyps7NvOraxoLdb7/eVdVcbrERthVMQU1FMy4xMDBVVVWUgAAABJpLQABGcoWEIyBAUMB0BmDgYYmJRmNamJggZOXBicFiqzGjYYNsoZNQriTGgBMJV0wgFHBB5nDRDOM1Q5iRIAPLPuMEIEwc2ALBQCG1vP0i++jsXFO3sTTXfmsR0wEo8bNGoRItzWLADNJQjUx9rzv/+5Jk5IT0cUPTe3gccAAADSAAAAEXJS9AlcwACAAANIKAAARYltbRATG41Cih6eXKx9tW6oAHMZ8s9nCimlH2KS9kTWhYGq4Fm21FgduULyc6NR9472U7ParU3c9WcblWvLKsYgSYf+V08CTFLQV5+H6TWM3b7qtZqS+vSYz93H3HgvF5HUkz/wHNu5GP/////////+5c7///////4S+X25ZSWJfT26SksU9P////4EDGraAAABARclN0elZN4txOjSUTeT4gw9RClUiRbQcoGUAIRj5cuXLjIyWrQUFBQYKCgoKN/wUG/+BQKCisjgoKfF+KCgov//IFFfFBv/4X//Tf/gUK//v/+FX/+kv/8gUV0FBgr4QUCiugoMFPCgoFTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//uSZPmACBVmUmZzIAAAAA0gwAAADew7Vbz2AAgAADSDgAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ=="};n(437),n(438),n(439);function _f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(t);if(e)for(var i in e)null!==e[i]&&r.setAttribute(i,e[i]);return n&&n.forEach((function(t){if(t)if("string"==typeof t){var e=document.createElement("span");e.innerText=t,r.appendChild(e)}else"string"==typeof t.html?r.innerHTML+=t.html:r.appendChild(t)})),r}var kf=function(){function t(){this.storeMap={},this.itemMap={}}var e=t.prototype;return e.setStore=function(t,e){this.storeMap=t,this.itemMap=e},e.updateStoreByElements=function(t,e){var n=this;t.map((function(t){if(t.type&&"gap"!==t.type&&"ok"!==t.type&&"ok_cancel"!==t.type&&"ok_cancel_other"!==t.type)if("cluster"!==t.type&&"view"!==t.type){if(t.item_id)switch(t.type){case"check_box":case"radio":var r=B()("#"+e+" #"+t.item_id).is(":checked");n.storeMap[t.item_id].value=r;break;case"static_text":case"button":var i=B()("#"+e+" #"+t.item_id).text();n.storeMap[t.item_id].value=i;break;case"edit_text":var o=B()("#"+e+" #"+t.item_id).val();n.storeMap[t.item_id].value=o}}else n.updateStoreByElements(t.elements,e)}))},e.getAlignStyle=function(t){var e="";switch(t){case"align_left":e+="text-align:left;";break;case"align_center":e+="text-align:center;";break;case"align_right":e+="text-align:right;"}return e},e.getElementStyle=function(t){var e,n="";if(t.width&&!Vt.isMobile&&(n+="width:"+t.width+"px;"),t.height&&(Vt.isMobile?n+="min-height:200px;":n+="height:"+t.height+"px;"),t.char_width&&!Vt.isMobile&&(n+="width:"+10*t.char_width+"px;"),t.char_height&&(n+="height:"+10*t.char_height+"px;"),"edit_text"===t.type){var r="resize:none;";t.width||t.char_width||(r+="width:100%;"),n+=r}else"check_box"===t.type||t.type;return t.align_children&&(n+=this.getAlignStyle(t.align_children)),t.alignment&&(n+=this.getAlignStyle(t.alignment)),t.multiline||"static_text"!==t.type&&"edit_text"!==t.type||(n+="white-space: nowrap;"),(e=t.whiteSpace)&&(n+="white-space: ".concat(e,";")),t.bold&&(n+="font-weight:600;"),t.italic&&(n+="font-style:italic;"),t.border&&(n+="border:"+t.border),n},e.buildWithWrapper=function(t,e){var n="js-item-wrapper";return e&&"button"===e.type&&(n+=" btn-wrapper"),_f("div",{class:n},[t])},e.buildCheckBox=function(t,e){var n=t.name,r=this.storeMap[t.item_id],i=document.createDocumentFragment();return i.appendChild(_f("input",{type:"checkbox",checked:r&&!0===r.value?r.value:null,id:t.item_id,style:e})),i.appendChild(_f("span",{},[n])),this.buildWithWrapper()},e.buildRadio=function(t,e){var n=t.name,r=t.group_id,i=this.storeMap[t.item_id],o=document.createDocumentFragment();return o.appendChild(_f("input",{type:"radio",checked:i&&!0===i.value?i.value:null,name:r,id:t.item_id,style:e})),o.appendChild(_f("span",{},[n])),this.buildWithWrapper(o)},e.buildStaticText=function(t,e){var n=t.name?t.name:"";if(n=unescape(n.replace(/\\/g,"%")),t.item_id){var r=this.storeMap[t.item_id];r&&r.value&&(n=r.value+"")}return this.buildWithWrapper(_f("div",{id:t.item_id,style:e},[n]))},e.buildButton=function(t,e,n){if(!n){n=t.name?t.name:"",n=unescape(n.replace(/\\/g,"%"));var r=this.storeMap[t.item_id];r&&r.value&&(n=r.value+"")}return n||(n=_f("span",{style:"color: transparent"},["A"])),this.buildWithWrapper(_f("button",{style:e,type:"submit",id:t.item_id,class:"pdf_js_btn btn btn-outline btn-xs btn-circle"},[n]))},e.buildEditText=function(t,e){t.readonly;var n,r=this.storeMap[t.item_id],i="";return r&&r.value&&(i=r.value),0==i.length&&(i=t.value),n=t.multiline?t.readonly?_f("div",{style:e+";height:unset",name:"",id:t.item_id,readonly:"true"},[_f("pre",{style:"white-space:pre-line"},[i])]):_f("textarea",{style:e,name:"",id:t.item_id},[i]):t.password?_f("input",{style:e,type:"password",value:i,name:"",id:t.item_id,readonly:t.readonly?"true":null}):t.SpinEdit?_f("input",{style:e,type:"number",value:i,name:"",id:t.item_id,readonly:t.readonly?"true":null}):_f("input",{style:e,type:"text",value:i,name:"",id:t.item_id,readonly:t.readonly?"true":null}),this.buildWithWrapper(n||document.createDocumentFragment())},e.buildListBox=function(t,e){},e.buildView=function(t,e){var n=[];for(var r in t.elements)n.push(this.JSWindowToHTML(t.elements[r]));var i="js-view-component";return"align_row"===t.align_children&&(i+=" children-in-row"),_f("div",{class:i,style:e},n)},e.buildCluster=function(t,e){var n=[];for(var r in t.elements)n.push(this.JSWindowToHTML(t.elements[r]));var i="js-cluster-component";"align_row"===t.align_children&&(i+=" children-in-row");var o=t.name?t.name:"";return _f("div",{class:i,style:e+"position:relative;"},[_f("fieldset",{style:"text-align: left; border-color: gray; border-style: solid; border-width: 1px;"},[_f("legend",{style:"background:white"},[_f("span",{},[o=unescape(o.replace(/\\/g,"%"))])]),_f("div",{},n)])])},e.buildOkCancelOther=function(t,e){var n=document.createDocumentFragment(),r=this.buildButton({item_id:"jscancle",type:"button"},"",t.cancel_name?t.cancel_name:"Cancel"),i=this.buildButton({item_id:"jsok",type:"button"},"",t.ok_name?t.ok_name:"Ok"),o=this.buildButton({item_id:"jsother",type:"button"},"",t.other_name?t.other_name:"Other");if("ok"===t.type)n.appendChild(i);else if("ok_cancel"===t.type)n.appendChild(i),n.appendChild(r);else{if("ok_cancel_other"!==t.type)return n;n.appendChild(i),n.appendChild(o),n.appendChild(r)}return _f("div",{class:"js-buttons",style:e},[n])},e.JSWindowToHTML=function(t){t&&t.item_id&&t.type&&(this.itemMap[t.item_id]||(this.itemMap[t.item_id]={}),this.storeMap[t.item_id]||(this.storeMap[t.item_id]={}),this.storeMap[t.item_id].type=t.type,this.itemMap[t.item_id].type=t.type);var e,n=this.getElementStyle(t);switch(t.type){case"button":e=this.buildButton(t,n);break;case"check_box":e=this.buildCheckBox(t,n);break;case"radio":e=this.buildRadio(t,n);break;case"list_box":case"hier_list_box":break;case"static_text":e=this.buildStaticText(t,n);break;case"edit_text":e=this.buildEditText(t,n);break;case"popup":break;case"ok":case"ok_cancel":case"ok_cancel_other":e=this.buildOkCancelOther(t,n);break;case"view":e=this.buildView(t,n);break;case"cluster":e=this.buildCluster(t,n)}return e||document.createDocumentFragment()},e.buildDialogWrapper=function(t,e,n){return'<div id="'+t+'" class="js-window-modal modal fade bs" ><div class="js-modal-dialog modal-dialog " style="'+e+'" ><div class="modal-content "><div class="modal-header" ><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><div class="modal-title">'+n.i18n.t("viewer_:pdfjs.windowTitle")+'</div></div><div class="modal-body" ></div><div class="js-warning-footer" ><div class="js-warning" ><span >'+n.i18n.t("viewer_:pdfjs.windowWarning")+"</span></div></div></div></div></div>"},t}(),Ff=function(){function t(t,e){this.componentUtils=new kf,this.callback=e,this.dialogId="jsWindow",this.monitor=t,this.width=void 0,this.height=void 0,this.storeMap={},this.itemMap={},this.componentUtils.setStore(this.storeMap,this.itemMap)}var e=t.prototype;return e.updateComponents=function(){if(B()("#"+this.dialogId).length>0)for(var t in this.itemMap){this.itemMap[t].disabled?B()("#"+this.dialogId+" #"+t).addClass("disabled"):B()("#"+this.dialogId+" #"+t).removeClass("disabled")}},e.enable=function(t){for(var e in t){var n=t[e];this.itemMap[e]||(this.itemMap[e]={}),this.itemMap[e].disabled=!n}this.updateComponents()},e.end=function(t){this.callback&&this.callback(t),B()("#"+this.dialogId).hide()},e.load=function(t){for(var e in t){var n=t[e];this.updateStoreItem(e,n)}},e.store=function(){if(0===B()("#"+this.dialogId).length)return{};this.componentUtils.updateStoreByElements(this.monitor.description.elements,this.dialogId);var t={};for(var e in this.storeMap){var n=this.storeMap[e];t[e]=n.value}return t},e.updateStoreItem=function(t,e){this.storeMap[t]={value:e}},e.getStore=function(){return this.storeMap},e.getCallbacks=function(t){var e="";for(var n in t)if("description"!==n&&"initialize"!==n&&"validate"!==n&&"commit"!==n&&"destroy"!==n){var r=t[n];"function"==typeof r&&(this.itemMap[n]||(this.itemMap[n]={}),""!==e&&(e+=","),e+="#"+n,this.itemMap[n].callback=r)}return e},e.initialize=function(t){var e=this,n="";void 0!==this.monitor.description.width&&(this.width=this.monitor.description.width,n+="width:"+this.width+"px;"),void 0!==this.monitor.description.height&&(this.height=this.monitor.description.height,n+="min-height:"+this.height+"px;"),this.monitor.initialize(this);var r=document.createDocumentFragment();for(var i in this.monitor.description.elements)r.appendChild(this.componentUtils.JSWindowToHTML(this.monitor.description.elements[i]));var o=this.dialogId,a=this.componentUtils.buildDialogWrapper(o,n,t),s=this.getCallbacks(this.monitor);B()("#"+o).length>0&&B()("#"+o).remove();var c=B()(a);return c.find(".modal-body").append(r),B()("body").append(c),this.updateComponents(),B()("#"+o+" #jsok").off("click").on("click",(function(t){e.monitor.validate&&e.monitor.validate(e),e.monitor.commit&&e.monitor.commit(e),e.monitor.ok&&e.monitor.ok(e),e.monitor.destroy&&e.monitor.destroy(e),e.end("ok")})),B()("#"+o+" #jscancle, #"+o+" .close").off("click").on("click",(function(t){e.monitor.cancel&&e.monitor.cancel(e),e.monitor.destroy&&e.monitor.destroy(e),e.end("cancel")})),B()("#"+o+" #jsother").off("click").on("click",(function(t){e.monitor.other&&e.monitor.other(e),e.monitor.destroy&&e.monitor.destroy(e),e.end("other")})),B()("#"+o+" .modal-dialog").off("click",s).on("click",s,(function(t){for(var n=t.target;!n.id;)n=n.parentElement;var r=n.id;e.itemMap[r].callback&&e.itemMap[r].callback(e)})),!0},e.doModal=function(){B()("#"+this.dialogId).show()},t}(),Mf=function(){function t(){for(var t in this)"function"==typeof this[t]&&(this[t].toString=function(){return"function(){[native code]}"})}return t.prototype.toString=function(){return"[object "+this.constructor.name+"]"},Tt()(t,null,[{key:"name",get:function(){return"Object"}}]),t}(),Of=function(t){function e(){var e;e=t.call(this)||this;var n=arguments[0];return e.change="",e.changeEx="",e.events=[],e.init(n),e}O()(e,t);var n=e.prototype;return n.init=function(t){for(var e in t){var n={};n[e]=t[e],this.add(n)}},n.add=function(t){for(var e in t)this.events[e]||(this.events[e]=[]),this.events[e]=t[e]},n.dispatch=function(){},n.remove=function(t){},Tt()(e,null,[{key:"name",get:function(){return"event"}}]),e}(Mf),Lf=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.addStockEvent=function(){},n.alertFileNotFount=function(){},n.alertSelectFailed=function(){},n.argsDWIM=function(){},n.canPlayOrAlert=function(){},n.computerFloatWinRect=function(){},n.constrainRectToScreen=function(){},n.createPlayer=function(){},n.Events=function(t){return new Of(t)},n.getAltTextData=function(){},n.getAltTextSettings=function(){},n.getAnnotStockEvents=function(){},n.getAnnotTraceEvents=function(){},n.getPlayers=function(){},n.getPlayerStockEvents=function(){},n.getPlayerTraceEvents=function(){},n.getURLData=function(){},n.getURLSettings=function(){},n.getWindowBorderSize=function(){},n.openPlayer=function(){},n.removeStockEvents=function(){},n.startPlayer=function(){},Tt()(e,[{key:"align",get:function(){}},{key:"canResize",get:function(){}},{key:"closeReason",get:function(){}},{key:"ifOffScreen",get:function(){}},{key:"layout",get:function(){}},{key:"monitorType",get:function(){}},{key:"openCode",get:function(){}},{key:"over",get:function(){}},{key:"pageEventNames",get:function(){}},{key:"raiseCode",get:function(){}},{key:"raiseSystem",get:function(){}},{key:"renditionType",get:function(){}},{key:"stauts",get:function(){}},{key:"trace",get:function(){}},{key:"version",get:function(){}},{key:"windowType",get:function(){}}],[{key:"name",get:function(){return"AppMedia"}}]),e}(Mf),Nf={yellow:["CMYK",0,0,1,0],white:["G",1],transparent:["T"],red:["RGB",1,0,0],magenta:["CMYK",0,1,0,0],ltGray:["G",.75],green:["RGB",0,1,0],gray:["G",.5],dkGray:["G",.25],cyan:["CMYK",1,0,0,0],blue:["RGB",0,0,1],black:["G",0],equal:function(t,e){},convert:function(t,e){var n,r,i;if(e==t[0])return[].concat(t);switch(t[0]){case"T":n=-1,r=-1,i=-1;break;case"G":n=r=i=t[1];break;case"RGB":n=t[1],r=t[2],i=t[3];break;case"CMYK":n=(1-t[4])*(1-t[1]),r=(1-t[4])*(1-t[2]),i=(1-t[4])*(1-t[3])}switch(e){case"T":return;case"G":return["G",(n+i+r)/3];case"RGB":return["RGB",n,r,i];case"CMYK":var o=1-n,a=1-r,s=1-i,c=Math.min(Math.min(o,a),s);return 0!=c?(temp2=Math.round(rep_v/100*c),Math.round(100*temp2),Math.round(100*(o-temp2)),Math.round(100*(a-temp2)),Math.round(100*(s-temp2))):(Math.round(100*o),Math.round(100*a),Math.round(100*s),0),["CMYK",n,r,i]}}},Vf=Nf,Bf=2,Uf=function(t){function e(e,n,r){var i;return(i=t.call(this)||this)._backgroudColor=Vf.yellow,i._clickAdvances=!1,i._isFullScreen=!0,i._cursor=Bf,i._defaultTransition="",i._escapeExits=!1,i._loop=!1,i._timedelay=3,i._transitions="",i._usePageTiming=!1,i._useTimer=!1,i}return O()(e,t),Tt()(e,[{key:"backgroudColor",get:function(){return this._backgroudColor},set:function(t){}},{key:"clickAdvances",get:function(){return this._clickAdvances},set:function(t){}},{key:"cursor",get:function(){return this._cursor},set:function(t){}},{key:"defaultTransition",get:function(){return this._defaultTransition},set:function(t){}},{key:"escapeExits",get:function(){return this._escapeExits},set:function(t){}},{key:"isFullScreen",get:function(){return this._isFullScreen},set:function(t){this._isFullScreen=t}},{key:"loop",get:function(){return this._loop},set:function(t){}},{key:"timedelay",get:function(){return this._timedelay},set:function(t){}},{key:"transitions",get:function(){return this._transitions},set:function(t){}},{key:"usePageTiming",get:function(){return this._usePageTiming},set:function(t){}},{key:"useTimer",get:function(){return this._useTimer},set:function(t){}}]),e}(Mf);n(176);function jf(t){if("object"!==_()(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var Hf=new Uf,Wf=function(t){function e(e,n){var r;return(r=t.call(this)||this).jsEngine=e,r.viewerApp=n,r._calculate=!0,r._fullscreen=!0,r._fs=Hf,r.dialogQueue=Promise.resolve(),r.viewerApp.eventEmitter.on("will-close-document",(function(){r.modalDialog&&r.modalDialog.end("cancel")})),r}O()(e,t);var n=e.prototype;return n.popUpMenu=function(){for(var t=this.viewerApp.i18n.t("viewer_:pdfjs.popupMenu"),e={},n=function n(r){var i=1;return function(o){var a,s=Object.prototype.toString.call(o);if(s.indexOf("String")>-1&&"-"!==o)a=void 0!==r?"".concat(r,"-").concat(i):String(i),t+="".concat(a,". ").concat(o," \n"),e[a.trim()]=o,i++;else if(s.indexOf("Array")>-1){var c;c=r?"".concat(r,"-").concat(i):String(i),t+="".concat(c,". ").concat(o[0]," \n"),e[c.trim()]=o[0],void 0!==r?o.slice(1).forEach(n("  ".concat(r,"-").concat(i))):o.slice(1).forEach(n("  ".concat(i))),i++}}},r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];i.forEach(n());var a=prompt(t,"");if(null===a)return null;for(var s in e)if(e.hasOwnProperty(s)&&a.trim()===s)return e[s]},n.response=function(t){var e=t.cQuestion,n=(t.cTitle,t.cDefault);t.bPassword,t.cLabel;return window.prompt(e,n||"")},n.beep=function(t){var e;switch(t){case 0:e="error";break;case 1:e="warning";break;default:e="error"}var n=new Audio(Tf[e]);n.addEventListener("load",(function(){n.play()}),!0),n.autoplay=!0},n.alert=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.jsEngine.getEvent().isSensitiveCheck&&!this.jsEngine.getEvent().isLoading){var r=this.jsEngine.getEvent();if(!r.isSensitiveCheck&&!r.isLoading){var i,o;t&&t.nType;switch(i=n,t&&void 0!==t.nType&&(i=t.nType),o=null==t?"undefined":jf(t)?t.cMsg+"":t+"",i){default:case 0:return alert(o),0;case 1:return confirm(o)?1:2;case 2:case 3:return confirm(o)?4:3}}}})),n.alertAsync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.alert.apply(this,e)},n.clearInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){clearInterval(t)})),n.clearTimerOut=function(t){clearTimeout(t)},n.launchURL=function(t){if(this.jsEngine.getEvent().isSensitiveCheck||this.jsEngine.getEvent().isLoading)this.jsEngine.sensitiveOp=!0;else{if(/\w*:\/\/[\s\S]*/.test(t)){if("file"===t.match(/(\w*):\/+[\s\S]*/)[0])return}else t="http://"+t;var e=t.lastIndexOf("@"),n=t;if(-1!=e){n=t.substr(e+1);var r=t.indexOf("//");-1!=r&&(n=t.substr(0,r+2)+n)}var i=this.viewerApp,o=JSON.parse(localStorage.getItem("TRUST_SITE_SET"))||{},a=o.siteList,s=void 0===a?[]:a,c=o.siteRight,u=void 0===c?"always":c,d=o.type,l=void 0===d?"custom":d,h=i.i18n.t("viewer_:pdfjs.launchURLHint"),f=i.i18n.t("viewer_:pdfjs.blockTip");if("custom"===l){var p=s.find((function(t){return n.includes(t.url)}));if(p)return"allow"===(""+p.access.split(" ")[1]).toLowerCase()?window.open(n):i.viewerUI.alert({message:"".concat(f,"\n").concat(lf.a.toASCII(n)),level:"warning"});if("always"===u)return i.viewerUI.confirm(h+"\n"+lf.a.toASCII(n)).then((function(){window.open(t)}),(function(){}));if("allow"===u)return window.open(n);if("block"===u)return i.viewerUI.alert({message:"".concat(f,"\n").concat(lf.a.toASCII(n)),level:"warning"})}else{if("allow"===l)return window.open(n);if("block"===l)return i.viewerUI.alert({message:"".concat(f,"\n").concat(lf.a.toASCII(n)),level:"warning"})}}},n._execDialog=function(t){var e=this;return new Promise((function(n,r){var i=new Ff(t,(function(t){n(t)}));e.modalDialog=i,i.initialize(e.jsEngine.PDFViewer),i.doModal()}))},n.execDialog=function(t,e,n){return this._execDialog(t,e,n)},n.execMenuItem=function(){},n.setInterval=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return setInterval(window.eval(t),e)})),n.setTimeOut=function(t,e){var n=this;return setTimeout((function(e){return n.jsEngine.exec(t)}),e)},Tt()(e,[{key:"activeDocs",get:function(){return[this.jsEngine.cacheJSDoc]}},{key:"calculate",get:function(){var t=this.jsEngine.getPDFForm();return!t||t.calculationEnabled},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._calculate=t,this.viewerApp.setAutoCalculateFieldsFlag(t)}},{key:"constants",get:function(){return{algin:{left:0,center:1,right:2,top:3,bottom:4}}}},{key:"focusRect",get:function(){return this._focusRect},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._focusRect=t}},{key:"formsVersion",get:function(){return 7}},{key:"fullscreen",get:function(){return this._fullscreen},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._fullscreen=t}},{key:"fs",get:function(){return this._fs}},{key:"runtimeHighlight",get:function(){return this.viewerApp.highlightControls()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this.viewerApp.highlightForm(t)}},{key:"runtimeHighlightColor",get:function(){return this.viewerApp.getDisplayHighlightColor(this.viewerApp._runtimeColor,this.viewerApp._runtimeColorOpacity,"RGB")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this.viewerApp.setFormHighlightColor(t)}},{key:"viewerVersion",get:function(){return 7}},{key:"viewerType",get:function(){return"Exchange-Pro"}},{key:"viewerVariation",get:function(){return"Business Tools"}},{key:"printerNames",get:function(){return["Web Printer"]}},{key:"platform",get:function(){var t=window.navigator.platform,e=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?e="MAC":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?e="WIN":!e&&/Linux/.test(t)&&(e="UNIX"),e}},{key:"language",get:function(){var t,e=navigator.language||navigator.userLanguage;return[{language:"zh-CN",code:"CHS"},{language:"zh-HK",code:"CHT"},{language:"zh-TW",code:"CHT"},{language:"da",code:"DAN"},{language:"de",code:"DEU"},{language:"en",code:"ENU"},{language:"es",code:"ESP"},{language:"fr",code:"FRA"},{language:"it",code:"ITA"},{language:"ko",code:"KOR"},{language:"ja",code:"JPN"},{language:"nl",code:"NLD"},{language:"nb",code:"NOR"},{language:"pt-BR",code:"PTB"},{language:"fi",code:"SUO"},{language:"sv",code:"SVE"}].some((function(n){e.indexOf(n.language)>-1&&(t=n.code)})),t}},{key:"numPlugIns",get:function(){return 2}},{key:"plugIns",get:function(){return[{name:"Annots",certified:!0,loaded:!0,path:"",version:7},{name:"Forms",certified:!0,loaded:!0,path:"",version:7}]}},{key:"media",get:function(){return new Lf(this.jsEngine)}}],[{key:"name",get:function(){return"app"}}]),e}(Mf),$f=new kt,Yf=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"!=typeof t)return Promise.resolve();if(e)return Promise.resolve(t());var n=$f.exec(t);return n.catch((function(t){return console.error(t)})),n},qf={always:0,never:1,tooBig:2,tooSmall:3};function Gf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t&&t.getControlByIndex(e).getWidget()}function zf(t){var e;if(t)for(var n=0;n<t.getControlsCount();n++)if(e=t.getControlByIndex(n).getWidget())return e;return e}function Kf(t,e,n,r){if(t)return t[n].apply(t,r);e&&e.length>0&&e.forEach((function(t){return t[n].apply(t,r)}))}var Jf=function(t){function e(e,n,r){var i;return(i=t.call(this)||this).jsEngine=e,i.field=n,i.fields=r,i.targetField=i.field||i.fields[0],i._readonly="",i._required="",i._value="",i}O()(e,t);var n=e.prototype;return n.destroy=function(){this.fields=null,this.field=null,this.targetField=null,this.jsEngine=null},n.setItems=function(t){if(Array.isArray(t))return Kf(this.field,this.fields,"setItems",[t]),t},n.buttonGetIcon=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=zf(this.targetField)&&zf(this.targetField).getIconObjNum(t);return"number"==typeof e?{_objNum:e}:e},n.buttonSetIcon=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Kf(this.field,this.fields,"setIconObj",[t,e])},n.browseForFileToSubmit=function(){},n.buttonGetCaption=function(t){switch(t||(t=0),t){case 0:t="normalCaption";break;case 1:t="downCaption";break;case 2:t="rolloverCaption"}return zf(this.targetField).getMKProperty(t)},n.buttonImportIcon=function(t,e){var n=this;return new Promise((function(t){B()("#jsBrowserFile").length>0&&B()("#jsBrowserFile").remove(),B()("body").append('<input id="jsBrowserFile" type="file" style="display: block;visibility:hidden" accept="image/jpg,image/jpeg,image/bmp,image/png"/>'),B()("#jsBrowserFile").off("change").on("change",(function(e){var r=e.target.files[0];if(!r)return-2;var i=new FileReader;i.readAsArrayBuffer(r),i.onload=function(){var e=new Uint8Array(i.result);n.buttonSetIcon(e,0),t(0)}})),B()("#jsBrowserFile").click()}))},n.buttonSetCaption=function(t,e){if(!this.jsEngine.getEvent().isSensitiveCheck){switch(e||(e=0),Array.isArray(t)&&1===t.length&&(t=t[0]),"string"!=typeof t&&(t+=""),e){case 0:e="normalCaption";break;case 1:e="downCaption";break;case 2:e="rolloverCaption"}Kf(this.field,this.fields,"setMKProperty",[e,t])}},n.checkThisBox=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.jsEngine.getEvent().isSensitiveCheck){var n=this.field;if(n.getType()===Ln.RadioButton||n.getType()===Ln.CheckBox){var r=n.getWidget(t);if(!r)return;e?n.setValue(r.getOnAS()):n.getValue()===r.getOnAS()&&n.setValue("Off",null,!0)}}},n.clearItems=function(){this.jsEngine.getEvent().isSensitiveCheck||Kf(this.field,this.fields,"clearItems",[])},n.defaultIsChecked=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.jsEngine.getEvent().isSensitiveCheck&&this.targetField&&(this.targetField.getType()===Ln.RadioButton||this.targetField.getType()===Ln.CheckBox)){var n=Gf(this.targetField,t),r="Off";e&&(r=n?n.getOnAS():"Yes"),Kf(this.field,this.fields,"setDefaultValue",[r]),Kf(this.field,this.fields,"setValue",[r])}},n.deleteItemAt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.field.getValueIndex();if(!this.jsEngine.getEvent().isSensitiveCheck){if("number"!=typeof t&&(t=parseInt(t)),void 0===t)throw new Error("invalid parameter, expected integer.");Kf(this.field,this.fields,"deleteItems",[t])}},n.getArray=function(){},n.getItemAt=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"!=typeof t&&(t=parseInt(t)),void 0===t)throw new Error("invalid parameter, expected integer.");var n=this.targetField;if(n.getType()===Ln.ListBox||n.getType()===Ln.ComboBox){var r=n.getOptions();-1===t&&(t=r.length-1);var i=r[t];return e?i.value:i.lable}return""},n.insertItemAt=function(t,e,n){if(!this.jsEngine.getEvent().isSensitiveCheck&&this.targetField){var r=this.targetField;r.getType()!==Ln.ListBox&&r.getType()!==Ln.ComboBox||Kf(this.field,this.fields,"insertItemAt",[t,e,n])}},n.isBoxChecked=function(t){var e=this.targetField;if(!this.targetField)return!1;if(e.getType()===Ln.RadioButton||e.getType()===Ln.CheckBox){var n=e.getWidget(t);if(n)return"Off"!=n.getAS()}return!1},n.isDefaultChecked=function(t){if(!this.targetField)return!1;var e=this.targetField;if(e.getType()===Ln.RadioButton||e.getType()===Ln.CheckBox){var n=e.getWidget(t);if(n)return e.getDefaultValue()===n.getOnAS()}return!1},n.setAction=function(t,e){Kf(this.field,this.fields,"setAction",[-1,e])},n.setFocus=function(){var t=this;if(this.targetField){var e=function(t){var e=t.page.info.index;r.on(Ct.renderPageSuccess,(function t(i){i.page.getIndex()==e&&(n.focus(),r.off(Ct.renderPageSuccess,t))})),i.PDFViewer.goToPage(e)},n=this.targetField,r=this.jsEngine.PDFViewer.getEventEmitter(),i=this.jsEngine,o=this.targetField.controls[0].getWidget();if(o)this.jsEngine.PDFViewer.getPDFDocRender().getCurrentPageIndex()==o.getPage().getIndex()?this.targetField.focus():e(o);else Yf((function(n){return t.targetField.controls[0].getWidgetAnnot().then((function(t){t&&e(t)}))}))}},Tt()(e,[{key:"alignment",get:function(){if(this.targetField)return"";switch(this.targetField.getAlignment()){case 0:return"left";case 1:return"center";case 2:return"right"}},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck){var e=0;switch(t){case"left":e=0;break;case"center":e=1;break;case"right":e=2}return Kf(this.field,this.fields,"setAlignmentWithString",[e,t]),t}}},{key:"borderStyle",get:function(){return this.targetField&&this.targetField.getBorderStyle()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setBorderStyle",[t]),t}},{key:"charLimit",get:function(){return this.targetField&&this.targetField.getMaxLength()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setMaxLength",[t]),t}},{key:"comb",get:function(){return!!Nn.isComb(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setComb",[t]),t}},{key:"currentValueIndices",get:function(){return this.targetField&&this.targetField.getValueIndex()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setValueByIndex",[t]),t}},{key:"defaultValue",get:function(){return this.targetField&&this.targetField.getDefaultValue()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setDefaultValue",[t]),t}},{key:"display",get:function(){var t=zf(this.targetField).getFlags();return 2&t?1:4&t?32&t?3:0:2},set:function(t){return Kf(this.field,this.fields,"setWidgetDisplay",[t,!0]),t}},{key:"exportValues",get:function(){return this.targetField&&this.targetField.getExportValues()}},{key:"fillColor",get:function(){var t=zf(this.targetField).getMKProperty("fillColor");return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setFillColor",[t]),t}},{key:"hidden",get:function(){var t=zf(this.targetField).getFlags();return!!(2&t||1&t)},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setHidden",[t]),t}},{key:"highlight",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"lineWidth",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"multiline",get:function(){return!!Nn.isMultiline(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setMultiline",[t]),t}},{key:"name",get:function(){return this.targetField&&this.targetField.getName()}},{key:"numItems",get:function(){if(!this.targetField)return 0;if(this.targetField.getType()===Ln.ListBox||this.targetField.getType()===Ln.ComboBox)return this.targetField.getOptions().length;throw new Error("invalid field type: only list box and combo box available.")}},{key:"password",get:function(){return!!Nn.isPassword(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setPassword",[t]),t}},{key:"print",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"radiosInUnison",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"readonly",get:function(){return!!Nn.isReadOnly(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setReadonly",[t]),t}},{key:"required",get:function(){return!!Nn.isRequired(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setRequired",[t]),t}},{key:"type",get:function(){if(!this.targetField)return"unknown";switch(this.targetField.getType()){default:case 0:return"unknown";case 1:return"button";case 2:return"checkbox";case 4:return"combobox";case 5:return"listbox";case 3:return"radiobutton";case 7:return"signature";case 6:return"text"}}},{key:"value",get:function(){if(this.targetField){var t=this.targetField.getValue();return""==t?"":isNaN(t)?t:+t}},set:function(t){var e=this;if(!this.jsEngine.getEvent().isSensitiveCheck&&this.targetField){var n,r=this.jsEngine.PDFViewer.getPDFDocRender().formRender.control,i=this.targetField.getType();if(Array.isArray(t)&&i!=Ln.ListBox&&(t=t.join(",")),i===Ln.ListBox||i===Ln.ComboBox){var o=this.field.getOptions();o.forEach((function(e){e.selected=e.value==t,Array.isArray(t)&&-1!=t.indexOf(e.value)&&(e.selected=!0)})),this.field.setOptions(o)}if(!r||!(n=r.annot.getField())||this.field.getName()!==n.getName()){Kf(this.field,this.fields,"setValue",[t]);var a=this.field.form;a.tempTimer&&(clearTimeout(a.tempTimer),delete a.tempTimer),a.tempTimer=setTimeout((function(){a.calculate(e.field),clearTimeout(a.tempTimer),delete a.tempTimer}),0)}return i!==Ln.RadioButton&&i!==Ln.CheckBox||this.jsEngine.setStatus("calculate",this.targetField),t}}},{key:"valueAsString",get:function(){return this.targetField?this.targetField.getValue().toString():""}},{key:"strokeColor",get:function(){var t=this.targetField.getBorderColor();return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return Kf(this.field,this.fields,"setBorderColor",[t]),t}},{key:"textColor",get:function(){var t=this.targetField&&this.targetField.getDAFontColor();return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){return Kf(this.field,this.fields,"setDAFontColor",[t]),t}},{key:"userName",get:function(){return this.PDFFieldgetAlternateName()},set:function(t){if(this.field)return this.field.update("alternateName",t);this.fields.forEach((function(e){e.update("alternateName",t)}))}},{key:"rect",get:function(){var t,e=zf(this.targetField);return[(t=e?e.getRect():this.targetField.rect).left,t.top,t.right,t.bottom]},set:function(t){if(Array.isArray(t)&&!(t.length<4)){if(t[0]>t[2]){var e=t[0];t[0]=t[2],t[2]=e}if(t[3]>t[1]){var n=t[3];t[3]=t[1],t[1]=n}Kf(this.field,this.fields,"setRect",[{left:t[0],top:t[1],right:t[2],bottom:t[3]}])}}},{key:"style",get:function(){return zf(this.targetField).getMKProperty("normalCaption")},set:function(t){switch(t){case"check":t="4";break;case"cross":t="8";break;case"diamond":t="u";break;case"circle":t="l";break;case"star":t="H";break;case"square":t="n"}return Kf(this.field,this.fields,"setMKProperty",["normalCaption",t])}},{key:"buttonScaleWhen",get:function(){if(this.targetField&&this.targetField.getType()===Ln.PushButton){var t=0;switch(zf(this.targetField).info.iconFit.scaleWayType){case 1:t=0;break;case 4:t=1;break;case 2:t=2;break;case 3:t=3}return t}},set:function(t){if(this.targetField&&this.targetField.getType()===Ln.PushButton){var e,n=zf(this.targetField),r=n.info.iconFit;switch(t){case qf.always:e="e_ScaleWayAlways",r.scaleWayType=1;break;case qf.never:e="e_ScaleWayNever",r.scaleWayType=4;break;case qf.tooBig:e="e_ScaleWayBigger",r.scaleWayType=2;break;case qf.tooSmall:e="e_ScaleWaySmaller",r.scaleWayType=3;break;default:e="e_ScaleWayAlways",r.scaleWayType=1}var i={scale_way_type:e,is_proportional_scaling:r.isProportionalScaling+"",fit_bounds:r.fitBounds,horizontal_fraction:(100*r.horizontalFraction).toFixed(0),vertical_fraction:(100*r.verticalFraction).toFixed(0)};Yf((function(t){n.setWidgetIconFitOption(i)}))}}}],[{key:"name",get:function(){return"Field"}}]),e}(Mf),Xf=function(){function t(t,e){this.jsEngine=t,this.doc=e,this.params={}}return Tt()(t,[{key:"printerName",get:function(){return"Web Printer"},set:function(t){}},{key:"firstPage",get:function(){return void 0!==this.params.firstPage?this.params.firstPage:0},set:function(t){this.params.firstPage=t}},{key:"lastPage",get:function(){return void 0!==this.params.lastPage?this.params.lastPage:this.doc.numPages},set:function(t){this.params.lastPage=t}},{key:"pageHandling",get:function(){return void 0!==this.params.pageHandling?this.params.pageHandling:3},set:function(t){this.params.pageHandling=t}},{key:"constants",get:function(){return{interactionLevel:{automatic:1,full:0,silent:2},handling:{none:1,fit:2,shrink:3,tileAll:4,tileLarge:5,nUp:6,booklet:7},flagValues:{applyOverPrint:131072,applySoftProofSettings:2097152,applyWorkingColorSpaces:262144,emitHalftones:1,emitPostScriptXObjects:524288,emitFormsAsPSForms:4194304,maxJP2KRes:8388608,setPageSize:1024,suppressBG:16,suppressCenter:256,suppressCJKFontSubst:64,suppressCropClip:4,suppressRotate:128,suppressTransfer:8,suppressUCR:32,useTrapAnnots:16777216,usePrintersMarks:33554432},bookletBindings:{Left:0,Right:1,LeftTall:2,RightTall:3},bookletDuplexMode:{BothSides:0,FrontSideOnly:1,BackSideOnly:2},colorOverrides:{auto:0,gray:1,mono:2},fontPolicies:{everyPage:2,jobStart:0,pageRange:1},nUpPageOrders:{Horizontal:0,HorizontalReversed:1,Vertical:2},printContents:{doc:0,docAndComments:1,formFieldsOnly:3},rasterFlagValues:{textToOutline:1,strokesToOutline:2,allowComplexClip:4,preserveOverprint:8},subsets:{all:-3,even:-5,odd:-4},tileMarks:{none:0,west:1,east:2},usages:{auto:0,use:1,noUse:2}}}},{key:"flags",get:function(){return void 0!==this.params.flags?this.params.flags:0},set:function(t){this.params.flags=t}},{key:"interactive",get:function(){return void 0!==this.params.interactive?this.params.interactive:0},set:function(t){this.params.interactive=t}},{key:"fileName",get:function(){return void 0!==this.params.fileName?this.params.fileName:""},set:function(t){this.params.fileName=t}}]),t}(),Zf=function(){function t(t,e,n){this.templateObject=t,this.templateHidden=e,this.pdfDoc=n}return t.prototype.spawn=function(t,e,n,r){if(this.pdfDoc){if("object"==_()(t)){var i=t;t=i.nPage,e=i.bRename,n=i.bOverlay,r=i.oXObject}return r&&"object"==_()(r)&&(this.pdfDoc=r.pdfDoc,this.templateObject=r.templateObject,this.templateHidden=r.templateHidden),null==t&&(t=-1),e=!1!==e,n=!0,this.pdfDoc.spawnPage(this.templateObject,t,e,n),this}},Tt()(t,[{key:"hidden",get:function(){return this.templateHidden},set:function(t){if(t!==this.templateHidden)return this.pdfDoc?this.pdfDoc.hideTemplate(this.templateObject,t):void 0}},{key:"name",get:function(){return this.templateObject.name}}]),t}(),Qf=(n(240),{}),tp=function(t){t?delete Qf[t]:Qf={}},ep=function(t){return Qf[t]||[]},np="R",rp="Group",ip=function(){function t(t,e,n){this.delayValue=!1,this.annot=t,this.annotData=e,this.app=n}var e=t.prototype;return e._delayOrExec=function(t){if(!this.delay)return t();var e,n,r;e=this.annot.getId(),n=t,(r=ep(e)).push(n),Qf[e]=r},e.destroy=function(){var t=this;this.annot&&this.annot.getPage().removeAnnotByObjectNumber(this.annot.getId()).then((function(){tp(t.annot.getId()),t.annot=null}))},e.getProps=function(){var t=this,e={},n=[],r=Object.getOwnPropertyNames(this.constructor.prototype),i=this;return r.map((function(e){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);r&&!r.get||n.push(e)})),Object.getOwnPropertyNames(this.constructor.prototype.__proto__.__proto__).map((function(e){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype.__proto__.__proto__,e);r&&!r.get||n.push(e)})),console.log("key:",n),n.map((function(t){var n=i[t];void 0!==n?(e[t]=n,console.log("this."+t+"=",e[t])):console.log("this."+t+'="undefined"')})),e},e.setProps=function(t){var e=this,n=[];Object.getOwnPropertyNames(this.constructor.prototype).map((function(t){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);r&&!r.set||n.push(t)}));var r=Object.getOwnPropertyNames(this.constructor.prototype.__proto__.__proto__);for(var i in r.map((function(t){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype.__proto__.__proto__,t);r&&!r.set||n.push(t)})),this.delay=!0,t)this[i]=t[i],console.log("this."+i+"=",t[i]);this.delay=!1},e.getStateInModel=function(t){if(this.annot&&"text"===this.annot.info.type)return"Marked"===t?[this.annot.getMarkedState(0)]:"Review"===t?[this.annot.getReviewState(0)]:void 0},e.moveAnnot=function(t,e,n){var r=this,i=e.getIndex(),o=n.getIndex(),a=e.doc,s=t.reduce((function(t,e){return e.getRelevanceRenders?[].concat(E()(t),E()(e.getRelevanceRenders(!0))):[].concat(E()(t),[e.annot.getId()])}),[]).reduce((function(t,n){var r=e.annotIdMap[n],i={},o={};return"popup"!==r.getType()&&(o=i="FreeTextCallout"==r.getIntent()?annotRender.backupProperty.rect:r.getRect()),t[n]={rect:o,oldRect:i},t}),{}),c=Object.keys(s).map((function(t){return Number(t)}));return e.getAnnotsByObjectNumArray(c).then((function(t){var c=t.reduce((function(t,e){return t[e.getUniqueID()]=s[e.getObjectNumber()],t}),{});return a.moveAnnotsToPage(e,n,s).then((function(t){return r.app.viewerApp.collaborate($o.MOVE_ANNOTS_BETWEEN_PAGES,{fromPageIndex:i,toPageIndex:o,annots:c}),t}))}))},Tt()(t,[{key:"type",get:function(){return"Annotation"}},{key:"component",get:function(){return this.app.viewerApp.getPDFPageRender(this.annotData.page).annotsRender.getAnnotRender(this.name).component}},{key:"author",get:function(){return this.annot?this.annot.getTitle():this.annotData.author},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){return e.annot.setTitle(t)}))}))}},{key:"borderEffectIntensity",get:function(){return this.annot?this.annot.getCloudIntensity():this.annotData.borderEffectIntensity},set:function(t){var e=this;this.annot&&(this.annot.info.borderInfo.cloudIntensity=t),Yf((function(n){return e._delayOrExec((function(){return e.annot.setBorderStyle(5,t)}))}))}},{key:"borderEffectStyle",get:function(){return this.annot?5===this.annot.getBorderStyle()?"C":"":this.annotData.borderEffectStyle},set:function(t){var e=this;if(""!==t&&"C"!==t)throw new TypeError('effectStyle either empty string or "C"');this.annot&&(this.annot.info.borderInfo.style="C"===t?5:0),Yf((function(n){return e._delayOrExec((function(){return"C"===t?e.annot.setBorderStyle(5,1):e.annot.setBorderStyle(0,[])}))}))}},{key:"contents",get:function(){return this.annot?this.annot.getContent():this.annotData.contents},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){return e.annot.setContent(t)}))}))}},{key:"creationDate",get:function(){return this.annot?this.annot.getCreateDateTime():this.annotData.creationDate}},{key:"delay",get:function(){return this.delayValue},set:function(t){if(!1===t){this.delayValue=!1;var e=this.annot.getId();ep(e).forEach((function(t){t&&t()})),tp(e)}else!0===t&&(this.delayValue=!0)}},{key:"doc",get:function(){return this.app.jsEngine.cacheJSDoc}},{key:"hidden",get:function(){return this.annot?2==(2&this.annot.getFlags()):this.annotData.hidden||!1},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=2:n&=-3,e.annot.setFlags(n)}))}))}},{key:"inReplyTo",get:function(){if(!this.annot)return this.annotData.inReplyTo;var t=this.annot.info.IRT;if(t){var e=this.annot.page.annots.find((function(e){return e.getId()==t}));e&&(t=e.getName())}return t},set:function(t){var e=this;Yf((function(n){e._delayOrExec((function(){e.annot.info.IRT=t}))}))}},{key:"intent",get:function(){return this.annot?this.annot.getIntent():this.annotData.intent},set:function(t){var e=this;this.annot&&(this.annot.info.intent=t),Yf((function(n){return e._delayOrExec((function(){return e.annot.setIntent(t)}))}))}},{key:"lock",get:function(){return this.annot?128==(128&this.annot.getFlags()):this.annotData.lock||!1},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=128:n&=-129,e.annot.setFlags(n)}))}))}},{key:"modDate",get:function(){return this.annot?this.annot.getModifiedDateTime():this.annotData.modDate},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){return e.annot.setModifiedDateTime(t)}))}))}},{key:"name",get:function(){return this.annot?this.annot.getName():this.annotData.name},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){return e.annot.setUniqueID(t)}))}))}},{key:"noView",get:function(){return this.annot?32==(32&this.annot.getFlags()):this.annotData.noView||!1},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=32:n&=-33,e.annot.setFlags(n)}))}))}},{key:"opacity",get:function(){return this.annot?this.annot.getOpacity():this.annotData.opacity||1},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){if(Object.prototype.toString.call(t).indexOf("Number")<0)throw new Error("only accept Number");if(t<0||t>1)throw new Error("opacity range: 0 - 1");return e.annot.setOpacity(t)}))}))}},{key:"page",get:function(){return this.annot?this.annot.getPage().getIndex():this.annotData.page},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=e.annot.getPage().getIndex();if(t!=n){var r=e.app.viewerApp.getPDFPageRender(n).annotsRender.getAnnotRender(e.name).component;e.app.viewerApp.getPDFPageRender(t).getPDFPage().then((function(t){return e.moveAnnot([r],e.annot.getPage(),t)}))}}))}))}},{key:"print",get:function(){return this.annot?4==(4&this.annot.getFlags()):this.annotData.print||!1},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=4:n&=-5,e.annot.setFlags(n)}))}))}},{key:"rect",get:function(){if(!this.annot)return this.annotData.rect;var t=this.annot.getRect(),e=t.left,n=t.right,r=t.top;return[e,t.bottom,n,r]},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){if(!Array.isArray(t))throw new Error("only accept Array");return e.annot.setRect({left:t[0],right:t[2],top:t[3],bottom:t[1]})}))}))}},{key:"readOnly",get:function(){return this.annot?64==(64&this.annot.getFlags()):this.annotData.readOnly||!1},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=64:n&=-65,e.annot.setFlags(n)}))}))}},{key:"refType",get:function(){if(!this.annot)return this.annotData.refType;this.annot.info.RT},set:function(t){var e=this;Yf((function(n){e._delayOrExec((function(){if(t!==np&&t!==rp)throw new TypeError('refType should be "R" or "Group"');e.annot.info.RT=t}))}))}},{key:"richContents",get:function(){},set:function(t){}},{key:"seqNum",get:function(){return this.annot?this.annot.info.index:0}},{key:"strokeColor",get:function(){return this.annot?this.annot.info.hasBorderColor?Sn(this.annot.info.borderColor):["T"]:this.annotData.strokeColor},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=xn(t,"int",e.annot.getOpacity());return e.annot.setBorderColor(n)}))}))}},{key:"style",get:function(){return this.annot?this.annot.getBorderStyle():this.annotData.style},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=0,r=0;return"D"==t&&(n=1,r=[3]),e.annot.setBorderStyle(n,r)}))}))}},{key:"subject",get:function(){return this.annot?this.annot.getSubject():this.annotData.subject},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){return e.annot.setSubject(t)}))}))}},{key:"toggleNoView",get:function(){return this.annot?256==(256&this.annot.getFlags()):this.annotData.toggleNoView},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=e.annot.getFlags();return t?n|=256:n&=-257,e.annot.setFlags(n)}))}))}},{key:"popupOpen",get:function(){if("freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type)return this.annot?this.annot.getPopup().getOpenStatus():this.annotData.popupOpen},set:function(t){var e=this;"freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type&&Yf((function(n){return e._delayOrExec((function(){return e.annot.getPopup().setOpenStatus(t).then((function(){t&&e.component.showReplyDialog("comment")}))}))}))}},{key:"popupRect",get:function(){if("freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type){if(!this.annot)return this.annotData.popupRect;var t=this.annot.getPopup().getRect(),e=t.left,n=t.right,r=t.top;return[e,t.bottom,n,r]}},set:function(t){var e=this;"freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type&&Yf((function(n){return e._delayOrExec((function(){if(!Array.isArray(t))throw new Error("only accept Array");return e.annot.getPopup().setRect({left:t[0],right:t[2],top:t[3],bottom:t[1]})}))}))}}]),t}(),op=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}return O()(e,t),e}(ip),ap=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Caret"}},{key:"caretSymbol",get:function(){},set:function(t){}}]),e}(op),sp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Circle"}},{key:"dash",get:function(){return this.annot?this.annot.getBorderInfo().dashes:this.annotData.dash},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(Array.isArray(e))return n.annot.setBorderStyle(1,e)}))}))}},{key:"fillColor",get:function(){return this.annot?Sn(this.annot.getFillColor()):this.annotData.fillColor},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=xn(e,"int",0);return n.annot.setFillColor(t)}))}))}},{key:"width",get:function(){return this.annot?this.annot.getBorderWidth():this.annotData.width},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setBorderWidth(e)}))}))}}]),e}(op),cp={Paperclip:"Paperclip",PushPin:"PushPin",Graph:"Graph",Tag:"Tag"},up=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"FileAttachment"}},{key:"attachIcon",get:function(){return this.annot?this.annot.getIconName():this.annotData.attachIcon},set:function(e){var n=this;cp[e]&&Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setIconName(e)}))}))}},{key:"point",get:function(){if(!this.annot)return this.annotData.point;var t=this.annot.getRect();return[t.left,t.top]},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(e&&Array.isArray(e)&&!(e.length<2))return n.annot.moveTo({left:e[0],top:e[1],action:"move"})}))}))}}]),e}(op),dp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"FreeText"}},{key:"alignment",get:function(){return this.annot?this.annot.getInfo().justification:this.annotData.alignment},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setAlignment(e)}))}))}},{key:"callout",get:function(){if(!this.annot)return this.annotData.callout;var t=this.annot.getCalloutLinePoints(),e=[];return t.map((function(t){e.push(t.x,t.y)})),e},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Zp(e);return n.annot.setCalloutLinePoints(t)}))}))}},{key:"dash",get:function(){return this.annot?this.annot.getBorderInfo().dashes:this.annotData.dash},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(Array.isArray(e))return n.annot.setBorderStyle(1,e)}))}))}},{key:"fillColor",get:function(){return this.annot?Sn(this.annot.getFillColor()):this.annotData.fillColor},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=xn(e,"int",0);return n.annot.setFillColor(t)}))}))}},{key:"lineEnding",get:function(){if(!this.annot)return this.annotData.lineEnding;var t=this.annot.getCalloutLineEndingStyle();return Ht.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Ht.LineEndingStyle[e];return n.annot.setCalloutLineEndingStyle(t)}))}))}},{key:"richDefaults",get:function(){},set:function(t){}},{key:"rotate",get:function(){if(!this.annot)return this.annotData.rotate;var t=360-this.annot.getRotation();return 360===t&&(t=0),t},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=0;return 0!==e&&(t=360-e),n.annot.setRotation(t)}))}))}},{key:"textFont",get:function(){},set:function(t){}},{key:"textSize",get:function(){return this.annot?this.annot.getDefaultAppearance().textSize:this.annotData.textSize},set:function(e){var n=this;return Yf((function(r){t.prototype._delayOrExec.call(n,(function(){var t=n.annot.getDefaultAppearance();return t.textSize=e,n.annot.setDefaultAppearance(t).then((function(t){}))}))}))}},{key:"width",get:function(){return this.annot?this.annot.getBorderWidth():this.annotData.width||1},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setBorderWidth(e)}))}))}}]),e}(op),lp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Highlight"}},{key:"quads",get:function(){if(!this.annot)return this.annotData.quads;var t=this.annot.getQuadPoints(),e=[];return t.map((function(t){t.map((function(t){e.push(t.x,t.y)}))})),e},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Xp(e);return n.annot.setRect(t)}))}))}}]),e}(op),hp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Ink"}},{key:"dash",get:function(){return this.annot?this.annot.getBorderInfo().dashes:this.annotData.dash},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(Array.isArray(e))return n.annot.setBorderStyle(1,e)}))}))}},{key:"gestures",get:function(){if(!this.annot)return this.annotData.gestures;var t,e=this.annot.getInkList(),n=[];return e.map((function(e){1===e.type&&(t=[],n.push(t)),t.push([e.x,e.y])})),n},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Jp(e);return n.annot.setInkList(t)}))}))}},{key:"width",get:function(){return this.annot?this.annot.getBorderWidth():annotData.width||0},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setBorderWidth(e)}))}))}}]),e}(op),fp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Line"}},{key:"arrowBegin",get:function(){if(!this.annot)return this.annotData.arrowBegin;var t=this.annot.getStartStyle();return Ht.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Ht.LineEndingStyle[e];return n.annot.setEndingStyle(!0,t)}))}))}},{key:"arrowEnd",get:function(){if(!this.annot)return this.annotData.arrowEnd;var t=this.annot.getEndingStyle();return Ht.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Ht.LineEndingStyle[e];return n.annot.setEndingStyle(!1,t)}))}))}},{key:"dash",get:function(){return this.annot?this.annot.getBorderInfo().dashes:this.annotData.dash},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(Array.isArray(e))return n.annot.setBorderStyle(1,e)}))}))}},{key:"doCaption",get:function(){return this.annot?this.annot.hasCaption():this.annotData.doCaption},set:function(t){var e=this;Yf((function(n){return e.annot.enableCaption(t)}))}},{key:"fillColor",get:function(){return this.annot?Sn(this.annot.getStyleFillColor()):this.annotData.fillColor},set:function(t){var e=this;Yf((function(n){return e._delayOrExec((function(){var n=xn(t,"int",0);return e.annot.setStyleFillColor(n)}))}))}},{key:"leaderExtend",get:function(){return this.annot?this.annot.getLeaderLineExtend():this.annotData.leaderExtend},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setLeaderLineExtend(e)}))}))}},{key:"leaderLength",get:function(){return this.annot?this.annot.getLeaderLineLength():this.annotData.leaderLength},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setLeaderLineLength(e)}))}))}},{key:"width",get:function(){return this.annot?this.annot.getBorderWidth():this.annotData.width},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setBorderWidth(e)}))}))}}]),e}(op),pp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"PolyLine"}},{key:"arrowBegin",get:function(){if(!this.annot)return this.annotData.arrowBegin;var t=this.annot.getStartStyle();return Ht.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Ht.LineEndingStyle[e];return n.annot.setEndingStyle(!0,t)}))}))}},{key:"arrowEnd",get:function(){if(!this.annot)return this.annotData.arrowEnd;var t=this.annot.getEndingStyle();return Ht.LineEndingName[t]},set:function(e){var n=this;e||(e="None"),Yf((function(r){return t.prototype._delayOrExec.call(n,(function(t){var r=Ht.LineEndingStyle[e];return n.annot.setEndingStyle(!1,r)}))}))}},{key:"dash",get:function(){return this.annot?this.annot.getBorderInfo().dashes:this.annotData.dash},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(Array.isArray(e))return n.annot.setBorderStyle(1,e)}))}))}},{key:"fillColor",get:function(){return this.annot?Sn(this.annot.getFillColor()):this.annotData.fillColor},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=xn(e,"int",0);return n.annot.setFillColor(t)}))}))}},{key:"vertices",get:function(){if(!this.annot)return this.annotData.vertices;var t=this.annot.getVertexes(),e=[];return t.map((function(t){e.push(t.x,t.y)})),e},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Zp(e);return n.annot.setVertexes(t)}))}))}}]),e}(op),gp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Polygon"}},{key:"dash",get:function(){return this.annot?this.annot.getBorderInfo().dashes:this.annotData.dash},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(Array.isArray(e))return n.annot.setBorderStyle(1,e)}))}))}},{key:"fillColor",get:function(){return this.annot?Sn(this.annot.getFillColor()):this.annotData.fillColor},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=xn(e,"int",0);return n.annot.setFillColor(t)}))}))}},{key:"vertices",get:function(){if(!this.annot)return this.annotData.vertices;var t=this.annot.getVertexes(),e=[];return t.map((function(t){e.push(t.x,t.y)})),e},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Zp(e);return n.annot.setVertexes(t)}))}))}}]),e}(op),vp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Sound"}},{key:"point",get:function(){if(!this.annot)return this.annotData.point;var t=this.annot.getRect();return[t.left,t.top]},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(e&&Array.isArray(e)&&!(e.length<2))return n.annot.moveTo({left:e[0],top:e[1],action:"move"})}))}))}},{key:"soundIcon",get:function(){},set:function(t){}}]),e}(op),mp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Square"}},{key:"dash",get:function(){return this.annot?this.annot.getBorderInfo().dashes:this.annotData.dash},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(Array.isArray(e))return n.annot.setBorderStyle(1,e)}))}))}},{key:"fillColor",get:function(){return this.annot?Sn(this.annot.getFillColor()):this.annotData.fillColor},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=xn(e,"int",0);return n.annot.setFillColor(t)}))}))}},{key:"width",get:function(){return this.annot,this.annot.getBorderWidth()},set:function(e){var n=this;return Yf((function(r){t.prototype._delayOrExec.call(n,(function(){return n.annot.setBorderWidth(e)}))}))}}]),e}(op),yp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Squiggly"}},{key:"quads",get:function(){if(!this.annot)return this.annotData.quads;var t=this.annot.getQuadPoints(),e=[];return t.map((function(t){t.map((function(t){e.push(t.x,t.y)}))})),e},set:function(e){var n=this;return Yf((function(r){t.prototype._delayOrExec.call(n,(function(){var t=Xp(e);return n.annot.setRect(t)}))}))}}]),e}(op),wp={Approved:"Approved",AsIs:"AsIs",Confidential:"Confidential",Departmental:"Departmental",Draft:"Draft",Experimental:"Experimental",Expired:"Expired",Final:"Final",ForComment:"ForComment",ForPublicRelease:"ForPublicRelease",NotApproved:"NotApproved",NotForPublicRelease:"NotForPublicRelease",Sold:"Sold",TopSecret:"TopSecret"},bp=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Stamp"}},{key:"AP",get:function(){if(!this.annot)return this.annotData.AP;var t=this.annot.getIconName();if(t&&"#"===t[0]){var e=t.substr(1);(e=wp[e])&&(t=e)}return t},set:function(t){}}]),e}(op),Ap=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"StrikeOut"}},{key:"quads",get:function(){if(!this.annot)return this.annotData.quads;var t=this.annot.getQuadPoints(),e=[];return t.map((function(t){t.map((function(t){e.push(t.x,t.y)}))})),e},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Xp(e);return n.annot.setRect(t)}))}))}}]),e}(op),Pp=function(t){function e(e,n,r){var i;return(i=t.call(this,e,n,r)||this).stateModelValue="Review",i}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Text"}},{key:"noteIcon",get:function(){return this.annot?this.annot.getIconName():this.annotData.noteIcon||"Note"},set:function(e){var n=this;e||(e="Note"),Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return n.annot.setIconName(e).then((function(t){}))}))}))}},{key:"point",get:function(){if(!this.annot)return this.annotData.point;var t=this.annot.getRect();return[t.left,t.top]},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if(e&&Array.isArray(e)&&!(e.length<2))return n.annot.moveTo({left:e[0],top:e[1],action:"move"})}))}))}},{key:"state",get:function(){return this.annot?"Marked"===this.stateModel?this.annot.getMarkedState(0):this.annot.getReviewState(0):this.annotData.state},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){if("Review"===n.stateModelValue){switch(e){case"accepted":case"rejected":case"cancelled":case"completed":case"none":break;default:e="none"}return n.annot.addReviewState(e)}if("Marked"===n.stateModelValue)return"marked"!==e&&"unmarked"!==e&&(e="unmarked"),n.annot.addMarkedState(e)}))}))}},{key:"stateModel",get:function(){return this.stateModelValue},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){return"Marked"!==e&&"Review"!==e&&(e="Review"),n.stateModelValue=e}))}))}}]),e}(op),Ep=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),Tt()(e,[{key:"type",get:function(){return"Underline"}},{key:"quads",get:function(){if(!this.annot)return this.annotData.quads;var t=this.annot.getQuadPoints(),e=[];return t.map((function(t){t.map((function(t){e.push(t.x,t.y)}))})),e},set:function(e){var n=this;Yf((function(r){return t.prototype._delayOrExec.call(n,(function(){var t=Xp(e);return n.annot.setRect(t)}))}))}}]),e}(op);n(440);function xp(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Sp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Sp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Cp=function(t,e,n){var r=t.getEvent();if(!r.isSensitiveCheck){var i=r.target.valueAsString;if(r.param.value&&(i=r.param.value),""!=i){var o=Fp(i,n);if(!i||!o){r.rc=!1;var a=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return a+=' "'.concat(n,'" '),void e.alertAsync(a)}var s=kp(i,n);if(!s){r.rc=!1;var c=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return c+=' "'.concat(n,'" '),void e.alert(c)}r.value=_p(n,s),r.rc=!0}}},Dp=function(t,e,n,r,i,o,a,s){var c=t.getEvent(),u=r;if((u<0||u>3)&&(u=0),c.value){var d=c.value;if(!/^[0-9\.\-]+$/.test(d))//!(IsNumber(wstrChange) &&
{c.rc=!1;var l=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return l+=' "Number" ',void e.alertAsync(l)}var h=c.change,f=d;if(c.willCommit){var p=f.trimLeft();if(0==p.length){c.rc=!0;var g=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return g+=' "Number" ',void e.alertAsync(g)}var v=p;if(v=v.replace(/,/g,"."),!/^[0-9\.\-]+$/.test(v))//!(IsNumber(wstrChange) &&
{var m=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return m+=' "Number" ',e.alert(m),void(c.rc=!1)}c.rc=!0}else{var y=f,w=h||"",b=".";switch(u){case 0:case 1:b=".";break;case 2:case 3:b=","}for(var A=-1!=y.indexOf(b),P=0;P<w.length;P++)if(w[P]!=b)if("-"!=w[P]){if(!/[0-9\.]/.test(w[P]))return void(c.rc=!1)}else{if(bHasSign)return void(c.rc=!1);if(0!=P)return void(c.rc=!1);if(0!=c.selStart)return void(c.rc=!1);bHasSign=!0}else{if(A){c.rc=!1;var E=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return E+=' "Number" ',void e.alertAsync(E)}A=!0}var x,S=y.substr(0,c.selStart);c.selEnd<y.length&&(x=y.substr(c.selEnd)||""),d=f=y=S+w+x,c.rc=!0}}else c.rc=!0};function Ip(t,e,n,r){var i=".",o=",",a="";switch(n){case 0:break;case 1:o="";break;case 2:i=",",o=".";break;case 3:i=",",o="";break;case 4:i=",",o=" "}var s=t.length%3;a=t.substr(0,s);for(var c=s;c<t.length;c+=3)0!==a.length&&(a+=o),a+=t.substr(c,3);if(r>0){for(e=e.substring(0,r);e.length<r;)e+="0";a=a+i+e}return a}function Rp(t){var e=t.toString().split(".",2);return null==e||e.length<2?(e=null,0):e[1].length}function Tp(t){var e=new RegExp("(\\w+)\\["+t+"\\]").exec("January[1]February[2]March[3]April[4]May[5]June[6]July[7]August[8]September[9]October[10]November[11]December[12]Jan[1]Feb[2]Mar[3]Apr[4]Jun[6]Jul[7]Aug[8]Sep[9]Oct[10]Nov[11]Dec[12]");return e?e[1]:null}var _p=function(t,e){t=t.replace(/%/g,"%69");var n,r,i=[],o=e.getFullYear().toString();o="0000"+o,t=(t=t.replace(/([^y])y{4}(?!y)|(^)y{4}(?!y)/g,"$1"+o.substr(o.length-4,4))).replace(/([^y])y{2}(?!y)|(^)y{2}(?!y)/g,"$1"+o.substr(o.length-2,2)),o=Tp(e.getMonth()+1),i["%mmmm"]=o,t=t.replace(/([^m])m{4}(?!m)|(^)m{4}(?!m)/g,"$1%mmmm"),i["%mmm"]=o.substr(0,3),t=(t=t.replace(/([^m])m{3}(?!m)|(^)m{3}(?!m)/g,"$1%mmm")).replace(/([^m])m{1}(?!m)|(^)m{1}(?!m)/g,"$1"+(e.getMonth()+1)),1===(o=(e.getMonth()+1).toString()).length&&(o="0"+o),t=t.replace(/([^m])m{2}(?!m)|(^)m{2}(?!m)/g,"$1"+o),n=e.getDay(),o=(r=new RegExp("(\\w+)\\["+n+"\\]").exec("Sunday[0]Monday[1]Tuesday[2]Wednesday[3]Thursday[4]Friday[5]Saturday[6]"))?r[1]:null,i["%dddd"]=o,t=t.replace(/([^d])d{4}(?!d)|(^)d{4}(?!d)/g,"$1%dddd"),i["%ddd"]=o.substr(0,3),t=(t=t.replace(/([^d])d{3}(?!d)|(^)d{3}(?!d)/g,"$1%ddd")).replace(/([^d])d{1}(?!d)|(^)d{1}(?!d)/g,"$1"+e.getDate()),1===(o=e.getDate().toString()).length&&(o="0"+o),t=(t=t.replace(/([^d])d{2}(?!d)|(^)d{2}(?!d)/g,"$1"+o)).replace(/([^H])H{1}(?!H)|(^)H{1}(?!H)/g,"$1"+e.getHours()),1===(o=e.getHours().toString()).length&&(o="0"+o),t=t.replace(/([^H])H{2}(?!H)|(^)H{2}(?!H)/g,"$1"+o);var a=e.getHours()>12?e.getHours()-12:e.getHours();return 0==a&&(a=12),t=t.replace(/([^h])h{1}(?!h)|(^)h{1}(?!h)/g,"$1"+a),1===(o=a.toString()).length&&(o="0"+o),t=(t=t.replace(/([^h])h{2}(?!h)|(^)h{2}(?!h)/g,"$1"+o)).replace(/([^M])M{1}(?!M)|(^)M{1}(?!M)/g,"$1"+e.getMinutes()),1===(o=e.getMinutes().toString()).length&&(o="0"+o),t=(t=t.replace(/([^M])M{2}(?!M)|(^)M{2}(?!M)/g,"$1"+o)).replace(/([^s])s{1}(?!s)|(^)s{1}(?!s)/g,"$1"+e.getSeconds()),1===(o=e.getSeconds().toString()).length&&(o="0"+o),t=t.replace(/([^s])s{2}(?!s)|(^)s{2}(?!s)/g,"$1"+o),o=function(t){return t>11?"PM":"AM"}(e.getHours()),t=t.replace(/([^t])t{2}(?!t)|(^)t{2}(?!t)/g,"$1"+o),1===o.length&&(o=o.charAt(0)),t=(t=(t=(t=(t=t.replace(/([^t])t{1}(?!t)|(^)t{1}(?!t)/g,"$1"+o)).replace(/%mmmm/g,i["%mmmm"])).replace(/%mmm/g,i["%mmm"])).replace(/%dddd/g,i["%dddd"])).replace(/%ddd/g,i["%ddd"]),i=null,t=t.replace(/%69/g,"%")},kp=function(t,e){return Fp(t,e)};function Fp(t,e){var n=function(t,e){var n=new Date,r=n.getFullYear(),i=n.getMonth()+1,o=n.getDate(),a=0,s=0,c=0,u="",d=!1,l=!1,h=["/","-",","],f=["/","-",",","."],p=function(t,e){for(var n=function(n,r){var i=t.charAt(r);if(e){if(void 0!==f.find((function(t){return t==i})))return{v:!0}}else if(void 0!==h.find((function(t){return t==i})))return{v:!0}},r=0,i=t.length;r<i;r++){var o=n(0,r);if("object"===_()(o))return o.v}return!1},g=function(t,e){var n=t;if(e){var r,i=xp(f);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=new RegExp(o,"g");n=n.replace(a,"")}}catch(t){i.e(t)}finally{i.f()}}else{var s,c=xp(h);try{for(c.s();!(s=c.n()).done;){var u=s.value;a=new RegExp(u,"g");n=n.replace(a,"")}}catch(t){c.e(t)}finally{c.f()}}return n},v=p(e,!1),m=p(t,!0);v&&!m?e=g(e,!1):!v&&m&&(t=g(t,!0));var y=0,w=0;for(;y<e.length&&!d;){var b=e.charAt(y);switch(b){case"y":case"m":case"d":case"H":case"h":case"M":case"s":case"t":var A=w,P=0,E=null;if(e.charAt(y+1)!==b)switch(b){case"y":y++,w++;break;case"m":E=Op(t,w,2),i=E.nRet,P=E.nSkip,y++,w+=P;break;case"d":E=Op(t,w,2),o=E.nRet,P=E.nSkip,y++,w+=P;break;case"H":case"h":E=Op(t,w,2),a=E.nRet,P=E.nSkip,y++,w+=P;break;case"M":E=Op(t,w,2),s=E.nRet,P=E.nSkip,y++,w+=P;break;case"s":E=Op(t,w,2),c=E.nRet,P=E.nSkip,y++,w+=P;break;case"t":u="p"===t.charAt(y)||"P"==t.charAt(y),y++,w++}else if(e.charAt(y+1)===b&&e.charAt(y+2)!==b)switch(b){case"y":E=Op(t,w,4),r=E.nRet,P=E.nSkip,y+=2,w+=P;break;case"m":E=Op(t,w,2),0!=a?s=E.nRet:i=E.nRet,P=E.nSkip,y+=2,w+=P;break;case"d":E=Op(t,w,2),(y+=2)>=e.length&&(E=Op(t,w,4)),o=E.nRet,P=E.nSkip,w+=P;break;case"H":case"h":E=Op(t,w,2),a=E.nRet,P=E.nSkip,y+=2,w+=P;break;case"M":E=Op(t,w,2),s=E.nRet,P=E.nSkip,y+=2,w+=P;break;case"s":E=Op(t,w,2),c=E.nRet,P=E.nSkip,y+=2,w+=P;break;case"t":u=("p"===t.charAt(w)||"P"==t.charAt(w))&&"m"===t.charAt(w+1),y+=2,w+=2}else if(e.charAt(y+1)===b&&e.charAt(y+2)===b&&e.charAt(y+3)!==b)switch(b){case"m":E=Lp(t,w),P=E.nSkip;for(var x=E.swRet,S=!1,C=0;C<12;C++)if(x.toLowerCase()===Tp(C+1).substr(0,3).toLowerCase()){i=C+1,y+=3,w+=P,S=!0;break}S||(E=Op(t,w,3),i=E.nRet,P=E.nSkip,y+=3,w+=P);break;case"y":break;default:y+=3,w+=3}else if(e.charAt(y+1)===b&&e.charAt(y+2)===b&&e.charAt(y+3)===b&&e.charAt(y+4)!==b)switch(b){case"y":E=Op(t,w,4),r=E.nRet,P=E.nSkip,w+=P,y+=4,r<100&&(r=-1,l=!0);break;case"m":S=!1;E=Lp(t,w),P=E.nSkip,x=(x=E.swRet).toLowerCase();for(C=0;C<12;C++){var D=Tp(C+1);if((D=D.toLowerCase()).indexOf(x,0)>=0){i=C+1,y+=4,w+=P,S=!0;break}}S||(E=Op(t,w,4),i=E.nRet,P=E.nSkip,y+=4,w+=P);break;default:y+=4,w+=4}else e.charAt(y)!==t.charAt(w)&&(l=!0,d=!0),y++,w++;A===w&&(l=!0,d=!0);break;default:if(t.length<=w)d=!0;else{var I=Mp(e.charAt(y)),R=Mp(t.charAt(w));(I&&!R||!I&&R)&&(l=!0,d=!0)}y++,w++}}u&&a<12&&(a+=12);!1===u&&12==a&&(a=0);r>=0&&r<=99&&(r+=2e3);(i<1||i>12)&&(l=!0);(o<1||o>31)&&(l=!0);(a<0||a>23)&&(l=!0);(s<0||s>60)&&(l=!0);(c<0||c>60)&&(l=!0);if(!l)return 2!=i||29!=o||e.match(/y/)||(r&=1048572),new Date(r,i-1,o,a,s,c);return null}(t,e);return null==n&&(n=function(t){for(var e=new Date,n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),c=[],u=0;u<6;u++)c[u]=0;var d=!1,l=0,h=0,f=t.length;for(;h<f&&!(l>5);){var p=t.charAt(h);if(Mp(p)){var g,v=Op(t,h,4);c[l++]=v.nRet,g=v.nSkip,h+=g}else":"===p&&(d=!0),h++}var m=!0;if(d){if(l<=3)(y=Vp(l,c[0],c[1],c[2],o,a,s))&&(o=y.h,a=y.M,s=y.s,m=!1);else if(4===l){(y=Np(2,c[0],c[1],0,n,r,i))&&(n=y.y,r=y.m,i=y.d,(y=Vp(2,c[2],c[3],0,o,a,s))&&(o=y.h,a=y.M,s=y.s,m=!1))}else if(5===l){if((y=Np(3,c[0],c[1],c[2],n,r,i))&&(n=y.y,r=y.m,i=y.d,(y=Vp(2,c[3],c[4],0,o,a,s))&&(o=y.h,a=y.M,s=y.s,m=!1)),m)(y=Np(2,c[0],c[1],0,n,r,i))&&(n=y.y,r=y.m,i=y.d,(y=Vp(3,c[2],c[3],c[4],o,a,s))&&(o=y.h,a=y.M,s=y.s,m=!1))}else if(6===l){(y=Np(3,c[0],c[1],c[2],n,r,i))&&(n=y.y,r=y.m,i=y.d,(y=Vp(3,c[3],c[4],c[5],o,a,s))&&(o=y.h,a=y.M,s=y.s,m=!1))}}if(m){var y;(y=Np(l,c[0],c[1],c[2],n,r,i))&&(n=y.y,r=y.m,i=y.d,m=l>3)}if(m)return null;return new Date(n,r-1,i,o,a,s)}(t)),n}function Mp(t){return t>="0"&&t<="9"}function Op(t,e,n){var r=[];r.nRet=0,r.nSkip=0;for(var i=e,o=t.length;i<o&&!(i-e>10);i++){var a=t.charAt(i);if(!Mp(a))break;if(r.nRet=10*r.nRet+(a-"0"),r.nSkip=i-e+1,r.nSkip>=n)break}return r}function Lp(t,e){var n=[];n.swRet="",n.nSkip=0;for(var r=e,i=t.length;r<i;r++){var o=t.charAt(r);if(!(o>="a"&&o<="z"||o>="A"&&o<="Z"))break;n.swRet+=o,n.nSkip=r-e+1}return n}function Np(t,e,n,r,i,o,a){var s=[];if(s.y=i,s.m=o,s.d=a,2===t){if(e>=1&&e<=12&&n>=1&&n<=31)return s.m=e,s.d=n,s;if(e>=1&&e<=31&&n>=1&&n<=12)return s.m=n,s.d=e,s}else if(t>=3){if(e>12&&n>=1&&n<=12&&r>=1&&r<=31)return s.y=e,s.m=n,s.d=r,s;if(e>=1&&e<=12&&n>=1&&n<=31&&r>31)return s.y=r,s.m=e,s.d=n,s;if(e>=1&&e<=31&&n>=1&&n<=12&&r>31)return s.y=r,s.m=n,s.d=e,s}return null}function Vp(t,e,n,r,i,o,a){var s=[];if(s.h=i,s.M=o,s.s=a,2===t){if(e>=0&&e<=23&&n>=0&&n<=59)return s.h=e,s.M=n,s.s=0,s}else if(3===t&&e>=0&&e<=23&&n>=0&&n<=59&&r>=0&&r<=59)return s.h=e,s.M=n,s.s=r,s;return null}var Bp=function(t,e,n){for(var r="",i=0,o=0;o<e.length;o++)switch(e[o]){case"9":for(;i<t.length;){var a=i;if(i++,t[a]>="0"&&t[a]<="9"){r+=t[a];break}}if(i>=t.length&&n)return r;break;case"A":if(!(i<t.length))return r;r+=t[i++];break;case"O":var s=i;if(i++,t[s].match(/[0-9a-zA-Z]/)&&(r+=t[s]),i>=t.length&&n)return r;break;case"X":r+=t[i++];break;default:r+=e[o],e[o]==t[i]&&i++}return r},Up=function(t,e){switch(e){case"9":var n=parseInt(t);return 0<=n&&n<=9;case"A":return/[a-zA-Z]/.test(t);case"O":var r=parseInt(t);return 0<=r&&r<=9||/[a-zA-Z]/.test(t);case"X":case" ":return!0;default:return t===e}},jp=function(t,e,n){var r=t.getEvent(),i=r.value;if(0!=i.length){var o=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");if(o+=' "'+n+'" ',r.willCommit){if(i.length>n.length)return r.rc=!1,void e.alertAsync(o);var a=0;if((i=Bp(i,n,!0)).length==n.length)for(var s=0;s<i.length&&Up(i[s],n[a]);s++)a++;return a!=n.length||a!=i.length&&n.length>0?(r.rc=!1,void e.alertAsync(o)):(r.change=i,i)}var c=r.change;if(c&&0!=c.length){var u;r.selStart;if((u=r.selStart<r.selEnd?i.replace(i.substr(r.selStart,r.selEnd),c):i.substr(0,r.selStart)+c+i.substr(r.selEnd)).length>n.length){var d=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return d+=' "'+n+'" ',e.alert(d),void(r.rc=!1)}var l=Bp(u,n);if(l.length>n.length){r.rc=!1;var h=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return h+=' "'+n+'" ',void e.alertAsync(h)}return r.rc=!0,l}r.rc=!0}else r.rc=!0},Hp={AFSimple_Calculate:function(t,e,n){var r=t.getEvent();if(!r.isSensitiveCheck){var i="",o=0,a=NaN;switch(e){case"AVG":for(var s=0;s<n.length;s++){var c=parseFloat(t.getFieldValue(n[s]));if(!isNaN(c)){var u=Rp(c);o=o>u?o:u,isNaN(a)&&(a=0),a+=c}}i=isNaN(a)?"":a/n.length;break;case"SUM":for(var d=0;d<n.length;d++){var l=parseFloat(t.getFieldValue(n[d]));if(!isNaN(l)){var h=Rp(l);o=o>h?o:h,isNaN(a)&&(a=0),a+=l}}i=isNaN(a)?"0":a;break;case"PRD":for(var f=NaN,p=0;p<n.length;p++){var g=parseFloat(t.getFieldValue(n[p]));if(!isNaN(g)){var v=Rp(g);o=o>v?o:v,isNaN(f)&&(f=1),f*=g}}i=isNaN(f)?"":f;break;case"MIN":for(var m=NaN,y=0;y<n.length;y++){var w=parseFloat(t.getFieldValue(n[y]));if(!isNaN(w)){var b=Rp(w);o=o>b?o:b,isNaN(m)&&(m=w),m>w&&(m=w)}}i=isNaN(m)?"":m;break;case"MAX":for(var A=NaN,P=0;P<n.length;P++){var E=parseFloat(t.getFieldValue(n[P]));if(!isNaN(E)){var x=Rp(E);o=o>x?o:x,isNaN(A)&&(A=E),A<E&&(A=E)}}i=isNaN(A)?"":A}r.valueSetted=!0,r.value=i,r.rc=!0}},AFRange_Validate:function(t,e,n,r,i,o){var a=t.getEvent();if(!a.isSensitiveCheck){var s,c=a.target,u="",d=a.value;s=parseFloat(d),isNaN(s)?a.value=c.value:(n&&i?(s<r||s>o)&&(u="Value should be greater than "+r+" and less than "+o+"."):n?s<r&&(u="Value should be greater than "+r+"."):i&&s>o&&(u="Value should be less than "+o+"."),""!==u?(e.alert(u),a.value=c.value,a.rc=!1):a.rc=!0)}},AFNumber_Format:function(t,e,n,r,i,o,a,s){var c=t.getEvent();if(!c.isSensitiveCheck){var u=c.value;if((c.param.value||0===c.param.value)&&(u=c.param.value),""!==u){if(isNaN(u)){c.value="",c.rc=!1;var d=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return d+=' "Number" ',void e.alertAsync(d)}var l=(u=parseFloat(u))<0?-1:1;if(isNaN(u)){c.value=u,c.rc=!1;var h=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return h+=' "Number" ',void e.alertAsync(h)}var f="";f=(2===i||3===i)&&l<0?"(":"",s&&(f+=a);var p=(u*=l).toString().split(".",2),g=p[0],v="";p.length>1&&(v=p[1]),f+=Ip(g,v,r,n),s||(f+=a),(2===i||3===i)&&l<0&&(f+=")"),(0!==i||s)&&(u=Math.abs(u)),1!==i&&3!==i||(l<0?c.engineTarget.setDAFontColor(["RGB",1,0,0]):c.engineTarget.setDAFontColor(["RGB",0,0,0])),l<0&&0===i&&(f="-"+f),c.value=f,c.rc=!0}else c.value=""}},AFTime_Format:function(t,e,n){if("number"==typeof(n=["HH:MM","h:MM tt","HH:MM:ss","h:MM:ss tt"][n])){var r=n;n=r>=0&&r<cFormat.length?cFormat[r]:""}Cp(t,e,n)},AFTime_FormatEx:Cp,AFDate_FormatEx:function(t,e,n){var r=t.getEvent();if(r.format=n,!r.isSensitiveCheck){n&&0!=n.length||(n="mm/dd/yyyy");var i=r.target.valueAsString;if(r.param.value&&(i=r.param.value),""!=i){if(!i){r.rc=!1;var o=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return o+=' "'.concat(n,'" '),void e.alertAsync(o)}var a=kp(i,n);if(!a){r.rc=!1;var s=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return s+=' "'.concat(n,'" '),void e.alert(s)}r.value=_p(n,a),r.rc=!0}}},AFPercent_Format:function(t,e,n,r){var i=t.getEvent();if(!i.isSensitiveCheck){var o=i.target.value;if(o&&""!=o){if(o=parseFloat(100*o),isNaN(o)){i.value=i.target.value,i.rc=!0;var a=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return a+=' "Percentage" ',void e.alertAsync(a)}var s=o.toString().split(".",2),c=s[0],u="";s.length>1&&(u=s[1]);var d=Ip(c,u,r,n)+"%";i.value=d,i.rc=!0}}},AFMergeChange:function(t){var e,n,r=t.value;return t.willCommit?t.value:(e=t.selStart>=0?r.substring(0,t.selStart):"",n=t.selEnd>=0&&t.selEnd<=r.length?r.substring(t.selEnd,r.length):"",e+t.change+n)},AFNumber_Keystroke:Dp,AFParseDateEx:kp,AFMakeNumber:function(t){return parseFloat(t)||0},AFDate_KeystrokeEx:function(t,e,n){var r=t.getEvent();if(!r.isSensitiveCheck){var i=r.target.valueAsString;if(i){var o=kp(i,n);if(!o){r.rc=!1;var a=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return a+=' "'.concat(n,'" '),void e.alertAsync(a)}r.value=_p(n,o),r.rc=!0}else r.rc=!0}},AFSpecial_Format:function(t,e,n){var r=t.getEvent(),i=r.value;if(!i||i.length<1)r.rc=!0;else{var o;switch(i=""+i,n){case 0:o="99999";break;case 1:o="99999-9999";break;case 2:o=i.length>=10?"(999) 999-9999":"999-9999";break;case 3:o="999-99-9999"}var a=Bp(i,o);if(a.length!=o.length){r.rc=!1;var s=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return s+=' "'.concat(o,'" '),void e.alertAsync(s)}r.value=a,r.rc=!0}},FXFormatDate:_p,AFSpecial_Keystroke:function(t,e,n){var r=t.getEvent(),i=r.value;if(!(i.length<1)){var o,a=r.change;switch(n){case 0:o="99999";break;case 1:o="999999999";break;case 2:var s=i;if(0==s.length&&0==a.length)return void(r.rc=!0);if(r.willCommit){var c=s.match(/^(\(\d{3}\)\s?)?\d{3}-?\d{4}$|^(\d{3}\s?)?\d{3}-?\d{4}$/);if(r.rc=!!c,!c){var u=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");u+=' "/^((d{3})s?)?d{3}-?d{4}$|^(d{3}s?)?d{3}-?d{4}$/" ',e.alert(u)}return}var d=r.selStart,l=r.selEnd;if(l<0&&(l=strSrc.length-1),(s=s.substr(0,d)+a+s.substr(l)).length-14>0)return void(r.rc=!1);var h=s.match(/^\(?\d*\)?\s?\d*-?\d*$/);return void(r.rc=!!h);case 3:o="999999999"}return jp(t,e,o)}r.rc=!0},AFPercent_Keystroke:function(){return Dp.apply(void 0,arguments)},AFSpecial_KeystrokeEx:function(t,e,n){var r=t.getEvent(),i=jp(t,e,n);void 0!==i&&(r.target.value=i)},ANSB_None:0,ANSB_Page:1,ANSB_Author:2,ANSB_ModDate:3,ANSB_Type:4,ANFB_ShouldNone:7,ANFB_ShouldPrint:0,ANFB_ShouldView:1,ANFB_ShouldEdit:2,ANFB_ShouldAppearInPanel:3,ANFB_ShouldSummarize:4,ANFB_ShouldExport:5},Wp=Hp.ANSB_Author,$p=Hp.ANSB_ModDate,Yp=Hp.ANSB_Type,qp=Hp.ANFB_ShouldPrint,Gp=Hp.ANFB_ShouldView,zp=Hp.ANFB_ShouldEdit,Kp={line:fp,circle:sp,square:mp,highlight:lp,squiggly:yp,underline:Ep,strikeout:Ap,freetext:dp,caret:ap,ink:hp,stamp:bp,polyline:pp,polygon:gp,text:Pp,fileattachment:up,sound:vp},Jp=function(t){var e=[];return t.map((function(t){var n=t[0];if(Array.isArray(n))t.map((function(t,n){var r={};r.type=0===n?1:2,r.x=t[0],r.y=t[1],e.push(r)}));else for(var r=Math.floor(t.length/2),i=t,o=0;o<r;o++){var a=i.slice(2*o,2*o+2),s={};s.type=0===o?1:2,s.x=a[0],s.y=a[1],e.push(s)}})),e},Xp=function(t){for(var e=Math.floor(t.length/2),n=[],r=[],i=t,o=0;o<2*e;o++)[o]%2==0?r.push(i[o]):n.push(i[o]);return{left:Math.min.apply(Math,r),bottom:Math.min.apply(Math,n),right:Math.max.apply(Math,r),top:Math.max.apply(Math,n)}},Zp=function(t){for(var e=[],n=Math.floor(t.length/2),r=t,i=0;i<n;i++){var o=r.slice(2*i,2*i+2);e.push({x:o[0],y:o[1]})}return e},Qp=function(){function t(t){this.pdfViewer=t}var e=t.prototype;return e.getAnnotClass=function(t){var e=Kp[t];return e||ip},e.getAnnots=function(t,e,n,r){var i;return i=e===qp?t.filter((function(t){return t.print})):e===Gp?t.filter((function(t){return!t.noView})):e===zp?t.filter((function(t){return!t.readOnly})):E()(t),n===Wp?i.sort((function(t,e){var n=t.author,r=e.author;return n.localeCompare(r)})):n===$p&&i.sort((function(t,e){var n=t.modDate,r=e.modDate;if(null===n&&null===r)return 0;if(null!==n&&null===r)return 1;if(null===n&&null!==r)return-1;var i=n.getTime(),o=r.getTime();return i>o?1:i<o?-1:0})),n===Yp&&i.sort((function(t,e){var n=t.type,r=e.type;return n.localeCompare(r)})),r?i.reverse():i},e.getAnnot=function(t,e,n){var r=t.getType(),i=this.getAnnotClass(r);return i===ip?null:new i(t,e,n)},e.addAnnot=function(t){var e=this,n=t.type=t.type.toLowerCase(),r=null;switch(n){case"line":r=this.buildLineJson(t);break;case"stamp":r=this.buildStampJson(t);break;case"fileattachment":case"text":r=this.buildIconShapeJson(t);break;case"freetext":r=this.buildFreeTextJson(t);break;case"circle":case"square":case"caret":r=this.buildSimpleShapeJson(t),"square"!==n&&"circle"!==n||!t.dash||(r.borderStyle=1,r.borderStyleParam=t.dash);break;case"polyline":case"polygon":case"ink":case"highlight":case"underline":case"strikeout":case"squiggly":r={type:t.type,date:new Date},"polygon"===n&&"PolygonCloud"===t.intent&&(r.intent="PolygonCloud"),"polyline"!==n&&"polygon"!==n&&"ink"!==n||!t.dash||(r.borderStyle=1,r.borderStyleParam=t.dash);break;case"sound":r=this.buildScreenShapeJson(t)}if(!r)return null;r=this.buildJsonKeyValue(t,r);var i=this.getAnnotClass(n);t.creationDate=r.date,t.modDate||(t.modDate=r.date);var o=new i(null,t),a=this.pdfViewer;return Yf((function(){return a.currentPDFDoc.addAnnot(t.page,r).then((function(e){return[a.getPDFPageRender(t.page),e]})).then((function(t){var e=t[0];return e.isRendered?t:e.render().then((function(){return t}))})).then((function(n){var i=S()(n,2),a=i[0],s=i[1][0],c=a.annotsRender.getAnnotRender(s.getId()).component,u=c.annot;u.info.author=r.author,e.doUpdatePropsAfterAdd(u,t,(function(e){e&&c.redraw(),t.open&&c.showReplyDialog("comment"),o.annot=u,c.isHidden()||c.parent("annotsRender").activeAnnot(c.getId())}))}))})),o},e.showFileDialog=function(t){var e=this;return new Promise((function(n){B()("#jsFileAttachment").length>0&&B()("#jsFileAttachment").remove(),B()("body").append('<input id="jsFileAttachment" type="file" style="display: none;"/>'),B()("#jsFileAttachment").off("change").on("change",(function(r){var i=r.target.files[0];if(i){var o=new FileReader;o.readAsArrayBuffer(i),o.onload=function(){var r=new Uint8Array(o.result);t.contentType=i.type,t.buffer=r,t.fileName=i.name;var a=e.addAnnot(t);n(a)}}})),B()("#jsFileAttachment").click()}))},e.doUpdatePropsAfterAdd=function(t,e,n){n&&n()},e.buildRectByPoint=function(t){var e=t[0],n=t[1];return{left:e,bottom:n-20,right:e+20,top:n}},e.buildSimpleShapeJson=function(t){var e=Xp(t.rect),n=e.left,r=e.bottom,i=e.right,o=e.top;return{type:t.type,date:new Date,rect:{left:n,bottom:r,right:i,top:o}}},e.buildIconShapeJson=function(t){var e;e=t.point?this.buildRectByPoint(t.point):Xp(t.rect);var n=t.AttachIcon,r=t.noteIcon,i="";switch(t.type){case"fileattachment":i=n;break;case"text":i=r}return{type:t.type,date:new Date,rect:e,icon:i}},e.buildScreenShapeJson=function(t){var e;return e=t.point?this.buildRectByPoint(t.point):Xp(t.rect),{type:"screen",date:new Date,rect:e}},e.buildStampJson=function(t){var e=Xp(t.rect),n=e.left,r=e.bottom,i=e.right,o=(e.top,.3*(i-n));return{type:t.type,date:new Date,rect:{left:n,bottom:r,right:i,top:r+o}}},e.buildFreeTextJson=function(t){var e={type:t.type,date:new Date};"FreeTextCallout"===t.intent&&t.callout&&(e.calloutLinePoints=Zp(t.callout)),e.defaultAppearance={textColor:0,textSize:0},t.textSize&&(t.textSize>=4||t.textSize<=144)&&(e.defaultAppearance.textSize=t.textSize),t.dash&&(e.borderStyle=1,e.borderStyleParam=t.dash),e.intent=t.intent;var n=E()(t.rect);return e.calloutLinePoints&&n.push.apply(n,E()(t.callout)),e.rect=Xp(n),e.innerRect=Xp(t.rect),e},e.buildLineJson=function(t){var e;if(t.points&&2===t.points.length){var n=t.points[0],r=t.points[1],i=n[0],o=n[1],a=r[0];e={left:i,bottom:r[1],right:a,top:o}}else e=Xp(t.rect);t.doCaption&&t.doCaption;var s={type:"line",date:new Date,rect:e,startStyle:Ht.LineEndingStyle.None,endStyle:Ht.LineEndingStyle.None};return t.intent&&(s.intent=t.intent),t.arrowBegin&&(s.startStyle=Ht.LineEndingStyle[t.arrowBegin]),t.arrowEnd&&(s.endStyle=Ht.LineEndingStyle[t.arrowEnd]),t.leaderLength&&(s.leaderLineLength=t.leaderLength),t.leaderExtend&&(s.leaderLineExtend=t.leaderExtend),t.dash&&(s.borderStyle=1,s.borderStyleParam=t.dash),s},e.buildFlags=function(t,e){return t.hidden?e.flags=2|e.flags:e.flags=-3&e.flags,t.print||void 0===t.print?e.flags=4|e.flags:e.flags=-5&e.flags,t.noView?e.flags=32|e.flags:e.flags=-33&e.flags,t.readOnly?e.flags=64|e.flags:e.flags=-65&e.flags,t.lock?e.flags=128|e.flags:e.flags=-129&e.flags,t.toggleNoView?e.flags=256|e.flags:e.flags=-257&e.flags,e},e.buildCoords=function(t,e){var n=[];if(t.quads)for(var r=Math.floor(t.quads.length/8),i=t.quads,o=0;o<r;o++){var a=i.slice(8*o,8*o+8),s=Math.min.apply(Math,[a[0],a[2],a[4],a[6]]),c=Math.max.apply(Math,[a[1],a[3],a[5],a[7]]),u=Math.max.apply(Math,[a[0],a[2],a[4],a[6]]),d=Math.min.apply(Math,[a[1],a[3],a[5],a[7]]);n.push({left:s,top:c,right:u,bottom:d,rotation:0})}else{var l=Xp(t.rect),h=l.left,f=l.bottom,p=l.right,g=l.top;n.push({left:h,top:g,right:p,bottom:f,rotation:0})}return e.coords=n,e},e.calcRectByVertices=function(t){var e={},n=0,r=0,i=0,o=0;return t.map((function(t,e){var a=t.x,s=t.y;0===e?(n=a,r=a,i=s,o=s):(n=a<n?a:n,r=a>r?a:r,i=s<i?s:i,o=s>o?s:o)})),e.left=n,e.right=r,e.bottom=i,e.top=o,e},e.buildVertices=function(t,e){if(!t.vertices)return e;if("polygon"===t.type||"polyline"===t.type){for(var n=[],r=Math.floor(t.vertices.length/2),i=t.vertices,o=0;o<r;o++){var a=i.slice(2*o,2*o+2);n.push({x:a[0],y:a[1]})}e.vertexes=n,e.rect=this.calcRectByVertices(n)}return e},e.buildFillColor=function(t,e){return t.fillColor?("circle"!==t.type&&"square"!==t.type&&"line"!==t.type&&"polygon"!==t.type&&"polyline"!==t.type&&"freetext"!==t.type||(e["interior-color"]=xn(t.fillColor,"int",0),e.interiorColor=e["interior-color"]),e):e},e.buildGestures=function(t,e){if("ink"!==t.type||!t.gestures)return t.rect&&(e.rect=Xp(t.rect)),e;var n=Jp(t.gestures);return e.inkList=n,e.rect={left:0,right:0,top:0,bottom:0},e},e.buildStampAP=function(t,e){if("stamp"!==t.type)return e;var n,r=this.pdfViewer,i="approved";switch(t.AP&&(i=t.AP.toLowerCase()),i){case"approved":n="Approved";break;case"confidential":n="Confidential";break;case"draft":n="Draft";break;case"expired":n="Expired";break;case"final":n="Final";break;default:n="Approved"}e.icon=n,e.iconCategory="Static",e.url=oc(r.libPath,"stamps/",r.getCurrentLanguage(),"StandardStamps",e.icon+".pdf");var o={annotType:"stamp",category:e.iconCategory,name:e.icon,fileType:"pdf",url:e.url};return e.iconInfo=o,e},e.buildJsonKeyValue=function(t,e){return t.strokeColor&&(e.color=xn(t.strokeColor,"int",0),"freetext"===t.type&&(e.defaultAppearance.textColor=e.color)),t.popupOpen&&"freetext"!==t.type&&"sound"!==t.type&&"fileattachment"!==t.type&&(e.open="yes"),t.contents&&(e.contents=t.contents),t.name&&(e.name=t.name),t.author&&(e.title=t.author),t.opacity&&(e.opacity=t.opacity),t.width&&(e.borderWidth=t.width),"C"===t.borderEffectStyle&&(e.borderStyle=5,e.borderStyleParam=0,t.borderEffectIntensity&&(e.borderStyleParam=t.borderEffectIntensity)),e=this.buildFlags(t,e),"highlight"!==t.type&&"strikeout"!==t.type&&"underline"!==t.type&&"squiggly"!==t.type||((e=this.buildCoords(t,e)).rect={left:0,right:0,top:0,bottom:0}),"fileattachment"===t.type?(t.buffer&&(e.buffer=t.buffer,e.fileName=t.fileName),t.attachIcon&&(e.icon=t.attachIcon)):"sound"===t.type&&t.buffer&&(e.multiBuffer=t.buffer,e.fileName=t.fileName,e.contentType=t.contentType),e=this.buildFillColor(t,e),e=this.buildGestures(t,e),e=this.buildStampAP(t,e),e=this.buildVertices(t,e)},t}(),tg=function(){function t(t,e,n){this.id=t,this.info=e,this.doc=n}return Tt()(t,[{key:"state",get:function(){return this.info.visible},set:function(t){return this.doc.setLayerNodeVisible(this.id,t),this.info.visible=t}},{key:"name",get:function(){return this.info.name}}]),t}(),eg=Hp.ANSB_None,ng=Hp.ANFB_ShouldNone,rg=function(t){return t.jsEngine.getPDFDoc()},ig=function(t){return t.jsEngine.getPDFForm()},og={},ag=function(){for(var t in og){og[t].destroy(),delete og[t]}og={}},sg=function(t){function e(e,n){var r;return(r=t.call(this)||this).jsEngine=e,r.jsApp=n,r._dirty=!1,r._layout="",r._arrTemplate=new Array,r.printParams=new Xf(r.jsEngine,F()(r)),r.annotManage=new Qp(n.viewerApp),r}O()(e,t);var n=e.prototype;return n.addField=function(t,e,n,r){switch(e){case"text":e=6;break;case"button":e=1;break;case"combobox":e=4;break;case"listbox":e=5;break;case"checkbox":e=2;break;case"radiobutton":e=3;break;case"signature":return null}if(r[2]<r[0]){var i=r[0];r[0]=r[2],r[2]=i}if(r[3]>r[1]){var o=r[1];r[1]=r[3],r[3]=o}return ig(this).addControlSync({fieldName:t,fieldType:e,pageIndex:n,rect:{left:r[0],top:r[1],right:r[2],bottom:r[3]}}),this.getField(t)},n.getOCGs=function(){var t=[],e=rg(this).ocgs;for(var n in e.children)cg(e.children[n],t,rg(this));return t},n.getPrintParams=function(){return this.printParams},n.getTemplate=function(t){if(!t||""===t)return null;if(this._arrTemplate.length<=0){var e=rg(this).visibleTemplates;if(e&&e.length>0)for(var n=0;n<e.length;n++){if(t===e[n].name)return new Zf(e[n],!1,rg(this))}if((e=rg(this).invisibleTemplates)&&e.length>0)for(var r=0;r<e.length;r++){if(t===e[r].name)return new Zf(e[r],!0,rg(this))}return null}for(var i=0;i<this._arrTemplate.length;i++){var o=this._arrTemplate[i];if(o.name===t)return o}return null},n.removeTemplate=function(t){if(!t||""===t)return!1;if(rg(this)){var e=this;rg(this).removeTemplate(t).then((function(n){for(var r=0;r<e._arrTemplate.length;r++){if(e._arrTemplate[r].name===t){e._arrTemplate.splice(r,1);break}}}))}},n.print=function(t,e,n,r,i,o,a,s,c){var u,d=this;this.jsEngine.PDFViewer.webPDFSRPromise||(this.jsEngine.getEvent().isSensitiveCheck||(u="object"==_()(t)?{startIndex:t.firstPage,endIndex:t.lastPage,silent:t.interactive,printType:["page","annot"]}:c?{startIndex:c.firstPage,endIndex:c.lastPage+1,silent:c.interactive,printType:["page","annot"]}:{ui:t,startIndex:e,endIndex:n,silent:r,shrinkToFit:i,asImage:o,reverse:a,printType:["page","annot"]},ig(this).addTask((function(t){return d.jsEngine.PDFViewer.printPDFDocumentEx(u)}),!0)))},n.addAnnot=function(t){return"FileAttachment"!==t.type&&"Sound"!==t.type?this.annotManage.addAnnot(t):this.annotManage.showFileDialog(t)},n.syncAnnotScan=function(){return rg(this).getAnnots()},n.getAnnots=function(t){var e=this,n=-1,r=ng,i=eg,o=!1;t&&(t.nPage>=0&&(n=t.nPage),t.nSortBy>=0&&(i=t.nSortBy),t.nFilterBy>=0&&(r=t.nFilterBy),t.bReverse&&(o=t.bReverse));var a=this.numPages,s=rg(this).pageCache,c=0,u=[];if(-1!==n&&(c=n),c>=a)return null;var d=function(){var t=s[c];if(!t)return c++,"continue";var e=Object.keys(t.annotIdMap);if(!e.length)return c++,"continue";var r=e.map((function(e){return{pageIndex:c,annot:t.annotIdMap[e]}}));if(u.push.apply(u,E()(r)),-1!==n)return"break";c++};do{var l=d();if("continue"!==l&&"break"===l)break}while(c<a);var h=[];return u.map((function(t){var n=t.pageIndex,r=t.annot,i=e.annotManage.getAnnot(r,n);i&&h.push(i)})),this.annotManage.getAnnots(h,r,i,o)},n.getAnnot=function(t,e){var n,r=rg(this).pageCache;if(!(n=r[t]))return null;var i=Object.keys(n.annotIdMap);if(!i.length)return null;var o=i.map((function(t){return n.annotIdMap[t]})).find((function(t){return t.getName()==e}));return o?this.annotManage.getAnnot(o,t,this.jsApp):null},n.calculateNow=function(){},n.closeDoc=function(){this.jsEngine.getEvent().isSensitiveCheck||this.jsEngine.closeDoc()},n.exportAsFDF=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.aFields,n=t.bAnnotations,r=void 0!==n&&n,i=rg(this),o=0,a=this.documentFileName.replace(/.pdf$/i,".fdf"),s=1;r&&(s=3);var c=Promise.resolve(),u=[];e&&(c=i.getAnnots().then((function(t){t.forEach((function(t){t.forEach((function(t){var n=t.objectNumber,r=t.getPage().getId();if(e.indexOf(n)>-1){var i=u[r]||[];i.push(n),u[r]=i}}))}))}))),c.then((function(){return i.api.exportToFDF(i.id,o,s,u)})).then((function(t){ss(t,a,"application/vnd.fdf")}))},n.getField=function(t){if(!t)return null;var e,n=rg(this).getPDFForm().getField(t);return n||(e=rg(this).getPDFForm().getField(t,!0))?og[t]?og[t]:og[t]=new Jf(this.jsEngine,n,e):null},n.getNthFieldName=function(t){if("number"!=typeof t&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid index number: "+t);return rg(this).getPDFForm().getFieldByIndex(t).getName()},n.getPageBox=function(t,e){return[0,0,612,792]},n.getPageRotation=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 90*rg(this).pageCache[t].getRotation()},n.getURL=function(){},n.importAnFDF=function(){var t=this,e=document.querySelector(".import-an-fdf");e&&e.remove();var n=document.createElement("label");n.setAttribute("class","import-an-fdf"),n.style.display="none";var r=document.createElement("input");r.type="file",r.accept=".fdf",n.addEventListener("change",(function(e){var r=e.target.files[0];rg(t).importFormFromFile(r,0),n.remove()})),n.appendChild(r),document.body.append(n),setTimeout((function(){n.click()}),100)},n.removeField=function(t){delete og[t],ig(this).removeField(t)},n.resetForm=function(t){if(!this.jsEngine.getEvent().isSensitiveCheck){var e,n=this.jsEngine.PDFViewer.getCurrentActivatable();n&&n.annot&&(e=n.annot.getField()),ig(this).resetForm(t,0,e)}},n.submitForm=function(t,e,n,r,i,o,a,s,c,u,d,l,h,f,p,g,v,m,y,w,b,A,P,E){var x=this,S=this.jsEngine.PDFViewer;if(!this.jsEngine.getEvent().isSensitiveCheck){var C=0;switch(1===arguments.length&&"object"===_()(arguments[0])&&(t=arguments[0].cURL,e=arguments[0].bFDF,n=arguments[0].bEmpty,r=arguments[0].aFields,i=arguments[0].bGet,o=arguments[0].bAnnotations,a=arguments[0].bXML,s=arguments[0].bIncrChanges,c=arguments[0].bPDF,u=arguments[0].bCanonical,d=arguments[0].bExclNonUserAnnots,l=arguments[0].bExclFKey,h=arguments[0].cPassword,f=arguments[0].bEmbedForm,p=arguments[0].oJavaScript,g=arguments[0].cSubmitAs,v=arguments[0].bInclNMKey,m=arguments[0].aPackets,y=arguments[0].cCharset,w=arguments[0].oXML,b=arguments[0].cPermID,A=arguments[0].cInstID,P=arguments[0].cUsageRights,E=arguments[0].bHTMLForm),i&&(C|=On.FlagGetMethod),(c||"PDF"==g)&&(C|=On.FlagSubmitAsPDF),(l||"EXCL"==g)&&(C|=On.FlagExclFKey),E&&(C|=On.FlagExportFormat),g){case"FDF":break;case"XFDF":C|=On.FlagAsXFDF;break;case"HTML":C|=On.FlagExportFormat;break;case"XDP":case"XML":case"XFD":return void console.error("not support submition format")}var D=S.i18n.t("viewer_:pdfjs.safeModeSubmit",{URL:t,interpolation:{escapeValue:!1}});confirm(D)&&ig(this).submitForm(t,r,C).catch((function(t){x.jsApp.alert(S.i18n.t("viewer_:error.c-1"))}))}},n.cleanFields=function(){og={}},n.createIcon=function(t,e,n){return{name:"",stream:t,width:e,height:n}},Tt()(e,[{key:"author",get:function(){return rg(this).getMetadataValue("Author")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return rg(this).setMetadataValue("Author",t)}},{key:"calculate",get:function(){return ig(this).calculationEnabled},set:function(t){return ig(this).calculationEnabled=t}},{key:"creationDate",get:function(){return rg(this).getMetadataValue("CreationDate")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return rg(this).setMetadataValue("CreationDate",t)}},{key:"dirty",get:function(){return this._dirty},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._dirty=t}},{key:"docID",get:function(){return rg(this).info.fileID.slice(0,2)}},{key:"creator",get:function(){return rg(this).getMetadataValue("Creator")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return rg(this).setMetadataValue("Creator",t)}},{key:"documentFileName",get:function(){return rg(this).info.fileName}},{key:"external",get:function(){return!1}},{key:"filesize",get:function(){return rg(this).info.fileSize}},{key:"info",get:function(){return rg(this).metadata}},{key:"icons",get:function(){return rg(this).getNameTreeIcons()}},{key:"keywords",get:function(){return rg(this).getMetadataValue("Keywords")}},{key:"layout",get:function(){switch(this.jsEngine.PDFViewer.getPDFDocRender().getViewMode().constructor.getName()){case"continuous-view-mode":return"OneColumn";case"single-page-view-mode":return"SinglePage";case"'multipage-view-mode'":return"TwoColumnLeft";case"facing-page-view-mode":return"TwoPageLeft"}}},{key:"modDate",get:function(){return rg(this).getMetadataValue("ModDate")}},{key:"numFields",get:function(){return rg(this).getPDFForm().getFieldCount()}},{key:"numPages",get:function(){return rg(this).getPageCount()}},{key:"path",get:function(){return"c:/fakepath/"+rg(this).info.fileName}},{key:"pageNum",get:function(){var t=this.jsEngine.PDFViewer,e=t.getCurrentActivatable();return e&&e.annot?e.annot.getPage().getIndex():t.getPDFDocRender().getCurrentViewMode().getCurrentPageIndex()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return t>=this.numPages&&(t=this.numPages-1),this.jsEngine.PDFViewer.goToPage(t,0,0,!1),t}},{key:"templates",get:function(){}}],[{key:"name",get:function(){return"Doc"}}]),e}(Mf),cg=function t(e,n,r){for(var i in e.hasLayer&&n.push(new tg(e.id,e,r)),e.children)t(e.children[i],n,r)},ug=function(t,e){if(null==t)throw new Error("Not enough arguments for vsprintf");function n(t,e,n){if(null==e)return"s"==t?"":"0";var r,i="",o="",a=" ";if(n.short||n.long||n.long_long)switch(t){case"e":case"f":case"G":case"E":case"G":case"d":n.short?e>=32767?e=32767:e<=-32768&&(e=-32768):n.long?e>=2147483647?e=2147483647:e<=-2147483648&&(e=-2147483648):e>=0x8000000000000000?e=0x8000000000000000:e<=-0x8000000000000000&&(e=-0x8000000000000000);break;case"X":case"B":case"u":case"o":case"x":case"b":e<0&&(e=Math.abs(e)-1),n.short?e>=65535&&(e=65535):n.long?e>=4294967295&&(e=4294967295):e>=0x10000000000000000&&(e=0x10000000000000000)}switch(t){case"c":r=String.fromCharCode(parseInt(e));break;case"s":r=e.toString();break;case"d":case"u":r=new Number(parseInt(e)).toString();break;case"o":r=new Number(parseInt(e)).toString(8);break;case"x":r=new Number(parseInt(e)).toString(16);break;case"B":case"b":r=new Number(parseInt(e)).toString(2);break;case"e":var s=n.precision?n.precision:6;r=new Number(e).toExponential(s).toString();break;case"f":s=n.precision?n.precision:6;r=new Number(e).toFixed(s).toString();break;case"g":s=n.precision?n.precision:6;r=new Number(e).toPrecision(s).toString();break;case"X":r=new Number(parseInt(e)).toString(16).toUpperCase();break;case"E":s=n.precision?n.precision:6;r=new Number(e).toExponential(s).toString().toUpperCase();break;case"G":s=n.precision?n.precision:6;r=new Number(e).toPrecision(s).toString().toUpperCase()}if(n["+"]&&parseFloat(e)>0&&-1!=["d","e","f","g","E","G"].indexOf(t)&&(i="+"),n[" "]&&parseFloat(e)>0&&-1!=["d","e","f","g","E","G"].indexOf(t)&&(i=" "),n["#"]&&0!=parseInt(e))switch(t){case"o":i="0";break;case"x":case"X":i="0x";break;case"b":i="0b";break;case"B":i="0B"}if(n[0]&&!n["-"]&&(a="0"),n.width&&n.width>r.length+i.length)for(var c=n.width-r.length-i.length,u=0;u<c;++u)o+=a;return n["-"]&&!n[0]?r+=o:r=o+r,i+r}null==e&&(e=[]);for(var r="",i=0,o=0,a={long:!1,short:!1,long_long:!1},s=!1,c=!1,u=!1,d=!1,l=!1,h=!1,f=".",p=0;p<t.length;++p){var g=t.charAt(p);if(s){switch(g){case"i":g="d";break;case"D":a.long=!0,g="d";break;case"U":a.long=!0,g="u";break;case"O":a.long=!0,g="o";break;case"F":g="f"}switch(g){case"c":case"s":case"d":case"u":case"o":case"x":case"e":case"f":case"g":case"X":case"E":case"G":case"b":case"B":var v=e[o];if(l){var m=v;if(v instanceof Array)m=v;else if("string"==typeof v||v instanceof String)m=v.split("").map((function(t){return t.charCodeAt()}));else if(("number"==typeof v||v instanceof Number)&&a.bitwidth){m=[];do{m.unshift(v&~(-1<<a.bitwidth))}while(v>>>=a.bitwidth)}else m=v.toString().split("").map((function(t){return t.charCodeAt()}));r+=m.map((function(t){return n(g,t,a)})).join(f)}else r+=n(g,v,a);d||++i,o=i,a={},c=!1,s=!1,u=!1,d=!1,l=!1,h=!1,f=".";break;case"v":l=!0;break;case" ":case"0":case"-":case"+":case"#":a[g]=!0;break;case"*":c=!0;break;case".":u=!0;break;case"@":h=!0;break;case"l":a.long?(a.long_long=!0,a.long=!1):(a.long=!0,a.long_long=!1),a.short=!1;break;case"q":case"L":a.long_long=!0,a.long=!1,a.short=!1;break;case"h":a.short=!0,a.long=!1,a.long_long=!1}if(/\d/.test(g)){var y=parseInt(t.substr(p));if(p+=y.toString().length-1,"$"==t.charAt(p+1)){if(y<0||y>e.length)throw new Error("out of bound");c?(u?(a.precision=e[y-1],u=!1):"v"==t.charAt(p+2)?f=e[y-1]:a.width=e[y-1],c=!1):(d=!0,o=y-1),++p}else u?(a.precision=y,u=!1):h?(a.bitwidth=y,h=!1):a.width=y}else c&&!/\d/.test(t.charAt(p+1))&&(u?(a.precision=e[o],u=!1):"v"==t.charAt(p+1)?f=e[o]:a.width=e[o],++i,d||o++,c=!1)}else{if("%"==g){if("%"==t.charAt(p+1)){r+="%",++p;continue}r+=g;continue}r+=g}}return r},dg=function(){function t(t){this.jsGlobalAPI=t}var e=t.prototype;return e.printd=function(t,e,n){if(!e||!e instanceof Date||isNaN(e.getTime()))return"";if(t){if("string"==typeof t)return this.jsGlobalAPI.FXFormatDate(t,e);if("number"==typeof t)switch(t){case 0:var r="D:";return r+=e.getFullYear(),r+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r+=e.getDate()<10?"0"+e.getDate():e.getDate(),r+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),r+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),r+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();case 1:r="";return r+=e.getFullYear()+".",r+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r+=".",r+=e.getDate()<10?"0"+e.getDate():e.getDate(),r+=" ",r+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),r+=":",r+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),r+=":",r+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();case 2:r="";return r+=e.getFullYear()+"/",r+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r+="/",r+=e.getDate()<10?"0"+e.getDate():e.getDate(),r+=" ",r+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),r+=":",r+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),r+=":",r+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();default:return""}return""}return""},e.printf=function(t,e){if(!t||!e)return"";e instanceof Array||(e=[e]);var n=arguments.length;if(n<1)return"";var r=t,i=(t=t.replace("%x","%X")).indexOf("%,"),o=!1,a=",";if(-1!=i){var s=parseInt(t.substr(i+2,1));if(s>4)return"";switch(s){case 0:o=TRUE,a=",",".";break;case 1:".";break;case 2:o=TRUE,a=".",",";break;case 3:","}var c="0",u=t.substr(i+3,1);"0"===u?c="0":"+"===u&&(c="+");var d=0,l=t.indexOf(".",i+4);d=l>i+3?parseInt(t.substr(i+4,l-i-4)):parseInt(t.substr(i+4,1));var h=t.length;if(l>-1&&i+l<h){var f=t.substr(i+1,l-1);t=t.replace(f,"")}else if("."===u&&-1===l){l=i+3;f=t.substr(i+1,l-1);t=t.replace(f,"")}else{var p=h-2;if(!(i+1+p<h&&p>=0))return e;f=t.substr(i+1,p);t=t.replace(f,"")}}var g=0,v=0,m=t;m="S"+m;for(var y=new Array,w=!1;-1!=g;){var b="",A=(b=-1===(v=m.indexOf("%",g+1))?m.substr(g):m.substr(g,v-g)).indexOf("%");if(-1!==A){var P=b.substr(A+1);"c"!==P&&"C"!==P&&"d"!==P&&"i"!==P&&"o"!==P&&"u"!==P&&"x"!==P&&"X"!==P&&"e"!==P&&"E"!==P&&"f"!==P&&"g"!==P&&"G"!==P||(w=!0)}y.push(b),g=v}for(var E="",x="",S=0;S<y.length;S++)if(x=E,x+=y[S],0!==S){if(S>=n)break;E=ug(x,e)}else E=x;""===E&&(r.replace("%,","%"),E=r);var C=(E=E.substr(1)).indexOf(".");if(C<0)C=E.length;else{f=(E=E.slice(0,C)+"."+E.slice(C)).substr(C+1,1);E=E.replace(f,"")}if(o&&w)for(var D=C-3;D>0;D-=3)E=E.slice(0,D)+a+E.slice(D);var I=E.length;if(d>I)for(D=0;D<d-I;D++)E=c+E;return E},e.printx=function(t,e){if(!t||!e)return"";for(var n=e.length,r=t.length,i="",o=0,a=0;a<r;a++){var s=t[a];switch(s){case"?":i+=e[o],o++;break;case"X":for(;o<n;){if(e[o]>="0"&&e[o]<="9"||e[o]>="a"&&e[o]<="z"||e[o]>="A"&&e[o]<="Z"){i+=e[o],o++;break}o++}break;case"A":for(;o<n;){if(e[o]>="a"&&e[o]<="z"||e[o]>="A"&&e[o]<="Z"){i+=e[o],o++;break}o++}break;case"9":for(;o<n;){if(e[o]>="0"&&e[o]<="9"){i+=e[o],o++;break}o++}break;case"*":i+=e.substring(o),o=n-1;break;case"\\":break;case">":e=e.toLocaleUpperCase();break;case"<":e=e.toLocaleLowerCase();break;case"=":break;default:i+=s}}return i},e.scand=function(t,e){return new Date(e)},t}(),lg=n(362),hg=n.n(lg),fg={Times:"Times-Roman",TimesB:"Times-Bold",TimesI:"Times-Italic",TimesBI:"Times-BoldItalic",Helv:"Helvetica",HelvB:"Helvetica-Bold",HelvI:"Helvetica-Oblique",HelvBI:"Helvetica-BoldOblique",Cour:"Courier",CourB:"Courier-Bold",CourI:"Courier-Oblique",CourBI:"Courier-BoldOblique",Symbol:"Symbol",ZapfD:"ZapfDingbats"};function pg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var gg={border:{s:"solid",b:"beveled",d:"dashed",i:"inset",u:"underline"},style:{ch:"check",cr:"cross",di:"diamond",ci:"circle",st:"star",sq:"square"},display:{visible:0,hidden:1,noPrint:2,noView:3},global:{setPersistent:function(){}},console:new(function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.setHandler=function(t){this.handler=t},n.clear=function(){this.impl?this.impl.clear():window.console.clear()},n.show=function(){return this.handler("show"),!0},n.hide=function(){return!0},n.println=function(t){t instanceof Object&&(t=t.toString()),window.console.log(t)},e}(Mf)),color:Vf,font:fg,scaleWhen:qf},vg=function(){function t(t,e){this._JSEngine=t,this._app=e}var e=t.prototype;return e.__destroy__=function(){this._app=null,this._JSEngine=null},e.setJSEvent=function(t){window.jsEvent=t,this.jsEvent=t},e.AFSimple_Calculate=function(t,e){return Hp.AFSimple_Calculate(this.JSEngine,t,e)},e.AFRange_Validate=function(t,e,n,r){return Hp.AFRange_Validate(this.JSEngine,this.app,t,e,n,r)},e.AFNumber_Format=function(t,e,n,r,i,o){return Hp.AFNumber_Format(this.JSEngine,this._app,t,e,n,r,i,o)},e.AFTime_Format=function(t){return Hp.AFTime_Format(this.JSEngine,this._app,t)},e.AFTime_FormatEx=function(t){return Hp.AFTime_FormatEx(this.JSEngine,this._app,t)},e.AFTime_Keystroke=function(t){return Hp.AFDate_KeystrokeEx(this.JSEngine,this._app,t)},e.AFTime_KeystrokeEx=function(t){return Hp.AFDate_KeystrokeEx(this.JSEngine,this._app,t)},e.AFDate_FormatEx=function(t){return Hp.AFDate_FormatEx(this.JSEngine,this._app,t)},e.AFPercent_Format=function(t,e){return Hp.AFPercent_Format(this.JSEngine,this._app,t,e)},e.AFMergeChange=function(t){return Hp.AFMergeChange(t)},e.AFNumber_Keystroke=function(t,e,n,r,i,o){return Hp.AFNumber_Keystroke(this.JSEngine,this._app,t,e,n,r,i,o)},e.AFParseDateEx=function(t,e){return Hp.AFParseDateEx(t,e)},e.AFMakeNumber=function(t){return Hp.AFMakeNumber(t)},e.AFDate_KeystrokeEx=function(t){return Hp.AFDate_KeystrokeEx(this.JSEngine,this._app,t)},e.AFSpecial_Format=function(t){return Hp.AFSpecial_Format(this.JSEngine,this.app,t)},e.FXFormatDate=function(t,e){return Hp.FXFormatDate(t,e)},e.AFSpecial_Keystroke=function(t){return Hp.AFSpecial_Keystroke(this.JSEngine,this._app,t)},e.AFPercent_Keystroke=function(t){return Hp.AFPercent_Keystroke(this.JSEngine,this._app,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pg(Object(n),!0).forEach((function(e){R()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t))},e.AFSpecial_KeystrokeEx=function(t){return Hp.AFSpecial_KeystrokeEx(this.JSEngine,this._app,t)},Tt()(t,[{key:"JSEngine",get:function(){if(!this._JSEngine)throw new Error("JSEngine is not initialized or destroyed!");return this._JSEngine}},{key:"app",get:function(){if(!this._app)throw new Error("JSEngine is not initialized or destroyed!");return this._app}}]),t}();Object.keys(Hp).forEach((function(t){"function"!=typeof Hp[t]&&(vg[t]=Hp[t])})),A()(vg.prototype,gg);var mg=URL.createObjectURL(new Blob([hg()({})],{type:"text/html"})),yg="ActiveXObject"in self||navigator.userAgent.toLowerCase().match(/msie [\d\.]+/)||navigator.userAgent.toLowerCase().match(/MicroMessenger/i)||navigator.userAgent.toLowerCase().match(/mibrowser/i)||navigator.userAgent.toLowerCase().match(/Html5Plus/i);var wg=function(){function t(t,e,n,r){this.JSEngine=t;var i=function(r){function i(){var i;return(i=r.call(this,t,e)||this).util=new dg(F()(i)),i.doc=n,i.this=n,i.getEvent=function(e){return t.getEvent(e)},i.postRunScripts=function(e){return t.postRunScripts(e)},i}return O()(i,r),i}(vg);this.globalVariables=new i,this.noFrame=yg||r}var e=t.prototype;return e.init=function(){var t,e,n,r=this;if(!this.noFrame)return this.preFrame=document.createElement("iframe"),this.preFrame.style.display="none",this.preFrame.style.position="absolute",this.preFrame.style.top=0,this.enable=!1,new Promise((function(t,e){r.preFrame.onload=t,r.preFrame.onerror=e,r.preFrame.src=mg,document.body.appendChild(r.preFrame)})).then((function(t){r.enable=!0,r.preFrame.contentWindow.initJS(r.globalVariables)}));t=this.globalVariables,e=new function(){var t=this,e=Object.getOwnPropertyDescriptors(window);delete e.self,delete e.top,delete e.parent,delete e.globalThis,delete e.global;var n=function(e){if(e[0].toLowerCase()!==e[0])return"continue";Object.defineProperty(t,e,{get:function(){return window[e]},set:function(t){window[e]=t}})};for(var r in e)n(r);this.top=this,this.parent=window,this.self=this,this.globalThis=this,this.global=this},n=function(){var n=["jsEngine","_calculate","_dirty","_layout","_arrTemplate","printParams","annotManage","timeStamp","cleanFields"],r=t.doc;for(var i in r)-1==n.indexOf(i)&&function(t){"function"==typeof r[t]?e[t]=function(){return r[t].apply(r,arguments)}:Object.defineProperty(e,t,{get:function(){return r[t]},set:function(e){r[t]=e}})}(i);return{docClosure:function(n){return new Function("f","globals","window","with(globals){with(globals.doc){eval(f);return function(f){eval(f);}}}")(n,t,e)}}}(),e.appClosure=t.appClosure=n,e.runJS=t.runJS=function(e,r){var i=t.doc;t.event=r,i.timeStamp=r&&r.timeStamp;var o=function(){try{i.exec=n.docClosure.call(i,e.code)}catch(t){i.exec=n.docClosure(e.code),console.error(t)}};switch(e.action){case"execute":i.exec(e.code,e,r);break;case"reset":o();break;default:e.global&&o()}},this.enable=!0},e.exec=function(t,e,n,r){var i={action:"execute",code:t,global:e,event:n.event};this.enable||console.error("js env is not ready!!");var o=this.JSEngine.events[i.event];return this.noFrame?this.globalVariables.runJS(i,o):this.preFrame.contentWindow.runJS(i,o),o&&o.rc},e.resetClosure=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={action:"reset",code:e,event:t.event};this.enable||console.error("js env is not ready!!");var r=this.JSEngine.events[n.event];return this.noFrame?this.globalVariables.runJS(n,r):this.preFrame.contentWindow.runJS(n,r),r.rc},e.destroy=function(){this.globalVariables&&(this.globalVariables.__destroy__(),this.globalVariables=null),this.JSEngine=null,!this.noFrame&&this.preFrame&&(document.body.removeChild(this.preFrame),this.preFrame=null)},t}(),bg=function(t){function e(){var e;return(e=t.call(this)||this).change="",e.changeEx="",e.commitKey="",e.fieldFull="",e.keyDown="",e.modifier="",e.name="",e.rc="",e.richChange="",e.richChangeEx="",e.richValue="",e.selEnd="",e.selStart="",e.shift="",e.source="",e.target="",e.targetName="",e.type="",e.willCommit="",e.bExtractDenpends=!1,e.depends=[],e.isLoading=!1,e.isSensitiveCheck=!1,e}return O()(e,t),Tt()(e,[{key:"value",get:function(){return this.v},set:function(t){this.v=t,this.valueSetted=!0}}],[{key:"name",get:function(){return"event"}}]),e}(Mf),Ag=function(t){function e(e){var n;(n=t.call(this)||this).app=e;var r=function(t){t in F()(n)||Object.defineProperty(F()(n),t,{get:function(){return e[t]},set:function(n){e[t]=n}})};for(var i in e)r(i);return n}O()(e,t);var n=e.prototype;return n.setActionCallback=function(t){this.actionCallback=t},n.alert=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return this.actionCallback&&"function"==typeof this.actionCallback.alert?"object"!==_()(t)||Array.isArray(t)||1!==arguments.length?this.actionCallback.alert({cMsg:t,nIcon:e,nType:n,cTitle:r}):this.actionCallback.alert(t):this.app.alert.apply(this.app,arguments)},n.alertAsync=function(t){return this.actionCallback&&this.actionCallback.alertAsync?this.actionCallback.alertAsync(t):this.app.alertAsync.apply(this.app,arguments)},e}(n(136).a.getProxyClass(Wf,(function(t,e,n,r,i){var o=t.actionCallback;switch(i){case"method":return o&&"function"==typeof o[r]?o[r].apply(o,n):e.apply(t.app,n);case"getter":return t.app[r];case"setter":t.app[r]=n[0]}}),null));function Pg(t){return t+"yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Mr()|0;return("x"==t?e:3&e|8).toString(16)}))}var Eg=[],xg=function(){function t(t){var e=this;this.events={},this.curEvent=null,this.PDFViewer=t,this.hasInitAnnots=!1;var n=t.config.enableJS;this.enableJS=null==n||n;var r=new Wf(this,t),i=new Ag(r);this.originJSApp=r,this.app=i;var o=new sg(this,i),a=t.config.noJSFrame;this.jsEnv=new wg(this,i,o,a),setTimeout((function(){e.jsEnv.init()}),0),this.cacheJSDoc=o,this.PDFViewer.eventEmitter.on("open-file-success",(function(t){e.cacheJSDoc.dirty=!1,ag(),tp()})),this.PDFViewer.eventEmitter.on("will-close-document",(function(t){e.cacheJSDoc.dirty=!1,e.events={},e.curEvent=null,ag(),tp()})),this.jsEnv.globalVariables.console.setHandler((function(t){"show"==t&&e.PDFViewer.eventEmitter.emit("show-js-console")})),this.PDFViewer.eventEmitter.on("doc-modified",(function(){e.cacheJSDoc.dirty=!0}))}var e=t.prototype;return e.setConsoleImpl=function(t){this.jsEnv.globalVariables.console=t},e.setActionCallback=function(t){if(t){var e=new t(this.originJSApp);e.app||(e.app=this.originJSApp),this.app.setActionCallback(e)}else this.app.setActionCallback(null)},e.setStatus=function(t,e){this.status=t,this.eventSource=e},e.getEvent=function(t){return t?this.events[t]:this.events[this.cacheJSDoc.timeStamp||this.curEvent]||{}},e.getEnableJS=function(){return this.enableJS},e.setEnableJS=function(t,e){var n=this.enableJS;if(this.enableJS=t,!n&&t&&e){var r=e.getJsNameTree(),i="";for(var o in r)i+=r[o]+"\n";var a=e.action;a&&a.getScript&&(i+=a.getScript()),this.initEvent(13,null,null,"Init"),this.resetClosure(i)}},e.resetClosure=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.enableJS&&this.jsEnv.resetClosure({event:this.curEvent},t)},e.getPDFDoc=function(){return this.PDFViewer.currentPDFDoc},e.getFieldValue=function(t){return this.getPDFForm().getField(t).getValue()},e.getPDFForm=function(){return this.getPDFDoc().getPDFForm()},e.destroyEvent=function(t){t.target=null,t.engineTarget=null,t.source=null,t.doc=null},e.initEvent=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};"Init"==r&&(this.events={},this.cacheJSDoc.cleanFields());var o=new bg;o.engineTarget=n,o.name=r;var a=Pg((new Date).valueOf()+""+r);for(e&&(a+=e.getName()+"_"),this.cacheJSDoc!==n?(o.target=this.cacheJSDoc.getField(n&&n.getName()),o.source=this.cacheJSDoc.getField(e&&e.getName()),n&&(a+=n.getName())):o.target=n,o.type=t,o.rc=!0,o.v="";this.events[a];)a+="p";o.timeStamp=this.curEvent=a,this.events[a]=o,o.changed=!1;var s=void 0;for(var c in Object.defineProperty(o,"change",{get:function(){return s},set:function(t){s=t,o.changed=!0}}),o.param=i,i)o[c]=i[c];switch(r){case Zi.FieldKeyStroke:o.v=n.getValue(),o.changeEx=n.getValue();break;case Zi.FieldRecalculateValue:case Zi.FieldValueChanged:o.v=n.getValue();break;case"WillPrint":break;case"Focus":case Zi.AnnotReceiveInputFocus:o.v=n.getValue();break;case"DidPrint":break;case"Blur":case Zi.AnnotLoseInputFocus:o.v=n.getValue();break;case"WillSave":break;case"Format":case Zi.FieldWillFormat:o.rc=!0,o.v=n.getValue()}return a},e.closeDoc=function(){this.PDFViewer.close()},e.postRunScripts=function(t){var e="";switch(t.name){case Zi.FieldRecalculateValue:if(e=t.rc,void 0!==t.value&&t.valueSetted){var n=t.engineTarget,r=n.getType();if(4===r||5===r){var i=n.getOptions();i.forEach((function(e){e.value==t.value?e.selected=!0:e.selected=!1})),n.setOptions(i,!0),n.updateWidgetsUI(n.form,n.info.name,"setItems")}n.setValue(t.value)}break;case Zi.FieldWillFormat:t.rc&&t.engineTarget.showDisplayValue(t.value),e={rc:t.rc,format:t.format,value:t.value};break;case Zi.FieldKeyStroke:e=t.change,e={rc:t.rc,format:t.format,change:e};break;case Zi.FieldValueChanged:e={rc:t.rc,format:t.format,value:t.value}}return"calculate"==this.status&&(this.getPDFForm().calculate(this.eventSource),this.status=""),this.destroyEvent(t),delete this.events[t.timeStamp],t=null,e},e.handleJavaScripts=function(t,e,n){var r,i=this.events[n.event]||{};try{if(this.isBusy=!0,r=this.jsEnv.exec(t,!!e,n),this.isBusy=!1,"boolean"==typeof r)return this.postRunScripts(i)}catch(t){return this.isBusy=!1,i.rc=!0,this.postRunScripts(i),{ret:r=-1,errorInfo:t}}return r},e.delayHandle=function(){var t=this;setTimeout((function(){if(t.isBusy)t.delayHandle();else for(var e=Eg.pop();e;)t.exec.apply(t,E()(e)),e=Eg.pop()}),10)},e.exec=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&0!==t.trim().length&&this.enableJS?(n.event=n.event||this.curEvent,this.handleJavaScripts(t,e,n)):{rc:!0}},e.destroy=function(){this.PDFViewer=null,this.jsEnv.destroy()},t}(),Sg=function(){function t(t){this.pdfViewer=t,this.stateHandlers={},this.currentStateHandler=Ms,this.register(Ms),this.config=t.config.stateHandlerConfig||{}}var e=t.prototype;return e.getStateHandlerConfig=function(t){return this.config[t]},e.setStateHandlerConfig=function(t,e){this.config[t]=e},e.pushStateHandlerConfig=function(t,e){var n=this.config[t]||{};this.config[t]=A()(n,e)},e.register=function(t){this.stateHandlers[t.getStateName()]=t},e.unregister=function(t){var e=this.stateHandlers[t];this.currentStateHandler===e&&this.switchTo(Ms.getStateName()),delete this.stateHandlers[t]},e.get=function(t){return this.stateHandlers[t]||Ms},e.switchTo=function(t,e){var n=this.pdfViewer.eventEmitter,r=this.currentStateHandler,i=this.get(t);if(n.emit(Ct.beforeSwitchStateHandler,i,r),e&&i.setParams(e,this.pdfViewer),r!==i){this.currentStateHandler=i,t&&this.pdfViewer.activeElement(null),n.emit(Ct.deactiveStateHandler,r),n.emit(Ct.switchStateHandler,i,r);var o=this.pdfViewer.pdfViewerRender;if(o){var a=o.pdfDocRender;if(a){a.setStateHandler(i);var s=a.pagesRender;if(s){var c=s.pageRenders;if(c)for(var u=0,d=c.length;u<d;u++){c[u].stateHandler&&c[u].setStateHandler(i)}}}}}},e.getCurrentStates=function(){return this.currentStateHandler},t}(),Cg=function(){function t(){this.password=null,this.dataURL=null,this.encipherment=null,this.isEncryption=!1}var e=t.prototype;return e.getPassword=function(){return this.password},e.setPassword=function(t){var e=this.encipherment;this.password=e?e(t):t,this.isEncryption=!!e},e.setEncryptionAlgorithm=function(t){this.encipherment=t},e.verify=function(t){var e;this.isEncryption?e=this.encipherment(t)===this.password:e=t===this.password;return e},e.getDataURL=function(){return this.dataURL},e.setDataURL=function(t){this.dataURL=t},e.export=function(){return{password:this.password,dataURL:this.dataURL,encipherment:this.encipherment,isEncryption:this.isEncryption}},e.import=function(t){this.password=t.password,this.dataURL=t.dataURL,this.encipherment=t.encipherment,this.isEncryption=t.isEncryption},e.base64ToArrayBuffer=function(t){for(var e=window.atob(t),n=e.length,r=new Uint8Array(n);n--;)r[n]=e.charCodeAt(n);return r},e.arrayBufferToBase64=function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)},t}(),Dg=function(){function t(t){this.pdfViewer=t,this.inkSignList=[],this.currentInkSign=null}var e=t.prototype;return e.getList=function(){return this.inkSignList},e.push=function(t){var e=this.inkSignList.length;return this.inkSignList.push(t),this.pdfViewer.eventEmitter.emit(Ct.inkSignAdded,this.inkSignList),e},e.delete=function(t){this.inkSignList.splice(t,1),this.pdfViewer.eventEmitter.emit(Ct.inkSignDeleted,this.inkSignList)},e.get=function(t){return this.inkSignList[t]},e.addInkSign=function(){return new Cg},e.setCurrentInkSign=function(t){this.currentInkSign=this.inkSignList[t]},e.getCurrentInkSign=function(){return this.currentInkSign},t}(),Ig=(n(442),function(){function t(){this.collection=[]}var e=t.prototype;return e.push=function(t){var e=this,n=this.indexOf(t),r=this.size();-1===n?this.collection.push(t):t===this.peak()?this.collection.push(t):this.collection.splice(n+1,1/0);return function(){r>=e.size()||e.collection.splice(r,1/0)}},e.indexOf=function(t){return this.collection.indexOf(t)},e.pop=function(){return this.collection.pop()},e.peak=function(){return this.collection[this.collection.length-1]},e.clear=function(){this.collection.length=0},e.size=function(){return this.collection.length},t}());window.ActvationShortcutContextManager=Ig;var Rg,Tg=function(){function t(t,e,n,r,i){this.native=t,this.shortcut=e,this.opportunity=n,this.command=r,this.context=i,this.stopped=!1,this.nativeEvent=this.native}var e=t.prototype;return e.preventDefault=function(){this.native.preventDefault()},e.stop=function(){this.stopped=!0},e.stopPropagation=function(){this.native.stopPropagation()},t}();!function(t){t.keydown="keydown",t.keyup="keyup"}(Rg||(Rg={}));var _g=Ea.a.getLogger("ShortcutContext"),kg=function(){function t(t){this.name=t,this.uperLayer=[],this.parents=[],this.emitter=new tc.a,this.shortcuts={},this.interceptors=[]}var e=t.prototype;return e.getUperLayers=function(){return this.uperLayer.slice(0)},e.getParents=function(){return this.parents.slice(0)},e.attach=function(t){var e=t;this.uperLayer.indexOf(e)>-1||this.uperLayer.push(e)},e.extend=function(t){var e=t;this.parents.indexOf(e)>-1||this.parents.push(e)},e.interceptor=function(){for(var t,e=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=this.interceptors).push.apply(t,r),function(){r.forEach((function(t){var n=e.interceptors.indexOf(t);n>-1&&e.interceptors.splice(n,1)}))}},e.registerShortcut=function(t,e){var n=this;return this.shortcuts[t]=va.from(e),function(){delete n.shortcuts[t]}},e.on=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clear:!1};r.clear&&this.removeListener(t);var i=function(t){var n=!!r.keydown,i=!!r.keyup||void 0===r.keydown&&void 0===r.keyup;(n&&t.opportunity===Rg.keydown||i&&t.opportunity===Rg.keyup)&&(t.stopped||(r.interceptors||[]).reduceRight((function(t,e){return function(n){e(n,t)}}),(function(n){r.preventDefault&&t.preventDefault(),e(n)}))(t))},o=function(e){e!==t&&e||n.emitter.off(t,i)};return e.__remove__=o,this.emitter.on(t,i),o},e.keyup=function(t,e,n){return this.on(t,e,A()(A()({},n),{keyup:!0,keydown:!1}))},e.keydown=function(t,e,n){return this.on(t,e,A()(A()({},n),{keyup:!1,keydown:!0}))},e.removeListener=function(t,e){var n=e;e&&"string"==typeof n.__remove__?n.__remove__(t):this.emitter.removeAllListeners(t)},e.handleEvent=function(t,e){var n=this,r=Rg[t.type];if(!r)throw new Error("Unexpected keyboard event type: ".concat(t.type,', it should be "keydown" or "keyup"'));var i=this.getShortcuts(),o=!1,a=function(a){var s=i[a],c=new Tg(t,s,r,a,n);if(co(t,s)){e.concat(n.getInterceptors(a)).reduceRight((function(t,e){return function(n){e(n,t)}}),(function(e){n.getAncestorLink(a).forEach((function(t){t.emitter.emit(a,e)})),ya.some((function(t){return t.equals(s)}))&&t.preventDefault()}))(c),o=!0}};for(var s in i)a(s);return o||this.uperLayer.some((function(n){return n.handleEvent(t,e)}))},e.getInterceptors=function(t){return this.getAncestorLink(t).reduceRight((function(t,e){return t.concat(e.interceptors)}),[])},e.getAncestorLink=function(t){var e=this,n=[];return function r(i){i.getParents().some((function(e){return e.getShortcut(t,!1)?(n.push(e),!0):r(e)}))?n.unshift(i):e.getShortcut(t,!1)&&n.push(e)}(this),n},e.getShortcut=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getShortcuts(e);return n[t]},e.getShortcuts=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t){var e=this.parents.reduceRight((function(e,n){return A()(e,n.getShortcuts(t))}),{});return A()({},e,this.shortcuts)}return A()({},this.shortcuts)},e.getComandName=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="string"==typeof t?va.from(t):t,r=this.getShortcuts(e);for(var i in r){var o=r[i];if(o.equals(n))return i}},e.before=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _g.warn("Deprecated API: ShortcutContext.before"),this.on(t,e,{keydown:!0,keyup:!1,preventDefault:n})},e.toString=function(){return this.name},t}(),Fg=Ea.a.getLogger("Keyboard"),Mg=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchor:document.body};return(e=t.call(this)||this).disabled=!1,e.contexts=new ds.a,e.activationManager=new Ig,e.interceptors=[],e.defaultShortcutContext=new kg("default-shortcut-context"),e.anchor=n.anchor,e.prepare(),e.contexts.filter(Boolean),e.addDestroyHook(e.contexts),e}O()(e,t);var n=e.prototype;return n.disable=function(){this.disabled=!0},n.enable=function(){this.disabled=!1},n.setup=function(t){var e=this;t.forEach((function(t){e.createContext(t.context,t,(function(e){for(var n in t.shortcuts)e.registerShortcut(n,t.shortcuts[n])}))}))},n.createContext=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=n.extends||[],o=n.topLayers||[],a=function(t){var n=e.getContextByName(t);if(!n)throw new Error("ShortcutContext cannot be used before created: ".concat(t));return n},s=i.map((function(t){return a(t)})),c=o.map((function(t){return a(t)})),u=this.getContextByName(t)||new kg(t);return s.forEach((function(t){u.extend(t)})),c.forEach((function(t){u.attach(t)})),this.contexts.dispatch(t,u),r&&this.withContext(t,r),u},n.withContext=function(t,e){var n=this;return this.contexts.takeWhile(t).then((function(t){return e.call(n,t),t}))},n.activeContext=function(t){var e=this.contexts.getCurrentValue(t);return e?this.activationManager.push(e):Dt.a},n.getActivateContext=function(){return this.activationManager.peak()||this.defaultShortcutContext},n.on=function(t,e,n){var r=this.findContextByCommand(t).map((function(r){return r.on(t,e,n)}));return function(){r.forEach((function(t){return t()})),r.length=0}},n.keydown=function(t,e,n){var r=this.findContextByCommand(t).map((function(r){return r.keydown(t,e,n)}));return function(){r.forEach((function(t){return t()})),r.length=0}},n.keyup=function(t,e,n){var r=this.findContextByCommand(t).map((function(r){return r.keyup(t,e,n)}));return function(){r.forEach((function(t){return t()})),r.length=0}},n.findContextByShortcut=function(t){var e=[];return this.contexts.forEach((function(n){n.getComandName(t,!1)&&e.push(n)})),e},n.findContextByCommand=function(t){var e=[];return this.contexts.forEach((function(n){t in n.getShortcuts(!1)&&e.push(n)})),e},n.getContextByName=function(t){return this.contexts.getCurrentValue(t)},n.getBinder=function(t){return Fg.warn("Deprecated API: Keyboard.getBinder"),this.getContextByName(t)},n.activeBinder=function(t){return Fg.warn("Deprecated API: Keyboard.activeBinder"),this.activeContext(t)},n.markdown=function(){var t=[];return this.contexts.forEach((function(e){var n=e.getUperLayers(),r=e.getParents();n.forEach((function(n){t.push("    ".concat(n.name," --\x3e ").concat(e.name))})),r.forEach((function(n){t.push("    ".concat(n.name," -.Extends.-> ").concat(e.name))}));var i=e.getShortcuts(!1);if(Object.keys(i).length>0){for(var o in t.push("    subgraph ".concat(e.name,"_sub [").concat(e.name,"]")),i)t.push("    ".concat(e.name," ==Shortcut==> ").concat(o," -.-> ").concat(i[o].toString()));t.push("    end")}})),"```mermaid\n".concat("flowchart LR","\n").concat(t.join("\n"),"\n```")},n.onShortcut=function(t,e,n){var r=t.toString();return this.defaultShortcutContext.registerShortcut(r,r),this.defaultShortcutContext.on(r,e,n)},n.interceptor=function(){for(var t,e=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=this.interceptors).push.apply(t,r),function(){r.forEach((function(t){var n=e.interceptors.indexOf(t);n>-1&&e.interceptors.splice(n,1)}))}},n.getDefaultShortcutContext=function(){return this.defaultShortcutContext},n.prepare=function(){var t=this,e=function(e){if(!t.disabled){t.defaultShortcutContext.handleEvent(e,t.interceptors);var n=t.activationManager.peak();n&&n.handleEvent(e,t.interceptors)}},n={};this.anchor.addEventListener("keyup",e,n),this.anchor.addEventListener("keydown",e,n),this.addDestroyHook((function(){t.anchor.removeEventListener("keyup",e,n),t.anchor.removeEventListener("keydown",e,n)}))},e}(vt.a),Og=function(){function t(){this._keyCodeToStr=[],this._strToKeyCode={}}var e=t.prototype;return e.define=function(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t},e.keyCodeToStr=function(t){return this._keyCodeToStr[t]},e.strToKeyCode=function(t){return this._strToKeyCode[t.toLowerCase()]||aa.Unknown},t}(),Lg=function(){function t(){}return t.toString=function(t){return Ng.keyCodeToStr(t)},t.fromString=function(t){return Ng.strToKeyCode(t)},t}(),Ng=new Og,Vg=new Og;!function(){var t=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){Ng.define(t,e),Vg.define(t,e)}))};t(aa.Unknown,"unknown"),t(aa.Backspace,"Backspace"),t(aa.Tab,"Tab"),t(aa.Enter,"Enter"),t(aa.Shift,"Shift"),t(aa.Ctrl,"Ctrl"),t(aa.Alt,"Alt"),t(aa.PauseBreak,"PauseBreak"),t(aa.CapsLock,"CapsLock"),t(aa.Escape,"Escape"),t(aa.Space,"Space"),t(aa.PageUp,"PageUp"),t(aa.PageDown,"PageDown"),t(aa.End,"End"),t(aa.Home,"Home"),t(aa.LeftArrow,"LeftArrow","Left"),t(aa.UpArrow,"UpArrow","Up"),t(aa.RightArrow,"RightArrow","Right"),t(aa.DownArrow,"DownArrow","Down"),t(aa.Insert,"Insert"),t(aa.Delete,"Delete"),t(aa.KEY_0,"0"),t(aa.KEY_1,"1"),t(aa.KEY_2,"2"),t(aa.KEY_3,"3"),t(aa.KEY_4,"4"),t(aa.KEY_5,"5"),t(aa.KEY_6,"6"),t(aa.KEY_7,"7"),t(aa.KEY_8,"8"),t(aa.KEY_9,"9"),t(aa.KEY_A,"A"),t(aa.KEY_B,"B"),t(aa.KEY_C,"C"),t(aa.KEY_D,"D"),t(aa.KEY_E,"E"),t(aa.KEY_F,"F"),t(aa.KEY_G,"G"),t(aa.KEY_H,"H"),t(aa.KEY_I,"I"),t(aa.KEY_J,"J"),t(aa.KEY_K,"K"),t(aa.KEY_L,"L"),t(aa.KEY_M,"M"),t(aa.KEY_N,"N"),t(aa.KEY_O,"O"),t(aa.KEY_P,"P"),t(aa.KEY_Q,"Q"),t(aa.KEY_R,"R"),t(aa.KEY_S,"S"),t(aa.KEY_T,"T"),t(aa.KEY_U,"U"),t(aa.KEY_V,"V"),t(aa.KEY_W,"W"),t(aa.KEY_X,"X"),t(aa.KEY_Y,"Y"),t(aa.KEY_Z,"Z"),t(aa.Meta,"Meta"),t(aa.ContextMenu,"ContextMenu"),t(aa.F1,"F1"),t(aa.F2,"F2"),t(aa.F3,"F3"),t(aa.F4,"F4"),t(aa.F5,"F5"),t(aa.F6,"F6"),t(aa.F7,"F7"),t(aa.F8,"F8"),t(aa.F9,"F9"),t(aa.F10,"F10"),t(aa.F11,"F11"),t(aa.F12,"F12"),t(aa.F13,"F13"),t(aa.F14,"F14"),t(aa.F15,"F15"),t(aa.F16,"F16"),t(aa.F17,"F17"),t(aa.F18,"F18"),t(aa.F19,"F19"),t(aa.NumLock,"NumLock"),t(aa.ScrollLock,"ScrollLock"),t(aa.US_SEMICOLON,";",";","OEM_1"),t(aa.US_EQUAL,"=","=","OEM_PLUS"),t(aa.US_COMMA,",",",","OEM_COMMA"),t(aa.US_MINUS,"-","-","OEM_MINUS"),t(aa.US_DOT,".",".","OEM_PERIOD"),t(aa.US_SLASH,"/","/","OEM_2"),t(aa.US_BACKTICK,"`","`","OEM_3"),t(aa.ABNT_C1,"ABNT_C1"),t(aa.ABNT_C2,"ABNT_C2"),t(aa.US_OPEN_SQUARE_BRACKET,"[","[","OEM_4"),t(aa.US_BACKSLASH,"\\","\\","OEM_5"),t(aa.US_CLOSE_SQUARE_BRACKET,"]","]","OEM_6"),t(aa.US_QUOTE,"'","'","OEM_7"),t(aa.OEM_8,"OEM_8"),t(aa.OEM_102,"OEM_102"),t(aa.NUMPAD_0,"NumPad0"),t(aa.NUMPAD_1,"NumPad1"),t(aa.NUMPAD_2,"NumPad2"),t(aa.NUMPAD_3,"NumPad3"),t(aa.NUMPAD_4,"NumPad4"),t(aa.NUMPAD_5,"NumPad5"),t(aa.NUMPAD_6,"NumPad6"),t(aa.NUMPAD_7,"NumPad7"),t(aa.NUMPAD_8,"NumPad8"),t(aa.NUMPAD_9,"NumPad9"),t(aa.NUMPAD_MULTIPLY,"NumPad_Multiply"),t(aa.NUMPAD_ADD,"NumPad_Add"),t(aa.NUMPAD_SEPARATOR,"NumPad_Separator"),t(aa.NUMPAD_SUBTRACT,"NumPad_Subtract"),t(aa.NUMPAD_DECIMAL,"NumPad_Decimal"),t(aa.NUMPAD_DIVIDE,"NumPad_Divide")}();var Bg=function(){function t(t,e,n,r,i){this.ctrlKey=t,this.shiftKey=e,this.altKey=n,this.metaKey=r,this.keyCode=i}var e=t.prototype;return e.equals=function(t){return this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode},e.isError=function(){return this.keyCode===aa.Unknown},e.toString=function(){var t=[];return this.ctrlKey&&t.push("ctrl"),this.shiftKey&&t.push("shift"),this.altKey&&t.push("alt"),this.metaKey&&t.push("meta"),t.join("+")+"+"+Lg.toString(this.keyCode)},t}();function Ug(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return jg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jg(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function jg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Hg,Wg=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.command=t,this.keybinding=e,this.priority=n}return t.prototype.equals=function(t){return this.keybinding.equals(t.keybinding)},t}(),$g=function(){function t(){this._keybindingRules=[]}var e=t.prototype;return e.registerKeyBindingRule=function(t){var e=this._keybindingRules.filter((function(e){return e.equals(t)}));if(e.length>0){var n,r=Ug(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.equals(t)){if(i.command===t.command)return void(i.priority=t.priority);throw new Error("shortcut conflict: ".concat(i.command," and ").concat(t.command," has the same keybindings: ").concat(t.keybinding.toString()))}}}catch(t){r.e(t)}finally{r.f()}}this._keybindingRules.push(t)},e.unRegisterKeyBindingRule=function(t){var e=this._keybindingRules.findIndex((function(e){return e.equals(t)}));-1!==e&&this._keybindingRules.splice(e,1)},e.getKeyBindings=function(t){return this._keybindingRules.filter((function(e){return e.command===t})).sort((function(t,e){return t.priority>e.priority?-1:1})).reduce((function(t,e){var n,r=Ug(t);try{for(r.s();!(n=r.n()).done;){if(n.value.equals(e))return}}catch(t){r.e(t)}finally{r.f()}return t.push(e),t}),[]).map((function(t){return t.keybinding}))},e.getCommandOfKeybinding=function(t){var e=this._keybindingRules.filter((function(e){return t.equals(e.keybinding)}));if(e.length>0)return e[0].command},t}(),Yg=function(){function t(){}return t._readModifiers=function(t){t=t.trim().toLowerCase();var e,n,r=!1,i=!1,o=!1,a=!1;do{e=!1,/^ctrl[\+\-]/.test(t)&&(r=!0,t=t.substring("ctrl-".length),e=!0),/^shift[\+\-]/.test(t)&&(i=!0,t=t.substring("shift-".length),e=!0),/^alt[\+\-]/.test(t)&&(o=!0,t=t.substring("alt-".length),e=!0),/^meta[\+\-]/.test(t)&&(a=!0,t=t.substring("meta-".length),e=!0),/^win[\+\-]/.test(t)&&(a=!0,t=t.substring("win-".length),e=!0),/^cmd[\+\-]/.test(t)&&(a=!0,t=t.substring("cmd-".length),e=!0)}while(e);var s=t.indexOf(" ");return s>0?(n=t.substring(0,s),t=t.substring(s)):(n=t,t=""),{remains:t,ctrl:r,shift:i,alt:o,meta:a,key:n}},t.parseKeybinding=function(t){var e=this._readModifiers(t),n=Lg.fromString(e.key);return new Bg(e.ctrl,e.shift,e.alt,e.meta,n)},t}(),qg=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.registry=new $g,this.name=e,this.target=t,this.priority=n,this.isActive=!0,this.nextBinders=[],this.emitter=new tc.a,this.beforeEventEmitter=new tc.a}var e=t.prototype;return e.setKeyboard=function(t){this.keyboard=t},e.registerKeybinding=function(t,e){var n=Yg.parseKeybinding(e);this.registry.registerKeyBindingRule(new Wg(t,n,0))},e.unRegisterKeybinding=function(t,e){var n=Yg.parseKeybinding(e);this.registry.unRegisterKeyBindingRule(new Wg(t,n,0))},e.getCommandOfKeybinding=function(t){return this.registry.getCommandOfKeybinding(t)},e.hasKeybinding=function(t){return!!this.getCommandOfKeybinding(t)},e.attach=function(t){this.nextBinders.push(t)},e.before=function(t,e){var n=this;return this.beforeEventEmitter.on(t,e),function(){n.offBefore(t,e)}},e.offBefore=function(t,e){this.beforeEventEmitter.off(t,e)},e.on=function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!1};return i&&(n=this.before(t,(function(t){("boolean"==typeof i&&i||i(t))&&t.preventDefault()}))),this.emitter.on(t,e),function(){n&&n(),r.off(t,e)}},e.off=function(t,e){this.emitter.off(t,e)},e.emit=function(t,e){this.emitter.emit(t,e)},e.acceptElement=function(t){return t===this.target},e.handleKeydownEvent=function(t,e){var n=this.getCommandOfKeybinding(t);return n?(this.beforeEventEmitter.emit(n,e),!0):this.nextBinders.some((function(n){return n.handleKeydownEvent(t,e)}))},e.handleEvent=function(t,e){var n=this.getCommandOfKeybinding(t);return n?(this.emit(n,e),!0):this.nextBinders.some((function(n){return n.handleEvent(t,e)}))},t}();Hg={},R()(Hg,"selectAllAnnotations",{shortcut:Vt.isMac?"Meta+A":"Ctrl+A",bindTo:jo}),R()(Hg,"createPolyline_DeleteLastPoint",{shortcut:"Backspace",bindTo:jo}),R()(Hg,"undo",{shortcut:Vt.isMac?"Meta+Z":"Ctrl+Z",bindTo:jo}),R()(Hg,"redo",{shortcut:Vt.isMac?"Meta+Shift+Z":"Ctrl+Y",bindTo:jo}),R()(Hg,"cancel-creating-drawing-annot",{shortcut:"Escape",bindTo:"create-annotation-keyboard-event-binder"}),R()(Hg,"delete-annotation",{shortcut:"Delete",bindTo:Ho}),R()(Hg,"FIELD_ENTER_ACTION",{shortcut:"Enter",bindTo:jo});var Gg=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.render,n=void 0===e?function(t){return t}:e,r=t.payloadFieldName,i=void 0===r?"file":r,o=t.origin,a=void 0===o?"":o,s=t.uploadSnapshotAPIPath,c=t.method,u=void 0===c?"POST":c;this.render=n,this.payloadFieldName=i,this.origin=a,this.uploadSnapshotAPIPath=s,this.method=u}return t.prototype.uploadImage=function(t){var e=this,n=new XMLHttpRequest,r=z();return n.addEventListener("readystatechange",(function(t){if(4==n.readyState)if(n.status>=200&&n.status<300||304==n.status){if(0===n.responseText.indexOf("/snapshot"))return void r.resolve("".concat(e.origin).concat(n.responseText));r.resolve(n.responseText)}else r.reject(n)})),n.open(this.method,"".concat(this.origin,"/").concat(this.uploadSnapshotAPIPath,"?filefield=").concat(this.payloadFieldName),!0),n.setRequestHeader("Content-Type","image/png"),n.setRequestHeader("X-File-Name","snapshot.png"),n.send(t),r.promise},t}(),zg=n(117),Kg=function(t){function e(e,n,r,i){var o;return(o=t.call(this,i)||this).name="customRender",o.data=e,o.eUi=n,o.eHandler=r,o.customsRender=i,o}O()(e,t);var n=e.prototype;return n.init=function(){},n.redraw=function(){},n.active=function(){},n.unActive=function(){},n.destroy=function(){},e}(mt),Jg=function(){function t(t){this.pdfViewer=t,this.matchRules=[],this.getPageCustomData=function(){return[]},this.getCustomDataId=function(){}}var e=t.prototype;return e.registerMatchRule=function(t){return this.matchRules.push(t),t},e.unRegisterMatchRule=function(t){var e=this.matchRules.indexOf(t);-1!==e&&this.matchRules.splice(e,1)},e.get=function(t){for(var e=this.matchRules,n=Kg,r=e.length;r--;){var i=e[r];if("function"==typeof i){var o=i(t,n);if(o)return o}}return n},t}(),Xg=function(){function t(){this.stackArray=[]}var e=t.prototype;return e.push=function(t){this.stackArray.push(t)},e.pop=function(){return this.stackArray.pop()},e.size=function(){return this.stackArray.length},e.clear=function(){this.stackArray=[]},e.filter=function(t){this.stackArray=this.stackArray.filter(t)},t}(),Zg=(n(300),function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).groupElements=[],r.replies=[],r.markedStates=[],r.reviewStates=[],r}O()(e,t);var n=e.prototype;return n.getFlags=function(){return-2&t.prototype.getFlags.call(this)},n.reviseSummary=function(t){var e=this,n=this.info,r=[];this.groupHeader=""._;var i=n.groupElementsSummary.map((function(e){return Promise.resolve(t(e.objectNumber))})),o=Promise.all(i).then((function(t){e.groupElements=t}));r.push(o);var a=n.groupHeaderSummary;a&&r.push(Promise.resolve(t(a.objectNumber)).then((function(t){e.groupHeader=t})));var s=n.repliesSummary.map((function(e){return Promise.resolve(t(e.objectNumber))})),c=Promise.all(s).then((function(t){e.replies=t}));r.push(c);var u=n.markedStatesSummary.map((function(e){return Promise.resolve(t(e.objectNumber))})),d=Promise.all(u).then((function(t){e.markedStates=t}));r.push(d);var l=n.reviewStatesSummary.map((function(e){return Promise.resolve(t(e.objectNumber))})),h=Promise.all(l).then((function(t){e.reviewStates=t}));r.push(h);var f=n.popupSummary;return f&&r.push(Promise.resolve(t(f.objectNumber)).then((function(t){e.popup=t}))),Promise.all(r).then((function(){return e.reviseSummaryIsOK=!0,e}))},n.getBitmap=function(t,e,n){var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.getAnnotBitmap(i.getId(),r.getId(),this.getId(),t,e,n,!0)},n.getOpacity=function(){return this.info.opacity},n.setOpacity=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return t=+t,this.page.doc.api.setAnnotOpacity(r.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByObjectNumArray(t)})).then((function(t){return Promise.all(t.map((function(t){return t._update()})))})).then((function(t){return e.eventEmitter.emit(St.annotationUpdated,t,n,_n.opacityUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,t,n),t}))},n.getSubject=function(){return this.info.subject},n.setSubject=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setSubject(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.subjectUpdated)}))},n.getTitle=function(){return this.info.title},n.setTitle=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setTitle(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.titleUpdated)}))},n.isGrouped=function(){return this.info.isGrouped},n.isGroupHeader=function(){return this.info.isGroupHeader},n.getGroupElements=function(){return this.groupElements},n.getGroupHeader=function(){return this.groupHeader},n.getReplyCount=function(){return this.replies.length},n.getReply=function(t){return this.replies[t]},n.getReplies=function(){return this.replies},n.addReply=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc(),i=this.getGroupHeader()||this;return this.page.doc.api.annotAddReply(r.getId(),n.getId(),this.getId(),t).then((function(t){i.info.repliesSummary.push({objectNumber:t.objectNumber,id:t.objectNumber,index:t.index});var r=e.page.doc.engine.annotManager.get(t,n);return n.addReplyAnnot(r)})).then((function(t){return i.replies.push(t),e.page.doc.engine.eventEmitter.emit(St.annotationReplyAdd,t,i),e.page.doc.engine.eventEmitter.emit(St.annotationUpdated,[e],n,_n.replyAdded),t}))},n.removeRepliesByIdLocaly=function(t){if(!Array.isArray(t)||t.length<1||this.replies.length<1)return t||[];var e=t.slice(0);this.replies=this.replies.filter((function(t){var n=e.indexOf(t.getId());return n>-1&&e.splice(n,1),-1==n}));var n=t.slice(0);return this.info.repliesSummary=this.info.repliesSummary.filter((function(t){var e=n.indexOf(t.objectNumber);return e>-1&&n.splice(e,1),-1==e})),e},n.getMarkedStateCount=function(){return this.markedStates.length},n.getMarkedState=function(t){return this.markedStates[t]},n.getMarkedStates=function(){return this.markedStates},n.getReviewStateCount=function(){return this.reviewStates.length},n.getReviewState=function(t){return this.reviewStates[t]},n.getReviewStates=function(){return this.reviewStates},n.addReviewState=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.addAnnotReviewState(r.getId(),n.getId(),this.getId(),t).then((function(t){e.info.reviewStatesSummary.push({objectNumber:t.objectNumber,id:t.objectNumber,index:t.index});var r=e.page.doc.engine.annotManager.get(t,n);return n.addAddonAnnot(r)})).then((function(t){return e.reviewStates.push(t),e.page.doc.engine.eventEmitter.emit(St.annotationReviewStateAnnotAdd,t,e),e.page.doc.engine.eventEmitter.emit(St.annotationUpdated,[e],n,_n.reviewStateUpdated),t}))},n.removeReviewState=function(){var t=this;this.checkModidyPerm();var e=this.page,n=this.getReviewStates(),r=n[n.length-1];return e.removeAnnot(r).then((function(){if(t.reviewStates.pop(),t.info.reviewStatesSummary.pop(),t.reviewStates.length>0){var r=n[t.reviewStates.length-1];r&&(r.reviewStates.pop(),r.info.reviewStatesSummary.pop())}t.page.doc.engine.eventEmitter.emit(St.removeReviewState,t),t.page.doc.engine.eventEmitter.emit(St.annotationUpdated,[t],e,_n.reviewStateUpdated)}))},n.addMarkedState=function(t){var e=this,n=arguments[1];this.checkModidyPerm();var r=this.getPDFPage(),i=r.getPDFDoc(),o=this.getGroupHeader()||this;return this.page.doc.api.addAnnotMarkedState(i.getId(),r.getId(),this.getId(),t).then((function(t){if(o.info.markedStatesSummary.length){var e=r.annotIdMap[t.objectNumber];return e.info=t,e}o.info.markedStatesSummary.push({objectNumber:t.objectNumber,id:t.objectNumber,index:t.index});var n=r.doc.engine.annotManager.get(t,r);return r.addAddonAnnot(n)})).then((function(t){return o.markedStates.push(t),e.page.doc.engine.eventEmitter.emit(St.annotationUpdated,[e],r,_n.markedStateUpdated),e.page.doc.engine.eventEmitter.emit(St.annotationMarkedStateAnnotAdd,t,o,n),t}))},n.removeMarkedState=function(){var t=this;this.checkModidyPerm();var e=this.getPDFPage(),n=e.getPDFDoc(),r=this.getGroupHeader()||this,i=r.markedStates.pop();return i?(r.info.markedStatesSummary.pop(),e.removeAnnot(i).then((function(){n.engine.eventEmitter.emit(St.annotationUpdated,[t],e,_n.markedStateUpdated),n.engine.eventEmitter.emit(St.removeMarkedState,t)}))):Promise.resolve()},n.removeAllStateAnnots=function(){var t=this;this.checkModidyPerm();var e=this.getPDFPage(),n=e.getPDFDoc(),r=this.getGroupHeader()||this;return this.page.doc.api.removeAllStateAnnots(n.getId(),e.getId(),this.getId()).then((function(n){return!!n&&(r.info.markedStatesSummary.forEach((function(t){var n=t.id;e.removeAddonAnnotById(n)})),r.info.reviewStatesSummary.forEach((function(t){var n=t.id;e.removeAddonAnnotById(n)})),r.info.markedStatesSummary=[],r.info.reviewStatesSummary=[],r.reviewStates=[],r.markedStates=[],t.page.doc.engine.eventEmitter.emit(St.annotationUpdated,[t],e,_n.statesCleared),t.page.doc.engine.eventEmitter.emit(St.annotationStatesCleared,r),n)}))},n.getPopup=function(){return this.popup},n.getCreateDateTime=function(){var t=this.info.creationTimestamp;return t>0?new Date(t):new Date},n.setCreateDateTime=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setCreateDateTime(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.createDateTimeUpdated)}))},n.getIntent=function(){return this.info.intent},n.setIntent=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotIntent(r.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByObjectNumArray(t)})).then((function(e){for(var n=0;n<e.length;n++)e[n].info.intent=t;return e})).then((function(t){return e.eventEmitter.emit(St.annotationUpdated,t,n,_n.intentUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,t,n),t}))},n.getFillColor=function(){return this.info.fillColor},n.setFillColor=function(t){var e=this;t=0===t?0:xn(t,"int");var n=this.getPDFPage(),r=n.getPDFDoc();return r.api.setAnnotFillColor(r.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update(_n.fillColorUpdated).then((function(){return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n),t})):t}))},n.update=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getGroupElements();0==r.length&&(r=[this]);for(var i=[],o=0,a=r.length;o<a;o++){var s=r[o];i[o]=s._update()}return Promise.all(i).then((function(r){return t&&n&&e.eventEmitter.emit(St.annotationUpdated,r,e.getPDFPage(),t),r}))},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.opacity,r=we(new Date(this.info.creationTimestamp)),i=this.info.intent,o=this.info.subject,a=this.info.title,s=this.info.IRT,c=this.info.RT;i=i&&i.length>0?{IT:i,intent:i}:{};var u=A()({},e,{opacity:n,creationdate:r,subject:o,title:a},i);return s&&c&&(s=this.page.annotIdMap[s].getName(),u.inreplyto=s,u.replyType=c.toLowerCase()),this.popup&&(u.popup=this.popup.exportToJSON()),this.info.rotation&&(u.rotation=360-this.info.rotation),this.info.measureRatio&&(u.measureConversionFactor=this.info.measureConversionFactor,u.measureRatio=this.info.measureRatio,u.measureUnit=this.info.measureUnit),u},n.setContent=function(t){var e=this;return this.checkModidyPerm(),(this.getGroupHeader()||this)._setContent(t).then((function(t){return e.getPDFPage().getAnnotsByObjectNumArray([t])})).then((function(n){var r=n[0];return r&&(r.info.content=t,r.info.modifiedTimestamp=(new Date).getTime()),e.eventEmitter.emit(St.annotationUpdated,n,e.getPDFPage(),_n.contentUpdated),n}))},n.getRichText=function(){if("freetext"!=this.info.type)return Promise.resolve();var t=this.getPDFPage(),e=t.getPDFDoc();return e.api.getRichText(e.getId(),t.getId(),this.getId())},n.setRichText=function(t){var e=this;if("freetext"!=this.info.type)return Promise.resolve();var n=this.getPDFPage(),r=n.getPDFDoc();return r.api.setRichText(r.getId(),n.getId(),this.getId(),t).then((function(t){return e.update(_n.richTextUpdated).then((function(t){e.eventEmitter.emit(St.annotationAppearanceUpdated,t,e.getPDFPage())}))}))},n.addRichText=function(t){var e=this;if("freetext"!=this.info.type)return Promise.resolve();var n=this.getPDFPage(),r=n.getPDFDoc();return r.api.addRichText(r.getId(),n.getId(),this.getId(),t).then((function(t){return e.update(_n.richTextUpdated).then((function(t){e.eventEmitter.emit(St.annotationAppearanceUpdated,t,e.getPDFPage())}))}))},n.insertRichText=function(t){var e=this;if("freetext"!=this.info.type)return Promise.resolve();var n=this.getPDFPage(),r=n.getPDFDoc();return r.api.insertRichText(r.getId(),n.getId(),this.getId(),t).then((function(t){return e.update(_n.richTextUpdated).then((function(t){e.eventEmitter.emit(St.annotationAppearanceUpdated,t,e.getPDFPage())}))}))},n.removeRichText=function(t){var e=this;if("freetext"!=this.info.type)return Promise.resolve();var n=this.getPDFPage(),r=n.getPDFDoc();return r.api.removeRichText(r.getId(),n.getId(),this.getId(),t).then((function(t){return e.update(_n.richTextRemoved).then((function(t){e.eventEmitter.emit(St.annotationAppearanceUpdated,t,e.getPDFPage())}))}))},e}(Fn));var Qg=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getQuadPoints=function(){return this.info.quadPoints||[]},n.isReplace=function(){return!1},n.getDeviceQuadPoints=function(){for(var t=this.getPDFPage(),e=(t.getHeight(),t.getWidth()),n=this.getQuadPoints(),r=[],i=n.length;i--;){var o=n[i];r[i]=[{x:o[0].x,y:e-o[0].y},{x:o[1].x,y:e-o[1].y},{x:o[2].x,y:e-o[2].y},{x:o[3].x,y:e-o[3].y}]}return r},n.getStartCharIndex=function(){return this.info.startCharIndex},n.getStartCharInfo=function(){return this.info.startCharInfo},n.getEndCharIndex=function(){return this.info.endCharIndex},n.getEndCharInfo=function(){return this.info.endCharInfo},n.canAccess=function(){return!!this.page.doc.checkPermission(Tn.extract||Tn.extractAccess)},n.getText=function(){if(!this.page.doc.checkPermission(Tn.extract||Tn.extractAccess))throw new Error("Permission error");return this.info.text||""},n.getContinuousText=function(){if(!this.page.doc.checkPermission(Tn.extract||Tn.extractAccess))throw new Error("Permission error");return this.info.text||""},n.updateQuadPointsByCharIndex=function(t,e){var n=this;this.checkModidyPerm();var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.updateAnnotQuadPointsByCharIndex(i.getId(),r.getId(),this.getId(),t,e).then((function(t){if(t)return n.update(_n.quadPointsUpdated).then((function(e){return n.eventEmitter.emit(St.annotationAppearanceUpdated,e,n.getPDFPage()),t}))}))},n.isArea=function(){return this.info.isArea},n.exportToJSON=function(){for(var e=t.prototype.exportToJSON.call(this),n=this.getQuadPoints(),r="",i=0;i<n.length;i++){var o=n[i];r+=o[0].x+","+o[0].y+",",r+=o[1].x+","+o[1].y+",",r+=o[2].x+","+o[2].y+",",r+=o[3].x+","+o[3].y+","}return r=r.substr(0,r.length-1),A()({},e,{coords:r})},e}(Zg),tv={setContent:function(t){var e=t.method;return function(){t.host[e](t.content)}},setBorderColor:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(o,i).component;n.annot[r](t.color).then((function(){n.updateRender()}))}},setOpacity:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(o,i).component;n.annot[r](t.opacity).then((function(){n.updateRender()}))}},updateQuadPointsByCharIndex:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(o,i).component;n.annot[r](t.start,t.end).then((function(){n.isReplace?n.caretAnnot.moveRectByCharIndex(t.end).then((function(){n.getGroupRenders().map((function(t){t.active()}))})):n.active()}))}},setStyleFillColor:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,i).component.annot[r](t.fillColor)}},setFillColor:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,i).component.annot[r](t.fillColor)}},setBorderWidth:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,i).component.annot[r](t.borderWidth)}},setBorderStyle:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,i).component.annot[r](t.borderStyle.style,t.borderStyle.param)}},setCalloutLineEndingStyle:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(o,i).component;n.annot[r](+t.style).then((function(){n.activeRect(),n.redraw()}))}},setEndingStyle:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(o,i).component;n.annot[r](t.isBeginning,+t.style).then((function(){n.activeRect(),n.redraw()}))}},enableCaption:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,i).component.annot[r](t.enableCaption)}},setRotation:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,i).component.annot[r]((t.rotation+360)%360)}},setHighlightingMode:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,i).component.annot[r](t.mode)}},setRect:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(o,i).component;n.annot[r](t.rect).then((function(){n.active()}))}},eraseInk:function(t){t.host.pdfViewer;var e=t.host.annot;e.getObjectNumber(),e.getPDFPage().getIndex()},updateLinePoints:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=(t.method,n.getObjectNumber()),i=n.getPDFPage().getIndex(),o=[];return function(){var n=e.getAnnotRender(i,r).component;o.push(n.annot.setStartPoint(t.startPoint)),o.push(n.annot.setEndPoint(t.endPoint)),Promise.all(o).then((function(){n.active()}))}},setLeaderLineLength:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex(),a=t.leaderLinePoints,s=t.startPoint,c=t.endPoint,u=a.start,d=(a.end,Math.sqrt(Math.pow(s.x-u.x,2)+Math.pow(s.y-u.y,2))),l=!0;return(c.x-s.x)*(u.y-c.y)-(u.x-c.x)*(c.y-s.y)>0&&(l=!1),l&&(d=-d),function(){var t=e.getAnnotRender(o,i).component;t.annot[r](d).then((function(){t.active()}))}},updateVertexes:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=t.method,i=n.getObjectNumber(),o=n.getPDFPage().getIndex(),a=t.vertexes,s=t.index;return function(){var t=e.getAnnotRender(o,i).component;t.annot[r](s,a[s]).then((function(){t.active()}))}},removeAnnot:function(t,e){var n,r,i=t.host.pdfViewer,o=t.host.annot,a=o.getObjectNumber(),s=o.getPDFPage(),c=s.getIndex(),u=o.getReplies&&o.getReplies()||[],d=[];return u.map((function(t){d.push({id:t.getId(),content:t.getContent(),createTime:new Date(t.getCreateDateTime()).getTime(),modifiedTime:new Date(t.getModifiedDateTime()).getTime()})})),o.isGrouped&&o.isGrouped()?(n=[],o.groupElements.map((function(t,e){n.push(new ev(t).getJson()),t.isGroupHeader()&&(r=e)}))):n=new ev(o).getJson(),"before"===e?"redact"===o.getType()?function(){s.markRedactAnnot(n.rects,n.name)}:o.isGrouped&&o.isGrouped()?function(){s.addAnnotGroup(n,r).then((function(){var t=i.getAnnotRender(c,a).component;d.length>0?l(t.annot).then((function(){t.getGroupRenders().map((function(t){t.active()}))})):t.active()}))}:function(){s.addAnnot(n).then((function(){var t=i.getAnnotRender(c,a).component;d.length>0?l(t.annot).then((function(){t.active()})):t.active()}))}:function(){var t=i.getAnnotRender(c,a).component;s.removeAnnot(t.annot)};function l(t){var e=[];return d.map((function(n){e.push(t.addReply(n.content).then((function(t){t.setUniqueID(n.id).then((function(){t.setCreateDateTime(n.createTime).then((function(){t.setModifiedDateTime(n.modifiedTime)}))}))})))})),Promise.all(e)}},addAnnot:function(t,e){var n,r,i=t.host.pdfViewer,o=t.host.annot,a=o.getObjectNumber(),s=o.getPDFPage(),c=s.getIndex();return o.isGrouped&&o.isGrouped()?(n=[],o.groupElements.map((function(t,e){n.push(new ev(t).getJson()),t.isGroupHeader()&&(r=e)}))):n=new ev(o).getJson(),"before"===e?function(){s.removeAnnot(o)}:o.isGrouped&&o.isGrouped()?function(){s.addAnnotGroup(n,r).then((function(){i.getAnnotRender(c,a).component.getGroupRenders().map((function(t){t.active()}))}))}:function(){s.addAnnot(n).then((function(){i.getAnnotRender(c,a).component.active()}))}},markRedactAnnot:function(t,e){var n=t.host.pdfViewer,r=t.host.annot,i=r.getObjectNumber(),o=r.getPDFPage(),a=o.getIndex();return"before"===e?function(){o.removeAnnot(r)}:function(){var t=new ev(r).getJson();o.markRedactAnnot(t.rects,t.name).then((function(){n.getAnnotRender(a,i).component.active()}))}},makeRedactByPages:function(t,e){var n=t.host;return"before"===e?function(){n.map((function(t){t.getPDFPage().removeAnnot(t)}))}:function(){n.map((function(t){t.getPDFPage().markRedactAnnot([t.info.rect],t.id)}))}},placeRedact:function(t,e){var n=t.host;return"before"===e?function(){n.map((function(t){t.getPDFPage().removeAnnot(t)}))}:function(){n.map((function(t){t.getPDFPage().markRedactAnnot([t.info.rect],t.id)}))}},eraser:function(t,e){var n=t.inkArray,r=t.host;return function(){n.map((function(t){r.getAnnotRender(t.annot.getId()).component.annot.setInkList(t.inkList)}))}},updateCalloutPoints:function(t){var e=t.host.pdfViewer,n=t.host.annot,r=(t.method,n.getObjectNumber()),i=n.getPDFPage().getIndex();return function(){var n=e.getAnnotRender(i,r).component;n.annot._setRect(t.rect,!1).then((function(){n.annot.setInnerRectNoAction(t.innerRect).then((function(){n.annot.setCalloutLinePoints(t.calloutLinePoints).then((function(){n.annot.update().then((function(){n.redraw(),n.active()}))}))}))}))}},addReply:function(t,e){var n=t.host,r=t.replyAnnot,i=(t.component,t.pdfViewer),o=n.getPDFPage(),a=o.getIndex(),s=n.getId(),c=r.getId(),u=r.getCreateDateTime(),d=r.getModifiedDateTime();return"before"===e?function(){o.removeAnnot(r)}:function(){i.getAnnotRender(a,s).component.annot.addReply(r.getContent()).then((function(t){t.setUniqueID(c).then((function(){t.setCreateDateTime(new Date(u).getTime()).then((function(){t.setModifiedDateTime(new Date(d).getTime())}))}))}))}},deleteReply:function(t,e){var n=t.host,r=t.replyAnnot,i=t.pdfViewer,o=n.getPDFPage(),a=o.getIndex(),s=r.getId(),c=n.getId(),u=r.getCreateDateTime(),d=r.getModifiedDateTime();return"before"===e?function(){i.getAnnotRender(a,c).component.annot.addReply(r.getContent()).then((function(t){t.setUniqueID(s).then((function(){t.setCreateDateTime(new Date(u).getTime()).then((function(){t.setModifiedDateTime(new Date(d).getTime())}))}))}))}:function(){o.removeAnnotById(s)}},addAction:function(t,e){var n=t.host.pdfViewer,r=t.host.annot,i=r.getObjectNumber(),o=r.getPDFPage().getIndex(),a=r.getAction();return"before"===e?function(){r.removeAction()}:function(){!function(t,e){t.setAction(e.type).then((function(){var n=new nv(e).toJson();return t.setActionData(n).then((function(){return function t(e,n){for(var r=n.subActionCount,i=[],o=function(r){i.push(e.insertSubAction(r,n.subAction[r].type).then((function(){var i=new nv(n.subAction[r]).toJson(),o=e.getSubAction(r);return o.setActionData(i).then((function(){return t(o,n.subAction[r])}))})))},a=0;a<r;a++)o(a);return Promise.all(i)}(t.getAction(),e)}))}))}(n.getAnnotRender(o,i).component.annot,a.info)}}},ev=function(){function t(t){var e=xn(t.getBorderColor(),"#");switch(this.json={objectNumber:t.info.objectNumber,name:t.getUniqueID(),rect:t.getRect(),color:e,style:t.getBorderStyle(),contents:t.getContent(),date:new Date(t.getModifiedDateTime()).getTime(),type:t.getType(),flags:t.getFlags()},t instanceof Zg&&this.markup(t),t instanceof Qg&&this.textMarkup(t),t.getType()){case"ink":this.ink(t);break;case"fileattachment":this.fileattachment(t);break;case"polygon":this.polygon(t);break;case"polyline":this.polyline(t);break;case"stamp":this.stamp(t);break;case"freetext":this.freetext(t);break;case"screen":this.screen(t);break;case"line":this.line(t);break;case"redact":this.redact(t);break;case"highlight":this.highlight(t);break;case"link":this.link(t);break;case"square":this.square(t);break;case"circle":this.circle(t)}}var e=t.prototype;return e.markup=function(t){this.json=A()({intent:t.getIntent(),opacity:t.getOpacity(),subject:t.getSubject(),title:t.getTitle(),creationTimestamp:new Date(t.getCreateDateTime()).getTime()},this.json)},e.textMarkup=function(t){this.json=A()({startCharIndex:t.getStartCharIndex(),endCharIndex:t.getEndCharIndex(),coords:t.getQuadPoints()},this.json)},e.ink=function(t){this.json=A()({inkList:t.getInkList(),borderWidth:t.getBorderWidth()},this.json)},e.fileattachment=function(t){this.json=A()({fObjNum:t.info.fObjNum},this.json)},e.polygon=function(t){this.json=A()(this.json,{vertexes:t.getVertexes(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,fillColor:t.info.fillColor,style:void 0,borderWidth:t.getBorderWidth()})},e.polyline=function(t){this.json=A()(this.json,{vertexes:t.getVertexes(),fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,startStyle:t.getStartStyle(),endStyle:t.getEndingStyle()})},e.stamp=function(t){this.json=A()({icon:t.info.icon,rotate:(t.getRotation()+360)%360,apObjeNum:t.info.apObjeNum},this.json)},e.freetext=function(t){this.json=A()(this.json,{calloutLinePoints:t.getCalloutLinePoints(),innerRect:t.getInnerRect(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,"interior-color":t.getFillColor(),interiorColor:t.getFillColor(),borderWidth:t.getBorderWidth(),calloutLineEndingStyle:t.getCalloutLineEndingStyle()})},e.line=function(t){var e=t.getMeasureRatio(),n=t.getMeasureUnit(),r=null;e&&n&&(r={unit:n,ratio:e});var i=t.getStartPoint(),o=t.getEndPoint();this.json=A()(this.json,{startStyle:t.getStartStyle(),endStyle:t.getEndingStyle(),enableCaption:t.hasCaption(),startPoint:{x:i.x,y:i.y},endPoint:{x:o.x,y:o.y},measure:r,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},e.screen=function(t){this.json=A()({apObjNum:t.info.apObjNum,opacity:t.getOpacity(),rotate:{0:0,90:1,180:2,270:3}[t.getRotation()],iObjNum:t.info.iObjNum,aObjNum:t.info.aObjNum,borderWidth:t.getBorderWidth()},this.json)},e.redact=function(t){var e=t.info.quadPoints,n=[];e.length>0?e.map((function(t){n.push({left:t[0].x,right:t[3].x,top:t[0].y,bottom:t[3].y})})):n.push(t.info.rect),this.json=A()({rects:n},this.json)},e.highlight=function(t){t.info.isArea&&(this.json=A()(this.json,{coords:[t.getRect()],dicts:{AreaHi:"AreaHi"}}),delete this.json.startCharIndex,delete this.json.endCharIndex)},e.link=function(t){this.json=A()(this.json,{aObjNum:t.info.aObjNum,borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,borderWidth:t.getBorderWidth()})},e.circle=function(t){this.json=A()(this.json,{fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},e.square=function(t){this.json=A()(this.json,{fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},e.getJson=function(){return this.json},t}();var nv=function(){function t(t){this.action=t,this.json={},this[t.type]()}var e=t.prototype;return e.TypeGoto=function(){var t=this.action.destination;this.json=A()(t,{type:t.zoomMode})},e.TypeURI=function(){var t=this.action.uri;this.json=A()({},{uri:t})},e.TypeJavaScript=function(){var t=this.action.javascript;this.json=A()({},{script:t})},e.TypeNamed=function(){var t=this.action.name;this.json=A()({},{name:t})},e.TypeHide=function(){var t=this.action,e=t.fieldNames,n=t.hideState;this.json=A()({},{fieldNames:e,hideState:n})},e.TypeSubmitForm=function(){var t=this.action,e=t.flags,n=t.url,r=t.fieldNames;this.json=A()({},{flags:e,url:n,fieldNames:r})},e.TypeResetForm=function(){var t=this.action,e=t.flags,n=t.fieldNames;this.json=A()({},{flags:e,fieldNames:n})},e.TypeGoToR=function(){var t=this.action,e=t.destinationName,n=t.destination;this.json=A()({},{destinationName:e,destination:n})},e.toJson=function(){return this.json},t}(),rv=function(){function t(){}return t.undo=function(t){t.before()},t.redo=function(t){t.after()},t.createRecord=function(t,e){var n=t.method;return tv[n](t,e)},t.getUniqueId=function(t){return t.host&&t.host.annot?t.host.annot.getId():null},t}(),iv=function(){function t(t){var e=this;this.pdfViewer=t,this.undoStack=new Xg,this.redoStack=new Xg,this.beforeFn=null,this.afterFn=null,this.pdfViewer.eventEmitter.on(Ct.willCloseDocument,(function(){e.clear()})),this.addEventListener()}var e=t.prototype;return e.addEventListener=function(){},e.removeEventListener=function(){},e.before=function(t){this.beforeFn=rv.createRecord(t,"before")},e.after=function(t){this.afterFn=rv.createRecord(t,"after"),this.remember(rv.getUniqueId(t))},e.remember=function(t){this.beforeFn&&this.afterFn&&this.undoStack.push({before:this.beforeFn,after:this.afterFn,uniqueId:t})},e.removeById=function(t){this.undoStack.filter((function(e){return t!==e.uniqueId})),this.redoStack.filter((function(e){return t!==e.uniqueId}))},e.undo=function(){var t=this.undoStack.pop();t&&(this.redoStack.push(t),rv.undo(t))},e.redo=function(){var t=this.redoStack.pop();t&&(this.undoStack.push(t),rv.redo(t))},e.clear=function(){this.undoStack.clear(),this.redoStack.clear()},e.getUndoStack=function(){return this.undoStack},e.getRedoStack=function(){return this.redoStack},t}(),ov=function(){function t(){this.hiddenCallbacks=[],this.shownCallbacks=[],this.isDisabled=!1}var e=t.prototype;return e.setCurrentTarget=function(t){this.currentTarget=t},e.getCurrentTarget=function(){return this.currentTarget},e.showAt=function(t,e){var n=this;return this.shownCallbacks.forEach((function(t){return t.call(n)})),!0},e.disable=function(){this.isDisabled=!0},e.enable=function(){this.isDisabled=!1},e.destroy=function(){Object(ms.a)()},e.getItem=function(){Object(ms.a)()},e.onHidden=function(t){"function"==typeof t&&this.hiddenCallbacks.push(t)},e.onShown=function(t){"function"==typeof t&&this.shownCallbacks.push(t)},t}(),av=function(){function t(){}var e=t.prototype;return e.prepare=function(t){this.pdfViewer=t},e.showReply=function(t){Object(ms.a)()},e.showPropertiesInfo=function(t){Object(ms.a)()},e.createContextMenu=function(t,e,n){Object(ms.a)()},e.alert=function(t){},e.confirm=function(t){},e.prompt=function(t,e,n){},e.promptPassword=function(t,e,n){},e.loading=function(t){return function(){}},e.createFreeTextTooltip=function(t){},e.createTextSelectionTooltip=function(t){},e.getPortfolioPreviewer=function(t){Object(ms.a)()},e.destroy=function(){},t}(),sv=function(t){function e(e,n){var r;return(r=t.call(this)||this).pdfViewer=e,r.pageRender=n,r.isDisabled=!1,r.eventEmitter=new tc.a,r}O()(e,t);var n=e.prototype;return n.on=function(t,e){var n=this;return this.eventEmitter.on(t,e),function(){return n.eventEmitter.off(t,e)}},n.showAt=function(t,e,n,r){this.eventEmitter.emit("show")},n.hide=function(){this.eventEmitter.emit("hide")},n.disable=function(){this.isDisabled=!0},n.enable=function(){this.isDisabled=!1},n.destroy=function(){this.eventEmitter.emit("destroy"),t.prototype.destroy.call(this)},e}(vt.a),cv=n(363),uv=n.n(cv);function dv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function lv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var hv=function(t){function e(e,n){var r;return(r=t.call(this)||this).pdfViewer=e,r.pageRender=n,r.topEditBar=null,r}O()(e,t);var n=e.prototype;return n.getSelectionInfo=function(){var t=z(),e=this.pdfViewer.getStore().subscribe(Ht.STORE_NAMES.SELECTION_INFO,(function(n){e(),t.resolve(n)}));return this.addDestroyHook(e),t.promise},n.copy=function(){var t=this;return this.getSelectionInfo().then(function(){var e=D()(N.a.mark((function e(n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.copyText)(n.text);case 2:e.sent?t.pdfViewer.eventEmitter.emit(Ct.copyTextSuccess,n.text):t.pdfViewer.eventEmitter.emit(Ct.copyTextFailed,n.text);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},n.createTextHighlight=function(){return this.createTextMarkupAnnot("highlight")},n.createStrikeout=function(){return this.createTextMarkupAnnot("strikeout")},n.createUnderline=function(){return this.createTextMarkupAnnot("underline")},n.createBookmark=function(){var t=this,e=this.pdfViewer.getCurrentPDFDoc();return this.hasModifyPermissions(e)?this.getSelectionInfo().then((function(e){if(e){e.page.getPDFDoc();var n=e.page.getIndex(),r=e.text,i=e.rectArray[0],o=i.left,a=i.top;t.pdfViewer.eventEmitter.emit("bookmark-create-current-view",{left:o,top:a,title:r,relationship:3,pageIndex:n}),t.pdfViewer.eventEmitter.emit("text-tooltip-click",{type:"createBookmark"})}})):Promise.resolve()},n.createTextMarkupAnnot=function(t){var e=this;return this.pageRender.getPDFPage().then((function(n){return e.getSelectionInfo().then((function(r){return n.addAnnot({type:t,rect:{left:0,right:0,top:0,bottom:0},flags:4,coords:r.rectArray,subject:e.pdfViewer.i18n.t("viewer_:annotSubjects."+t[0].toUpperCase()+t.substr(1))}).then((function(n){var r=n[0];e.pdfViewer.eventEmitter.emit(Ct.addAnnotSuccess,r),e.pdfViewer.eventEmitter.emit("text-tooltip-click",{type:t}),e.pageRender.annotsRender.activeAnnot(r.getId())}))}))}))},n.getBookmarkById=function(t,e){var n,r="",i=dv(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r)break;if(o.id==t){r=o;break}o.children&&o.children.length>0&&(r=this.getBookmarkById(t,o.children))}}catch(t){i.e(t)}finally{i.f()}return r},n.hasModifyPermissions=function(t){var e=t.getPermissions();return 8&e&&32&e},n.getTopEditBar=function(){var t=D()(N.a.mark((function t(){var e;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.topEditBar){t.next=5;break}return e=this.pdfViewer.viewerUI.rootComponent.pdfUI,t.next=4,e.getComponentByName("edit-text");case 4:this.topEditBar=t.sent;case 5:return t.abrupt("return",this.topEditBar);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.createEditText=function(){var t=D()(N.a.mark((function t(){var e,n=this;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 2:return t.next=4,this.getSelectionInfo();case 4:return e=t.sent,this.getTopEditBar().then((function(t){n.pageRender.$handler.find(".fv__mark-selection-blank").remove(),t.controller.handle(e.e,!0,e)})),t.abrupt("return",Promise.resolve());case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(vt.a),fv=[{iconClass:"fv__icon-popup-copy",name:"copy_selected_text"},{iconClass:"fv__icon-toolbar-text-highlight",name:"create-text-highlight"},{iconClass:"fv__icon-toolbar-strikeout",name:"create-strikeout"},{iconClass:"fv__icon-toolbar-underline",name:"create-underline"},{iconClass:"fv__icon-toolbar-edit-text",name:"create-edit-text"}],pv=uv()({actions:fv}),gv=(new DOMParser).parseFromString(pv,"text/html").body.firstElementChild,vv=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).selectionTool=new hv(e,n),r.init(),r}O()(e,t);var n=e.prototype;return n.init=function(){var t=this;this.dom=gv.cloneNode(!0),this.pageRender.$ui.get(0).appendChild(this.dom),this.dom.addEventListener("click",(function(e){if(!e.target.classList.contains("disabled")){var n=e.target.getAttribute("action");n&&t[n]&&t[n]().then((function(){t.hide()}))}}))},n.copy_selected_text=function(){return this.selectionTool.copy()},n["create-text-highlight"]=function(){return this.selectionTool.createTextHighlight()},n["create-strikeout"]=function(){return this.selectionTool.createStrikeout()},n["create-underline"]=function(){return this.selectionTool.createUnderline()},n["create-edit-text"]=function(){return this.selectionTool.createEditText()},n.showAt=function(e,n){var r=this;t.prototype.showAt.call(this,e,n),this.dom.style.cssText+="\n            left: ".concat(e,"px;\n            top: ").concat(n,"px;\n        "),Promise.resolve(this.pageRender.docRender.getUserPermission().getValue()).then((function(t){32&t?r.dom.querySelector("div>div:not(.fv__icon-popup-copy)").classList.remove("disabled"):r.dom.querySelector("div>div:not(.fv__icon-popup-copy)").classList.add("disabled"),16&t?r.dom.querySelector("div>div.fv__icon-popup-copy").classList.remove("disabled"):r.dom.querySelector("div>div.fv__icon-popup-copy").classList.add("disabled"),r.dom.classList.add("fv__active")}))},n.hide=function(){t.prototype.hide.call(this),this.dom.classList.remove("fv__active")},n.destroy=function(){this.dom.remove(),this.selectionTool.destroy()},e}(sv),mv=n(364),yv=n.n(mv),wv=(n(443),function(t){function e(e,n){var r;return(r=t.call(this)||this).uniqueClassName=n.uniqueClassName,r.disabledClassName="context-menu-disabled",r.name=e,r}O()(e,t);var n=e.prototype;return n.disable=function(){if(this.isEnabled()){var t=this.getDOM();t&&t.classList.add(this.disabledClassName)}},n.enable=function(){if(!this.isEnabled()){var t=this.getDOM();t&&t.classList.remove(this.disabledClassName)}},n.getDOM=function(){return document.querySelector(this.uniqueClassName)},n.isEnabled=function(){var t=this.getDOM();return!!t&&t.classList.contains(this.disabledClassName)},e}(function(){function t(){}var e=t.prototype;return e.disable=function(){Object(ms.a)("disable")},e.enable=function(){Object(ms.a)("enable")},e.isEnabled=function(){return Object(ms.a)("isEnabled"),!1},t}())),bv=new(function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.destroy=function(){},e}(ov)),Av=[],Pv=function(){var t=yv()({isIE:Nt.isIE}),e=document.createElement("div");e.innerHTML=t;var n=e.firstElementChild;return e.removeChild(n),n}();var Ev=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.prepare=function(e){var n=this;t.prototype.prepare.call(this,e);var r={},i={},o=function(t,o){if(o){var a=o.getStateName(),s=i[a];s&&s.destroy()}var c=t.getStateName(),u=r[c]||(t.getDefaultContextMenuConfig?t.getDefaultContextMenuConfig():void 0);i[c]=n.createContextMenu(c,e.$ui.get(0),u)};this.menus=i,e.eventEmitter.on(Ct.switchStateHandler,o),e.eventEmitter.once(Ct.openFileSuccess,(function(){setTimeout((function(){o(e.getStateHandlerManager().currentStateHandler)}),0)}))},n.createContextMenu=function(t,e,n){if(!n||!n.items)return bv;var r=n.items,i=this.pdfViewer.i18n;for(var o in r){var a=r[o];a.nameI18nKey&&(a.name=i.t(a.nameI18nKey));var s=Object(Qi.a)(o);a.className=a.className?a.className+" "+s:s,a.uniqueClassName=s}var c=B()(e),u=new(function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var i=e.prototype;return i.destroy=function(){c.contextMenu("destroy")},i.showAt=function(t,e){var n=B.a.Event("contextmenu",{data:{events:{preShow:function(){}}},pageX:t,pageY:e});n.target=c.find(".fv__pdf-page-annot-handler-rect")[0],c.trigger(n)},i.disable=function(){t.prototype.disable.call(this),c.contextMenu("destroy")},i.enable=function(){t.prototype.enable.call(this),this.createRealContextmenu()},i.createRealContextmenu=function(){c.contextMenu(n)},i.getItem=function(t){if(t in r)return new wv(t,r[t])},e}(ov));return c.on("contextmenu:hide",(function(){u.hiddenCallbacks.forEach((function(t){return t.call(u)}))})),u.createRealContextmenu(),u},n.alert=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&(t=t.message),t=this.pdfViewer.i18n.t(t)||t,window.alert(t),Promise.resolve()},n.confirm=function(t){t=this.pdfViewer.i18n.t(t)||t;var e=window.confirm(t);return e?Promise.resolve(e):Promise.reject("confirm dialog has been cancelled by user!")},n.prompt=function(t,e){e=this.pdfViewer.i18n.t(e)||e;var n=window.prompt(e,t||"");return n?Promise.resolve(n):Promise.reject("prompt dialog has been cancelled by user!")},n.promptPassword=function(t,e){e=this.pdfViewer.i18n.t(e)||e;var n=window.prompt(e,t||"");return n?Promise.resolve(n):Promise.reject("prompt dialog has been cancelled by user!")},n.loading=function(t){var e=this;return this.renderingDOM=(0===Av.length&&Av.push(Pv.cloneNode(!0)),Av.pop()),t.appendChild(this.renderingDOM),function(){e.renderingDOM.parentElement===t&&t.removeChild(e.renderingDOM),Av.push(e.renderingDOM)}},n.createFreeTextTooltip=function(t){},n.createAnnotTooltip=function(t){},n.createTextSelectionTooltip=function(t){return new vv(this.pdfViewer,t)},n.destroy=function(){Object.values(this.menus).forEach((function(t){return t&&t.destroy()}))},e}(av),xv=n(179),Sv=Ea.a.getLogger("WebAppLifecycleInvoker"),Cv=function(){function t(){this.$hooks=[]}t.resolveInstance=function(e){if("object"===_()(e)){if(e.invoke)return function(t){function n(){return t.apply(this,arguments)||this}O()(n,t);var r=n.prototype;return r.prepare=function(){"function"==typeof e.prepare&&e.prepare.apply(this,arguments)},r.generate=function(){return e.invoke.apply(this,arguments)},n}(t)}else if("function"==typeof e)return xv.a.isSubClassOf(e,t)?e:function(t){function n(){return t.apply(this,arguments)||this}return O()(n,t),n.prototype.generate=function(){return e.apply(this,arguments)},n}(t);throw new Error("incorrect lifecycle invoker")};var e=t.prototype;return e.addReleaseHook=function(t){var e=this;return"function"==typeof t?(this.$hooks.push(t),function(){var n=e.$hooks.indexOf(t);n>-1&&e.$hooks.splice(n,1)}):Dt.a},e.prepare=function(){},e.generate=function(){},e.release=function(){var t=[];this.$hooks.forEach((function(e,n){try{!1===e()&&t.push(e)}catch(t){Sv.error("An error occurred while release a resource",t)}})),this.$hooks=t},e.expose=function(){return{}},e.wrap=function(t,e,n){var r=Object.create(t),i=t[e];if("function"!=typeof i)throw new Error("Unable to wrap a member that is not function. Actual type: "+_()(i));return r[e]=n(i.bind(r)),r},t}(),Dv=function(){function t(t){this.parentManager=t,this.lifeCycles={},this.generators={}}var e=t.prototype;return e.registerLifecycle=function(t){var e=this,n=t.constructor,r=n.getName();this.lifeCycles[r]=t,t.initialize();var i=n.depends();i.length>0&&i.forEach((function(n){var i=e.getLifeCycle(n);i.addReleaseHook((function(){t.release()})),i.addDestroyHook((function(){r in e.lifeCycles&&delete e.lifeCycles[r],t.destroy()}))}))},e.registerResourceGenerator=function(t,e){this.generators[t]=Cv.resolveInstance(e)},e.getLifeCycle=function(t){if(t in this.lifeCycles)return this.lifeCycles[t];if(this.parentManager)return this.parentManager.getLifeCycle(t);throw new Error("Incorrect lifecycle name: ".concat(lifecycleName,", please make sure that has been registered via WebAppLifecycleManager.registerLifecycle()!"))},e.getResourceGeneratorClass=function(t){if(t in this.generators)return this.generators[t];if(this.parentManager)return this.parentManager.getResourceGeneratorClass(t);throw new Error("Incorrect generator name: ".concat(t,", please make sure that has been registered via WebAppLifecycleManager.registerResourceGenerator(name, generator)!"))},e.generator=function(t,e){var n,r=this.getLifeCycle(t),i=r.getResourceGenerator(e);i||(n="string"==typeof e?this.getResourceGeneratorClass(e):Cv.resolveInstance(e),r.addResourceGenerator(e,n),i=r.getResourceGenerator(e));return i},e.releaseAll=function(){Object.values(this.lifeCycles).forEach((function(t){t.release()}))},e.destroy=function(){Object.values(this.lifeCycles).forEach((function(t){t.release(),t.destroy()}))},t}();function Iv(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Rv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rv(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Rv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Tv=function(){function t(){this.keyArray=[],this.valueArray=[]}var e=t.prototype;return e.set=function(e,n){var r=this.keyArray,i=this.valueArray,o=r.indexOf(e);if(-1===o){var a=r.indexOf(t.NONE);-1!==a?o=a:(r.push(e),o=r.length-1)}r[o]=e,i[o]=n},e.get=function(t){var e=this.keyArray;return this.valueArray[e.indexOf(t)]},e.delete=function(e){var n=this.keyArray,r=this.valueArray,i=n.indexOf(e);i>-1&&(n[i]=t.NONE,r[i]=t.NONE)},e.has=function(t){return this.keyArray.indexOf(t)>-1},e.clear=function(){this.keyArray.length=0,this.valueArray.length=0},e.keys=function(){return this.keyArray.filter((function(e){return e!==t.NONE}))},e.values=function(){return this.valueArray.filter((function(e){return e!==t.NONE}))},Tt()(t,[{key:"size",get:function(){return this.keyArray.filter((function(e){return e!==t.NONE})).length}}],[{key:"NONE",get:function(){return{}}}]),t}(),_v=Ea.a.getLogger("WebAppLifeCycle"),kv=function(t){function e(){var e;return(e=t.call(this)||this).map=new(Map||Tv),e.releaseHooks=[],e}O()(e,t),e.getName=function(){Object(ms.a)()},e.depends=function(){return[]};var n=e.prototype;return n.release=function(){var t=this.map.values();if(Array.isArray(t))t.forEach((function(t){return t.release()}));else{var e,n=Iv(t);try{for(n.s();!(e=n.n()).done;){e.value.release()}}catch(t){n.e(t)}finally{n.f()}}this.releaseHooks.forEach((function(t){try{t()}catch(t){_v.error("An error occurred while invoking release hook",t)}})),this.releaseHooks.length=0},n.getResourceGenerator=function(t){if(this.map.has(t))return this.map.get(t)},n.addResourceGenerator=function(t,e){if(this.map.has(t))throw new Error("duplicate generator name is not supported now!");this.map.set(t,new e)},n.initialize=function(){Object(ms.a)()},n.addReleaseHook=function(t){"function"==typeof t&&this.releaseHooks.push(t)},n.destroy=function(){this.isDestroyed||(this.release(),this.map.clear(),delete this.map,t.prototype.destroy.call(this))},e}(vt.a),Fv=function(t){function e(e){var n;return(n=t.call(this)||this).pdfViewer=e,n}return O()(e,t),e.getName=function(){return Wh.PDF_VIEWER_ALIVE},e.depends=function(){return[Wh.BROWSER_RELOAD]},e.prototype.initialize=function(){var t=this,e=this.pdfViewer.destroy;this.pdfViewer.destroy=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.apply(t.pdfViewer,r).then((function(){t.release()}))},this.addDestroyHook((function(){delete t.pdfViewer}))},e}(kv),Mv=function(t){function e(e){var n;return(n=t.call(this)||this).pdfViewer=e,n}return O()(e,t),e.getName=function(){return Wh.PDF_DOCUMENT_CLOSING},e.depends=function(){return[Wh.PDF_VIEWER_ALIVE,Wh.BROWSER_RELOAD]},e.prototype.initialize=function(){var t=this,e=function(){t.release()};this.pdfViewer.eventEmitter.on(Ct.willCloseDocument,e),this.addDestroyHook((function(){t.pdfViewer.eventEmitter.off(Ct.willCloseDocument,e),delete t.pdfViewer}))},e}(kv),Ov=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.generate=function(t){var e=window.URL||window.webkitURL,n=e.createObjectURL(t);return this.addReleaseHook((function(){return e.revokeObjectURL(n),!0})),n},n.expose=function(){return this.getWrappedURL()},n.getWrappedURL=function(){var t=this;if(this.WrappedURL)return this.WrappedURL;var e=window.URL||window.webkitURL,n=this.wrap(e,"createObjectURL",(function(){return function(e){return t.generate(e)}}));return this.WrappedURL=n,n.URL=n,n},e}(Cv),Lv=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t),e.getName=function(){return Wh.BROWSER_RELOAD};var n=e.prototype;return n.initialize=function(){},n.addResourceGenerator=function(e,n){var r=this.map.size;t.prototype.addResourceGenerator.call(this,e,n),this.map.size>r&&this.prepareUnloadEvent()},n.prepareUnloadEvent=function(){var t=this;if(!this.prepared)if(this.prepared=!0,"function"!=typeof window.onunload)window.onunload=function(){return t.destroy(),""};else{var e=window.onunload;window.onunload=function(n){return t.destroy(),e.call(window,n)}}},e}(kv),Nv=n(211);n(444),n(301);function Vv(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=new J;if(o.translate(e.x,e.y),o.rotate(Math.atan2(e.y-n.y,n.x-e.x)),o.transformPoint(r.x,r.y)[1]>0){var a=e;e=r,r=a,a=n,n=i,i=a}return[e,n,r,i]}function Bv(t,e){var n=t.left,r=t.right,i=t.top,o=t.bottom;switch(e%4){case 0:return[{x:n,y:i},{x:r,y:i},{x:n,y:o},{x:r,y:o}];case 1:return[{x:r,y:i},{x:r,y:o},{x:n,y:i},{x:n,y:o}];case 2:return[{x:r,y:o},{x:n,y:o},{x:r,y:i},{x:n,y:i}];case 3:return[{x:n,y:o},{x:n,y:i},{x:r,y:o},{x:r,y:i}]}var a=new J,s=(n+r)/2,c=(i+o)/2;a.rotateAt(s,c,-radian);var u=a.transformRect(n,i,r,o),d=a.transformPoint(u[0],u[3]);d={x:d[0],y:d[1]};var l=a.transformPoint(u[2],u[3]);l={x:l[0],y:l[1]};var h=a.transformPoint(u[0],u[1]);h={x:h[0],y:h[1]};var f=a.transformPoint(u[2],u[1]);return[d,l,h,f={x:f[0],y:f[1]}]}function Uv(t,e){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(r,i)}),t)}}function jv(t){return 0===t.replace(/\s+/gi,"").length}var Hv=function(){function t(t,e){this.id=t,this.page=e,this.api=e.api}var e=t.prototype;return e.getId=function(){return this.id},e.findNext=function(){return this.page.doc.api.textSearchFindNext(this.getId()).then((function(t){return t?new Ri(t):null}))},e.findPrev=function(){return this.page.doc.api.textSearchFindPrev(this.getId()).then((function(t){return t?new Ri(t):null}))},e.destroy=function(){return this.page.doc.api.textSearchDestroy(this.getId())},t}(),Wv=function(){function t(t,e,n){this.doc=t,this.id=e,this.engine=n}var e=t.prototype;return e.hasKey=function(t){return this.doc.api.hasKey(this.doc.getId(),this.id,t)},e.setAt=function(t,e){var n=this;return this.doc.api.setAt(this.doc.getId(),this.id,t,e).then((function(t){return n.engine.eventEmitter.emit(St.docModified,n.doc),t}))},e.getAt=function(t){return this.doc.api.getAt(this.doc.getId(),this.id,t)},t}(),$v=function(){function t(t){this.id=t}var e=t.prototype;return e.getId=function(){return this.id},e.findNext=function(){return Promise.resolve(null)},e.findPrev=function(){return Promise.resolve(null)},e.destroy=function(){},t}(),Yv=["Courier","Courier-Bold","Courier-BoldOblique, Bold italic","Courier-Oblique, Italic","Helvetica","Helvetica-Bold","Helvetica-BoldOblique, Bold italic","Helvetica-Oblique, Italic","Times-Roman","Times-Bold","Times-BoldItalic","Times-Italic","Symbol","ZapfDingbats"];function qv(t,e,n){var r,i=t.json,o=i.contentFormats,a=i.contents,s=[o.TopLeft||(a?[{type:"string",value:a.TopLeft}]:[]),o.TopCenter||(a?[{type:"string",value:a.TopCenter}]:[]),o.TopRight||(a?[{type:"string",value:a.TopRight}]:[]),o.BottomLeft||(a?[{type:"string",value:a.BottomLeft}]:[]),o.BottomCenter||(a?[{type:"string",value:a.BottomCenter}]:[]),o.BottomRight||(a?[{type:"string",value:a.BottomRight}]:[])];s=s.map((function(t){var e="";return t.forEach((function(t){switch(t.type){case"string":jv(t.value)?e="":e+=t.value;break;case"pageNumber":e+=function(t){switch(t){case qe.default:return"<<1>>";case qe.numberOfCount:return"<<1 of n>>";case qe.numberSlashCount:return"<<1/n>>";case qe.pageNumber:return"<<Page 1>>";case qe.pageNumberOfCount:return"<<Page 1 of n>>"}return"<<1>>"}(t.value);break;case"date":e+=function(t){switch(t){case Ye.MSlashD:return"<<m/d>>";case Ye.MSlashDSlashYY:return"<<m/d/yy>>";case Ye.MSlashDSlashYYYY:return"<<m/d/yyyy>>";case Ye.MMSlashDDSlashYY:return"<<mm/dd/yy>>";case Ye.MMSlashDDSlashYYYY:return"<<mm/dd/yyyy>>";case Ye.DSlashMSlashYY:return"<<d/m/yy>>";case Ye.DSlashMSlashYYYY:return"<<d/m/yyyy>>";case Ye.DDSlashMMSlashYY:return"<<dd/mm/yy>>";case Ye.DDSlashMMSlashYYYY:return"<<dd/mm/yyyy>>";case Ye.MMSlashYY:return"<<mm/yy>>";case Ye.MMSlashYYYY:return"<<mm/yyyy>>";case Ye.MDotDDotYY:return"<<m.d.yy>>";case Ye.MDotDDotYYYY:return"<<m.d.yyyy>>";case Ye.MMDotDDDotYY:return"<<mm.dd.yy>>";case Ye.MMDotDDDotYYYY:return"<<mm.dd.yyyy>>";case Ye.MMDotYY:return"<<mm.yy>>";case Ye.DDotMDotYYYY:return"<<d.m.yyyy>>";case Ye.DDDotMMDotYY:return"<<dd.mm.yy>>";case Ye.DDDotMMDotYYYY:return"<<dd.mm.yyyy>>";case Ye.YYHyphenMMHyphenDD:return"<<yy-mm-dd>>";case Ye.YYYYHyphenMMHyphenDD:return"<<yyyy-mm-dd>>"}return"<<<<m/d>>"}(t.value)}})),e}));var c=(r={submitLoading:!1,showPreview:!1,fontEmbed:!1,isShrink:!1,isKeep:!1,marginLeft:72,marginRight:72,marginTop:36,marginBottom:36,pageOdd:!0,pageEven:!0,pageCount:n},R()(r,"fontEmbed",!1),R()(r,"currentPage",e),r);c.leftHeaderText=s[0],c.centerHeaderText=s[1],c.rightHeaderText=s[2],c.leftFooterText=s[3],c.centerFooterText=s[4],c.rightFooterText=s[5],c.isShrink=i.hasTextShrinked||!1,c.isKeep=i.hasFixedSized||!1,i.startPageNumber=i.startPageNumber||1,c.startPage=i.startPageNumber-1,i.range?(i.range.start=i.range.start||1,i.range.end=i.range.end||n,i.range.start<1&&(i.range.start=1),i.range.start>n&&(i.range.start=n),i.range.end<1&&(i.range.end=1),i.range.end>n&&(i.range.end=n),c.pageStart=i.range.start-1,c.pageEnd=i.range.end-1,0===i.range.filter?(c.pageOdd=!0,c.pageEven=!0):1===i.range.filter?(c.pageOdd=!1,c.pageEven=!0):2===i.range.filter&&(c.pageOdd=!0,c.pageEven=!1)):(c.pageStart=0,c.pageEnd=n-1,c.pageOdd=!0,c.pageEven=!0),i.margin&&(c.marginLeft=i.margin.left,c.marginBottom=i.margin.bottom,c.marginTop=i.margin.top,c.marginRight=i.margin.right);var u=i.font?i.font:i.fontId;return c.font=u||0,c.fontSize=i.textSize||12,c.fontColor=i.textColor||0,c.underLine=i.underline||!1,"string"==typeof c.font?c.fontName=c.font:((c.font<0||c.font>=Yv.length)&&(c.font=0),c.fontName=Yv[c.font]),c}function Gv(t,e){var n=0;!t.pageOdd&&t.pageEven?n=1:t.pageOdd&&!t.pageEven&&(n=2);var r=-1===t.pageStart?1:t.pageStart+1,i=-1===t.pageEnd?e:t.pageEnd+1,o=xn(t.fontColor,"int",0);return{font:t.fontName,textSize:t.fontSize,textColor:o,hasTextShrinked:t.isShrink,hasFixedSized:t.isKeep,range:{start:r,end:i,filter:n},margin:{left:t.marginLeft,right:t.marginRight,top:t.marginTop,bottom:t.marginBottom},startPageNumber:t.startPage+1,contents:{TopLeft:t.leftHeaderText,TopCenter:t.centerHeaderText,TopRight:t.rightHeaderText,BottomLeft:t.leftFooterText,BottomCenter:t.centerFooterText,BottomRight:t.rightFooterText},contentFormats:{},underline:t.underLine}}var zv=function(){function t(t,e){this.info=t,this.isDestroyed=!1,this.doc=e,this.engine=e.engine,this.api=e.api,this._pxWdith=ut(this.getWidth()),this._pxHeight=ut(this.getHeight()),this.annots=[],this.annotIdMap={},this.graphicObjects=[],this.info.AA[0]&&(this.openAction=this.doc.engine.actionFactory.createAction(this.info.AA[0],e,this.doc.api,this.doc.engine.eventEmitter,this)),this.info.AA[1]&&(this.closeAction=this.doc.engine.actionFactory.createAction(this.info.AA[1],e,this.doc.api,this.doc.engine.eventEmitter,this)),e.pageIdMap[t.id]=this}var e=t.prototype;return e.getAction=function(t){return"open"==t?this.openAction:this.closeAction},e.getActions=function(t){var e=this;return this.doc.api.getPageAction(this.getPDFDoc().getId(),this.getId(),t).then((function(t){if(t)return e.doc.engine.actionFactory.createAction(t,e.doc,e.doc.api,e.engine.eventEmitter,e)}))},e.setAction=function(){var t=D()(N.a.mark((function t(e,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.doc.api.setPageAction(this.getPDFDoc().getId(),this.getId(),e,n.info));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e.setActionData=function(){this.doc.api.updatePageAction()},e.moveAction=function(t,e,n){return this.doc.api.movePageAction(this.getPDFDoc().getId(),this.getId(),t,e,n)},e.removeAction=function(t,e){return this.doc.api.removePageAction(this.getPDFDoc().getId(),this.getId(),t,e?e.info:null)},e.getId=function(){return this.info.id},e.getInfo=function(){return this.info},e.getPDFDoc=function(){return this.doc},e.getIndex=function(){return this.info.index},e.getWidth=function(){return this.info.width},e.getHeight=function(){return this.info.height},e.updateInfo=function(){var t=this;return this.doc.api.updatePageInfo(this.getPDFDoc().getId(),this.getId()).then((function(e){t._updateInfo(e)}))},e._updateInfo=function(t){this.info=t,this.doc.updatePageSize(t.index,this.getWidth(),this.getHeight()),this._pxWdith=ut(this.getWidth()),this._pxHeight=ut(this.getHeight()),this.doc.engine.eventEmitter.emit(St.pageInfoChange,this)},e.getRotation=function(){return this.info.rotation},e.setRotation=function(t){var e=this;if(!this.doc.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");var n=this.getRotation();return t===n?Promise.resolve():this.doc.api.setPageRotation(this.getPDFDoc().getId(),this.getId(),t).then((function(t){return Promise.all([t,e.updateInfo()])})).then((function(t){var r=S()(t,1)[0];e.doc.engine.eventEmitter.emit(St.pageRotationChange,e,r,n)}))},e.getRotationAngle=function(){var t=this.getRotation();if(4===t)throw new Error("Unknown rotation angle value: "+t);return 90*t},e.getPxWidth=function(){return this._pxWdith},e.getPxHeight=function(){return this._pxHeight},e.getOriginX=function(){return this.info.cropBox.left},e.getOriginY=function(){return this.info.cropBox.bottom},e.getPDFMatrix=function(){return new J(this.info.matrix)},e.getDeviceMatrix=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getPDFMatrix(),n=this.getHeight(),r=this.getWidth();e.translate(0,-n);var i=ut(1);switch(e.scale(i,-i),t){case 90:e.rotate(t/180*Math.PI),e.translate(i*n,0);break;case 180:e.rotate(t/180*Math.PI),e.translate(i*r,i*n);break;case 270:e.rotate(t/180*Math.PI),e.translate(0,i*r)}return e},e.getDeviceMatrix2=function(){var t=this.getPDFMatrix(),e=this.getRotation(),n=ut(1);switch(e%4){case 0:t.translate(0,-this.getHeight()),t.scale(n,-n);break;case 1:t.scale(-n,n),t.rotate(Math.PI/2);break;case 2:t.translate(-this.getWidth(),0),t.scale(-n,n);break;case 3:t.translate(this.getWidth(),this.getHeight()),t.rotate(Math.PI/2),t.scale(n,-n)}return t},e.getDevicePoint=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getDeviceMatrix(n);return r.scale(e,e),r.transformPoint(t[0],t[1])},e.getDeviceRect=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getDeviceMatrix(n);r.scale(e,e);var i=r.transformRect(t.left,t.top,t.right,t.bottom);return{left:i[0],top:i[1],right:i[2],bottom:i[3]}},e.reverseDevicePoint=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getDeviceMatrix(n);return r.scale(e,e),r.setReverse(),r.transformPoint(t[0],t[1])},e.reverseDeviceOffset=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getDeviceMatrix(n);return r.e=r.f=0,r.scale(e,e),r.setReverse(),r.transformPoint(t[0],t[1])},e.reverseDeviceRect=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getDeviceMatrix(n);r.scale(e,e),r.setReverse();var i=r.transformRect(t.left,t.top,t.right,t.bottom),o=S()(i,4),a=o[0],s=o[1],c=o[2],u=o[3],d=Math.min(a,c),l=Math.max(a,c),h=Math.max(s,u),f=Math.min(s,u);return{left:d,top:h,right:l,bottom:f}},e.render=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["page"],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"view";if(!this.doc.checkPermission(Tn.print||Tn.printHigh))throw new Error("Permission error");if(t*=4/3,-1==r.indexOf("page")&&r.push("page"),"view"!=i&&"print"!=i)throw new Error("Param error: usage should be one of 'view', 'print'. Got '"+i+"' instead.");return this.getPageBitmap(t,e,n,r,i)},e.getPageBitmap=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["page"],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"view",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return this.doc.api.getPageBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,r,i,o)},e.clearDesignerAssitCache=function(){return this.doc.api.clearDesignerAssitCache(this.getPDFDoc().getId(),this.getId())},e.getPageAndHighlightBitmap=function(t,e,n,r){return this.doc.api.getPageAndHighlightBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,r)},e.getAnnotBitmap=function(t,e,n,r,i,o){var a=this;return!0===i?this.doc.api.getAnnotBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,r,o):this.getAnnots().then((function(i){if(t.trim().length<1)return null;var s=a.getAnnotObjectNum(t);return 0==s?null:a.doc.api.getAnnotBitmap(a.getPDFDoc().getId(),a.getId(),s,e,n,r,o)}))},e.getPageObjNum=function(){return this.info.objectNumber},e.getAnnotObjectNum=function(t){var e=this;if(t.trim().length<1)return 0;var n=Object.keys(this.annotIdMap);if(!n.length)return 0;var r=n.find((function(n){return e.annotIdMap[n].getName()==t}));return parseInt(r)},e.getAnnotBitmapByRange=function(t,e,n,r){return this.doc.api.getAnnotBitmapByRange(this.getPDFDoc().getId(),this.getId(),t,e,n,r)},e.getAnnotCount=function(){return this.info.annotCount},e.resetWidgetsControl=function(){this.annots.forEach((function(t){"widget"==t.getType()&&t.mapFormControl()}))},e.getAnnots=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(this.annots.length=0,this.annotIdMap={},this.annotsPromise=null),this.annotIdMap){var n=Object.keys(this.annotIdMap);if(this.annots.length&&n.length){var r=n.map((function(e){return t.annotIdMap[e]}));return r.sort(Jv),Promise.resolve(r)}}var i=this.doc.engine;if(i)return this.annotsPromise=this.annotsPromise||this.doc.api.getAnnots(this.getPDFDoc().getId(),this.getId(),null,e).then((function(e){return e.map((function(e){return i.annotManager.get(e,t)}))})).then((function(e){var n=[];t.annotIdMap=e.reduce((function(t,e,r){var i=e.getId();return i in t||n.push(e),t[i]=e,t}),t.annotIdMap);var r=e.map((function(e){return e.reviseSummary((function(e){return t.annotIdMap[e]}))}));return Promise.all(r).then((function(){return t.annots.length=0,e.sort(Jv),e.forEach((function(e){return t.annots.push(e)})),t.annotsPromise=null,i.eventEmitter.emit(St.annotationLoaded,t,n,e),t.annots}))}))},e.setAnnots=function(t){t.sort(Jv),this.annots=t},e.getMarkupAnnots=function(){var t=!0===arguments[0];return this.getAnnots().then((function(t){return e(t)}));function e(e){e=e.filter((function(t){return t.isMarkup()&&!t.isDeleted()&&!("popup"===t.getType())&&!function(t){return"widget"===t}(t.getType())&&t.getReplies&&(!t.isStateAnnot||!t.isStateAnnot())}));var n=[],r=[];e.forEach((function(t){var e=t.getReplies();n.push.apply(n,E()(e)),n.forEach((function t(e){if(!e&&e.getReplies){var r=e.getReplies();n.push.apply(n,E()(r)),r.forEach(t)}})),r.push.apply(r,E()(t.getReviewStates())),r.push.apply(r,E()(t.getMarkedStates()))}));var i=e.filter((function(t){return-1===n.indexOf(t)&&-1===r.indexOf(t)}));return t?i.reduce((function(t,e){var n=e.getGroupHeader&&e.getGroupHeader()||e;return-1===t.indexOf(n)&&t.push(n),t}),[]):(i.forEach((function(t){"Replace"===t.getIntent()&&t.groupElements.forEach((function(e){if(e!==t){var n=i.indexOf(e);n>-1&&i.splice(n,1)}}))})),i)}},e.filterAnnot=function(t,e){for(var n=!t,r=0;r<this.annots.length;r++){var i=this.annots[r];if(n&&i.getType()==e)return i;i.info.objectNumber==t&&(n=!0)}return null},e.filterPrevAnnot=function(t,e){for(var n=!t,r=this.annots.length-1;r>=0;r--){var i=this.annots[r];if(n&&i.getType()==e)return i;i.info.objectNumber==t&&(n=!0)}return null},e.getAnnotTree=function(){var t=this,e=!0===arguments[0];return this.getMarkupAnnots(e).then((function(e){return t.getAnnots().then((function(t){var n=t.filter((function(t){return!t.isMarkup()&&!t.isDeleted()&&"popup"!==t.info.type}));return e.concat(n).sort((function(e,n){return t.indexOf(e)-t.indexOf(n)}))}))}))},e.getAnnotIdAtDevicePoint=function(t,e,n){return this.doc.api.getAnnotIdAtDevicePoint(this.getPDFDoc().getId(),this.getId(),{x:t[0],y:t[1]},e,n)},e.getAnnotObjectNumAtDevicePoint=function(t,e,n){return this.doc.api.getAnnotObjectNumAtDevicePoint(this.getPDFDoc().getId(),this.getId(),{x:t[0],y:t[1]},e,n)},e.getCharInfoAtPoint=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.doc.checkPermission(Tn.extract||Tn.extractAccess))throw new Error("Permission error");return this.doc.api.getCharInfoAtPoint(this.getPDFDoc().getId(),this.getId(),{x:t[0],y:t[1]},e)},e.removeAnnot=function(t){return this.removeAnnotByObjectNumber(t.getId())},e.removeAnnotById=function(t){var e=this;return this.getAnnots().then((function(n){var r=e.getAnnotObjectNum(t);if(0!==r)return e.removeAnnotByObjectNumber(r)}))},e.removeAnnotByObjectNumber=function(t){var e=this;if(!this.doc.checkPermission(Tn.annotForm))throw new Error("Permission error");return this.getAnnots().then((function(n){return e.doc.api.removeAnnot(e.getPDFDoc().getId(),e.getId(),t)})).then((function(t){return e.clearRelatives(t),e.clearAnnotIds(t)})).then((function(t){for(var n=t.reduce((function(t,e){return t[e.objNum]=1,t}),{}),r=e.annots,i=r.length;i--;){n[r[i].objectNumber]&&r.splice(i,1)}return e.setAnnots(r),e.doc.engine.eventEmitter.emit(St.annotationRemoved,t,e),t}))},e.removeAllAnnot=function(){var t,e=this;if(!this.doc.checkPermission(Tn.annotForm))throw new Error("Permission error");return this.getAnnots().then((function(n){return t=Object.keys(e.annotIdMap),e.doc.api.removePageAllAnnot(e.getPDFDoc().getId(),e.getId())})).then((function(){return e.clearRelatives(t),e.clearAnnotIds(t)})).then((function(t){return e.doc.engine.eventEmitter.emit(St.annotationRemoved,t,e),t}))},e.getThumb=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;X(Q(t),"Incorrect rotation degree: ".concat(t,", it should be 0, 90, 180, or 270"));var n=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.getThumb(n,r,t,e)},e.getMediaBoxBitmap=function(t,e){var n=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.getMediaBoxBitmap(n,r,t,e)},e.clearRelatives=function(t){if(Array.isArray(t)&&t){var e=t.slice(0);this.getAnnots().then((function(t){t.some((function(t){return t instanceof Zg&&0==(e=t.removeRepliesByIdLocaly(e)).length}))}))}},e.clearAnnotIds=function(t){for(var e=this,n=[],r=this.annotIdMap,i=this.info,o=function(o){var a=t[o];n[o]=r[a],n[o]&&(n[o].info.isDeleted=!0,delete r[a],i.annotCount--),e.annots.forEach((function(t){t.getId()==a&&(t.info.isDeleted=!0)}))},a=t.length;a--;)o(a);for(var s=n.length;s--;)n[s]||n.splice(s,1);return this.annots=this.annots.filter((function(e){return-1==t.indexOf(e.getId())})),n},e.addReplyAnnot=function(t){if(!this.doc.checkPermission(Tn.annotForm))throw new Error("Permission error");return this.addAddonAnnot(t)},e.addAddonAnnot=function(t){var e=this,n=t.getId();return this.info.annotCount++,this.annotIdMap[n]=t,t.reviseSummary((function(t){return e.annotIdMap[t]}))},e.removeAddonAnnotById=function(t){return!!this.annotIdMap[t]&&(this.info.annotCount-=1,delete this.annotIdMap[t])},e.addAnnot=function(t){var e=this;if(-1==Kv.indexOf(t.type))throw new Error("Annot type error");var n=this.engine.getUserCommentConfig();if(n&&n.isTextAsContent){["highlight","strikeout","underline","squiggly"].includes(t.type)&&!t.contents&&t.coords[0]&&t.coords[0].text&&(t.contents=t.coords[0].texts||t.coords[0].text)}if(t.iconCatagory&&(t.iconCategory=t.iconCatagory),t.iconInfo&&t.iconInfo.catagory&&(t.iconInfo.category=t.iconInfo.catagory),!this.doc.checkPermission(Tn.annotForm))throw new Error("Permission error");t.iconInfo;"number"==typeof t.page&&(t=function(t){var e,n={type:t.type,opacity:t.opacity,name:t.name,contents:t.contents,subject:t.subject,title:t.title,icon:t.icon,intent:t.intent||t.IT,DA:t.defaultappearance,alignment:t.justification,enableCaption:"yes"==t.caption},r=t.fontColor;r&&(n.fontColor=parseInt(r.replace("#",""),16)),(e=t.color)&&(n.color=parseInt(e.replace("#",""),16));var i=t["interior-color"]||t.interiorColor;i&&(n.styleFillColor=n.fillColor=parseInt(i.replace("#",""),16));var o=t.flags||"print",a=o.split(",");for(var s in o=0,Ht.AnnotFlagsName)-1!=a.indexOf(Ht.AnnotFlagsName[s])&&(o|=1<<parseInt(s));n.flag=o;var c=(t.rect||"").split(",");c.length&&(n.rect={left:+c[0],top:+c[3],right:+c[2],bottom:+c[1]});var u=(t.fringe||"").split(",");4===u.length&&(n.innerRect={left:n.rect.left+ +u[0],top:n.rect.top-+u[3],right:n.rect.right-+u[2],bottom:n.rect.bottom+ +u[1]});var d=t.coords;if(d){d=d.split(","),n.coords=[];for(var l=0,h=d.length;l<h;l+=8){var f=Math.min(+d[l],+d[l+2],+d[l+4],+d[l+6]),p=Math.max(+d[l],+d[l+2],+d[l+4],+d[l+6]),g=Math.max(+d[l+1],+d[l+3],+d[l+5],+d[l+7]),v=Math.min(+d[l+1],+d[l+3],+d[l+5],+d[l+7]);n.coords.push({left:f,right:p,top:g,bottom:v})}}var m=t.callout;if(m){m=m.split(","),n.calloutLinePoints=[];for(var y=0,w=m.length;y<w;y+=2)n.calloutLinePoints.push({x:+m[y],y:+m[y+1]})}var b=t.head;b&&(n.startStyle=bn(b));var A=t.tail;A&&(n.endStyle=bn(A));var P=t.vertices;if(P){n.vertexes=[],P=P.split(";");for(var E=0;E<P.length;E++){var x=P[E].split(",");n.vertexes.push({x:+x[0],y:+x[1]})}}var S=t.inklist;if(S){n.inkList=[],S=JSON.parse("["+S.replace(/;/g,",")+"]");for(var C=0;C<S.length;C++)for(var D=S[C],I=0;I<D.length;I+=2){var R=D[I],T=0==I?1:2;n.inkList.push({x:R,y:D[I+1],type:T})}}var _=xe[t.style||"solid"];n.borderInfo={style:_,width:t.width||1};var k=t.dashes;k&&(n.borderInfo.dashes=JSON.parse("["+k+"]"));var F=t.intensity;F&&(n.borderInfo.cloudIntensity=F);var M=t.start;M&&(M=M.split(","),n.startPoint={x:+M[0],y:+M[1]});var O=t.end;return O&&(O=O.split(","),n.endPoint={x:+O[0],y:+O[1]}),n}(t));var r=this.getPDFDoc().getId(),i=this.getId(),o=this.doc.engine.getDefaultAnnotConfig()(t.type,t.intent);return Object(zg.a)(t,o),this.doc.api.addAnnot(r,i,t).then((function(t){return e._doAfterAddAnnots(t)}),(function(t){var e=z();return e.reject(t),e.promise}))},e.markRedactAnnot=function(t){var e,n=this;if(arguments&&arguments[1]&&(e=arguments[1]),!this.doc.checkPermission(Tn.annotForm))throw new Error("Permission error");var r=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.markRedactAnnot(r,i,t,e).then((function(t){return n._doAfterAddAnnots(t)}))},e.addAnnotGroup=function(t,e){var n=this;if(!this.doc.checkPermission(Tn.annotForm))throw new Error("Permission error");t.forEach((function(t){if(!t.type)throw new Error("Annot type error")}));var r=this.getPDFDoc().getId(),i=this.getId();return t=t.map((function(t){var e=n.doc.engine.getDefaultAnnotConfig()(t.type,t.intent,t.typeAlias);return Object(zg.a)(t,e),t})),this.doc.api.addAnnotGroup(r,i,t,e).then((function(t){return n._doAfterAddAnnots(t)}))},e._doAfterAddAnnots=function(t){var e=this,n=t.map((function(t){return t&&e.doc.engine.annotManager.get(t,e)}));n.reduce((function(t,e){return t[e.getId()]=e,t}),this.annotIdMap);var r=n.map((function(t){return t.reviseSummary((function(t){return e.annotIdMap[t]}))}));return this.annots=this.annots.concat(n),this.info.annotCount=this.annots.length,Promise.all(r).then((function(){return e.doc.engine.eventEmitter.emit(St.annotationAdd,n,e),n}))},e.getUnloadedAnnots=function(){var t=this,e=this.getPDFDoc().getId(),n=this.getId();return this.doc.api.getPageAnnotIDList(e,n).then((function(r){var i=r.filter((function(e){return!t.annotIdMap[e]}));return(i.length?t.doc.api.getAnnots(e,n,i):Promise.resolve([])).then((function(e){return e.map((function(e){return e?t.doc.engine.annotManager.get(e,t):null})).filter((function(t){return!!t}))})).then((function(e){var n=e.reduce((function(t,e){return t[e.getId()]=e,t}),{});return t.annotIdMap=r.reduce((function(e,r){var i=t.annotIdMap[r]||n[r];return i&&(e[r]=i),e}),{}),Promise.all(Object.keys(t.annotIdMap).map((function(e){var n=t.annotIdMap[e];return n&&n.update()}))).then((function(t){return e}))})).then((function(e){t.setAnnots(t.annots.concat(e)),t.info.annotCount=t.annots.length;var n=t.annots.map((function(e){return e.reviseSummary((function(e){return t.annotIdMap[e]}))}));return Promise.all(n).then((function(){t.doc.engine.eventEmitter.emit(St.annotationLoaded,t,e,t.annots)})),e}))}))},e.getTextRectsAtRect=function(t){return this.doc.api.getTextRectsAtRect(this.getPDFDoc().getId(),this.getId(),t)},e.getTextContinuousRectsAtRect=function(t){return this.doc.api.getTextContinuousRectsAtRect(this.getPDFDoc().getId(),this.getId(),t)},e.getTextContinuousRectsAtPoints=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return this.doc.api.getTextContinuousRectsAtPoints(this.getPDFDoc().getId(),this.getId(),t,e,n,r,i)},e.getDoubleClickTextRectAtPoint=function(t,e){return this.doc.api.getDoubleClickTextRectAtPoint(this.getPDFDoc().getId(),this.getId(),t,e)},e.getTextContinuousCharsAtRect=function(t,e){return this.doc.api.getTextContinuousCharsAtRect(this.getPDFDoc().getId(),this.getId(),t,e)},e.getTextSearch=function(t,e){var n=this;return this.isVirtual()?Promise.resolve(new $v):this.doc.api.getTextSearch(this.getPDFDoc().getId(),this.getId(),t,e).then((function(t){return new Hv(t,n)}))},e.destroy=function(){return this.isDestroyed=!0,this.annots.forEach((function(t){return t.destroy()})),this.graphicObjects.forEach((function(t){return t.destroy()})),this.graphicObjects=null,this.annots=null,this.annotIdMap=null,this.info=null,this.doc=null,this.api=null,Promise.resolve()},e.normalize=function(){return this.doc.api.normalizePage(this.getPDFDoc().getId(),this.getId())},e.getAnnotsByIdArray=function(t){return this.getAnnots().then((function(e){for(var n=[],r=0,i=t.length;r<i;r++)for(var o=0;o<e.length;o++)if(t[r]===e[o].getUniqueID()){n.push(e[o]);break}return n}))},e.getAnnotsByObjectNumArray=function(t){var e=this;return this.getAnnots().then((function(){for(var n=e.annotIdMap,r=[],i=0,o=t.length;i<o;i++){var a;(a=n[t[i]])&&r.push(a)}return r}))},e.flatten=function(t){var e=this;if((t|3-t)<0)throw new Error("Param option error.");var n=this.doc;if(!(n.checkPermission(Tn.annotForm)&&n.checkPermission(Tn.modify)&&n.checkPermission(Tn.assemble|Tn.modify)))throw new Error("Permission error");return this.doc.api.flatten(this.getPDFDoc().getId(),this.getId(),t).then((function(t){var r;return e.annotIdMap={},e.annots.length=0,e.info.annotCount=0,(r=e.doc.getPDFForm())&&r.reduceControl(e.getIndex(),t),e.doc.engine.eventEmitter.emit(St.flattened,e.getIndex()),e.doc.engine.eventEmitter.emit(St.docModified,n),!0}))},e.addImage=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.doc.checkPermission(8))throw new Error("Permission error");var i={x:e.left,y:e.bottom},o=e.right-e.left,a=e.top-e.bottom;return this.doc.api.addPageImage(this.getPDFDoc().getId(),this.getId(),t,i,o,a,r).then((function(t){if(t){var e=n.doc.engine.graphicsObjectManager.get(t,n);return e&&n.graphicObjects.push(e),n.doc.engine.eventEmitter.emit(St.imageAdded,n),e}return t}))},e.addWatermark=function(t){var e=this,n=t.type,r=t.text;if("text"===n&&jv(r))return Promise.resolve(null);if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var i=function(t,e,n,r,i){var o={showAdvanceSetting:!0,showApperanceOptModal:!1,submitLoading:!1,pageCount:i,currentPage:e+1,text:"",pageNumber:e,absScale:100,filePath:"",docId:null,doc:null,file:null,scaleCkd:!0,appear:2,pageStart:n,pageEnd:r,pageOdd:!0,pageEven:!0,isPrint:!0,isScreen:!0,isKeep:!1,unit:6};if(o.scaleCkd=!1!==t.useRelativeScale,"text"===t.type){o.sourceType=1,o.text=t.text;var a=A()({font:0,fontSize:20,color:0,fontStyle:"normal"},t.watermarkTextProperties);o.font=a.font,o.fontSize=a.fontSize,o.fontColor=a.color,"normal"===a.fontStyle?o.underLine=!1:"underline"===a.fontStyle&&(o.underLine=!0),"string"==typeof o.font?o.fontName=o.font:((o.font<0||o.font>=Yv.length)&&(o.font=0),o.fontName=Yv[o.font])}else"bitmap"===t.type&&(o.sourceType=2,o.bitmap=t.bitmap);var s=A()({position:"Center",offsetX:0,offsetY:0,flags:7,scale:1,rotation:45,opacity:100},t.watermarkSettings);switch(o.vDistance=s.offsetX,o.hDistance=s.offsetY,o.opacity=s.opacity,o.rotate=s.rotation,s.scale<0&&(s.scale=.01),s.scale>1&&(s.scale=1),o.scale=100*s.scale,s.flags&Le.asAnnot&&"text"===t.type?o.isKeep=!0:o.isKeep=!1,s.flags&Le.onTop?o.appear=2:o.appear=1,s.flags&Le.unprintable?o.isPrint=!1:o.isPrint=!0,s.flags&Le.display?o.isScreen=!1:o.isScreen=!0,s.position){case Oe.topLeft:o.vFrom=1,o.hFrom=1;break;case Oe.topCenter:o.vFrom=1,o.hFrom=2;break;case Oe.topRight:o.vFrom=1,o.hFrom=3;break;case Oe.centerLeft:o.vFrom=2,o.hFrom=1;break;case Oe.center:o.vFrom=2,o.hFrom=2;break;case Oe.centerRight:o.vFrom=2,o.hFrom=3;break;case Oe.bottomLeft:o.vFrom=3,o.hFrom=1;break;case Oe.bottomCenter:o.vFrom=3,o.hFrom=2;break;case Oe.bottomRight:o.vFrom=3,o.hFrom=3}return o}(t,this.getIndex(),this.getIndex(),this.getIndex(),this.doc.getPageCount());return this.doc.getPageFormat("watermark").then((function(t){return e.doc.addPageFormat("watermark",i).then((function(t){if(t>0){var n={};return i.isKeep&&(n=e.annots[e.annots.length-1].info,e.doc.engine.eventEmitter.emit(St.annotationAdd,e.annots,e)),e.doc.engine.eventEmitter.emit(St.watermarkAdded,e),n}return t}))}))},e.getGraphicsObjectsInRect=function(t,e,n){var r=this;if(n<0||n>3)throw new Error("Type error, only 0~3 are available. current is: "+n);return this.doc.api.getGraphicsObjectAtPoint(this.getPDFDoc().getId(),this.getId(),null,e,n,t).then((function(t){return t.map((function(t){var e=r.doc.engine.graphicsObjectManager.get(t,r);return e&&r.graphicObjects.push(e),e}))}))},e.getGraphicsObjectAtPoint=function(t,e,n){var r=this;return this.doc.api.getGraphicsObjectAtPoint(this.getPDFDoc().getId(),this.getId(),t,e,n).then((function(t){var e=r.doc.engine.graphicsObjectManager.get(t,r);return e&&r.graphicObjects.push(e),e}))},e.getGraphicsObjectByIndex=function(t){var e=this;return t<0?Promise.resolve(null):this.doc.api.getGraphicsObjectByIndex(this.getPDFDoc().getId(),this.getId(),t).then((function(t){var n=e.doc.engine.graphicsObjectManager.get(t,e);return n&&e.graphicObjects.push(n),n}))},e.getGraphicsObjectsCount=function(){return this.doc.api.getGraphicsObjectsCount(this.getPDFDoc().getId(),this.getId())},e.setGraphicsObjectMatrix=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");return this.doc.api.setGraphicsObjectRect(this.getPDFDoc().getId(),t).then((function(t){e.doc.engine.eventEmitter.emit(St.graphicsUpdated,e)}))},e.addGraphicsObject=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");return this.doc.api.addGraphicsObject(this.getPDFDoc().getId(),this.getId(),t).then((function(t){var n=e.doc.engine.graphicsObjectManager.get(t,e);return n&&e.graphicObjects.push(n),e.doc.engine.eventEmitter.emit(St.graphicsUpdated,e),n}))},e.removeGraphicsObject=function(t){this.removeGraphicsObjectEx(t,!0)},e.removeGraphicsObjectEx=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");return this.graphicObjects=this.graphicObjects.filter((function(t){return t.getId()!=t.getId()})),this.doc.api.removeGraphicsObject(this.getPDFDoc().getId(),this.getId(),t.getId(),n).then((function(t){n&&e.doc.engine.eventEmitter.emit(St.graphicsUpdated,e)}))},e.pasteAnnot=function(t,e){var n=this;if(!this.doc.checkPermission(Tn.annotForm))throw new Error("Permission error");var r=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.paste(r,i,t.getPage().getId(),"annot",t.getId(),e).then((function(t){return n._doAfterAddAnnots(t)}),(function(t){return Promise.reject(t)}))},e.pasteGraphicObject=function(t,e,n){var r=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var i=this.getPDFDoc().getId(),o=this.getId();return this.doc.api.paste(i,o,this.doc.pageCache[e].getId(),"graphicObject",t,n).then((function(t){return r.doc.engine.eventEmitter.emit(St.graphicsUpdated,r),r.doc.engine.graphicsObjectManager.get(t,r)}),(function(t){var e=z();return e.reject(t),e.promise}))},e.getMediaWidth=function(){return this.info.mediaWidth},e.getMediaHeight=function(){return this.info.mediaHeight},e.isCropped=function(){return this.info.isCropped},e.isVirtual=function(){return!!this.info.isVirtual},e.calcPageContentBBox=function(t){return this.doc.api.calcPageContentBBox(this.getPDFDoc().getId(),this.getIndex(),t)},e.getPageBox=function(t){return this.doc.api.getPageBox(this.getPDFDoc().getId(),this.getIndex(),t)},e.getAllBoxes=function(){return this.doc.api.getAllBoxes(this.id,this.getIndex())},e.setPageBox=function(t,e){return this.doc.api.setPageBox(this.getPDFDoc().getId(),this.getIndex(),t,e)},e.setPageSize=function(t,e){var n=this;return this.doc.api.setPageSize(this.getPDFDoc().getId(),this.getIndex(),t,e).then((function(){n.doc.engine.eventEmitter.emit(St.pagesBoxChange,[n])}))},e.getAnnotIdArrayByOrder=function(){return this.doc.api.getAnnotIdArrayByOrder(this.getPDFDoc().getId(),this.getId())},e.getDict=function(){var t=this;return this.doc.api.getPageDictionary(this.getPDFDoc().getId(),this.getId()).then((function(e){return new Wv(t.doc,e.id,t.doc.engine)}))},e.createWebLinks=function(t){var e=this,n=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.createWebLinks(n,r,t).then((function(t){var n=e.doc;return n.engine.eventEmitter.emit(St.docModified,n),t}))},e.removeWebLinks=function(t){var e=this,n=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.removeWebLinks(n,r,t).then((function(t){var n=e.doc;return n.engine.eventEmitter.emit(St.docModified,n),t}))},e.deleteDestination=function(t){var e=this.getPDFDoc().getId(),n=this.getId();return this.doc.api.deleteDestination(e,n,t)},e.renameDestination=function(t,e){var n=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.renameDestination(n,r,t,e)},e.createDestination=function(t,e){var n=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.createDestination(n,r,t,e)},e.resetDestination=function(t,e){var n=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.resetDestination(n,r,t,e)},e.addAnnotObjects=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.doc.api.addAnnotObjects(this.doc.getId(),this.getId(),t).then((function(t){return(t=t.map((function(t){return t?e.doc.engine.annotManager.get(t,e):null})).filter((function(t){return!!t}))).forEach((function(t){e.annotIdMap[t.getId()]=t})),t})).then((function(t){e.setAnnots(e.annots.concat(t));var r=e.annots.map((function(t){return t.reviseSummary((function(t){return e.annotIdMap[t]}))}));return Promise.all(r).then((function(){return n&&e.doc.engine.eventEmitter.emit(St.annotationAdded,t,e),t}))}))},e.getSuggestedFormDesignerRect=function(t){return this.doc.api.getSuggestedFormDesignerRect(this.getPDFDoc().getId(),this.getId(),t)},e.getSnappedPoint=function(t,e){var n=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.getSnappedPoint(n,r,t,e)},e.getTextRectCount=function(){var t=this.getPDFDoc().getId(),e=this.getId();return this.doc.api.getPageTextRectCount(t,e)},e.getTextByRectIndex=function(t){var e=this.getPDFDoc().getId(),n=this.getId();return this.doc.api.getPageTextByRectIndex(e,n,t)},e.cloneGraphicObject=function(t,e){return this.doc.api.cloneGraphicObject(this.getPDFDoc().getId(),this.getId(),this.doc.pageCache[t].getId(),e)},e.addAnnotObjects=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.doc.api.addAnnotObjects(this.doc.getId(),this.getId(),t).then((function(t){return(t=t.map((function(t){return t?e.doc.engine.annotManager.get(t,e):null})).filter((function(t){return!!t}))).forEach((function(t){e.annotIdMap[t.getId()]=t})),t})).then((function(t){e.annots=e.annots.concat(t);var r=e.annots.map((function(t){return t.reviseSummary((function(t){return e.annotIdMap[t]}))}));return Promise.all(r).then((function(){return n&&e.doc.engine.eventEmitter.emit(St.annotationAdded,t,e),t}))}))},e.addReviewStateAnnotObject=function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.doc.api.addAnnotObjects(this.doc.getId(),this.getId(),e).then((function(e){var r=e[0];t.info.reviewStatesSummary.push({objectNumber:r.objectNumber,id:r.objectNumber,index:r.index});var i=n.doc.engine.annotManager.get(r,n);return n.addAddonAnnot(i)})).then((function(e){return t.reviewStates.push(e),r&&n.doc.engine.eventEmitter.emit(St.annotationReviewStateAnnotAdd,e,t),r&&n.doc.engine.eventEmitter.emit(St.annotationUpdated,[t],n,_n.reviewStateUpdated),e}))},e.addMarkedStateAnnotObject=function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3],o=t.getGroupHeader()||t;return this.doc.api.addAnnotObjects(this.doc.getId(),this.getId(),e).then((function(t){var e=t[0];if(o.info.markedStatesSummary.length){var r=n.annotIdMap[e.objectNumber];return r.info=e,r}o.info.markedStatesSummary.push({objectNumber:e.objectNumber,id:e.objectNumber,index:e.index});var i=n.doc.engine.annotManager.get(e,n);return n.addAddonAnnot(i)})).then((function(e){return o.markedStates.push(e),r&&n.doc.engine.eventEmitter.emit(St.annotationMarkedStateAnnotAdd,e,o,i),r&&n.doc.engine.eventEmitter.emit(St.annotationUpdated,[t],n,_n.reviewStateUpdated),e}))},e.getViewportRect=function(){return this.doc.api.getViewportRect(this.doc.getId(),this.getId())},e.getMeasureScaleRatio=function(){return this.doc.api.getMeasureScaleRatio(this.doc.getId(),this.getId()).then((function(t){var e=t.scale,n=t.ratio,r=t.unit,i=n&&n.trim()?n.split(" = ").map((function(t){var e=t.split(" ");return{value:e[0],unit:e[1]}})):[];return{scale:e,ratio:n,ratioMap:i,unitName:r}}))},e.setMeasureScaleRatio=function(t,e,n,r){var i=this;if(!this.doc.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");if(n){var o=n.split(" = ").map((function(t){var e=t.split(" ");return{value:e[0],unit:e[1]}}));if(2!==o.length||!o.every((function(t){return/^[+-]?(0|([1-9]\d*))(\.\d+)?$/.test(t.value)}))||!o.every((function(t){return Mi[t.unit]})))throw new Error("Ratio format error. Please refer to: 1 inch = 1 ft")}return this.doc.api.setMeasureScaleRatio(this.doc.getId(),this.getId(),t,{unit:e,ratio:n,scale:r}).then((function(t){return i.doc.engine.eventEmitter.emit(St.pageMeasureScaleRatioChanged,i),i.getAnnotsByObjectNumArray(t)}))},e.getTransition=function(){return this.doc.api.getPageTransition(this.doc.getId(),this.getId())},e.isScannedPage=function(){return this.doc.api.isScannedPage(this.doc.getId(),this.getId())},e.getPureTexts=function(){return this.doc.api.getPureTexts(this.doc.getId(),this.getId())},e.getTexts=function(t){var e=t.settings,n=t.minWidth;return this.doc.api.getPageTexts(this.doc.getId(),this.getId(),e,n)},e.handleGroupMarkup=function(t,e){var n=this,r=this.doc,i=this.getId();if(!r.checkPermission(Tn.modify)&&!r.checkPermission(Tn.annotForm))throw new Error("Permission error");return r.api.handleGroupMarkup(r.getId(),i,t,e).then((function(e){var i=t.map((function(t){var r=n.annotIdMap[t];return r.info=e[t],r.reviseSummary((function(t){return n.annotIdMap[t]}))}));Promise.all(i).then((function(t){n.doc.engine.eventEmitter.emit(St.docModified,r),n.doc.engine.eventEmitter.emit(St.annotationUpdated,t,n)}))}))},e.getTextInRect=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.doc;if(!n.checkPermission(Tn.extract))throw new Error("Permission error");if(n.isStaticXFA())throw new Error("File type error, current is Static documents");return this.doc.api.getTextInRect(this.doc.getId(),this.getId(),t,e)},e.scaleClipRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.transformClipRect(t,e,0,0)},e.translateClipRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.transformClipRect(1,1,t,e)},e.transformClipRect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.doc.api.transformPage(this.doc.getId(),this.getId(),{scaleX:t,scaleY:e,translateX:n,translateY:r})},t}(),Kv=["highlight","strikeout","underline","squiggly","caret","text","fileattachment","freetext","ink","line","link","circle","square","polygon","polyline","stamp","screen"];function Jv(t,e){return t.getIndex()>e.getIndex()?1:-1}var Xv=zv,Zv=function(){function t(t,e,n){this.doc=t,this.form=e,this.info=n,this.controls=[],this.updateControls(this.info.controls)}var e=t.prototype;return e.destroy=function(){this.doc=null,this.form=null,this.controls.forEach((function(t){return t.destroy()})),this.controls=[],this.info=null},e.getWidget=function(t){return this.controls[t].getWidget()},e.getLoadedWidgets=function(){return this.controls.map((function(t){return t.getWidget()})).filter((function(t){return t}))},e.getIndex=function(){return this.info.index},e.updateWidgetsUI=function(t,e,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return Promise.resolve()},a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!this.doc)return Promise.resolve();-1!==["value","comb","multiline","choiceMultiSelect","comboEdit","maxLength","hidden","password","readonly","required","noScroll","clearItems","deleteItems","setItems","icon","insertItemAt"].indexOf(n)&&this.doc.engine.eventEmitter.emit(St.formValueChanged);var s=[];return this.controls.forEach((function(t){var e,c=t.getWidget();c?(e=i.form.addTask((function(t){return o(c).then((function(t){return c.updateUI({type:n,value:r})}))}),a),s.push(e)):s.push(i.form.addTask((function(e){return t.updateProperty(n,r).then((function(e){t.info&&t.info.objectNumber>0&&t.getWidgetAnnot().then((function(t){if(t)return o(t)}))}))}),a))})),Promise.all(s).then((function(t){return!0}))},e.getControlById=function(t){for(var e=0;e<this.controls.length;e++){var n=this.controls[e];if(n.info.objectNumber==t)return n}},e.getPDFForm=function(){return this.form},e.getName=function(){return this.info.name},e.getAlternateName=function(){return this.info.alternateName},e.setAlternateName=function(t){var e=this;this.form.checkFillPerm(),this.info.alternateName=t,this.update("alternateName",t).then((function(t){return e.triggerUpdateEvent(_n.formFieldAlternateName),t}))},e.getType=function(){return this.info.type},e.getFlags=function(){return this.info.flag},e.setFlags=function(t){var e=this;this.form.checkFillPerm();var n={};Object.entries(Nn).forEach((function(e){"number"==typeof e[1]&&(t&Nn[e[0]])>0?n[e[0]]=!0:n[e[0]]=!1}));for(var r=Promise.resolve(),i=Object.keys(n),o=this.getType()==Ln.RadioButton,a=this.info.flag,s=0,c=Object.entries(n);s<c.length;s++){var u=S()(c[s],2),d=u[0],l=u[1];"Hidden"!==d&&(l?a|=Nn[d]:a&=~Nn[d])}this.info.flag=a;var h=E()(Object.keys(Nn)).filter((function(t){return["NoExport","CommitOnSelChange"].every((function(e){return e!==t}))}));E()(i).filter((function(t){return-1!==h.indexOf(t)})).length&&this.doc.engine.eventEmitter.emit(St.formValueChanged);for(var f=[],p={ReadOnly:"readonly",Required:"required",Hidden:"hidden",TextMultiline:"multiline",TextPassword:"password",TextDoNotSpellCheck:"noSpellCheck",TextDoNotScroll:"noScroll",TextComb:"comb",ComboEdit:"comboEdit",ChoiceMultiSelect:"choiceMultiSelect"},g=function(t){var r=void 0,a=void 0,s=function(){return Promise.resolve()};o&&"ButtonRadiosInUnison"==i[t]?(r="value",a=e.getValue()):(r=p[i[t]],a=n[i[t]]),"hidden"==r&&(s=function(t){var e=t.info.flag;return a?(e&=-2,e&=-33,e|=6):(e&=-2,e&=-3,e&=-33,e|=4),t.setFlagValue(e)}),e.controls.forEach((function(t){var n,i=t.getWidget();i?(n=s(i).then((function(t){return i.updateUI({type:r,value:a})})),f.push(n)):f.push(e.form.addTask((function(e){return t.updateProperty(r,a)})))}))},v=0;v<i.length;v++)g(v);r.then((function(t){var n=[];return e.controls.forEach((function(t){t.getWidget()&&n.push(e.update("flag",e.info.flag))})),Promise.all(n)})).then((function(t){return e.triggerUpdateEvent(_n.flagsUpdated),Promise.all(f).then((function(t){return!0}))}))},e.setComb=function(t){var e=this;this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.TextComb:this.info.flag&~Nn.TextComb,this.updateWidgetsUI(this.form,this.info.name,"comb",t),this.update("flag",this.info.flag).then((function(){e.triggerUpdateEvent(_n.flagsUpdated)}))},e.setMultiline=function(t){var e=this;this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.TextMultiline:this.info.flag&~Nn.TextMultiline,this.updateWidgetsUI(this.form,this.info.name,"multiline",t),this.update("flag",this.info.flag).then((function(){e.triggerUpdateEvent(_n.flagsUpdated)}))},e.setChoiceMultiSelect=function(t){var e=this;this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.ChoiceMultiSelect:this.info.flag&~Nn.ChoiceMultiSelect,this.updateWidgetsUI(this.form,this.info.name,"choiceMultiSelect",t),this.update("flag",this.info.flag).then((function(){e.triggerUpdateEvent(_n.flagsUpdated)}))},e.setComboEdit=function(t){var e=this;this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.ComboEdit:this.info.flag&~Nn.ComboEdit,this.updateWidgetsUI(this.form,this.info.name,"comboEdit",t),this.update("flag",this.info.flag).then((function(){e.triggerUpdateEvent(_n.flagsUpdated)}))},e.update=function(t,e){var n=this;return this.form.addTask((function(r){return n.doc.api.updateField(n.doc.id,n.info.name,t,e)}))},e.getValue=function(){return this.info&&String(this.info.value).length>0?this.info.value:""},e.getValueIndex=function(){if(!this.info)return-1;for(var t=this.info.options,e=0;e<t.length;e++)if(t[e].value==this.info.value)return e;return-1},e.getDefaultValue=function(){return this.info?this.info.defaultValue:""},e.setDefaultValue=function(t){return this.form.checkFillPerm(),this.update("defaultValue",t),this.info.defaultValue=t},e.getAlignment=function(){return this.info.alignment},e.setAlignment=function(t){var e=this;if(this.form.checkFillPerm(),1!==this.getType()){var n;switch(+t){case 0:n="left";break;case 1:n="center";break;case 2:n="right";break;default:throw new Error("Unknown alignment: "+t)}return this.updateWidgetsUI(this.form,this.info.name,"align",n,(function(e){return e.updateMKProperty("alignment",+t)})).then((function(n){return e.update("align",t),e.info.alignment=t}))}},e.setAlignmentWithString=function(t,e){return this.form.checkFillPerm(),this.updateWidgetsUI(this.form,this.info.name,"align",e||t),this.update("align",t),this.info.alignment=t},e.getBorderStyle=function(){var t=this.controls[0].getWidget(),e=0;switch(t&&(e=t.getBorderStyle()),e){case 0:return"solid";case 1:return"dashed";case 2:return"underline";case 3:return"beveled";case 4:return"inset"}},e.getRotation=function(){var t=this.controls[0].getWidget(),e=0;return t&&(e=t.getRotation()),-90*e},e.setBorderStyle=function(t){var e,n;switch(this.form.checkFillPerm(),t){case"solid":n=0;break;case"dashed":n=1,e=[3,3];break;case"underline":n=2;break;case"beveled":n=3,t="outset";break;case"inset":n=4;break;default:return}return this.setBorderStyleWithParam(n,t,e)},e.setBorderStyleWithParam=function(t,e,n){return this.updateWidgetsUI(this.form,this.info.name,"borderStyle",e,(function(e){return e.setBorderStyle(t,n)}))},e.setBorderWidth=function(t){var e,n=this;switch(this.form.checkFillPerm(),t){case"thin":e=1;break;case"medium":e=2;break;case"thick":e=3;break;default:return}return this.updateWidgetsUI(this.form,this.info.name,"borderWidth",t,(function(t){var r=t.setBorderWidth(e);return n.form.engine.eventEmitter.emit(St.annotationUpdated,[t],t.getPDFPage(),_n.borderWidthUpdated),r}))},e.setBorderColor=function(t){var e=this;return this.form.checkFillPerm(),t=0===t?0:xn(t,"int"),this.form.addTask((function(n){return e.updateWidgetsUI(e.form,e.info.name,"borderColor",t,(function(n){var r=n.setMKProperty("borderColor",t);return e.form.engine.eventEmitter.emit(St.annotationUpdated,[n],n.getPDFPage(),_n.borderColorUpdated),r}))}))},e.getBorderColor=function(){var t=this.controls[0].getWidget();return t?t.getMKProperty("borderColor"):0},e.setFillColor=function(t){var e=this;return this.form.checkFillPerm(),t=0===t?t:xn(t,"int"),this.form.addTask((function(n){return e.updateWidgetsUI(e.form,e.info.name,"fillColor",t,(function(n){var r=n.setMKProperty("fillColor",t);return e.form.engine.eventEmitter.emit(St.annotationUpdated,[n],n.getPDFPage(),_n.fillColorUpdated),r}))}),!0)},e.getFillColor=function(){var t=this.controls[0].getWidget();return t?t.getMKProperty("fillColor"):0},e.getOptions=function(){return this.info.options||[]},e.getMaxLength=function(){return this.info.maxLength},e.setMaxLength=function(t){var e=this;return this.form.checkFillPerm(),this.getType()!==Ln.Text?0:(this.info.maxLength=t,this.form.addTask((function(n){return e.triggerUpdateEvent(_n.formFieldsMaxLengthUpdated),e.updateWidgetsUI(e.form,e.info.name,"maxLength",t)})),this.update("maxLength",t),t)},e.setValueWithoutAction=function(t){this.info&&(this.info.value=t instanceof Array?t:""+t)},e.syncValue=function(t){var e=this;if(!this.info)return Promise.resolve();this.info.value=t;var n=this.info.name;return this.doc.api.setFieldValue(this.doc.id,n,t).then((function(r){return e.triggerUpdateEvent(_n.formFieldValueUpdated,"value"),e.updateWidgetsUI(e.form,n,"value",t)}))},e.setValue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.setValueEx(t,e)},e.setValueEx=function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t=r?r.info.objectNumber:this.controls[0].info.objectNumber,!this.doc.checkPermission(Tn.fillForm|Tn.annotForm))throw new Error("Permission error");var o=this.getType();if(7===o||1===o)return Promise.resolve();var a=o==Ln.RadioButton||o==Ln.CheckBox,s=o==Ln.ListBox;if(a){var c=!1;this.info.controls.forEach((function(t){if(t.exportValue==n)t.isChecked=!0,c=!0;else{var r=e.getControlById(t.objectNumber),i=r.widget&&r.widget.info.ApStates;i&&i.indexOf(n)>-1&&(c=!0),t.isChecked=!1}})),c||(n="Off")}var u=this.getOptions();if(s&&i){if(Array.isArray(n)){for(var d=!0,l=function(t){if(!u.find((function(e){return e.value===n[t]})))return d=!1,"break"},h=n.length;h--;){var f=l(h);if("break"===f)break}d||(n="")}else u.find((function(t){return t.value===n}))||(n="");u.forEach((function(t){(Array.isArray(n)?n.indexOf(t.value)>-1:t.value==n)?t.selected=!0:t.selected=!1}))}if(Array.isArray(n)||(n=""+n),this.info.value==n&&!a)return Promise.resolve(n);this.info.value=n;var p=this.info.name;return this.doc.api.setFieldValue(this.doc.id,p,n).then((function(r){var i=Promise.resolve();return a&&e.controls.forEach((function(e){var r=e.getWidget();r&&(i=r.update().then((function(e){return r.setAS(n,t)})))})),e.NeedExecuteValidateAction=!0,i.then((function(t){return e.updateWidgetsUI(e.form,p,"value",n)})).then((function(){e.triggerUpdateEvent(_n.formFieldValueUpdated,"value"),e.NeedExecuteValidateAction=!1}))}))},e.triggerUpdateEvent=function(t,e){if(this.form&&this.form.engine){var n=this.form.engine.eventEmitter;this.controls.forEach((function(r){var i=r.getWidget();i&&n.emit(St.annotationUpdated,[i],i.getPDFPage(),t,e)}))}},e.setValueByIndex=function(t){this.form.checkFillPerm();var e=this.info.options[t].value;return this.setValue(e),t},e.setHidden=function(t){this.form.checkFillPerm(),this.updateWidgetsUI(this.form,this.info.name,"hidden",t,(function(e){var n=e.info.flag;return t?(n&=-2,n&=-33,n|=6):(n&=-2,n&=-3,n&=-33,n|=4),e.setFlagValue(n)}),!0)},e.setPassword=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.TextPassword:this.info.flag&~Nn.TextPassword,this.updateWidgetsUI(this.form,this.info.name,"password",t),this.update("flag",this.info.flag)},e.setReadonly=function(t){return this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.ReadOnly:this.info.flag&~Nn.ReadOnly,this.updateWidgetsUI(this.form,this.info.name,"readonly",t),this.update("flag",this.info.flag)},e.setRequired=function(t){return this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.Required:this.info.flag&~Nn.Required,this.updateWidgetsUI(this.form,this.info.name,"required",t),this.update("flag",this.info.flag)},e.setNoScroll=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.TextDoNotScroll:this.info.flag&~Nn.TextDoNotScroll,this.updateWidgetsUI(this.form,this.info.name,"noScroll",t),this.update("flag",this.info.flag)},e.setNoSpellCheck=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|Nn.TextDoNotSpellCheck:this.info.flag&~Nn.TextDoNotSpellCheck,this.updateWidgetsUI(this.form,this.info.name,"noSpellCheck",t),this.update("flag",this.info.flag)},e.setInUnison=function(t){var e=this;this.form.checkFillPerm();var n=Promise.resolve();if(t)this.info.flag=this.info.flag|Nn.ButtonRadiosInUnison;else{this.info.flag=this.info.flag&~Nn.ButtonRadiosInUnison;var r=this.info.controls[0].exportValue;n=n.then((function(t){return e.doc.api.setFieldValue(e.doc.id,e.getName(),r)}))}n.then((function(t){return e.update("flag",e.info.flag)})).then((function(t){e.triggerUpdateEvent(_n.flagsUpdated);var n=e.getValue();e.updateWidgetsUI(e.form,name,"value",n)}))},e.setMKProperty=function(t,e){this.updateWidgetsUI(this.form,this.info.name,t,e,(function(n){return n.setMKProperty(t,e)}))},e.clearItems=function(){this.form.checkFillPerm(),this.info.options.length=0,this.info.value="",this.updateWidgetsUI(this.form,this.info.name,"clearItems"),this.update("clearItems")},e.deleteItems=function(t){this.form.checkFillPerm(),t<0||t>=this.info.options.length||(this.info.options[t].value==this.info.value&&(this.info.value=""),this.info.options.splice(t,1),this.updateWidgetsUI(this.form,this.info.name,"deleteItems",t),this.update("deleteItems",t))},e.insertItemAt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.form.checkFillPerm();var r=this.info.options;-1==n&&(n=r.length),e||(e=t);var i=n==r.length?n-1:n;r[i]&&r[i].value==e?this.info.value=e:(this.info.options=[].concat(r.slice(0,n),{label:t,value:e,defaultSelected:!1,selected:!1},r.slice(n,r.length)),this.info.value=e,this.updateWidgetsUI(this.form,this.info.name,"insertItemAt",n),this.update("insertItemAt",{index:n,label:t,value:e,defaultSelected:!1,selected:!1}))},e.showDisplayValue=function(t){if(!this.form||!this.info)return Promise.resolve();this.updateWidgetsUI(this.form,this.info.name,"displayValue",t)},e.getAction=function(t){if(!this.engineActions)for(var e in this.engineActions={},this.info.AA)this.engineActions[e]=this.doc.engine.actionFactory.createAction(this.info.AA[e],this.doc);return this.engineActions[t]},e.getDAFontSize=function(){return this.info.DA.textSize},e.getDAFontColor=function(){return this.info.DA.textColor},e.isDAFontEmbedded=function(){return this.info.DA.isEmbedded},e.getDAFontBuffer=function(){return this.doc.api.getFontBufferByName(this.doc.id,this.info.DA.fontName)},e.setDAFontColor=function(t){this.form.checkFillPerm();var e=xn(t,"int");return this.info.DA.textColor=e,this.updateWidgetsUI(this.form,this.info.name,"textColor",xn(t,"HTML"),(function(t){return t.updateMKProperty("fontColor",e)})),this.update("textColor",e),e},e.setDAFontColorAsync=function(t){var e=this;this.form.checkFillPerm();var n=xn(t,"int");return this.info.DA.textColor=n,this.updateWidgetsUI(this.form,this.info.name,"textColor",xn(t,"HTML"),(function(t){return t.updateMKProperty("fontColor",n)})).then((function(){return e.update("textColor",n)})).then((function(){return n}))},e.getControlByIndex=function(t){return this.controls[t]},e.removeControlInfo=function(t){var e;for(this.form.checkFillPerm(),e=0;e<this.info.controls.length;e++){if(this.info.controls[e].objectNumber==t){this.info.controls.splice(e,1);break}}return this.controls[e].destroy(),this.controls.splice(e,1),this.info.controls.length},e.getControlsCount=function(){return this.info.controls.length},e.focus=function(){var t=this.controls[0].getWidget();t&&t.updateUI({type:"focus"})},e.getControlExportValues=function(t){return this.info.controls[t].exportValue},e.getExportValues=function(){for(var t=[],e=0;e<this.info.controls.length;e++)t.push(this.info.controls[e].exportValue);return t},e.setExportValue=function(t,e){var n=this,r=this.info.controls[t];return r.exportValue=e,this.doc.api.updateFormControl(this.doc.id,this.getName(),r.objectNumber,"exportValue",e).then((function(t){n.triggerUpdateEvent(_n.formFieldExportValueUpdated,"exportValue"),t.forEach((function(t,e){var r=n.controls[e];r.setExportValue(t);var i=r.getWidget();if(i)return i._update().then((function(t){return i.updateUI({})}))}))}))},e.setWidgetDisplay=function(t,e){return this.updateWidgetsUI(this.form,this.info.name,"display",t,(function(n){return n.setDisplay(t,e)}),!0)},e.setIconObj=function(t,e){this.form.checkFillPerm(),this.updateWidgetsUI(this.form,this.info.name,"icon",null,(function(n){return n.setIconObj(t,e)}))},e.setOptions=function(t){var e=this;if(this.form&&(this.form.checkFillPerm(),4===this.getType()||5===this.getType())){t.length>0&&!t.some((function(t){return t.selected}))&&(t[0].selected=!0),this.info.options=t;var n=this.update("setItems",this.info.options);return arguments[1]?n:n.then((function(n){e.info.defaultValue=n.defaultValue;for(var r=e.info.value,i=0;i<t.length;i++)if(t[i].selected){r=t[i].value;break}return e.info.options=n.options,e.setValueEx(r,null,!1)})).then((function(){var t=e.updateWidgetsUI(e.form,e.info.name,"setItems");return e.triggerUpdateEvent(_n.formFieldItemsUpdated),t}))}},e.setItems=function(t){var e=this;this.form.checkFillPerm();var n=Array.from(new Set(t.map((function(t){return JSON.stringify(t)}))));t=n.map((function(t){return JSON.parse(t)}));var r=[];return t.forEach((function(t){Array.isArray(t)?t[0]&&r.push({label:t[0].toString(),value:t[1].toString(),selected:t[2]||!1,defaultSelected:t[3]||!1}):t&&r.push({label:t.toString(),value:t.toString(),selected:!1,defaultSelected:!1})})),r.length?new Promise((function(t){e.form.addTask((function(n){t(e.setOptions(r))}))})):Promise.resolve()},e.setDisplayValue=function(t){return this.displayValue=t,this.update("displayValue",t)},e.getDisplayValue=function(){return this.displayValue},e.setRect=function(t){this.rect=t,this.updateWidgetsUI(this.form,this.info.name,"rect",t,(function(e){return e.setRect(t)}))},e.updateControls=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;e<t.length;e++){var n=this.controls[e];n?n.info=t[e]:(n=new Ii(this.doc,this,t[e]),this.controls.push(n))}this.info.controls=t},e.setAction=function(t,e){var n=this;if(-1!=t&&(t-Je.keyStroke|Je.onBlur-t)<0)throw new Error("Trigger error. Please refer to Constant Action_Trigger");if(!e)throw new Error("Action should not be null.");this.form.checkDesignPerm();var r=e.info;if("string"==typeof e){var i=new gi;i.setScript(e),r=(e=i).info}var o=this.info.name,a={trigger:t,data:r,field:o};if(t>6&&t<11){var s=this.getAction(t);return this.update("AA",a).then((function(r){n.triggerEvents(St[s?"actionUpdated":"actionAdd"]),n.triggerUpdateEvent(_n[s?"formFieldActionUpdated":"addAction"]);var i=n.doc;e.init(r,i.engine.actionFactory,i,i.api,i.engine.eventEmitter,n),t==Je.calculate&&n.form.addCO(n),n.info.AA[t]=r,n.engineActions&&(n.engineActions[t]=e)}))}return this.updateWidgetsUI(this.form,o,"action",a,(function(n){return n.setAction(t,e)}))},e.triggerEvents=function(t){if(this.form&&this.form.engine){var e=this.form.engine.eventEmitter;this.controls.forEach((function(n){var r=n.getWidget();r&&e.emit(t,[r])}))}},e.removeAction=function(t){var e=this.info.name,n={trigger:t,data:null,field:e};return t==Je.calculate&&this.form.removeFieldInCO(e),this.updateWidgetsUI(this.form,e,"action",n,(function(e){return e.removeAction(t)}))},e.hasControl=function(t){return this.info.controls.some((function(e){return e.objectNumber==t}))},e.getBorderWidth=function(){var t=this.controls[0].getWidget();return t?t.getBorderWidth():0},t}();function Qv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qv(Object(n),!0).forEach((function(e){R()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var em=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}O()(e,t);var n=e.prototype;return n.isSigned=function(){return this.info.isSigned},n.getByteRange=function(){return this.info.byteRange},n.getFilter=function(){return this.info.filter},n.getSubfilter=function(){return this.info.subfilter},n.getSigner=function(){return this.info.signer},n.setLockAction=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Array.isArray(n)||(n=n.split(",")),this.form.addTask((function(r){return e.doc.api.setLockAction(e.doc.id,e.info.name,t,n).then((function(r){return e.info.lockAction={type:t,fields:n}}))}))},n.getLockAction=function(){return this.info.lockAction},n.Verify=function(t){var e=this;return this.form.addTask((function(n){return e.doc.engine.ensureSideModeLoaded().then((function(n){return e.doc.api.VerifySignature(e.doc.id,e.info.name,t)}))}))},n.verifySignatureLtv=function(t){var e=this;return this.form.addTask((function(n){return e.doc.engine.ensureSideModeLoaded().then((function(n){return e.doc.api.verifySignatureLtv(e.doc.id,e.info.name,t)}))}))},n.clearSignature=function(t){var e=this;return this.form.addTask((function(n){return e.doc.engine.ensureSideModeLoaded().then((function(n){return e.doc.api.clearSignature(e.doc.id,e.info.name,t)}))}))},n._getDigitalSignatureInfo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.form.addTask((function(n){return t.doc.engine.ensureSideModeLoaded().then((function(n){return t.doc.api.getDigitalSignatureInfo(t.doc.id,t.info.name,e)}))}))},n.getDigitalSignatureInfo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(){var r=D()(N.a.mark((function r(i,o){var a,s,c,u,d,l,h,f,p,g,v,m,y,w,b,A,P,E,x,S,C,D,I,R,T,_,k,F,M;return N.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a={},s={},c=t.info,u=c.isSigned,d=c.signer,l=c.originalSigner,h=void 0===l?d:l,!u){r.next=19;break}return r.prev=4,r.next=7,t._getDigitalSignatureInfo(e);case 7:s=r.sent,f=s.certificateInfo,p=(f=void 0===f?{}:f).subjectChain,d=(d=((g=void 0===p?[]:p)[g.length-1]||{}).subjectName||"")||h,r.next=19;break;case 15:r.prev=15,r.t0=r.catch(4),s={},console.error(r.t0);case 19:if(!n){r.next=30;break}return v=t.info,m=v.name,y=v.signTimeFormat,w=v.location,b=v.reason,A=v.contact,P=v.DN,E=v.text,x=v.isCertified,S=v.fileSizeOfSignedVersion,C=v.signedVersion,D=v.isVisible,I=v.filter,R=v.subfilter,T=v.creatorName,_={name:m,isSigned:u,isVisible:D},u&&(k={signTime:y,originalSigner:h,signer:d,location:w,reason:b,contact:A,DN:P,text:E,isCertified:x,fileSizeOfSignedVersion:S,signedVersion:C,filter:I,subfilter:R,creatorName:T},_=tm(tm({},_),k),t.info=tm(tm(tm({},t.info),s),{},{signer:d,originalSigner:h})),r.next=25,t.getControlByIndex(0).getWidgetAnnot();case 25:F=r.sent,M={pageIndex:F?F.getPage().getIndex():0,top:F?F.info.rect.top:0,widgetId:F?F.getId():void 0},a=tm(tm(tm({},_),s),M),r.next=31;break;case 30:a=tm(tm({},t.signatureInfo||{}),s);case 31:i(a);case 32:case"end":return r.stop()}}),r,null,[[4,15]])})));return function(t,e){return r.apply(this,arguments)}}())},n.getBitmap=function(){return this.doc.api.getSignatureBitmap(this.doc.id,this.info.name)},e}(Zv),nm=function(){function t(t,e){this.doc=t,this.engine=e,this.api=e.api,this.fields=[],this.fieldsNameMap={},this.actionDepth=0,this.calculationEnabled=!0,this.queueTask=new kt,this.formInfo={}}var e=t.prototype;return e.destroy=function(){var t=this;this.doc=null,this.engine=null,this.api=null,this.fields.forEach((function(e){var n=e.getName();t.fieldsNameMap[n]=null,e.destroy()})),this.fields=[],this.fieldsNameMap=null},e.checkFillPerm=function(){if(!this.doc.checkPermission(Tn.annotForm|Tn.fillForm))throw new Error("Permission error")},e.checkDesignPerm=function(){if(!this.doc.checkPermission(Tn.annotForm)||!this.doc.checkPermission(Tn.modify))throw new Error("Permission error")},e.setState=function(t){this.state=t},e.reduceControl=function(t,e){var n=this;Object.keys(this.fieldsNameMap).forEach((function(t){e.forEach((function(e){var r=n.fieldsNameMap[t];r&&r.hasControl(e)&&n.removeControl(t,e,!1)}))}))},e.isEmpty=function(){return!this.fields.length},e.setActionHandler=function(t){this.actionHandler=t},e.setFormJson=function(t){if(this.isLoaded=!0,t){this.formInfo=t;for(var e=0,n=t.fields.length;e<n;e++){var r=t.fields[e],i=this.fieldsNameMap[r&&r.name||e];i?i.updateControls(r.controls):(i=7==r.type?new em(this.doc,this,r):new Zv(this.doc,this,r),this.fields.push(i),this.fieldsNameMap[r&&r.name||e]=i)}}else this.formInfo={fields:[]}},e.reloadPDFFieldByName=function(t){var e=this;return this.api.reloadFieldByName(this.doc.id,t).then((function(n){return e.updatePDFField(t,n),n}))},e.updatePDFField=function(t,e){var n=this.fieldsNameMap[t];n&&(n.updateControls(e.controls),n.info=e,this.fieldsNameMap[t].info=e)},e.getAlignment=function(){return this.formInfo.alignment},e.getFieldCount=function(){return this.fields.length},e.getField=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.fieldsNameMap[t];if(!e||n)return n;var r=[];for(var i in this.fieldsNameMap)i.startsWith(t)&&r.push(this.fieldsNameMap[i]);return r},e.getFieldByIndex=function(t){return this.fields[t]},e.getFieldAtPosition=function(t,e,n){var r=this.fields.filter((function(e){var n=e.getWidget(0);return!!n&&n.getPDFPage().getIndex()===t}));if(r)for(var i=0;i<r.length;i++){var o=r[i];if(o.getLoadedWidgets().some((function(t){var r=t.getRect();return!(e<r.left||e>r.right||n<r.bottom||n>r.top)})))return o}},e.setFieldValue=function(t,e){if(this.checkFillPerm(),"string"==typeof t&&(t=this.fieldsNameMap[t]),t.setValue(e),this.actionDepth++,this.actionDepth<2){var n=this.formInfo.calculationOrder;for(var r in n){var i=this.getField(n[r]),o=i.getAction(Zi.FieldRecalculateValue);o&&this.actionHandler&&this.actionHandler(o,t,i,Zi.FieldRecalculateValue)}}this.actionDepth--},e.calculate=function(t){if(this.checkFillPerm(),this.calculationEnabled){if("string"==typeof t&&(t=this.fieldsNameMap[t]),this.actionDepth++,this.actionDepth<2){var e=this.formInfo.calculationOrder;for(var n in e){var r=this.getField(e[n]),i=r.getAction(Zi.FieldRecalculateValue);i&&this.actionHandler&&this.actionHandler(i,t,r,Zi.FieldRecalculateValue)}}this.actionDepth--}},e.resetForm=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;this.checkFillPerm(),this.enumFields(e,n,(function(e,n,r){var i=t.getField(n),o=i.getDefaultValue();if(6===i.getType()){var a=i.getMaxLength();o.length>a&&0!=a&&(o=o.substring(0,a))}i.setValue(o)}),!0),r&&this.calculate(r)},e.submitForm=function(t,e,n){var r,i=this,o=On.getType(n),a="application/json";switch(o){case"HTML":this.enumFields(e,n,(function(t,e,n){data+=e+"="+n+"&"})),t+="?"+encodeURI(data.substr(0,data.length-1)),r=Promise.resolve("");break;case"FDF":a="application/vnd.fdf",r=Promise.resolve(new Blob([this.exportFDF(e,n)]));break;case"XFDF":a="application/vnd.xfdf",r=Promise.resolve(new Blob([this.exportXFDF(e,n)]));break;case"PDF":var s=[];r=this.doc.getStream((function(t){var e=t.arrayBuffer;t.offset,t.size;s.push(e)})).then((function(t){return new Blob(s,{type:"application/pdf"})}))}return r.then((function(e){var r=On.isGetMethod(n);var o=new XMLHttpRequest;o.open(r?"GET":"POST",t),o.setRequestHeader("Content-Type",a),o.send(e),o.onloadend=function(){var t=o.response.match(/\/JavaScript <<\/Before\s\(([\s\S]*?)\)>>/);if(t){t=t[1];var e=new gi;e.setScript(t),i.actionHandler(e,null,null,-1)}}}))},e.enumFieldsEx=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=On.isExclude(e);if(a){var s=Object.keys(this.fieldsNameMap);if(0==(t=s.filter((function(e){return-1==t.indexOf(e)}))).length)return}0==t.length&&(t=Object.keys(this.fieldsNameMap));for(var c=r?1:On.isIncludeNoValueFields(e),u=0;u<t.length;u++){var d=t[u],l=this.getField(d);if(l){var h=l.getType(),f=l.getValue();if(o&&(h===Ln.RadioButton||h===Ln.CheckBox)){for(var p="Off",g=0;g<l.getControlsCount();g++)if(l.getControlByIndex(g).info.isChecked){p=l.getControlByIndex(g).getExportValue();break}f=p}var v=0;r||(v=(v=Nn.isNoExport(l.getFlags()))||!f&&!c),(i||h!=Ln.Sign&&h!=Ln.PushButton&&!v)&&n(h,l.getName(),f||"")}}},e.enumFields=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.enumFieldsEx(t,e,n,r,i,!1)},e.exportFDF=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[37,70,68,70,45,49,46,50,10,49,32,48,32,111,98,106,10,60,60,47,70,68,70,60,60,47,70,40];rm(n,this.getFileName()),rm(n,")/Fields["),this.enumFieldsEx(t,e,(function(t,e,r){switch(rm(n,"<</T("),rm(n,e,!0),rm(n,")/V"),t){case Ln.CheckBox:case Ln.RadioButton:rm(n,"/"),rm(n,r,!0);break;default:rm(n,"("),rm(n,r),rm(n,")")}rm(n,">>")}));var r="]/ID[<".concat(this.doc.info.fileID[0],"><").concat(this.doc.info.fileID[1],">]/UF(").concat(this.getFileName(),")>>")+"/Type/Catalog>>\nendobj\ntrailer\n<</Root 1 0 R>>\n%%EOF";return rm(n,r),new Uint8Array(n)},e.xmlEncodeText=function(t){return t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;").replace('"',"&quot;")},e.getFileName=function(){return this.doc.info.fileName||""},e.exportXFDF=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r='<?xml version="1.0" encoding="UTF-8"?>\n<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">\n'+'<f href="'.concat(this.xmlEncodeText(this.getFileName()),'"/><fields>\n'),i='</fields>\n<ids original="'.concat(this.doc.info.fileID[0],'" modified="').concat(this.doc.info.fileID[1],'"/>\n</xfdf>'),o="";return this.enumFieldsEx(e,n,(function(e,n,r){o+='<field name="'.concat(t.xmlEncodeText(n),'"><value>').concat(t.xmlEncodeText(r),"</value></field>")})),r+o+i},e.importFDF=function(t){this.checkFillPerm();var e=t.match(/<<\/T\([\s\S]*?\)(\/V[\s\S]*?)?>>/g);for(var n in e){var r=e[n].match(/<<\/T\(([\s\S]*?)\)(?:\/V\/?([\s\S]*?))?>>/);if(void 0!==r[2]){var i=this.getField(r[1]);if(!i)return;var o=r[2];o!==i.getValue()&&(o=i.getType()===Ln.CheckBox||i.getType()===Ln.RadioButton?im(o):im(o.match(/\(([\s\S]*)\)/)[1]),i.setValue(o))}}},e.importXFDF=function(t){this.checkFillPerm();var e=t.match(/<field\s*name=["|'][\s\S]*?["|']\s*?>\s*?(<value\s*?(\/>|>[\s\S]*?<\/value\s*?>))?\s*?<\/field\s*?>/g);for(var n in e){var r=e[n].match(/<field name=["|']([\s\S]*?)["|']\s*?>\s*?<value\s*?(?:\/>|>([\s\S]*?)<\/value\s*?>)/);if(r&&void 0!==r[2]){var i=this.getField(r[1]);if(!i)return;var o=r[2];o!==i.getValue()&&i.setValue(o)}}},e.exportXML=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n='<?xml version="1.0" encoding="UTF-8"?><fields xmlns:xfdf="http://ns.adobe.com/xfdf-transition/">',r="</fields>",i="",o={},a=0;return this.enumFieldsEx(t,e,(function(t,e,n){var r=e,s="",c=e.match(/[^0-9][a-zA-Z0-9:\-_\.]*/);c&&c[0].length!==e.length&&(r="fxTag"+e.replace(/[^a-zA-Z0-9]/g,""),s=' xfdf:original="'+e+'"'),isNaN(parseInt(r))||(r="fxTag"+e,s||(s=' xfdf:original="'+e+'"')),n=B()("<div/>").text(n).html();for(var u=r;u in o;)u=r+a,a+=1;o[u]=!0,i+="<"+r+s+">"+n+"</"+r+">\r"})),n+i+r},e.importXML=function(t){(this.checkFillPerm(),this.isEmpty())||("string"==typeof t&&(t=B.a.parseXML(t)),B()(t).children().children().each((function(){var t=getNodeString(B()(this),"xfdf:original");t&&""!==t&&0!==t.length||(t=this.tagName);var e=B()(this).text(),n=this.getField(t);n&&n.setValue(e)})))},e.upadateValue=function(t){var e=this;for(var n in t){var r=this.getField(n);if(r){var i=t[n],o=r.getType();if(i instanceof Array&&5==o)!function(){r.info.value=i;var t=r.info.options,n=[];i.forEach((function(e){for(var r=0;r<t.length;r++)r!=n[r]&&(t[r].selected=t[r].value===e)&&(n[r]=r)})),r.updateWidgetsUI(e,r.getName(),"value",i)}();else{if(i!==r.getValue()){if(r.info.value=i,4==o||5==o)r.info.options.forEach((function(t){t.selected=t.value===i}));r.updateWidgetsUI(this,r.getName(),"value",i)}2!=o&&3!=o||(r.info.controls.forEach((function(t){t.isChecked=t.exportValue==i})),r.updateWidgetsUI(this,r.getName(),"value",i,(function(t){return t.update()})))}}}},e.updateFields=function(t,e,n){switch(e){case"controlFlag":for(var r=0,i=Object.keys(this.fieldsNameMap);r<i.length;r++){var o=i[r];o.startsWith(t)&&this.fieldsNameMap[o].setWidgetDisplay(n)}}},e.addSignature=function(t,e,n,r){var i=this;return this.doc.api.addControl(this.doc.id,t,n||"",7,e,r).then((function(e){if(e.failed)throw new Error("Signature creation failed.");var n;return e.form?(i.setFormJson(e.form),n=i.getField(e.fieldName)):(n=new em(i.doc,i,e),i.fields.push(n),i.fieldsNameMap[e.name]=n),Promise.all([n,i.doc.getPageByIndex(t)]).then((function(t){var e=S()(t,2),n=e[0],r=e[1];return Promise.all([r,r.getUnloadedAnnots(),n])})).then((function(t){var e=S()(t,3),n=e[0],r=e[1],o=e[2],a=r.filter((function(t){return t.getType()===du.widget}));return i.doc.engine.eventEmitter.emit(St.annotationAdd,a,n),o}))}))},e.addControlSync=function(t){return this.addControl(t.pageIndex,t.fieldName,t.fieldType,t.rect),this.fieldsNameMap[t.fieldName]},e.addControl=function(t,e,n,r){var i=this;if(this.checkDesignPerm(),!this.isLoaded)throw new Error("please call PDFDoc.loadForm() firstly.");if(t<0||t>this.doc.getPageCount()-1||!e||!e.trim()||!n||n<1||n>6)return Promise.resolve({success:!1,newFieldName:e});var o,a=this.fieldsNameMap[e],s=!1;a||(o=am(e,n),this.formInfo.fields.push(o),(a=new Zv(this.doc,this,o)).setRect(r),this.fields.push(a),this.fieldsNameMap[o.name]=a,s=!0);var c=arguments[4];return this.addTask((function(u){return i.doc.api.addControl(i.doc.id,t,e,n,r,c).then((function(c){return s&&c.fieldName!==e&&(i.fields.pop(a),i.formInfo.fields.pop(o),e=c.fieldName,o=am(e,n),i.formInfo.fields.push(o),(a=new Zv(i.doc,i,o)).setRect(r),i.fields.push(a),i.fieldsNameMap[o.name]=a),c.form?i.setFormJson(c.form):a.updateControls(c.controls),c.fieldFlags&&(a.info.flag=c.fieldFlags),i.doc.getPageByIndex(t)})).then((function(t){return Promise.all([t,t.getUnloadedAnnots()])})).then((function(t){var n=S()(t,2),r=n[0],o=n[1].filter((function(t){return t.getType()===du.widget}));return i.doc.engine.eventEmitter.emit(St.annotationAdd,o,r),Promise.resolve({success:!0,newFieldName:e})}))}))},e.validateFieldName=function(t,e){return this.doc.api.validateFieldName(this.doc.id,t,e)},e.reloadForm=function(t){return t&&(this.fields.forEach((function(t){return t.destroy()})),this.fields=[],this.fieldsNameMap={},this.setFormJson(t),this.doc.pageCache.forEach((function(t){t.annots.forEach((function(t){"widget"==t.getType()&&t.mapFormControl()}))}))),t},e.renameField=function(t,e,n){var r=this,i=this.getField(t).controls.map((function(t){return t.getWidget()})).filter((function(t){return t}));return this.doc.api.renameField(this.doc.id,t,e).then((function(t){var e=i.map((function(t){return t.update()}));return e.push(t),Promise.all(e)})).then((function(t){return r.reloadForm(t[t.length-1])})).then((function(){return i.map((function(t){return t.updateUI({type:"rename"})}))}))},e.removeEngineField=function(t){delete this.fieldsNameMap[t];var e=0;this.fields.forEach((function(n,r){if(n.getName()==t)return e=r,!1})),this.fields.splice(e,1),this.formInfo.fields.splice(e,1),this.removeFieldInCO(t)},e.removeField=function(t){var e=this;if(this.checkDesignPerm(),!this.fieldsNameMap[t])return Promise.resolve(!1);var n=this.getField(t);if(n.getType()==Ln.Sign&&n.isSigned())throw new Error("Signed signature can't be removed.");return n.getLoadedWidgets().map((function(t){if(t){var n=t.getPage();n.clearAnnotIds([t.getId()]),e.doc.engine.eventEmitter.emit(St.annotationRemoved,[t],n)}})),this.removeFieldInCO(t),this.removeEngineField(t),this.queueTask.waitForCurrentRunningTasks().then((function(n){return e.doc.api.removeField(e.doc.id,t)}))},e.removeControlByIndex=function(t,e){var n=this.getField(t).getControlByIndex(e);this.removeControl(t,n.info.objectNumber)},e.removeControl=function(t,e){this.checkDesignPerm();var n=!(arguments.length>2)||arguments[2],r=0,i=this.getField(t).getControlById(e),o=i.getWidget();if(o){var a=o.getPage();a.clearAnnotIds([o.getId()]),this.doc.engine.eventEmitter.emit(St.annotationRemoved,[o],a)}var s=this.fieldsNameMap[t].removeControlInfo(e);return 0==s&&this.removeEngineField(t),n?this.doc.api.removeControl(this.doc.id,r,t,e):Promise.resolve()},e.fixPageFields=function(t){return this.doc.api.fixPageFields(this.doc.id,t)},e.getControlCount=function(t){return this.doc.api.getControlCount(this.doc.id,t)},e.setFieldsValue=function(t,e,n){return!0!==n&&this.doc.engine.eventEmitter.emit(St.formValueChanged),this.doc.api.setFieldsValue(this.doc.id,t,e)},e.addTask=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"!=typeof t)return Promise.resolve();if("jsInited"==this.state&&!e)return Promise.resolve(t());var n=this.queueTask.exec(t);return n.catch((function(t){return console.error(t)})),n},e.addCO=function(t){var e=t.getName(),n=this.formInfo.calculationOrder;-1==n.indexOf(e)&&(n.push(e),this.doc.api.setCO(this.doc.id,n),this.doc.engine.eventEmitter.emit(St.COChange,n))},e.countField=function(t){var e=0;return this.fields.forEach((function(n){n.getType()==t&&e++})),e},e.afterRemovePage=function(t){this.fields=this.fields.filter((function(e){var n=e.controls.filter((function(e){var n=e.getWidget();return(n&&n.getPage().getIndex())!==t}));return n.length>0&&(e.controls=n,!0)})),this.updateFieldsNameMap()},e.updateFieldsNameMap=function(){var t=this;this.fieldsNameMap={},this.fields.forEach((function(e){t.fieldsNameMap[e.getName()]=e}))},e.afterMovePage=function(t,e){var n=!0;t>e&&(n=!1),this.fields.forEach((function(r){r.controls.forEach((function(r){var i=r.info.pageIndex;i!=t?n?i>t&&i<=e&&(r.info.pageIndex-=1):i>=e&&i<t&&(r.info.pageIndex+=1):r.info.pageIndex=e}))}))},e.afterInsertPage=function(t){var e=this;this.doc.pageCache[t].getAnnotTree().then((function(n){n.forEach((function(t){if("widget"==t.getType()){var n=t.getField();if(n){var r=e.fields.findIndex((function(t){return t.getName()==n.getName()}));n.updateControls(n.info.controls),r>-1?e.fields.splice(r,1,n):e.fields.push(n)}}})),e.fields.forEach((function(e){e.controls.forEach((function(e){e.info.pageIndex>=t&&(e.info.pageIndex+=1)}))})),e.updateFieldsNameMap()}))},e.afterImportPages=function(t,e){this.fields.forEach((function(n){n.controls.forEach((function(n){n.info.pageIndex>=t&&(n.info.pageIndex+=e)}))}))},e.copyControls=function(t,e,n){var r=this;return this.checkDesignPerm(),this.doc.api.copyControls(this.doc.id,0,e.getIndex(),n).then((function(t){return Promise.all(t.map((function(t){var e=r.getField(t.fieldName);return e.updateControls(t.controlJsons),delete e.engineActions,r.doc.api.getAAJson(r.doc.id,t.fieldName).then((function(t){return e.info.AA=t}))})))})).then((function(t){return e.getUnloadedAnnots()})).then((function(t){return r.doc.engine.eventEmitter.emit(St.annotationAdd,t,e),t}))},e.duplicateWidget=function(t,e,n,r){var i=this;return Promise.all(t.map((function(t){return i.doc.getPageByIndex(t)}))).then((function(t){return t.filter((function(t){return!t.isVirtual()})).map((function(t){return t.getIndex()}))})).then((function(t){if(!(t.length<1))return i.doc.api.duplicateWidget(i.doc.id,t,e,n).then((function(t){var n=i.getField(e);return n.updateControls(t),delete n.engineActions,i.doc.api.getAAJson(i.doc.id,e).then((function(t){return n.info.AA=t}))})).then((function(t){return Promise.all(r.map((function(t){return i.doc.getPageByIndex(t).then((function(t){return t.getUnloadedAnnots()}))})))})).then((function(t){t.forEach((function(t){t.length>0&&i.doc.engine.eventEmitter.emit(St.annotationAdd,t,t[0].getPage())}))}))}))},e.duplicateField=function(t,e,n,r,i){var o=this;if(this.getField(t).controls.length>1)return Promise.reject(new Error("More than one copies appeared."));var a=i.shift(),s=e.getPage();return e.setRect(a).then((function(c){if(e.updateUI({type:"rect",value:a}),i.length<1)return Promise.resolve();o.doc.api.duplicateField(o.doc.id,t,s.getIndex(),e.getObjNum(),n,r,i).then((function(t){return Promise.all([e.update(),t])})).then((function(t){var e=S()(t,2),n=(e[0],e[1]);return o.reloadForm(n)})).then((function(t){return s.getUnloadedAnnots()})).then((function(t){o.doc.engine.eventEmitter.emit(St.annotationAdd,t,t[0].getPage())}))}))},e.moveControl=function(t,e,n){var r=this,i=this.getField(t).controls.map((function(t){return t.getWidget()}));return i.length>1?this.doc.api.moveControl(this.doc.id,n,t,e).then((function(t){var e=i.filter((function(t){return t})).map((function(t){return t.update()}));return e.push(t),Promise.all(e)})).then((function(t){return r.reloadForm(t[t.length-1])})).then((function(){return i.map((function(t){return t.updateUI({type:"rename"})}))})):this.renameField(t,e)},e.getCO=function(){return this.formInfo&&this.formInfo.calculationOrder||[]},e.setCO=function(t){return this.formInfo.calculationOrder=t,this.doc.engine.eventEmitter.emit(St.COChange,t),this.doc.api.setCO(this.doc.id,t)},e.removeFieldInCO=function(t){var e=this.formInfo.calculationOrder,n=e.indexOf(t);-1!=n&&(e.splice(n,1),this.doc.engine.eventEmitter.emit(St.COChange,e),this.doc.api.setCO(this.doc.id,e))},t}();function rm(t,e,n){var r;for(r=0;r<e.length&&!(e.charCodeAt(r)>255);r++);if(r!==e.length)for(t.push(254),t.push(255),r=0;r<e.length;r++){var i=e.charCodeAt(r)>>8;!n||40!=i&&41!=i||t.push(92),t.push(i),i=255&e.charCodeAt(r),!n||40!=i&&41!=i||t.push(92),t.push(255&e.charCodeAt(r))}else for(r=0;r<e.length;r++){var o=e.charCodeAt(r);!n||40!=o&&41!=o||t.push(92),t.push(o)}}function im(t){if(254==t.charCodeAt(0)&&255==t.charCodeAt(1)){for(var e="",n=2;n<t.length;n+=2)e+=String.fromCharCode((t.charCodeAt(n)<<8)+t.charCodeAt(n+1));return e}return t}var om={alignment:0,alternateName:"",controls:[{index:0,isChecked:!1,isDefaultChecked:!1,isEmpty:!1,objectNumber:-1}],DA:{flags:3,fontName:"FoxitSansOTF",textColor:4278190080,textSize:0},defaultValue:"",flag:0,mappingName:"",maxLength:0,name:"",options:[],topVisibleIndex:0,type:1,value:"",isEmpty:!1,AA:{}},am=function(t,e){var n=JSON.parse(JSON.stringify(om));return n.defaultValue=n.value=2==e||3==e?"Off":"",n.name=t,n.type=e,n},sm=nm,cm=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.id=Object(Qi.a)("doc_text_search"),this.pattern=e,this.flags=n,this.doc=t,this.api=t.api,this.startPageIndex=0,this.currentPageIndex=0,this.endPageIndex=t.getPageCount()-1,this.annotTextSearchArr=[],this.currentAnnotTextSearch=null,t.docTextSearchIdMap[this.id]=this}var e=t.prototype;return e.getId=function(){return this.id},e.findNext=function(){var t=this;this.startPrev=!1;var e=null;return this.getCurrentPageTextSearch().then((function(t){return e=t,t.findNext()})).then((function(n){if(n)return n;if(e instanceof Ti){var r=t.annotTextSearchArr.findIndex((function(e){return e.id==t.currentAnnotTextSearch.id}));return r>-1?r==t.annotTextSearchArr.length-1?(t.currentAnnotTextSearch=null,t.startPageTextSearch=!0):(t.currentAnnotTextSearch=t.annotTextSearchArr[r+1],t.startPageTextSearch=!1):(t.currentAnnotTextSearch=null,t.startPageTextSearch=!0),t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.findNext()}return t.currentPageIndex<t.endPageIndex?(t.currentPageIndex++,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.startPageTextSearch=!1,t.findNext()):(t.currentPageIndex=t.startPageIndex,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.startPageTextSearch=!1,null)}))},e.findNexts=function(){var t=this;return this.startPrev=!1,this.getCurrentPageTextSearch().then((function(e){return new Promise((function(n,r){t.iterationPageFindNext(e,[],(function(i){if(i.length){var o=t.currentPageIndex<t.endPageIndex;if(e instanceof Ti){var a=t.annotTextSearchArr.findIndex((function(e){return e.id==t.currentAnnotTextSearch.id}));a>-1?a+1>=t.annotTextSearchArr.length?(t.currentAnnotTextSearch=null,t.startPageTextSearch=!0):(t.currentAnnotTextSearch=t.annotTextSearchArr[a+1],t.startPageTextSearch=!1):t.startPageTextSearch=!0,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null}return e instanceof Hv&&(t.currentPageIndex<t.endPageIndex?(t.currentPageIndex++,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null):(t.currentPageIndex=t.startPageIndex,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null),t.currentAnnotTextSearch=null,t.startPageTextSearch=!1),n({hasMore:o,list:i})}if(e instanceof Hv)return t.currentPageIndex<t.endPageIndex?(t.currentPageIndex++,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.currentAnnotTextSearch=null,t.startPageTextSearch=!1,t.findNexts().then((function(t){n(t)}),(function(){r()}))):(t.currentPageIndex=t.startPageIndex,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,n({hasMore:!1,list:i}));if(e instanceof Ti){var s=t.annotTextSearchArr.findIndex((function(e){return e.id==t.currentAnnotTextSearch.id}));return s>-1?s+1>=t.annotTextSearchArr.length?(t.currentAnnotTextSearch=null,t.startPageTextSearch=!0):(t.currentAnnotTextSearch=t.annotTextSearchArr[s+1],t.startPageTextSearch=!1):t.startPageTextSearch=!0,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.findNexts().then((function(t){n(t)}),(function(){r()}))}}))}))})).then((function(t){return t}))},e.iterationPageFindNext=function(t,e,n){var r=this;t.findNext().then((function(i){if(!i)return n(e);e.push(i),r.iterationPageFindNext(t,e,n)}))},e.findPrev=function(){var t=this;this.startPrev=!0;var e=null;return this.getCurrentPageTextSearch().then((function(t){return e=t,t.findPrev()})).then((function(n){if(n)return n;if(e instanceof Ti){var r=t.annotTextSearchArr.findIndex((function(e){return e.id==t.currentAnnotTextSearch.id}));return r>-1?0==r?(t.currentAnnotTextSearch=null,t.startPageTextSearch=!0):(t.currentAnnotTextSearch=t.annotTextSearchArr[r-1],t.startPageTextSearch=!1):(t.currentAnnotTextSearch=null,t.startPageTextSearch=!0),t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.findPrev()}return t.currentPageIndex>t.startPageIndex?(t.currentPageIndex--,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.startPageTextSearch=!1,t.findPrev()):(t.currentPageIndex=t.endPageIndex,t.currentPageTextSearch.destroy(),t.currentPageTextSearch=null,t.startPageTextSearch=!1,null)}))},e.getCurrentPageTextSearch=function(){var t=this;return this.currentPageTextSearch?Promise.resolve(this.currentPageTextSearch):this.currentPageTextSearchPromise?this.currentPageTextSearchPromise:this.currentPageTextSearchPromise=this.doc.getPageByIndex(this.currentPageIndex).then((function(e){return t.currentAnnotTextSearch?Promise.resolve(t.currentAnnotTextSearch):t.startPageTextSearch?e.getTextSearch(t.pattern,t.flags):e.getAnnots().then((function(n){var r=[];return n.forEach((function(e){"widget"==e.getType()&&r.push(e.getTextSearch(t.pattern,t.flags))})),r.length?Promise.all(r).then((function(e){return t.annotTextSearchArr=e,t.currentAnnotTextSearch=t.startPrev?e[e.length-1]:e[0],Promise.resolve(t.currentAnnotTextSearch)})):e.getTextSearch(t.pattern,t.flags)}))})).then((function(e){return t.currentPageTextSearch=e,t.currentPageTextSearchPromise=null,e}))},e.setStartPageIndex=function(t){this.startPageIndex=t},e.setCurrentPageIndex=function(t){t<this.startPageIndex&&(t=this.startPageIndex),t>this.endPageIndex&&(t=this.endPageIndex),this.currentPageIndex!==t&&this.destroy(),this.currentPageIndex=t},e.setEndPageIndex=function(t){this.endPageIndex=t},e.destroy=function(){var t=this;this.currentPageTextSearch&&this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.currentPageTextSearchPromise&&this.currentPageTextSearchPromise.then((function(e){e.destroy(),t.currentPageTextSearch=null})),this.doc.docTextSearchIdMap[this.id]=null,this.currentPageTextSearchPromise=null},t}(),um={None:"none",RC4:"rc4",AES128:"aes128",AES256:"aes256"};var dm='<?xml version="1.0" encoding="UTF-8"?>\n<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">\n<f href="a.pdf"/><fields>\n',lm='</fields>\n<ids original="abcdef" modified="0123456"/>\n</xfdf>';function hm(t){if('"'!==t[0])return fm(t);for(var e="",n=1;n<t.length;n++)'"'!=t[n]&&(e+=t[n]);return fm(e)}function fm(t){return B()("<div/>").text(t).html().replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function pm(t){var e="";for(var n in t)""!=n&&(e+='<field name="'.concat(fm(n),'"><value>').concat(hm(t[n]),"</value></field>"));return new Blob([dm+e+lm],{type:"application/vnd.xfdf"})}function gm(t){"string"==typeof t&&(t=B.a.parseXML(t));var e="";return B()(t).children().children().each((function(){var t,n,r,i=(t=B()(this),n="xfdf:original",r="",t&&void 0!==t.attr(n)&&(r=function(t){var e=t;return e=(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')).replace(/\r/g,"")).replace(/\n/g," ")}(t.attr(n))),r);i&&""!==i&&0!==i.length||(i=this.tagName);var o=B()(this).html();e+='<field name="'.concat(i,'"><value>').concat(o,"</value></field>")})),new Blob([dm+e+lm],{type:"application/vnd.xfdf"})}var vm,mm=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var o in this.engine=e,this.api=e.api,this.docId=n.id,this.doc=n,this.parent=i,r)if("children"==o){this.children=[];for(var a=0;a<r[o].length;a++)this.children.push(new t(e,n,r[o][a],this))}else this[o]=r[o]}var e=t.prototype;return e.destroy=function(){this.engine=null,this.api=null,this.doc=null,this.parent=null,this.children.forEach((function(t){return t.destroy})),this.children=null},e.insertBookmark=function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(!this.doc.checkPermission(Tn.assemble))throw new Error("Permission error");if((o|5-o)<0)throw new Error("Wrong relationship: "+o);if((n|this.doc.getPageCount()-1-n)<0)throw new Error("Wrong pageIndex: "+n);var a=this;return a.doc.api.insertBookmark(a.docId,a.id,e,n,r,i,o).then((function(e){if(e){var n=new t(a.doc.engine,a.doc,e,a);return a.children.push(n),a.doc.bookmarkRoot=null,a.doc.engine.eventEmitter.emit(St.bookmarkAdded,n),n}return null}))},e.addBookmarksFromStructureRoles=function(t,e){var n=this;return this.doc.api.addBookmarksFromStructureRoles(this.docId,t,e).then((function(t){return n.engine.eventEmitter.emit(St.structureBookmarkAdded),t}))},e.setProperty=function(t){var e=this,n=!(arguments.length>1||void 0!==arguments[1])||arguments[1];if(!this.doc.checkPermission(Tn.assemble))throw new Error("Permission error");void 0!==t.color&&(t.color=xn(t.color,"int"));var r=this;return this.doc.api.setBookmarkProperty(this.docId,this.id,t).then((function(t){if(t){for(var i in t)"children"!==i&&(r[i]=t[i]);n&&r.doc.engine.eventEmitter.emit(St.bookmarkUpdated,r)}return e}))},e.remove=function(){var t=this;if(!this.doc.checkPermission(Tn.assemble))throw new Error("Permission error");var e=this;return this.doc.api.removeBookmark(this.docId,this.id).then((function(n){if(n&&(e.doc.engine.eventEmitter.emit(St.bookmarkRemoved,e.id),e.parent)){for(var r=e.parent,i=0;i<r.children.length;i++)if(e.id==r.children[i].id){r.children.splice(i,1);break}t.destroy()}return n}))},e.moveTo=function(t,e){var n=this;return this.doc.api.moveBookmark(this.docId,this.id,t.id,e).then((function(t){n.doc.bookmarkRoot=null,n.doc.engine.eventEmitter.emit(St.bookmarkUpdated,n)}))},e.getDestination=function(){var t=this;return this.doc.api.getBookmarkDestination(this.docId,this.id).then((function(e){if(e)return t.doc.engine.actionFactory.createAction(e,t.doc,t.doc.api,t.engine.eventEmitter,t)}))},e.setDestination=function(t){var e=this;if(!t)throw new Error("No GotoAction!");return this.doc.api.setBookmarkDestination(this.docId,this.id,t.info).then((function(t){if(t)return e.doc.engine.actionFactory.createAction(t,e.doc,e.doc.api,e.engine.eventEmitter,e)}))},e.getAction=function(){var t=this;return this.doc.api.getBookmarkAction(this.docId,this.id).then((function(e){if(e)return t.doc.engine.actionFactory.createAction(e,t.doc,t.doc.api,t.engine.eventEmitter,t)}))},e.setAction=function(t){if(!t)throw new Error("No Action!");return this.doc.api.setBookmarkAction(this.doc.getId(),this.id,t.info)},e.removeAction=function(t,e){return this.doc.api.removeBookmarkAction(this.doc.getId(),this.id,e?e.info:null)},e.updateBookmark=function(e){for(var n in e)if("children"==n){this.children=[];for(var r=0;r<e[n].length;r++)this.children.push(new t(this.engine,this.doc,e[n][r],this))}else this[n]=e[n]},e.moveAction=function(t,e){return this.doc.api.moveBookmarkAction(this.doc.getId(),this.id,t,e)},t}(),ym=function(){function t(t){t?(this.json=t,this.empty=!1):(this.json={contentFormats:{},margin:{left:72,right:36,top:72,bottom:36},textSize:12,textColor:4278190080,hasTextShrinked:!1,hasFixedSized:!1,startPageNumber:1,underline:!1},this.empty=!0)}var e=t.prototype;return e.destroy=function(){this.json=null},e.isEmpty=function(){return this.empty},e.getContent=function(t){return this.json.contentFormats[t]||this.json.contents[t]},e.setFont=function(t){this.json.fontId=t,this.json.font=t},e.setContentFormat=function(t,e){this.empty=!1,this.json.contentFormats[t]=e},e.setRange=function(t){if(t.start<1||t.end<1)throw new Error("page range is wrong.");if(t.filter<0||t.filter>2)throw new Error("Wrong filter.");this.json.range=t},e.setMargin=function(t){this.json.margin=t},e.setTextSize=function(t){this.json.textSize=t},e.setTextColor=function(t){this.json.textColor=t},e.enableTextShrinked=function(t){this.json.hasTextShrinked=t},e.enableFixedSizedForPrint=function(t){this.json.hasFixedSized=t},e.setStartDisplayingPage=function(t){this.json.startPageNumber=t},e.setUnderline=function(t){this.json.underline=t},e.getUnderline=function(){return this.json.underline},t}();!function(t){t[t.folder=1]="folder",t[t.file=2]="file"}(vm||(vm={}));var wm,bm=function(){function t(t){this.nodeData=t}return t.prototype.getNodeType=function(){return this.type},t}(),Am=function(t){function e(e,n,r){var i;return(i=t.call(this,r)||this).type=vm.folder,i.engine=e,i.doc=n,i.api=e.api,i.nodeHandle=r.handle,i.name=r.fileName,i.subNodes=[],i}O()(e,t);var n=e.prototype;return n.getSortedSubNodes=function(){var t=this,n=this.doc;return this.api.getPortfolioSubNodes(n.getId(),this.nodeHandle).then((function(r){return t.subNodes=[],r.forEach((function(r){if(r.type===vm.folder){var i=new e(t.engine,n,r);t.subNodes.push(i)}if(r.type===vm.file){var o=new Pm(t.engine,n,r);t.subNodes.push(o)}})),t.subNodes}))},n.addFiles=function(t,e){return this.api.portfolioAddFiles(this.doc.getId(),t,e,this.nodeHandle)},n.createFolder=function(t){var n=this;return this.api.portfolioCreateFolder(this.doc.getId(),t,this.nodeHandle).then((function(t){return new e(n.engine,n.doc,t)}))},n.removeSubNodes=function(t){return this.api.portfolioRemoveSubNodes(this.doc.getId(),this.nodeHandle,t)},n.changeSubNodesOrder=function(t,e){return this.api.changePortfolioSubNodesOrder(this.doc.getId(),this.nodeHandle,t,e)},n.moveSubNodeToSubFolderNode=function(t,e){return this.api.portfolioMoveSubNodeToSubFolderNode(this.doc.getId(),this.nodeHandle,t,e)},n.hasSameNameSubNode=function(t,e){return this.api.portfolioHasSameNameSubNode(this.doc.getId(),t,e,this.nodeHandle)},n.getName=function(){return this.name},n.getDescription=function(){return this.description},e}(bm),Pm=function(t){function e(e,n,r){var i;return(i=t.call(this,r)||this).type=vm.file,i.engine=e,i.doc=n,i.api=e.api,i.nodeHandle=r.handle,i.keyName=r.keyName,i}O()(e,t);var n=e.prototype;return n.getKeyName=function(){return this.keyName},n.getFileStream=function(){var t=this.doc,e=[];return this.api.getPortfolioFileStream(t.getId(),this.nodeHandle,(function(t){var n=t.arrayBuffer,r=t.blob;r?e=r:e.push(n)})).then((function(){return Array.isArray(e)?new Blob(e,{type:"application/octet-stream"}):e}))},e}(bm),Em=function(){function t(t,e){this.engine=t,this.doc=e,this.api=t.api,this.root=null,this.activedPDFNode=[]}var e=t.prototype;return e.getInfo=function(){return this.api.getPortfolioInfo(this.doc.getId())},e.setInfo=function(t){return this.api.setPortfolioInfo(this.doc.getId(),t)},e.regenerateTOC=function(t){var e=this;return this.api.portfolioRegenerateTOC(this.doc.getId(),t).then((function(t){var n,r=t||{},i=r.oldIndexes,o=r.newPages;if(i.length){e.doc.info.pageCount-=i.length;var a=[],s=[];i.forEach((function(t){var n=e.doc.pageCache[t];a.push(t),e.doc.pageCache.splice(t,1),n&&s.push(n.info.objectNumber)})),e.engine.eventEmitter.emit(St.pagesRemoved,a,s)}e.doc.info.pageCount+=o.length;var c=[];o.forEach((function(t){var n=new Xv(t,e.doc);c.push(n)})),(n=e.doc.pageCache).push.apply(n,c),e.doc.updatePageIndex(o[0].index,e.doc.info.pageCount),e.doc.updatePageLabelsByAction("insertPages",[o[0].index,c.length]),e.engine.eventEmitter.emit(St.insertPages,c)}))},e.hasSameNameSubNode=function(t,e,n){return this.api.portfolioHasSameNameSubNode(this.doc.getId(),t,e,n)},e.getStream=function(t){return this.api.getPortfolioStream(this.doc.getId(),t)},e.getTreeNode=function(){var t=this;return this.api.getPortfolioTreeNode(this.doc.getId()).then((function(e){return t.treeNode=e,e.type===vm.folder&&(t.root=new Am(t.engine,t.doc,e)),e.type===vm.file&&(t.root=new Pm(t.engine,t.doc,e)),Promise.resolve(t.root)}))},e.getInitialNodePath=function(){var t=this;return this.api.getPortfolioInitialNodePath(this.doc.getId()).then((function(e){if(!Array.isArray(e))return[];var n=e.map((function(e){return e.type===vm.folder?new Am(t.engine,t.doc,e):e.type===vm.file?new Pm(t.engine,t.doc,e):void 0}));return t.root=n[0],n}))},e.sendSortFolioParam=function(t,e){return this.api.sendSortFolioParam(this.doc.getId(),t,e).then((function(t){if(t)return!0}))},e.getFolioNodePDFDoc=function(){var t=this;return this.api.getFolioNodePDFDoc(this.doc.getId()).then((function(e){for(var n=[],r=0;r<=e.length-1;r++)n.push(new Zm(e[r],t.engine,{}));return n}))},e.recordPDFFileByPortFolioNode=function(t){var e=this,n=this.doc,r=[];for(var i in t)r.push(t[i].handle);return this.api.recordPDFFileByPortFolioNode(n.getId(),r).then((function(t){var n=t.filter((function(t){return-1===t.indexOf("password")}));if(0===t.filter((function(t){return-1!==t.indexOf("password")})).length){for(var r=[],i=0;i<=n.length-1;i++)r.push(new Zm(n[i],e.engine,{}));e.activedPDFNode=r}else e.activedPDFNode=["password"]}))},e.getPDFFileByPortFolioNode=function(){var t=D()(N.a.mark((function t(e){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],0!=e.length){t.next=3;break}return t.abrupt("return",[]);case 3:for(r=0;r<e.length;r++)("1"==e[r].type||"2"==e[r].type&&".pdf"===e[r].FileName.substr(-4).toLowerCase())&&n.push(e[r]);if(0!=n.length){t.next=6;break}return t.abrupt("return",[]);case 6:return t.next=8,this.recordPDFFileByPortFolioNode(n);case 8:return t.abrupt("return",this.activedPDFNode);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getActivedPDFFileByPortFolioNode=function(){return this.activedPDFNode},t}(),xm=function(t,e){return new Proxy(e,{doc:t,api:t.api,get:function(t,e){var n=this;if("then"!==e)return function(){if(e in t)return t[e];for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.api.changeEditingProperty(n.doc.id,e,i)}}})},Sm=function(){function t(t,e){this.json=e,this.api=t.api,this.doc=t}var e=t.prototype;return e.update=function(t,e){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this.api.changePEProperty(this.doc.id,t,e,i).then((function(t){var e=S()(t,2),r=e[0],i=e[1];return Promise.all([n.doc.getPageByIndex(r),i])})).then((function(t){var e=S()(t,2),r=e[0],i=e[1];return n.doc.engine.eventEmitter.emit(St.graphicsUpdated,r),i}))},e.getHeight=function(){return this.json.height},e.setHeight=function(t){return this.json.height=t,this.update("SetHeight",0,t)},e.setWidth=function(t){return this.json.height=t,this.update("SetWidth",0,t)},e.getWidth=function(){return this.json.width},e.getOpacity=function(){return this.json.opacity},e.setOpacity=function(t){return this.json.opacity=t,this.update("SetOpacity",0,t)},e.rotate=function(t){return this.update("Rotate",0,t)},e.flip=function(t){return this.update("Flip",0,t)},e.align=function(t){return this.update("Align",0,{type:"GraphicsObjectAlignmentType",value:t})},e.center=function(t){return this.update("Center",0,{type:"PageCenterAlignmentType",value:t})},e.changeRenderingOrder=function(t){return this.update("ChangeRenderingOrder",0,{type:"RenderingOrder",value:t})},e.canChangeRenderingOrder=function(t){return this.update("CanChangeRenderingOrder",0,{type:"RenderingOrder",value:t})},e.getXPosition=function(){return this.json.xPosition},e.setXPosition=function(t){return this.update("SetXPosition",0,t)},e.getYPosition=function(){return this.json.yPosition},e.setYPosition=function(t){return this.update("SetYPosition",0,t)},e.shear=function(t){return t=t*Math.PI/180,this.update("Shear",0,t)},e.move=function(t,e,n){return this.update("Move",0,{type:"EditorPage",value:t},{type:"PointF",value:e},n)},e.distribute=function(t){return this.update("Distribute",0,t)},e.size=function(t){return this.update("Size",0,t)},e.scale=function(t,e){return this.update("Scale",0,t,e)},e.clearClipPath=function(){return this.update("ClearClipPath",0)},e.editClipPath=function(){return this.update("EditClipPath",0)},e.addClipPath=function(t){return this.update("AddClipPath",0,t)},e.cut=function(){return this.update("Cut",0)},e.copy=function(){return this.update("Copy",0)},e.delete=function(){return this.update("Delete",0)},e.getType=function(){return this.json.type},t}(),Cm=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.getFontName=function(){return this.json.fontName},n.setFont=function(t,e,n,r){return this.update("SetFont",1,t,e,n,r)},n.hasStroke=function(){var t=this.getTextMode();if(1==t||2==t)return!0},n.hasFill=function(){var t=this.getTextMode();if(0==t||2==t)return!0},n.getFontSize=function(){return this.json.fontSize},n.getFillColor=function(){return this.json.fillColor},n.getStrokeColor=function(){return this.json.strokeColor},n.setFontSize=function(t){return this.json.fontSize=t,this.update("SetFontSize",1,t)},n.setColorSpace=function(t,e){this.json[t]=e},n.setFillColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return this.json.fillColor=t,void 0!==n&&(this.json.fillColor=n),this.update("SetFillColor",1,this.hasFill(),{type:"Color",value:t,space:this.json.fillColorSpace},e)},n.setStrokeColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return this.json.strokeColor=t,void 0!==n&&(this.json.strokeColor=n),this.update("SetStrokeColor",1,this.hasStroke(),{type:"Color",value:t,space:this.json.strokeColorSpace},e)},n.getHorizontalScale=function(){return this.json.horizontalScale},n.getCharSpace=function(){return this.json.charSpace},n.getWordSpace=function(){return this.json.wordSpace},n.canRemoveTextKerning=function(){return this.json.canRemoveTextKerning},n.canMergeText=function(){return this.json.canMergeText},n.canSplitText=function(){return this.json.canSplitText},n.canText2Path=function(){return this.json.canText2Path},n.isWordSpaceValid=function(){return this.json.isWordSpaceValid},n.getFontIsBold=function(){return this.json.fontIsBold},n.getFontIsItalic=function(){return this.json.fontIsItalic},n.setHorizontalScale=function(t){return this.json.horizontalScale=t,this.update("SetHorizontalScale",1,t)},n.setCharSpace=function(t){return this.json.charSpace=t,this.update("SetCharSpace",1,t)},n.setWordSpace=function(t){return this.json.wordSpace=t,this.update("SetWordSpace",1,t)},n.getTextMode=function(){return this.json.textMode},n.setTextMode=function(t){return this.json.textMode=t,this.update("SetTextMode",1,t)},n.removeTextKerning=function(){return this.update("RemoveTextKerning",1)},n.mergeText=function(){return this.update("MergeText",1)},n.splitText=function(t){return this.update("SplitText",1,{type:"Int32Array",value:t})},e}(Sm),Dm=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.getLineWidth=function(){return this.json.lineWidth},n.setLineWidth=function(t){return this.json.lineWidth=t,this.update("SetLineWidth",2,t)},n.getMiterLimit=function(){return this.json.miterLimit},n.setMiterLimit=function(t){return this.json.miterLimit=t,this.update("SetMiterLimit",2,t)},n.getLineCap=function(){return this.json.lineCap},n.setLineCap=function(t){return this.json.lineCap=t,this.update("SetLineCap",2,{type:"LineCap",value:t})},n.getLineJoin=function(){return this.json.lineJoin},n.setLineJoin=function(t){return this.json.lineJoin=t,this.update("SetLineJoin",2,{type:"LineJoin",value:t})},n.getLineStyle=function(){return this.json.lineStyle},n.setLineStyle=function(t){return this.json.lineStyle=t,this.update("SetLineStyle",2,{type:"FloatArray",value:t})},n.getFillColor=function(){return this.json.fillColor},n.setFillColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return t instanceof String&&(t="transparent"==t?0:parseInt(t.replace("#",""),16)),this.json.fillColor=t,void 0!==n&&(this.json.fillColor=n),this.update("SetFillColor",2,r,{type:"Color",value:t,space:this.json.fillColorSpace},e)},n.setColorSpace=function(t,e){this.json[t]=e},n.getStrokeColor=function(){return this.json.strokeColor},n.setStrokeColor=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.json.strokeColor=t,void 0!==n&&(this.json.strokeColor=n),this.update("SetStrokeColor",2,r,{type:"Color",value:t,space:this.json.strokeColorSpace},e)},e}(Sm),Im=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.changeShadingColor=function(t){return this.update("ChangeShadingColor",4,t)},n.changeColorUndoStart=function(){return this.update("ChangeColorUndoStart",4)},n.changeColorUndoEnd=function(){return this.update("ChangeColorUndoEnd",4)},n.changeColorUndoCancel=function(){return this.update("ChangeColorUndoCancel",4)},n.editReferenceLine=function(){return this.update("EditReferenceLine",4)},n.setGridientCursorColor=function(t){return this.update("SetGridientCursorColor",4,t)},n.getGridientCursorColor=function(){return this.update("GetGridientCursorColor",4)},n.getGridientColorAt=function(t){return this.update("GetGridientColorAt",4,t)},n.getGridientCursorLocation=function(){return this.update("GetGridientCursorLocation",4)},n.getGridientCursorIndex=function(){return this.update("GetGridientCursorIndex",4)},n.setGradientColorShowRect=function(t){return this.update("SetGradientColorShowRect",4,{type:"RectF",value:t})},n.addGradientCursorInfoBefore=function(t){return this.update("AddGradientCursorInfoBefore",4,{type:"RectF",value:t})},n.addGradientCursorInfoExcute=function(t){return this.update("AddGradientCursorInfoExcute",4,{type:"RectF",value:t})},n.addGradientCursorInfoEnd=function(){return this.update("AddGradientCursorInfoEnd",4)},n.addGradientCursorInfoDblClk=function(t){return this.update("AddGradientCursorInfoDblClk",4,{type:"RectF",value:t})},n.delGradientCursorInfo=function(){return this.update("DelGradientCursorInfo",4)},n.defaultGradientDataInit=function(){return this.update("DefaultGradientDataInit",4)},n.setGradientCurrentInfo=function(t){return this.update("SetGradientCurrentInfo",4,{type:"ShadingColorArray",value:t})},n.getGradientColor=function(){return this.update("GetGradientColor",4)},n.renderGridient=function(t,e){return this.update("RenderGridient",4,t,e)},e}(Sm),Rm=function(){function t(t){var e=this;this.filter=1,this.doc=t,t.api.registerWorkflow("out",this.workflow=function(t){var n=e.notifier[t.type];n&&n(t.msg)}),t.addDestroyHook((function(t){e.doc.api.unregisterWorkflow("out",e.workflow),e.destroy()}))}var e=t.prototype;return e.createText=function(){return this.postOperation("CreateText")},e.createPath=function(t){return this.postOperation("CreatePath",{type:"DrawType",value:t})},e.createImage=function(t){var e=this;return this.postOperation("CreateImage",{type:"Image",value:t}).then((function(t){return"number"==typeof t?e.doc.getPageByIndex(t).then((function(t){return e.doc.engine.eventEmitter.emit(St.graphicsUpdated,t),!0})):t}))},e.createShading=function(t){return this.postOperation("CreateShading",{type:"DrawType",value:t})},e.setObjectFilter=function(t){return this.filter=t,this.postOperation("SetGraphicsObjectFilter",{type:"GraphicsObjectFilter",value:t})},e.text2Path=function(){return this.postOperation("Text2Path")},e.endEdit=function(){return this.postOperation("EndEdit")},e.startEdit=function(){return this.postOperation("StartEdit")},e.setNotifier=function(t){this.notifier=t},e.getActiveObject=function(){var t=this;return this.postOperation("GetGraphicsObjectUtils").then((function(e){return function(t,e){switch(e.type){case 1:return new Cm(t,e);case 2:return new Dm(t,e);case 3:return new Sm(t,e);case 4:return new Im(t,e);case 5:return new Sm(t,e)}}(t.doc,e)}))},e.getSelection=function(){return this.postOperation("GetSelection")},e.hasSelection=function(){return this.postOperation("HasSelection")},e.getEditingObject=function(){return this.postOperation("GetGraphicsObjectEditor").then((function(t){return t&&void 0!==t.type?t:void 0}))},e.createEditingObjectProxy=function(t){return xm(this.doc,t)},e.triggerPopMenuAction=function(t){var e=this.doc,n=e.id;return e.api.triggerPopMenuAction(n,t)},e.postOperation=function(t){for(var e,n=this.doc,r=n.id,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(e=n.api).handlePageEditorEvent.apply(e,[r,t,void 0].concat(o))},e.destroy=function(){var t=this;["doc","workflow","notifier"].forEach((function(e){return t[e]=null}))},e.copy=function(){return this.postOperation("Copy")},e.canPaste=function(){return this.postOperation("CanPaste")},e.paste=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.postOperation.apply(this,["Paste"].concat(n)).then((function(e){return t.doc.getPageByIndex(e)})).then((function(e){t.doc.engine.eventEmitter.emit(St.graphicsUpdated,e)}))},e.undoRedo=function(t,e){return this.postOperation("Undo",t,e)},e.getDefaultProperty=function(t){return this.postOperation("getDefaultProperty",t)},t}(),Tm=function(){function t(t,e){this.engine=t,this.api=t.api,this.docId=e.id,this.pdfDoc=e}var e=t.prototype;return e.destroy=function(){this.engine=null,this.api=null,this.docId=null,this.pdfDoc=null},e.getArticleList=function(){var t=this;return this.articleList&&this.articleList.length>0?Promise.resolve(this.articleList):this.api.getArticleList(this.docId).then((function(e){return t.articleList=e}))},e.getThread=function(t){return this.getArticleList().then((function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.objNum===t)return r}}))},e.getBead=function(t,e){return this.getThread(t).then((function(t){for(var n=t.children||[],r=0;r<n.length;r++){var i=n[r];if(i.objNum===e)return i}}))},e.updateBeadRect=function(t,e,n){return this.api.updateBeadRect(this.docId,t,e,n)},e.insertThread=function(t){var e=this,n=t||{},r=n.title,i=void 0===r?"":r,o=n.subject,a=void 0===o?"":o,s=n.author,c=void 0===s?"":s,u=n.keywords,d=void 0===u?"":u;return this.api.insertThread(this.docId,{title:i,subject:a,author:c,keywords:d}).then((function(t){return t&&(e.articleList.push(t),e.engine.eventEmitter.emit(St.articleThreadAdded,t)),t}))},e.updateThread=function(t){var e=this,n=t||{},r=n.objNum,i=n.title,o=n.subject,a=n.author,s=n.keywords;return this.getThread(r).then((function(t){return e.api.updateThread(e.docId,{objNum:r,title:i,subject:o,author:a,keywords:s}).then((function(n){return n&&(A()(t,n),e.engine.eventEmitter.emit(St.articleThreadUpdated,n)),n}))}))},e.removeThread=function(t){var e=this;return this.getThread(t).then((function(n){return e.api.removeThread(e.docId,t).then((function(t){return t&&(e.articleList="",e.engine.eventEmitter.emit(St.articleThreadRemoved,n)),t}))}))},e.insertBead=function(t,e,n,r){var i=this;return this.getThread(n).then((function(o){return i.api.insertBead(i.docId,t,n,e,r).then((function(t){return t&&(o.children||(o.children=[]),void 0===r?(o.children.push(t),i.engine.eventEmitter.emit(St.articleBeadAdded,o,[t])):(i.articleList="",i.getThread(n).then((function(t){i.engine.eventEmitter.emit(St.articleBeadAdded,t,t.children)})))),{thread:o,bead:t}}))}))},e.removeBead=function(t,e){var n=this;return this.getThread(t).then((function(r){return n.api.removeBead(n.docId,t,e).then((function(i){return i&&(n.engine.eventEmitter.emit(St.articleBeadRemoved,[e]),1===r.children.length?n.removeThread(t):(n.articleList="",n.getThread(t).then((function(t){n.engine.eventEmitter.emit(St.articleBeadUpdated,t,t.children)})))),i}))}))},e.mergeThread=function(t,e){var n=this;return this.getThread(e).then((function(r){return n.api.mergeThread(n.docId,t,e).then((function(e){return e&&(r.children=e.children,n.engine.eventEmitter.emit(St.articleThreadUpdated,e),n.removeThread(t)),e}))}))},t}(),_m=function(){function t(t){this.store=new ds.a,this.cancelCallback=t}var e=t.prototype;return e.cancel=function(){this.cancelCallback()},e.onProgress=function(t){var e=this;return this.store.subscribe("progress",(function(n){t.call(e,n)}))},e.updateProgress=function(t){this.store.dispatch("progress",t)},e.getCurrentProgress=function(){var t=this.store.getCurrentValue("progress");return t?t.percent:0},t}();function km(){return{hasPageLabelStatus:wm.UNINITIALIZED,hasPageLabel:Promise.resolve(!1)}}function Fm(t,e){var n=e.getCurrentPageLabelInfo(0).then((function(t){return!0===t.hasLabel}));t.hasPageLabel=n,t.hasPageLabel.then((function(){t.hasPageLabelStatus=wm.DONE})),t.hasPageLabelStatus=wm.PENDING}function Mm(t,e){t.hasPageLabelStatus===wm.DONE&&Fm(t,e)}!function(t){t.UNINITIALIZED="uninitialized",t.PENDING="pending",t.DONE="done"}(wm||(wm={}));function Om(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Lm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Om(Object(n),!0).forEach((function(e){R()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Om(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Nm(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Vm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vm(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Vm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bm=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102],Um=function(t){function e(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(r=t.call(this)||this).id=e,r.engine=n,r.parameters=i,r.api=n.api,r.pageCache=[],r.pagePromiseCache=[],r.info={fileName:i.fileName,pageSizes:{},XFARemoved:!1},r.pdfaEditable=!1,r.visibleTemplates=[],r.invisibleTemplates=[],r.metadata={FileName:i.fileName},r.docModified=!1;var o=[];for(var a in St)switch(a){case"layerVisibleChange":case"drmEncryptFailed":case"docModified":case"annotationLoaded":case"annotLoaded":case"obtainsPageFromEngine":case"permissionChanged":break;default:o.push(St[a])}var s=function(){r.engine.eventEmitter.emit(St.docModified,F()(r)),r.docModified=!0};r.docModifiedHandler=s;var c=Uv(100,s);return o.map((function(t){r.engine.eventEmitter.on(t,c)})),r.engine.eventEmitter.on(Ct.willCloseDocument,r.willCloseDocument=function(){o.map((function(t){r.engine.eventEmitter.removeListener(t,c)}))}),r.permissionFactory={},r.pageIdMap={},r.docTextSearchIdMap={},r.spawnPageExecutor=new kt,r._pageLabelInfo=km(),r.otherOptions={renderConfigLineWeight:!1,afterHiddenDataOperateAndReopenFile:!1,isOpenNewFileAfterClose:!1},r.selectedInfo=void 0,r}O()(e,t);var n=e.prototype;return n.checkNoAdditionPerm=function(t){return void 0!==this.permissionFactory.additional&&!(this.permissionFactory.additional(this)&t)},n.checkPermission=function(t){var e=void 0!==this.permissionFactory.standard?this.permissionFactory.standard(this):-1;return this.getPermissionsSync()&e&t},n.isOwner=function(){return this.info.isOwner},n.isDocModified=function(){return this.docModified},n.setDocModified=function(){this.docModifiedHandler()},n.getId=function(){return this.id},n.getNameTreeIcons=function(){return this.info.icons},n.getFileName=function(){return this.info.fileName},n.createCertificateFile=function(t){return this.api.createCertificateFile(this.id,t)},n.getCertificateSerials=function(){return this.api.getCertificateSerials(this.id)},n.parseByCertificate=function(t){var e=this;return this.api.parseByCertificate(this.id,t).then((function(t){return e.afterParseHandler(t)}))},n.parseByPassword=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};if(n.encryptPassword&&(r.encryptPassword=n.encryptPassword),n.annotsJson){var i=vn.JSONToFDF(n.annotsJson);r.fdf={file:i}}return n.fdf&&(r.fdf=n.fdf),n.drm&&(r.drm=n.drm),n.fileOpen&&(r.fileOpen=n.fileOpen),n.idJWT&&(r.idJWT=n.idJWT),this.api.parsePDFDocByPassword(this.id,t,r).then((function(t){return e.afterParseHandler(t)}))},n.parse=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.certificateInfo?this.parseByCertificate(t.certificateInfo,t):this.parseByPassword(t.password,t)},n.afterParseHandler=function(t){var e=t.code,n=t.info;return 0!==e?Promise.reject(t):(this.info=A()(this.info,n),this.pageCache=new Array(this.info.pageCount),this.info.action&&(this.action=this.engine.actionFactory.createAction(this.info.action,this,this.api,this.engine.eventEmitter,this)),this)},n.getJsNameTree=function(){return this.info.jsNameTree},n.getMetadata=function(){var t=this;return this.api.getMetadata(this.id).then((function(e){return t.metadata=A()(t.metadata,e)})).catch((function(){return t.metadata}))},n.getMetadataValue=function(t){return this.metadata[t]},n.flatten=function(t){if(!(this.checkPermission(Tn.annotForm)&&this.checkPermission(Tn.modify)&&this.checkPermission(Tn.assemble)))throw new Error("Permission error");for(var e=[],n=this.getPageCount(),r=0;r<n;r++){var i=this.getPageByIndex(r).then((function(e){return e.flatten(t)}));e.push(i)}return Promise.all(e)},n.setMetadataValue=function(t,e){var n=this;if(!this.checkPermission(Tn.modify))throw new Error("Permission error");var r=Promise.resolve();return this.metadata.custom&&this.metadata.custom.hasOwnProperty(t)&&(r=this.api.removeMetadata(this.id,t).then((function(){delete n.metadata.custom[t]}))),r.then((function(){n.api.setMetadataValue(n.id,t,e).then((function(t){return n.getMetadata()})).then((function(){return n.engine.eventEmitter.emit(St.metaDataChanged,n),n}))}))},n.reloadPDFForm=function(){var t=this;return this.PDFForm&&(this.PDFForm.destroy(),this.PDFForm=null),this.loadPDFForm().then((function(e){var n,r=Nm(t.pageCache);try{for(r.s();!(n=r.n()).done;){var i=n.value;i&&i.resetWidgetsControl()}}catch(t){r.e(t)}finally{r.f()}return e}))},n.loadPDFForm=function(){var t=this,e=this.PDFForm;return e&&!this.emptyForm?Promise.resolve(e):(e&&e.destroy(),e=this.PDFForm=new sm(this,this.engine),this.api.loadForm(this.id).then((function(n){return t.emptyForm=!1,e.setFormJson(n),e})))},n.loadEmptyPDFForm=function(){var t=this.PDFForm;return this.emptyForm=!0,t||(t=this.PDFForm=new sm(this,this.engine)),Promise.resolve(t)},n.getPDFForm=function(){return this.PDFForm},n.getPageCount=function(){return this.info.pageCount},n.getPageCountAsync=function(){return this.info.pageCount||this.api.getPageCountAsync(this.id)},n.getFileVersion=function(){return this.api.getFileVersion(this.id).then((function(t){return(void 0!==t?t:14)/10}))},n.isLinearized=function(){return this.api.isLinearized(this.id)},n.hasForm=function(){return this.api.hasForm(this.id)},n.setCustomPermission=function(t,e){this.permissionFactory[t]=e},n.getPermission=function(){return this.getPermissions()},n.getPermissions=function(){return this.getPermissionsSync()},n.getPermissionsSync=function(){if(this.permissionFactory.replaceStandard)return this.info.userPermissions=this.permissionFactory.replaceStandard(this),this.info.userPermissions;var t=-1;return(this.info.sigPerms||[]).forEach((function(e){return t&=e})),this.info.isOwner?4294967292:(t&this.info.userPermissions)>>>0},n.hasSignature=function(){return(this.info.sigPerms||[]).length},n.getStdCipherOptions=function(){return this.api.getStdCipherOptions(this.id)},n.getPDFDocInfo=function(){return this.api.getPDFDocInfoById(this.id)},n.getBookmarksJson=function(){return this.api.getBookmarks(this.id)},n.getBlankPageIndexes=function(){return this.api.getBlankPageIndexes(this.id)},n.getCurFileSymbolId=function(){return this.api.getCurFileSymbolId(this.id)},n.getFadeOutBackground=function(t){return this.api.getFadeOutBackground(this.id,t)},n.getConvertToMono=function(t){return this.api.getConvertToMono(this.id,t)},n.getRootBookmark=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&this.bookmarkRoot)return Promise.resolve(this.bookmarkRoot);var n=this.engine;return this.getBookmarksJson().then((function(e){return e?t.bookmarkRoot=new mm(n,t,e):null}))},n.updateRootBookmark=function(){var t=this;return this.bookmarkRoot?this.getBookmarksJson().then((function(e){e&&t.bookmarkRoot.updateBookmark(e)})):Promise.resolve()},n.createRootBookmark=function(){var t=this;if(!this.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");var e=this.engine;return this.api.createRootBookmark(this.id).then((function(n){return t.bookmarkRoot=new mm(e,t,n)}))},n.getLayerNodesJson=function(){var t=this;return this.ocgs?Promise.resolve(this.ocgs):this.api.getLayerNodes(this.id).then((function(e){return t.ocgs=e}))},n.setLayerNodeVisible=function(t,e){var n=this;return this.getLayerNodeById(t).visible=e,this.api.setLayerNodeVisiable(this.id,t,e).then((function(t){return t&&n.engine.eventEmitter.emit(St.layerVisibleChange,n),t}))},n.setLayerNodeVisiable=function(t,e){return this.setLayerNodeVisible(t,e)},n.getPageByIndex=function(t){var e,n=this,r=this.pageCache;if(e=r[t])return Promise.resolve(e);var i=this.pagePromiseCache;return i[t]=i[t]||this.api.getPageInfoByIndex(this.id,t).then((function(e){var o=r[t]=new Xv(e,n);return n.engine.eventEmitter.emit(St.obtainsPageFromEngine,o),delete i[t],o}))},n.getPageById=function(t){return this.pageIdMap[t]||null},n.getCurrentDocTextSearch=function(){var t=Object.keys(this.docTextSearchIdMap);return this.docTextSearchIdMap[t[t.length-1]]||null},n.getDocTextSearchById=function(t){return this.docTextSearchIdMap[t]||null},n.destroy=function(){var e;(e=this.PDFForm)&&e.destroy(),this.PDFForm=null,this.pageIdMap={},this.docTextSearchIdMap={};for(var n=this.pageCache,r=0,i=n.length;r<i;r++){var o=n[r];o&&o.destroy(),n[r]=null}var a=this.HF;return a&&a.destroy(),this.HF=null,this.bookmarkRoot&&this.bookmarkRoot.destroy(),this.bookmarkRoot=null,this.permissionFactory={},this.engine.eventEmitter.off(Ct.willCloseDocument,this.willCloseDocument),this.willCloseDocument=null,this.pdfPortfolio=null,t.prototype.destroy.call(this),this.api.destroyDoc(this.getId())},n.getDocBuffer=function(t){var e=this,n=this.hasSignature()?1:0;t.activeElement(null);var r=[];return Promise.resolve((t._saveBefore||function(){})()).then((function(){return e.getStream((function(t){var e=t.arrayBuffer;r.push(e)}),n).then((function(){return r}))}))},n.getStream=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.checkNoAdditionPerm(1))throw new Error("Permission error, download disabled");return this.PDFForm?this.PDFForm.addTask().then((function(){return e.api.getPDFDocStream(e.id,t,n)})):this.api.getPDFDocStream(this.id,t,n)},n.getFile=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flags:0,fileName:this.getFileName()},n=e.flags,r=void 0===n?0:n,i=e.fileName,o=void 0===i?this.getFileName():i;if(this.checkNoAdditionPerm(Pe.download))throw new Error("Permission denied! Missing additional download permission.");var a,s=[],c=0,u=function(t){var e=t.blob,n=t.arrayBuffer,r=t.offset,i=t.size;n?(s.push({arrayBuffer:n,offset:r}),c=Math.max(r+i,c)):a=e},d=function(){return t.api.getPDFDocStream(t.id,u,r).then((function(){if(a)return[a];var t=new Uint8Array(c);return s.forEach((function(e){var n=e.arrayBuffer,r=e.offset;t.set(new Uint8Array(n),r)})),t})).then((function(t){try{return new File([t],o,{type:"application/pdf"})}catch(n){t.name=o;var e=new Date;return t.lastModified=e.getTime(),t.lastModifiedDate=e,t.webkitRelativePath="",t}}))};return this.PDFForm?this.PDFForm.addTask().then((function(){return d()})):d()},n.exportAnnotsToFDF=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0!==t&&1!==t)throw new Error("File type error, only 0 or 1 available, current is "+t);var n={};if(e)for(var r in e.forEach((function(t){var e;n[t.page.getId()]||(n[t.page.getId()]=new Set),e=n[t.page.getId()],$m(t,e)})),n)n[r]=Array.from(n[r]);return this.api.exportToFDF(this.id,t,2,n)},n.exportFormToFile=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((e|4-e)<0)throw new Error("File type error.");var n=Promise.resolve();return this.PDFForm||(n=this.loadPDFForm()),n.then((function(n){switch(e){case 0:return t.api.exportToFDF(t.id,0,1);case 1:var r=t.PDFForm.exportXFDF(),i=new Blob([r],{type:"application/vnd.adobe.xfdf"});return Promise.resolve(i);case 2:var o=t.PDFForm.exportXML(),a=new Blob([o],{type:"application/xml"});return Promise.resolve(a);case 3:var s="",c=t.info.fileName;t.PDFForm.enumFieldsEx([],0,(function(t,e,n){-1!=e.indexOf(",")&&(e='"'.concat(e,'"')),s+=","+e,-1!=n.indexOf('"')&&(n='"'.concat(n.replace(/\"/g,'""'),'"')),c+=","+n}));var u="\ufeff"+s+"\r\n"+c;return Promise.resolve(new Blob([u],{type:"text/csv,charset=UTF-8"}));case 4:var d=" ",l=" ";return t.PDFForm.enumFieldsEx([],0,(function(t,e,n){d+="\t"+e,l+="\t"+n})),Promise.resolve(new Blob([d+"\r\n"+l],{type:"application/xml"}))}}))},n.exportToFDF=function(t,e){return this.api.exportToFDF(this.id,t,2).then((function(t){return new Uint8Array(t)}))},n.exportDataToFDF=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(0!==t&&1!==t)throw new Error("File type error, only 0 or 1 available, current is "+t);return this.api.exportToFDF(this.id,t,e)},n.exportToStardardXml=function(t,e){return this.api.exportToStardardXml(this.id,t,e)},n.exportToImage=function(t,e,n,r){return this.api.exportToImage(this.id,t,e,n,r)},n.exportToTxt=function(t,e,n){return this.api.exportToTxt(this.id,t,e,n)},n.exportImageObjectToImage=function(t,e,n,r){return this.api.exportImageObjectToImage(this.id,t,e,n,r)},n.cancelExport=function(){return this.api.cancelExport(this.id)},n.importAnnotsFromFDF=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.checkPermission(Tn.annotForm))throw new Error("Permission error");return this.api.importFromFDF(this.id,t,2).then((function(){for(var t=e.pageCache,n=[],r=function(e,r){var i=t[e];if(!i)return"continue";n.push(i.getUnloadedAnnots().then((function(t){return{page:i,newAnnots:t}})))},i=0,o=t.length;i<o;i++)r(i);return Promise.all(n)})).then((function(t){e.engine.eventEmitter.emit(St.annotationImported,e,t),!n&&e.engine.eventEmitter.emit(St.annotationImportedEx,e,t)}))},n.importFormFromFile=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"UTF-8";if(!this.checkPermission(Tn.annotForm+Tn.fillForm))throw new Error("Permission error");var i=Promise.resolve();this.PDFForm||(i=this.loadPDFForm());var o=2===e;return 3===e||4==e?i=i.then((function(n){return new Promise((function(n,i){t instanceof ArrayBuffer&&(t=new Blob([t]));var o=new FileReader;o.onloadend=function(){var r,i=",";switch(e){case 3:break;case 4:i="\t";break;default:throw new Error("Unsupported file type")}var a=o.result.split("\r\n"),s=S()(a,2),c=s[0],u=s[1];r=Wm(c,u,i,'"'),t=pm(r),n()},o.readAsText(t,r)}))})):o?t instanceof Blob?i=new Promise((function(e,n){var r=new FileReader;r.readAsText(t),r.onload=function(n){var r=n.target.result;t=gm(r),e()}})):t instanceof ArrayBuffer&&(i=new Promise((function(e,n){var r=new Blob([t]),i=new FileReader;i.readAsText(r),i.onload=function(n){var r=n.target.result;t=gm(r),e()}}))):i=Promise.resolve(),i.then((function(){var e=n.PDFForm;return n.api.importFromFDF(n.id,t,1).then((function(t){return n.api.getFieldsValue(n.id)})).then((function(t){return e.upadateValue(t),t})).then((function(t){for(var r in n.engine.eventEmitter.emit(St.docModified,n),t){var i=e.getField(r);if(6===i.getType()){var o=i.getLoadedWidgets(),a=void 0,s=Zi.FieldValueChanged;a=o.length?o[0].getAdditionalAction(s):i.getAction(s),t[r].length>0&&a&&e.actionHandler&&e.actionHandler(a,null,i,s)}}e.calculate(null)}))}))},n.importFromFDFFile=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(1===n)return this.PDFForm.importFDF();var r=t,i=!1;if(t instanceof Uint8Array&&t.length>52428800){var o=new Blob([t],{type:"arraybuffer"});r=URL.createObjectURL(o),i=!0}return this.api.importFromFDFFile(this.id,r,-1,n).then((function(t){for(var n=e.pageCache,r=[],i=function(t,e){var i=n[t];if(!i)return"continue";r.push(i.getUnloadedAnnots().then((function(t){return{page:i,newAnnots:t}})))},o=0,a=n.length;o<a;o++)i(o);return Promise.all(r)})).then((function(t){i&&URL.revokeObjectURL(r);var o=St.annotationImported;1==n&&(o=St.annotationImported),e.engine.eventEmitter.emit(o,e,t)}),(function(t){console.error("some error happened. Please check fdf file exists.",t)}))},n.exportAnnotsToJSON=function(t){var e=this,n=Promise.resolve();if(t&&0!=t.length){var r={},i=t.map((function(t,e){var n=t.exportToJSON();return"stamp"!=n.type&&"fileattachment"!=n.type||(r[e]={page:n.page,index:t.getId()}),n}));n=Promise.all([i,this.getAnnotsRawData(r)])}else n=this.getAnnots().then((function(t){for(var n={},r=[],i=0,o=t.length;i<o;i++)for(var a=t[i],s=0,c=a.length;s<c;s++){var u=a[s].getType();if("widget"!=u&&"popup"!=u&&"watermark"!=u){var d=a[s].exportToJSON();r.push(d),"stamp"!=d.type&&"fileattachment"!=d.type||(n[r.length-1]={page:i,index:a[s].getId()})}}return Promise.all([r,e.getAnnotsRawData(n)])}));return n.then((function(t){var e=S()(t,2),n=e[0];return e[1].forEach((function(t){return n[t.index].raw=t.raw})),n}))},n.getAnnotsRawData=function(t){return t.length>0?[]:this.api.getAnnotsRawData(this.id,t)},n.importAnnotsFromJSON=function(t){if(!this.checkPermission(Tn.annotForm))throw new Error("Permission error");var e=vn.JSONToFDF(t);return this.importAnnotsFromFDF(e)},n.getPageAnnots=function(t){return Ym(t,this.getPageCount()),this.getPageByIndex(t).then((function(t){return t.getAnnots()}))},n.getPageAnnotsIdList=function(t){return Ym(t,this.getPageCount()),this.getPageByIndex(t).then((function(t){return Object.keys(t.annotIdMap).map((function(t){return+t}))}))},n.getAnnots=function(){for(var t=this,e=[],n=[],r=0,i=this.getPageCount();r<i;r++)e.push(function(e){return t.getPageAnnots(e).then((function(t){n[e]=t}))}(r));return Promise.all(e).then((function(){return n}))},n.getAnnotIdMap=function(){for(var t,e=this,n=[],r={},i=0,o=this.getPageCount();i<o;i++)n.push((t=i,e.getPageByIndex(t).then((function(t){A()(r,t.annotIdMap)}))));return Promise.all(n).then((function(){return r}))},n.getTextSearch=function(t,e){return new cm(this,t,e)},n.addAnnot=function(t,e){if(!this.checkPermission(Tn.annotForm))throw new Error("Permission error");return Ym(t,this.getPageCount()),this.getPageByIndex(t).then((function(t){return t.addAnnot(e)}))},n.addAnnotGroup=function(t,e,n){if(!this.checkPermission(Tn.annotForm))throw new Error("Permission error");return Ym(t,this.getPageCount()),this.getPageByIndex(t).then((function(t){return t.addAnnotGroup(e,n)}))},n.setOpenAction=function(t,e){var n=this;if(!this.checkPermission(Tn.modify))throw new Error("Permission error");return this.api.setDocOpenAction(this.getId(),t,e).then((function(t){return n.action=n.engine.actionFactory.createAction(t,n,n.api,n.engine.eventEmitter,n)}))},n.getSecurityType=function(){return this.api.getSecurityType(this.id)},n.checkCertificatePassword=function(t,e){return this.api.checkCertificatePassword(this.id,t,e)},n.setCertificateAndPermission=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:um.AES256,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.checkPermission(Tn.modify))throw new Error("Permission error");return this.api.setCertificateAndPermission(this.id,t,e,n)},n.setPasswordAndPermission=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4294967292,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:um.AES256,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments[5];if(!this.checkPermission(Tn.modify))throw new Error("Permission error");return this.api.setPasswordAndPermission(this.id,t,e,r,i,o).then((function(r){return(a&&(a.userPassword||a.ownerPassword)||t&&-1!=t||e&&-1!=e)&&r&&(n.setPasswordType(e||t&&!e?3:2),n.hasOwnerPassword=!!e,n.engine.eventEmitter.emit(St.docPasswordChanged,n)),r}))},n.removeSecurity=function(){var t=this;if(!this.checkPermission(Tn.modify))throw new Error("Permission error");return this.api.removeSecurity(this.id).then((function(e){return e&&t.engine.eventEmitter.emit(St.removePwdAndPerm,t),e}))},n.isCorrectPassword=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht.EMPTY_STR;return this.checkPassword(t).then((function(t){return 0!==t}))},n.getViewerPreference=function(){return this.api.getViewerPreference(this.id).catch((function(){return{pageLayout:"Default",uiLayout:"Default",language:"Default",viewerPreference:{}}}))},n.setViewPreference=function(t,e){return this.api.setViewPreference(this.id,t,e)},n.checkPassword=function(t){var e=this;return this.api.checkPassword(this.id,t).then((function(t){return 3===t&&(e.info.isOwner=!0),e.engine.eventEmitter.emit(St.permissionChanged,e),t}))},n.getTypeByPassword=function(t){var e=this;return this.api.checkPassword(this.id,t).then((function(t){return 3===t&&(e.info.isOwner=!0),t}))},n.getUserPassword=function(t){return this.api.getUserPassword(this.id,t)},n.getPasswordType=function(){return Promise.resolve(this.info.passwordType)},n.setPasswordType=function(t){return this.info.passwordType=t},n.getUserPermissions=function(){return this.info.userPermissions},n.makeRedactByPages=function(t){if(!this.checkPermission(Tn.annotForm))throw new Error("Permission error");for(var e=[],n=0;n<t.length;n++){var r=t[n],i=this.getPageByIndex(r).then((function(t){var e;if(!t.isVirtual())return e=1==t.info.rotation||3==t.info.rotation?{left:0,top:0,right:t.getHeight(),bottom:t.getWidth()}:{left:0,top:0,right:t.getWidth(),bottom:t.getHeight()},t.markRedactAnnot([e])}));e.push(i)}return Promise.all(e).then((function(t){return t.filter(Boolean)}))},n.movePageTo=function(t,e){var n=this;if(!this.checkPermission(Tn.modify))throw new Error("Permission error");this.info.pageSizes={};var r=this.getPageCount();if(t<0||e<0||t>=r||e>=r)throw new Error("Param error: PageIndex or DestIndex is out of the valid range.");return this.getPageByIndex(t).then((function(r){return n.api.movePageTo(n.id,r.getId(),e).then((function(r){if(r){var i=n.pageCache[t];n.pageCache.splice(t,1),n.pageCache.splice(e,0,i);var o=Math.min(t,e),a=Math.max(t,e);n.updatePageIndex(o,a),n.engine.eventEmitter.emit(St.pageMoved,t,e)}return n.updateRootBookmark().then((function(t){return r}))}))}))},n.insertBlankPages2=function(){var t=D()(N.a.mark((function t(e,n,r){var i,o,a,s=this;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkPermission(Tn.assemble|Tn.modify)){t.next=2;break}throw new Error("Permission error");case 2:if(this.info.pageSizes={},this.getPageCount(),"number"==typeof n&&"number"==typeof r){t.next=6;break}throw new Error("param error. Only number is available.");case 6:return t.next=8,this.api.insertBlankPages2(this.id,e,n,r);case 8:return i=t.sent,t.next=11,this.api.getLayerNodes(this.id);case 11:return o=t.sent,delete this.ocgs,this.ocgs=o,a=i.reduce((function(t,e){if(!e)return!1;s.info.pageCount++;var n=new Xv(e,s),r=e.index;return s.pageCache.splice(r,0,n),s.updatePageIndex(r+1,s.info.pageCount-1),s.PDFForm&&s.PDFForm.afterInsertPage(e.index),[].concat(E()(t),[n])}),[]),this.updatePageLabelsByAction("insertPagesByRange",[i.map((function(t){return t.index}))]),this.engine.eventEmitter.emit(St.insertPages,a),t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}(),n.insertPage=function(t,e,n){var r=this;if(!this.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");this.info.pageSizes={};var i=this.getPageCount();if(t<0||t>i)throw new Error("Param error: PageIndex is out of the valid range.");if("number"!=typeof e||"number"!=typeof n)throw new Error("param error. Only number is available.");return this.api.insertPage(this.id,t,e,n).then((function(t){return delete r.ocgs,r.api.getLayerNodes(r.id).then((function(t){return r.ocgs=t})).then((function(e){return t}))})).then((function(e){if(!e)return!1;r.info.pageCount++;var n=new Xv(e,r);return r.pageCache.splice(e.index,0,n),r.updatePageIndex(e.index+1,r.info.pageCount-1),r.PDFForm&&r.PDFForm.afterInsertPage(t),r.engine.eventEmitter.emit(St.pageAdded,n),r.updateRootBookmark().then((function(t){return n}))}))},n.showNameTreePageAtTheEnd=function(){var t=this;return this.api.showNameTreePageAtTheEnd(this.id).then((function(e){return delete t.ocgs,t.api.getLayerNodes(t.id).then((function(e){return t.ocgs=e})).then((function(n){return t.reloadPDFForm(!0).then((function(t){return e}))}))})).then((function(e){if(!e)return!1;t.info.pageCount++;var n=new Xv(e,t);return t.pageCache.splice(e.index,0,n),t.engine.eventEmitter.emit(St.pageAdded,n),t.engine.eventEmitter.emit(St.pagesLabelNeedUpdate,n),n}))},n.removePage=function(t){var e=this;if(!this.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");this.info.pageSizes={};var n=this.getPageCount();if(t<0||t>=n)throw new Error("Param error: PageIndex is out of the valid range.");if(1==n)throw new Error("Not allowed to remove the only page.");var r=[];return this.pageCache[t]||r.push(this.getPageByIndex(t)),Promise.all(r).then((function(n){return e.api.removePage(e.id,t).then((function(n){if(n){e.PDFForm&&e.PDFForm.afterRemovePage(t),e.info.pageCount--;var r=e.pageCache[t].info.objectNumber;e.pageCache.splice(t,1),e.updatePageIndex(t,e.info.pageCount-1),e.engine.eventEmitter.emit(St.pageRemoved,t,r)}return e.updateRootBookmark().then((function(t){return n}))}))}))},n.hideNameTreePage=function(t,e){var n=this;return this.api.hideNameTreePage(this.id,t).then((function(e){if(e){var r=t;t<0&&(r=n.info.pageCount-1),n.PDFForm&&n.PDFForm.afterRemovePage(r),n.info.pageCount--;var i=n.pageCache[r]&&n.pageCache[r].info.objectNumber;n.pageCache.splice(t,1),n.updatePageIndex(t,n.info.pageCount-1),n.engine.eventEmitter.emit(St.pageRemoved,r,i),n.engine.eventEmitter.emit(St.pagesLabelNeedUpdate)}return e}))},n.updatePageIndex=function(t,e){for(var n=t;n<=e;n++)this.pageCache[n]&&(this.pageCache[n].info.index=n);this.pageCache.forEach((function(t){t&&t.annots.forEach((function(t){"link"!=t.info.type&&"screen"!=t.info.type||t._update()}))}))},n.applyRedaction=function(){var t=this;if(!this.checkPermission(Tn.annotForm)||!this.checkPermission(Tn.modify))throw new Error("Permission error");return this.api.applyRedaction(this.id).then((function(e){if(!e)return!1;for(var n=[],r=function(r){var i=e[r],o=t.getPageByIndex(i.pageIndex).then((function(e){var n=e.clearAnnotIds(i.removedAnnotIds).filter((function(t){return t}));return t.engine.eventEmitter.emit(St.annotationRemoved,n,e),{pageIndex:i.pageIndex,removedAnnots:i.removedAnnotIds}}));n.push(o)},i=0;i<e.length;i++)r(i);return Promise.all(n).then((function(e){return t.engine.eventEmitter.emit(St.applyRedaction,e),e}))}))},n.drmEncrypt=function(t){var e=this;if(!this.checkPermission(Tn.modify))throw new Error("Permission error");return this.api.drmEncrypt(this.getId(),t).then((function(t){return e.info=A()(e.info,t),e.engine.eventEmitter.emit(St.drmEncryptSuccess,e),e}),(function(t){return e.engine.eventEmitter.emit(St.drmEncryptFailed,t,e),Promise.reject(t)}))},n.getTemplates=function(){var t=this;this.api.getTemplates(this.id).then((function(e){e&&(t.visibleTemplates=e.visibleArr,t.invisibleTemplates=e.invisibleArr)}))},n.hideTemplate=function(t,e){var n=this,r=this;if(!e)return this.api.hideTemplate(this.id,t,e).then((function(){r.visibleTemplates.push(t);for(var e=-1,n=0;n<r.invisibleTemplates.length;n++){var i=r.invisibleTemplates[n];if(i.name===t.name&&i.objNum===t.objNum){e=n;break}}r.invisibleTemplates.splice(e,1)}));for(var i=this.getPageCount(),o=function(i){n.getPageByIndex(i).then((function(o){o.info.objectNumber===t.objNum&&r.removePage(i).then((function(){return r.api.hideTemplate(n.id,t,e).then((function(){r.invisibleTemplates=r.invisibleTemplates.push(t);for(var e=-1,n=0;n<r.visibleTemplates.length;n++){var i=r.visibleTemplates[n];if(i.name===t.name&&i.objNum===t.objNum){e=n;break}}r.visibleTemplates.splice(e,1)}))}))}))},a=0;a<i;a++)o(a)},n.spawnPage=function(t,e,n,r){var i=this,o=this.spawnPageExecutor.insert((function(){return i.api.spawnPage(i.id,t,e,n,r).then((function(t){return delete i.ocgs,i.api.getLayerNodes(i.id).then((function(t){return i.ocgs=t})).then((function(e){return t}))})).then((function(t){if(!t)return!1;i.info.pageCount++;var e=new Xv(t,i);return i.pageCache.splice(t.index,0,e),i.updatePageIndex(t.index+1,i.info.pageCount-1),e})).then((function(t){return!!t&&i.reloadPDFForm().then((function(t){return i.PDFForm.reloadForm(t.formInfo)})).then((function(){return t}))}))}));return this.spawnPageExecutor.execInverse((function(){return o.then((function(t){var e=S()(t,1)[0];return!!e&&(i.engine.eventEmitter.emit(St.pageAdded,e),i.updateRootBookmark())}))})),o.then((function(t){return S()(t,1)[0]}))},n.removeTemplate=function(t){var e=this;return this.api.removeTemplate(this.id,t).then((function(n){for(var r=-1,i=0;i<e.invisibleTemplates.length;i++){if(e.invisibleTemplates[i].name===t){r=i;break}}e.invisibleTemplates.splice(r,1),r=-1;for(var o=0;o<e.visibleTemplates.length;o++){if(e.visibleTemplates[o].name===t){r=o;break}}return e.visibleTemplates.splice(r,1),Promise.resolve()}))},n.getPageSizes=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getPageCount()-e;return e<0&&(e=0),e+n>this.getPageCount()&&(n=this.getPageCount()-e),this.api.getPageSizes(this.id,e,n).then((function(e){return A()(t.info.pageSizes,e),e}))},n.getPageSizesByIndex=function(t){return this.api.getPageSizes(this.id,t,1).then((function(t){return t}))},n.getPageSize=function(t){var e=this.info.pageSizes;if(e[t])return A()({},e[t]);var n=this.pageCache[t];return n?{width:n.getWidth(),height:n.getHeight()}:void 0},n.getEstimatedPageSize=function(t){var e=this.info.pageSizes,n=Object.keys(e);if(n.length>0)return A()({},e[n.pop()])},n.getPageSizesSync=function(){var t=this;if(0==Object.keys(this.info.pageSizes).length)this.pageCache.forEach((function(e,n){e&&(t.info.pageSizes[n]={width:e.getWidth(),height:e.getHeight()})}));return this.info.pageSizes},n.isPageSameSize=function(){if(!1===this.pageSameSize)return this.pageSameSize;var t=this.getPageSizesSync(),e=new Set(Object.values(t).map((function(t){return t.width})));return this.pageSameSize=1==e.size},n.updatePageSize=function(t,e,n){var r=this.info.pageSizes;r[t]&&(r[t].width=e,r[t].height=n)},n.insertPages=function(t){var e=this,n=t.destIndex,r=t.file,i=t.password,o=void 0===i?"":i,a=t.flags,s=void 0===a?0:a,c=t.layerName,u=void 0===c?"":c,d=t.startIndex,l=t.endIndex;if(!this.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");var h=this.getPageCount();if(n<0||n>h)throw new Error("Param error: Index is out of the valid range.");if(1==s&&!u)throw new Error("Param error: If parameter flags is 1, parameter layerName should not be empty");return this.api.startImportPages(this.id,n,r,o,s,u,d,l).then((function(t){return delete e.ocgs,e.api.getLayerNodes(e.id).then((function(t){return e.ocgs=t})).then((function(e){return t}))})).then((function(t){var r;e.info.pageSizes={},e.info.pageCount+=t.length;var i=[];return t.forEach((function(t){var n=new Xv(t,e);i.push(n)})),(r=e.pageCache).splice.apply(r,[n,0].concat(i)),e.updatePageIndex(n,e.info.pageCount-1),e.updatePageLabelsByAction("insertPages",[n,t.length]),e.engine.eventEmitter.emit(St.importPages,i),e.updateRootBookmark().then((function(t){return i}))}))},n.mergePDFDoc=function(t){var e=t||{},n=e.insertIndex,r=e.doc,i=e.pages;if(!r)return Promise.reject(new Error("Missing required option: doc"));var o=this.getPageCount();"number"!=typeof n&&(n=o),n=Math.max(0,Math.min(o,n)),Array.isArray(i)?i.sort((function(t,e){return t>e?1:-1})):i=Array(r.getPageCount()).fill(0).map((function(t,e){return e}));var a=r.getPageCount();for(var s in i){var c=i[s];if(c<0||c>=a)return Promise.reject(new Error("Incorrect page index: ".concat(c,", it must be greater than or equal to 0 or less then total page count ").concat(a)))}return this.importPagesFromPDFDocs({destIndex:n,srcDocs:[{srcDocId:r.getId(),srcPages:i}],layerName:t.layerName})},n.importPagesFromPDFDocs=function(){var t=D()(N.a.mark((function t(e){var n,r,i,o,a,s,c,u,d,l,h,f=this;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.destIndex,i=e.srcDocs,o=void 0===i?[]:i,a=e.layerName,s=void 0===a?"":a,this.checkPermission(Tn.assemble|Tn.modify)){t.next=3;break}throw new Error("Permission error");case 3:if(c=this.getPageCount(),!(r<0||r>c)){t.next=6;break}throw new Error("Param error: Index is out of the valid range.");case 6:return t.next=8,this.api.importPagesFromPDFDocs(this.id,r,o,s);case 8:if(u=t.sent,d=u.pagesJson,l=u.errs,0!==d.length){t.next=13;break}return t.abrupt("return",{pages:[],errs:l});case 13:return delete this.ocgs,t.next=16,this.api.getLayerNodes(this.id);case 16:return this.ocgs=t.sent,this.info.pageSizes={},this.info.pageCount+=d.length,h=d.map((function(t){return new Xv(t,f)})),(n=this.pageCache).splice.apply(n,[r,0].concat(E()(h))),this.updatePageIndex(r,this.info.pageCount-1),this.updatePageLabelsByAction("insertPages",[r,d.length]),this.bookmarkRoot=null,this.engine.eventEmitter.emit(St.importPages,h),t.abrupt("return",{pages:h,errs:l});case 26:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.exportPagesToPDFDocs=function(){var t=D()(N.a.mark((function t(e){var n,r,i,o,a,s,c,u,d,l=this;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.srcPages,r=e.destDocs,i=void 0===r?[]:r,o=e.layerName,a=void 0===o?"":o,s=e.bookmarkTitle,c=void 0===s?"":s,t.next=3,this.api.exportPagesToPDFDocs(this.id,n,i.map((function(t){var e=t.destDoc,n=t.destIndex;return{destDocId:e.getId(),destIndex:n}})),a,c);case 3:return u=t.sent,t.next=6,Promise.all(u.map(function(){var t=D()(N.a.mark((function t(e){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.docId,r=e.name,!n){t.next=7;break}return t.next=4,l.engine.getPDFDocByCacheId(n);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=null;case 8:return t.t1=t.t0,t.t2=r,t.abrupt("return",{doc:t.t1,name:t.t2});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return d=t.sent,t.abrupt("return",d);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.getPDFDocById=function(t){return this.engine.getPDFDocByCacheId(t)},n.extractPages=function(t){if(-4!=this.checkPermission(4294967292))throw new Error("Permission error");var e=[],n=this.getPageCount();if(!t instanceof Array)throw new Error("Param error. Only array is available.");if(0===t.length)throw new Error("Param error. Non-valid array.");return t.forEach((function(t){if(!t instanceof Array)throw new Error("Param error. Only array is available.");if(0===t.length||t.length>2)throw new Error("Param error. Non-valid array.");if(isNaN(t[0])||t[0]<0||t[0]>=n)throw new Error("Param error: Index is out of the valid range.");if(t[1]&&(isNaN(t[1])||t[1]<0||t[1]>=n))throw new Error("Param error: Index is out of the valid range.")})),this.api.extractPages(this.id,t,(function(t){var n=t.arrayBuffer;e.push(n)}),void 0,void 0).then((function(t){return e}))},n.copyPages=function(t,e){var n=this.getPageCount();if(!Z(e)||e>n)throw new Error("Param error: ToPageIndex is out of the valid range.");if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length)throw new Error("Param error. Non-valid array.");return t.forEach((function(t){if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length||t.length>2)throw new Error("Param error. Non-valid array.");if(!Z(t[0])||t[0]<0||t[0]>=n)throw new Error("Param error: Index is out of the valid range.");if(t[1]&&(!Z(t[1])||t[1]<=t[0]||t[1]>=n))throw new Error("Param error: Index is out of the valid range.")})),this.api.copyPages(this.id,t,e).then(this._importPagesAndUpdate.bind(this,e))},n._importPagesAndUpdate=function(){var t=D()(N.a.mark((function t(e,n){var r,i,o=this;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.info.pageSizes={},this.info.pageCount+=n.length,i=[],n.forEach((function(t){var e=new Xv(t,o);i.push(e)})),(r=this.pageCache).splice.apply(r,[e,0].concat(i)),this.updatePageIndex(e,this.info.pageCount-1),this.updatePageLabelsByAction("insertPages",[e,n.length]),this.engine.eventEmitter.emit(St.importPages,i),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),n.saveCopyPagesData=function(t){return this.api.saveCopyPagesData(this.id,t)},n.pastePages=function(t){return this.api.pastePages(this.id,t).then(this._importPagesAndUpdate.bind(this,t))},n.embedAllPageThumbnail=function(t){var e=this;return this.api.workerPromise.on("embeddingProgress",(function n(r){t(r),(1===r||-1===r)&&e.api.workerPromise.off("embeddingProgress",n)})),this.api.embedAllPageThumbnail(this.id).then((function(t){t&&e.engine.eventEmitter.emit(St.docModified,e)}))},n.removeEmbeddedPageThumbnail=function(t){var e=this;return this.api.workerPromise.on("removingProgress",(function n(r){t(r),1!==r&&-1!==r||e.api.workerPromise.off("removingProgress",n)})),this.api.removeEmbeddedPageThumbnail(this.id).then((function(t){t&&e.engine.eventEmitter.emit(St.removeEmbeddedPageThumbnail)}))},n.cancelEmbedAllPageThumbnail=function(){return this.api.cancelEmbedAllPageThumbnail(this.id)},n.cancelRemoveEmbeddedPageThumbnail=function(){return this.api.cancelRemoveEmbeddedPageThumbnail(this.id)},n.setPagesBox=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.indexes,n=t.width,r=t.height,i=t.offsetX,o=t.offsetY,a=t.boxes,s=t.removeWhiteMargin;if(!Array.isArray(e))return Promise.reject(new Error("Missing require parameter or incorrect type: 'indexes'"));var c=this.getPageCount();for(var u in e){var d=e[u];if(!tt(d,0,c,!0,!1))return Promise.reject(new Error("Incorrect page index: ".concat(d,", it must be in the range of 0 to ").concat(c-1,". indexes: [").concat(e.join(","),"]")))}return this.setAllBoxesByIndexes(e,n,r,i,o,a||{},s)},n.getAllBoxesByPageIndex=function(t){var e=this.getPageCount();return tt(t,0,e,!0,!1)?this.api.getAllBoxes(this.id,t).then((function(t){return t})):Promise.reject(new Error("Incorrect page index: ".concat(t,", it must be in the range of 0 to ").concat(e-1)))},n.setAllBoxesByIndexes=function(t,e,n,r,i,o,a){var s=this;if(-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.setAllBoxesByIndexes(this.id,t,e,n,r,i,o,a).then((function(t){var e=[];return t.forEach((function(t){var n=t.index;s.updatePageSize(n,t.width,t.height);var r=s.pageCache,i=r[n];i?i._updateInfo(t):i=new Xv(t,s),r[n]=i,e.push(i)})),s.engine.eventEmitter.emit(St.pagesBoxChange,e),e}))},n.getPageFormat=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if("batesNumbering"!==t&&-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.getPageFormat(this.id,t,e,n,r,i,o).then((function(t){return t}))},n.getPageFormatThumb=function(t,e,n,r,i,o,a){if(-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.getPageFormatThumb(this.id,t,e,n,r,i,o,a).then((function(t){return t}))},n.addPageFormat=function(t,e,n){var r=this;if(-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.addPageFormat(this.id,t,e,n).then((function(e){if(e>0&&"watermark"==t){var n,i=[],o=Nm(r.pageCache);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a){var s=a.getAnnots(!0);i.push(s)}}}catch(t){o.e(t)}finally{o.f()}return Promise.all(i).then((function(){return e}))}return e}))},n.removeAllPageFormat=function(t){var e=this;if(-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.removeAllPageFormat(this.id,t).then((function(n){if(n>0&&"watermark"==t){var r,i=[],o=Nm(e.pageCache);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a){var s=a.getAnnots(!0);i.push(s)}}}catch(t){o.e(t)}finally{o.f()}return Promise.all(i).then((function(){return n}))}return n}))},n.extractPrintPages=function(t){return this.api.extractPrintPages(this.id,t).then((function(t){return t}))},n.getHeaderFooter=function(){var t=this;return this.HF?Promise.resolve(this.HF):this.getPageFormat("headerfooter").then((function(e){if(e.res>0){var n=Gv(e.old,t.getPageCount());return t.HF=new ym(n)}return null}))},n.updateHeaderFooter=function(t){var e=this;if(!this.checkPermission(Tn.modify))throw new Error("Permission error");var n=qv(t,0,this.getPageCount());return this.getPageFormat("headerfooter").then((function(r){var i=!1;return r.res>0&&(i=!0),e.addPageFormat("headerfooter",n,i).then((function(r){if(r>0){var i=Gv(n,e.getPageCount());return e.HF?e.HF.json=i:e.HF=new ym(i),t.json=i,e.engine.eventEmitter.emit(St.headerFooterUpdated,t.range),e.engine.eventEmitter.emit(St.docModified,e),i}return r}))}))},n.addHeaderFooter=function(t){var e=this;if(t.isEmpty())return Promise.resolve();if(!this.checkPermission(Tn.modify))throw new Error("Permission error");var n=qv(t,0,this.getPageCount());return this.getPageFormat("headerfooter").then((function(r){return e.addPageFormat("headerfooter",n).then((function(r){if(r>0){var i=Gv(n,e.getPageCount());return e.HF?e.HF.json=i:e.HF=new ym(i),t.json=i,e.engine.eventEmitter.emit(St.headerFooterAdded,t.range),e.engine.eventEmitter.emit(St.docModified,e),i}return r}))}))},n.removeHeaderFooter=function(){var t=this;if(!this.checkPermission(Tn.modify))throw new Error("Permission error");return delete this.HF,this.getPageFormat("headerfooter").then((function(e){return t.removeAllPageFormat("headerfooter").then((function(e){return t.engine.eventEmitter.emit(St.headerFooterUpdated),t.engine.eventEmitter.emit(St.docModified),e}))}))},n.sign=function(t,e){var n=this;if(!this.checkPermission(Tn.annotForm)&&!this.checkPermission(Tn.fillForm))throw new Error("Permission error");if(t.defaultContentsLength||(t.defaultContentsLength=7942),t.defaultContentsLength<4098)throw new Error("The default length of signature contents should not be less than 4098, in bytes");var r,i=t.rect;if(i){var o=i.left,a=i.right,s=i.top,c=i.bottom;if(a<=o||s<=c)throw new Error("Signature rect error.")}if(!t.filter||!t.subfilter)throw new Error("Filter and Subfilter can't be null.");if(r=t.fieldName){var u=this.PDFForm.getField(r);if(!u||u.getType()!=Ln.Sign)throw new Error("Field type error: not a signature.")}var d=t.image;void 0!==d&&(t.inkSign=d,delete t.image);var l=Promise.resolve(),h=t.pageIndex;return void 0!==h&&(Ym(h,this.getPageCount()),l=this.PDFForm.addSignature(h,t.rect,r).then((function(e){return delete t.pageIndex,delete t.rect,t.fieldName=e.getName(),new Promise((function(t){return setTimeout((function(){t()}),50)}))}))),l.then((function(e){return n.api.signDoc(n.id,t)})).then((function(e){return"pageIndex"in t?n.getPageByIndex(t.pageIndex).then((function(t){return Promise.all([t,t.getUnloadedAnnots()])})).then((function(t){var e=S()(t,2),r=e[0],i=e[1];n.engine.eventEmitter.emit(St.annotationAdd,i,r)})).then((function(t){return e})):e})).then((function(n){for(var r=[],i=0,o=0;o<n.byteRange.length;o+=2){var a=n.byteRange[o],s=n.byteRange[o+1];i||(i=a+s+1),r=r.concat(n.buffer.slice(a,a+s))}return Promise.all([n,e(t,new Uint8Array(r)),i])})).then((function(e){var n=S()(e,3),r=n[0],i=n[1],o=n[2];if(i.length>t.defaultContentsLength)throw new Error("Signed data is larger than the default length, in bytes");var a=new Uint8Array(r.buffer),s=new Uint8Array(i).reduce((function(t,e){return t.push(Bm[(240&e)>>>4]),t.push(Bm[15&e]),t}),[]);return a.set(s,o),new Blob([a],{type:"application/pdf"})}))},n.signForESignCN=function(t,e){var n=this;if(!this.checkPermission(Tn.annotForm)&&!this.checkPermission(Tn.fillForm))throw new Error("Permission error");if(t.fields.forEach((function(t){var e;if(e=t.fieldName){var r=n.PDFForm.getField(e);if(!r||r.getType()!=Ln.Sign)throw new Error("Field type error: not a signature.")}})),!t.config.filter||!t.config.subfilter)throw new Error("Filter and Subfilter can't be null.");var r=[Promise.resolve()];return t.fields.forEach((function(t,e){var i=t.pageIndex;if(void 0!==i){Ym(i,n.getPageCount());var o=Promise.resolve();if(!t.fieldName&&t.fieldId)return void(r[e]=o);o=n.PDFForm.addSignature(i,t.rect,t.fieldName,{isESignCN:!0}).then((function(e){return t.fieldName=e.getName(),new Promise((function(t){return setTimeout((function(){t()}),50)}))})),r[e]=o}})),Promise.all(r).then((function(e){return n.api.signDocForESignCN(n.id,t)})).then((function(e){var r=[Promise.resolve()];return t.fields.forEach((function(t,i){if("pageIndex"in t){var o=n.getPageByIndex(t.pageIndex).then((function(t){return Promise.all([t,t.getUnloadedAnnots()])})).then((function(t){var e=S()(t,2),r=e[0],i=e[1];n.engine.eventEmitter.emit(St.annotationAdd,i,r)})).then((function(t){return e}));r[i]=o}else r[i]=Promise.resolve()})),Promise.all(r).then((function(t){return e}))})).then((function(n){for(var r=[],i=0,o=0;o<n.byteRange.length;o+=2){var a=n.byteRange[o],s=n.byteRange[o+1];i||(i=a+s+1),r=r.concat(n.buffer.slice(a,a+s))}return Promise.all([n,e(t,new Uint8Array(r)),i])})).then((function(e){var n=S()(e,3),r=n[0],i=n[1],o=n[2];if(i.length>t.defaultContentsLength)throw new Error("Signed data is larger than the default length, in bytes");var a=new Uint8Array(r.buffer),s=new Uint8Array(i).reduce((function(t,e){return t.push(Bm[(240&e)>>>4]),t.push(Bm[15&e]),t}),[]);return a.set(s,o),new Blob([a],{type:"application/pdf"})}))},n.isESignCNSignature=function(t,e){return this.api.isESignCNSignature(this.id,t,e)},n.getOriginalStream=function(){return this.api.getOriginalStream(this.id)},n.verifySignature=function(t,e){return this.api.getOriginalStream(this.id).then((function(t){return t instanceof Blob?new Promise((function(e,n){var r=new FileReader;r.onloadend=function(t){e(r.result)},r.readAsArrayBuffer(t)})):Promise.resolve(t)})).then((function(n){var r=t.getByteRange();if(r.length<4)return Promise.resolve(64);for(var i=new Uint8Array(n),o=new Uint8Array(r[1]+r[3]),a=0,s=0;s<r.length;s+=2){var c=r[s],u=r[s+1];o.set(i.slice(c,c+u),a),a+=u}for(var d=r[2]-r[1]-2,l=r[0]+r[1]+1,h=[],f=l;f<l+d;f+=2){var p=parseInt(String.fromCharCode(i[f]),16)<<4,g=parseInt(String.fromCharCode(i[f+1]),16);h.push(p+g)}return e(t,o,new Uint8Array(h),i.byteLength>r[2]+r[3])})).then((function(t){return+t}))},n.attachFile=function(t){if(!this.checkPermission(Tn.modify))throw new Error("Permission error");return this.api.attachFile(this.id,t).then((function(t){return t}))},n.getFontsInfo=function(){return this.api.getFontsInfo(this.id)},n.getLayerNodeByIdBAK=function(t){var e=(t=t.toString()).split("-");try{for(var n=this.ocgs,r=0;r<e.length;r++)n=n.children[e[r]];return n}catch(t){return null}},n.getLayerNodeById=function(t){if(!t&&0!==t)return"";var e;return function n(r){if(r&&r.id===t+"")e=r;else if(r.children&&r.children.length>0)for(var i=0;i<r.children.length&&!e;i++){n(r.children[i])}}(this.ocgs),e},n.getAdditionalAction=function(t){return this.AdditionalActions[t]},n.loadAdditionalActions=function(){var t=this;return this.api.getDocAdditionalActions(this.id).then((function(e){for(var n in t.AdditionalActions={},e)t.AdditionalActions[n]=Di.createAction(e[n],t);return t.AdditionalActions}))},n.getPdfArticle=function(){return this.pdfArticle||(this.pdfArticle=new Tm(this.engine,this)),this.pdfArticle},n.getStructureRoles=function(){var t=this.getId();return this.api.getStructureRoles(t)},n.resetEngineInstance=function(t){var e=this,n=(this.engine,this.parameters),r={range:{docId:this.id},headers:{}};n.idJWT&&(r.headers.jwt=n.idJWT),n.password&&(r.headers["x-auth-doc"]=btoa(n.password));var i,o,a=this.api,s=z();return a.resetEngine(this.id).then((function(e){var o=S()(e,2),a=o[0],s=o[1];return i=s,r.range.url=a,t.getPDFDocByHttpRangeRequest(r,n)})).then((function(t){return t.parse(n)})).then((function(n){return o=n,t.api.syncDataCache(e.id,i)})).then((function(){e.engine=t,e.api=t.api,s.resolve(o)}),(function(){s.reject(e)})),s.promise},n.setColors=function(t){return this.api.setDocColors(this.getId(),t)},n.setPageDisplayPreferences=function(t){return this.api.setPageDisplayPreferences(this.getId(),t)},n.renderTemplatesByObjNum=function(t){return this.api.renderTemplatesByObjNum(this.id,Number(t))},n.getNameTree=function(t){return this.api.getNameTree(this.id,Number(t))},n.addNameTreeObj=function(t,e,n){return this.api.addNameTreeObj(this.id,Number(t),String(e),Number(n))},n.removeNameTreeObj=function(t,e){return this.api.removeNameTreeObj(this.id,Number(t),String(e))},n.replaceNameTreeObj=function(t,e,n){return this.api.replaceNameTreeObj(this.id,Number(t),String(e),Number(n))},n.renameNameTreeObj=function(t,e,n){return this.api.renameNameTreeObj(this.id,Number(t),String(e),String(n))},n.getPageIndexByObjNum=function(t){return this.api.getPageIndexByObjNum(this.id,Number(t))},n.nameTreeTemplatesToPages=function(t){return this.api.nameTreeTemplatesToPages(this.id,String(t))},n.nameTreePagesToTemplates=function(t){return this.api.nameTreePagesToTemplates(this.id,String(t))},n.addFileSpec=function(t,e,n){return this.api.addFileSpec(this.id,String(t),e,n)},n.setFileSpecDesc=function(t,e){return this.api.setFileSpecDesc(this.id,String(t),Number(e))},n.getFileSpecStream=function(t){var e=[];return this.api.getFileSpecStream(this.id,Number(t),(function(t){var n=t.arrayBuffer,r=t.blob;t.offset,t.size;r?e=r:e.push(n)})).then((function(){return e}))},n.addEmbeddedFileByAttachments=function(t,e){var n=this;return this.api.addEmbeddedFileByAttachments(this.id,String(t),Number(e)).then((function(t){return t&&n.engine.eventEmitter.emit(St.documentAttachmentAdd),t}))},n.setEmbeddedFileByAttachments=function(t,e){var n=this;return this.api.setEmbeddedFileByAttachments(this.id,String(t),Number(e)).then((function(t){return t&&n.engine.eventEmitter.emit(St.documentAttachmentModify),t}))},n.removeEmbeddedFileByAttachments=function(t){var e=this;return this.api.removeEmbeddedFileByAttachments(this.id,String(t)).then((function(t){return t&&e.engine.eventEmitter.emit(St.documentAttachmentRemove),t}))},n.moveAnnotsToPage=function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Object.keys(n).map((function(t){return+t})),a=o.map((function(e){return t.annotIdMap[e]})).filter((function(t){return!!t})),s="widget"!=a[0].getType();return this.api.moveAnnotsToPage(this.id,t.getId(),e.getId(),n).then((function(c){return Promise.resolve(t.clearAnnotIds(o)).then((function(t){return e.getUnloadedAnnots()})).then((function(o){if("popup"===o[0].info.type){var c=o[0];o[0]=o[1],o[1]=c}var u=r.engine.eventEmitter;return u.emit(St.annotationRemoved,a,t),u.emit(St.annotationAdd,o,e),i||(u.emit(St.moveAnnotsToPages,t,e,n,s),u.emit(St.annotationMovedPosition,[o[o.length-1]],e,o[o.length-1])),o}))}))},n.getInfo=function(){var t=this;return this.api.getPDFDictInfo(this.id).then((function(e){return new Wv(t,e.id,t.engine)}))},n.getInfos=function(){return this.api.getInfos(this.id)},n.hasDocIsWrapped=function(){return this.api.hasDocIsWrapped(this.id)},n.getPageLabels=function(t){return this.api.getPageLabels(this.id,t)},n.autoRecognitionForm=function(){var t=this;return this.api.autoRecognitionForm(this.id).then((function(e){var n=[];return 0===e?e:(t.engine.eventEmitter.emit(St.recognitionForm,t),t.reloadPDFForm().then((function(r){var i,o=Nm(t.pageCache);try{var a=function(){var e=i.value;if(!e)return"continue";var r=e.getUnloadedAnnots().then((function(n){return n&&n.length>0&&t.engine.eventEmitter.emit(St.annotationAdd,n,e),Promise.resolve()}));n.push(r)};for(o.s();!(i=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}return Promise.all(n).then((function(){return t.engine.eventEmitter.emit(St.permissionChanged,t),e}))})))}))},n.isStaticXFA=function(){return 1==this.info.fileType},n.isXFA=function(){return Promise.resolve(0!=this.info.fileType)},n.isXFARemoved=function(){return this.info.XFARemoved},n.removeXFA=function(){var t=this;return this.api.removeXFA(this.id).then((function(e){return!!e&&(t.info.XFARemoved=!0,t.reloadPDFForm().then((function(e){return t.PDFForm.reloadForm(e.formInfo)})).then((function(){return!0})))}))},n.isPortfolio=function(){return this.info.isPortfolio},n.startPageEdit=function(t,e,n,r){return this.pageEditing?Promise.resolve():(this.pageEditing=!0,this.api.handlePageEditorEvent(this.id,"StartEdit",!1,t,e,n,r))},n.endPageEdit=function(){return this.pageEditing=!1,this.api.handlePageEditorEvent(this.id,"EndEdit")},n.startFormDesignerAssit=function(){return this.api.startFormDesignerAssit(this.id)},n.stopFormDesignerAssit=function(){return this.api.stopFormDesignerAssit(this.id)},n.reversePages=function(t){var e=this;return this.api.reversePages(this.id,t).then((function(t){var n=t.length;if(n>0){for(var r=0,i=n-1;r<i;r++,i--){var o=e.pageCache[r];e.pageCache[r]=e.pageCache[i],e.pageCache[i]=o}e.updatePageIndex(0,n-1);for(var a=0,s=n-1;a<s;a++,s--)e.engine.eventEmitter.emit(St.pagesMoved,t)}}))},n.reversePagesWithMovePages=function(){var t=D()(N.a.mark((function t(e){var n,r,i,o,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=e.length)>1)){t.next=15;break}r=0,i=n-1;case 3:if(!(r<i)){t.next=15;break}return o=Math.min(e[r],e[i]),a=Math.max(e[r],e[i]),t.next=8,this.movePagesTo([[a]],0);case 8:return t.next=10,this.movePagesTo([[o+1]],a+1);case 10:return t.next=12,this.movePagesTo([[0]],o+1);case 12:r++,i--,t.next=3;break;case 15:this.updatePageLabelsByAction("reversePages",[Array.from(e,(function(t,e){return e}))]);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.movePagesTo=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.getPageCount();if(!t||0===t.length||Math.min.apply(Math,E()(t.flat()))<0||Math.max.apply(Math,E()(t.flat()))>r-1)throw new Error("Param error: pageRange is out of the valid range.");if(isNaN(n)||n<0||n>r)throw new Error("Param error: Index is out of the valid range.");var i=[];return t.forEach((function(t){for(var e=t[0];e<=t[t.length-1];e++)i.push(e)})),t=Array.from(new Set(i.sort((function(t,e){return t-e})))),this.api.movePagesTo(this.id,t,n).then((function(r){if(r){var i=Fa(t).sort((function(t,e){return t-e})),o=i.filter((function(t){return t<n})),a=i.filter((function(t){return t>n}));return o.reverse().forEach((function(t,r){var i=e.pageCache[t];e.pageCache.splice(t,1),e.pageCache.splice(n-r-1,0,i)})),a.forEach((function(t,r){var i=e.pageCache[t];e.pageCache.splice(t,1),e.pageCache.splice(n+r,0,i)})),s=Math.min(n,i[0]),c=Math.max(n,a),u=Math.min(s,c),d=Math.max(s,c),e.updatePageIndex(u,d),e.engine.eventEmitter.emit(St.pagesMoved,t,n,r),e.updateRootBookmark().then((function(t){return r}))}var s,c,u,d}))},n.movePagesToThenUpdatePageLabel=function(){var t=D()(N.a.mark((function t(e){var n,r,i,o=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:0,t.next=3,this.movePagesTo(e,n);case 3:return r=t.sent,i=e.reduce((function(t,e){var n=S()(e,2),r=n[0],i=n[1];if(void 0===i)t.push(r);else{for(var o=[];r<=i;)o.push(r++);t.push.apply(t,o)}return t}),[]),e=Array.from(new Set(i.sort((function(t,e){return t-e})))),this.updatePageLabelsByAction("movePages",[e,n]),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startReplacePages=function(t,e,n,r){var i=this,o=[];return r.forEach((function(t){for(var e=t[0];e<=t[t.length-1];e++)o.push(e)})),r=Array.from(new Set(o.sort((function(t,e){return t-e})))),this.api.startReplacePages(this.id,t,e,n,r).then((function(n){var r;if(n&&n.error)return n;i.info.pageSizes={},i.info.pageCount-=e,i.info.pageCount+=n.length;var o=[];n.forEach((function(t){var e=new Xv(t,i);o.push(e)})),(r=i.pageCache).splice.apply(r,[t,e].concat(o)),i.updatePageIndex(t,i.info.pageCount-1);var a=new Array(e).fill(0).map((function(e,n){return t+n}));return i.engine.eventEmitter.emit(St.pagesReplace,{delPageRange:a,pages:o}),n}))},n.setPageTransition=function(t,e,n,r){var i=[];return r.forEach((function(t){for(var e=t[0];e<=t[t.length-1];e++)i.push(e-1)})),r=Array.from(new Set(i.sort((function(t,e){return t-e})))),this.api.setPageTransition(this.id,t,e,n,r)},n.getPageTransitionByIndex=function(t){return this.api.getPageTransitionByIndex(this.id,t)},n.removePages=function(t){var e=this;if(!this.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");this.info.pageSizes={};var n=this.getPageCount();if(1===n)throw new Error("Not allowed to remove the only page.");qm(t,n-1);for(var r=Fa(t).sort((function(t,e){return e-t})),i=[],o=0;o<r.length;o++){var a=r[o];this.pageCache[a]||i.push(this.getPageByIndex(a))}return Promise.all(i).then((function(n){return e.api.removePages(e.id,t).then((function(n){var i=[];return r.forEach((function(t){e.PDFForm&&e.PDFForm.afterRemovePage(t),e.info.pageCount--,i.push(e.pageCache[t].info.objectNumber),e.pageCache.splice(t,1),e.updatePageIndex(t,e.info.pageCount-1)})),e.updatePageLabelsByAction("deletePages",[t]),e.engine.eventEmitter.emit(St.pagesRemoved,t,i),e.updateRootBookmark().then((function(t){return n}))}))}))},n.insertBlankPages=function(t,e,n){var r=this;if(!this.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");this.info.pageSizes={};var i=this.getPageCount();if("number"!=typeof e||"number"!=typeof n)throw new Error("param error. Only number is available.");return qm(t,i),this.api.insertBlankPages(this.id,t,e,n).then((function(t){var e=[];return t.forEach((function(t){e.push(Promise.resolve((delete r.ocgs,r.api.getLayerNodes(r.id).then((function(t){return r.ocgs=t})).then((function(e){return t})).then((function(t){if(!t)return!1;r.info.pageCount++;var e=new Xv(t,r);return r.pageCache.splice(t.index,0,e),r.updatePageIndex(t.index+1,r.info.pageCount-1),r.PDFForm&&r.PDFForm.afterInsertPage(t.index),e})))))})),zm(e).then((function(e){return r.updatePageLabelsByAction("insertPagesByRange",[t.map((function(t){return t.index}))]),r.engine.eventEmitter.emit(St.insertPages,e),e})).then((function(t){return r.updateRootBookmark().then((function(e){return t}))}))}))},n.rotatePages=function(t,e){var n=this;if(!this.checkPermission(Tn.assemble|Tn.modify))throw new Error("Permission error");if(Object.values(Ve).every((function(t){return t!==e})))throw new Error("rotation parameter error");var r=this.getPageCount();qm(t,r-1);var i=Fa(t);return Gm(this,i).then((function(r){var i=r.map((function(t){return t.getRotation()}));return n.api.rotatePages(n.id,t,e).then((function(t){var o=[];return r.forEach((function(t){o.push(t.updateInfo())})),Promise.all(o).then((function(t){n.engine.eventEmitter.emit(St.pagesRotated,r,e,i)}))}))}))},n.checkDocHasPageLabel=function(){return t=this._pageLabelInfo,e=this,t.hasPageLabelStatus===wm.UNINITIALIZED&&Fm(t,e),t.hasPageLabel;var t,e},n.checkDocIsUseLogicPage=function(){return this.api.checkDocIsUseLogicPage(this.id)},n.getPageIndexByLabelText=function(t){return this.api.getPageIndexByLabelText(this.id,t)},n.getCurrentPageLabelInfo=function(t){return this.api.getCurrentPageLabelInfo(this.id,t)},n.formatPageNumbers=function(t,e){var n=this;return this.api.formatPageNumbers(this.id,!1,t,e).then((function(t){return Mm(n._pageLabelInfo,n),n.engine.eventEmitter.emit(St.pagesLabelChange),t}))},n.formatPageNumbersExtendNumbering=function(t){var e=this;return this.api.formatPageNumbers(this.id,!0,t).then((function(t){return Mm(e._pageLabelInfo,e),e.engine.eventEmitter.emit(St.pagesLabelChange),t}))},n.updatePageLabelsByAction=function(){var t=D()(N.a.mark((function t(e,n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.updatePageLabelsByAction(this.id,e,n);case 2:return r=t.sent,Mm(this._pageLabelInfo,this),this.engine.eventEmitter.emit(St.pagesLabelChange),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),n.getPageEditor=function(){return this.pageEditor?this.pageEditor:this.pageEditor=new Rm(this)},n.isCPDF=function(){return this.api.isCPDF(this.id)},n.getDocURI=function(){return this.api.getDocURI(this.id)},n.convertToCPDF=function(t,e,n,r){return this.api.convertToCPDF(this.id,t,e,n,r).then()},n.removeCDocId=function(t,e,n,r){return this.api.removeCDocId(this.id,t,e,n,r).then()},n.removeLayerNode=function(t){var e=this;return t||0===t?(this.getLayerNodeById(t).hasLayer?this.getLayerRelatedAnnots(t).then((function(n){return n&&n.length>0&&Xm(e,n).then((function(t){t.forEach((function(t){t.page.removeAnnotById(t.id)}))})),e.api.removeLayerNode(e.id,t)})):this.api.removeLayerNode(this.id,t)).then((function(n){return n&&(e.engine.eventEmitter.emit(St.layerRemoved,e),e.engine.eventEmitter.emit(St.layerVisibleChange,e),Jm(e.ocgs,[t])),n})):Promise.resolve(!1)},n.flattenLayers=function(){var t=this,e=[];!function t(n){if(n&&n.hasLayer&&!1===n.visible&&e.push(n),n.children&&n.children.length>0)for(var r=0;r<n.children.length;r++)t(n.children[r])}(this.ocgs);var n=[];return e.forEach((function(e){n.push(t.getLayerRelatedAnnots(e.id))})),Promise.all(n).then((function(e){return e&&e.length>0&&(e=e.reduce((function(t,e){return t=t.concat(e)}),[]),Xm(t,e).then((function(t){t.forEach((function(t){t.page.removeAnnotById(t.id)}))}))),t.api.flattenLayers(t.id)})).then((function(e){return e&&(t.ocgs.children=[]),e}))},n.getVisiblePageLayers=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.pageCache[t];r&&n.push(e.api.getLayersByPage(e.id,r.getId()))})),Promise.all(n).then((function(t){var e=[];return t.forEach((function(t){e=e.concat(t)})),e}))},n.updateLayerInfo=function(t){if(!t.id&&0!==t.id)return Promise.resolve(!1);var e=this.getLayerNodeById(t.id);return this.api.updateLayerInfo(this.id,t).then((function(n){return n&&A()(e,t),n}))},n.mergeLayers=function(t,e){var n=this;return t&&0!==t.length&&e?(t=t.filter((function(t){return t!==e})),this.api.mergeLayers(this.id,t,e).then((function(r){return r&&(Jm(n.ocgs,t),n.engine.eventEmitter.emit(St.layerMerged,t,e)),r}))):Promise.resolve(!1)},n.getLayerRelatedAnnots=function(t){return this.api.getLayerRelatedAnnots(this.id,t)},n.layerMoveTo=function(t,e,n){var r=this;return this.api.layerMoveTo(this.id,t,e,n).then((function(t){return t?(r.ocgs="",r.getLayerNodesJson().then((function(){return t}))):t}))},n.removeMetadata=function(t){var e=this;if(t&&0!==t.length){var n=[];return t.forEach((function(t){n.push(e.api.removeMetadata(e.id,t).then((function(){e.metadata.hasOwnProperty(t)&&delete e.metadata[t],e.metadata.custom&&e.metadata.custom.hasOwnProperty(t)&&delete e.metadata.custom[t]})))})),Promise.all(n).then((function(t){return e.engine.eventEmitter.emit(St.metaDataChanged,e),!0}))}},n.getDestinationsArray=function(){var t=this.getId();return this.api.getDestinationsArray(t)},n.getTabOrder=function(t){return this.api.getTabOrder(this.id,t)},n.setTabOrder=function(t,e){var n=this;return this.api.setTabOrder(this.id,t,e).then((function(t){return n.engine.eventEmitter.emit(St.docModified,n),t}))},n.setStructureOrder=function(t,e){var n=this,r=function(e){if(0!==e.length)return n.api.setStructureOrder(n.id,t,e).then((function(t){return n.engine.eventEmitter.emit(St.docModified,n),t}))};return e?r(e):this.getPageAnnotsIdList(t).then(r)},n.getEmbeddedFontData=function(){return this.api.getEmbeddedFontData(this.id)},n.computeAuditSpace=function(){return this.api.computeAuditSpace(this.id)},n.optimizer=function(t,e){var n=this;return this.api.optimizer(this.id,t,e).then((function(t){return{fileName:n.info.fileName,buffer:t}}))},n.optimizeScannedPDF=function(t,e){var n=this,r=this.getPageCount(),i=t.pageRange;if(i){(i+="").endsWith(",")&&(i=i.slice(0,i.length-1));var o=i.split(",").map((function(t){var e=t.split("-");if(e.length>1){t=[];for(var n=Math.min.apply(Math,E()(e)),i=Math.min(Math.max.apply(Math,E()(e)),r),o=n;o<=i;o++)t.push(o);t=t.join(",")}return t}));o=o.join(",").split(",").map((function(t){return t-1})),i=Array.from(new Set(o.sort((function(t,e){return t-e})))),t.pageRange=i}return this.api.optimizeScannedPDF(this.id,t,e).then((function(t){return!!t&&{fileName:n.info.fileName,buffer:t}}))},n.importAsLayer=function(t){var e=this;return t.targetFileName||(t.targetFileName=this.metadata.FileName||this.metadata.Title),this.api.importAsLayer(this.id,t).then((function(t){return t&&(e.ocgs=t,e.engine.eventEmitter.emit(St.layerVisibleChange,e)),t}))},n.previewImportLayer=function(t){return this.api.previewImportLayer(this.id,t)},n.reloadLayer=function(){return this.api.reloadLayer(this.id)},n.exportMeasureData=function(t){var e=this;return this.api.exportMeasureData(this.id,t).then((function(t){var n=e.info.fileName||"Untitled.pdf";return{fileName:n=n.substr(0,n.lastIndexOf("."))+".csv",buffer:t}}))},n.setRenderConfigLineWeight=function(t){return this.api.setRenderConfigLineWeight(this.id,t)},n.search=function(t,e,n,r){return this.api.searchDoc(this.id,t,e,n,r)},n.generateDocHash=function(t){return this.api.generateDocHash(this.id,t)},n.getDocAuditTrail=function(t){var e=this;return this.getAssignInfoForESignCN().then((function(n){var r=[];return n&&n.length>0&&(r=n.reduce((function(t,e){var n=e.annots.map((function(t){return Lm(Lm({},t),{},{assignUserName:e.userName,assignUserEmail:e.email,company:e.company})}));return[].concat(E()(t),E()(n))}),[]).filter((function(t){return"FullSignature"===t.type}))),e.api.getDocAuditTrail(e.id,t,r).then((function(t){return t}))}))},n.updatePropAuthDictForESignCN=function(t){var e=t.fieldName,n=t.willingnessInfo;return this.api.updatePropAuthDictForESignCN(this.id,e,n)},n.assignSignerForESignCN=function(t){var e=this,n=[];return t.forEach((function(t){t.fields.forEach((function(r){var i={fieldId:r.id,email:t.email,phoneNumber:t.mobile,nameValue:t.name,company:t.company,color:t.color,fieldType:r.fieldType,pageId:r.pageId,signMode:t.signMode,companyId:t.companyId,companyName:t.companyName},o=e.api.assignSignerForESignCN(e.id,i);n.push(o)}))})),Promise.all(n)},n.getAssignInfoForESignCN=function(){var t=this;return this.api.getAssignInfoForESignCN(this.id).then((function(e){var n=e.reduce((function(t,e){return[].concat(E()(t),E()(e))}),[]).map((function(t){return t.email=t.email?t.email:null,t.phoneNumber=t.phoneNumber?t.phoneNumber:null,t.companyId=t.EnterpriseId||"",t})).reduce((function(t,e){var n="".concat(e.email,"-").concat(e.phoneNumber,"-").concat(e.company);return t[n]?t[n]=Lm(Lm({},t[n]),{},{annots:[].concat(E()(t[n].annots),E()(e.annots))}):t[n]=e,t}),{}),r=Object.keys(n).map((function(t){return n[t]}));return r.forEach((function(t){var e=t.annots.some((function(t){return"FullSignature"===t.type&&!t.isESignCNSignature}));t.illegalFillBehavior=e})),t.getOrderOfSignFlowFile().then((function(t){return r.forEach((function(e,n){var r="".concat(e.email?e.email:"").concat(e.phoneNumber?e.phoneNumber:"").concat(e.company?e.company:"");e.sort=t.indexOf(r)})),r.sort((function(t,e){return t.sort-e.sort})),r}))}))},n.checkFieldWhetherFill=function(t){return this.api.checkFieldWhetherFill(this.id,t)},n.getOrderOfSignFlowFile=function(){return this.api.getOrderOfSignFlowFile(this.id)},n.setESignCNFlowSignMode=function(t){return this.api.setESignCNFlowSignMode(this.id,t)},n.getESignCNFlowSignMode=function(){return this.api.getESignCNFlowSignMode(this.id)},n.isESignCNFile=function(){return this.api.isESignCNFile(this.id)},n.getESignCNMode=function(t){return this.api.getESignCNMode(this.id,t)},n.setSignatureAP=function(t){var e=t.pageIndex,n=t.annotId,r=t.inkSignBuffer;return this.api.setSignatureAP(this.id,e,n,r)},n.getFlowSignInfo=function(){return this.api.getFlowSignInfo(this.id)},n.addAuditTrail=function(){return this.api.addAuditTrail(this.id)},n.convertToTextMarkup=function(t){var e=this;return this.api.convertToTextMarkup(this.id,t).then((function(t){t.forEach((function(t){var n=e.pageCache[t];n&&n.getUnloadedAnnots().then((function(t){return e.engine.eventEmitter.emit(St.annotationAdd,t,n)}))}))}))},n.redactSearch=function(t,e,n,r,i){var o=this;return this.api.redactSearch(this.id,t,e,n,r,i).then((function(t){t.forEach((function(t){var e=o.pageCache[t];e&&e.getUnloadedAnnots().then((function(t){return o.engine.eventEmitter.emit(St.annotationAdd,t,e)}))}))}))},n.isScannedDoc=function(){return this.api.isScannedDoc(this.id)},n.getCompareFileFilterNums=function(){return this.api.getCompareFileFilterNums(this.id)},n.readonly=function(){var t=D()(N.a.mark((function t(){var e,n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.info.pdfaid,n=!1,(r=window.localStorage.getItem("PREFERENCES-DOCUMENTS"))&&"onlyForPDFA"===JSON.parse(r).vieMode&&(n=!0),t.abrupt("return",e&&n&&!this.pdfaEditable);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.isPdfaDoc=function(){var t=D()(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.metadata.pdfaid){t.next=3;break}return t.next=3,this.getMetadata();case 3:return t.abrupt("return",!!this.metadata.pdfaid);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.setPdfaEditable=function(t){t&&this.api.removePDFAID(this.id),this.pdfaEditable=t},n.getText=function(t){var e=this;if(!this.checkPermission(Tn.extract))throw new Error("Permission error");if(this.isStaticXFA())throw new Error("File type error, current is Static documents");var n=this.getPageCount();Km(t,n-1);var r=Object(Qi.a)("task_progress"),i=new _m((function(){e.api.cancelTaskProgress(e.id,r)}));return this.api.getText(this.id,t,r,(function(t){i.updateProgress(t)})),i},n.createSummarizeComments=function(t,e){var n=this,r=this.getId();return this.PDFForm?this.PDFForm.addTask().then((function(){return n.api.createSummarizeComments(n.id,t,e)})):this.api.createSummarizeComments(r,t,e)},n.hiddenDataSanitizeDocument=function(){var t=D()(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.hiddenDataSanitizeDocument(this.id);case 2:this.otherOptions.afterHiddenDataOperateAndReopenFile=!0;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.hiddenDataRemoveHiddenInfo=function(){var t=D()(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.hiddenDataRemoveHiddenInfo(this.id,e);case 2:this.otherOptions.afterHiddenDataOperateAndReopenFile=!0;case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.searchText=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getPageCount();return Km(t,r-1),this.search(t,e,n,!1).then((function(t){for(var e={},n=0,r=Object.entries(t);n<r.length;n++){var i=S()(r[n],2),o=i[0],a=i[1],s=[],c={};a.forEach((function(t){var e=t.rects,n=t.word;c={rects:e,word:n},s.push(c)})),e[o]=s}return e}))},n.loadThumbnail=function(t){var e=t.pageIndex,n=t.scale,r=t.rotation,i=t.type,o=t.width,a=t.height;if("number"!=typeof e)return Promise.reject(new Error("Options missing: 'pageIndex'"));var s=this.getPageCount();return e<0||e>=s?Promise.reject(new Error("Range of 'pageIndex' must be between 0 to ".concat(s-1,"(inclusive), but actual: ").concat(e,"."))):this.getPageByIndex(e).then((function(t){if(!t)throw new Error("Cannot obtains the page of index: ".concat(e));if(!n){var s=t.getPxWidth(),c=t.getPxHeight();o||a||(o=200,a=300);var u=o/s,d=a/c;n=isNaN(u)?d:isNaN(d)?u:Math.min(u,d);var l=Math.min(Ht.INTERNAL_THUMBNAIL_BITMAP_WIDTH/s,Ht.INTERNAL_THUMBNAIL_BITMAP_HEIGHT/c);n/=l}return t.getThumb(r||0,n).then((function(t){switch(i||"canvas"){case"canvas":return function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");return jm(t).then(tl).then((function(t){return n.drawImage(t,0,0),e}))}(t);case"image":return jm(t).then(tl);case"buffer":return function(t){return jm(t).then((function(t){var e=new FileReader;return new Promise((function(n){e.onloadend=function(){n(e.result)},e.readAsArrayBuffer(t)}))}))}(t);default:throw new Error("Invalid options.type: ".concat(i))}}))}))},n.verifyDocSignature=function(t){var e=this,n=this.getId();return this.engine.ensureSideModeLoaded().then((function(r){return e.api.verifyDocSignature(n,t)}))},n.setSelectedInfo=function(t){this.selectedInfo=t},n.clearSelectedInfo=function(){this.selectedInfo=void 0},n.clearAllDesignerAssistCache=function(){return this.api.clearAllDesignerAssistCache(this.getId())},Tt()(e,[{key:"hasOwnerPassword",get:function(){return!!this.info.hasOwnerPassword},set:function(t){this.info.hasOwnerPassword=!!t}},{key:"pdfPortfolio",get:function(){if(this.isPortfolio())return this._pdfPortfolio||(this._pdfPortfolio=new Em(this.engine,this)),this._pdfPortfolio},set:function(t){this._pdfPortfolio=t}}]),e}(vt.a);function jm(t){if(t.buffer){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d"),r=new(Uint8ClampedArray||Uint8Array)(t.buffer),i=n.createImageData(t.width,t.height);return i.data.set(r),n.putImageData(i,0,0),new Promise((function(t){e.toBlob(t)}))}return t.image?Promise.resolve(t.image):Promise.reject(t)}var Hm=function(t,e,n){for(var r=[],i=0,o="",a=0,s=0,c=0,u=t.length;c<u;c++){var d=t[c];switch(t[c]){default:o+=d;break;case n:1==i&&t[c+1]==n?(o+=n,c+=1):i++;break;case e:a=s,s=c,1==i&&(o+=e),i%2==0&&(i=0,r.push(o),o="")}}return(o.length||a==s-1)&&r.push(o),r},Wm=function(t,e,n,r){return"\t"==n?(t=t.split(n),e=e.split(n)):(e=Hm(e,n,r),t=Hm(t,n,r)),t.length,e.length,t.reduce((function(t,n,r){return t[n]=e[r],t}),{})},$m=function t(e,n){if(n.add(e.getId()),e.isMarkup()){var r=e.getReplies();r.forEach((function(e){return t(e,n)})),(r=e.getMarkedStates()).forEach((function(t){return n.add(t.getId())})),(r=e.getReviewStates()).forEach((function(t){return n.add(t.getId())})),e.isReplace&&e.isReplace()&&(r=e.getGroupElements()).forEach((function(t){return n.add(t.getId())}))}},Ym=function(t,e){if((t|e-1-t)<0)throw new Error("Page range error.")},qm=function(t,e){if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length)throw new Error("Param error. Non-valid array.");t.forEach((function(t){if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length||t.length>2)throw new Error("Param error. Non-valid array.");if(isNaN(t[0])||t[0]<0||t[0]>e)throw new Error("Param error: Index is out of the valid range.");if(t[1]&&(isNaN(t[1])||t[1]<0||t[1]>e))throw new Error("Param error: Index is out of the valid range.")}))},Gm=function(t,e){var n=[];return e.forEach((function(e){n.push(t.getPageByIndex(e))})),Promise.all(n)},zm=function(t){var e=[];return t.reduce((function(n,r,i){return n.then((function(n){return r.then((function(n){return e[i]=n,i==t.length-1?e:r}))}))}),Promise.resolve())},Km=function(t,e){if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length)throw new Error("Param error. Non-valid array.");t.forEach((function(t){if(isNaN(t)||t<0||t>e)throw new Error("Param error: Index is out of the valid range.")}))},Jm=function(t,e){!function t(n){if(n.children&&n.children.length>0)for(var r=n.children.length-1;r>-1;r--){t(n.children[r])&&n.children.splice(r,1)}return e.indexOf(n.id)>-1?n:null}(t)},Xm=function(t,e){return t.getAnnots().then((function(t){for(var n=[],r=0;r<t.length&&n.length!==e.length;r++)for(var i=t[r],o=0;o<i.length&&n.length!==e.length;o++){var a=i[o];e.indexOf(a.objectNumber)>-1&&n.push(a)}return n}))},Zm=Um,Qm=function(t){function e(e,n){return t.call(this,e,n)||this}return O()(e,t),e}(Qg),ty=function(t){function e(e,n){return t.call(this,e,n)||this}return O()(e,t),e.prototype.isReplace=function(){return"Replace"===this.info.typeAlias},e}(Qg),ey=function(t){function e(e,n){return t.call(this,e,n)||this}return O()(e,t),e}(Qg),ny=function(t){function e(e,n){return t.call(this,e,n)||this}return O()(e,t),e}(Qg),ry=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getEndPoint=function(){return this.info.endPoint},n.setEndPoint=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setLineEndPoint(r.getId(),n.getId(),this.getId(),t.x,t.y).then((function(t){return e.update(_n.endPointUpdated)})).then((function(){e.info.endPoint=t,e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)}))},n.getStartPoint=function(){return this.info.startPoint},n.setStartPoint=function(t){var e=this;this.checkModidyPerm();var n=!arguments[1],r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setLineStartPoint(i.getId(),r.getId(),this.getId(),t.x,t.y).then((function(t){return e.update(n&&_n.startPointUpdated)})).then((function(){e.info.startPoint=t,n&&e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],r)}))},n.getEndingStyle=function(){return this.info.endingStyle},n.getStartStyle=function(){return this.info.startStyle},n.setEndingStyle=function(t,e){var n=this;this.checkModidyPerm();var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setAnnotEndingStyle(i.getId(),r.getId(),this.getId(),t,e).then((function(t){return n.update(_n.endingStyleUpdated)})).then((function(){t?n.info.startStyle=e:n.info.endingStyle=e,n.eventEmitter.emit(St.annotationAppearanceUpdated,[n],r)}))},n.flip=function(){var t=this,e=this.getStartPoint(),n=this.getEndPoint(),r=new J;return r.rotateAt(-(e.x+n.x)/2,-(e.y+n.y)/2,Math.PI,!1),e=r.transformPoint(e.x,e.y),n=r.transformPoint(n.x,n.y),this.setStartPoint({x:e[0],y:e[1]},!0).then((function(e){return t.setEndPoint({x:n[0],y:n[1]})}))},n.hasCaption=function(){return!!this.info.hasCaption},n.enableCaption=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.enableLineCaption(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.enableCaptionUpdated)})).then((function(){e.info.hasCaption=t,e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)}))},n.getCaptionPoint=function(){var t=this.getCaptionOffset(),e=this.getLeaderLinePoints(),n=e.start,r=e.end,i=new lu(n.x,n.y),o=new lu(r.x,r.y),a=this.getLeaderLineOffset();if(a>0){var s=this.getLeaderLineLength()>0?1:-1,c=i.move(a,o),u=o.move(a,i);i=c.rotate(s*-Math.PI/2,i),o=u.rotate(s*Math.PI/2,o)}var d=i.distanceTo(o),l=i.move(d/2,o),h=l;if(0!==t.x||0!==t.y){var f=l.move(t.y,i).rotate(Math.PI/2,l),p=Math.PI/2;p=t.y>0?-Math.PI/2:Math.PI/2,h=f.move(t.x,l).rotate(p,f)}return h},n.setContent=function(e){var n=this;return t.prototype.setContent.call(this,e).then((function(t){return t&&n.eventEmitter.emit(St.annotationAppearanceUpdated,[n],n.getPDFPage()),t}))},n.getStyleFillColor=function(){return this.info.styleFillColor},n.setStyleFillColor=function(t){var e=this;this.checkModidyPerm(),0!==t&&(t=xn(t,"int"));var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotFillColor(r.getId(),n.getId(),this.getId(),t).then((function(r){return r&&(e.info.styleFillColor=t,e.info.fillColor=t,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.styleFillColorUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)),r}))},n.getLeaderLineLength=function(){return this.info.leaderLineLength||0},n.getLeaderLineExtend=function(){return this.info.leaderLineExtensionLength||0},n.setLeaderLineExtend=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotLeaderLineExtend(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.leaderLineExtendUpdated)})).then((function(){e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)}))},n.getLeaderLineOffset=function(){return this.info.leaderLineOffset},n.setLeaderLineOffset=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotLeaderLineOffset(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.leaderLineOffsetUpdated)})).then((function(){e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)}))},n.getCaptionPos=function(){return this.info.capPos},n.calculateLeaderLine=function(){var t=this.getStartPoint(),e=this.getEndPoint(),n=e.y-t.y,r=e.x-t.x,i=this.k=-1/(n/r),o=Math.atan(i),a=this.getLeaderLineLength(),s=1,c=1;isFinite(i)?0==r?s=c=a<0?n>0?1:-1:n<0?1:-1:r>0?n>0?(s=a>0?-1:1,c=a>0?1:-1):c=s=a>0?1:-1:n>0?c=s=a>0?-1:1:(s=a>0?1:-1,c=a>0?-1:1):s=c=a>0?r>0?1:-1:r<0?1:-1;var u=s*Math.abs(Math.cos(o)*a),d=c*Math.abs(Math.sin(o)*a);this.leaderSartPoit={x:t.x+u,y:t.y+d},this.leaderEndPoint={x:e.x+u,y:e.y+d},this.Sb=this.leaderSartPoit.y-this.k*this.leaderSartPoit.x,this.Eb=this.leaderEndPoint.y-this.k*this.leaderEndPoint.x},n.getLeaderLinePoints=function(){return this.leaderSartPoit||this.calculateLeaderLine(),{start:this.leaderSartPoit,end:this.leaderEndPoint}},n._update=function(){var e=this;return t.prototype._update.call(this).then((function(t){return e.calculateLeaderLine(),e}))},n.update=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._update().then((function(){var r=e.getPDFPage();return n&&t&&e.eventEmitter.emit(St.annotationUpdated,[e],r,t),e}))},n.setLeaderLineLength=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotLeaderLineLength(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.leaderLineLengthUpdated)})).then((function(){e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)}))},n.getMeasureInfo=function(){return""},n.getCaptionOffset=function(){return this.info.captionOffset},n.setCaptionOffset=function(t,e){var n=this;this.checkModidyPerm();var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setAnnotCaptionOffset(i.getId(),r.getId(),this.getId(),t,e).then((function(){return n.update(_n.leaderCaptionOffsetUpdated)})).then((function(){n.eventEmitter.emit(St.annotationAppearanceUpdated,[n],r)}))},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.startPoint,r=this.info.endPoint,i=this.info.leaderLineLength,o=this.info.leaderLineExtensionLength,a=this.info.leaderLineOffset,s=this.info.captionOffset,c=this.hasCaption()?"yes":"no";if(this.info.styleFillColor){var u=An(16777215&this.info.styleFillColor);e["interior-color"]=u,e.interiorColor=u}return A()({},e,{start:n.x+","+n.y,end:r.x+","+r.y,head:Ht.LineEndingName[this.info.startStyle],tail:Ht.LineEndingName[this.info.endingStyle],leaderLength:i,leaderExtend:o,leaderOffset:a,captionOffset:s,caption:c})},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userSpaceValue,r=void 0===n?1:n,i=e.userSpaceUnit,o=void 0===i?"inch":i,a=e.realValue,s=void 0===a?1:a,c=e.realUnit,u=void 0===c?"inch":c;this.checkModidyPerm();var d=this.getPDFPage(),l=d.getPDFDoc(),h=Object.keys(Mi);if(!h.includes(o)||!h.includes(u))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(l.getId(),d.getId(),this.getId(),{userSpaceValue:r,userSpaceUnit:o,realValue:s,realUnit:u}).then((function(){return t.update(_n.measureRatioUpdated)})).then((function(){var e=t.getPDFPage();t.eventEmitter.emit(St.annotationAppearanceUpdated,[t],e)}))},n.getMeasureUnit=function(){return this.info.measureUnit},n.setMeasureUnit=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setMeasureUnit(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.measureUnitUpdated)})).then((function(){e.info.measureUnit=t;var n=e.getPDFPage();e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)}))},e}(Zg),iy=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getVertexes=function(){return this.info.vertexes},n.getStyleFillColor=function(){return this.info.fillColor},n.setStyleFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},n.updateVertexes=function(t,e){var n=this,r=e.x,i=e.y;this.checkModidyPerm();var o=this.getPDFPage(),a=o.getPDFDoc();return this.page.doc.api.updateAnnotVertexes(a.getId(),o.getId(),this.getId(),t,r,i).then((function(){return n.info[t]={x:r,y:i},n.update(_n.vertexesUpdated)})).then((function(){n.eventEmitter.emit(St.annotationAppearanceUpdated,[n],n.getPDFPage())}))},n.setVertexes=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotVertexes(r.getId(),n.getId(),this.getId(),t).then((function(){return e.info.vertexes=t,e.update(_n.vertexesUpdated)})).then((function(){e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage())}))},n.getMeasureInfo=function(){return""},n.getEndingStyle=function(){return this.info.endingStyle},n.setEndingStyle=function(t,e){var n=this;this.checkModidyPerm();var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setAnnotEndingStyle(i.getId(),r.getId(),this.getId(),t,e).then((function(){t?n.info.startStyle=e:n.info.endingStyle=e,n.eventEmitter.emit(St.annotationUpdated,[n],r,_n.endingStyleUpdated),n.eventEmitter.emit(St.annotationAppearanceUpdated,[n],n.getPDFPage())})).then((function(t){return n._update()}))},n.getStartStyle=function(){return this.info.startStyle},n.exportToJSON=function(){for(var e=t.prototype.exportToJSON.call(this),n=this.info.vertexes,r="",i=0;i<n.length;i++)r+=n[i].x+","+n[i].y+";";if(r=r.substr(0,r.length-1),this.info.fillColor){var o=An(16777215&this.info.fillColor);e["interior-color"]=o,e.interiorColor=o}return A()({},e,{head:Ht.LineEndingName[this.info.startStyle],tail:Ht.LineEndingName[this.info.endingStyle],vertices:r})},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userSpaceValue,r=void 0===n?1:n,i=e.userSpaceUnit,o=void 0===i?"inch":i,a=e.realValue,s=void 0===a?1:a,c=e.realUnit,u=void 0===c?"inch":c;this.checkModidyPerm();var d=this.getPDFPage(),l=d.getPDFDoc(),h=Object.keys(Mi);if(!h.includes(o)||!h.includes(u))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(l.getId(),d.getId(),this.getId(),{userSpaceValue:r,userSpaceUnit:o,realValue:s,realUnit:u}).then((function(){return t.update(_n.measureRatioUpdated)})).then((function(){var e=t.getPDFPage();t.eventEmitter.emit(St.annotationAppearanceUpdated,[t],e)}))},e}(Zg),oy=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getVertexes=function(){return this.info.vertexes},n.updateVertexes=function(t,e){var n=this;this.checkModidyPerm();var r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.updateAnnotVertexes(i.getId(),r.getId(),this.getId(),t,e.x,e.y).then((function(){return n.update(_n.vertexesUpdated)})).then((function(){n.eventEmitter.emit(St.annotationAppearanceUpdated,[n],n.getPDFPage())}))},n.setVertexes=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotVertexes(r.getId(),n.getId(),this.getId(),t).then((function(){return e.info.vertexes=t,e.update(_n.vertexesUpdated)})).then((function(){e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage())}))},n.getMeasureInfo=function(){return""},n.exportToJSON=function(){for(var e=t.prototype.exportToJSON.call(this),n=this.info.vertexes,r="",i=0;i<n.length;i++)r+=n[i].x+","+n[i].y+";";if(r=r.substr(0,r.length-1),this.info.fillColor){var o=An(16777215&this.info.fillColor);e["interior-color"]=o,e.interiorColor=o}return"PolygonDimension"===this.getIntent()&&(e.measureRatio=this.info.measureRatio,e.measureConversionFactor=this.info.measureConversionFactor,e.measureUnit=this.info.measureUnit),A()({},e,{vertices:r})},n.getFillColor=function(){return this.info.fillColor},n.setFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userSpaceValue,r=void 0===n?1:n,i=e.userSpaceUnit,o=void 0===i?"inch":i,a=e.realValue,s=void 0===a?1:a,c=e.realUnit,u=void 0===c?"inch":c;this.checkModidyPerm();var d=this.getPDFPage(),l=d.getPDFDoc(),h=Object.keys(Mi);if(!h.includes(o)||!h.includes(u))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(l.getId(),d.getId(),this.getId(),{userSpaceValue:r,userSpaceUnit:o,realValue:s,realUnit:u}).then((function(){return t.update(_n.measureRatioUpdated)})).then((function(){var e=t.getPDFPage();t.eventEmitter.emit(St.annotationAppearanceUpdated,[t],e)}))},e}(Zg),ay=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getFlags=function(){return t.prototype.getFlags.call(this)},n.getIconName=function(){return this.info.iconName||"Note"},n.setIconName=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotIconName(r.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update(_n.iconNameUpdated).then((function(){return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage()),t})):t}))},n.getState=function(){return this.info.state},n.setState=function(t){var e=this;if(this.checkModidyPerm(),!this.isStateAnnot())return Promise.reject(new Error("Cannot set state name if it is not a state type annotation!"));if(this.getState()===t)return Promise.resolve(!0);var n=this.info.state,r=this.getPDFPage(),i=r.getPDFDoc();return this.page.doc.api.setStateName(i.getId(),r.getId(),this.getId(),t).then((function(r){return e.info.state=t,e.eventEmitter.emit(St.stateAnnotNameUpdated,e,e.getPDFPage(),n,t),r}))},n.isStateAnnot=function(){return this.info.isStateAnnot},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n={icon:this.info.iconName};if(this.info.isStateAnnot){n.statemodel=1==this.info.stateMode?"Marked":"Review",n.inreplyto=this.page.annotIdMap[this.info.IRT].getName();var r=this.info.state;n.state=r.charAt(0).toUpperCase()+r.slice(1),delete e.contents,delete e.color}return A()({},e,n)},e}(Zg),sy=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getInnerRect=function(){return this.info.innerRect},n.getFillColor=function(){return this.info.fillColor},n.setFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.rect,r=this.info.innerRect,i={fringe:[r.left-n.left,r.bottom-n.bottom,n.right-r.right,n.top-r.top].toString()};if(this.info.fillColor){var o=xn(16777215&this.info.fillColor,"#");e["interior-color"]=o,e.interiorColor=o}return"CircleDimension"===this.getIntent()&&(i.measureRatio=this.getMeasureRatio(),i.measureConversionFactor=this.getMeasureConversionFactor(),i.measureUnit=this.getMeasureUnit()),A()({},e,i)},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userSpaceValue,r=void 0===n?1:n,i=e.userSpaceUnit,o=void 0===i?Mi.inch:i,a=e.realValue,s=void 0===a?1:a,c=e.realUnit,u=void 0===c?Mi.inch:c;this.checkModidyPerm();var d=this.getPDFPage(),l=d.getPDFDoc(),h=Object.keys(Mi);if(!h.includes(o)||!h.includes(u))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(l.getId(),d.getId(),this.getId(),{userSpaceValue:r,userSpaceUnit:o,realValue:s,realUnit:u}).then((function(){return t.update(_n.measureRatioUpdated)})).then((function(){var e=t.getPDFPage();t.eventEmitter.emit(St.annotationAppearanceUpdated,[t],e)}))},n.getMeasureUnit=function(){return this.info.measureUnit},n.setMeasureUnit=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setMeasureUnit(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.measureUnitUpdated)})).then((function(){var t=e.getPDFPage();e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],t)}))},n.getMeasureConversionFactor=function(){return this.info.measureConversionFactor},n.setMeasureConversionFactor=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setMeasureConversionFactor(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.measureConversionFactorUpdated)})).then((function(){var t=e.getPDFPage();e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],t)}))},e}(Zg),cy=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).updateFileSpec(),r}O()(e,t);var n=e.prototype;return n.getIconName=function(){return this.info.iconName||"PushPin"},n.setIconName=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotIconName(r.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update(_n.iconNameUpdated).then((function(){return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage()),t})):t}))},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n={icon:this.info.iconName};return A()({},e,n)},n.update=function(e){var n=this;return t.prototype.update.call(this,e).then((function(t){return n.updateFileSpec(),t}))},n.updateFileSpec=function(){var t=this.info;this.fileSpec=t.fileSpec&&new hi(t.fileSpec)||null},n.getFileSpec=function(){return this.fileSpec},n.getFileattachmentStream=function(){var t=this.getPDFPage(),e=t.getPDFDoc(),n=[];return this.page.doc.api.getFileattachmentStream(e.getId(),t.getId(),this.getId(),(function(t){var e=t.arrayBuffer,r=t.blob;r?n=r:n.push(e)})).then((function(){return n}))},e}(Zg),uy=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getInnerRect=function(){return this.info.innerRect},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.rect,r=this.info.innerRect,i=[r.left-n.left,r.bottom-n.bottom,n.right-r.right,n.top-r.top].toString();return delete e.style,delete e.width,delete e.dashPhase,delete e.intensity,A()({},e,{fringe:i})},n.moveRectByCharIndex=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.moveCaretRectByCharIndex(r.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update(_n.rectUpdated).then((function(){return e.eventEmitter.emit(St.annotationMovedPosition,[e],e.getPDFPage(),e),t})):t}))},e}(Zg),dy=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getFillColor=function(){return this.info.fillColor},n.setFillColor=function(e){return t.prototype.setFillColor.call(this,e)},n.getInnerRect=function(){return this.info.innerRect},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this),n=this.info.rect,r=this.info.innerRect,i=[r.left-n.left,r.bottom-n.bottom,n.right-r.right,n.top-r.top].toString();if(this.info.fillColor){var o=xn(16777215&this.info.fillColor,"#");e["interior-color"]=o,e.interiorColor=o}var a={fringe:i};return"CustomDimension"===this.getIntent()&&(a.measureRatio=this.getMeasureRatio(),a.measureConversionFactor=this.getMeasureConversionFactor(),a.measureUnit=this.getMeasureUnit()),A()({},e,a)},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userSpaceValue,r=void 0===n?1:n,i=e.userSpaceUnit,o=void 0===i?Mi.inch:i,a=e.realValue,s=void 0===a?1:a,c=e.realUnit,u=void 0===c?Mi.inch:c;this.checkModidyPerm();var d=this.getPDFPage(),l=d.getPDFDoc(),h=Object.keys(Mi);if(!h.includes(o)||!h.includes(u))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(l.getId(),d.getId(),this.getId(),{userSpaceValue:r,userSpaceUnit:o,realValue:s,realUnit:u}).then((function(){return t.update(_n.measureRatioUpdated)})).then((function(){var e=t.getPDFPage();t.eventEmitter.emit(St.annotationAppearanceUpdated,[t],e)}))},n.getMeasureUnit=function(){return this.info.measureUnit},n.setMeasureUnit=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setMeasureUnit(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.measureUnitUpdated)})).then((function(){var t=e.getPDFPage();e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],t)}))},n.getMeasureConversionFactor=function(){return this.info.measureConversionFactor},n.setMeasureConversionFactor=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setMeasureConversionFactor(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.measureConversionFactorUpdated)})).then((function(){var t=e.getPDFPage();e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],t)}))},e}(Zg);function ly(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hy(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function hy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fy=function(t){function e(e,n){var r;return r=t.call(this,e,n)||this,-1===e.borderColor&&"FreeTextTypewriter"!==e.intent&&(e.borderColor=16711680),r}O()(e,t);var n=e.prototype;return n.setAlignment=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAlignment(r.getId(),n.getId(),this.getId(),t).then((function(){return e.info.justification=t,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.alignmentUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage()),t}))},n.getAlignment=function(){return this.info.justification},n.getInnerRect=function(){return A()({},this.info.innerRect)},n.setInnerRectNoAction=function(t){var e=this;this.info.innerRect=t;var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotInnerRect(r.getId(),n.getId(),this.getId(),t).then((function(){var t=e.getGroupElements();0==t.length&&(t=[e]);for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];n[r]=o._update()}return Promise.all(n)}))},n.getIntent=function(){var e=t.prototype.getIntent.call(this);return e||(e="FreeTextTextbox"),e},n.setInnerRect=function(t){var e=this;this.checkModidyPerm(),this.info.innerRect=t;var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotInnerRect(r.getId(),n.getId(),this.getId(),t).then((function(t){return t?e.update(_n.innerRectUpdated).then((function(){return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage()),t})):t}))},n.getDefaultAppearance=function(){var t=A()({},this.info.defaultAppearance);return delete t.flags,t},n.getFillColor=function(){return"FreeTextTypewriter"==this.info.intent?0:this.info.fillColor},n.setFillColor=function(t){var e=this;this.checkModidyPerm(),t=0===t?0:xn(t,"int");var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotFillColor(r.getId(),n.getId(),this.getId(),t).then((function(r){return r&&(e.info.fillColor=t,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.fillColorUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)),r}))},n.getCalloutLinePoints=function(){return this.info.calloutLinePoints},n.setCalloutLinePoints=function(t){var e=this;return this._setCalloutLinePoints(t).then((function(t){return e._update()})).then((function(t){var n=e.getPDFPage();e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.calloutLinePointsUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n)}))},n._setCalloutLinePoints=function(t){var e=this;this.checkModidyPerm(),this.info.calloutLinePoints=t;var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setCalloutLinePoints(r.getId(),n.getId(),this.getId(),t).then((function(t){return e._update()}))},n.getCalloutLineEndingStyle=function(){return this.info.calloutLineEndingStyle},n.setEndingStyle=function(t,e){return this.setCalloutLineEndingStyle(e)},n.setCalloutLineEndingStyle=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setCalloutLineEndingStyle(r.getId(),n.getId(),this.getId(),t).then((function(){e.info.calloutLineEndingStyle=t,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.calloutLineEndingStyleUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage())}))},n.setDefaultAppearance=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc(),i=(t=A()({},this.info.defaultAppearance,t)).textColor,o=t.textSize;if("number"!=typeof i||"number"!=typeof o)throw new Error("param error. Only number is available.");if(i=(4278190080|i)>>>0,o<6||o>40)throw new Error("Text size is overflow. Available range is 6 to 40.");return t.textColor=i,t.textSize=o,this.page.doc.api.setDefaultAp(r.getId(),n.getId(),this.getId(),t).then((function(){return e._update()})).then((function(){e.info.defaultAppearance=t,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.defaultAppearanceUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage())}))},n.getFontColor=function(){return 0==this.info.defaultAppearance.textColor?"#000000":xn(16777215&this.info.defaultAppearance.textColor,"#",0)},n.setFontColor=function(t){var e=this,n=this.getPDFPage(),r=n.getPDFDoc();return t=xn(t,"int",1),this.info.defaultAppearance.textColor=t,this.page.doc.api.setDefaultAp(r.getId(),n.getId(),this.getId(),this.info.defaultAppearance).then((function(){e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage())}))},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this);e.justification=this.info.justification;var n="";this.info.fontName&&(n+="/"+this.info.fontName+" "),null!=this.info.defaultAppearance.textSize&&(n+=this.info.defaultAppearance.textSize+" Tf ");var r=En(this.getBorderColor());switch(n+=(r.r/255).toFixed(2)+" "+(r.g/255).toFixed(2)+" "+(r.b/255).toFixed(2)+" rg",e.defaultappearance=n,e.fontColor=xn(16777215&this.info.defaultAppearance.textColor,"#",0),this.info.fillColor&&(r=An(16777215&this.info.fillColor),e["interior-color"]=r,e.interiorColor=r),this.info.intent){case"FreeTextCallout":var i=this.info.rect,o=this.info.innerRect,a=[o.left-i.left,o.bottom-i.bottom,i.right-o.right,i.top-o.top].toString(),s=this.info.calloutLinePoints,c=s[0].x+","+s[0].y;c+=","+s[1].x+","+s[1].y,c+=","+s[2].x+","+s[2].y;var u=Ht.LineEndingName[this.info.calloutLineEndingStyle];return A()({},e,{fringe:a,callout:c,head:u});case"FreeTextTypewriter":break;default:var d=this.info.rect,l=this.info.innerRect,h=[l.left-d.left,l.bottom-d.bottom,d.right-l.right,d.top-l.top].toString();return A()({},e,{fringe:h})}return e},n.getContent=function(){var e="";if(this.info.RC.length>0){var n,r=(new DOMParser).parseFromString(this.info.RC,"text/xml");r.children&&r.children[0]?n=r.children.item(0):r.childNodes&&r.childNodes.length>0&&(n=r.childNodes.item(0)),e=n?n.innerText||n.textContent:e}else e=t.prototype.getContent.call(this);return e},n.setContent=function(t){var e=this;return this.checkModidyPerm(),this.info.RC="",this._setContent(t).then((function(t){return e.getPDFPage().getAnnotsByObjectNumArray([t])})).then((function(t){return e.update(_n.contentUpdated).then((function(t){return e.eventEmitter.emit(St.annotationAppearanceUpdated,t,e.getPDFPage()),t}))}))},n.getWoff=function(){var t=this.getPDFPage();return t.doc.api.getAnnotWoff(t.getPDFDoc().getId(),t.getId(),this.getId())},n.getRotation=function(){return this.info.rotation||0},n.setRotation=function(t){var e=this,n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotRotation(r.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByObjectNumArray(t)})).then((function(n){var r=0;for(n.length;r--;)n[r].info.rotation=t;return e.info.rotation=t,n})).then((function(t){var r,i=[],o=ly(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(a.update())}}catch(t){o.e(t)}finally{o.f()}return Promise.all(i).then((function(r){return e.eventEmitter.emit(St.annotationUpdated,t,n,_n.rotationUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,t,n),t}))}))},e}(Zg);function py(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return gy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gy(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function gy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var vy=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getInnerRect=function(){return this.getRect()},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this);return e.icon=this.info.iconName,e},n.getIconName=function(){return this.info.iconName||""},n.setBitmap=function(t,e){var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotAPBitmap(r.getId(),n.getId(),this.getId(),t,e)},n.getImage=function(t){var e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getBitmapBuffer(n.getId(),e.getId(),this.getId()).then((function(e){if(!e.width||!e.height)return null;switch(t||"canvas"){case"canvas":return el(e);case"image":return nl(e);case"buffer":return rl(e);default:throw new Error("Invalid options.type: ".concat(t))}}))},n.getRotation=function(){return this.info.rotation<0&&(this.info.rotation+=360),this.info.rotation},n.setRotation=function(t){var e=this,n=this.getPDFPage(),r=n.getPDFDoc();return t<0&&(t+=360),this.page.doc.api.setAnnotRotation(r.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByObjectNumArray(t)})).then((function(n){for(var r=0;r<n.length;r++)n[r].info.rotation=t;return e.info.rotation=t,n})).then((function(t){var r,i=[],o=py(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(a.update())}}catch(t){o.e(t)}finally{o.f()}return Promise.all(i).then((function(r){return e.eventEmitter.emit(St.annotationUpdated,t,n,_n.rotationUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,t,n),t}))}))},e}(Zg),my=function(t){function e(e,n){var r;return r=t.call(this,e,n)||this,e.action&&(r.action=r.page.doc.engine.actionFactory.createAction(e.action,n.doc,r.page.doc.api,r.eventEmitter,F()(r))),r}O()(e,t);var n=e.prototype;return n.getFlags=function(){return-2&t.prototype.getFlags.call(this)},n.getAction=function(){return this.action},n.getActionPromise=function(){return Promise.resolve(this.action)},n.getHighlightingMode=function(){return this.info.highlightingMode},n.setHighlightingMode=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setHighlightingMode(r.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByObjectNumArray(t)})).then((function(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t[n]._update());return Promise.all(e)})).then((function(t){return e.eventEmitter.emit(St.annotationUpdated,t,n,_n.highlightingModeUpdated),e.eventEmitter.emit(St.annotationMovedPosition,t,n,e),t}))},n.hasPA=function(){return this.api.linkHasPA(this.page.doc.getId(),this.page.getId(),this.getId())},n.resetAByPA=function(){var t=this;return this.api.linkResetAByPA(this.page.doc.getId(),this.page.getId(),this.getId()).then((function(e){if(e)return t.update(_n.actionDataUpdated).then((function(){t.action=t.page.doc.engine.actionFactory.createAction(t.info.action,t.page.doc,t.page.doc.api,t.eventEmitter,t)}))}))},n.setAction=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return t=t.info?t.info:t,this.page.doc.api.setAction(r.getId(),n.getId(),this.getId(),t,-1,arguments[1]).then((function(t){return e.action?t.type!==e.action.getType()?e.action=e.page.doc.engine.actionFactory.createAction(t,e.page.doc,e.page.doc.api,e.eventEmitter,e):e.action.updateAction(t):e.action=e.page.doc.engine.actionFactory.createAction(t,e.page.doc,e.page.doc.api,e.eventEmitter,e),e.update(_n.addAction)})).then((function(){return e.eventEmitter.emit(St.actionAdd,e),!0}))},n.setActionData=function(t){var e=this;return this.action&&this.action.setActionData(t).then((function(){return e.update(_n.actionDataUpdated)})).then((function(){return!0}))},n.removeAction=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1?arguments[1]:void 0,r=0,i=0;n&&(r=0,i=n.info.objNumber),delete this.info.action,delete this.action;var o=this.page,a=o.doc;return a.api.removeAction(a.getId(),o.getId(),this.getId(),e,r,i).then((function(e){var n=e[0];return n&&(t.info.action=n,t.action=Di.createAction(n,t.page.getPDFDoc())),t.engine.eventEmitter.emit(St.annotationUpdated,[t],t.getPDFPage(),_n.actionDataUpdated),t.eventEmitter.emit(St.actionRemove,t),!0}))},e}(Fn),yy=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getInkList=function(){return this.info.inkList},n.setInkList=function(t){var e=this;if(this.isDeleted())return Promise.resolve();this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setInkList(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.inkListUpdated).then((function(){e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],e.getPDFPage())}))})).then((function(){return!0}))},n.exportToJSON=function(){for(var e=t.prototype.exportToJSON.call(this),n=this.info.inkList,r="[",i=0;i<n.length;i++)0!=i&&1==n[i].type&&(r=r.substr(0,r.length-1),r+="],["),r+=n[i].x+","+n[i].y+";";return r=r.substr(0,r.length-1)+"]",A()({},e,{inklist:r})},e}(Zg),wy=function(t){function e(e,n){var r;return r=t.call(this,e,n)||this,e.action&&(r.action=r.page.doc.engine.actionFactory.createAction(e.action,n.doc,r.page.doc.api,r.eventEmitter,F()(r))),r}O()(e,t);var n=e.prototype;return n.getFlags=function(){return-2&t.prototype.getFlags.call(this)},n.getAction=function(){return this.action},n.getActionPromise=function(){var t=this,e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getAction(n.getId(),e.getId(),this.getId()).then((function(e){return t.action=t.page.doc.engine.actionFactory.createAction(e,n,t.page.doc.api,t.eventEmitter,t),t.action}))},n.getOpacity=function(){return this.info.opacity},n.getRotation=function(){return this.info.rotation},n.setRotation=function(t){var e=this,n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotRotation(r.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByObjectNumArray(t)})).then((function(n){var r=0;for(n.length;r--;)n[r].info.rotation=t;return e.info.rotation=t,n})).then((function(t){return e.eventEmitter.emit(St.annotationUpdated,t,n,_n.rotationUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,t,n),t}))},n.getRotation=function(){return this.info.rotation},n.setOpacity=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return t=+t,this.page.doc.api.setAnnotOpacity(r.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByObjectNumArray(t)})).then((function(n){var r=0;for(n.length;r--;)n[r].info.opacity=t;return e._update().then((function(){return n}))})).then((function(t){return e.eventEmitter.emit(St.annotationUpdated,t,n,_n.opacityUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,t,n),t}))},n.setRotation=function(t){var e=this,n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotRotation(r.getId(),n.getId(),this.getId(),t).then((function(t){return n.getAnnotsByObjectNumArray(t)})).then((function(n){var r=0;for(n.length;r--;)n[r].info.rotation=t;return e.info.rotation=t,n})).then((function(t){return e.eventEmitter.emit(St.annotationUpdated,t,n,_n.rotationUpdated),e.eventEmitter.emit(St.annotationAppearanceUpdated,t,n),t}))},n.setRect=function(t){var e=this;this.info.rect=t;var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setAnnotRect(r.getId(),n.getId(),this.getId(),t).then((function(t){return t?(e.eventEmitter.emit(St.annotationUpdated,[e],n),e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n),!0):t}))},n.moveTo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,r=e.top,i=A()({},this.info.rect),o=i.right,a=i.bottom,s=n-i.left,c=r-i.top;this.info.rect={left:n,top:r,right:o+s,bottom:a+c};var u=this.getPDFPage(),d=u.getPDFDoc(),l=d.getId(),h=u.getId(),f=this.getId();return this.page.doc.api.moveAnnotTo(l,h,f,{left:n,top:r}).then((function(t){return u.getAnnotsByObjectNumArray(t)})).then((function(e){t.eventEmitter.emit(St.annotationUpdated,e,u,_n.rectUpdated),t.eventEmitter.emit(St.annotationMovedPosition,e,u,t)}))},n.removeAction=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1?arguments[1]:void 0,r=0,i=0;n?(r=0,i=n.info.objNumber):delete this.info.AA[e],"-1"==e?(delete this.info.action,delete this.action):(delete this.info.AA[e],this.engineActions&&delete this.engineActions[e]);var o=this.page,a=o.doc;return a.api.removeAction(a.getId(),o.getId(),this.getId(),e,r,i).then((function(n){var r=n[0];return r&&("-1"==e?(t.info.action=r,t.action=Di.createAction(r,t.page.getPDFDoc())):(t.info.AA[e]=r,t.engineActions[e]=Di.createAction(r,t.page.getPDFDoc()))),t.engine.eventEmitter.emit(St.annotationUpdated,[t],t.getPDFPage(),_n.actionDataUpdated),t.eventEmitter.emit(St.actionRemove,t),!0}))},n.setImage=function(t){var e=this,n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setImage(r.getId(),n.getId(),this.getId(),t).then((function(t){return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n),t}))},n.setTitle=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setTitle(r.getId(),n.getId(),this.getId(),t).then((function(){return e.update(_n.titleUpdated)}))},n.getAdditionalAction=function(t){if(-1==t)return this.action;if(!this.engineActions)for(var e in this.engineActions={},this.info.AA)this.engineActions[e]=Di.createAction(this.info.AA[e],this.page.getPDFDoc());return this.engineActions[t]},n.setAdditionalAction=function(t,e){return this.setAction(t,e)},n.setAction=function(t,e,n){var r=this;if(!e)throw new Error("No Action!");var i=this.page,o=i.doc;return this.engineActions||this.getAdditionalAction(11),this.page.doc.api.setAction(o.getId(),i.getId(),this.getId(),e.info,t,n).then((function(i){e.init(i,r.page.doc.engine.actionFactory,o,r.page.doc.api,r.page.doc.engine.eventEmitter,r);var a=!1;return-1==t&&r.info.action&&(a=!0),-1!=t&&r.engineActions[t]&&(a=!0),n&&a?-1==t?r.action.appendSubAction(e):r.engineActions[t].appendSubAction(e):-1==t?(r.info.action=e.info,r.action=e):(r.info.AA[t]=e.info,r.engineActions[t]=e),i}))},n.setActionData=function(t){var e=this;return this.action&&this.action.setActionData(t).then((function(){return e.update(_n.actionDataUpdated)}))},n.getImage=function(t){var e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getBitmapBuffer(n.getId(),e.getId(),this.getId()).then((function(e){if(!e.width||!e.height)return null;switch(t||"canvas"){case"canvas":return el(e);case"image":return nl(e);case"buffer":return rl(e);default:throw new Error("Invalid options.type: ".concat(t))}}))},e}(Fn),by=function(t){function e(e,n){var r;return r=t.call(this,e,n)||this,e.action&&(r.action=r.page.doc.engine.actionFactory.createAction(e.action,n.doc,r.page.doc.api,r.eventEmitter,F()(r))),r}O()(e,t);var n=e.prototype;return n.getIconName=function(){return this.info.iconName||"Speaker"},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this);return e.rate=this.info.soundObj&&this.info.soundObj.sampleRate,e},e}(Zg),Ay=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.getFlags=function(){return-2&t.prototype.getFlags.call(this)},n.getOpenStatus=function(){return this.info.openStatus},n.setOpenStatus=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setPopupOpenStatus(r.getId(),n.getId(),this.getId(),t).then((function(){e.info.openStatus=t;var r=[e];return e.eventEmitter.emit(St.annotationAppearanceUpdated,r,n),r}))},n.exportToJSON=function(){var t=this.info.flag,e="";for(var n in Ht.AnnotFlagsName)t&1<<parseInt(n)&&(e+=Ht.AnnotFlagsName[n]+",");var r=this.info.name,i=this.page.getIndex(),o=this.info.openStatus?"yes":"no",a=this.info.rect;return{flags:e,name:r,page:i,open:o,rect:a.left+","+a.bottom+","+a.right+","+a.top,type:"popup"}},e}(Fn),Py={Courier:0,"Courier-Bold":1,"Courier-BoldOblique":2,"Courier-Oblique":3,Helvetica:4,"Helvetica-Bold":5,"Helvetica-BoldOblique":6,"Helvetica-Oblique":7,"Times-Roman":8,"Times-Bold":9,"Times-BoldItalic":10,"Times-Italic":11,Symbol:12,ZapfDingbats:13};function Ey(t){return Py[t]}function xy(t){for(var e in Py)if(Py[e]==t)return e;return""}var Sy={FoxitFixedOTF:"Courier",FoxitSansMM:"Courier","FoxitFixedOTF-Bold":"Courier-Bold","FoxitFixedOTF-Italic":"Courier-Oblique","FoxitFixedOTF-BoldItalic":"Courier-BoldOblique",FoxitSansOTF:"Helvetica","FoxitSansOTF-Italic":"Helvetica-Oblique","FoxitSansOTF-Bold":"Helvetica-Bold","FoxitSansOTF-BoldItalic":"Helvetica-BoldOblique","FoxitSansPS-BoldItalic":"Helvetica-BoldOblique",FoxitSerifOTF:"Times-Roman","FoxitSerifOTF-Italic":"Times-Italic","FoxitSerifOTF-Bold":"Times-Bold","FoxitSerifOTF-BoldItalic":"Times-BoldItalic",FoxitSymbolOTF:"Symbol",FoxitDingbatsOTF:"ZapfDingbats"},Cy=[{name:"Times Roman",value:"Times-Roman"},{name:"Times Bold",value:"Times-Bold"},{name:"Times Italic",value:"Times-Italic"},{name:"Times BoldItalic",value:"Times-BoldItalic"},{name:"Helvetica",value:"Helvetica"},{name:"Helvetica Bold",value:"Helvetica-Bold"},{name:"Helvetica Oblique",value:"Helvetica-Oblique"},{name:"Helvetica BoldOblique",value:"Helvetica-BoldOblique"},{name:"Courier",value:"Courier"},{name:"Courier Bold",value:"Courier-Bold"},{name:"Courier Oblique",value:"Courier-Oblique"},{name:"Courier BoldOblique",value:"Courier-BoldOblique"},{name:"Symbol",value:"Symbol"},{name:"ZapfDingbats",value:"ZapfDingbats"}],Dy=[{name:"Courier",value:"Courier"},{name:"Helvetica",value:"Helvetica"},{name:"Times Roman",value:"Times-Roman"},{name:"Symbol",value:"Symbol"},{name:"ZapfDingbats",value:"ZapfDingbats"}],Iy=[{name:"楷体",value:"KaiTi"},{name:"黑体",value:"SimHei"},{name:"仿宋",value:"FangSong"},{name:"宋体",value:"SimSun"}],Ry=[{name:"楷体",value:"STKaiti"},{name:"黑体",value:"STHeiti"},{name:"仿宋",value:"FangSong"},{name:"宋体",value:"STSong"}],Ty=function(t){function e(e,n){return t.call(this,e,n)||this}O()(e,t);var n=e.prototype;return n.isArea=function(){return this.info.isArea},n.getRects=function(){var t=[];return this.info.quadPoints&&this.info.quadPoints.length>0?this.info.quadPoints.forEach((function(e){t.push({left:e[0].x,top:e[0].y,right:e[3].x,bottom:e[3].y})})):t.push(this.info.rect),t},n.apply=function(){var t=this,e=this.getPDFPage(),n=e.getPDFDoc();if(!n.checkPermission(Tn.annotForm)||!n.checkPermission(Tn.modify))throw new Error("Permission error");return this.page.doc.api.redactApply(n.getId(),e.getId(),this.getId()).then((function(n){var r=e.clearAnnotIds(n);t.page.doc.engine.eventEmitter.emit(St.annotationRemoved,r,e);var i=[{pageIndex:e.getIndex(),removedAnnots:n}];return t.eventEmitter.emit(St.applyRedaction,i),i}))},n.getOverlayText=function(){return this.info.overlayText},n.setOverlayText=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setRedactOverlayText(r.getId(),n.getId(),this.getId(),t).then((function(r){return r&&(e.info.overlayText=t,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.overlayTextUpdated)),r}))},n.removeOverlayText=function(){var t=this;this.checkModidyPerm();var e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.removeRedactOverlayText(n.getId(),e.getId(),this.getId()).then((function(n){return n&&(delete t.info.overlayText,t.eventEmitter.emit(St.annotationUpdated,[t],e,_n.overlayTextUpdated)),n}))},n.getOverlayTextAlignment=function(){return this.info.justification},n.setOverlayTextAlignment=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setRedactOverlayTextAlignment(r.getId(),n.getId(),this.getId(),t).then((function(r){return r&&(e.info.justification=t+"",e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.overlayTexAlignmentUpdated)),r}))},n.getRepeat=function(){return this.info.isRepeat},n.setRepeat=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setRedactRepeat(r.getId(),n.getId(),this.getId(),t).then((function(r){return r&&(e.info.isRepeat=t,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.repeatUpdated)),r}))},n.setAutoFontSize=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setRedactAutoFontSize(r.getId(),n.getId(),this.getId(),t).then((function(r){return r&&(e.info.isAutoFontSize=t,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.autoFontSizeUpdated)),r}))},n.getDefaultAppearance=function(){var t=A()({},this.info.defaultAppearance);return delete t.flags,t},n.setDefaultAppearance=function(t){var e=this;this.checkModidyPerm();var n=this.getPDFPage(),r=n.getPDFDoc(),i=A()({},this.info.defaultAppearance,t);return t.textColor&&(i.textColor=xn(t.textColor,"int",1)),t.textSize&&"number"==typeof t.textSize&&t.textSize<0&&(i.textSize=0),void 0===Py[i.fontName]&&(i.fontName="Helvetica"),this.page.doc.api.setRedactDefaultAppearance(r.getId(),n.getId(),this.getId(),i).then((function(t){return t&&(e.info.fontName=i.fontName,delete i.fontName,e.info.defaultAppearance=i,e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.redactDefaultAppearanceUpdated)),t}))},n.setOpacity=function(t,e){var n=this;this.checkModidyPerm();var r=this.getPDFPage(),i=r.getPDFDoc();return this.info.onlyForFill=e,this.page.doc.api.setRedactOpacity(i.getId(),r.getId(),this.getId(),t,e).then((function(e){return e&&(n.info.opacity=t,n.eventEmitter.emit(St.annotationUpdated,[n],r,_n.opacityUpdated)),e}))},n.getFillColor=function(){return t.prototype.getFillColor.call(this)},n.setFillColor=function(t){var e=this;t=0===t?0:xn(t,"int");var n=this.getPDFPage(),r=n.getPDFDoc();return r.api.setRedactAnnotFillColor(r.getId(),n.getId(),this.getId(),t,this.info.onlyForFill).then((function(t){return t?e.update(_n.fillColorUpdated).then((function(){return e.eventEmitter.emit(St.annotationAppearanceUpdated,[e],n),t})):t}))},n.getApplyFillColor=function(){return this.info.applyFillColor},n.setRedactApplyFillColor=function(t){var e=this;this.checkModidyPerm(),t=xn(t,"int",1);var n=this.getPDFPage(),r=n.getPDFDoc();return this.page.doc.api.setRedactApplyFillColor(r.getId(),n.getId(),this.getId(),t).then((function(r){return r&&(e.eventEmitter.emit(St.annotationUpdated,[e],n,_n.applyFillColorUpdated),e.info.applyFillColor=t),r}))},n.exportToJSON=function(){var e=t.prototype.exportToJSON.call(this);e["interior-color"]=An(16777215&this.getApplyFillColor()),e.interiorColor=e["interior-color"];for(var n=this.info.quadPoints,r="",i=0;i<n.length;i++){var o=n[i];r+=o[0].x+","+o[0].y+",",r+=o[1].x+","+o[1].y+",",r+=o[2].x+","+o[2].y+",",r+=o[3].x+","+o[3].y+","}e.coords=r.substr(0,r.length-1),e["overlay-text"]=this.info.overlayText,e.overlayText=this.info.overlayText;var a="";this.info.fontName&&(a+="/"+this.info.fontName+" "),null!=this.info.defaultAppearance.textSize&&(a+=this.info.defaultAppearance.textSize+" Tf ");var s=En(this.info.defaultAppearance.textColor);return a+=(s.r/255).toFixed(2)+" "+(s.g/255).toFixed(2)+" "+(s.b/255).toFixed(2)+" RG",e.defaultappearance=a,e.fontColor=xn(16777215&this.info.defaultAppearance.textColor,"#",0),e.justification=this.info.justification,e.repeat=this.info.isRepeat?"yes":"no",e},n.getRedactionCode=function(){return this.info.overlayCode},n.getRedactAppearance=function(){return this.info},n.setRedactAppearance=function(t){var e=this,n=t.applyFillColor,r=t.isAutoFontSize,i=t.textColor,o=t.defaultAppearance,a=t.textSize,s=t.fontName,c=t.justification,u=t.isRepeat,d=t.overlayText,l=t.redactionCode;this.checkModidyPerm(),!i&&o&&(i=o.textColor),!a&&o&&(a=o.textSize),void 0!==n&&(n=xn(n,"int",1)),void 0!==i&&(i=xn(i,"int",1));var h=this.getPDFPage(),f=h.getPDFDoc(),p={applyFillColor:n,isAutoFontSize:r,textColor:i,textSize:a,fontName:s,overlayText:d,justification:c,isRepeat:u,redactionCode:l};return this.page.doc.api.setRedactAppearance(f.getId(),h.getId(),this.getId(),p).then((function(t){return t&&(void 0!==n&&(e.info.applyFillColor=n),void 0!==s&&(e.info.fontName=s),void 0!==a&&(e.info.defaultAppearance.textSize=+a),void 0!==i&&(e.info.defaultAppearance.textColor=i),void 0!==c&&(e.info.justification=c),void 0!==r&&(e.info.isAutoFontSize=r),void 0!==l&&(e.info.overlayCode=l),void 0!==u&&(e.info.isRepeat=u),void 0!==d&&(e.info.overlayText=d,e.info.isOverlayCode=!!l&&l.length),e.eventEmitter.emit(St.annotationUpdated,[e],h,_n.applyFillColorUpdated)),t}))},e}(Zg),_y=function(){function t(t){}return t.prototype.get=function(t,e){switch(t.type){case du.highlight:return new Qm(t,e);case du.squiggly:return new ny(t,e);case du.strikeOut:return new ty(t,e);case du.underline:return new ey(t,e);case du.line:return new ry(t,e);case du.polyLine:return new iy(t,e);case du.polygon:return new oy(t,e);case du.fileAttachment:return new cy(t,e);case du.text:return new ay(t,e);case du.circle:return new sy(t,e);case du.caret:return new uy(t,e);case du.freeText:return new fy(t,e);case du.ink:return new yy(t,e);case du.sound:return new by(t,e);case du.square:return new dy(t,e);case du.stamp:return new vy(t,e);case du.link:return new my(t,e);case du.widget:return new _i(t,e);case du.screen:return new wy(t,e);case du.popup:return new Ay(t,e);case du.redact:return new Ty(t,e);default:return new Fn(t,e)}},t}(),ky={0:{id:"0",name:"StandardID_e_StdIDCourier",isBold:!1,isItalic:!1},1:{id:"1",name:"StandardID_e_StdIDCourierB",isBold:!0,isItalic:!1},2:{id:"2",name:"StandardID_e_StdIDCourierBI",isBold:!0,isItalic:!0},3:{id:"3",name:"StandardID_e_StdIDCourierI",isBold:!1,isItalic:!0},4:{id:"4",name:"StandardID_e_StdIDHelvetica",isBold:!1,isItalic:!1},5:{id:"5",name:"StandardID_e_StdIDHelveticaB",isBold:!0,isItalic:!1},6:{id:"6",name:"StandardID_e_StdIDHelveticaBI",isBold:!0,isItalic:!0},7:{id:"7",name:"StandardID_e_StdIDHelveticaI",isBold:!1,isItalic:!0},8:{id:"8",name:"StandardID_e_StdIDTimes",isBold:!1,isItalic:!1},9:{id:"9",name:"StandardID_e_StdIDTimesB",isBold:!0,isItalic:!1},10:{id:"10",name:"StandardID_e_StdIDTimesBI",isBold:!0,isItalic:!0},11:{id:"11",name:"StandardID_e_StdIDTimesI",isBold:!1,isItalic:!0},12:{id:"12",name:"StandardID_e_StdIDSymbol",isBold:!1,isItalic:!1},13:{id:"13",name:"StandardID_e_StdIDZapfDingbats",isBold:!1,isItalic:!1}},Fy=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}O()(e,t);var n=e.prototype;return n.put=function(t){},n.isBold=function(){var t=this.info.textState.font;if(t.isStandard){if(ky[t.standardId])return ky[t.standardId].isBold;console.warn("No configuration found for standard font: ",t)}return t.isBold},n.isItalic=function(){var t=this.info.textState.font;if(t.isStandard){if(ky[t.standardId])return ky[t.standardId].isItalic;console.warn("No configuration found for standard font: ",t)}return t.isItalic||t.styles>>7&1},n.getText=function(){return this.info.textState.text},n.getFontInfo=function(){return this.info.textState.font},n.setText=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");if(this.getText()===t)return Promise.resolve();var n=this.getPDFPage();return n.doc.api.setTextObjectChar(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},n.setItalic=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");if(this.isItalic()===t)return Promise.resolve();var n=this.getPDFPage();return n.doc.api.setTextObjectItalic(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},n.setBold=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");if(this.isBold()===t)return Promise.resolve();var n=this.getPDFPage();return n.doc.api.setTextObjectBold(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},n.getFontSize=function(){return this.info.textState.size},n.setFontSize=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");if(this.getFontSize()===t)return Promise.resolve();var n=this.getPDFPage();return n.doc.api.setTextObjectFontSize(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,n)}))},n.setStandardFont=function(t){var e=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var n=this.info.textState.font;if(!n||n.isStandard&&t===n.stardardId)return Promise.resolve();var r=this.getPDFPage();return r.doc.api.setTextObjectStandardFont(r.getPDFDoc().getId(),r.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(St.graphicsUpdated,r)}))},n.setFontByName=function(t,e,n){var r=this;if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");if(!this.info.textState.font)return Promise.resolve();var i=this.getPDFPage();return i.doc.api.setTextObjectFontByName(i.getPDFDoc().getId(),i.getId(),this.getId(),t,e,n).then((function(t){r.info=t,r.doc.engine.eventEmitter.emit(St.graphicsUpdated,i)}))},n.getWoff=function(){var t=this.getPDFPage();return t.doc.api.getTextObjectWoff(t.getPDFDoc().getId(),t.getId(),this.getId())},e}(ol),My=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}O()(e,t);var n=e.prototype;return n.getFillMode=function(){return this.info.fillMode},n.setBorderColor=function(e){if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");return this.info.needStroke=0!==e,t.prototype.setBorderColor.call(this,e)},n.getPathPoints=function(){return this.info.path},n.needStroke=function(){return this.info.needStroke},e}(ol),Oy=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}O()(e,t);var n=e.prototype;return n.setRotation=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!e)return Promise.resolve(this.info);if(!this.doc.checkPermission(Tn.modify))throw new Error("Permission error");var n=this.getPDFPage();return n.doc.api.setImageObjectRotation(n.getPDFDoc().getId(),n.getId(),this.getId(),e).then((function(e){return t.info=e,t.doc.engine.eventEmitter.emit(St.graphicsUpdated,n),e}))},n.getStream=function(){var t=this.getPDFPage();return t.doc.api.getImageObjectStream(t.getPDFDoc().getId(),t.getId(),this.getId())},e}(ol),Ly=function(){function t(t){this.engine=t}return t.prototype.get=function(t,e){if(!t)return null;var n=this.engine;switch(t.type){case 1:return new Fy(t,e,n);case 2:return new My(t,e,n);case 3:return new Oy(t,e,n);case void 0:return null;default:return new ol(t,e,n)}},t}();var Ny,Vy=function(){function t(t,e){this.api=new Nv.a(t),this.annotManager=new _y,this.actionFactory=Di,this.graphicsObjectManager=new Ly(this),this.eventEmitter=e,this.userName=null,this.userConfig={},this.pdfDocCacheMap=new Map,this.defaultAnnotConfig=function(){}}var e=t.prototype;return e.init=function(){return this.api.init().catch((function(t){return Promise.reject(t.error)}))},e.setIcons=function(t){return this.api.setIcons(t)},e.addIcon=function(t){return this.api.addIcon(t)},e.removeIcon=function(t,e,n){return this.api.removeIcon(t,e,n)},e.removePDFDocById=function(t){if(this.pdfDocCacheMap.has(t)){var e=this.pdfDocCacheMap.get(t);e&&(this.pdfDocCacheMap.delete(t),e.destroy())}},e.createPDFDocById=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.pdfDocCacheMap.has(t)?e=this.pdfDocCacheMap.get(t):(e=new Zm(t,this,n),this.pdfDocCacheMap.set(t,e)),e},e.getPDFDocByFile=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.fileName=n.fileName||t.name||"",this.api.getPDFDocIdByFile(t,{jwt:n.jwt}).then((function(t){return e.createPDFDocById(t,n)}))},e.checkCertificatePassword=function(t,e){return this.api.checkCertificatePassword(t,e)},e.getCertificateInfo=function(t,e){return this.api.getCertificateInfo(t,e)},e.createNewDoc=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"untitled.pdf",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{height:842,width:595};return this.api.createNewDoc(e,n,r).then((function(n){return t.getPDFDocByFile(n,{fileName:e})})).then((function(t){return t.parse({password:""})}))},e.createNewPortfolioDoc=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Portfolio.pdf";return this.api.createNewPortfolioDoc(t,e,r).then((function(t){return n.getPDFDocByFile(t,{fileName:r})})).then((function(t){return t.parse({password:""})}))},e.getPDFDocByChunk=function(t,e,n){var r=this;return this.api.getPDFDocIdByChunk(t,e).then((function(t){return r.createPDFDocById(t,n)}))},e.getPDFDocByHttpRangeRequest=function(t,e){var n=this;return this.api.getPDFDocIdByHttpRangeRequest(t,{jwt:e.jwt}).then((function(t){return n.createPDFDocById(t,e)}))},e.getPDFDocByArrayBuffer=function(t,e){var n=this;return this.api.getPDFDocIdByArrayBuffer(t).then((function(t){return n.createPDFDocById(t,e)}))},e.getPDFDocByCacheId=function(t,e){return this.pdfDocCacheMap.has(t)?Promise.resolve(this.pdfDocCacheMap.get(t)):this.getPDFDocById(t,e)},e.getPDFDocById=function(t,e){return Promise.resolve(this.createPDFDocById(t,e))},e.setUserConfig=function(t){this.userConfig=t||{}},e.getUserConfig=function(){return this.userConfig},e.getUserCommentConfig=function(){return this.userConfig.commentPreference||{}},e.setUserName=function(t){var e=this;return this.api.setUserName(t).then((function(n){e.userName=t}))},e.getUserName=function(){var t=this;return this.userName?Promise.resolve(this.userName):this.api.getUserName().then((function(e){return t.userName=e,e}))},e.setDynamicInfoFormula=function(t,e){return this.api.setDynamicInfoFormula(t,e)},e.getUtils=function(){return l},e.getDefaultAnnotConfig=function(){return this.defaultAnnotConfig},e.setDefaultAnnotConfig=function(t){this.defaultAnnotConfig=t},e.setTabOrder=function(t,e,n){return this.api.setTabOrder(t,e,n)},e.getTabOrder=function(t,e){return this.api.getTabOrder(t,e)},e.setStructureOrder=function(t,e,n){return this.api.setStructureOrder(t,e,n)},e.getAllModuleLicenseRight=function(){return this.api.getAllModuleLicenseRight().then((function(t){return t}))},e.compareDoc=function(t){var e=this,n=t.baseDocId,r=t.basePageCount,i=t.basePageIndex,o=t.baseFileName,a=t.compareDocId,s=t.comparedPageCount,c=t.comparePageIndex,u=t.comparePageNum,d=t.compareFileName,l=t.newTemplateId,h=t.oldTemplateId,f=t.options,p=t.compareResultStrings,g=t.progressCall;return this.api.workerPromise.on("compareProgress",(function t(n){100===n&&e.api.workerPromise.off("compareProgress",t),g&&g(n)})),this.api.compareDoc({baseDocId:n,basePageCount:r,basePageIndex:i,baseFileName:o,compareDocId:a,comparedPageCount:s,comparePageIndex:c,comparePageNum:u,compareFileName:d,newTemplateId:l,oldTemplateId:h,options:f,compareResultStrings:p,progressCall:g})},e.getPDFDocFromImageFile=function(t){var e,n,r,i,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.fileName=a.fileName||t.name||"",this.api.getPDFDocFromImageFile(t).then((function(t){var e=t.docId;return n=t.width,r=t.height,i=t.buffer,o.createPDFDocById(e,a).parse({password:""})})).then((function(t){return e=t,t.getPageByIndex(0)})).then((function(t){return t.addImage(i,{left:0,top:r,right:n,bottom:0})})).then((function(t){if(t)return e;throw new Error("faied to insert image")})).catch((function(t){return t&&console.error(t),Promise.reject(t)}))},e.ensureSideModeLoaded=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"openssl";return this.api.ensureSideModeLoaded(t)},t}(),By=n(365),Uy=n.n(By),jy=(n(446),function(){function t(t){this.title=t,this.step=0;var e=document.createElement("div");e.innerHTML=Uy()({title:t}),this.element=e.firstElementChild,e.removeChild(this.element),this.totalElement=this.element.querySelector(".fv__ui-print-process-total"),this.currentElement=this.element.querySelector(".fv__ui-print-process-current"),this.progressElement=this.element.querySelector(".fv__ui-print-process-percent")}var e=t.prototype;return e.reset=function(){this.updateProgress(0,0)},e.show=function(){this.reset(),document.body.appendChild(this.element)},e.updateProgress=function(t,e){var n=this.total;this.total=e,n!==e&&(this.totalElement.innerText=e),this.step=t,this.currentElement.innerText=t,this.progressElement.style.cssText+="\n            width: ".concat(t/e*100,"%;\n        ")},e.close=function(){document.body.removeChild(this.element)},t}()),Hy=n(366),Wy=n.n(Hy),$y=function(){function t(){this.container=document.createElement("div"),this.printArea=new Wy.a(this.container),this.imageCache=[]}var e=t.prototype;return e.appendImage=function(t,e){return this.imageCache[t]=this.createImageDOM(t,e)},e.getImageCache=function(){return this.imageCache},e.clearImageCache=function(){this.imageCache=[]},e.createImageDOM=function(t,e){var n=document.createElement("div");n.setAttribute("data-index",t),n.style.cssText="width: 100%;height: 100%; page-break-after: always;";var r=document.createElement("img");r.style.cssText="max-width: 100%; max-height: 100%;";var i=new Promise((function(t,e){r.onload=function(){t(n)},r.onerror=function(){e(n)}}));return r.src=e,n.appendChild(r),i},e.print=function(t,e){var n=this;Nt.isIE&&t&&function(){var t="\\Software\\Microsoft Internet Explorer\\PageSetup ";try{var e,n=new ActiveXObject("WScript.Shell");e="header",n.RegWrite("HKEY_CURRENT_USER"+t+e,""),e="footer",n.RegWrite("HKEY_CURRENT_USER"+t+e,"")}catch(t){console.error(t)}}(),(e||this.imageCache).reduce((function(t,e){return t.then((function(){return e})).then((function(t){t&&n.container.appendChild(t)}))}),Promise.resolve()).then((function(){n.imageCache=[],n.printArea.getHead=function(){return"\n                <head>\n                <style>\n                    *{ margin: 0; padding: 0; }\n                </style>\n                ".concat(t?'\n                    <style type="text/css" media="print">\n                        @page {\n                            /* hide header and footer */\n                            size: auto;\n                            margin: 0;\n                        }\n                        a[href]:after { content: none !important; }\n                        img[src]:after { content: none !important; }\n                    </style>\n                ':"","\n                </head>\n            ")},n.printArea.print(),n.container.innerHTML=""}))},t}();function Yy(t,e){var n=E()(t.data.annots);if(e.action===$o.REMOVE_ANNOT){for(var r=e.data.slice(0),i=0;i<r.length;){for(var o=r[i],a=o.annotId,s=o.pageIndex,c=!1,u=0;u<n.length;){var d=n[u];d.name===a&&d.page===s?(n.splice(u,1),c=!0):u++}c?r.splice(i,1):i++}var l=[];return n.length>0&&l.push({version:Math.min(t.version,e.version),fileId:t.fileId,action:$o.UPDATE_ANNOT,data:{annots:n}}),r.length>0&&l.push({version:Math.max(t.version,e.version),fileId:t.fileId,action:e.action,data:r}),l}return n.push.apply(n,E()(e.data.annots)),[{version:Math.max(t.version,e.version),fileId:t.fileId,action:$o.UPDATE_ANNOT,format:t.format,data:{annots:n}}]}function qy(t){var e=t;return!(e.action!==$o.UPDATE_ANNOT&&e.action!==$o.CREATE_ANNOT||e.format&&e.format!==Ny.json)}function Gy(t){return t.action===$o.REMOVE_ANNOT}!function(t){t.json="json",t.fdf="fdf"}(Ny||(Ny={}));var zy,Ky=n(159),Jy=n.n(Ky),Xy=function(t){function e(e){var n;return(n=t.call(this,e)||this).name="CollaborationDataError",n}return O()(e,t),e}(Jy()(Error)),Zy=function(t){function e(e){var n;return(n=t.call(this,'No handler found for collaboration action: "'.concat(e.action,'", that will be ignored!'))||this).name="NoHandlerFoundForCollaborationDataError",n}return O()(e,t),e}(Jy()(Error)),Qy=function(t){function e(){var e;return(e=t.call(this,"No files area currently open, cannot handling the received collaboration data")||this).name="PDFDocumentNotOpeningError",e}return O()(e,t),e}(Jy()(Error)),tw=function(){function t(t){this.handler=t.reduce((function(t,e){return new ew(e,t)}))}var e=t.prototype;return e.accept=function(t){return Promise.resolve(!0)},e.receive=function(t,e){return this.handler.receive(t,e)},t}(),ew=function(){function t(t,e){this.handler=t,this.prevHandler=e}var e=t.prototype;return e.accept=function(t){return Promise.resolve(!0)},e.receive=function(t,e){return this.handler.receive(t,this.prevHandler||e)},t}();function nw(t){var e=new FileReader;return new Promise((function(n,r){e.onload=function(){n(e.result)},e.onerror=r,e.readAsDataURL(t)}))}function rw(t){for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],r=atob(e[1]),i=r.length,o=new Uint8Array(i);i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})}!function(t){t.FROM_FILE="from-file",t.FROM_URL="from-url"}(zy||(zy={}));var iw=Ea.a.getLogger("Collaboration");function ow(t,e){return t<15}var aw=function(t){function e(e,n){var r;(r=t.call(this)||this).pdfViewer=e,r.builtInHandlerInstances=[],r.userHandlerInstances=[],r.version=0,r.queuedExecutor=new kt,r.sessionDefer=z(),r.isOpenedFromOtherClient=!1,r.localDataOnDisconnected=[],r.communicator=n.communicator,r.annotationDataFormat=n.annotationFormat||"json",r.continueToConnect=n.continueToConnect||ow;var i=n.handlerClasses;return Array.isArray(i)&&i.forEach((function(t){r.registerUserHandler(t)})),r}O()(e,t);var n=e.prototype;return n.registerBuiltInHandler=function(t){this.builtInHandlerInstances.push(new t(this.pdfViewer))},n.registerUserHandler=function(t){this.userHandlerInstances.push(new t(this.pdfViewer))},n.registerCollabDataHandler=function(t,e){if("function"==typeof t){if(!t.prototype.accept||!t.prototype.receive)throw new Error("Illegal collaboration data handler: "+t);this.registerUserHandler(t)}else"string"==typeof t&&"function"==typeof e&&this.registerUserHandler(function(){function n(){}var r=n.prototype;return r.accept=function(e){return Promise.resolve(e.action===t)},r.receive=function(t,n){return e.call(this,t,(function(t){return n?n.receive(t):Promise.resolve()}))},n}())},n.prepare=function(){var t=this;this.communicator.registerMessageReceiver((function(e){t.queuedExecutor.exec((function(){return t.handleServerMessage(e)}))}));var e=function(e){t.collaborateAddAnnotation(e)},n={},r=function(t){var e,r=t.annot;"link"!==r.info.type&&"screen"!==r.info.type&&(e=r.isGrouped&&r.isGrouped()?r.getGroupElements():[r],n[r.getId()]={action:$o.REMOVE_ANNOT,data:e.map((function(t){return{annotId:t.getUniqueID(),pageIndex:t.getPDFPage().getIndex()}}))})},i=function(e,r){var i=r.getId(),o=n[i];o&&t.send(o),delete n[i]},o=function(e){var n=e.annot;t.collaborateUpadteAnnotation(n)},a=function(e,n){t.shareAndSyncCurrentFile(e,n)},s=function(){t.isOpenedFromOtherClient=!1,t.version=0,t.communicator.disconnect(),t.sessionDefer=z()},c=function(t){t.normalize()},u=this.pdfViewer.eventEmitter;u.on(Ct.addAnnotSuccess,e),u.on(Ct.removeActionAnnotationBefore,r),u.on(Ct.removeActiveAnnotationSuccess,i),u.on(Ct.updateActiveAnnotation,o),u.on(Ct.openFileSuccess,a),u.on(Ct.willCloseDocument,s),u.on(Ct.obtainsPageFromEngine,c),this.addDestroyHook((function(){u.off(Ct.addAnnotSuccess,e),u.off(Ct.removeActionAnnotationBefore,r),u.off(Ct.removeActiveAnnotationSuccess,i),u.off(Ct.updateActiveAnnotation,o),u.off(Ct.openFileSuccess,a),u.off(Ct.willCloseDocument,s),u.off(Ct.obtainsPageFromEngine,c)}))},n.shareAndSyncCurrentFile=function(t,e){var n=this;return this.isOpenedFromOtherClient?this.sessionDefer.promise.then((function(e){return n.sync().then((function(){return n.communicator.connect(e.shareId),t}))})):(delete e.options.password,this.communicator.createSession(t,e).then((function(t){return n.sessionDefer.resolve({shareId:t,openFileParams:e}),n.communicator.connect(t)})).then((function(){return n.sync()})))},n.collaborateUpadteAnnotation=function(t){var e,n=this;if(0!==(e=(e=t.isGrouped&&t.isGrouped()?t.getGroupElements():[t]).filter((function(t){return"screen"!==t.info.type&&"link"!==t.info.type}))).length)if("json"===this.annotationDataFormat)t.page.doc.exportAnnotsToJSON(e).then((function(t){n.send({action:$o.UPDATE_ANNOT,format:Ny.json,data:{annots:t}})}));else{var r="xfdf"===this.annotationDataFormat;t.page.doc.exportAnnotsToFDF(r?Fe.xfdf:Fe.fdf,e).then((function(t){return nw(t)})).then((function(t){n.send({action:$o.UPDATE_ANNOT,format:Ny.fdf,data:{fdf:t,annots:e.map((function(t){return{page:t.page.getIndex(),id:t.getUniqueID()}}))}})}))}},n.collaborateAddAnnotation=function(t){var e,n=this;if(0!==(e=(e="function"==typeof t.isGrouped&&t.isGrouped()?t.getGroupElements():[t]).filter((function(t){return"screen"!==t.info.type&&"link"!==t.info.type}))).length)if("json"===this.annotationDataFormat)t.page.doc.exportAnnotsToJSON(e).then((function(t){n.send({action:$o.CREATE_ANNOT,data:{annots:t}})}));else{var r="xfdf"===this.annotationDataFormat;t.page.doc.exportAnnotsToFDF(r?Fe.xfdf:Fe.fdf,e).then((function(t){return nw(t)})).then((function(t){n.send({action:$o.CREATE_ANNOT,format:Ny.fdf,data:{fdf:t,annots:e.map((function(t){return{page:t.page.getIndex(),id:t.getUniqueID()}}))}})}))}},n.getSessionInfo=function(){return this.sessionDefer.promise},n.getShareId=function(){return this.sessionDefer.promise.then((function(t){return t.shareId}))},n.send=function(t){var e=this;return this.communicator?this.queuedExecutor.exec((function(){return e.reconnectIfNecessary().then((function(){return e.sessionDefer.promise})).then((function(t){return e.localDataOnDisconnected.length>0?e.sync().then((function(){return t})):t})).then((function(n){var r=e.localDataOnDisconnected.concat(t).map((function(t){var r=e.pdfViewer.getCurrentPDFDoc(),i=A()(A()({},t),{version:++e.version,fileId:r.info.fileID});return e.communicator.send(n,JSON.stringify(i))}));return e.localDataOnDisconnected.length=0,Promise.all(r)}),(function(n){return e.localDataOnDisconnected.push(t),Promise.reject(n)}))})):Ht.RESOLVED_PROMISE_VOID},n.openFileByShareId=function(t){var e=this;return this.communicator.getSessionInfo(t).then((function(t){if(!t){var n=new Error("Unexpected session info for opening file: "+JSON.stringify(t));throw n.error=Ae.collaborationSession,n}e.sessionDefer.resolve(t);var r=t.openFileParams;switch(r.type){case zy.FROM_FILE:return e.isOpenedFromOtherClient=!0,e.pdfViewer.openPDFByFile(r.file,r.options||{});case zy.FROM_URL:return e.isOpenedFromOtherClient=!0,e.pdfViewer.openPDFByHttpRangeRequest({range:r.range,size:r.size},r.options);default:var i=new Error("Unexpected session info for opening file:"+JSON.stringify(r));throw i.error=Ae.collaborationSession,i}}))},n.destroy=function(){t.prototype.destroy.call(this),this.communicator.destroy()},n.reconnectIfNecessary=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=function(n){if(!t.continueToConnect(e,n))throw new Error("Failed to reconnect to the collaboration server");return t.reconnectIfNecessary(e+1)};return this.communicator.isConnected().then((function(e){return!!e||t.sessionDefer.promise.then((function(e){var r=e.shareId;return t.communicator.connect(r).then((function(){return t.communicator.isConnected()})).then((function(t){if(!t)return n(r)}),(function(t){return Ea.a.getLogger("COLLABORATION").error("An error occurred while connect to the collaboration server",t),n(r)}))}))}))},n.sync=function(){var t=this;return this.sessionDefer.promise.then((function(e){var n=e.shareId;return t.communicator.getLostData(n,t.version)})).then((function(e){if(e&&0!==e.length)return t.version=e[e.length-1].version,function(t){if(t.length<1)return t;for(var e=[t[0]],n=1,r=t.length;n<r;n++){var i=e[e.length-1],o=t[n];qy(i)&&(qy(o)||Gy(o))?(e.splice.apply(e,[e.length-1,1].concat(E()(Yy(i,o)))),0===e.length&&(n<r-1&&e.push(t[n+1]),n++)):e.push(o)}return e.forEach((function(t){t.action===$o.UPDATE_ANNOT&&(t.data.annots=t.data.annots.reduceRight((function(t,e){return-1===t.findIndex((function(t){return t.name===e.name}))&&t.push(e),t}),[]))})),e}(e).reduce((function(e,n){return t.findHandler(n).then((function(t){var r=S()(t,2),i=r[0],o=r[1];return i?e.finally((function(){return i.receive(n,o)})):(iw.warn(new Zy(n)),e)}))}),Ht.RESOLVED_PROMISE_VOID)}))},n.findHandlerAsync=function(t,e,n){return function t(e,r,i){return i>=e.length?Promise.resolve(void 0):e[i].accept(r).then((function(o){if(o&&n(e[i]))return;return t(e,r,i+1)}))}(t,e,0)},n.findFirstHandlerAsync=function(t,e){var n=z();return this.findHandlerAsync(t,e,(function(t){return n.resolve(t),!0})),n.promise},n.findAllMatchHandlersAsync=function(t,e){var n=[];return this.findHandlerAsync(t,e,(function(t){return n.push(t),!1})).then((function(){return n}))},n.findHandler=function(t){var e=this;return this.findAllMatchHandlersAsync(this.userHandlerInstances,t).then((function(n){return e.findFirstHandlerAsync(e.builtInHandlerInstances,t).then((function(t){switch(n.length){case 0:return[t,t];case 1:return[n[0],t]}return[new tw(n),t]}))}))},n.handleServerMessage=function(t){var e=this,n=this.pdfViewer.getCurrentPDFDoc();if(!n)throw new Qy;var r=n.info.fileID,i=JSON.parse(t);if(!this.isSameFileID(i.fileId,r))throw new Xy("File id not match! remote: ".concat(i.fileId,", local: ").concat(r));return this.findHandler(i).then((function(n){var r=S()(n,2),o=r[0],a=r[1];if(o)return i.version-e.version!=1?e.sync():(e.version=i.version,o.receive(i,a));throw new Xy("No handler found for the collaboration data: "+t)}))},n.isSameFileID=function(t,e){return t.length===e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},e}(vt.a),sw=function(){function t(t){this.action=t}return t.prototype.accept=function(t){return Promise.resolve(t.action===this.action)},t}(),cw=function(t){function e(e){var n;return(n=t.call(this,$o.CREATE_ANNOT)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=this,r=this.pdfViewer.getCurrentPDFDoc();if(function(t){return t.format===Ny.fdf}(t)){var i=rw(t.data.fdf);return r.importAnnotsFromFDF(i).then((function(){t.data.annots.forEach((function(t){var e=t.page,r=t.id,i=n.pdfViewer.getAnnotRender(e,r);i&&i.redraw(!1,!0)}))}))}var o=t.data.annots.filter((function(t){return"link"!==t.type&&"screen"!==t.type}));return r.importAnnotsFromJSON(o)},e}(sw);var uw=function(t){function e(e){var n;return(n=t.call(this,$o.REMOVE_ANNOT)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=this.pdfViewer.getCurrentPDFDoc();return Promise.all(t.data.map((function(t){return n.getPageByIndex(t.pageIndex).then((function(e){return"string"==typeof t.annotId?e.removeAnnotById(t.annotId):e.removeAnnotByObjectNumber(t.annotId)}))}))).then(Wo.a)},e}(sw),dw=function(t){function e(e){var n;return(n=t.call(this,$o.UPDATE_ANNOT)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=this,r=this.pdfViewer.getCurrentPDFDoc();if(function(t){return t.format===Ny.fdf}(t)){var i=rw(t.data.fdf);return r.importAnnotsFromFDF(i).then((function(){t.data.annots.forEach((function(t){var e=t.page,r=t.id,i=n.pdfViewer.getAnnotRender(e,r);if(i){i.redraw(!1,!0);var o=i.component;o&&o.isActive&&o.active()}}))}))}var o=t.data.annots.filter((function(t){return"link"!==t.type&&"screen"!==t.type}));return r.importAnnotsFromJSON(o).then((function(t){o.forEach((function(t){var e=n.pdfViewer.getAnnotRender(t.page,t.name);if(e){e.redraw(!1,!0);var r=e.component;r&&r.isActive&&r.active()}}))}))},e}(sw);var lw,hw,fw,pw,gw=function(t){function e(e){var n;return(n=t.call(this,$o.PPO_INSERT_PAGE)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=this.pdfViewer.getCurrentPDFDoc(),r=t.data,i=r.pageIndex,o=r.width,a=r.height;return n.insertPage(i,o,a)},e}(sw),vw=function(t){function e(e){var n;return(n=t.call(this,$o.PPO_REMOVE_PAGE)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){return this.pdfViewer.getCurrentPDFDoc().removePage(t.data.pageIndex)},e}(sw),mw=function(t){function e(e){var n;return(n=t.call(this,$o.PPO_ROTATE_PAGE)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=this.pdfViewer.getCurrentPDFDoc(),r=Math.floor((t.data.angle%360+360)%360/90)%4;return n.getPageByIndex(t.data.pageIndex).then((function(t){return t.setRotation(r)}))},e}(sw),yw=function(t){function e(e){var n;return(n=t.call(this,$o.PPO_MOVE_PAGE)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=this,r=this.pdfViewer.getCurrentPDFDoc(),i=t.data,o=i.sourceIndex,a=i.destIndex;return r.movePageTo(o,a).then((function(){n.pdfViewer.goToPage(a,0,0,!1)}))},e}(sw),ww=function(t){function e(e){var n;return(n=t.call(this,$o.ADD_REPLY)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=t.data,r=n.pageIndex,i=n.annotId,o=n.reply;return this.pdfViewer.getCurrentPDFDoc().getPageByIndex(r).then((function(t){return"string"==typeof i?t.getAnnotsByIdArray([i]):t.getAnnotsByObjectNumArray([i])})).then((function(t){var e=S()(t,1)[0];if(e)return e.addReply(o)}))},e}(sw),bw=function(t){function e(e){var n;return(n=t.call(this,$o.REMOVE_REPLY)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=this.pdfViewer.getCurrentPDFDoc(),r=t.data,i=r.pageIndex,o=r.replyId;return n.getPageByIndex(i).then((function(t){return"string"==typeof o?t.removeAnnotById(o):t.removeAnnotByObjectNumber(o)}))},e}(sw),Aw=function(t){function e(e){var n;return(n=t.call(this,$o.ADD_REVIEW_STATE)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=t.data,r=n.pageIndex,i=n.annotId,o=n.stateAnnotJSON;return this.pdfViewer.getCurrentPDFDoc().getPageByIndex(r).then((function(t){return"string"==typeof i?t.getAnnotsByIdArray([i]):t.getAnnotsByObjectNumArray([i])})).then((function(t){var e=S()(t,1)[0];if(e)return e.addReviewState(o)}))},e}(sw),Pw=function(t){function e(e){var n;return(n=t.call(this,$o.UPDATE_ANNOT_CONTENT)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=t.data,r=n.pageIndex,i=n.annotId,o=n.content;return this.pdfViewer.getCurrentPDFDoc().getPageByIndex(r).then((function(t){return"string"==typeof i?t.getAnnotsByIdArray([i]):t.getAnnotsByObjectNumArray([i])})).then((function(t){var e=S()(t,1)[0];if(e)return e.setContent(o)}))},e}(sw),Ew=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.permissions=t,this.noPermission=e}t.fully=function(){return lw||(lw=new t([Yd.fully])),lw},t.ignorable=function(){return hw||(hw=new t([])),hw},t.none=function(){return fw||(fw=new t([],!0)),fw};var e=t.prototype;return e.has=function(t){return!this.noPermission&&(0===this.permissions.length||(this.permissions.indexOf(Yd.fully)>-1||this.permissions.indexOf(t)>-1))},e.ignorable=function(){return!this.noPermission&&0===this.permissions.length},e.isModifiable=function(){return this.has(Yd.modifiable)},e.isPlayable=function(){return this.has(Yd.playable)},e.isAdjustable=function(){return this.has(Yd.adjustable)},e.isEditable=function(){return this.has(Yd.editable)},e.isDeletable=function(){return this.has(Yd.deletable)},e.isAttachmentDownloadable=function(){return this.has(Yd.attachmentDownloadable)},e.isRedactionApplicable=function(){return this.has(Yd.redactionApplicable)},e.isReplyable=function(){return this.has(Yd.replyable)},e.equalsTo=function(e){if(!(e&&e instanceof t))return!1;var n=this.permissions,r=e.permissions;return n.length===r.length&&(this.noPermission===e.noPermission&&!n.some((function(t){return-1===r.indexOf(t)})))},t}(),xw=Ea.a.getLogger("AnnotationAuthorityManager"),Sw=function(t){function e(e,n){var r;(r=t.call(this)||this).pdfViewer=e,r.getAnnotPermissionCallback=n,r.store=new ds.a,r.cachedAnnots={};var i=function(t){Array.isArray(t)&&t.length>0&&t.forEach((function(t){var e=r.generateKey(t);delete r.cachedAnnots[e]}))},o=function(t){t.forEach((function(t){return r.update(t)}))},a=function(t){r.update(t)},s=function(t,e){e.forEach((function(t){t.newAnnots.forEach((function(t){return r.update(t)}))}))},c=function(t,e,n){e.forEach((function(t){r.update(t)}))},u=function(t){t.forEach((function(t){r.update(t)}))};return e.eventEmitter.on(Ct.annotationRemoved,i),e.eventEmitter.on(Ct.annotationAdd,o),e.eventEmitter.on(Ct.annotationImported,s),e.eventEmitter.on(Ct.annotationLoaded,c),e.eventEmitter.on(Ct.annotationReplyAdd,a),e.eventEmitter.on(Ct.annotationUpdated,u),r.addDestroyHook((function(){e.eventEmitter.off(Ct.annotationRemoved,i),e.eventEmitter.off(Ct.annotationAdd,o),e.eventEmitter.off(Ct.annotationImported,s),e.eventEmitter.off(Ct.annotationLoaded,c),e.eventEmitter.off(Ct.annotationReplyAdd,a),e.eventEmitter.on(Ct.annotationUpdated,u),r.clear(),r.store.destroy()})),r}O()(e,t);var n=e.prototype;return n.getPermission=function(t){var e=this.generateKey(t);return this.store.has(e)||this.update(t),this.store.takeWhile(e)},n.update=function(t){var e=this,n=this.generateKey(t);if(t.isDeleted()){var r=Promise.resolve(Ew.ignorable());return this.store.dispatch(n,r),delete this.cachedAnnots[n],r}var i=this.store.getCurrentValue(n)||Ht.RESOLVED_PROMISE_VOID,o=(this.getAnnotPermissionCallback(t)||Ht.RESOLVED_PROMISE_VOID).then((function(n){var r;return r=n?0===n.length?Ew.none():new Ew(n):Ew.ignorable(),i.then((function(n){if(!r.equalsTo(n))try{e.pdfViewer.eventEmitter.emit(Ct.annotationPermissionChanged,t,r,n)}catch(t){xw.error("An error occurred inside the listener of ViewerEvents.annotationPermissionChanged",t)}})),r}));return this.store.dispatch(n,o),this.cachedAnnots[n]=t,o},n.subscribe=function(t,e){var n=this.generateKey(t);return this.store.subscribe(n,(function(n){n.then((function(n){e(n,t)}))}))},n.updateAll=function(){var t=this;return Promise.all(Object.keys(this.cachedAnnots).filter((function(e){var n=t.cachedAnnots[e].isDeleted();return n&&delete t.cachedAnnots[e],!n})).map((function(e){return t.update(t.cachedAnnots[e])})))},n.generateKey=function(t){return"".concat(t.page.getId(),"/").concat(t.getId())},n.clear=function(){this.store.clear(),this.cachedAnnots={}},e}(vt.a),Cw=function(t){function e(e){var n;return(n=t.call(this,$o.MOVE_ANNOTS_BETWEEN_PAGES)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=this.pdfViewer.getCurrentPDFDoc();return Promise.all([n.getPageByIndex(t.data.fromPageIndex),n.getPageByIndex(t.data.toPageIndex)]).then((function(e){var r=S()(e,2),i=r[0],o=r[1],a=t.data.annots,s=Object.keys(a);return i.getAnnotsByIdArray(s).then((function(t){var e=t.reduce((function(t,e){return t[e.getObjectNumber()]=a[e.getUniqueID()],t}),{});return n.moveAnnotsToPage(i,o,e)}))}))},e}(sw),Dw=function(t){function e(e){var n;return(n=t.call(this,$o.ADD_MARKED_STATE)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){var n=t.data,r=n.pageIndex,i=n.annotId,o=n.stateAnnotJSON;return this.pdfViewer.getCurrentPDFDoc().getPageByIndex(r).then((function(t){return t.getAnnotsByObjectNumArray([i])})).then((function(t){var e=S()(t,1)[0];if(e)return e.addMarkedState(o)}))},e}(sw),Iw=function(t){function e(e){var n;return(n=t.call(this,$o.IMPORT_ANNOTATIONS_FILE)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){for(var n=t.data.file,r=atob(n),i=new Uint8Array(new ArrayBuffer(r.length)),o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return this.pdfViewer.getCurrentPDFDoc().importAnnotsFromFDF(i)},e}(sw),Rw=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.set=function(e){t.prototype.dispatch.call(this,"change",e)},n.get=function(){return t.prototype.getCurrentValue.call(this,"change")},n.onchange=function(e){return t.prototype.subscribe.call(this,"change",(function(t){e(t)}))},e}(ds.a);function Tw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}!function(t){t.playing="playing",t.paused="paused",t.stopped="stopped"}(pw||(pw={}));var kw=function(t){function e(){var e;return(e=t.call(this)||this).status=pw.stopped,e.statusStore=new Rw,e}O()(e,t),e.extend=function(t){var n=function(e){function n(){return e.apply(this,arguments)||this}O()(n,e);var r=n.prototype;return r.init=function(){return this.safeCall("init")},r.supported=function(){var e=t.supported;if("function"==typeof e)return e.apply(this);throw new Error("Method not implementated: supported")},r.doPause=function(){return this.safeCall("doPause")},r.doResume=function(){return this.safeCall("doResume")},r.doStop=function(){return this.safeCall("doStop")},r.speakText=function(t,e){return this.safeCall("speakText",t,e)},r.onCurrentPlayingOptionsUpdated=function(){return this.safeCall("onCurrentPlayingOptionsUpdated")},r.safeCall=function(e){var n=t[e];if("function"==typeof n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return n.apply(this,i)}},n}(e);for(var r in t)r in n.prototype||(n.prototype[r]=t[r]);return n};var n=e.prototype;return n.pause=function(){this.status===pw.playing&&(this.status=pw.paused,this.statusStore.set(this.status),this.doPause())},n.resume=function(){this.status===pw.paused&&(this.status=pw.playing,this.statusStore.set(this.status),this.doResume())},n.stop=function(){this.status!==pw.stopped&&(this.status=pw.stopped,this.statusStore.set(this.status),this.currentPlayingOptions=void 0,this.doStop())},n.play=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{rate:1,pitch:1,volume:1};this.currentPlayingOptions=n,this.status=pw.playing,this.statusStore.set(this.status);var r,i,o,a=[],s=new kt,c=new kt,u=!1,d=!1,l=this.statusStore.onchange((function(t){(d=t===pw.stopped)&&(clearTimeout(i),s.cancel(),c.cancel(),l&&l())})),h=Tw(t);try{var f=function(){var t=o.value;s.exec((function(){if(!d)return t.then((function(t){if(!d){var e=t.text.split(" ");if(0===e.length){if(!r)return;e[0]=r,r=void 0}else r&&("-"===r[r.length-1]?e[0]=r.substr(0,r.length-1)+e[0]:e.unshift(r),r=void 0);r=e[e.length-1],e.splice(-1,1),a.push.apply(a,E()(e))}}))}))};for(h.s();!(o=h.n()).done;)f()}catch(t){h.e(t)}finally{h.f()}return s.waitForCurrentRunningTasks().then((function(){u=!0,r&&(a.push(r),r=void 0)})),new Promise((function(t,n){i=setTimeout((function r(){if(d)c.waitForCurrentRunningTasks().then(t,n);else{if(a.length>0)Fw(a.join(" ")).forEach((function(n){n&&c.exec((function(){return e.speakText(n,e.currentPlayingOptions)})).finally((function(){d&&t()}))}));a.length=0,u?c.waitForCurrentRunningTasks().then(t,n):i=setTimeout(r)}}))}))},n.updateOptions=function(t){this.currentPlayingOptions&&(A()(this.currentPlayingOptions,t),this.onCurrentPlayingOptionsUpdated())},e}(function(){function t(){this.init()}return t.prototype.init=function(){},t}());function Fw(t){var e=[];return t.split(/[\n\t\.。;，]+|\s{2}/).forEach((function(t){-1===t.indexOf(",")?e.push(t):e.push.apply(e,E()(t.replace(/\d+(,\d{3})+|,/g,(function(t){return","===t?",,":t})).split(",,")))})),e}var Mw=window.speechSynthesis,Ow=function(t){function e(){var e;return(e=t.call(this)||this).supported()&&e.getVoices().then((function(){var t=new SpeechSynthesisUtterance(" ");Mw.speak(t),Mw.cancel()})),e}O()(e,t);var n=e.prototype;return n.supported=function(){return"object"===_()(window.speechSynthesis)&&"function"==typeof window.SpeechSynthesisUtterance},n.doPause=function(){Mw.pause()},n.doResume=function(){Mw.resume()},n.doStop=function(){Mw.cancel()},n.speakText=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentPlayingOptions,r=new SpeechSynthesisUtterance(t);return new Promise((function(t,i){r.addEventListener("end",(function(){return t()})),r.addEventListener("error",i);var o=Promise.resolve();if(n){r.rate=n.rate,r.pitch=n.pitch,r.lang=n.lang||r.lang;var a=n.voice;switch(_()(a)){case"string":o=o.then((function(){return e.getVoiceByName(a)})).then((function(t){t&&(r.voice=t)}));break;case"object":r.voice=a}r.volume=n.volume}o.then((function(){switch(Mw.speak(r),e.status){case pw.stopped:t(),Mw.cancel();break;case pw.paused:Mw.pause()}}))}))},n.onCurrentPlayingOptionsUpdated=function(){},n.getVoiceByName=function(t){return this.getVoices().then((function(e){return e.find((function(e){return e.name===t||e.voiceURI===t}))}))},n.getVoices=function(){return new Promise((function(t){var e=0;!function n(){var r=Mw.getVoices();r&&r.length>0?t(r):e<20?(e++,setTimeout(n,100)):t([])}()}))},e}(kw),Lw=function(){},Nw=function(t){function e(e){var n;return(n=t.call(this)||this).pdfViewer=e,n.speechSynthesis=new Ow,n.defaultOptions={rate:1,pitch:1,volume:1,external:{}},n.stopHook=Lw,n.statusStore=new Rw,n.eventEmitter=new Qs,n}O()(e,t);var n=e.prototype;return n.setSpeechSynthesis=function(t){this.speechSynthesis.stop(),this.speechSynthesis=t,this.statusStore.set(pw.stopped)},n.supported=function(){return this.speechSynthesis.supported()},n.readPage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.readPages([t],e)},n.readPages=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.pdfViewer.getCurrentPDFDoc(),i=r.getPageCount(),o=i-1;t.forEach((function(t){if(t<0||t>o)throw new Error("Invalid page index: ".concat(t,",page index should range between 0 and ").concat(o))}));var a=new kt;return this.stopHook=function(){e.stopHook=Lw,a.cancel()},this.speechSynthesis.status=pw.playing,this.statusStore.set(this.status),t.forEach((function(t){a.exec((function(){return e.eventEmitter.emit("viewer--read-page-start",t),e.doReadPage(t,n).finally((function(){e.eventEmitter.emit("viewer--read-page-end",t)}))}))})),a.waitForCurrentRunningTasks().finally((function(){e.isStopped()||e.stop()}))},n.readText=function(t,e){var n=this,r=N.a.mark(a),i=A()({},this.defaultOptions,e,{external:A()({},this.defaultOptions.external,(null==e?void 0:e.external)||{})}),o=function(){return n.isStopped()};function a(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.resolve({text:t.text,pageIndex:t.pageIndex,rect:t.rect});case 4:case"end":return e.stop()}}),r)}return this.speechSynthesis.status=pw.playing,this.statusStore.set(this.status),this.speechSynthesis.play(a(),i).finally((function(){if(!o())return n.stop()}))},n.pause=function(){this.speechSynthesis.pause(),this.statusStore.set(this.status)},n.resume=function(){this.speechSynthesis.resume(),this.statusStore.set(this.status)},n.stop=function(){this.speechSynthesis.stop(),this.statusStore.set(this.status),this.stopHook()},n.setDefaultOptions=function(t){A()(this.defaultOptions,t)},n.setVolume=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultOptions.volume;this.defaultOptions.volume=t,this.isStopped()||this.speechSynthesis.updateOptions({volume:t})},n.setRate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultOptions.rate;this.defaultOptions.rate=t,this.isStopped()||this.speechSynthesis.updateOptions({rate:t})},n.updatePlayingOptions=function(t){return!this.isStopped()&&(this.speechSynthesis.updateOptions(t),!0)},n.isStopped=function(){return this.status===pw.stopped},n.isPlaying=function(){return this.status===pw.playing},n.onStatusChange=function(t){return this.statusStore.onchange(t.bind(this))},n.onReadPageStart=function(t){var e=this;return this.eventEmitter.addListener("viewer--read-page-start",t),function(){e.eventEmitter.removeListener("viewer--read-page-start",t)}},n.onReadPageEnd=function(t){var e=this;return this.eventEmitter.on("viewer--read-page-end",t),function(){e.eventEmitter.removeListener("viewer--read-page-end",t)}},n.doReadPage=function(t,e){var n=this,r=function(){return n.isStopped()};if(r())return Ht.RESOLVED_PROMISE_VOID;var i=this.pdfViewer.getCurrentPDFDoc(),o=i.getPageCount();return t>=o?Ht.RESOLVED_PROMISE_VOID:i.getPageByIndex(t).then((function(i){if(i&&!r())return i.getTextRectCount().then((function(o){var a=N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o<=0)){e.next=5;break}return e.next=3,Promise.resolve().then((function(){return{text:"blank",pageIndex:t,rect:{}}}));case 3:e.next=14;break;case 5:n=0;case 6:if(!(n<o)){e.next=14;break}if(!r()){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,i.getTextByRectIndex(n).then((function(e){return{text:e.text,pageIndex:t,rect:e.rect}}));case 11:n++,e.next=6;break;case 14:case"end":return e.stop()}}),e)})),s=A()({},n.defaultOptions,e,{external:A()({},n.defaultOptions.external,e.external||{})});try{return n.speechSynthesis.play(a(),s)}finally{n.statusStore.set(n.status)}}))}))},Tt()(e,[{key:"status",get:function(){return this.speechSynthesis.status}}]),e}(vt.a),Vw=function(){function t(t){this.viewer=t,this.executor=new kt,this.service=new Nw(this.viewer)}var e=t.prototype;return e.supported=function(){return this.service.supported()},e.setSpeechSynthesis=function(t){this.service.setSpeechSynthesis(t)},e.readPages=function(t,e){var n=this;return this.stop(),this.executor.exec((function(){return n.service.readPages(t,e)}))},e.readText=function(t,e){var n=this;return this.stop(),this.executor.exec((function(){return n.service.readText(t,e)}))},e.stop=function(){this.executor.cancel(),this.service.stop()},e.pause=function(){this.service.pause()},e.resume=function(){this.service.resume()},e.setVolume=function(t){this.service.setVolume(t)},e.setRate=function(t){this.service.setRate(t)},e.onStatusChange=function(t){return this.service.onStatusChange(t)},e.updatePlayingOptions=function(t){return this.service.updatePlayingOptions(t)},e.onReadPageStart=function(t){return this.service.onReadPageStart(t)},e.onReadPageEnd=function(t){return this.service.onReadPageEnd(t)},Tt()(t,[{key:"status",get:function(){return this.service.status}}]),t}(),Bw=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.execute=function(t){var e=t.keyboard;e.setup(ta);var n=function(t){e.activeContext(t.getStateName())};t.eventEmitter.on(Ct.switchStateHandler,n),this.addDestroyHook((function(){t.eventEmitter.off(Ct.switchStateHandler,n)})),e.activeContext(Vn)},e}(vt.a),Uw=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).undoActivation=function(){},e}O()(e,t);var n=e.prototype;return n.execute=function(t){var e=this,n=t.getKeyboard();n.withContext(Zo.SELECTION,(function(n){e.addDestroyHook(n.keyup(Xo.SELECT_ALL,(function(){e.selectAllAnnotOrWidget(t)}),{interceptors:[ra(),ia()]}))})),n.withContext(wr,(function(n){e.isDestroyed||e.addDestroyHook(n.keyup(Xo.SELECT_ALL,(function(n){e.selectAllAnnotOrWidget_selection_state_handler(t)}),{interceptors:[ra(),ia()]}))})),n.withContext(Zo.ACTIVATION_ANY,(function(n){e.addDestroyHook(n.keyup(Xo.UNSELECT_OBJECT,(function(){t.activateElement(),e.undoActivation()})),n.keyup(Xo.SELECT_ALL,(function(){t.getStateHandlerManager().getCurrentStates().getStateName()===wr?e.selectAllAnnotOrWidget_selection_state_handler(t):e.selectAllAnnotOrWidget(t)}),{interceptors:[ra(),ia()]}),n.keydown(Xo.COPY_ACTIVATE_ELEMENT,(function(e){t.isShortcutKeyEnabled()&&(t.currentPDFDoc.checkPermission(Tn.extract)&&t.copy());e.preventDefault()}),{interceptors:[ra()]}),n.keydown(Xo.CUT_ACTIVATE_ELEMENT,(function(e){t.isShortcutKeyEnabled()&&t.cut(),e.preventDefault()}),{interceptors:[ra()]}))}));var r=function(){e.handleOnActivationChanged(t,n)},i=t.eventEmitter;i.on(Ct.activeElementChanged,r),this.addDestroyHook((function(){i.off(Ct.activeElementChanged,r)}))},n.selectAllAnnotOrWidget=function(t){this.getAnnotsOfCurrentPage(t).then((function(e){if(e&&!(e.length<1)){var n=t.getStateHandlerManager().getCurrentStates().getStateName();if(Object.keys(Tr).indexOf(n)>=0){var r=new pt;e.forEach((function(e){if(!(e.getType()!==Tr[n]||e.isGrouped&&e.isGrouped())){var i=t.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;i&&r.add(i)}})),t.bindMultiSelectActiveEvents(r),t.activationManager.active(r),t.getPDFDocRender().setCurrentAnnotHandler()}else if(Object.keys(_r).indexOf(n)>=0){var i=[];e.forEach((function(t){"widget"===t.getType()&&t.info.fieldType===_r[n]&&i.push(t)})),i.length&&t.eventEmitter.emit("active-widgets-for-multi-select",{widgets:i,activationGroup:new pt})}t.eventEmitter.emit(Ct.activeElementChanged)}}))},n.selectAllAnnotOrWidget_selection_state_handler=function(t){this.getAnnotsOfCurrentPage(t).then((function(e){if(e&&!(e.length<1)){var n=new pt,r=[],i=[];e.forEach((function(e){if(!r.find((function(t){return t===e})))if(e.isGrouped&&e.isGrouped()){var o=e.getGroupElements()||[];if(o.length){var a=new pt;o.forEach((function(e){var n=t.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;n&&a.add(n)})),n.add(a),r=[].concat(E()(r),E()(o))}}else if("widget"===e.getType())i.push(e);else{var s=t.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;s&&n.add(s)}})),i.length?t.eventEmitter.emit("active-widgets-for-multi-select",{widgets:i,activationGroup:n}):(t.bindMultiSelectActiveEvents(n),t.activationManager.active(n),t.getPDFDocRender().setCurrentAnnotHandler())}}))},n.handleOnActivationChanged=function(t,e){var n=t.getAllActivatedElements();if(0===n.length)this.undoActivation();else{var r=0,i=0,o=0;n.forEach((function(t){t.editingMgr?r++:t.annot?i++:t.graphicsObject&&o++}));var a,s=[r,i,o].filter((function(t){return 0!==t})).length;1===s?r>0?a=Zo.ACTIVATION_WIDGET:i>0?a=Zo.ACTIVATION_ANNOTATION:o>0&&(a=Zo.ACTIVATION_GRAPH_OBJ):s>1&&(a=Zo.ACTIVATION_ANY),a&&(this.undoActivation(),this.undoActivation=e.activeContext(a))}},n.getAnnotsOfCurrentPage=function(t){var e=t.currentPDFDoc;if(!e)return Promise.resolve([]);var n=t.getPDFDocRender().getCurrentPageIndex();return e.getPageByIndex(n).then((function(t){return t.getAnnots().then((function(t){return t.filter((function(t){return"popup"!==t.getType()&&"watermark"!==t.getType()&&"R"!==t.info.RT&&!t.info.IRT}))}))}))},e}(vt.a),jw=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.execute=function(t){t.getKeyboard().withContext(Zo.BASIC_STATE_HANDLER,(function(e){e.keydown(Xo.SWITCH_TO_HAND_STATE,(function(){t.getStateHandlerManager().switchTo(Vn)}))}))},e}(vt.a);new Date;function Hw(t){var e=t.services,n=t.inject||e;if("function"==typeof n){var r=n.call(t);return Array.isArray(r)?r.reduce((function(t,e,n){return t["service"+n]=e,t}),{}):"function"==typeof r?{service0:r}:r}return{}}function Ww(t){var e=t.scope;return et(e)&&e.call(t)||ma.SINGLETON}n(449),n(451);function $w(t,e){et(t.pullout)&&t.pullout(e)}function Yw(t){if(et(t.addDestroyHook)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.addDestroyHook.apply(t,n)}}var qw=function(){function t(){this.map=new Map}var e=t.prototype;return e.getComponentInstance=function(t,e){if(nt(t))return this.map.get(t);var n=t.$$ioc_instance_name;if(nt(n)&&this.map.has(n))return this.map.get(n);t.length>0&&Ea.a.getLogger(this+"").warn("Relying on other object instances through constructors is not a good practice",t);var r=1===t.length?new t(e):new t;return this.saveComponentInstance(t,r),r},e.saveComponentInstance=function(t,e){var n;if(nt(t)?n=t:(n=t.$$ioc_instance_name||this.generateInstanceName(),t.$$ioc_instance_name=n),this.map.has(n))throw new Error("[IoC] An unknown error has occurred: Duplicate requests to create instances of the same type: (".concat(t,")!"));this.map.set(n,e)},e.onInject=function(t){var e=t.targetStrategy,n=t.injectInto,r=t.component,i=t.propertyName;e.level>this.level&&Yw(r,(function(){$w(n,i)}))},e.destroyComponents=function(){this.map.forEach((function(t){!function(t){et(t.destroy)&&t.destroy()}(t)})),this.map.clear()},e.define=function(t){},t}(),Gw=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"singleton",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return(e=t.call(this)||this).name=n,e.level=r,e}O()(e,t);var n=e.prototype;return n.generateInstanceName=function(){return Object(Qi.a)(this.name)},n.registerComponentInstance=function(t){var e=t.constructor;this.saveComponentInstance(e,t)},n.registerComponentInstanceByName=function(t,e){this.saveComponentInstance(e,t)},e}(qw),zw="object"===("undefined"==typeof window?"undefined":_()(window))?window:globalThis,Kw=zw.__SHARED_IOC_STRATEGY__||new Gw("shared",1/0);zw.__SHARED_IOC_STRATEGY__=Kw;n(452);var Jw=function(){function t(){this.level=Number.MIN_SAFE_INTEGER}var e=t.prototype;return e.getComponentInstance=function(t,e){return new t},e.onInject=function(t){var e=t.targetStrategy,n=t.injectInto,r=t.component,i=t.propertyName;e.level>this.level&&Yw(r,(function(){$w(n,i)}))},e.destroyComponents=function(){},e.define=function(){},t}(),Xw=Object(Qi.a)("$$ioc-component-instance-initialized"),Zw=function(){function t(){this.strategies=new Map,this.setStrategy(ma.SHARED_SINGLETON,Kw),this.setStrategy(ma.PROTOTYPE,new Jw),this.setStrategy(ma.SINGLETON,new Gw)}var e=t.prototype;return e.define=function(t){var e=Ww(t),n=this.getStrategy(e);null==n||n.define(t)},e.getInstanceByClass=function(t,e){if("string"==typeof t){var n=this.getStrategy(ma.SINGLETON).getComponentInstance(t,e);return n&&this.initInstance(n)}if("function"==typeof t){var r=Ww(t),i=this.getStrategy(r).getComponentInstance(t,e);return this.initInstance(i)}},e.initInstance=function(t){var e=this;if(!t||!t.constructor)throw new Error("".concat(t," is not a valid IoC Component instance!"));if(t[Xw])return t;Object.defineProperty(t,Xw,{get:function(){return!0},configurable:!1,enumerable:!1});var n=t.constructor,r=Ww(n),i=this.getStrategy(r),o=Hw(n),a=function(o){if(Wt.a.hasProperty(t,o))return"continue";if(o in t)throw new Error("Unable to inject instance, the same property name(".concat(o,") already exists in target instance."));Wt.a.property(t,o,(function(){var a=Ww(n),s=Hw(n),c=e.getStrategy(a);if(c.level<i.level)throw new Error("[IoC] Instances of scope '".concat(r,"' cannot depend on scope '").concat(a,"'"));var u=e.getInstanceByClass(s[o],t);if(!u)throw new Error("Unexpected ioc component class ".concat(s[o],", name: ").concat(o,", owner: ").concat(t));return function(t,e,n){et(t.injected)&&t.injected(e,n)}(t,o,u),i.onInject({component:u,injectInto:t,propertyName:o,targetStrategy:c}),u})),function(t){return!!et(t.isLazy)&&t.isLazy()}(n)||Wt.a.loadProperty(t,o)};for(var s in o)a(s);return function(t){et(t.serviceInjected)&&(t.serviceInjected(),t.serviceInjected=Dt.a),et(t.allInjected)&&(t.allInjected(),t.allInjected=Dt.a)}(t),t},e.setStrategy=function(t,e){this.strategies.set(t,e)},e.getStrategy=function(t){var e=this.strategies.get(t);if(!e)throw new Error("[IoC] Incorrect scope: ".concat(t));return e},t}(),Qw=function(t){function e(e){var n;(n=t.call(this)||this).level=-1,n.componentClasses=[];return e.eventEmitter.on(Ct.openFileSuccess,(function(t){n.componentClasses.forEach((function(e){n.getComponentInstance(e,t)}))})),e.eventEmitter.on(Ct.willCloseDocument,(function(){n.destroyComponents()})),n}O()(e,t);var n=e.prototype;return n.onInject=function(t){},n.generateInstanceName=function(){return Object(Qi.a)("pdf-doc-lifecycle")},n.define=function(t){this.componentClasses.indexOf(t)>-1||this.componentClasses.push(t)},e}(qw),tb=function(t){function e(){return t.apply(this,arguments)||this}return O()(e,t),e.prototype.execute=function(t){var e=t.getIoC(),n=e.getStrategy(ma.SINGLETON),r={PDFViewer:t,Keyboard:t.keyboard,EventEmitter:t.eventEmitter,Store:t.store,AnnotManager:t.annotManager,StateHandlerManager:t.stateHandlerManager,ViewerUI:t.viewerUI,LifeCycleManager:t.lifeCycleManager,ActivationManager:t.activationManager,LocalStorage:t.storage};for(var i in r)n.registerComponentInstance(r[i]),n.registerComponentInstanceByName(r[i],i);e.setStrategy("PDF_DOC_LIFE_CYCLE_SCOPE_STRATEGY",new Qw(t))},e}(vt.a);function eb(t){if(!t.$$overrided){t.$$overrided=!0;var e=t.t;t.t=function(n,r){if(!n)return n;switch(_()(n)){case"number":case"symbol":case"bigint":case"boolean":case"function":return n;case"string":break;default:if(!Array.isArray(n))return n}return t.exists(n,r)?e.call(t,n,r):n}}}var nb=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:localStorage;this.prefix=t,this.storage=e}var e=t.prototype;return e.setItem=function(t,e){this.storage.setItem(this.getKey(t),JSON.stringify(e))},e.getItem=function(t){var e=this.storage.getItem(this.getKey(t));return e&&JSON.parse(e)},e.getKey=function(t){return this.prefix+t},t}(),rb=3,ib=function(){function t(){}t.inject=function(){return{viewer:_b}};var e=t.prototype;return e.loadPDFDocByHttpRangeRequest=function(t,e){var n=this,r=t.range.url;if(!e.fileName&&r.endsWith(".pdf")){var i=r.lastIndexOf("/"),o=r.substring(i+1);o=decodeURIComponent(o),e.fileName=o}if(!sc(r)){var a=ec();t.range.url=nc(a).join(r).absolute()}return this.viewer.getWebPDFJR().then((function(r){return r.getPDFDocByHttpRangeRequest(t,e).then((function(t){return n._parseDoc(t,e)}))}))},e.loadPDFDocByFile=function(t,e){var n=this;return this.viewer.getWebPDFJR().then((function(r){return r.getPDFDocByFile(t,e).then((function(t){return n._parseDoc(t,e)}))}))},e._parseDoc=function(t,e){return Promise.resolve(function(t,e){if(t&&"function"==typeof t.getJWT)return t.getJWT(e)}(e)).then((function(n){e.idJWT=n||e.jwt;var r=e.errorHandler||function(t,e,n){throw n};return function e(n){return t.parse(n).then((function(i){return n.encryptPassword?i:(n.password?i.getTypeByPassword(n.password):i.getPasswordType()).then((function(o){if(2===o&&i.hasOwnerPassword||0===o){n.protected=!0;var a=new Error("Incorrect password for document");return a.code=rb,a.pdfDoc=t,r(i,n,a,e)}return i}))}),(function(i){return r(t,n,i,e)}))}(e)}))},t}();var ob=function(t){function e(e){var n;return(n=t.call(this,$o.PPO_REMOVE_PAGES)||this).pdfViewer=e,n}return O()(e,t),e.prototype.receive=function(t,e){return this.pdfViewer.getCurrentPDFDoc().removePages(t.data.pageRange)},e}(sw),ab=(n(453),function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-crosshair",n}O()(e,t),e.getStateName=function(){return Gn};var n=e.prototype;return n.pageHandler=function(t){var e=this;if(this.pageRender=t,Vt.isIOS)0===t.index&&(setTimeout((function(){e.pdfViewer.getStateHandlerManager().switchTo("hand")}),100),this.pdfViewer.viewerUI.alert("Unsupported now. Comming soon."));else{var n=t.$handler;n.addClass(this.cursorStyle);var r=this.$imageInput=B()('<input id="imageInput" type="file" style="visibility: hidden;" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg"/>');n.append(r);var i,o=n[0],a=this.hammer=new Kr.a.Manager(o,{recognizers:[[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL}]]});a.on("panstart",(function(t){var e=Ss(o,t);i=[e.x,e.y]})),a.on("panmove",(function(t){var e=o.getBoundingClientRect(),r=t.srcEvent,a=sb(i,e,r),s=["top:"+a.top+"px","left:"+a.left+"px","height:"+(a.bottom-a.top)+"px","width:"+(a.right-a.left)+"px"].join(";"),c=n.find(".fv__mark-image-blank");if(0===c.length){var u=B()(document.createDocumentFragment());u.append('<div class="fv__mark-image-blank" style="'+s+'"></div>'),n.append(u)}else c.css({top:a.top,left:a.left,width:a.right-a.left,height:a.bottom-a.top})})),a.on("panend",(function(e){var r=o.getBoundingClientRect(),a=e.srcEvent,s=sb(i,r,a);n.find(".fv__mark-image-blank").remove(),n.find("#imageInput").off("click"),n.find("#imageInput").off("change").on("change",(function(e){var n=e.target.files[0];return t.getPDFPage().then((function(r){var i=t.getRotation(),o=new FileReader,a=r.reverseDeviceRect(s,t.getScale(),i);o.readAsArrayBuffer(n),o.onload=function(){var n=new Uint8Array(o.result),s=((r.getRotationAngle()+i)%360+360)%360;0!=s&&(s=(360-s)%360),r.addAnnot({flags:4,type:"screen",rect:a,rotation:s,buffer:n}).then((function(n){e.target.value="";var r=n[0];n[0].info.annotScreenDetailType="screen_img";var i=t.annotsRender.getAnnotRender(r.getId()).component;t.pdfViewer.eventEmitter.emit(Ct.addAnnotSuccess,i.annot),t.annotsRender.activeAnnot(r.getId())})).catch((function(t){}))}})).catch((function(t){}))})).click()}))}},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.$imageInput&&this.$imageInput.remove()},n.out=function(){this.destroyPageHandler()},e}(ys));function sb(t,e,n){var r,i=Xr(n),o=Zr(n),a=[i-e.left,o-e.top],s=t[0],c=t[1],u=a[0],d=a[1];return u<s&&(r=s,s=u,u=r),d<c&&(r=c,c=d,d=r),{left:s,top:c,right:u,bottom:d}}var cb=function(t){function e(e){var n;return(n=t.call(this,e)||this).file=null,n}O()(e,t),e.getStateName=function(){return zn};var n=e.prototype;return n.pageHandler=function(t){var e=this,n=this;this.pageRender=t;var r=this.$handler=t.$handler,i=r[0],o=this.hammer=new Kr.a.Manager(i,{recognizers:[[Kr.a.Tap],[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL}]]}),a=B()('<img style="position: absolute;top:-'+r.height()+"px;left:-"+r.width()+'px;border:2px solid transparent"></img>');r.append(a);var s=0,c=0;this.pdfViewer.eventEmitter.on(Ct.addEditImage,this.loadFile=function(t){var n=new FileReader;e.file=t,n.readAsDataURL(t),n.onload=function(t){a.prop({src:t.target.result});var e=new Image;e.onload=function(){a.css({top:-e.height,left:-e.width}),s=e.width,c=e.height},e.src=t.target.result}}),r.on("mousemove mousewheel",(function(t){var e=i.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;a.css({top:r,left:n})})),r.on("mouseleave",(function(t){a.css({top:-c,left:-s})})),t.getPDFPage().then((function(e){t.getScale();var r=t.getRotation();o.on("tap",(function(i){var o={},s=a.width(),c=a.height();o.top=parseFloat(a.css("top")),o.left=parseFloat(a.css("left")),o.right=o.left+s*t.getScale(),o.bottom=o.top+c*t.getScale(),a.remove();var u=new FileReader;u.readAsArrayBuffer(n.file),u.onload=function(i){var a=new Uint8Array(i.target.result),s=e.reverseDeviceRect(o,t.getScale(),t.getRotation());e.addImage(a,s,r).then((function(){n.pdfViewer.getStateHandlerManager().switchTo(Ms.getStateName())}))}}))}))},n.destroyPageHandler=function(){this.$handler.off("mousemove mousewheel mouseleave"),this.$handler.empty(),this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.pdfViewer.eventEmitter.off(Ct.addEditImage,this.loadFile)},n.out=function(){this.destroyPageHandler()},e}(ys);n(454);var ub=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-crosshair",n}O()(e,t),e.getStateName=function(){return Kn};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r,i=n[0],o=this.hammer=new Kr.a.Manager(i,{recognizers:[[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL}]]});o.on("panstart",(function(t){var e=Ss(i,t);r=[e.x,e.y]})),o.on("panmove",(function(t){var e=i.getBoundingClientRect(),o=t.srcEvent,a=db(r,e,o),s=["top:"+a.top+"px","left:"+a.left+"px","width:"+(a.bottom-a.top)+"px","height:"+(a.right-a.left)+"px"].join(";"),c=n.find(".fv__mark-link-blank");if(0===c.length){var u=B()(document.createDocumentFragment());u.append('<div class="fv__mark-link-blank" style="'+s+'"></div>'),n.append(u)}else c.css({top:a.top,left:a.left,width:a.right-a.left,height:a.bottom-a.top})})),o.on("panend",(function(o){var a=i.getBoundingClientRect(),s=o.srcEvent,c=db(r,a,s);return t.getPDFPage().then((function(r){var i=r.reverseDeviceRect(c,t.getScale(),t.getRotation());r.addAnnot({type:"link",rect:i,color:"0000FF"}).then((function(r){n.find(".fv__mark-link-blank").remove();var i=e.pageRender.getAnnotRender(r[0].getId()).component;i.showCreateDialog(),Vt.isMobile&&e.pdfViewer.getStateHandlerManager().switchTo(Ms.getStateName()),t.pdfViewer.eventEmitter.emit(Ct.addAnnotSuccess,i.annot)}))}))}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle)},n.out=function(){this.destroyPageHandler()},e}(ys);function db(t,e,n){var r,i=Xr(n),o=Zr(n),a=[i-e.left,o-e.top],s=t[0],c=t[1],u=a[0],d=a[1];return u<s&&(r=s,s=u,u=r),d<c&&(r=c,c=d,d=r),{left:s,top:c,right:u,bottom:d}}n(302);var lb=function(t){function e(e){return t.call(this,e)||this}O()(e,t),e.getStateName=function(){return mr},e.getDefaultContextMenuConfig=function(){return{selector:".fv__selection-state-contextmenu-container"}};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.doc,r=this.pdfViewer=t.pdfViewer,i=r.viewerUI.rootComponent.pdfUI,o=t.$handler.addClass("fv__select-text-image-state-handler"),a=o[0];this.eventEmitter=r.eventEmitter;var s=this.tooltip=r.viewerUI.createTextSelectionTooltip(t),c=this.hammer=new Kr.a.Manager(a,{recognizers:[[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL,threshold:0}]]});c.add(new Kr.a.Tap({event:"doubletap",taps:2})),c.add(new Kr.a.Tap({event:"singletap"})),c.get("doubletap").recognizeWith("singletap"),c.get("singletap").requireFailure("doubletap"),c.on("singletap",(function(t){e.textSelectionHandler.lookUpQuick||_s(r),s.tooltipComponent.hide()}));var u=B()('<div class="fv__selection-state-contextmenu-container fv__contextmenu-container"></div>');o.append(u),u.data("hand-state",this),this.$contextmenuContainer=u,this.textSelectionHandler=new ks(c,t,s,mr),i.openDialog("fv--selected-image-contextmenu").then((function(i){var a="click.image.".concat(t.index);B()(i.element).find("[component-type=contextmenu-item]").off(a).on(a,(function(i){var o=n.selectedInfo;if(o&&o.pageRender===t&&!B()(i.currentTarget).hasClass("disabled"))switch(B()(i.currentTarget).attr("component-name")){case"fv--contextmenu-item-copy":e.doImageCopy();break;case"fv--contextmenu-item-saveImageAs":e.doExportImageObjAs();break;case"fv--contextmenu-item-bookmark":e.textSelectionHandler.createBookmark(t);break;case"fv--contextmenu-item-editImage":_s(r),s.tooltipComponent.hide(),r.stateHandlerManager.switchTo("page-editor"),e.pdfViewer.getEventEmitter().once("pageeditor-started",(function(n){setTimeout((function(){t.docRender.stateHandler.triggerClick(e.lastEvent,1)}),300)}))}})),o.on("contextmenu",".fv__mark-selection-blank[type=".concat(an.Image,"]"),(function(t){t.preventDefault();var n=i.getComponentByName("fv--contextmenu-item-bookmark");e.hasModifyPermissions(e.pageRender)?n.unlock():n.lock(),i.showAt(t.pageX,t.pageY)}))})),i.openDialog("fv--selected-rectangle-contextmenu").then((function(r){var i="click.rectangle.".concat(t.index);B()(r.element).find("[component-type=contextmenu-item]").off(i).on(i,(function(r){var i=n.selectedInfo;if(i&&i.pageRender===t&&!B()(r.currentTarget).hasClass("disabled"))switch(B()(r.currentTarget).attr("component-name")){case"fv--contextmenu-item-exportSelectionAs":e.doExportSelectionRectangle()}})),o.on("contextmenu",".fv__mark-selection-blank[type=rectangle]",(function(t){t.preventDefault();var n=e.checkPerm("checkExtractAccess"),i=r.getComponentByName("fv--contextmenu-item-exportSelectionAs");n?i.enable():i.disable(),r.showAt(t.pageX,t.pageY)}))})),i.eventEmitter.on("text-tooltip-click",(function(t){"highlight"===t.type&&e.pdfViewer.getPDFDocRender().pagesRender.pageRenders.forEach((function(t){t.$handler.find(".fv__mark-selection-blank").remove()}))}))},n.offHammer=function(){this.hammer&&this.hammer.off("panstart"),this.hammer&&this.hammer.off("panmove"),this.hammer&&this.hammer.off("panend")},n.destroyPageHandler=function(){_s(this.pdfViewer),this.tooltip&&this.tooltip.tooltipComponent.hide(),this.hammer&&this.hammer.destroy(),this.pageRender&&this.pageRender.$handler.removeClass("fv__select-text-image-state-handler"),this.$contextmenuContainer&&this.$contextmenuContainer.remove(),this.tooltip&&this.tooltip.destroy(),this.eventEmitter.off("text-tooltip-click"),this.textSelectionHandler.destroy()},n.docHandler=function(e){var n=this;t.prototype.docHandler.call(this,e);var r=this.pdfViewer,i=e.doc;r.getKeyboard().withContext(mr,(function(t){n.__off__copy__event__&&n.__off__copy__event__(),n.__off__copy__event__=t.keydown(Xo.COPY_TEXT_IMAGE,(function(){if(i.selectedInfo){var t=i.selectedInfo.type;t===an.Text?n.doTextCopy():t===an.Image&&n.doImageCopy()}})),n.offSelectAllEvent&&n.offSelectAllEvent(),n.offSelectAllEvent=t.keydown(Xo.SELECT_ALL,(function(){var t=r.getPDFDocRender().getPDFPageRender(r.getPDFDocRender().getCurrentPageIndex());n.doTextSelectAll(t)}),{interceptors:[ia()]}),n.offAddBookmarkEvent&&n.offAddBookmarkEvent(),n.offAddBookmarkEvent=t.keydown(Xo.ADD_BOOKMARK,(function(){var t=r.getPDFDocRender().getPDFPageRender(r.getPDFDocRender().getCurrentPageIndex());n.hasModifyPermissions(t)&&i.checkPermission(Wa.checkAnnotForm)&&n.createBookmark(t)}),{interceptors:[ia()]})}));var o=null;e.$container.on("mouseleave",".fv__mark-selection-blank, .fv--ui-text-selection-tooltip",(function(t){clearTimeout(o),o=setTimeout((function(){var t=r.getPDFDocRender();if(t){var e=t.getPDFPageRender(r.getPDFDocRender().getCurrentPageIndex());e&&e.stateHandler&&e.stateHandler.tooltip&&e.stateHandler.tooltip.tooltipComponent.hide()}}),1e3)})).on("mouseenter",".fv__mark-selection-blank, .fv--ui-text-selection-tooltip",(function(t){clearTimeout(o)}))},n.destroyDocHandler=function(){var e=this;t.prototype.destroyDocHandler.call(this),this.__off__copy__event__&&this.__off__copy__event__(),this.__off__copy__event__=Wo.a,["offCopyEvent","offSelectAllEvent","offAddBookmarkEvent","undoSwitchKbBinder"].forEach((function(t){e[t]&&e[t](),e[t]=Wo.a}))},n.out=function(){this.destroyPageHandler()},n.doImageCopy=function(){var t=this,e=this.pageRender.doc;e.selectedInfo&&e.selectedInfo.graphicsObject&&e.selectedInfo.graphicsObject.getStream().then((function(e){var n=new Blob([e],{type:"image/jpg"});return t.pdfViewer.uploadImage(n).then((function(e){return t.pdfViewer.copyImage(e)}))}))},n.doExportImageObjAs=function(){var t=this.pdfViewer.viewerUI.rootComponent.pdfUI;if(!(t.customs&&t.customs.isAccountExpired&&t.customs.isAccountExpired(!0))){var e=this.pageRender.doc;e.selectedInfo&&t.customs&&t.customs.showSaveAsDialog&&t.customs.showSaveAsDialog("convert-pdf-to-png","",e.selectedInfo)}},n.doExportSelectionRectangle=function(){var t=this.pdfViewer.viewerUI.rootComponent.pdfUI;if(!(t.customs&&t.customs.isAccountExpired&&t.customs.isAccountExpired(!0,{btnName:"fv--contextmenu-item-exportSelectionAs",tabName:"convert_tab"}))){var e=this.pageRender,n=e.$handler.get(0).getBoundingClientRect(),r=e.$handler.find(".fv__mark-selection-blank.rectangle").get(0).getBoundingClientRect();e.reverseDeviceRect({left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,bottom:r.bottom-n.top}).then((function(n){var r;r=[n],t.customs&&t.customs.showSaveAsDialog&&t.customs.showSaveAsDialog("convert-pdf-to-word",JSON.stringify([{pageIndex:e.index,rectArray:r}]))}))}},n.hasModifyPermissions=function(t){var e=t.doc.getPermissions();return 8&e&&32&e},n.checkPerm=function(t){return this.pageRender.docRender.getUserPermission()[t]()},n.doTextSelectAll=function(t){var e=this.pdfViewer;_s(e),this.tooltip&&this.tooltip.tooltipComponent.hide(),Promise.all([t.getAllTextRect(),t.getAllTextChar(),t.getPDFPage()]).then((function(n){var r=S()(n,3),i=r[0],o=r[1],a=r[2];e.getStore().dispatch(Ht.STORE_NAMES.SELECTION_INFO,{page:a,text:o,rectArray:i}),e.eventEmitter.emit(Ct.selectText,{page:a,text:o,rectArray:i});var s=t.transformRectArray(a,i);Ds(t,s,an.Text)}))},n.doTextCopy=function(){var t=this,e=this.pdfViewer.currentPDFDoc.selectedInfo.text;void 0!==e&&Object(K.copyText)(e).then((function(n){t.pdfViewer.eventEmitter.emit(n?Ct.copyTextSuccess:Ct.copyTextFailed,e)}))},e}(ys),hb=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-crosshair",n}O()(e,t),e.getStateName=function(){return"snapshot-tool"};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler.get(0);n.classList.add(this.cursorStyle);var r=new Hammer.Manager(n);this.hammer=r,r.add(new Hammer.Pan),t.getPDFPage().then((function(i){e.page=i,r.on("panstart",(function(r){var o=Ss(n,r),a={x:o.x+r.deltaX,y:o.y+r.deltaY},s=e._resolvePointsToRect(i,o,a);e.pdfViewer.eventEmitter.emit(Ct.createSnapshotArea,t,s),e.startPoint={x:s.left,y:s.top}})),r.on("panmove",(function(n){var r={x:e.startPoint.x+n.deltaX,y:e.startPoint.y+n.deltaY},o=e._resolvePointsToRect(i,e.startPoint,r);e.pdfViewer.eventEmitter.emit(Ct.updateSnapshotArea,t,o)})),r.on("panend",(function(n){var r={x:e.startPoint.x+n.deltaX,y:e.startPoint.y+n.deltaY},o=e._resolvePointsToRect(i,e.startPoint,r);e.pdfViewer.eventEmitter.emit(Ct.stabilizedSnapshotArea,t,o)}))}))},n._resolvePointsToRect=function(t,e,n){var r=this.pageRender.getScale(),i=t.getPxWidth()*r,o=t.getPxHeight()*r;return{left:Math.max(0,Math.min(e.x,n.x)),right:Math.min(i,Math.max(e.x,n.x)),top:Math.max(0,Math.min(e.y,n.y)),bottom:Math.min(o,Math.max(e.y,n.y))}},n.destroyPageHandler=function(){(this.hammer&&this.hammer.destroy(),this.pageRender)&&this.pageRender.$handler.get(0).classList.remove(this.cursorStyle)},e}(ys);function fb(){}fb.prototype=Ct;A()(new fb,{addTextMarkupSuccess:"add-text-markup-success",fullscreenchange:"fullscreenchange",appendCommentListGroup:"apppend-commentlist-group",destroyCommentListGroup:"destroy-commentlist-group",appendCommentListComment:"append-commentlist-comment",appendCommentListReply:"append-commentlist-reply",destroyCommentListComment:"destroy-commentlist-comment",destroyCommentListReply:"destroy-commentlist-reply",InkImageSelected:"ink-image-selected",applicationDestroyed:"uiextension-destroyed",addReplySuccess:"add-reply-success",deleteReplySuccess:"delete-reply-success",addActionSuccess:"add-action-success",addContentSuccess:"add-content-success",markRedactionSuccess:"mark-redaction-success",addReviewStateSuccess:"add-review-state-success",addMarkedStateSuccess:"add-marked-state-success",addonLoaded:"pdfui-init-process-addon-loaded",initializationCompleted:"pdfui-intialization-completed",commentGroupAnnotationsUpdated:"pdfui-comment-group-annotations-updated",bookmarkSelected:"bookmark-selected",stampSelectedChange:"stampSelectedChange",languageChange:"languageChange",ribbonLoadFinish:"ribbonLoadFinish",editPropertiesAction:"editPropertiesAction",loupeScaleChange:"loupeScaleChange",loupeRedBoxMoved:"loupeRedBoxMoved",enterReadMode:"enterReadMode",exitReadMode:"exitReadMode",toggleStatusBar:"toggleStatusBar",statusBarChange:"statusBarChange",switchNavigationPanel:"switchNavigationPanel",toggleNavigationPanels:"toggleNavigationPanels",resetNavigationPanels:"resetNavigationPanels",toggleAutoScroll:"toggleAutoScroll",changePortfolioLayout:"changePortfolioLayout",compareFilterChange:"compare-filter-change",undoRedoStoreChange:"undo-redo-store-change"}),n(367);var pb=function(t){function e(e){var n;return(n=t.call(this,e)||this).destroyHooks=[],n.destroyDocHooks=[],n.cursorStyle="fv__cursor-loupe",n.offsetX=0,n.offsetY=0,n.updatePosition=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(){var r=this,i=arguments;n||(n=setTimeout((function(){t.apply(r,i),n=null}),e))}}(n.updatePosition.bind(F()(n))),n}O()(e,t),e.getStateName=function(){return gr};var n=e.prototype;return n.docHandler=function(){var t,e,n=this,r=null;Nt.isChrome&&(t="wheel",e=function(t){var e=t.screenX,i=t.screenY,o=document.elementFromPoint(e,i);if(o.className.indexOf(n.cursorStyle)&&r!==o){var a=new MouseEvent("mouseover");o.dispatchEvent(a),r=o}},document.addEventListener(t,e),n.destroyHooks.push((function(){document.removeEventListener(t,e)})))},n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler.get(0);t.$handler.removeClass("fv__cursor-grab").addClass(this.cursorStyle);var r=this.areaRenderer=t.getPageAreaRenderer(255,400,1,!1),i=(document.getElementsByClassName("fv__pdf-viewer-layout"),function(t,r){n.addEventListener(t,r),e.destroyHooks.push((function(){n.removeEventListener(t,r)}))});i("click",(function(t){e.pdfViewer.eventEmitter.emit(Ct.startUpdatePageAreaRenderer,r),e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.updatePosition()})),i("mouseover",(function(t){e.pdfViewer.eventEmitter.emit(Ct.createPageAreaRenderer,r),setTimeout((function(){e.pdfViewer.eventEmitter.emit(Ct.switchPageAreaRenderer,r)}))})),i("mousemove",(function(t){e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.updatePosition()})),i("wheel",(function(t){e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.updatePosition()}))},n.updatePosition=function(){this.areaRenderer.setPosition(this.offsetX,this.offsetY),this.areaRenderer.update()},n.destroyDocHandler=function(){this.destroyDocHooks.forEach((function(t){return t()})),this.destroyPageHandler()},n.destroyPageHandler=function(){this.pageRender&&this.pageRender.$handler.removeClass(this.cursorStyle),this.pdfViewer.eventEmitter.emit(Ct.destroyPageAreaRenderer,this.areaRenderer),this.destroyHooks.forEach((function(t){return t()})),this.updatePosition=null},e}(ys),gb=function(t){function e(e){return t.call(this,e)||this}O()(e,t),e.getStateName=function(){return vr},e.getDefaultContextMenuConfig=function(){return{selector:".fv__selection-state-contextmenu-container"}};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t,this.pdfViewer=t.pdfViewer,this.selectMarkIsVisible=!1;var n=this.tooltip=this.pdfViewer.viewerUI.createTextSelectionTooltip(t),r=t;t.$ui.addClass("fv__annot-container-zindex-up");var i=r.$handler;i.addClass("fv__select-text-annotation-state-handler");var o,a=i[0],s=t.pdfViewer.eventEmitter;o=function(r){r==t&&e.pdfSelectRectArray&&e.selectMarkIsVisible&&t.getPDFPage().then((function(r){var i=t.transformRectArray(r,e.pdfSelectRectArray);e.showSelectMark(i);var o=i[0];o&&n.showAt((o.left+o.right)/2,o.top,e.selectText,i)}))},s.on(Ct.renderPageSuccess,o),e.removeRenderPageSuccessEvent=function(){s.off(Ct.renderPageSuccess,o)};var c,u=this.hammer=new Kr.a.Manager(a,{recognizers:[[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL}]]});u.add(new Kr.a.Tap({event:"doubletap",taps:2})),u.add(new Kr.a.Tap({event:"singletap"})),u.get("doubletap").recognizeWith("singletap"),u.get("singletap").requireFailure("doubletap"),u.on("singletap",(function(r){e.hideSelectMark(),n.hide();var i=t.annotsRender;i?(i.unActiveAnnot(),s.emit(Ct.tapPage,r)):s.emit(Ct.tapPage,r)})),u.on("doubletap",(function(r){e.hideSelectMark(),n.hide();var i=t.annotsRender;i?(i.unActiveAnnot(),s.emit(Ct.doubleTapPage,r)):s.emit(Ct.doubleTapPage,r)})),n.on("hide",(function(){e.hideSelectMark()}));var d,l,h=-1,f=-1;u.on("panstart",(function(n){if(!1!==e.panStart(n,e)){h=-1,f=-1,d=void 0;var r=t.annotsRender;r&&r.unActiveAnnot();var i=Ss(a,n);c=[i.x,i.y],e.hideSelectMark(),l=new Ot}})),u.on("panmove",(function(t){!1!==e.panMove(t,e)&&l.push((function(){var n=e.pageRender,r=[c[0]+t.deltaX,c[1]+t.deltaY];return e.getTextRect(c,r,h,f).then((function(t){var e;return(e=t[0])&&"string"==typeof e.text&&(h=e.start,f=e.end),Promise.all([n.getPDFPage(),t])})).then((function(t){var e=S()(t,2),r=e[0],i=e[1];return n.transformRectArray(r,i)})).then((function(t){e.showSelectMark(t)}))}))})),u.on("panend",(function(r){if(!1!==e.panEnd(r,e)){l.end(),l=null;var i=Ps(c,r.deltaX,r.deltaY),o=[c[0]+r.deltaX,c[1]+r.deltaY];return e.getTextRect(c,o,h,f).then((function(e){var n;return(n=e[0])&&"string"==typeof n.text&&(h=n.start,f=n.end,d=n.text),Promise.all([t.getPDFPage(),e])})).then((function(r){var o=S()(r,2),a=o[0],s=o[1];e.pdfSelectRectArray=s;var c=t.transformRectArray(a,s);e.showSelectMark(c),("string"==typeof d?Promise.resolve(d):e.getTextChar(i)).then((function(t){e.pdfViewer.getStore().dispatch(Ht.STORE_NAMES.SELECTION_INFO,{page:a,text:t,rectArray:s}),e.selectText=t,e.pdfViewer.eventEmitter.emit(Ct.selectText,{page:a,text:t,rectArray:s})}));var u=c[0];u&&n.showAt((u.left+u.right)/2,u.top,e.selectText,c)}))}}));var p=B()('<div class="fv__selection-state-contextmenu-container fv__contextmenu-container"></div>');i.append(p),p.data("hand-state",this),this.$contextmenuContainer=p},n.getTextRect=function(t,e,n,r){return this.pageRender.getTextContinueRectAtDevicePoints(t,e,n,r)},n.getTextChar=function(t){return this.pageRender.getTextContinuousCharAtDeviceRect(t)},n.showSelectMark=function(t){this.selectMarkIsVisible=!0;var e=this.pageRender.$handler;e.find(".fv__mark-selection-blank").remove();for(var n=B()(document.createDocumentFragment()),r=0,i=t.length;r<i;r++){var o=t[r],a=["top:"+o.top+"px","left:"+o.left+"px","height:"+(o.bottom-o.top)+"px","width:"+(o.right-o.left)+"px"].join(";");n.append('<mark class="fv__mark-selection-blank" style="'+a+'"></mark>')}e.append(n)},n.hideSelectMark=function(){this.selectMarkIsVisible=!1,this.pdfViewer.getStore().dispatch(Ht.STORE_NAMES.SELECTION_INFO,null),this.pageRender.$handler.find(".fv__mark-selection-blank").remove()},n.copyText=function(){},n.panStart=function(){},n.panMove=function(){},n.panEnd=function(){},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$ui.removeClass("fv__annot-container-zindex-up"),this.pageRender.$handler.off("mouseup",this.mouseup).removeClass("fv__select-annotation-state-handler"),this.$contextmenuContainer&&this.$contextmenuContainer.remove(),this.pageRender.annotsRender&&this.pageRender.annotsRender.unActiveAnnot(),this.hideSelectMark(),this.tooltip.destroy(),this.removeRenderPageSuccessEvent()},n.out=function(){this.destroyPageHandler()},e}(ys),vb=function(t){function e(e){return t.call(this,e)||this}O()(e,t),e.getStateName=function(){return yr};var n=e.prototype;return n.pageHandler=function(t){var e=this;this.pageRender=t;var n,r=t.$handler[0],i=this.hammer=new Kr.a.Manager(r,{recognizers:[[Kr.a.Pan,{direction:Kr.a.DIRECTION_ALL}]]});i.on("panstart",(function(t){if(!1!==e.panStart(t,e)){var i=t.srcEvent,o=Xr(i),a=Zr(i);n=As(r,o,a),e.hideToolTip(),e.hideSelectMark()}})),i.on("panmove",(function(t){!1!==e.panMove(t,e)&&e.getTextRect(Ps(n,t.deltaX,t.deltaY)).then((function(t){e.showSelectMark(t)}))})),i.on("panend",(function(t){!1!==e.panEnd(t,e)&&e.getTextRect(Ps(n,t.deltaX,t.deltaY)).then((function(t){e.showToolTip(t)}))}))},n.getTextRect=function(t){return this.pageRender.getTextContinueRectAtDeviceRect(t)},n.showSelectMark=function(t){var e=this.pageRender.$handler;e.find(".mark-select-text-blank").remove();for(var n=$(document.createDocumentFragment()),r=0,i=t.length;r<i;r++){var o=t[r],a=["top:"+o.top+"px","left:"+o.left+"px","width:"+(o.bottom-o.top)+"px","height:"+(o.right-o.left)+"px"].join(";");n.append('<mark class="mark-highlight-blank" style="'+a+'"></mark>')}e.append(n)},n.hideSelectMark=function(){this.pageRender.$handler.find(".mark-highlight-blank").remove()},n.showToolTip=function(){},n.hideToolTip=function(){},n.panStart=function(){},n.panMove=function(){},n.panEnd=function(){},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.off("mouseup",this.mouseup).removeClass("fv__select-text-state-handler"),this.hideToolTip();try{this.hideSelectMark()}catch(t){}},n.out=function(){this.destroyPageHandler()},e}(ys),mb=function(t){function e(e){var n;return(n=t.call(this,e,"square")||this).pdfViewer=e,n.cursorStyle="fv__cursor-marquee",n.destroyHooks=[],n}O()(e,t),e.getStateName=function(){return fr};var n=e.prototype;return n.start=function(t,e){var n=e.left,r=e.top;this.shapeControl||(this.shapeControl=new Wc({resizable:!1,enableDiagonally:!0}),this.shapeControl.active(t.$handler,{left:n,top:r,width:0,height:0},{left:n,top:r,right:n,bottom:r}))},n.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler.get(0);t.$handler.addClass(this.cursorStyle);var r,i=this.hammer=new Kr.a.Manager(n);t.$handler;i.add(new Kr.a.Pan({direction:Kr.a.DIRECTION_ALL})),i.on("panstart",(function(i){e.startPoint=Ss(n,i);var o=e.startPoint.x,a=e.startPoint.y;e.start(t,{left:o,top:a}),r=new Ot})),i.on("panmove",(function(t){e.currentPoint={x:e.startPoint.x+t.deltaX,y:e.startPoint.y+t.deltaY},r.push((function(){return e.adjust(e.shapeControl,e.startPoint,e.currentPoint)}))})),i.on("panend",(function(t){if(!e.isStart&&e.shapeControl){var n=S()(t.pointers,1)[0];e.currentPoint={x:e.startPoint.x+t.deltaX,y:e.startPoint.y+t.deltaY},e.isStart=!0,setTimeout((function(){e.isStart=!1}),500),r.push((function(){return e.adjust(e.shapeControl,e.startPoint,e.currentPoint)})),n.ctrlKey||n.metaKey?e.pdfViewer.eventEmitter.emit(Ct.marqueeZoomOut,e.shapeControl.shape.shape,e.pageRender.index):e.pdfViewer.eventEmitter.emit(Ct.marqueeZoomIn,e.shapeControl.shape.shape,e.pageRender.index),e.shapeControl.destroy(),e.shapeControl=null}})),i.on("pancancel",(function(t){r.end(),e.shapeControl.destroy(),e.shapeControl=null}));var o=function(t,r){n.addEventListener(t,r),e.destroyHooks.push((function(){n.removeEventListener(t,r)}))};o("click",(function(n){if(!e.isStart){e.isStart=!0,setTimeout((function(){e.isStart=!1}),500);var r=n.layerX,i=n.layerY;e.start(t,{left:r,top:i}),e.shapeControl.shape.shape.clientX=n.clientX,e.shapeControl.shape.shape.clientY=n.clientY,n.ctrlKey||n.metaKey?e.pdfViewer.eventEmitter.emit(Ct.marqueeZoomOut,e.shapeControl.shape.shape,e.pageRender.index):e.pdfViewer.eventEmitter.emit(Ct.marqueeZoomIn,e.shapeControl.shape.shape,e.pageRender.index),e.shapeControl.destroy(),e.shapeControl=null}})),o("contextmenu",(function(t){t.stopPropagation(),t.preventDefault()}))},n.adjust=function(t,e,n){var r=e.x,i=e.y,o=n.x,a=n.y;if(t){var s,c,u=Math.abs(r-o),d=Math.abs(i-a),l={left:s=Math.min(r,o),top:c=Math.min(i,a),width:u=Math.max(u,1),height:d=Math.max(d,1)},h={left:s,top:c,right:s+u,bottom:c+d};t._applyAnnotBoundary(l),t.shape.boundary=h,t.shape.shape=l,t._updatePreviewer()}},n.docHandler=function(t){document.addEventListener("keydown",this.keydownEventListener=function(e){(e.ctrlKey||e.metaKey)&&t.pagesRender.pageRenders.forEach((function(t){t.$handler.get(0).style.cssText+="cursor: -webkit-zoom-out;cursor: zoom-out"}))},{capture:!0}),document.addEventListener("keyup",this.keyupEventListener=function(e){switch(e.keyCode){case aa.Ctrl:case aa.Meta:t.pagesRender.pageRenders.forEach((function(t){t.$handler.get(0).style.cursor=null}))}},{capture:!0})},n.destroyDocHandler=function(){document.removeEventListener("keydown",this.keydownEventListener,{capture:!0}),document.removeEventListener("keyup",this.keyupEventListener,{capture:!0})},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.pageRender.$handler.off("mousedown"),this.destroyHooks.forEach((function(t){return t()}))},e}(ys),yb=n(368),wb=n.n(yb),bb=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.execute=function(t){var e,n=t.getStore(),r=A()((e={},R()(e,"userSpaceScaleValue",1),R()(e,"realScaleValue",1),R()(e,"userSpaceUnit",Oi),R()(e,"realUnit",Oi),e),n.getCurrentValue("measurementInfo")),i=this.getMeasurementInfo(r),o=i.displayUnit,a={distance:0,deltaX:0,deltaY:0,scale:i.scale,angle:0,displayUnit:o,perimeter:0,area:0,userSpaceUnit:i.userSpaceUnit};n.dispatch("measurementData",a),n.dispatch("measurementInfo",A()({},r))},n.getMeasurementInfo=function(t){var e=t.userSpaceScaleValue,n=t.userSpaceUnit,r=t.realScaleValue,i=t.realUnit;return{userSpaceScale:e,userSpaceUnit:n,scale:"".concat(e," ").concat(n.name," = ").concat(r," ").concat(i.name),displayUnit:i,realScale:r,realUnit:i}},e}(vt.a);function Ab(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ab(Object(n),!0).forEach((function(e){R()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ab(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Eb,xb=function(){},Sb=function(){return-1},Cb="JR",Db="canvas",Ib={annotRenderingMode:{square:Db,highlight:Db,caret:Db,squiggly:Db,underline:Db,strikeout:Db,choiceButton:Db,pushButton:Db,radioButton:Db,textField:Db,comboBox:Db,note:Db,fileAttachment:Db,sound:Db,freetext:Db,redact:Db},highPerformance:!1,enableSignature:!1},Rb={destroyCurrentDoc:!0},Tb=0,_b=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(n.preloadJR,n.preloadSR,n.libPath),i=n.jr,o=n.sr,a=n.i18n,s=n.i18nOptions,c=n.eventEmitter,u=void 0===c?new tc.a:c,d=n.minScale,l=void 0===d?.01:d,h=n.maxScale,f=void 0===h?25:h,p=n.defaultScale,g=void 0===p?"fitWidth":p,v=n.scaleFrequency,m=void 0===v?0:v,y=n.tileSize,w=void 0===y?1200:y,b=n.tileCache,P=void 0===b||b,E=n.getTileSize,x=void 0===E?null:E,S=n.StateHandlers,C=void 0===S?[]:S,D=n.customs,I=void 0===D?{}:D,R=(n.keymap,n.Viewmodes),T=void 0===R?[]:R,k=n.enableJS,M=n.enableSafeMode,O=n.stateHandlerConfig,L=n.watermarkConfig,N=n.actionOptions,V=void 0===N?{}:N,B=n.defaultViewMode,U=void 0===B?"continuous-view-mode":B,j=n.snapshotServer,H=void 0===j?new Gg({uploadSnapshotAPIPath:"snapshot/upload"}):j,W=n.collaboration,$=void 0===W?{enable:!1,annotationFormat:"fdf",communicator:null,handlerClasses:[],continueToConnect:function(t,e){return t<15}}:W,Y=n.highPerformance,q=void 0!==Y&&Y,G=n.annotRenderingMode,K=(n.defaultKeyboardEventBinder,n.defaultAnnotConfig),J=n.enableSignature,X=n.enableShortcutKey,Z=void 0===X||X,Q=n.engineMode,tt=void 0===Q?Cb:Q,et=n.sharedWorker,nt=void 0!==et&&et,rt=n.noJSFrame,it=void 0!==rt&&rt,ot=n.showCommentList,at=void 0!==ot&&ot,st=n.showAnnotTooltip,ct=void 0!==st&&st,ut=n.showFormFieldTooltip,dt=void 0!==ut&&ut,lt=n.viewerUI,ht=n.applicationContext,ft=n.instanceId,pt=void 0===ft?0===Tb?"":"pdf_viewer_"+Tb++:ft;if((e=t.call(this)||this).enableOpenAction=!0,e.ioc=ht||new Zw,e.storage=new nb(pt),e.keyboard=new Mg,e.$constructorOptions=arguments[0],e.tileCache=!1!==P,r)if(sc(r))r=r;else{var vt=ec(),mt=nc(vt);r=mt.join(r).absolute(!1)}else r=nc(ec()).absoluteDir();"/"!==r[r.length-1]&&(r+="/"),e.libPath=r;var yt=10,wt="jr-engine/gsdk";(i=i||{}).licenseKey=i.licenseKey||"",i.licenseSN=i.licenseSN||"",i.l=i.l||"";var bt=i.workerPath||"";bt?sc(bt)||(bt=oc(r,bt)):bt=r;var At=i.enginePath;i.workerPath=bt,i.enginePath=At,i.enginePath=i.enginePath||wt,At?sc(At)||(At=oc(r,At)):At=r+wt,i.enginePath=At;var Pt="../external/brotli",Et=i.fontPath;Et?sc(Et)||(Et=oc(r,Et)):Et=oc(r,Pt),i.brotli=A()({core:!0},i.brotli),i.fontPath=Et,e.snapshotServer=H;var xt=(o=o||{}).workerPath||"";xt=xt?sc(xt)?bt:oc(r,xt):r,o.workerPath=xt;var St=(s=Object(zg.a)({initOption:{ns:"viewer_"}},s)).path;St=St?sc(St)?St:oc(r,St):r+"locales",s.absolutePath=s.absolutePath||St,e.i18n=a||Js(s),eb(e.i18n),tt=tt.toUpperCase(),-1===[Cb,"SR","MIX"].indexOf(tt)&&(tt=Cb);var Dt={},It=!0;"undefined"==typeof WebAssembly||_()(WebAssembly);switch(tt){case"SR":G||(Dt=Ib.annotRenderingMode),"undefined"!==_()(q)&&q,It="undefined"!==_()(J)&&J,document.body.classList.add("fv__viewer-sr__"),e.pdfEngine=e.getWebPDFSR();break;case"MIX":document.body.classList.add("fv__viewer-sr__"),e.pdfEngine=e.getWebPDFSR(),e.mixPdfJREngine=e.getWebPDFJR();break;case Cb:default:e.pdfEngine=e.getWebPDFJR()}e.customs=A()({closeDocBefore:xb,closeDocAfter:xb,getDocPermissions:Sb,beforeRenderPDFDoc:xb,executeNavigationAction:xb},I);var Rt=F()(e);e.actionOptions=A()({remoteGotoActionInit:function(){var t=window.opener;if(t){var e=function(t){if(t.source!==window){var e=t.data,n=e.foxitSdkActionType,r=e.foxitSdkActionUrl,i=e.foxitSdkActionFileName,o=e.top,a=(e.bottom,e.left),s=(e.right,e.pageIndex),c=e.zoomFactor,d=e.zoomMode;"TypeGoToR"===n&&Rt.openPDFByHttpRangeRequest({range:{url:r}},{fileName:i}).then((function(){u.once(Ct.renderPageSuccess,(function(){switch(d){case"ZoomXYZ":var t=c;0===t?Rt.goToPage(s,o,a,0!==o):Rt.zoomTo(t,!1).then((function(){Rt.goToPage(s,o,a,0!==o)}));break;case"ZoomFitHorz":Rt.zoomTo("fitWidth",!1).then((function(){Rt.goToPage(s,o,a,0!==o)}));break;case"ZoomFitPage":Rt.zoomTo("fitHeight",!1).then((function(){Rt.goToPage(s,o,a,0!==o)}))}}))}))}};t.postMessage({isReady:!0},window.location.origin),window.addEventListener("message",e,!1),Rt.addDestroyHook((function(){window.removeEventListener("message",e,!1)}))}}},V),Z?e.keyboard.enable():e.keyboard.disable(),e.keyboardListeners=[];for(var Tt=e.viewModeManager=new lc(F()(e)),_t=0,kt=T.length;_t<kt;_t++)Tt.register(T[_t]);e.defaultAnnotConfig=K||e.getAnnotDefaultProperty.bind(F()(e)),M=void 0===M||M,e.config={sr:o,jr:i,minScale:l,maxScale:f,defaultScale:g,tileSize:w,getTileSize:x,enableJS:k,enableSafeMode:M,defaultViewMode:U,stateHandlerConfig:O,watermarkConfig:L,scaleFrequency:m,highPerformance:!1,annotRenderingMode:A()({highlight:"canvas",choiceButton:"native",pushButton:"native",textField:"native",comboBox:"native",note:"native",fileAttachment:"native",sound:"native",freetext:"native",square:"canvas"},Dt,G),enableSignature:It,sizeCount:yt,enableShortcutKey:Z,engineMode:tt,sharedWorker:nt,noJSFrame:it,printSetting:{quality:100,showHeaderFooter:!0},autoCompleteSetting:{level:"off",rememberNumericalData:!0},showCommentList:at,showAnnotTooltip:ct,showFormFieldTooltip:dt},e.eventEmitter=u,e.store=new ds.a,e.mementoManager=new iv(F()(e));var Ft=e.annotManager=new cf(F()(e));"SR"===tt&&Ft.setViewerAnnotFlag((function(t){var e=t.getType();return-1===["text","caret","freetext","fileattachment","highlight","ink","line","circle","square","polygon","polyline","squiggly","strikeout","underline","widget","redact","stamp"].indexOf(e)?kn.locked|kn.readOnly:0})),e.actionManager=new Rf(F()(e)),e.JSEngine=new xg(F()(e)),e.inkSignManager=new Dg(F()(e)),e.viewerUI=lt||new Ev;var Mt=e.stateHandlerManager=new Sg(F()(e));e.viewerUI.prepare(F()(e)),e.customRenderManager=new Jg(F()(e));var Ot=[ab,cb,ub,lb,hb,pb,gb,vb,mb];C.push.apply(C,Ot);for(var Lt=0,Nt=C.length;Lt<Nt;Lt++)Mt.register(C[Lt]);return e.annotsEventMaps=[],e._annotMouseEventCallback=e._annotMouseEventCallback.bind(F()(e)),e._runtimeColor=["RGB",.55,.55,1],e._runtimeColorOpacity=.5,e._runtimeColorRequired=["RGB",.55,.55,1],e._runtimeColorOpacityRequired=1,e._highlightControls=!0,e._highlightControlsUI=!0,e.lifeCycleManager=new Dv,e.lifeCycleManager.registerLifecycle(new Lv),e.lifeCycleManager.registerLifecycle(new Fv(F()(e))),e.lifeCycleManager.registerLifecycle(new Mv(F()(e))),e.lifeCycleManager.registerResourceGenerator($h.OBJECT_URL,Ov),e.activationManager=new gt,e.collaborationOptions=$,e._collaborationDefer=z(),e.initializers=[new tb,new Bw,new Uw,new jw,new bb],e.initializers.forEach((function(t){t.execute(F()(e))})),e}O()(e,t);var r=e.prototype;return r.resourceGenerator=function(t,e){return this.lifeCycleManager.generator(t,e)},r.getDefaultAnnotConfig=function(){return(this.webPDFJR||this.webPDFSR).getDefaultAnnotConfig()||xb},r.setDefaultAnnotConfig=function(t){(this.webPDFJR||this.webPDFSR).setDefaultAnnotConfig(t)},r._annotMouseEventCallback=function(t){this.annotsEventMaps.map((function(e){e&&e(t)}))},r.startListenAnnotMouseEvent=function(){this.cleanListenAnnotMouseEvent(),document.addEventListener("mouseup",this._annotMouseEventCallback,{capture:!0})},r.stopListenAnnotMouseEvent=function(){this.cleanListenAnnotMouseEvent(),document.removeEventListener("mouseup",this._annotMouseEventCallback,{capture:!0})},r.addListenAnnotMouseEvent=function(t){var e=this;return this.annotsEventMaps.push(t),function(){e.offListenAnnotMouseEvent(t)}},r.offListenAnnotMouseEvent=function(t){for(var e=this.annotsEventMaps,n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}},r.cleanListenAnnotMouseEvent=function(){this.annotsEventMaps=[]},r.changeLanguage=function(t){var e=this;return new Promise((function(n,r){e.i18n.changeLanguage(t,(function(t){if(t)return r(t),void e.eventEmitter.emit("change-language-failed");e.eventEmitter.emit("change-language-success"),n()}))}))},r.getCurrentLanguage=function(){return this.i18n.language?this.i18n.language:this.i18n.options.fallbackLng?this.i18n.options.fallbackLng[0]:navigator.language},r.takeSnapshot=function(t,e,n,r,i){var o=this.getPDFPageRender(t);if(!o)throw new Error("page not found: ".concat(t));return o.getSnapshot(e,n,r,i)},r.uploadImage=function(t){var e=this;return this.snapshotServer.uploadImage(t).then((function(t){return e.snapshotServer.render,e.snapshotServer.render(t),Promise.resolve(t)})).catch((function(t){return console.warn(e.i18n.t("viewer_:error.snapshotServer")),Promise.reject(t)}))},r.copySnapshot=function(t){var e=document.createElement("img");e.src=t;var n=document.createElement("div");if(n.appendChild(e),n.classList.add("fv__ui-canvas-mirror"),document.body.appendChild(n),document.body.createControlRange){var r=document.body.createControlRange();r.addElement(e),r.execCommand("copy"),document.body.removeChild(n)}else{var i=window.getSelection();i.removeAllRanges();var o=document.createRange();o.selectNodeContents(n),i.addRange(o);try{document.execCommand("copy",!1,null)}catch(t){}document.body.removeChild(n)}},r.copyImage=function(t){this.copySnapshot(t)},r.getKeyboardEventBinder=function(t){var e=this.keyboard.getBinder(t);if(!e)throw new Error("event binder not found error: ".concat(t));return e},r.switchKeyboardEventBinder=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.keyboard.activeBinder(t,e)},r.addKeyboardShortcutEventListener=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getDefaultKeyboardEventBinder();return(n=r instanceof qg?r:this.keyboard.getBinder(r))?n.on(t,e):xb},r.addEventListener=function(t,e){var n=this;return this.eventEmitter.on(t,e),function(){n.eventEmitter.off(t,e)}},r.getDefaultKeyboardEventBinder=function(){return this.keyboard.getDefaultKeyboardEventBinder()},r.getWebPDFJR=function(){var t=this;if(this.webPDFJRPromise)return this.webPDFJRPromise;var e=z();return Promise.resolve().then(n.bind(null,462)).then((function(n){var r=new(n.default(Vy))(t.config.jr,t.eventEmitter);t.webPDFJR=r;var i="viewer_:error.initEngine.c2";return r.setDefaultAnnotConfig(t.defaultAnnotConfig),r.init().then((function(t){return t})).then((function(n){var o=n.other,a={"viewer  component":{version:"e0a8111f@release/8_4_0"},"core component":{version:n.version},JR:{version:!0}};if(o){var s=location.href,c=!0;if(o.h){c=!1;for(var u=o.h,d=u.length;d--;){var l=u[d];if(new RegExp(l).test(s)){c=!0;break}}}if(!c)return t.viewerUI.alert(i),void e.reject(new Error("failed to initialize WebPDF JR Engine"));var h=Date.now(),f=o.b;if(f&&!(c=h>f))return t.viewerUI.alert(i),void e.reject(new Error("failed to initialize WebPDF JR Engine"));var p=o.e;if(p&&!(c=h<p))return t.viewerUI.alert(i),void e.reject(new Error("failed to initialize WebPDF JR Engine"));if(!c)return t.viewerUI.alert(i),void e.reject(new Error("failed to initialize WebPDF JR Engine"))}return console.table&&console.table(a),t.eventEmitter.emit(Ct.jrLicenseSuccess),t.getModuleLicenseRight(),e.resolve(r)}),(function(n){t.viewerUI.alert(t.i18n.t("viewer_:error.initEngine.c"+n||!1)),e.reject(n)})),r})),this.webPDFJRPromise=e.promise},r.getWebPDFSR=function(){var t=this;return this.webPDFSRPromise?this.webPDFSRPromise:this.webPDFSRPromise=Promise.resolve().then(n.bind(null,461)).then((function(e){var n=new(e.default(Vy))(t.config.sr,t.eventEmitter);return t.webPDFSR=n,n.setDefaultAnnotConfig(t.defaultAnnotConfig),n.init().then((function(){var e={"viewer  component":{version:"e0a8111f@release/8_4_0"},SR:{version:!0}};console.table&&console.table(e),t.isWebPDFSR=!0,t.scaleFrequency=4,t.config.scaleFrequency=4,t.eventEmitter.emit(Ct.srLicenseSuccess)}),(function(e){alert(t.i18n.t(["viewer_:error.initEngine.c1","viewer_:error.initEngine.c2"][e-1]||"viewer_:error.c-1"))})),n}))},r.initAnnotationIcons=function(t){var e=arguments,n=this;return this.pdfEngine.then((function(e){return e.setIcons(t)})).then((function(r){return!e[1]&&n.eventEmitter.emit(Ct.iconInited,t)}))},r.addAnnotationIcon=function(t){var e=this;if(["url","name","annotType","category","fileType"].forEach((function(e){if(!t[e])throw new Error("Icon property lost: "+e)})),0==["png","bmp","jpg","jpeg","pdf"].filter((function(e){return t.fileType.toLowerCase()==e})).length)throw new Error("The fileType is wrong");return t.fileType=t.fileType.toLowerCase(),this.pdfEngine.then((function(e){return e.addIcon(t)})).then((function(n){return e.eventEmitter.emit(Ct.iconAdded,t)}))},r.removeAnnotationIcon=function(t,e,n){var r=this;return e||(n=null),this.pdfEngine.then((function(r){return r.removeIcon(t,e,n)})).then((function(i){return r.eventEmitter.emit(Ct.iconRemoved,{type:t,category:e,name:n})}))},r.init=function(t){var e=this;this.$ui=B()(t),this.element=this.eUi=this.$ui.get(0);var n,r=this.viewModeManager.get(this.config.defaultViewMode);(this.pdfViewerRender=new Vs(this.$ui,r,this),this.collaborationOptions)&&(this.collaborationOptions.enable?this.initCollaboration():this._collaborationDefer.resolve(null));n="function"!=typeof this.customs.getAnnotPermissions?function(){return Ht.RESOLVED_PROMISE_VOID}:this.customs.getAnnotPermissions,this.annotationAuthorityManager=new Sw(this,n);var i,o=function(){e.annotationAuthorityManager.clear()};this.eventEmitter.on(Ct.openFileSuccess,o),this.addDestroyHook((function(){e.annotationAuthorityManager.destroy(),e.eventEmitter.off(Ct.openFileSuccess,o)}));var a=function(){clearTimeout(i),i=setTimeout((function(){var t=e.getAllActiveElements();if(t.length){var n=e.stateHandlerManager.currentStateHandler.getStateName();if(!(n!==wr&&n!=Vn&&Object.keys(Tr).indexOf(n)<0&&Object.keys(_r).indexOf(n)<0)){var r=!t.find((function(t){var e=t.annot;if(!e)return!1;var n=e.getType();return"highlight"===n||"strikeout"===n||"underline"===n||"squiggly"===n||"caret"===n}));t.forEach((function(t){var e=t.shapeControl;e&&e.moveEnable&&e.moveDisable&&(r?e.moveEnable():e.moveDisable())}))}}}),0)};this.eventEmitter.on(Ct.activeElementChanged,a),this.addDestroyHook((function(){return e.eventEmitter.off(Ct.activeElementChanged,a)}))},r.getCollaboration=function(){return this._collaborationDefer.promise},r.openFileByShareId=function(t){return this.getCollaboration().then((function(e){return e.openFileByShareId(t)}))},r.getAnnotAuthorityManager=function(){return this.annotationAuthorityManager},r.registerCollabDataHandler=function(t,e){if("function"==typeof t){if(!t.prototype.accept||!t.prototype.receive)throw new Error("Illegal collaboration data handler: "+t);this.getCollaboration().then((function(e){e.registerCollabDataHandler(t)}))}throw new Error("Incorrect collaboration data handler!")},r.collaborate=function(t,e){return this.getCollaboration().then((function(n){if(n)return("function"==typeof e?Promise.resolve(e()):Promise.resolve(e)).then((function(e){return n.send({action:t,data:e})}))}))},r.initCollaboration=function(){var t=new aw(this,this.collaborationOptions);t.registerBuiltInHandler(dw),t.registerBuiltInHandler(cw),t.registerBuiltInHandler(uw),t.registerBuiltInHandler(Cw),t.registerBuiltInHandler(ww),t.registerBuiltInHandler(bw),t.registerBuiltInHandler(Aw),t.registerBuiltInHandler(Dw),t.registerBuiltInHandler(Pw),t.registerBuiltInHandler(Iw),t.registerBuiltInHandler(yw),t.registerBuiltInHandler(gw),t.registerBuiltInHandler(vw),t.registerBuiltInHandler(mw),t.registerBuiltInHandler(ob),this.addDestroyHook((function(){t.destroy()})),t.prepare(),this._collaborationDefer.resolve(t)},r.redraw=function(t){var e=this;if(!this.pdfViewerRender||!this.pdfViewerRender.pdfDocRender)return Promise.resolve(!1);try{var n=this.pdfViewerRender.pdfDocRender.pagesRender;if(!n)return Promise.resolve(!1);var r=[];return t&&n.setRenderFlags(7),n.pageRenders&&n.pageRenders.forEach((function(t){t.page&&r.push(t.renderLayout())})),Promise.all(r).then((function(t){return n.renderVisiblePages()})).finally((function(){e.eventEmitter.emit(Ct.fitWidthResizeViewport)}))}catch(t){return Promise.reject(t)}},r.redrawContent=function(){if(!this.pdfViewerRender||!this.pdfViewerRender.pdfDocRender)return Promise.resolve(!1);try{var t=this.pdfViewerRender.pdfDocRender.pagesRender;return t.setRenderFlags(2),t.renderVisiblePages()}catch(t){return Promise.reject(t)}},r.rotateTo=function(t){return X(Q(t),"Incorrect rotation degree: ".concat(t,", It should be 0, 90, 180 or 270")),this.pdfViewerRender.rotateTo(t)},r.getRotation=function(){return this.pdfViewerRender.getRotation()},r.getScrollWrap=function(){return this.pdfViewerRender.scrollWrap},r.openPDFByFile=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pdfEngine;n.isOpenNewFileAfterClose&&this.currentPDFDoc&&this.currentPDFDoc.otherOptions&&(this.currentPDFDoc.otherOptions.isOpenNewFileAfterClose=!0);var i=Pb(Pb({},Rb),n);return this.openFileOptions=i,t.name&&!i.fileName&&(i.fileName=t.name),void 0===i.isRenderOnDocLoaded&&(i.isRenderOnDocLoaded=!0),"function"!=typeof i.beforeRenderPDFDoc&&(i.beforeRenderPDFDoc=this.customs.beforeRenderPDFDoc),this.close().then((function(){var n,o=e.resourceGenerator(Wh.PDF_DOCUMENT_CLOSING,$h.OBJECT_URL).expose().URL;return e.eventEmitter.emit(Ct.beforeOpenFile,o.createObjectURL(new Blob([t],{type:"application/pdf"}))),n=r?Promise.resolve(r):e.getWebPDFJR(),i.isRenderOnDocLoaded&&e.pdfViewerRender.rendering(),n}),(function(t){return Ea.a.getLogger("PDFViewer").warn("An error occurred while opening a pdf file: ",t),Promise.reject({error:-3})})).then((function(n){return e.eventEmitter.emit(Ct.beforeLoadPDFDoc,"memory",t,i,r),n.getPDFDocByFile(t,i)})).then((function(n){return e._reopenPDFDoc(n,i,{type:zy.FROM_FILE,fileName:i.fileName,file:t,options:i})}),(function(t){return e.eventEmitter.emit(Ct.openFileFailed,t),Promise.reject(t)})).finally((function(){i.isRenderOnDocLoaded&&e.pdfViewerRender.rendered()}))},r.openPDFByHttpRangeRequest=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fileName:""},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pdfEngine,i=Pb(Pb({},Rb),n);this.openFileOptions=i;var o=t.range.url;if(!i.fileName&&o.endsWith(".pdf")){var a=o.lastIndexOf("/"),s=o.substring(a+1);s=decodeURIComponent(s),i.fileName=s}if(void 0===i.isRenderOnDocLoaded&&(i.isRenderOnDocLoaded=!0),"function"!=typeof i.beforeRenderPDFDoc&&(i.beforeRenderPDFDoc=this.customs.beforeRenderPDFDoc),!sc(o)){var c=ec();t.range.url=nc(c).join(o).absolute()}return this.close().then((function(){var t;return e.eventEmitter.emit(Ct.beforeOpenFile,o),t=r?Promise.resolve(r):e.getWebPDFJR(),i.isRenderOnDocLoaded&&e.pdfViewerRender.rendering(),t}),(function(t){throw t})).then((function(n){return e.eventEmitter.emit(Ct.beforeLoadPDFDoc,"http",t,i,r),n.getPDFDocByHttpRangeRequest(t,i)})).then((function(n){return e._reopenPDFDoc(n,i,{type:zy.FROM_URL,range:t.range,size:t.size,options:i})}),(function(t){throw e.eventEmitter.emit(Ct.openFileFailed,t),t})).finally((function(){i.isRenderOnDocLoaded&&e.pdfViewerRender&&e.pdfViewerRender.rendered()}))},r.getPDFDocByFileNoOpen=function(){var t=D()(N.a.mark((function t(e){var n,r,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){var t=D()(N.a.mark((function t(e){var n,r,i=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2&&void 0!==i[2]?i[2]:{},t.prev=2,t.next=5,e.parse(Pb(Pb({},r),{},{password:n}));case 5:return t.abrupt("return",e);case 8:return t.prev=8,t.t0=t.catch(2),t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),t.next=3,this.getWebPDFJR();case 3:return r=t.sent,t.next=6,r.getPDFDocByFile(e);case 6:return i=t.sent,t.next=9,n(i);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.openPDFById=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fileName:""};return void 0===n.isRenderOnDocLoaded&&(n.isRenderOnDocLoaded=!0),this.close().then((function(){var t;return e.eventEmitter.emit(Ct.beforeOpenFile),t=e.getWebPDFSR(),n.isRenderOnDocLoaded&&e.pdfViewerRender.rendering(),t}),(function(t){throw t})).then((function(t){return Promise.all([t,kb(n)])})).then((function(r){var i=S()(r,2),o=i[0],a=i[1];return n.idJWT=a||n.jwt,e.eventEmitter.emit(Ct.beforeLoadPDFDoc,"id",t,n),o.getPDFDocById(t,n)})).then((function(t){return e._reopenPDFDoc(t,n)}),(function(t){return e.eventEmitter.emit(Ct.openFileFailed,t),Promise.reject(t)})).finally((function(){n.isRenderOnDocLoaded&&e.pdfViewerRender.rendered()}))},r.openPDFByExistsDocId=function(){var t=D()(N.a.mark((function t(e){var n,r,i,o,a,s,c=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{fileName:""},t.next=3,this.getWebPDFJR();case 3:return r=t.sent,t.next=6,r.getPDFDocById(e);case 6:return i=t.sent,t.next=9,i.getDocBuffer(this);case 9:return o=t.sent,a=new Blob(o),s=new File([a],"".concat(n.fileName),{type:"application/pdf"}),t.abrupt("return",this.openPDFByFile(s,n));case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createNewDoc=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"untitled.pdf",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{height:842,width:595},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isRenderOnDocLoaded:!0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.pdfEngine;return void 0===i.isRenderOnDocLoaded&&(i.isRenderOnDocLoaded=!0),this.close().then((function(){return o?Promise.resolve(o):t.getWebPDFJR()}),(function(t){return t||(t=new Error("An unknown error occurred while closing the current opening document!")),t.error=-3,Promise.reject(t)})).then((function(t){return t.createNewDoc(e,n,r)})).then((function(n){i.password=Ht.EMPTY_STR,i.fileName=e;var r=[];return n.getStream((function(t){r.push(t)})).then((function(){return t.reopenPDFDoc(n,i,{type:zy.FROM_FILE,options:i,file:new Blob(r,{type:"application/pdf"})})}))}))},r.loadPDFDocByFile=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getPDFDocParserService().loadPDFDocByFile(t,e)},r.loadPDFDocByHttpRangeRequest=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getPDFDocParserService().loadPDFDocByHttpRangeRequest(t,e)},r.createNewPortfolioDoc=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Portfolio.pdf";return this.close().then((function(){return n.pdfEngine?Promise.resolve(n.pdfEngine):n.getWebPDFJR()}),(function(t){return t||(t=new Error("An unknown error occurred while closing the current opening document!")),t.error=-3,Promise.reject(t)})).then((function(n){return n.createNewPortfolioDoc(t,e,r)})).then((function(t){var e={isRenderOnDocLoaded:!0,password:"",fileName:r},i=[];return t.getStream((function(t){i.push(t)})).then((function(){return n.reopenPDFDoc(t,e,{type:zy.FROM_FILE,options:e,file:new Blob(i,{type:"application/pdf"})})}))}))},r.convertImageToPDFDoc=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"untitled.pdf",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=(arguments.length>5&&void 0!==arguments[5]||this.pdfEngine,[]),a=null,s=t instanceof ArrayBuffer,c=null;return new Promise((function(n,r){var i=new Image;if(i.onload=function(){var t=Object(K.getDPI)(),e=i.width/t.x*72,r=i.height/t.y*72;n(o=[e,r])},i.onerror=function(){r(new Error("The input file could not be loaded as an supported image."))},s){var a=new Blob([t]);i.src=c=URL.createObjectURL(a)}else i.src=t?c=URL.createObjectURL(t):e})).then((function(t){return n.createNewDoc(r,i,{height:t[1],width:t[0]},{isRenderOnDocLoaded:!1},n.pdfEngine)})).then((function(t){return(a=t).getPageByIndex(0)})).then((function(n){var r=s?Promise.resolve(t):Xs(t?c:e);return Promise.all([Promise.resolve(n),r])})).then((function(t){var e=S()(t,2),n=e[0],r=e[1];c&&URL.revokeObjectURL(c);var i={left:0,top:o[1],right:o[0],bottom:0};return n.addImage(r,i)})).then((function(t){if(t)return a;throw new Error("faied to insert image")})).catch((function(t){return n.eventEmitter.emit(Ct.openFileFailed,null),t&&console.error(t),Promise.reject(t)}))},r.getPDFDocFromImageFile=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"untitled.pdf",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=[],a=null,s=t instanceof ArrayBuffer,c=null;return new Promise((function(n,r){var i=new Image;if(i.onload=function(){var t=Object(K.getDPI)(),e=i.width/t.x*72,r=i.height/t.y*72;n(o=[e,r])},i.onerror=function(){r(new Error("The input file could not be loaded as an supported image."))},s){var a=new Blob([t]);i.src=c=URL.createObjectURL(a)}else i.src=t?c=URL.createObjectURL(t):e})).then((function(t){return n.pdfEngine.then((function(e){return e.createNewDoc(r,i,{height:t[1],width:t[0]})}))})).then((function(t){return(a=t).getPageByIndex(0)})).then((function(n){var r=s?Promise.resolve(t):Xs(t?c:e);return Promise.all([Promise.resolve(n),r])})).then((function(t){var e=S()(t,2),n=e[0],r=e[1];c&&URL.revokeObjectURL(c);var i={left:0,top:o[1],right:o[0],bottom:0};return n.addImage(r,i)})).then((function(t){if(t)return a;throw new Error("faied to insert image")})).catch((function(t){return t&&console.error(t),Promise.reject(t)}))},r.renderDoc=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.defaultScale;if(this.pdfViewerRender.pdfDocRender){var r=this.pdfViewerRender.pdfDocRender.pagesRender;if(t==this.currentPDFDoc&&r&&r.isPageDOMsLoaded)return Promise.resolve(!0)}return this.pdfViewerRender.rendering(),this.pdfViewerRender.renderDoc(t,n).then((function(){var n=[];return t.getStream((function(t){n.push(t)})).then((function(){var r=n.sort((function(t,e){return t.offset>e.offset?0:-1})).map((function(t){return t.arrayBuffer}));return e.eventEmitter.emit(Ct.openFileSuccess,t,{type:zy.FROM_FILE,options:{fileName:t.info.fileName},file:new Blob(r,{type:"application/pdf"})}),e.eventEmitter.emit(Ct.renderFileSuccess,t),!0}))}),(function(n){return e.eventEmitter.emit(Ct.renderFileFailed,t),n||(n=new Error("An unknown error occurred while closing the current opening document!")),n.error=-3,Promise.reject(n)})).finally((function(){e.pdfViewerRender.rendered()}))},r.reopenPDFDoc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=A()({},e),r=arguments[2];return this.eventEmitter.emit(Ct.beforeOpenFile),void 0===n.isRenderOnDocLoaded&&(n.isRenderOnDocLoaded=!0),this._reopenPDFDoc(t,n,r)},r._reopenPDFDoc=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.startListenAnnotMouseEvent();var i=!1,o=!1,a=!1!==n.isRenderOnDocLoaded,s=n.beforeRenderPDFDoc;if("function"!=typeof s){var c=this.customs.beforeRenderPDFDoc;s="function"!=typeof c?xb:c}return s!==xb&&(a=!0),Promise.resolve(kb(n)).then((function(e){return n.idJWT=e||n.jwt,t.parse(n)})).then((function(t){var n=t.getPageCount();if((n<2||n>=500)&&e.viewModeManager.get(Va.getName()))e.viewModeManager.switchTo(Va.getName());else{var c=e.viewModeManager.get(e.config.defaultViewMode);e.viewModeManager.switchTo(c.getName())}e.currentPDFDoc=t,i=!0;var u=[t];if(a){e.eventEmitter.once(Ct.renderPageSuccess,(function(){o=!0}));var d=Promise.resolve(s.call(e,t)).then((function(){var n=e.pdfViewerRender.renderDoc(t);return e.eventEmitter.emit(Ct.openFileSuccess,t,r),n}));u.push(d)}return Promise.all(u)}),(function(n){e.currentPDFDoc=null;var r={error:n&&n.code,pdfDoc:t,encryptDict:n&&n.encryptDict};return e.eventEmitter.emit(Ct.openFileFailed,r),Promise.reject(r)})).then((function(t){var r,i=S()(t,1)[0];return e.mixPdfJREngine?e.mixPdfJREngine.then((function(t){return r=t,i.resetEngineInstance(t)})).then((function(t){return e.pdfEngine=r,delete e.mixPdfJREngine,e.eventEmitter.emit(Ct.toggleEngineSr2JrSuccess,t),a&&e.eventEmitter.emit(Ct.renderFileSuccess,t),t}),(function(t){return r&&(e.pdfEngine=r),n.isRenderOnDocLoaded&&e.eventEmitter.emit(Ct.renderFileSuccess,t),t})):(a&&e.eventEmitter.emit(Ct.renderFileSuccess,i),i)}),(function(n){if(i&&o)return e.eventEmitter.emit(Ct.renderFileSuccess,t),t;a&&e.eventEmitter.emit(Ct.renderFileFailed,t);var r={error:-1,pdfDoc:t};try{var s,c;"number"===_()(n)?s=n:"number"===_()(n.error)?(s=n.error,c=n.encryptDict):s=n,r={error:s,pdfDoc:t,encryptDict:c}}catch(t){}return Promise.reject(r)}))},r.close=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.customs.closeDocBefore,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.customs.closeDocAfter;return this.stopListenAnnotMouseEvent(),this.currentPDFDoc?Promise.resolve(e()).then((function(e){if(!1===e)return Promise.reject("Document cannot be closed because it was rejected by the before callback");t.stopFormDesginerAssist(),t.activeElement(),t.eventEmitter.emit(Ct.willCloseDocument,t.currentPDFDoc),t.currentPDFDoc=null;var n,r=t.pdfViewerRender.closeOldDocRender(t.openFileOptions);try{n=t.pdfViewerRender.pdfDocRender}catch(t){}return n?(n.hidden(),r.then((function(e){return t.pdfViewerRender.closeOldDocRender(t.openFileOptions)}))):r})).then((function(t){if(!1!==t)return n()})):Promise.resolve()},r.destroy=function(){var e=this;return this.close().then((function(){t.prototype.destroy.call(e),e.initializers&&e.initializers.forEach((function(t){return t.destroy()})),e.keyboard.destroy(),e.JSEngine.destroy(),e.stopListenAnnotMouseEvent(),e.viewerUI.destroy(),e.viewerUI=null,e.pdfViewerRender.destroy(),e.pdfViewerRender=null,e.pdfEngine&&e.pdfEngine.then((function(t){t&&t.api.workerPromise.worker.terminate()})),e.store.destroy(),e.eventEmitter.removeAllListeners()}))},r.zoomTo=function(t,e){try{return this.activeElement(),this.pdfViewerRender.zoomTo(t,e)}catch(t){return Promise.reject(t)}},r.zoom=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.25;try{return this.pdfViewerRender.getScaleRatio().then((function(n){var r=t.config.minScale,i=t.config.maxScale;n===r&&Math.floor(r/e)!==r/e&&(n=Math.floor(n/e)*e);var o=Math.max(r,Math.min(i,n+e));return o=r+Math.round((o-r)/e)*e,o=Math.max(r,Math.min(i,o)),t.zoomTo(o)}))}catch(t){return Promise.reject(t)}},r.goToPage=function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!this.pdfViewerRender)return Promise.reject("PDFViewer has not been initialized completely!");var o=this.getPDFPageRender(t);return o?i&&"number"!=typeof e?o.getPDFPage().then((function(o){return e=o.getHeight(),r.pdfViewerRender.goToPage(t,e,n,i)})):this.pdfViewerRender.goToPage(t,e,n,i):Promise.reject('The page with index "'.concat(t,'" does not exists or the document has not been opened!'))},r.setLayerNodeVisible=function(t,e){return this.pdfViewerRender&&this.pdfViewerRender.setLayerNodeVisible(t,e)},r.setEnableJS=function(t){this.JSEngine.setEnableJS(t,this.currentPDFDoc),this.eventEmitter.emit(Ct.changeEnableJS,t)},r.getEnableJS=function(){return this.JSEngine.getEnableJS()},r.setEnableOpenAction=function(t){return this.enableOpenAction=t},r.setSafeReadingMode=function(t){this.config.enableSafeMode=t},r.getSafeReadingMode=function(){return this.config.enableSafeMode},r.getSmartScale=function(t){var e=this.config,n=e.scaleFrequency;return 0===n?t*=K.dpr:t=Math.ceil(t*K.dpr*n)/n,Math.min(Math.max(t,e.minScale),e.maxScale)},r.controlStateSwitch=function(t){this.pdfViewerRender&&this.pdfViewerRender.controlStateSwitch(t)},r.getStateHandlerManager=function(){return this.stateHandlerManager},r.getInkSignManager=function(){return this.inkSignManager},r.getViewModeManager=function(){return this.viewModeManager},r.getMementoManager=function(){return this.mementoManager},r.getEventEmitter=function(){return this.eventEmitter},r.getCurrentPDFDoc=function(){return this.currentPDFDoc},r.getPDFViewerRender=function(){try{return this.pdfViewerRender}catch(t){return null}},r.getDeviceCurrentPosition=function(){var t=this.getPDFDocRender(),e=this.getPDFViewerRender(),n=e.getViewMode(),r=t.getViewMode(),i=t.viewerRender.scrollWrap,o=i.getScrollTop(),a=i.getScrollLeft(),s=r.getCurrentPageIndex();if("single-page-view-mode"===n.getName()){var c=e.$ui.parent()[0].getBoundingClientRect(),u=t.getPDFPageRender(s).$ui.get(0).getBoundingClientRect();return{pageIndex:s,left:c.left-u.left,top:c.top-u.top}}for(var d=t.$container.find(".fv__pdf-view-mode-item"),l=0,h=0,f=0;f<d.length;f++){var p=d[f],g=B()(p).find(".fv__pdf-page-layout"),v=g.width(),m=g.height(),y=p.offsetTop,w=y+m,b=p.offsetLeft;if(w>o&&b+v>a){h=o-y,l=a-b;break}}return{pageIndex:s,left:l,top:h}},r.getPDFDocRender=function(){try{return this.pdfViewerRender.pdfDocRender||null}catch(t){return null}},r.getPDFPageRender=function(t){try{return this.pdfViewerRender.pdfDocRender.getPDFPageRender(t)||null}catch(t){return null}},r.getAnnotRender=function(t,e){try{return this.getPDFPageRender(t).getAnnotRender(e)||null}catch(t){return null}},r.getPDFPageRenderAsync=function(t){try{return this.pdfViewerRender.pdfDocRender.getPDFPageRender(t)}catch(t){return null}},r.getAnnotRenderAsync=function(t,e){try{return this.getPDFPageRenderAsync(t).getAnnotRender(e)}catch(t){return null}},r.killFocus=function(){return Promise.resolve(this.activeElement()||!0)},r.isMultiSelectActive=function(){var t=this.stateHandlerManager.currentStateHandler.getStateName();return(Vt.isMac?$t.isWinDown:$t.isCtrlDown)&&(t===Vn||t===wr||Object.keys(Tr).indexOf(t)>=0||Object.keys(_r).indexOf(t)>=0)||$t.isShiftDown&&(t===Vn||t===wr)},r.bindMultiSelectActiveEvents=function(t){var e=this,n=function(t){if(t&&!t.multiSelectEventBindInitialized&&(t.multiSelectEventBindInitialized=!0,t.shapeControl)){var n=t.shapeControl,r=n.onPrestart,i=n.onAfterEnd;n.onPrestart=function(t,i,o){e.activationManager.getAllCurrentActivatables().forEach((function(t){t.shapeControl&&n.companion(t.shapeControl)})),r&&r(t,i,o)},n.onAfterEnd=function(t){n.clearCompanions(),i&&i(t)}}};t instanceof pt?t.getAllActivations().forEach((function(t){return n(t)})):n(t)},r.activePageElementByRect=function(t,e){var n=this;t.right<=t.left||t.top<=t.bottom||!e||e.getAnnots().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var r=new pt,i=[],o=[],a={},s=[];e.forEach((function(t){if(t.isGrouped&&t.isGrouped()){var e=t.getGroupHeader(),n=e.id;return a[n]||s.push(e),void(a[n]=e)}"popup"==t.getType()||"watermark"==t.getType()||"R"==t.info.RT&&t.info.IRT||s.push(t)})),s.reverse().forEach((function(e){if(!i.find((function(t){return t===e}))){var a=e.info.rect,s=a.left,c=a.right,u=a.top,d=a.bottom;if(s>=t.left&&s<=t.right&&u>=t.bottom&&u<=t.top||s>=t.left&&s<=t.right&&d>=t.bottom&&d<=t.top||c>=t.left&&c<=t.right&&u>=t.bottom&&u<=t.top||c>=t.left&&c<=t.right&&d>=t.bottom&&d<=t.top)if(e.isGrouped&&e.isGrouped()){var l=e.getGroupElements()||[];if(l.length){var h=new pt;l.forEach((function(t){var e=n.getAnnotRender(t.getPDFPage().getIndex(),t.getId()).component;e&&h.add(e)})),r.add(h),i=[].concat(E()(i),E()(l))}}else if("widget"===e.getType())o.push(e);else{var f=n.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;f&&r.add(f)}}})),o.length?n.eventEmitter.emit("active-widgets-for-multi-select",{widgets:o,activationGroup:r}):(n.bindMultiSelectActiveEvents(r),n.activationManager.active(r),n.getPDFDocRender().setCurrentAnnotHandler(),n.eventEmitter.emit(Ct.activeElementChanged))}}))},r.activateElement=function(t){return this.activeElement(t)},r.activeElement=function(t){if(!t){if(!this.activationManager.hasActivations())return;return this.activationManager.unActiveCurrent(),void this.eventEmitter.emit(Ct.activeElementChanged)}if(this.bindMultiSelectActiveEvents(t),this.isMultiSelectActive()){var e,n=this.activationManager.getCurrentActivatable();if(n){var r=(n.activations||[])[0];r&&r.annot&&r.annot.page.getIndex()!==(t instanceof pt?t.getAllActivations()[0]:t).annot.page.getIndex()&&this.activationManager.unActiveCurrent(),this.bindMultiSelectActiveEvents(n),n.add(t),e=n}else{var i=new pt;i.add(t),e=i}if($t.isShiftDown){var o=e.getAllActivations(),a=Number.MAX_VALUE,s=-Number.MAX_VALUE,c=-Number.MAX_VALUE,u=Number.MAX_VALUE;o.forEach((function(t){var e=t.annot.info.rect,n=e.left,r=e.right,i=e.top,o=e.bottom;a=Math.min(a,n),s=Math.max(s,r),c=Math.max(c,i),u=Math.min(u,o)}));var d={left:a,right:s,top:c,bottom:u};if(this.multiSelectActiveShiftHandlerFlag==="".concat(JSON.stringify(d),"_").concat(o.length))return;this.multiSelectActiveShiftHandlerFlag="".concat(JSON.stringify(d),"_").concat(o.length);var l=t instanceof pt?t.getAllActivations()[0]:t;this.activePageElementByRect(d,l.annot.page)}else this.activationManager.active(e),this.getPDFDocRender().setCurrentAnnotHandler(),this.eventEmitter.emit(Ct.activeElementChanged)}else{var h;if(t instanceof pt)h=t;else{var f=new pt;f.add(t),h=f}this.activationManager.active(h),this.getPDFDocRender().setCurrentAnnotHandler(),this.eventEmitter.emit(Ct.activeElementChanged)}},r.clearMultiSelectActiveFlag=function(){this.multiSelectActiveShiftHandlerFlag=""},r.deactivateElement=function(t){return this.unActiveElement(t)},r.unActiveElement=function(t){if(t&&t.annot&&t.annot.isGrouped&&t.annot.isGrouped()){var e=this.activationManager.getCurrentActivatable();if(!(e&&e instanceof pt))return;for(var n=e.activations||[],r=n.length;r--;){var i=n[r];if(i instanceof pt&&i.contains(t)||i===t){this.activationManager.unActive(n[r]);break}}}else this.activationManager.unActive(t);this.eventEmitter.emit(Ct.activeElementChanged)},r.getCurrentActivatable=function(){var t=this.activationManager.getCurrentActivatable();if(!t||t.isActive)return t},r.getAllActivatedElements=function(){return this.getAllActiveElements()},r.getAllActiveElements=function(){return this.activationManager.getAllCurrentActivatables()},r.getAnnotManager=function(){return this.annotManager},r.registerMatchRule=function(t){this.annotManager.registerMatchRule(t)},r.setUserConfig=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pdfEngine;return(e?Promise.resolve(e):this.getWebPDFJR()).then((function(e){return e.setUserConfig(t)}))},r.setUserName=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pdfEngine;return(e?Promise.resolve(e):this.getWebPDFJR()).then((function(e){return e.setUserName(t)}))},r.getUserName=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pdfEngine;return(t?Promise.resolve(t):this.getWebPDFJR()).then((function(t){return t.getUserName()}))},r.setFormatOfDynamicStamp=function(t,e){return this.getWebPDFJR().then((function(n){return n.setDynamicInfoFormula(t,e)}))},r.printByProgress=function(t,e,n,r,i,o,a,s,c,u){var d,l,h,f=this,p=this;return c||(l=this.pdfViewerRender.pdfDocRender,h=l.getFormRender(),d=h.getFormatedData("display")),(e.AdditionalActions?Promise.resolve():e.loadAdditionalActions()).then((function(t){return c?Promise.resolve():(l.performAction(5),f.eventEmitter.emit(Ct.documentWillPrint),e.PDFForm.addTask())})).then((function(t){return c?Promise.resolve():e.getPDFForm().setFieldsValue(d,!0)})).then((function(){return r({state:"start",total:t.length}),t.reduce((function(e,n){var o=n;return("object"===_()(n)&&void 0!==n.rect||"object"===_()(n))&&(o=n.pageIndex),e.then((function(t){return Promise.all([g(n),t])})).then((function(e){var n=S()(e,2),a=n[0],s=n[1];return r({state:"progress",pageIndex:o,total:t.length,imageURI:a}),a?Promise.all([s,a,i.appendImage(o,a)]):Promise.resolve([s])})).then((function(t){var e=S()(t,2),n=e[0],r=e[1];return r&&n.push({pageIndex:o,imageURI:r}),n}))}),Promise.resolve([]))})).then((function(t){if(c)return Promise.resolve(t);if(h){var n=h.getFormatedData("value");return e.getPDFForm().setFieldsValue(n,!1).then((function(e){return t}))}return t})).then((function(e){var n=e.reduce((function(t,e){var n=e.pageIndex,r=e.imageURI;return t[n]=r,t}),{});if(r({state:"end",total:t.length,result:n}),c){var o=i.getImageCache();s.push.apply(s,E()(o)),i.clearImageCache()}else i.print(!u),l.performAction(6);return f.eventEmitter.emit(Ct.documentDidPrint),n}));function g(t){var r=void 0!==t.pageIndex?t.pageIndex:t;return e.getPageByIndex(r).then((function(e){if(!e.isVirtual()){var i=0,s=0,c=0,u=0,d=0;if(void 0!==t.pageIndex){var l=p.getPDFPageRender(r),h=t.rect,f=e.reverseDeviceRect({top:h.y,bottom:h.y+h.height,left:h.x,right:h.x+h.width},l.getScale(),l.getRotation());i=(f=e.getDeviceRect(f)).left,s=f.top,c=(f.right-f.left)*(3/4),u=(f.bottom-f.top)*(3/4)}else if("number"==typeof t)if((c=e.getWidth())>(u=e.getHeight())){d=90;var g=c;c=u,u=g}else d=0;var v=4*o/300;return e.getPageBitmap(v,d,{x:i*(o/100),y:s*(o/100),width:c*v,height:u*v},a,"print").then((function(t){var r=t.buffer,i=t.width,o=t.height,a=t.image;if(a)return n.createObjectURL(a);var s=document.createElement("canvas"),c=e.getWidth()*v,u=o*e.getWidth()*v/i;s.width=c,s.height=u;var d=s.getContext("2d"),l=d.createImageData(i,o);l.data.set(new(Uint8ClampedArray||Uint8Array)(r)),d.putImageData(l,0,0),d.drawImage(d.canvas,0,0,i,o,0,0,c,u);var h=z();try{s.toBlob((function(t){h.resolve(n.createObjectURL(t))}),"image/png")}catch(t){h.reject(t)}return h.promise}))}}))}},r.print=function(){var t=D()(N.a.mark((function t(e){var n,r,i,o,a,s,c,u,d,l,h,f,p,g,v,m,y,w,b,A,P,E,x,S,C,D,I,R,T,_=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.isPortfolio,r=e.rangeType,i=e.pages,o=void 0===i?[]:i,a=e.printType,s=void 0===a?["page"]:a,c=e.progress,u=void 0===c?this.printProgress:c,d=e.printer,l=e.showHeaderFooter,h=void 0===l?this.getPrintSetting("showHeaderFooter"):l,f=e.quality,p=void 0===f?this.getPrintSetting("quality")||100:f,g=_.length>1&&void 0!==_[1]?_[1]:xb,(v=this.currentPDFDoc).checkPermission(Tn.print||Tn.printHigh)){t.next=5;break}throw new Error("Permission denied!");case 5:if(void 0!==u&&!0!==u||(u=this.printProgress=this.printProgress||new jy),m=this.resourceGenerator(Wh.PDF_DOCUMENT_CLOSING,$h.OBJECT_URL),y=m.expose(),w=y.URL,b=g,A=0,g=function(t){if(u)switch(t.state){case"start":u.show(),u.updateProgress(0,t.total);break;case"progress":u.updateProgress(A++,t.total);break;case"end":u.updateProgress(A++,t.total),A=0,setTimeout((function(){u.close()}),0)}b(t)},d||(d=this.printer||(this.printer=new $y)),!(P=this.currentPDFDoc.pdfPortfolio&&n?this.currentPDFDoc.pdfPortfolio.root.nodeHandle:"")||!n){t.next=41;break}if("allPDF"!=r){t.next=20;break}return t.next=17,this.currentPDFDoc.pdfPortfolio.getFolioNodePDFDoc();case 17:E=t.sent,t.next=25;break;case 20:if("selectedPDF"!=r){t.next=25;break}return t.next=23,this.currentPDFDoc.pdfPortfolio.getActivedPDFFileByPortFolioNode();case 23:x=t.sent,E=x;case 25:C=[],t.t0=N.a.keys(E);case 27:if((t.t1=t.t0()).done){t.next=39;break}return D=t.t1.value,t.next=31,E[D].parse();case 31:for(S=E[D].getPageCount(),I=[],R=0;R<S;R++)I.push(R);return T=E[D],t.next=37,this.printByProgress(I,T,w,g,d,p,s,C,P,h);case 37:t.next=27;break;case 39:return d.print(!h,C),t.abrupt("return");case 41:return t.next=43,this.printByProgress(o,v,w,g,d,p,s,[],P,h);case 43:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.printCurrentView=function(){var t=this.getPDFDocRender().getBoundingClientRects();if(!(t.length>1)){var e=t.map((function(t){return{rect:{x:t.x,y:t.y,width:t.width,height:t.height},pageIndex:t.index}}));this.print({pages:e,printType:["page","annot"]})}},r.printEx=function(t){var e=this,n=t.type,r=t.pageRange,i=t.progress,o=void 0===i?this.printProgress:i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xb,s=this.currentPDFDoc;if(!s.checkPermission(Tn.print||Tn.printHigh))throw new Error("Permission denied!");void 0!==o&&!0!==o||(o=this.printProgress=this.printProgress||new jy);var c=a;a=function(t){if(o)switch(t.state){case"start":o.show(),o.updateProgress(0,100);break;case"progress":o.updateProgress(t.progress,100);break;case"end":o.updateProgress(t.progress,100),setTimeout((function(){o.close()}),0)}c(t)};var u=s.getPageCount();function d(t,e){var n=[],r=t,i=new RegExp(/[^\d\-,]/);if(i.test(r))t=r.slice(0,r.length-1);else{if(!(i=new RegExp(/[^\d]/)).test(r.substr(0,1))){for(var o=r.split(","),a=0;a<o.length;a++){var s=o[a];if(s.indexOf("-")>-1){var c=s.split("-"),u=S()(c,3),d=u[0],l=u[1];if(u[2]||""===l)return;var h=Math.min(+d,+l),f=Math.max(+d,+l);if(h<1)return;if(f>e)return f+="",void(t=r.slice(0,r.length-f.length)+e);n.push([h-1,f-1])}else{if(s<1)return;if(s>e)return void(t=r.slice(0,r.length-s.length)+e);n.push([s-1,s-1])}}return n}t=r.slice(0,r.length-1)}}var l=this.viewerUI;function h(t,e){var n=d(t,e)||[];if(!(n.length<1)){var r,i=[];return n.sort((function(t,e){return t[0]-e[0]})).forEach((function(t){if(i.length<1)return i.push(t),void(r=t);var e=t[0],n=t[1],o=r[1];e>=o?e>o+1?(i.push(t),r=t):r[1]=n:n>o&&(r[1]=n)})),i}l.alert({message:"dialog.error.validateRange",level:"warning"})}var f=h(r,u),p={type:n,range:f,reverse:!1,bleed:!1,useWorkFlow:!0},g=function(t){a(t.msg)};return s.api.registerWorkflow("printEx",g),this.eventEmitter.emit(Ct.documentWillPrint),s.extractPrintPages(p).then((function(t){if(t){var n={printable:t=window.btoa(t),type:"pdf",base64:!0};wb()(n)}e.eventEmitter.emit(Ct.documentDidPrint),s.api.unregisterWorkflow("printEx",g)}))},r.printPDFDocumentEx=function(t){var e=t.startIndex,n=void 0===e?0:e,r=t.endIndex,i=void 0===r?this.currentPDFDoc.getPageCount()-1:r;return i>this.currentPDFDoc.getPageCount()-1&&(i=this.currentPDFDoc.getPageCount()-1),this.printEx({type:1,pageRange:n+1+"-"+(i+1)})},r.printPDFDocument=function(t){t.asImage;var e=t.endIndex,n=void 0===e?this.currentPDFDoc.getPageCount()-1:e,r=t.printType,i=void 0===r?["page"]:r,o=(t.reverse,t.shrinkToFit,t.silent,t.startIndex),a=void 0===o?0:o,s=(t.ui,t.rangeType),c=t.total,u=(void 0===c&&this.currentPDFDoc.getPageCount(),t.progress),d=void 0===u?this.printProgress:u,l=t.fromToArray,h=t.hideHeaderFooter,f=void 0===h?!this.getPrintSetting("showHeaderFooter"):h,p=t.quality,g=void 0===p?this.getPrintSetting("quality")||100:p,v=t.isPortfolio,m=[];if("assign"===s)for(var y=0;y<l.length;y++)if(l[y][0]===l[y][1])m.push(l[y][0]-1);else for(var w=l[y][0];w<=l[y][1];w++)m.push(w-1);else{n>this.currentPDFDoc.getPageCount()-1&&(n=this.currentPDFDoc.getPageCount()-1);for(var b=a;b<=n;b++)m.push(b)}return this.print({isPortfolio:v,rangeType:s,pages:m,printType:i,showHeaderFooter:!f,quality:g,progress:d})},r.highlightControls=function(){return this._highlightControls},r.highlightControlsUI=function(){return this._highlightControlsUI},r.setHighlightControlsUI=function(t){this._highlightControlsUI=t},r.getDisplayHighlightColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HTML";return e>1&&(e=1),xn(t,n,e)},r.highlightForm=function(t){var e=this.pdfViewerRender.pdfDocRender;if(this.setHighlightControlsUI(t),e){var n=e.formRender;n&&n.setRuntimeHighlight(t)}return this.eventEmitter.emit(Ct.setFromFieldHighlight,t),this._highlightControls=t},r.getFormHighlightColor=function(){return{color:xn(this._runtimeColor,"int",this._runtimeColorOpacity),colorRequired:xn(this._runtimeColorRequired,"int",this._runtimeColorOpacityRequired)}},r.setFormHighlightColor=function(t,e){var n=.5,r=1;(Nt.isChrome||Nt.isFirefox)&&(n=1),"number"==typeof t&&(n=(4278190080&t)>>>24,n/=255,this._runtimeColorOpacity=n,t&=16777215),"number"==typeof e?(r=(4278190080&e)>>>24,r/=255,this._runtimeColorOpacityRequired=r,e&=16777215):e=t;var i=this.pdfViewerRender.pdfDocRender;if(i){var o=i.formRender;o&&o.setRuntimeHighlightColor(t,n,e,r)}this._runtimeColor=t,this._runtimeColorRequired=e},r.getStore=function(){return this.store},r.getStorage=function(){return this.storage},r.setJRFontMap=function(t){return this.getWebPDFJR().then((function(e){return e.setFontMap(t)}))},r.setJRWatermarkFontMap=function(t){return this.getWebPDFJR().then((function(e){return e.setWatermarkFontMap(t)}))},r.pasteAnnot=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},i=this.stateHandlerManager.getCurrentStates();if(i){var o=i.getStateName();if("edit-all"===o||"add-path-object"===o||"add-text-object"===o)return}if(t&&e&&!e.isVirtual()){var a=t.isCutAnnot,s=void 0!==a&&a,c=t.annotId,u=this.currentPDFDoc;return u.getPageByIndex(t.pageIndex).then((function(t){if(s){var e=[];if(n.cutAnnot&&n.cutAnnot.getId()===c){var r=n.cutAnnot;n.cutAnnotInfo&&n.cutAnnotInfo.objectNumber===c&&(r.info=Pb({},n.cutAnnotInfo),n.cutAnnotInfo=null),e.push(r)}return Promise.resolve(e)}return t.getAnnotsByObjectNumArray([c])})).then((function(t){if(t.length){if(s){var i=Pb({},t[0].getInfo());n.cutAnnot=null;var o=t[0].getRect(),a=o.right-o.left,c=o.top-o.bottom;return o.left=r.x,o.top=r.y,o.right=r.x+a,o.bottom=r.y-c,i.rect=Pb({},o),i.isCutPasteCreate=!0,e.addAnnot(i)}return e.pasteAnnot(t[0],r)}})).then((function(t){if(t.length>0){var r=t[0];if(s){var i=n.getAnnotRender(e.getIndex(),r.getId()).getComponent();n.copy([i])}n.eventEmitter.emit(Ct.addAnnotSuccess,r)}return t})).catch(xb)}},r.pasteImage=function(t,e){var n=this;window.URL=window.URL||window.webkitURL;var r=window.URL.createObjectURL(e),i=B()("<img style='opacity:0' />");i.on("load",(function(e){t=t.then((function(t){return n.getPDFDocRender().getViewBoxCenter(!1)})).then((function(t){var e=S()(t,2),o=e[0],a=e[1];if(o.isVirtual())throw new Error("Cannot paste image to virtual page!");var s,c,u=n.pdfViewerRender.pdfDocRender.getPDFPageRender(o.getIndex()),d=u.getRotation();90===d||270===d?(s=i.height(),c=i.width()):(s=i.width(),c=i.height());var l={left:a[0],top:a[1],right:a[0]+s,bottom:a[1]+c};l=o.reverseDeviceRect(l,u.scale,d);var h=new XMLHttpRequest;h.open("get",r),h.responseType="arraybuffer";var f=z();return h.onloadend=function(t){return f.resolve(h.response)},h.send(),Promise.all([o,f.promise,l,d])})).then((function(t){var e=S()(t,4),n=e[0],r=e[1],i=e[2],o=e[3];return n.addImage(r,i,o)})).then((function(t){window.URL.revokeObjectURL(r),i.remove()})).catch((function(){window.URL.revokeObjectURL(r),i.remove()}))})),i.attr("src",r),B()("body").append(i)},r.paste=function(t){var e=this;t||(t=JSON.parse(Eb));var n=Promise.resolve(),r=function(t){var r=e.stateHandlerManager.getCurrentStates();if(r&&"hand"!==r.getStateName())return;n=n.then((function(t){return e.getPDFDocRender().getViewBoxCenter()})).then((function(n){var r=S()(n,2),i=r[0],o=r[1];if(!i.isVirtual()){var a=e.getPDFDocRender().getPDFPageRender(i.getIndex()),s={left:o[0],top:o[1],right:o[0]+12,bottom:o[1]-12},c=i.reverseDeviceRect(s,a.scale,a.getRotation());return i.addAnnot({type:du.freeText,intent:"FreeTextTypewriter",subject:"FreeTextTypewriter",contents:t,defaultAppearance:{textColor:0,textSize:12},rect:c,rotate:((360-90*i.getRotation()-a.getRotation())%360+360)%360}).then((function(t){e.eventEmitter.emit(Ct.addAnnotSuccess,t[0])}))}})).catch(xb)};this.pastPositionInfo&&this.pastPositionInfo.times++;var i=function(n){var r=e.getPDFDocRender();return r?r.getViewBoxCenter().then((function(r){var i=S()(r,2),o=i[0],a=i[1];e.pastPositionInfo&&e.pastPositionInfo.pageIndex===o.getIndex()&&e.pastPositionInfo.pos.toString()===a.toString()||(e.pastPositionInfo={pageIndex:o.getIndex(),pos:a,times:0});var s=1e4,c=-1,u=-1,d=1e4;t.forEach((function(t){if("string"===t.type){var e=t.value;if(e.type){var n=e.rect;s=Math.min(n.left,s),c=Math.max(n.right,c),u=Math.max(n.top,u),d=Math.min(n.bottom,d)}}}));var l=c-s,h=u-d,f=o.getWidth(),p=o.getHeight(),g={x:a[0]+5*e.pastPositionInfo.times,y:a[1]-5*e.pastPositionInfo.times};if(g.x+l>f){var v=f-l;g.x=v<0?0:f-l}if(g.y-h<0){var m=p-h;g.y=m<0?p:h}return[o,{x:g.x+n.left-s,y:g.y-(u-n.top)}]})):Promise.resolve({x:0,y:0})};this.pasteTimes++;var o={left:1e4,right:-1,top:-1,bottom:1e4},a=0,s=0;t[0]&&"string"===t[0].type&&t[0].value.graphicObject&&function(){t.forEach((function(t){if("string"===t.type){var n=t.value;if(n.doc&&n.graphicObject&&e.currentPDFDoc.id===n.doc){var r=n.rect;o.left=Math.min(r.left,o.left),o.right=Math.max(r.right,o.right),o.top=Math.max(r.top,o.top),o.bottom=Math.min(r.bottom,o.bottom)}}})),a=o.top-o.bottom,s=o.right-o.left;var n=A()({},o);n.top-=a*e.pasteTimes,n.top<0?(e.pasteNeedRestart=!0,e.pasteRestartTimes++):(e.pasteNeedRestart=!1,e.pasteRestartTimes=-1)}();var c=[],u=[],d=[];if(t.forEach((function(t){if("string"===t.type)try{var l=t.value;if("number"==typeof l)return void r(t.value);l.type?"widget"===l.type?c.push(i(l.rect).then((function(t){var e=S()(t,2);return[e[0],e[1],l]}))):n=n.then((function(t){return i(l.rect).then((function(t){var n=S()(t,2),r=n[0],i=n[1];if(!r.isVirtual())return e.pasteAnnot(l,r,i).then((function(t){return t&&d.push.apply(d,E()(t)),d}))}))})):l.doc&&l.graphicObject&&e.currentPDFDoc.id===l.doc?u.push((f=l.rect,p=l.page,e.currentPDFDoc.getPageByIndex(p).then((function(t){var n=t.getHeight(),r=Math.abs(o.top)-Math.abs(f.top),i=Math.abs(o.left)-Math.abs(f.left),c=A()({},o);return c.top-=a*e.pasteTimes,c.bottom-=a*e.pasteTimes,e.pasteNeedRestart&&(n-e.pasteRestartTimes*a<0&&(e.pasteRestartTimes=0),c.top=n-e.pasteRestartTimes*a,c.bottom=c.top-a,c.left=0,c.right=s),[t,{top:c.top-r,bottom:c.top-r-(f.top-f.bottom),left:c.left-i,right:c.left-i+(f.right-f.left)}]}))).then((function(t){var e=S()(t,2);return[e[0],e[1],l]}))):r(t.value)}catch(t){0}else if("file"===t.type){var h=t.value;if(!h)return;/^image.*/.test(h.type)?e.pasteImage(n,h):n=n.then((function(n){return e.currentPDFDoc.attachFile(t.blob)})).catch(xb)}var f,p})),c.length){var l=this.currentPDFDoc.PDFForm;n=n.then((function(t){return Promise.all(c).then((function(t){var e=t[0][0];if(!e.isVirtual()){var n=t.map((function(t){var e=S()(t,3),n=(e[0],e[1]),r=e[2],i=l.getField(r.fieldName);if(i&&i.getControlById(r.srcObjectNumber)){r.type=r.fieldType,delete r.fieldType;var o=r.rect;return A()({},r,{rect:{left:n.x,top:n.y,right:n.x+(o.right-o.left),bottom:n.y-(o.top-o.bottom)}})}})).filter((function(t){return!!t}));return l.copyControls(null,e,n)}}))}))}return u.length&&(n=n.then((function(t){return Promise.all(u).then((function(t){if(!t[0][0].isVirtual()){var e=t.map((function(t){var e=S()(t,3),n=e[0],r=e[1],i=e[2];return n.pasteGraphicObject(i.graphicObject,i.page,r)}));return Promise.all(e).then((function(t){return t}))}}))}))),n.then((function(t){if(e.activeElement(),Array.isArray(t)&&t[0]instanceof ol){var n=t[0].getPDFPage().getIndex(),r=new pt,i=e.getPDFPageRender(n);t.forEach((function(t){var n=new(e.addon.graphicsManager.get(t))(t,i,e.addon);r.add(n)})),e.activeElement(r)}return t}))},r.copy=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.activeElement.tagName.toLowerCase();if("textarea"!==n&&"input"!==n&&(t||(t=this.getAllActiveElements()),Array.isArray(t)||(t=[t]),0!==t.length)){var r=[],i=t.map((function(t){if(t&&t.annot&&"widget"===t.annot.getType()){var n=t.annot;return{type:"string",value:{type:n.getType(),rect:n.getRect(),fieldName:n.getField().getName(),fieldType:n.getField().getType(),srcObjectNumber:n.getObjNum()}}}if(t instanceof da){var i=t.annot.getType();if("strikeout"===i||"highlight"===i||"squiggly"===i||"underline"===i||"redact"===i||"caret"===i||"screen"===i||"sound"===i)return;return{type:"string",value:{isCutAnnot:e,type:i,rect:t.annot.getRect(),annotId:t.getId(),pageIndex:t.annot.page.getIndex()}}}if(t.graphicsObject&&t.graphicsObject instanceof ol){var o=(t=t.graphicsObject).getPDFPage();return r.push(t),{type:"string",value:{page:o.getIndex(),graphicObject:t.getId(),rect:t.getRect(),doc:o.getPDFDoc().getId()}}}})).filter((function(t){return!!t}));if(r.length){var o=r[0].getPDFPage(),a=r.map((function(t){return t.getId()}));o.cloneGraphicObject(o.getIndex(),a)}Eb=JSON.stringify(i),Object(K.copyText)(Eb),this.eventEmitter.emit(Ct.copyTextSuccess),this.pasteTimes=0}},r.copyAnnots=function(t){if(!Array.isArray(t))throw new Error("Incorrect param format");return t.filter((function(t){var e=t.getType();return"widget"==e?t.getField().getType()!==Ln.Sign:!(["strikeout","highlight","squiggly","underline","redact","caret","screen","sound","popup"].includes(e)||"R"==t.info.RT&&t.info.IRT)})).map((function(t){var e=t.getType();if("widget"===e){var n=t,r=n.getField();return{type:e,rect:n.getRect(),fieldName:r.getName(),fieldType:r.getType(),objectNumber:n.getObjNum()}}return{type:e,rect:t.getRect(),id:t.getId(),pageIndex:t.getPage().getIndex()}}))},r.pasteAnnots=function(t){var e=[],n=[];t.forEach((function(t){var r=t.type,i=t.rect,o=t.id,a=t.pageIndex,s=t.fieldName,c=t.fieldType,u=t.objectNumber;"widget"==r?n.push({type:"string",value:{type:r,rect:i,fieldName:s,fieldType:c,srcObjectNumber:u}}):e.push({type:"string",value:{isCutAnnot:!1,type:r,rect:i,annotId:o,pageIndex:a}})}));var r=[];return e.length>0&&r.push(this.paste(e)),n.length>0&&r.push(this.paste(n)),Promise.all(r).then((function(t){return t.flat()}))},r.getClipboardText=function(){return Eb},r.cut=function(t){t||(t=[this.getAllActiveElements()[0]]),Array.isArray(t)||(t=[t]);var e=t[0];if(e&&e instanceof da&&"text"===e.annot.getType()){var n=e.annot,r=n.getReplies(),i=Pb({},n.getInfo());i.repliesSummary.length&&i.repliesSummary.forEach((function(t){if(!t.content){var e=r.find((function(e){return e.getId()===t.id&&e.info.IRT===n.getId()}));e&&(t.content=e.getContent())}})),this.cutAnnotInfo=Pb({},i),this.cutAnnot=n,this.copy(e,!0),e.removeAnnot()}},r._setSaveBefore=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xb;this._saveBefore=t},r.registerSignatureHandler=function(t,e,n){throw new Error("this api is not working now!!")},r.setEnableShortcutKey=function(t){this.config.enableShortcutKey=t,t?this.keyboard.enable():this.keyboard.disable()},r.isShortcutKeyEnabled=function(){return this.config.enableShortcutKey},r.isMouseWheelZoomEnabled=function(){var t=window.localStorage.getItem("PREFERENCES-GENNERAL");return!!t&&JSON.parse(t).handUseMouseZoom},r.onShortcutKey=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t||!t)throw new Error("Incorrect shortcut param format");var i=va.from(t);if("function"!=typeof e&&"object"!==_()(e)||Array.isArray(e))throw new Error("Incorrect handler param format");var o=xb;r&&(o=this.keyboard.interceptor((function(t,e){if(t.context===n.keyboard.getDefaultShortcutContext())return e(t);t.shortcut.equals(i)||e(t)})));var a="function"==typeof e?e:e&&e.keydown,s="function"==typeof e?void 0:e&&e.keyup,c={shortcut:i,keydown:a,keyup:s},u=this.keyboard.onShortcut(i,(function(t){switch(t.opportunity){case Rg.keydown:c.keydown&&c.keydown(t);break;case Rg.keyup:c.keyup&&c.keyup(t)}}),{keydown:"function"==typeof a,keyup:"function"==typeof s}),d=function(){o(),u()};return c.remove=d,this.keyboardListeners.push(c),d},r.offShortcutKey=function(t,e){if("string"!=typeof t||!t)throw new Error("Incorrect shortcut param format");var n="function"==typeof e?e:e&&e.keydown,r="function"==typeof e?void 0:e&&e.keyup,i=va.from(t);this.keyboardListeners=this.keyboardListeners.filter((function(t){var e=!1;return i.equals(t.shortcut)&&(n||r?(n===t.keydown&&(t.keydown=void 0),r===t.keyup&&(t.keyup=void 0),e=!t.keydown&&!t.keyup):e=!0),!e||(t.remove(),!1)}))},r.getInkSignList=function(){return(this.inkSignManager.getList()||[]).map((function(t){return{dataURL:t.dataURL}}))},r.setInkSignList=function(t){var e=this;Array.isArray(t)&&t.forEach((function(t){if(t.dataURL&&/^data:(.*?)\/(.*?);base64/g.test(t.dataURL)){var n=e.inkSignManager.addInkSign();n.setDataURL(t.dataURL),e.inkSignManager.push(n)}}))},r.setDefaultPrintSetting=function(t){var e=t.quality;if(e||(e=t.quality=100),(e-100|1e3-e)<0)throw new Error("quality range error, 100 to 10000");var n=this.config.printSetting;this.config.printSetting=A()(n,t)},r.getPrintSetting=function(t){return this.config.printSetting[t]},r.setAutoCompleteSetting=function(t){var e=this.config.autoCompleteSetting;this.config.autoCompleteSetting=A()(e,t)},r.getAutoCompleteSetting=function(){return this.config.autoCompleteSetting},r.clearAllAutoCompleteEntries=function(){return new eh(this).clearDbEntries()},r.deleteAutoCompleteEntry=function(t){return new eh(this).deleteEntry(t)},r.getSavedAutoCompleteEntries=function(){return new eh(this).getDbEntries()},r.getAllAutoCompleteEntries=function(){return new eh(this).getAllEntries()},r.setPencilDrawingTimeOut=function(t){this.getStateHandlerManager().pushStateHandlerConfig("pencilStateHandler",{pencilTimeout:t})},r.setEraserSize=function(t){this.getStateHandlerManager().pushStateHandlerConfig("eraserStateHandler",{width:t})},r.setSnapMode=function(t,e){switch(t){case Jn:case jn:case Xn:case Zn:case Qn:case rr:case ir:break;default:throw new Error("Incorrect state handler name: ".concat(t,"!"))}var n=this.getStateHandlerManager(),r=(n.getStateHandlerConfig(t)||{}).snapMode;n.pushStateHandlerConfig(t,{snapMode:e&&e.slice(0)}),this.eventEmitter.emit(Ct.snapModeChanged,t,e,r)},r.getSnapMode=function(t){return(this.getStateHandlerManager().getStateHandlerConfig(t)||{}).snapMode||[]},r.setDocReadColors=function(t){var e=this;if("object"!==_()(t)||Array.isArray(t)||!t.hasOwnProperty("background")||!t.hasOwnProperty("foreground"))throw new Error("Nonsupport colors param format");var n=this.getCurrentPDFDoc();n&&n.setColors(t).then((function(){var t=e.getPDFDocRender();if(t)for(var n=t.getPDFDoc().getPageCount(),r=0;r<n;r++){var i=e.getPDFPageRender(r);i&&i.isRendered&&i.redraw(!0)}}))},r.setPageDisplayPreferences=function(){var t=this.getCurrentPDFDoc(),e=localStorage.getItem("PAGE_DISPLAY_DATA");if(e){var n=JSON.parse(e);t&&t.setPageDisplayPreferences(n)}},r.activateAnnotation=function(t){var e=this;if(!t.annotationId)throw new Error("Annotation id can't empty");var n=this.getPDFDocRender();if(!n||!this.currentPDFDoc)return Promise.resolve();var r=t.annotationId;return this.currentPDFDoc.getPageByIndex(t.pageIndex).then((function(t){return"number"==typeof r?t.getAnnotsByObjectNumArray([r]):t.getAnnots().then((function(e){if(r.trim().length<1)return Promise.resolve();var n=t.getAnnotObjectNum(r);return 0==n?Promise.resolve():(r=n,t.getAnnotsByObjectNumArray([n]))}))})).then((function(i){var o=i[0];if(!o)throw new Error("the annotation does not exist");var a=o.getType();if("popup"===a)throw new Error("the popup annotation can not be activated");if(t.showCommentList&&"freetext"!=a){var s=function(){var n=e.getAnnotRender(t.pageIndex,r);if(n)return Promise.resolve(n.component.showReplyDialog()).then((function(){return o}))},c=s();return c||n.goToPage(t.pageIndex,{x:o.getRect().left,y:o.getRect().top},!0).then(s).then((function(){return o}))}return o})).then((function(e){return n.goToPage(t.pageIndex,{x:e.getRect().left,y:e.getRect().top},!0)})).then((function(n){var i=e.getPDFPageRender(t.pageIndex);i.annotsRender?i.annotsRender.activeAnnot(r):i.getAnnotsRenderSafely().then((function(t){t.activeAnnot(r)}))}))},r.convertClientCoordToPDFCoord=function(t){for(var e=t.clientX,n=void 0===e?0:e,r=t.clientY,i=void 0===r?0:r,o=0,a=0,s=0,c=this.getPDFDocRender().pagesRender,u=c.getViewMode().getVisibleIndexes(),d=0,l=u.length;d<l;d++){o=u[d];var h=c.getPDFPageRender(o).$ui[0].getBoundingClientRect();if(n>=h.left&&n<h.right&&i>=h.top&&i<h.bottom){a=n-h.left,s=i-h.top;break}}var f=c.getPDFPageRender(o);return f.reverseDevicePoint([a,s]).then((function(t){var e=S()(t,2),n=e[0],r=e[1];return{index:o,left:n,top:r,scale:f.getScale(),rotation:f.getRotation()}}))},r.setAutoCalculateFieldsFlag=function(t){var e=this.pdfViewerRender.pdfDocRender;if(e){var n=e.getPDFDoc();if(n){var r=n.getPDFForm();r?r.calculationEnabled=t:console.error("get form error")}else console.error("get doc error")}else console.error("get doc Render error")},r.getModuleLicenseRight=function(){var t=this;this.getWebPDFJR().then((function(e){e.getAllModuleLicenseRight().then((function(e){t.getStore().dispatch(qo.c,e)}))}))},r.addTooltipsForAllFormFields=function(){var t=this.currentPDFDoc.getPDFForm();t&&(t.fields||[]).forEach((function(t){t.getAlternateName()||t.setAlternateName(t.getName())}))},r.setLayoutGrid=function(t){return t&&((t=A()({unit:"inch",width:1,height:1,offsetLeft:0,offsetTop:0,subdivisions:3,color:"#7f7fff"},t)).color=xn(t.color),t.subdivisions=Math.max(1,t.subdivisions)),this.config.layoutGrid=t||null,this.redrawContent()},r.setLayoutGridByStorageSettings=function(t){var e=Fb(),n=e.gridOptions,r=e.settings;return!0===t&&(r.Grid=!r.Grid,Mb(r)),this.config.layoutGrid=r.Grid?n:null,this.eventEmitter.emit(Ct.gridToggle,r.Grid,t),this.redrawContent()},r.setCustomMargin=function(t){this.getPDFViewerRender();B()("html").css("--facing-margin",t+"px")},r.setMultipage=function(t){var e=this,n=this.viewModeManager.currentViewMode.getName(),r=["facing-page-view-mode","multipage-view-mode","facing-continuous-page-view-mode"];if(r.forEach((function(n){e.viewModeManager.ViewModes[n].setMultipage(t)})),this.getPDFDocRender().doc.getPageCount()<=1)this.viewModeManager.switchTo("single-page-view-mode");else if(r.includes(n)){var i=this.viewModeManager.ViewModes[n];this.viewModeManager.currentViewMode=i,this.viewModeManager.switchTo(""),setTimeout((function(){e.viewModeManager.switchTo(n)}))}},r.updateFormatPageNumbers=function(){this.eventEmitter.emit(Ct.pagesLabelChange)},r.getLayoutGrid=function(){return this.config.layoutGrid||null},r.setSnapGrid=function(t){t&&((t=A()({unit:"inch",width:1,height:1,offsetLeft:0,offsetTop:0,subdivisions:3},t)).subdivisions=Math.max(1,t.subdivisions)),this.config.snapGrid=t||null},r.setSnapGridByStorageSettings=function(t){var e=Fb(),n=e.gridOptions,r=e.settings;!0===t&&(r.SnapGrid=!r.SnapGrid,Mb(r)),this.config.snapGrid=r.SnapGrid?n:null,this.eventEmitter.emit(Ct.snapGridToggle,r.SnapGrid,t)},r.getSnapGrid=function(){return this.config.snapGrid||null},r.setLineWeight=function(){var t=D()(N.a.mark((function t(e){var n,r=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!(r.length>1&&void 0!==r[1])||r[1],!this.currentPDFDoc){t.next=7;break}if(this.currentPDFDoc.otherOptions.renderConfigLineWeight!==e){t.next=4;break}return t.abrupt("return");case 4:return this.currentPDFDoc.otherOptions.renderConfigLineWeight=e,t.next=7,this.currentPDFDoc.setRenderConfigLineWeight(e);case 7:if(n){t.next=9;break}return t.abrupt("return");case 9:this.pdfViewerRender.pdfDocRender.pagesRender.setRenderFlags(8),this.redrawContent();case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setFormFieldFocusRectangleVisible=function(t){B()(".fv__pdf-viewer").toggleClass("hide-form-field-focus-rectangle",!t)},r.setJPXDownSample=function(t){return this.getWebPDFJR().then((function(e){return e.setJPXDownSample(t)}))},r.setFormCreationContinuously=function(t){this.getStore().dispatch(Ht.SET_FORM_CREATION_CONTINUOUSLY,t)},r.startFormDesginerAssist=function(){var t=this;return this.isDesignerAssistantEnabled?Promise.resolve():this.currentPDFDoc.startFormDesignerAssit().then((function(){t.isDesignerAssistantEnabled=!0,t.eventEmitter.emit(Ct.designerAssistantStatusChanged,!0)}))},r.stopFormDesginerAssist=function(){var t=this;return this.isDesignerAssistantEnabled?this.currentPDFDoc?this.currentPDFDoc.stopFormDesignerAssit().then((function(){t.isDesignerAssistantEnabled=!1,t.eventEmitter.emit(Ct.designerAssistantStatusChanged,!1)})):(this.isDesignerAssistantEnabled=!1,void this.eventEmitter.emit(Ct.designerAssistantStatusChanged,!1)):Promise.resolve()},r.setActionCallback=function(t){this.JSEngine&&this.JSEngine.setActionCallback(t)},r.addFontMaps=function(t){var e=this.getStore(),n=(e.getCurrentValue("font-map-list")||{all:[]}).all;return e.dispatch("font-map-list",{all:n.concat(t),new:t}),this.eventEmitter.emit(Ct.AddFontMaps,t),this.getWebPDFJR().then((function(e){return e.addFontMap(t)}))},r.getIoC=function(){return this.ioc},r.getReadAloudService=function(){return this.readAloudService||(this.readAloudService=new Vw(this)),this.readAloudService},r.getPDFDocParserService=function(){return this.ioc.getInstanceByClass(ib)},r.getKeyboard=function(){return this.keyboard},r.toggleCollaborationMode=function(t){this.eventEmitter.emit(Ct.toggleCollaborationMode,t)},r.getGroupCount=function(){var t={"-1":[]};return this.getAllActiveElements().forEach((function(e){var n=e.annot,r=n.getGroupHeader&&n.getGroupHeader();r?(t[r.getId()]=t[r.getId()]||[]).push(e):t[-1].push(e)})),[Object.keys(t).length-1,t[-1].length,t]},r.initADPs=function(){this.ADPs||(this.ADPs=JSON.parse(localStorage.getItem("foxit-default-annot-prop"))||{})},r.setAnnotDefaultProperty=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.initADPs(),A()(this.ADPs,R()({},t+e,n)),localStorage.setItem("foxit-default-annot-prop",JSON.stringify(this.ADPs))},r.getAnnotDefaultProperty=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.initADPs(),this.ADPs[t+e]||{}},r.setWorker=function(t){var e=this;return this.getWebPDFJR().then((function(n){return n.api.setWorker(t),n.cacheFontConfig((e.config.jr.fontServer||"")+"/",[],[])}))},r.previewIconDoc=function(t){return this.getWebPDFJR().then((function(e){return e.api.previewIconDoc(t)}))},e}(vt.a);function kb(t,e){if(t&&"function"==typeof t.getJWT)return t.getJWT(e)}function Fb(){var t=JSON.parse(localStorage.getItem("layoutPreference"))||{WidthBetweenLines:"1.000",HeightBetweenLines:"1.000",GridOffsestFromLeftEdge:"1.000",GridOffsestFromTopEdge:"1.000",Subdivisions:"3",GridLineColcor:"#1e43d6",Grid:!1,SnapGrid:!1};return{gridOptions:{unit:"inch",width:t.WidthBetweenLines,height:t.HeightBetweenLines,offsetLeft:t.GridOffsestFromLeftEdge,offsetTop:t.GridOffsestFromTopEdge,subdivisions:Math.max(1,t.Subdivisions),color:xn(t.GridLineColcor)},settings:t}}function Mb(t){localStorage.setItem("layoutPreference",JSON.stringify(t))}function Ob(t){if(0===t.size)return Promise.resolve(new Uint8Array(0));var e=new FileReader;return new Promise((function(n,r){e.onload=function(){n(new Uint8Array(e.result))},e.onerror=function(t){return r(t)},e.readAsArrayBuffer(t)}))}function Lb(t,e){if(0===t.size)return Promise.resolve("");var n=new FileReader;return new Promise((function(r,i){n.onload=function(){r(n.result)},n.onerror=function(t){return i(t)},n.readAsText(t,e)}))}function Nb(t,e){for(var n=0;n<e.length;n++)if(t[n]===e.charCodeAt(n))return!0;return!1}function Vb(t,e){if(0===t.size)return Promise.resolve(!1);var n;if(e){var r=e.lastIndexOf(".");n=e.substr(r+1)}return Lb(t.slice(0,4)).then((function(t){return"%PDF"===t||"pdf"===n}))}function Bb(t){return"%PDF"===Array.from(t).slice(0,4).map((function(t){return String.fromCharCode(t)})).join("")}function Ub(t,e){return 0===t.size?Promise.resolve(!1):Ob(t.slice(0,35)).then((function(t){return $b(t,e)?Hb():qb(t,e)?Wb():Yb(t,e)}))}var jb=document.createElement("video");function Hb(){return!!jb.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')}function Wb(){return!!jb.canPlayType&&!!jb.canPlayType('video/ogg; codecs="theora, vorbis"')}function $b(t,e){return!!e.match(/\.mp4$/)}function Yb(t,e){return!!e.match(/\.webm$/)}function qb(t,e){return 79===t[0]&&103===t[1]&&103===t[2]&&83===t[3]&&Gb(t)}function Gb(t){return 116===t[29]&&104===t[30]&&101===t[31]&&111===t[32]&&114===t[33]&&97===t[34]}var zb=document.createElement("audio");function Kb(){return!!zb.canPlayType("audio/mp3")}function Jb(){return!!zb.canPlayType&&!!zb.canPlayType('audio/ogg; codecs="vorbis"')}function Xb(t,e){return Ob(t.slice(0,35)).then((function(t){return Zb(t,e)?Kb():!!Qb(t,e)&&Jb()}))}function Zb(t,e){return!!e.match(/\.mp3$/)}function Qb(t,e){return 79===t[0]&&103===t[1]&&103===t[2]&&83===t[3]&&tA(t)}function tA(t){return 118===t[29]&&111===t[30]&&114===t[31]&&98===t[32]&&105===t[33]&&115===t[34]}function eA(t,e){return Ob(t.slice(0,4)).then((function(t){return nA(t)||rA(t)||iA(t)||oA(t)||aA(e)}))}function nA(t){return 255===t[0]&&216===t[1]&&255===t[2]}function rA(t){return 137===t[0]&&80===t[1]&&78===t[2]&&71==t[3]}function iA(t){return 71===t[0]&&73===t[1]&&70===t[2]&&56===t[3]}function oA(t){return 66===t[0]&&77===t[1]}function aA(t){return/\.svg$/.test(t)}function sA(t){return Lb(t.slice(0,4)).then((function(t){return"%FDF"===t}))}function cA(t){return Lb(t.slice(0,4)).then((function(t){return"%XDP"===t}))}function uA(t){return t>=0&&t<=6||t>=14&&t<=31}function dA(t,e){return/\.xfdf/.test(e)||0===t.size?Promise.resolve(!1):sA(t).then((function(e){return!e&&cA(t).then((function(e){if(e)return!1;var n=t.size>1024?t.slice(0,1024):t;return"function"==typeof t.stream?function(t){var e=t.stream().getReader();return e.read().then((function t(n){if(n.done)return!0;for(var r=n.value,i=0;i<r.length;i++)if(uA(r[i]))return!1;return e.read().then(t)}))}(n):function(t){var e=Math.ceil(t.size/512),n=function(t){for(var e=0;e<t.length;e++)if(uA(t[e]))return!1;return!0};return Array(e).fill((function(t){return Ob(t).then(n)})).reduce((function(e,n,r){return e.then((function(e){if(e){var i=512*r,o=Math.min(i+512,t.size),a=t.slice(i,o);return n(a)}return!1}))}),Promise.resolve(!0))}(n)}))}))}var lA,hA,fA=n(44),pA=n(125);n(455);function gA(t){return t instanceof HTMLElement?function(n,r){return r===hA.UPDATE&&n?e(n,t.getBoundingClientRect()):n}:function(n,r){return r===hA.UPDATE&&n?e(n,t):n};function e(t,e){var n=t.clientLeft,r=t.clientTop,i=n+t.width,o=r+t.height;return n<e.left&&(n=e.left),r<e.top&&(r=e.top),i>e.right&&(i=e.right),o>e.bottom&&(o=e.bottom),{clientLeft:n,clientTop:r,width:i-n,height:o-r}}}!function(t){t.NONE="none",t.DASHED="dashed",t.SOLID="solid",t.DOTTED="dotted"}(lA||(lA={})),function(t){t.START="selection-start",t.UPDATE="selection-update",t.END="selection-end",t.CANCEL="selection-cancel"}(hA||(hA={}));var vA=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=t.call(this)||this).anchorElement=document.body,e.fillColor="rgba(".concat(125,",",186,",",255,", 0.3)"),e.borderColor="#7DBAFF",e.borderStyle=lA.SOLID,e.borderWidth=1,e.removeMaskOnEnd=!0,e.areaEl=document.createElement("div"),e.builtInInteraction=!0,e.isPrepared=!1,e.isAvailable=!0,e.store=new ds.a,e.interceptors=[];var r=Object.keys(n);return r.forEach((function(t){e[t]=n[t]})),e.areaEl.className="fv__viewer-selections-area",e.areaEl.style.cssText+="\n            outline: ".concat(e.borderWidth,"px ").concat(e.borderStyle," ").concat(e.borderColor,";\n            background-color: ").concat(e.fillColor,";\n        "),e.store.subscribe(hA.UPDATE,(function(t){e.areaEl.style.cssText+="\n                width: ".concat(t.width,"px;\n                height: ").concat(t.height,"px;\n                left: ").concat(t.clientLeft,"px;\n                top: ").concat(t.clientTop,"px;\n            ")})),e.addDestroyHook((function(){e.store.destroy()})),e}O()(e,t);var n=e.prototype;return n.eventInterceptor=function(t){this.interceptors.push(t)},n.reducer=function(t){this.store.reducer(t)},n.on=function(t,e){return this.builtInInteraction&&this.prepare(),this.store.subscribe(t,e)},n.start=function(t,e){document.body.appendChild(this.areaEl);var n=this.anchorElement.getBoundingClientRect();this.store.dispatch(hA.START,{clientLeft:t,clientTop:e,left:t-n.left,top:e-n.top,width:0,height:0})},n.adjust=function(t,e){var n=this.store.getCurrentValue(hA.START),r=n.clientLeft+t,i=n.clientTop+e,o=Math.min(n.clientLeft,r),a=Math.min(n.clientTop,i),s=Math.abs(t),c=Math.abs(e),u=this.anchorElement.getBoundingClientRect();this.store.dispatch(hA.UPDATE,{clientLeft:o,clientTop:a,left:o-u.left,top:a-u.top,width:s,height:c})},n.end=function(){this.removeMaskOnEnd&&this.removeMask();var t=this.store.getCurrentValue(hA.UPDATE);this.store.dispatch(hA.END,t)},n.cancel=function(){this.removeMask(),this.store.dispatch(hA.CANCEL,void 0)},n.removeMask=function(){this.areaEl.parentElement===document.body&&document.body.removeChild(this.areaEl)},n.enable=function(){this.isAvailable=!0},n.disable=function(){this.isAvailable=!1},n.prepare=function(){var t=this;if(!this.isPrepared){var e=new zr.Manager(this.anchorElement);e.add(new zr.Pan({direction:zr.DIRECTION_ALL}));var n,r=!1;e.on("panstart",(function(e){t.isAvailable&&(t.interceptors.some((function(t){return!t(e)}))||(r=!0,n=e.center,t.start(e.center.x,e.center.y)))})),e.on("panmove",(function(e){if(t.isAvailable&&r){var i=e.center.x-n.x,o=e.center.y-n.y;t.adjust(i,o)}})),e.on("panend",(function(e){t.isAvailable&&r&&(r=!1,t.end())})),e.on("pancancel",(function(e){t.isAvailable&&r&&(r=!1,t.cancel())})),this.addDestroyHook((function(){e.destroy(),t.end()}))}},e}(vt.a);function mA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mA(Object(n),!0).forEach((function(e){R()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wA=function(t){var e={isAllowed:!1,print:2,accessibility:!0,copy:!0,change:4};return"password"===t?yA({userPassword:"",ownerPassword:"",isEncryptMetadata:!0,cipherType:um.AES128},e):"certificate"===t?e:{}},bA=function(t){if(void 0===t)return{};var e={};return e.print=2048&t?2:4&t?1:0,e.accessibility=!!(512&t),e.copy=!!(16&t),e.change=8&t&&32&t&&256&t?4:32&t&&256&t?3:256&t?2:1024&t?1:0,e},AA=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.print,n=t.change,r=t.accessibility,i=t.copy;if("number"!=typeof e||"number"!=typeof n||"boolean"!=typeof r||"boolean"!=typeof i)return 0;var o=65532;return e<2&&(o^=2048,e<1&&(o^=4)),r||(o^=512),i||(o^=16),4===(n=+n)?o^=1024:3===n?(o^=8,o^=1024):2===n?(o^=8,o^=32,o^=1024):1===n?(o^=8,o^=32,o^=256):0===n&&(o^=8,o^=32,o^=256,o^=1024),o+=4294901760},PA=null,EA=function(){return PA},xA=function(t){PA=t},SA="",CA=function(){return SA},DA=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";SA=t},IA=function(t,e){if(!t||!e)return Promise.resolve(!1);var n=e.recipientList,r=e.cipherType,i=e.isEncryptMetadata,o=t.pdfViewer.currentPDFDoc,a=n.map((function(t){return{cerFile:t.cerFile,permission:t.permissionData.isAllowed?t.permissionData:null}}));return o.setCertificateAndPermission(a,r,i).then((function(e){return e&&(t.alert({message:"password-protect:warning.apply-to-document",level:"warning",again:!0,id:"set-certificate-permission-alert"}),t.eventEmitter.emit(Ct.securityTypeChanged),xA(null)),e}))},RA=function(t,e){return t&&e?t.pdfViewer.currentPDFDoc.setPasswordAndPermission(e.userPassword,e.ownerPassword,e.permissionData.value,e.cipherType,e.isEncryptMetadata).then((function(n){if(n){t.alert({message:"password-protect:warning.apply-to-document",level:"warning",again:!0,id:"set-password-permission-alert"}),t.eventEmitter.emit(Ct.securityTypeChanged);var r=yA(yA(yA({},e),bA(e.permissionData.value)),{},{isAllowed:e.permissionData.isAllowed});delete r.permissionData,xA(r),DA(e.ownerPassword)}return n})):Promise.resolve(!1)},TA=function(t,e){if(t){var n=t.pdfViewer.currentPDFDoc,r=function(e){return t.promptPassword("","password-protect:buttons.inputOwnerPassword","password-protect:buttons.title","body",e?"error":void 0,e)};r().then((function t(i){if(!i)return r("password-protect:error.admin-pwd-cannot-blank").then(t,(function(){}));n.checkPassword(i).then((function(n){if(3!==n)return r("password-protect:warning.incorrect-owner-pwd").then(t,(function(){}));DA(i),e&&e(i)}))}),(function(){}))}};function _A(t){if(!t)return!1;switch(t.type){case"aplication/json":case"text/json":return!0}return!("string"!=typeof t.name||!t.name.endsWith(".json"))}function kA(t){if(!t)return!1;switch(t.type){case"application/vnd.fdf":return!0}return"string"==typeof t.name&&t.name.endsWith(".fdf")}function FA(t){if(!t)return!1;switch(t.type){case"application/vnd.xfdf":case"application/vnd.adobe.xfdf":return!0}return"string"==typeof t.name&&t.name.endsWith(".xfdf")}function MA(t){return t>=1073741824?"".concat(Math.floor(t/1073741824)," G"):t>=1048576?"".concat(Math.floor(t/1048576)," M"):t>=1024?"".concat(Math.floor(t/1024)," KB"):"".concat(t," B")}function OA(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD HH:mm:ss";if(!t)return"";var n="";return t.lastModified?n=be(new Date(t.lastModified),e,""):t.lastModifiedDate&&(n=be(t.lastModifiedDate,e,"")),n}var LA,NA=function(t){function e(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.$ui.get(0).parentElement;return(n=t.call(this,e)||this).scrollHost=r,n.clientWidth=-1,n.clientHeight=-1,window.ResizeObserver&&(n.observer=new ResizeObserver((function(t){var e=S()(t,1)[0];e&&(n.clientWidth=e.contentRect.width,n.clientHeight=e.contentRect.height)})),n.observer.observe(r),n.addDestroyHook((function(){n.observer.unobserve(r)}))),n}O()(e,t),e.create=function(t){return function(e){function n(n){return e.call(this,n,t)||this}return O()(n,e),n}(e)};var n=e.prototype;return n.getScrollHost=function(){return this.scrollHost},n.scrollBy=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto",r=this.scrollHost;r.scrollBy?r.scrollBy({top:e,left:t,behavior:n}):(r.scrollLeft=r.scrollLeft+t,r.scrollTop=r.scrollTop+e)},n.scrollTo=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto",r=this.scrollHost,i=r.scrollLeft,o=r.scrollTop;r.scrollTo?r.scrollTo({left:t,top:e,behavior:n}):(r.scrollLeft=t,r.scrollTop=e),Math.abs(i-r.scrollLeft)<1e-6&&Math.abs(o-r.scrollTop)<1e-6&&r.dispatchEvent(new Event("scroll"))},n.getScrollOffsetLeft=function(){return this.viewerRender.$ui.get(0).offsetLeft},n.getScrollOffsetTop=function(){return this.viewerRender.$ui.get(0).offsetTop},n.getScrollTop=function(){return this.scrollHost.scrollTop},n.getScrollLeft=function(){return this.scrollHost.scrollLeft},n.getScrollX=function(){return this.getScrollLeft()},n.getScrollY=function(){return this.getScrollTop()},n.getWidth=function(){var t;return-1!==this.clientWidth?(t=this.clientWidth,this.clientWidth=-1):t=this.scrollHost.clientWidth,t},n.getHeight=function(){var t;return-1!==this.clientHeight?(t=this.clientHeight,this.clientHeight=-1):t=this.scrollHost.clientHeight,t},n.addScrollEventListener=function(e){return t.prototype.addScrollEventListener.call(this,e)},e}(gs),VA=NA;function BA(t,e){for(var n=[],r=t;r<=e;r++)n.push(r);return n}!function(t){t[t.MOVE_TO=1]="MOVE_TO",t[t.LINE_TO=2]="LINE_TO"}(LA||(LA={}));var UA=function(){function t(t,e){this.x=t,this.y=e}var e=t.prototype;return e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.div=function(t){return this.mult(1/t)},e.mult=function(e){return new t(this.x*e,this.y*e)},e.normalize=function(){var t=this.length();return this.div(t)},e.add=function(e){return new t(this.x+e.x,this.y+e.y)},e.toPoint=function(t){return new jA(this.x,this.y,t)},t}(),jA=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LA.MOVE_TO;this.x=t,this.y=e,this.type=n}t.fromVec=function(e,n){return new t(e.x,e.y,n)},t.fromPoint=function(e,n){return new t(e.x,e.y,n)};var e=t.prototype;return e.distanceTo=function(t){return this.vectorTo(t).length()},e.vectorTo=function(t){return new UA(t.x-this.x,t.y-this.y)},e.toVector=function(){return new UA(this.x,this.y)},e.newType=function(e){return t.fromPoint(this,e)},t}(),HA=function(){function t(t,e){this.radius=t,this.origin=e}var e=t.prototype;return e.contains=function(t){return this.origin.distanceTo(t)<this.radius},e.intersectsLine=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,a=this.origin,s=a.x,c=a.y,u=Math.pow(i-n,2)+Math.pow(o-r,2),d=2*((i-n)*(n-s)+(o-r)*(r-c)),l=d*d-4*u*(s*s+c*c+n*n+r*r-2*(s*n+c*r)-this.radius*this.radius),h=[];if(0===l){var f=-d/(2*u),p=new jA(n+f*(i-n),r+f*(o-r));WA(t,e,p)&&h.push(p)}else if(l>0){var g=(-d-Math.sqrt(l))/(2*u),v=(-d+Math.sqrt(l))/(2*u),m=new jA(n+g*(i-n),r+g*(o-r)),y=new jA(n+v*(i-n),r+v*(o-r));WA(t,e,m)&&h.push(m),WA(t,e,y)&&h.push(y)}return h},t}();function WA(t,e,n){var r=Math.min(t.x,e.x),i=Math.max(t.x,e.x),o=Math.min(t.y,e.y),a=Math.max(t.y,e.y);return n.x>=r&&n.x<=i&&n.y>=o&&n.y<=a}var $A=function(){function t(t){this.radius=t}return t.prototype.erase=function(t,e){var n=t.reduce((function(t,e){return e.type===LA.MOVE_TO&&t.push([]),t[t.length-1].push(e),t}),[]),r=new HA(this.radius,e);return n.forEach((function(t){for(var e=0;e<t.length-1;){var n=t[e],i=t[e+1];if(r.contains(n))if(r.contains(i))t.splice(e,1,i.newType(LA.MOVE_TO)),e++;else{var o=r.intersectsLine(n,i);1===o.length&&t.splice(e,1,o[0].newType(LA.MOVE_TO)),e++}else{if(r.contains(i)){var a=r.intersectsLine(n,i);1===a.length&&(t.splice(e+1,1,a[0].newType(LA.LINE_TO),i.newType(LA.MOVE_TO)),e++)}else{var s=r.intersectsLine(n,i);2===s.length&&(t.splice(e+1,0,s[0].newType(LA.LINE_TO),s[1].newType(LA.MOVE_TO)),e+=2)}e++}}})),n.reduce((function(t,e){return t.concat(e)}),[])},t}();n(369),n(457);var YA,qA,GA,zA;YA={},R()(YA,"unknown","unknownMsg"),R()(YA,"unknown_certify","unknownMsg_certify"),R()(YA,"unknownValidityMsg","unknownValidityMsg"),R()(YA,"validMsg","validMsg"),R()(YA,"validMsg_certify","validMsg_certify"),R()(YA,"invalidMsg","invalidMsg"),R()(YA,"invalidMsg_certify","invalidMsg_certify"),R()(YA,"invalidMsg_Upper","invalidMsg_Upper"),R()(YA,"errorSignatureMsg","errorSignatureMsg"),R()(YA,"errorByteRangeMsg","errorByteRangeMsg"),R()(YA,"errorByteRangeDetail","errorByteRangeDetail"),R()(YA,"validInfo","validInfo"),R()(YA,"validInfo_certify","validInfo_certify"),R()(YA,"invalidInfo","invalidInfo"),R()(YA,"invalidInfo_certify","invalidInfo_certify"),R()(YA,"validityUnknownInfo","validityUnknownInfo"),qA={},R()(qA,"unknown","verifyUnknown"),R()(qA,"verifyNoChange","verifyNoChange_online"),R()(qA,"verifyNoChange_certify","verifyNoChange_certify"),R()(qA,"verifyFuture","verifyFuture"),R()(qA,"verifyAlteredCorrupted","verifyAlteredCorrupted"),R()(qA,"verifyChange","verifyChange_online"),R()(qA,"verifyChange_certify","verifyChange_certify"),R()(qA,"noSupportFormat","noSupportFormat"),R()(qA,"noSupportHandler","verifyChange_certify"),R()(qA,"e_StateVerifyChangeLegal","changeLegal"),R()(qA,"e_StateVerifyChangeIllegal","changeIllegal"),GA={},R()(GA,"unknown","issueUnknown"),R()(GA,"issuerInvalid_mac","issuerInvalid_mac"),R()(GA,"issuerInvalid","issuerInvalid"),R()(GA,"issuerRevoke","issuerRevoke"),R()(GA,"issuerExpire_mac","issuerExpire_mac"),R()(GA,"issuerExpire","issuerExpire"),R()(GA,"issuerCurrent","issuerCurrent"),R()(GA,"issuerCurrent_certify","issuerCurrent_certify"),R()(GA,"issuerValid","issuerValid"),R()(GA,"issuerValidAndIssueRevoke","issuerValidAndIssueRevoke"),R()(GA,"issuerIdentityUnknown","issuerIdentityUnknown"),R()(GA,"identityValidAndUntrustedMsg","identityValidAndUntrustedMsg"),R()(GA,"notVerifiedIdentityMsg","notVerifiedIdentityMsg"),R()(GA,"e_StateVerifyIssueUnknown","issueUnknown"),R()(GA,"e_StateVerifyIssueUncheck","issueUncheck"),zA={},R()(zA,"unknown","timestampUnknown"),R()(zA,"timestampExpire","timestampExpire_online"),R()(zA,"timestampDoc","timestampDoc_online"),R()(zA,"timestampNone","timestampNone_online"),R()(zA,"timestampEmbeddedAndExpire","timestampEmbeddedAndExpire"),R()(zA,"timestampEmbeddedAndExpire_mac","timestampEmbeddedAndExpire_mac"),R()(zA,"timestampEmbedded","timestampEmbedded"),R()(zA,"timestampEmbedded_mac","timestampEmbedded_mac"),R()(zA,"timestampEmbeddedAndNotBeVerified","timestampEmbeddedAndNotBeVerified"),R()(zA,"timestampSecure","timestampSecure"),R()(zA,"e_StateVerifyTimestampIssueUnknown","timestampIssueUnknown");function KA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function JA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?KA(Object(n),!0).forEach((function(e){R()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var XA="notYetVerified",ZA="verified";function QA(){return be(new Date,"YYYY.MM.DD HH:mm:ssZ",{separator:"'",suffix:"'"})}function tP(t){var e=[];if(t){var n=t.getPDFForm();if(n){var r=n.fields;r.length&&(e=r.filter((function(t){return t.getType()===Ln.Sign})))}}return e}function eP(t){var e=!1,n=tP(t);return n.length&&(e=n.some((function(t){return t.signatureInfo&&t.signatureInfo.isSigned&&t.signatureInfo.isCertified}))),e}function nP(t){var e=!1,n=tP(t);return n.length&&(e=n.some((function(t){return t.signatureInfo&&t.signatureInfo.isSigned&&!t.signatureInfo.isCertified}))),e}function rP(t){var e=t.customs&&t.customs.getVerifySignatureRule?t.customs&&t.customs.getVerifySignatureRule:void 0,n="function"==typeof e?e():{},r=n.is_verify_signature,i=void 0===r||r,o=n.use_expired_tst,a=void 0===o||o,s=n.ignore_doc_info,c=void 0!==s&&s,u=n.time_type,d=void 0===u?0:u,l=n.verifyDocWhenOpened,h=void 0===l||l,f=n.untrustedAlterInfo;return{is_verify_signature:i,use_expired_tst:a,ignore_doc_info:c,time_type:d,verifyDocWhenOpened:h,untrustedAlterInfo:void 0!==f&&f}}var iP="uniqueSerialNumber",oP=!1,aP=[{indexKey:"type"},{indexKey:"serialNumber"}],sP="Custom",cP="FATL",uP="EUTL",dP=function(){return new Kl("TrustedCertificateList","FoxitPDFSDKForWeb_TrustedCertificateList",1,iP,aP)};function lP(t){return hP.apply(this,arguments)}function hP(){return(hP=D()(N.a.mark((function t(e){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=dP())){t.next=12;break}return t.prev=2,t.next=5,n.add(e);case 5:return t.abrupt("return",!0);case 8:return t.prev=8,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",!1);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}function fP(t){return pP.apply(this,arguments)}function pP(){return(pP=D()(N.a.mark((function t(e){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=dP())){t.next=5;break}return t.next=5,n.remove(e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function gP(t){return vP.apply(this,arguments)}function vP(){return(vP=D()(N.a.mark((function t(e){var n,r,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=dP())){t.next=11;break}r=0;case 4:if(!(r<e.length)){t.next=11;break}return i=e[r],t.next=8,n.remove(i);case 8:r++,t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function mP(){return oP}function yP(t){return wP.apply(this,arguments)}function wP(){return(wP=D()(N.a.mark((function t(e){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(mP()){t.next=3;break}return t.next=3,bP(e);case 3:if(n=dP()){t.next=6;break}return t.abrupt("return",[]);case 6:return t.prev=6,t.next=9,n.getAll();case 9:if(t.t0=t.sent,t.t0){t.next=12;break}t.t0=[];case 12:return r=t.t0,t.abrupt("return",r);case 16:return t.prev=16,t.t1=t.catch(6),console.error(ex),t.abrupt("return",[]);case 20:case"end":return t.stop()}}),t,null,[[6,16]])})))).apply(this,arguments)}function bP(t){return AP.apply(this,arguments)}function AP(){return(AP=D()(N.a.mark((function t(e){var n,r,i,o,a,s=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]&&s[1],!mP()||n){t.next=3;break}return t.abrupt("return");case 3:return oP=!1,t.prev=4,t.next=7,EP(e,n);case 7:if(!(r=t.sent).length){t.next=24;break}if(!(i=dP())){t.next=24;break}return t.next=13,i.getByIndex("type",sP);case 13:if(t.t0=t.sent,t.t0){t.next=16;break}t.t0=[];case 16:return o=t.t0,t.next=19,i.clear();case 19:return(a=r.concat(o)).forEach((function(t){var e=t||{},n=e.serialNumber,r=e.country,i=e.issuerName;t[iP]="".concat(n,"_").concat(r,"_").concat(i)})),t.next=23,i.addItems(a);case 23:oP=!0;case 24:t.next=30;break;case 26:t.prev=26,t.t1=t.catch(4),oP=!1,console.error(t.t1);case 30:return t.prev=30,sessionStorage.setItem("isFATLAndEUTLListInit",oP),t.finish(30);case 33:case"end":return t.stop()}}),t,null,[[4,26,30,33]])})))).apply(this,arguments)}function PP(t){return t.endsWith("/")||(t+="/"),{static_FATLUrl:{url:"".concat(t,"certFATLAndEUTL/tsfile.foxitdata1"),trust_type:1,type:cP},static_EUTLUrl:{url:"".concat(t,"certFATLAndEUTL/eutlfile.foxitdata1"),trust_type:2,type:uP}}}function EP(t){return xP.apply(this,arguments)}function xP(){return(xP=D()(N.a.mark((function t(e){var n,r,i,o,a,s,c,u=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],t.prev=1,r=PP(e.libPath),i=r.static_FATLUrl,o=r.static_EUTLUrl,a=[i,o],t.next=6,e.getWebPDFJR();case 6:return s=t.sent,t.next=9,s.getFATLAndEUTLList(a,n);case 9:return c=t.sent,t.abrupt("return",Promise.resolve(c));case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",Promise.resolve([]));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function SP(t,e,n,r){return CP.apply(this,arguments)}function CP(){return(CP=D()(N.a.mark((function t(e,n,r,i){var o,a,s,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.getName(),a=rP(e),s=R()({},o,!!n.signatureInfo&&n.signatureInfo.isCertified),t.next=5,yP(e);case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0=[];case 8:return c=t.t0,a=JA(JA({},a),{},{trustedCertificateList:c,isCertTrusted:r,isCertTrustedRoot:i,isCertifiedMap:s}),t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function DP(t,e){return IP.apply(this,arguments)}function IP(){return(IP=D()(N.a.mark((function t(e,n){var r,i,o,a,s,c,u,d,l,h=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:{},i=r.isCertTrusted,o=r.isCertTrustedRoot,a=n.getName(),s={},c={},t.prev=4,t.next=7,SP(e,n,i,o);case 7:return u=t.sent,t.next=10,n.Verify(u);case 10:return s=t.sent,t.next=13,n.getDigitalSignatureInfo(u.trustedCertificateList,!1);case 13:c=t.sent,t.next=21;break;case 16:t.prev=16,t.t0=t.catch(4),console.error(t.t0),s={},c={};case 21:return(d=s[a]?s[a]:{}).checkTime=QA(),l=JA(JA(JA({},n.signatureInfo),c),d),n.signatureInfo.status===XA&&(n.signatureInfo.status=ZA,l.status=ZA),t.abrupt("return",{name:a,signatureInfo:l});case 26:case"end":return t.stop()}}),t,null,[[4,16]])})))).apply(this,arguments)}Date.now(),Math.random();var RP,TP=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";t.endsWith("/")||(t+="/"),e=e.replace(/(\w*?)-(\w*)/,(function(t,e,n){return e+"-"+n.toUpperCase()}));var n=["Static","SignHere","Dynamic"];return function(n,r,i){var o;return o={},R()(o,i,{Approved:{url:"".concat(t,"stamps/").concat(e,"/DynamicStamps/Approved.pdf"),fileType:"pdf"},Revised:{url:"".concat(t,"stamps/").concat(e,"/DynamicStamps/Revised.pdf"),fileType:"pdf"},Reviewed:{url:"".concat(t,"stamps/").concat(e,"/DynamicStamps/Reviewed.pdf"),fileType:"pdf"},Received:{url:"".concat(t,"stamps/").concat(e,"/DynamicStamps/Received.pdf"),fileType:"pdf"},Confidential:{url:"".concat(t,"stamps/").concat(e,"/DynamicStamps/Confidential.pdf"),fileType:"pdf"}}),R()(o,r,{Accepted:{url:"".concat(t,"stamps/").concat(e,"/SignHere/Accepted.pdf"),fileType:"pdf"},Witness:{url:"".concat(t,"stamps/").concat(e,"/SignHere/Witness.pdf"),fileType:"pdf"},SignHere:{url:"".concat(t,"stamps/").concat(e,"/SignHere/SignHere.pdf"),fileType:"pdf"},Rejected:{url:"".concat(t,"stamps/").concat(e,"/SignHere/Rejected.pdf"),fileType:"pdf"},Initial:{url:"".concat(t,"stamps/").concat(e,"/SignHere/Initial.pdf"),fileType:"pdf"}}),R()(o,n,{Approved:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Approved.pdf"),fileType:"pdf"},Void:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Void.pdf"),fileType:"pdf"},Verified:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Verified.pdf"),fileType:"pdf"},Revised:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Revised.pdf"),fileType:"pdf"},Reviewed:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Reviewed.pdf"),fileType:"pdf"},Received:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Received.pdf"),fileType:"pdf"},Final:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Final.pdf"),fileType:"pdf"},Expired:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Expired.pdf"),fileType:"pdf"},Emergency:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Emergency.pdf"),fileType:"pdf"},Draft:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Draft.pdf"),fileType:"pdf"},Confidential:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Confidential.pdf"),fileType:"pdf"},Completed:{url:"".concat(t,"stamps/").concat(e,"/StandardStamps/Completed.pdf"),fileType:"pdf"}}),o}.apply(void 0,n)},_P=(n(462),n(461),n(158)),kP=window.MozWebSocket||window.WebSocket,FP=function(){},MP=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.origin;this.websocketServer=t,this.apiServer=e,this.messageReceiver=FP,this.closeEventListener=FP,this.websocketServer=t.trim(),this.apiServer=e.trim()}var e=t.prototype;return e.isConnected=function(){if(this.socket){switch(this.socket.readyState){case kP.OPEN:return Promise.resolve(!0);case kP.CLOSED:case kP.CLOSING:return Promise.resolve(!1)}return this.connectStatusDefer.promise}return Promise.resolve(!1)},e.connect=function(t){var e,n=this;if(this.socket)switch(this.socket.readyState){case kP.CLOSED:case kP.CLOSING:break;default:this.socket.onclose=null,this.socket.close()}return this.connectStatusDefer=z(),this.socket=new kP(oc(this.websocketServer,"collab-ws/ws")+"?shareId="+t),this.socket.onmessage=function(t){"\n"!==t.data&&n.messageReceiver(t.data)},this.socket.onclose=function(){n.closeEventListener(),clearInterval(e)},this.socket.onopen=function(){e=setInterval((function(){n.socket.send("\t")}),1e4),n.connectStatusDefer.resolve(!0)},this.socket.onerror=function(){n.connectStatusDefer.resolve(!1)},this.connectStatusDefer.promise},e.disconnect=function(){return this.socket.onclose=null,this.socket.close(),Promise.resolve(!0)},e.createSession=function(t,e){var n,r=oc(this.apiServer,"collab-ws","share"),i=new FormData;if(e.type===zy.FROM_FILE){var o=e.file;o instanceof Blob||(o=new Blob([o],{type:"application/pdf"})),i.append("file",o,e.options.fileName),n=JSON.stringify(e,(function(t,e){if("file"!==t)return e}))}else n=JSON.stringify(e);return i.append("open-file-params",n),fetch(r,{method:"POST",body:i}).then((function(t){return t.json()})).then((function(t){return t.shareId}))},e.getSessionInfo=function(t){return fetch(oc(this.apiServer,"collab-ws/session/",t)).then((function(t){var e=t.headers.get("session-info");if("null"!==e&&e){var n=JSON.parse(decodeURIComponent(e)),r=n.openFileParams;return r.type===zy.FROM_FILE?t.blob().then((function(t){return r.file=t,n})):n}}))},e.send=function(t,e){return this.socket&&this.socket.send(e),Promise.resolve()},e.getLostData=function(t,e){var n=oc(this.apiServer,"collab-ws","data",t,""+e);return fetch(n).then((function(t){return t.json()}))},e.registerMessageReceiver=function(t){this.messageReceiver=t},e.registerLostConnectionListener=function(t){this.closeEventListener=t},e.destroy=function(){this.socket&&this.socket.close()},t}();!function(t){t.EndPoint="end-point",t.MidPoint="mid-point",t.IntersectionPoint="intersection-point",t.NearestPoint="nearest-point"}(RP||(RP={}));var OP=function(t){function e(){var e;return(e=t.call(this)||this).calloutShape=new Il,e.addDestroyHook((function(){e.calloutShape.hide()})),e}O()(e,t);var n=e.prototype;return n.prepare=function(t){this.pageRender=t;var e=t.$handler.find(".fv__create-callout-canvas")[0];e?this.shapeDom=e:(this.shapeDom=document.createElement("canvas"),this.shapeDom.style.cssText+="position: absolute",this.shapeDom.classList.add("fv__create-callout-state-canvas"),t.$handler.append(this.shapeDom))},n.start=function(t){this.startPoint=t},n.update=function(t,e){var n;if(this.startPoint&&this.pageRender&&this.shapeDom){var r=this.pageRender,i=r.page,o=Ml.calcCalloutPosition(A()({start:[this.startPoint.x,this.startPoint.y],end:[t.x,t.y],page:i,width:i.getMediaWidth(),height:i.getMediaHeight(),borderStyle:{style:0},endingStyle:0,scale:r.scale,rotate:r.rotate},e||{}));if(o&&!o.invalid){var a=(null===(n=o.calloutLinePoints)||void 0===n?void 0:n.map((function(t){var e=t.x,n=t.y;return i.getDevicePoint([e,n],r.scale,r.rotate)})))||[],s=i.getDeviceRect(o.rect,r.scale,r.rotate),c=i.getDeviceRect(o.innerRect,r.scale,r.rotate);Da(this.shapeDom,{left:s.left+"px",top:s.top+"px"}),this.calloutShape.init(null,this.shapeDom),this.calloutShape.show(a,s,c),this.annotInfo=o}}},n.complete=function(){var t=this,e=this.pageRender;if(!e)return Promise.reject(new Error("[CreateFreeTextCalloutService] not prepared!"));if(!this.annotInfo)return Promise.reject(new Error("[CreateFreeTextCalloutService] Cannot create callout before mouse moved!"));this.calloutShape.hide(),this.startPoint=void 0;var n=e.pdfViewer;return e.getPDFPage().then((function(r){var i=n.getAnnotDefaultProperty("freetext","FreeTextCallout"),o=16777215;void 0!==i.fillColor&&(o=i.fillColor);var a=A()({},{type:"freetext",intent:"FreeTextCallout",subject:n.i18n.t("viewer_:annotSubjects.Callout"),"interior-color":o,rotation:((360-90*r.getRotation()-e.getRotation())%360+360)%360,flags:4},t.annotInfo,i);return r.addAnnot(a)})).then((function(t){var r,i=t[0],o=null===(r=e.annotsRender)||void 0===r?void 0:r.getAnnotRender(i.getId()).component;return n.eventEmitter.emit(Ct.addAnnotSuccess,o.annot),t}))},e}(vt.a),LP=lo.or,NP=lo.Enter,VP=lo.Space;var BP=2,UP=10,jP=function(t){function e(e){var n;return(n=t.call(this,e)||this).multipage=BP,n.pageSpacing=UP,n.isJump=!1,n.isCurrentViewMode=!0,n}O()(e,t),e.getName=function(){return"multipage-view-mode"},e.setMultipage=function(t){BP=t},e.getMultipage=function(){return BP},e.setPageSpacing=function(t){UP=t},e.getPageSpacing=function(){return UP};var n=e.prototype;return n.getJQItems=function(){return B()(t.prototype.getItems.call(this))},n.into=function(e,n){var r=this;this.isCurrentViewMode=!0;var i=(this.docRender.viewerRender.scrollWrap.getWidth()-this.pageSpacing*(this.multipage+1))/this.multipage;n.forEach((function(t,e){var n=r.docRender.getPDFPageRender(e);parseFloat(n.$ui.css("width"))&&n.page&&n.$ui.css({"max-width":i+"px"})})),t.prototype.into.call(this,e,n);for(var o=this.constructor.getName(),a="",s=1;s<=this.multipage;s++)a=s%2==0?(a=a+"."+o+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+s+") {justify-self: start;}")+".facing-cover-continuous-view-mode."+o+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+s+") {justify-self: end;}":(a=a+o+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+s+") {justify-self: end;}")+".facing-cover-continuous-view-mode."+o+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+s+") {justify-self: start;}",s%this.multipage==0&&(a=a+".facing-cover-continuous-view-mode."+o+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+s+") {justify-self: end;}");var c=["<style>","."+o+" {","margin: 0 auto;","width: min-content;","display: grid;","grid-template-columns: repeat("+this.multipage+", 1fr);","justify-items: end;","}","."+o+".facing-cover-continuous-view-mode::before {",'content: "";',"width: calc("+100/this.multipage+"%);","}","."+o+"::after {",'content: "";',"width: -webkit-fill-available;","}","."+o+" .fv__pdf-view-mode-item {","display: -webkit-box;","display: -ms-flexbox;","display: -webkit-flex;","display: flex;","-ms-flex-pack: center;","-ms-flex-align: center;","-ms-justify-content: flex-end;","-webkit-justify-content: flex-end;","justify-content: flex-end;","align-items: center;","margin-left: 0;","}",a,"."+o+" .fv__pdf-view-mode-item {","margin-right: "+this.pageSpacing+"px;","}","."+o+" .fv__pdf-page-layout{","width: 100%;","}","</style>"].join("");this.$style=B()(c),this.docRender.$container.after(this.$style),this.docRender.$container.addClass(this.constructor.getName())},n.bindScrollEvent=function(){var t=this;if(this._unwatchScrollEvent&&this._unwatchScrollEvent(),this.docRender){var e=this.docRender.viewerRender.scrollWrap,n=!1,r=e.addScrollEventListener((function(){clearTimeout(t.scrollEventTimer),t.scrollEventTimer=setTimeout((function(){if(!n){var e=t.docRender;if(e){t.isJump=!1;var r=e.pagesRender;r&&r.renderVisiblePages().then((function(){e.isGoto?setTimeout((function(){t.isCurrentViewMode&&(e.isGoto=!1)}),40):e.setCurrentPageIndex(t.getCurrentPageIndex())}),(function(){}))}}}),100)}));this._unwatchScrollEvent=function(){n=!0,t._unwatchScrollEvent=function(){},r()}}},n.out=function(){this.isCurrentViewMode=!1,this.docRender.$container.removeClass(this.constructor.getName()),this.docRender.pagesRender.$ui.removeAttr("style"),this.$style&&this.$style.remove(),this._unwatchScrollEvent&&this._unwatchScrollEvent(),this.getJQItems().css({width:"",height:""});var e=this.docRender.pagesRender.pageRenders;for(var n in e){e[n].$ui[0].style.maxWidth=null}t.prototype.out.call(this)},n.renderViewMode=function(t,e,n,r,i){if(this.docRender){t.$ui.css({"max-width":""});var o=this.getMaxPageWidth(),a=this.multipage,s=(a-1)*this.pageSpacing;this.docRender.pagesRender.$ui.css({width:o*a*e+s})}},n.getPagesLayout=function(){for(var t=this.docRender.doc.pageCache,e=t.length,n=this.multipage,r=Math.ceil(e/n),i=Array(n).fill(0),o=Array(r).fill(0),a=0;a<n;a++)for(var s=a;s<e;s+=n)i[a]=Math.max(i[a],t[s].getPxWidth());for(var c=0;c<r;c++)for(var u=0;u<n;u++)t[c*n+u]&&(o[c]=Math.max(o[c],t[c*n+u].getPxHeight()));var d=[];return t.forEach((function(t,e){d.push({width:i[e%n],height:o[Math.floor(e/3)]})})),d},n.getMaxPageWidth=function(){var t,e=0,n=this.docRender.doc.getPageSizesSync(),r=this.docRender.getRotation();for(var i in t=90===r||270===r?"height":"width",n){var o=4*n[i][t]/3;o>e&&(e=o)}return e},n.getFitHeight=function(t){var e=this.docRender.viewerRender.scrollWrap;return e.getHeight()-e.getScrollOffsetTop()},n.getFitWidth=function(t){var e=this.getMaxPageWidth(),n=this.docRender.viewerRender.scrollWrap,r=this.multipage,i=(n.getWidth()-16-r*this.pageSpacing)/r,o=this.docRender.doc.getPageSize(t);o||(o=this.docRender.doc.getPageSize(0));var a=this.docRender.getRotation();return i*(o?90===a||270===a?o.height:o.width:90===a||270===a?this.getFitHeight(t):i)*4/(3*e)},n.jumpToPage=function(t,e){var n=this,r=e.x,i=void 0===r?0:r,o=e.y,a=void 0===o?0:o;this.isJump=!0;var s=this.getJQItems();t>=s.length?t=s.length-1:t<0&&(t=0);var c=s.eq(t),u=c.position().left+i,d=c.position().top+a;this._unwatchScrollEvent&&this._unwatchScrollEvent(),this.docRender.viewerRender.scrollWrap.scrollTo(u,d),this.currentJumpPageIndex=t,this.docRender.setCurrentPageIndex(t),setTimeout((function(){n.isCurrentViewMode&&n.bindScrollEvent()}))},n.getCurrentPageIndex=function(){if(this.isJump)return this.currentJumpPageIndex;for(var t,e=this.getJQItems(),n=this.docRender.viewerRender.scrollWrap,r=n.getScrollTop(),i=r+n.getHeight(),o=n.getScrollLeft(),a=o+n.getWidth(),s=[],c=0;c<e.length;c++){var u=e[c],d=B()(u).width(),l=B()(u).height(),h=u.offsetTop,f=h+l,p=u.offsetLeft,g=p+d,v=void 0;if(h<=r&&f>r&&f<i?v=f-r:h>=r&&f<i?v=l:h<=r&&f>i?v=i-r:h>=r&&h<i&&f>i&&(v=i-h),v){var m=void 0;p<=o&&g>o&&g<a?(m=g-o,s.push({index:c,area:v*m})):p>=o&&g<a?(m=d,s.push({index:c,area:v*m})):p<=o&&g>a?(m=a-o,s.push({index:c,area:v*m})):p>=o&&p<a&&g>a&&(m=a-p,s.push({index:c,area:v*m}))}}for(var y=0,w=0;w<s.length;w++)s[w].area>y&&(y=s[w].area,t=s[w].index);return t},n.getNextPageIndex=function(){var t=this.docRender.doc.getPageCount(),e=this.getCurrentPageIndex();if(e<t-1){var n=this.docRender.viewerRender.scrollWrap,r=this.docRender.pagesRender.$ui.width(),i=n.getWidth()-16,o=this.multipage;if(i>=r)e=Math.ceil((e+1)/o)*o;else e++}return e>t-1&&(e=t-1),e},n.getPrevPageIndex=function(){var t=this.getCurrentPageIndex();if(t>0){var e=this.docRender.viewerRender.scrollWrap,n=this.docRender.pagesRender.$ui.width(),r=e.getWidth()-16,i=this.multipage;if(r>=n)t=(Math.ceil((t+1)/i)-2)*i;else t--}return t<0&&(t=0),t},e}(La);n(459);
/**!
 * Dragable 拖拽排序插件
 * 
 * option = {
 * 	 draggable: '', // [必填] 允许拖拽的节点类名
 * 	 dragClass: '', // 正在被拖拽中的css类名
 * 	 chosenClass: '', // 被选中项的css 类名
 *   dragOverStrict: true, // 是否严格的dragover事件源, true: 事件源始终是 draggable参数指向的dom, false: 可以是当前拖拽经过的任何子节点
 *   endStrict: true, // onEnd将判断from和to是否为同一个dom,true：同一dom将不调用onEnd false: 不判断，onEnd都会调用
 *   inventedNode: null, // 自定义虚拟节点，null则使用默认，处于第一位
 * 	 onStart: '', // 拖拽开始事件
 *   onHover: '', // 拖拽悬停事件
 *   onEnd: ''// 拖拽结束事件
 * }
 * 
 * 注意：可拖拽的节点尽量不要使用a标签，在IE下兼容不好
 */var HP=n(21).isTouchDevice;var WP=function(t){if("undefined"==typeof window||!window.document)return function(){throw new Error(t+".js requires a window with a document")};var e={add:function(t,n,r,i){e._eventFun=function(t){r&&r.call(i,t)},t.addEventListener(n,e._eventFun,!1)},remove:function(t,n){t.removeEventListener(n,e._eventFun,!1),e._eventFun=void 0}};Node.prototype.parents=function(t){var e=this.parentNode;return this.classList.contains(t)||"BODY"===e.nodeName?this:e.parents(t)},Node.prototype.hasChildren=function(t){for(var e=t;e;){if(this===e)return!0;e=e.parentNode}return!1};var n=function(t,e){if(t){var n={};if(t.dataset)n=t.dataset;else for(var r=0;r<t.attributes.length;r++){var i=t.attributes[r];if(0===i.name.indexOf("data-")){var o=i.name.replace("data-",""),a=i.value;n[o]=a}}for(var o in e){a=e[o];t.dataset?t.dataset[o]=a:t.setAttribute("data-"+o,a)}return n}};function r(e,n){if(this.options=A()({draggable:"",dragClass:t+"-drag",chosenClass:t+"-chosen",treeItemIconClass:"tree-item-icon",dragOverStrict:!0,endStrict:!0,inventedNode:null,onStart:"",onHover:"",onEnd:"",allowDrag:!0,excludeDraggable:"",enabled:!0},n),!e)throw new Error("el must be a dom node: "+e);if(!this.options.draggable)throw new Error("draggable class cannot be a empty string: "+this.options.draggable);this.options.enabled&&(this.el=e,this._bindEvent(),this._appendStyle(),this._cache={overData:[],doms:[]})}return"function"!=typeof Object.assign&&(Object.prototype.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),r.prototype={_addClass:function(t,e,n){n&&this._removeClass(e,t),t.classList.add(e)},_removeClass:function(t,e){var n=this;(t=t instanceof Array?t:[t]).forEach((function(t){for(var r=n.el.querySelectorAll("."+t),i=0;i<r.length;i++){var o=r[i];e&&o===e||o.classList.remove(t)}}))},_initDragEvent:function(t){if(t){var e=this;t.draggable=this.options.allowDrag,t.ondragstart=function(t){e.options.enabled?e._onDragstart.call(e,t.target):t.preventDefault()},t.ondragover=function(t){t.preventDefault(),e.options.enabled&&e._onDragover.call(e,t.target)},t.ondragenter=function(t){t.stopPropagation(),e.options.enabled&&e._onDragenter.call(e,t.target)},t.ondragleave=function(t){e.options.enabled&&e._onDragleave.call(e,t.target)},t.ondragend=function(t){e.options.enabled&&e._onDragend.call(e,t.target)},t.ondrop=function(t){t.stopPropagation(),t.preventDefault(),e.options.enabled&&e._onDrop.call(e,{target:t.target,files:t.dataTransfer.files,altKey:t.altKey,ctrlKey:t.ctrlKey})}}},_getDragImage:function(){var t=document.createElement("img");return t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",t.width=0,t.height=0,t.opacity=0,t},_setInventedNode:function(){var t=this.options.draggable;if(this._inventedNodeClassName="_"+t,!this.el.querySelector("."+this._inventedNodeClassName)){var e=this.options.inventedNode;if(e)e.classList.add(t),e.classList.add(this._inventedNodeClassName),this._initDragEvent(e),this.el.insertBefore(e,this.el.lastChild.nextSibling);else{e=document.createElement("div");var r=this.el.querySelectorAll("."+t)[0].getBoundingClientRect();e.style.position="fixed",e.style.width=r.width+"px",e.style.height=parseInt(r.height/2)+"px",e.style.top=r.top+"px",e.style.left=r.left+"px",e.style.transform="rotateZ(180deg)",e.style.borderWidth="1px",e.style.overflow="hidden",e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.zIndex="999",n(e,{id:"-1"}),e.classList.add(t),e.classList.add(this._inventedNodeClassName),this._initDragEvent(e),this.el.insertBefore(e,this.el.childNodes[0])}}},_removeInventedNode:function(){var t=this.el.querySelector("."+this._inventedNodeClassName);t&&(t.remove?t.remove():t.removeNode(!0))},_isTopest:function(t){var e=this.el.getBoundingClientRect();return t.clientY-e.y<12},_bindEvent:function(){var t=this;e.add(this.el,"pointerdown",this._setDraggable,this);var r=function(e){var n,r;if(e instanceof TouchEvent){var i=e.changedTouches||e.touches;if(1!==i.length)return;var o=i[0];n=o.clientX,r=o.clientY}else"clientX"in e&&(n=e.clientX,r=e.clientY);return document.elementFromPoint(n,r).closest("."+t.options.draggable)};if(HP){var i,o,a=!1,s=function(e){if(t.options.enabled){var n=r(e);n&&(i=n,o=null,a=!0,document.addEventListener("pointerup",(function(e){a=!1,t.end=o,t._onDragend()}),{once:!0,capture:!0}),t._onDragstart.call(t,n),e.preventDefault())}},c=function(e){if(a){e.preventDefault();var s=r(e);if(!s)return o=s,void(t.options.onHover&&t.options.onHover({dom:s}));s!==i&&(o!==s&&(s&&(t._onDragenter.call(t,s),setTimeout((function(){t.end=s,t.setBlwAndBrw(s),t._addClass(s,t.options.chosenClass);var e=A()(n(s),{text:s.innerText.trim()});t.options.onHover&&s!==t.from&&t.options.onHover({dom:s,attrs:e})}))),o&&t._onDragleave.call(t,o)),s&&s.ondragover(e)),o=s}else o=void 0};this.el.addEventListener("pointerdown",s,{capture:!0,passive:!1}),this.el.addEventListener("touchmove",c,{capture:!0,passive:!1}),this.unbindEventOnDocument=function(){t.el.removeEventListener("pointerdown",s,{capture:!0,passive:!1}),t.el.removeEventListener("mousemove",c,{capture:!0,passive:!1})}}},_appendStyle:function(){this._style=document.createElement("style"),document.head.appendChild(this._style)},_setDraggable:function(t){var e;this.options.draggable.trim()&&(e=this.el.querySelectorAll("."+this.options.draggable)),e&&0!==e.length||(e=this.el.children);for(var n=0;n<e.length;n++){var r=e[n];this._initDragEvent(r)}if(this._cache.doms=e,this.options.excludeDraggable){var i=this.el.querySelectorAll("."+this.options.excludeDraggable)||[];for(n=0;n<i.length;n++){(r=i[n]).draggable=!1}}},_onDragstart:function(t){var e=this;setTimeout((function(){e._setInventedNode()}),0),this._addClass(t,this.options.dragClass,!0),this.end=null,this.from=t;var r=t.parents(this.options.draggable);this.fromAttrs=A()(n(r),{text:r.innerText.trim()}),this.options.onStart&&this.options.onStart({dom:this.from,attrs:this.fromAttrs})},_onDragover:function(t){var e=this._getTarget(t);if(this.end=e,this.setBlwAndBrw(t),this._addClass(e,this.options.chosenClass),-1===this._cache.overData.indexOf(e)&&(this._cache.overData=[]),this._cache.overData.push(e),20===this._cache.overData.length){var r=A()(n(e),{text:e.innerText.trim()});this.options.onHover&&e!==this.from&&this.options.onHover({dom:e,attrs:r})}},_onDragenter:function(t){var e=this._getTarget(t);this.end=e,this._addClass(e,this.options.chosenClass,!0),this.setBlwAndBrw(t)},_getTarget:function(t){var e=this.options.dragOverStrict?t.parents(this.options.draggable):t;return"#text"===e.nodeName&&(e=e.parentNode),e},setBlwAndBrw:function(){var t;(t=!this.options.dragOverStrict&&this.end.classList.contains(this.options.treeItemIconClass))?(this.end.style.setProperty("--blw","0"),this.end.style.setProperty("--brw","2px")):(this.end.style.setProperty("--blw","2px"),this.end.style.setProperty("--brw","0")),this.isMoveToRight=t},_onDragleave:function(t){this._removeClass(this.options.chosenClass),this.end=null,this._cache.overData=[],this.options.onHover&&this.options.onHover({dom:null})},_onDrop:function(t){var e=t.target,r=t.files,i=t.altKey,o=t.ctrlKey,a=this.end,s=a&&a.parents(this.options.draggable),c=s&&A()(n(s),{text:s.innerText.trim()}),u=this.isMoveToRight;this.options.onDrop&&this.options.onDrop({endAttrs:c,dragFiles:r,isMoveToRight:u,target:e}),e.querySelector("."+this.options.chosenClass)||(this.end.altKey=i,this.end.ctrlKey=o)},_onDragend:function(){this._cache.overData=[],this._removeClass([this.options.chosenClass]),this._removeInventedNode();var t=this.end,e=t&&t.parents(this.options.draggable),r=e&&A()(n(e),{text:e.innerText.trim()});e===this.from&&this.options.endStrict||this.options.onEnd&&this.options.onEnd({from:this.from,fromAttrs:this.fromAttrs,end:t,endAttrs:r})},destory:function(){e.remove(this.el,"pointerdown"),document.head.removeChild(this._style),this._cache.doms.forEach((function(t){t.removeAttribute("draggable"),t.ondragstart=null,t.ondragover=null,t.ondragenter=null,t.ondragleave=null,t.ondragend=null,t.ondrop=null})),this._cache=null},destroy:function(){this.options.enabled&&this.destory()}},r.create=function(t,e){return new r(t,e)},r.version="1.0.0",r}("Draggable"),$P={cipherNone:0,cipherRC4:1,cipherAES:2},YP={ZoomXYZ:"ZoomXYZ",ZoomFitPage:"ZoomFitPage",ZoomFitHorz:"ZoomFitHorz",ZoomFitRect:"ZoomFitRect"},qP={ThreadAction:Si,ResetFormAction:mi,URIAction:li,JavaScriptAction:gi,HideAction:Ai,GoToAction:bi,SubmitFormAction:vi,LaunchAction:fi,ImportDataAction:yi,NamedAction:pi,SetOCGStateAction:Ci,ActionFactory:Di,ZoomMode:YP},GP=function(){function t(t){this.engine=t,this.api=t.api}var e=t.prototype;return e.combineFormsToCSV=function(t,e){return this.api.combineFormsToCSV(t,e)},e.destroy=function(){this.engine=null,this.api=null},t}(),zP=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.getTileConfig=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.pdfViewer.getSmartScale(t),r=this.pdfViewer.config.tileSize,i=this.page.getDeviceRect(this.pdfRect,1,e),o=this.page.getDeviceRect(this.pdfRect,n,e),a=o.right-o.left,s=o.bottom-o.bottom,c=Math.ceil(s/r),u=Math.ceil(a/r);return[c,u,a,s,r,n,t,e,i.left,i.top]},n.getRenderingData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,r=t.prototype.getRenderingData.call(this,e,n);return A()(r,{opacity:this.annotationInfo.opacity,tileConfig:this.getTileConfig(e,n)})},e}(function(){function t(t){this.pdfRect={left:0,right:0,top:0,bottom:0},this.deviceRect={left:0,right:0,top:0,bottom:0},this.annotationInfo=this.getDefaultAnnotInfo(),this.eContainer=document.createElement("div"),this.eContainer.classList.add("fv__viewer-fake-annot-container"),this.pdfViewer=t.pdfViewer,this.pageRender=t.pageRender,this.intent=t.info.intent,Object(zg.a)(this.annotationInfo,t.info,this.getDefaultAnnotConfig()),this.annotationInfo.type=this.getType(),this.page=t.pageRender.page,this.scale=t.pageRender.scale,this.rotate=t.pageRender.rotate,this.pageRender.$annotsContainer.append(this.eContainer)}var e=t.prototype;return e.setRect=function(t){this.deviceRect=t;var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top),r=ut(this.annotationInfo.borderInfo.width)*this.scale*2;if(e<r){var i=.5*(r-e)*(t.right-t.left>0?1:-1);t.right+=i,t.left-=i}if(n<r){var o=.5*(r-n)*(t.bottom-t.top>0?1:-1);t.top-=o,t.bottom+=o}e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);var a=this.pageRender.rotate;this.pdfRect=this.page.reverseDeviceRect(t,this.scale,a),this.eContainer.style.cssText+="\n            left: ".concat(t.left,"px;\n            top: ").concat(t.top,"px;\n            width: ").concat(e,"px;\n            height: ").concat(n,"px;\n        ")},e.setContent=function(t){this.annotationInfo.contents=t},e.zoomTo=function(t){this.scale=t},e.draw=function(){this.renderer||(this.renderer=this.generateApRenderer(),this.renderer.prepare(),this.renderer.willRender()),this.renderer.render(this.scale,this.rotate)},e.getContainerElement=function(){return this.eContainer},e.getRenderingData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scale,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotate,n=this.pdfViewer.getSmartScale(t),r=this.getDeviceRect(t,e),i=this.getOuterDeviceRect(t,e),o=this.getDeviceRect(n,e);return{annotInfo:this.annotationInfo,annotFlag:new Yo(this.annotationInfo.flags),smartScale:n,rect:i,outerDeviceRect:i,innerDeviceRect:r,engineRenderingRect:o,scale:t,rotate:e,page:this.page}},e.getDeviceRect=function(t,e){return this.page.getDeviceRect(this.pdfRect,t,e)},e.getOuterDeviceRect=function(t,e){var n=this.annotationInfo.borderInfo;if(n&&5===n.style){var r=this.pageRender.getContainerVisibleRect(),i=r.right-r.left,o=r.bottom-r.top,a=this.page.getDeviceRect(this.pdfRect,t,e),s=(i-(a.right-a.left))/2,c=(o-(a.bottom-a.top))/2;return{left:a.left-s,right:a.right+s,top:a.top-c,bottom:a.bottom+c}}return this.page.getDeviceRect(this.pdfRect,t,e)},e.apply=function(){var t,e=this;null===(t=this.renderer)||void 0===t||t.afterRender();var n=this.getCreationJSON();return n.endingStyle&&(n.endStyle=n.endingStyle,delete n.endingStyle),n.rect=this.pdfRect,this.page.addAnnot(n).then((function(t){e.destroy();var n=t[0];return e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.eventEmitter.emit(Ct.addAnnotSuccess,n),t}))},e.destroy=function(){var t;null===(t=this.renderer)||void 0===t||t.destroy(),this.getContainerElement().remove()},e.getCreationJSON=function(){return this.annotationInfo},e.getDefaultAnnotInfo=function(){return{borderInfo:{width:2,style:Ht.BORDER_STYLE.SOLID},color:16711680,opacity:1,flags:4,date:new Date}},e.getDefaultAnnotConfig=function(){var t=this.pdfViewer.getDefaultAnnotConfig();return"function"==typeof t?t(this.getType(),this.getIntent()):{}},e.getIntent=function(){return this.intent},t}()),KP=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.getType=function(){return"square"},n.generateApRenderer=function(){return new Wu(this)},e}(zP),JP=function(t){function e(){return t.apply(this,arguments)||this}O()(e,t);var n=e.prototype;return n.getType=function(){return"circle"},n.generateApRenderer=function(){return new zu(this)},n.apply=function(){var e=this;return t.prototype.apply.call(this).then((function(t){return"CircleDimension"===e.annotationInfo.intent?e.page.getMeasureScaleRatio().then((function(n){if(n&&n.scale){var r=e.pdfViewer.getStore().getCurrentValue("measurementData"),i=function(){var t=localStorage.getItem("Measuring-KEY");if(t){var e=(t=JSON.parse(t)).label;return e?e+"\n":""}return""}(),o=Ki(r.displayUnit.name)?e.pdfViewer.i18n.t("measurement.units.".concat(r.displayUnit.name)):r.displayUnit.name;return t[0].setContent(i+parseFloat(r.area).toFixed(2)+" sq "+o).then((function(e){return t}))}return t})):t}))},e}(zP),XP=Ct,ZP=VA,QP={Hammer:Kr.a,EventEmitter:tc.a,jQuery:B.a},tE=QP,eE={browser:K,receiveImageBuffer:Xs,units:a,download:u,createClass:_P.a,DebounceAsyncTaskExecutor:It,ThrottleAsyncTaskExecutor:Ma,QueuedAsyncTaskExecutor:kt,areaSelections:p,cipherType:um,securityEncryptType:{Unknown:-1,None:0,Password:1,Certificate:2,FoxitDRM:3,Custom:4,RMS:5,CDRM:6},keyUsageType:{Unknown:-1,Signature:0,Encryption:1,SignatureAndEncryption:2},securityUtils:g,IndexDBCache:zl,IndexDBStore:Kl,fileUtils:v,FileFormat:f,activation:r,keyboardStatus:$t,getUnitByName:Ki,getClientX:Xr,getClientY:Zr,DebouncePromiseQueue:Ot,extendOptions:zg.a,convertFromNumberToHex:An,convertFromNumberToRGBA:En,colorConvertor:xn,standardColorAsARGBNumber:function(t){if(t<=16777215)return 4278190080+t;if(t>16777215)return t;if("string"==typeof t){if((t=t.replace("#","").trim()).match(/^[0-9A-F]{8}$/i))return parseInt(t,16);if(t.match(/^[0-9A-F]{6}$/i))return 4278190080+parseInt(t,16);if(t.match(/^rgb\(\d{1,3}(,\d{1,3}){2}\)$/i)){var e=t.split(/\D+/).map((function(t){return parseInt(t)})),n=S()(e,4);return 4278190080+(n[1]<<16)+(n[2]<<8)+n[3]}if(t.match(/^rgba\(\d{1,3}(,\d{1,3}){3}\)$/i)){var r=t.split(/\D+/).map((function(t){return parseInt(t)})),i=S()(r,5),o=i[1],a=i[2],s=i[3],c=i[4];return Math.floor(4278190080*c)+(o<<16)+(a<<8)+s}}throw new Error('incorrect color format: "'.concat(t,'"'))},CalloutPointsReviser:Ml,createDeferred:z,Store:ds.a,Disposable:vt.a,getAnnotThumbnail:function(t){t.endsWith("/")||(t+="/");var e="png";return{text:{url:"".concat(t,"annotThumbnail/Textbox_12.png"),type:e,width:12,height:12},freetext:{url:"".concat(t,"annotThumbnail/Typewriter_12.png"),type:e,width:12,height:12},line:{url:"".concat(t,"annotThumbnail/Line_12.png"),type:e,width:12,height:12},square:{url:"".concat(t,"annotThumbnail/Square Tool_12.png"),type:e,width:12,height:12},circle:{url:"".concat(t,"annotThumbnail/Ellipse Tool_12.png"),type:e,width:12,height:12},polygon:{url:"".concat(t,"annotThumbnail/Polygon Tool_12.png"),type:e,width:12,height:12},polyline:{url:"".concat(t,"annotThumbnail/Polygon Line Tool_12.png"),type:e,width:12,height:12},highlight:{url:"".concat(t,"annotThumbnail/Highlight Tool_12.png"),type:e,width:12,height:12},underline:{url:"".concat(t,"annotThumbnail/Underline Tool_12.png"),type:e,width:12,height:12},squiggly:{url:"".concat(t,"annotThumbnail/Squiggly Tool_12.png"),type:e,width:12,height:12},strikeout:{url:"".concat(t,"annotThumbnail/Strikeout Tool_12.png"),type:e,width:12,height:12},stamp:{url:"".concat(t,"annotThumbnail/Stamp_12.png"),type:e,width:12,height:12},caret:{url:"".concat(t,"annotThumbnail/Caret Tool_12.png"),type:e,width:12,height:12},ink:{url:"".concat(t,"annotThumbnail/Inksig_12.png"),type:e,width:12,height:12},fileattachment:{url:"".concat(t,"annotThumbnail/AttachAnnot_12.png"),type:e,width:12,height:12}}},getRanges:function(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){"number"==typeof e?t.push(e):t=t.concat(BA(e[0],e[1]))})),Array.from(new Set(t))},DebounceTaskExecutor:cs.a,debounce:cs.b,eraser:m,observeResize:function(t,e){if(window.ResizeObserver){var n=new ResizeObserver((function(){e()}));return n.observe(t),function(){n.disconnect()}}var r,i=!1,o=t.getBoundingClientRect();return r=setInterval((function(){if(!i){var n=t.getBoundingClientRect();n.width===o.width&&n.height===o.height||e(),o=n}}),100),function(){i=!0,clearInterval(r)}},throttle:function(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=0,c=function(){s=!1===a.leading?0:Date.now(),e=null,i=t.apply(n,r),e||(n=r=null)};function u(){var u=Date.now();s||!1!==a.leading||(s=u);var d=o-(u-s);return n=this,r=arguments,d<=0||d>o?(e&&(clearTimeout(e),e=null),s=u,i=t.apply(n,r),e||(n=r=null)):e||!1===a.trailing||(e=setTimeout(c,d)),i}return u.cancel=function(){clearTimeout(e),s=0,e=n=r=null},u},Draggable:WP,BuiltinIntersectionObserver:us,getDefaultStamps:TP},nE={CreateFreeTextCalloutService:OP},rE={LEVELS:fA,setLogLevel:pA.b,LoggerFactory:Ea.a},iE={IStateHandler:ys,HandStateHandler:Ms,StateHandlerConsts:o,StateHandlerUtils:{getDevicePagePoint:Ss,deltaDeviceRect:Ps,appendSelectMark:function(t,e){Es(t);for(var n=B()(document.createDocumentFragment()),r=0,i=e.length;r<i;r++){var o=e[r],a=["top:"+o.top+"px","left:"+o.left+"px","width:"+(o.right-o.left)+"px","height:"+(o.bottom-o.top)+"px"].join(";");n.append('<mark class="fv__mark-selection-blank" style="'+a+'"></mark>')}t.append(n)},removeSelectMark:Es,getBoundingPoint:As,getCaretRectAndRotate:xs}},oE={IViewMode:La,UsualViewModeShortcutHandler:cc,ViewModeShortcutHandler:Oa,MultipageViewMode:jP},aE={IFloatingTooltip:sv,IViewerUI:av,IContextMenu:ov,TinyViewerUI:Ev,TinyFloatingTooltip:vv,TextSelectionTool:hv},sE=aE,cE={constant:A()({Cipher_Type:$P,User_Permissions:Tn,DataEvents:St,AnnotUpdatedType:_n,ZoomMode:YP},i),actions:qP,common:{FileSpec:hi},annots:{constant:{Annot_Flags:kn,Annot_Type:du,Annot_Unit_Type:Mi,MARKUP_ANNOTATION_STATE:Ht.MARKUP_ANNOTATION_STATE},AnnotFlag:Yo},form:{constant:{Field_Flag:Nn,Field_Type:Ln}},HeaderFooter:ym,DataEvents:St,Error_Code:Ae,Matrix:J},uE={ViewerEvents:XP,STATE_HANDLER_NAMES:o,ANNOTATION_PERMISSION:Yd,OPEN_FILE_TYPE:zy,SNAP_MODE:RP},dE={BuiltinShortcutContext:Zo,BuiltinCommand:Xo,BuiltinShortcutCommand:Xo,Keyboard:Mg,KeyboardUtils:s,Shortcut:va,interceptors:c},lE={COLLABORATION_ACTION:$o,WebSocketCommunicator:MP},hE={PrintProgress:jy},fE=pt,pE={consts:{ADD_FONT_MAP_LIST:"font-map-list"},shared:{Lazy:Wt.a,attachKeypressEvent:fa,preventFaskClickByKeydown:function(t){var e=!1,n=function(t){co(t,LP(NP,VP))&&(e&&t.preventDefault(),e=!0)},r=function(t){(t instanceof FocusEvent||co(t,LP(NP,VP)))&&(e=!1)};return document.addEventListener("keyup",r,!0),window.addEventListener("blur",r),t.addEventListener("keydown",n,{capture:!0}),function(){document.removeEventListener("keyup",r,!0),window.removeEventListener("blur",r),t.removeEventListener("keydown",n,{capture:!0})}},createClickEvent:function(t){var e=document.createEvent("MouseEvent"),n=t instanceof MouseEvent?t:{screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null},r=n.screenX,i=n.screenY,o=n.clientX,a=n.clientY,s=n.button,c=n.relatedTarget;return e.initMouseEvent("click",(null==t?void 0:t.bubbles)||!1,(null==t?void 0:t.cancelable)||!1,window,(null==t?void 0:t.detail)||-1,r,i,o,a,(null==t?void 0:t.ctrlKey)||$t.isCtrl,(null==t?void 0:t.altKey)||$t.isAlt,(null==t?void 0:t.shiftKey)||$t.isShift,(null==t?void 0:t.metaKey)||$t.isWin,s||0,c),e.isFake=!0,Object.defineProperties(e,{srcElement:{get:function(){return null==t?void 0:t.srcElement}},fromElement:{get:function(){var e;return null===(e=t)||void 0===e?void 0:e.fromElement}},target:{get:function(){return null==t?void 0:t.target}},toElement:{get:function(){var e;return null===(e=t)||void 0===e?void 0:e.toElement}}}),e},stopPropagationOnShortcutEvent:function(t,e,n,r){var i=function(t){co(t,n)&&t.stopPropagation()};return t.addEventListener(e,i,r),function(){t.removeEventListener(e,i,r)}},IoCScope:ma},form:{CFR_Utils:ah}};window.PDF=cE},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=(n(134),n(52),n(1),n(240),n(32),n(40),n(180));function a(t){var e=Object.getOwnPropertyNames(t.prototype);return function(t){function n(n){var r;r=t.call(this,n)||this;var i=n.workerPath,a=n.workerBlobUrl;"/"!==i.slice(-1)&&(i+="/");for(var s=new Worker(a||i+"WebPDFSRWorker.js?h=0.9994292915494607"),c=r.workerPromise=new o.a(s),u=Object.getOwnPropertyNames(r.constructor.prototype),d=function(t){var n=e[t],i=u.indexOf(n);if(-1!==i)return u.splice(i,1),"continue";r[n]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return c.emit(n,e)}},l=e.length;l--;)d(l);return r}i()(n,t);var r=n.prototype;return r.init=function(){return this.workerPromise.emit("initSREngine",this.option)},r.getPDFDocIdByFile=function(t,e){var n=function(t){var e=[];return t instanceof ArrayBuffer&&(e=[t]),e}(t);return this.workerPromise.emit("getPDFDocByFile",[t,e],n)},r.getPDFDocStream=function(t,e,n){var r=this.workerPromise.calls(e);return this.workerPromise.emit("getPDFDocStream",[t,r,n])},r.getFileattachmentStream=function(t,e,n,r){var i=this.workerPromise.calls(r);return this.workerPromise.emit("getFileattachmentStream",[t,e,n,i])},r.resetEngine=function(t){return this.workerPromise.emit("resetEngine",[t])},n}(t)}var s=function(t){return function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).api=new(a(r.api.constructor))(e),r}return i()(e,t),e}(t)};e.default=s},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(9),a=n.n(o),s=n(8),c=n.n(s),u=(n(134),n(52),n(1),n(7),n(18),n(25),n(23),n(107),n(108),n(13),n(32),n(86),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(211)),d=n(180),l=n(28);function h(t){var e=[];return t instanceof ArrayBuffer&&(e=[t]),e}var f="FoxitPDFSDKForWeb_JREngineCache_",p=f+"wasmBinary",g=function(t){function e(e){var n,r;if(n=t.call(this,e)||this,r=e.readyWorker){n.readyWorker=r,v(n.workerPromise=new d.a(r.worker));var i=function(){e.licenseSN=e.licenseKey=e.l=""};return r.initJREnginePromise.then(i,i),c()(n)}var o=e.workerPath,a=e.workerBlobUrl;"/"!==o[o.length-1]&&(o+="/");var s=n.workerUrl=o+"WebPDFJRWorker.js?h=64f5f9822f1b41d35d844400402e55ea",u=a||s,h=new Worker(u);return l.isIE&&(h.terminate(),h=new Worker(u)),v(n.workerPromise=new d.a(h)),n}i()(e,t);var n=e.prototype;return n.setWorker=function(t){this.workerPromise.setWorker(t)},n.registerWorkflow=function(t,e){this.workerPromise.registerWorkflow(t,e)},n.unregisterWorkflow=function(t,e){this.workerPromise.unregisterWorkflow(t,e)},n.init=function(){var t;if(t=this.readyWorker)return new Promise((function(e,n){return t.initJREnginePromise.then(e,n)}));var e,n={};(e=localStorage.getItem(p))&&(n.wasmBinary=e),(e=localStorage.getItem("FoxitPDFSDKForWeb_JREngineCache_asmMem"))&&(n.asmMem=e),(e=localStorage.getItem("FoxitPDFSDKForWeb_JREngineCache_asmJs"))&&(n.asmJs=e);var r=this.option,i=this.workerPromise;return r.cache=n,r.compatibilityURL=i.calls((function(t){return URL.createObjectURL(t)})),r.d=location.href,i.emit("initJREngine",r).then((function(t){return t}))},n.on=function(t,e){return this.workerPromise.on(t,e)},n.off=function(t,e){return this.workerPromise.off(t,e)},n.handleGroupMarkup=function(t,e,n,r){return this.workerPromise.emit("handleGroupMarkup",{docId:t,pageId:e,annotIds:n,isGroup:r})},n.continueProgress=function(t){return this.workerPromise.emit("progressContinue",{progressiveId:t})},n.cancleProgress=function(t){return this.workerPromise.emit("cancleProgress",{progressiveId:t})},n.getPDFDocIdByFile=function(t){var e=h(t);return this.workerPromise.emit("getPDFDocByFile",{file:t},e)},n.createNewDoc=function(t,e,n){return this.workerPromise.emit("createNewDoc",{title:t,author:e,pageSize:n})},n.createNewPortfolioDoc=function(t,e,n){var r=[t].concat(a()(e||[]));return this.workerPromise.emit("createNewPortfolioDoc",{fileCoversheet:t,files:e,title:n},r)},n.getPDFDocIdByChunk=function(t,e){var n=this.workerPromise.calls(e);return this.workerPromise.emit("getPDFDocAsync",{size:t,getChunk:n})},n.getPDFDocIdByHttpRangeRequest=function(t){return this.workerPromise.emit("getPDFDocIdByHttpRangeRequest",{size:t.size,range:t.range})},n.getPDFDocIdByArrayBuffer=function(t){return this.workerPromise.emit("getPDFDocByArrayBuffer",{buffer:t},[t])},n.setIcons=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.workerPromise.emit("setIcons",{icons:t})},n.addIcon=function(t){return this.workerPromise.emit("addIcon",{icon:t})},n.removeIcon=function(t,e,n){return this.workerPromise.emit("removeIcon",{type:t,catalog:e,name:n})},n.checkCertificatePassword=function(t,e){return this.workerPromise.emit("checkCertificatePassword",{pfxFile:t,password:e})},n.getCertificateInfo=function(t,e){return this.workerPromise.emit("getCertificateInfo",{file:t,password:e})},n.createCertificateFile=function(t,e){return this.workerPromise.emit("createCertificateFile",{docId:t,info:e})},n.getCertificateSerials=function(t){return this.workerPromise.emit("getCertificateSerials",{docId:t})},n.parseByCertificate=function(t,e){return this.workerPromise.emit("parseByCertificate",{docId:t,info:e})},n.parsePDFDocByPassword=function(t,e,n){var r=[],i=n.fdf;return i&&i.file instanceof ArrayBuffer&&(r=[i.file]),this.workerPromise.emit("parsePDFDocByPassword",{id:t,password:e,initData:n},r)},n.getPDFDocInfoById=function(t){return this.workerPromise.emit("getPDFDocInfoById",t)},n.getMetadata=function(t){return this.workerPromise.emit("getMetadata",t)},n.setMetadataValue=function(t,e,n){return this.workerPromise.emit("setMetadataValue",{id:t,key:e,value:n})},n.getFileVersion=function(t){return this.workerPromise.emit("getFileVersion",t)},n.isLinearized=function(t){return this.workerPromise.emit("isLinearized",{docId:t})},n.loadForm=function(t){return this.workerPromise.emit("loadForm",{docId:t})},n.updateFormControl=function(t,e,n,r,i){return this.workerPromise.emit("updateFormControl",{docId:t,fieldName:e,objectNumber:n,key:r,value:i})},n.updateField=function(t,e,n,r){return this.workerPromise.emit("updateField",{docId:t,title:e,key:n,value:r})},n.reloadFieldByName=function(t,e){return this.workerPromise.emit("reloadFieldByName",{docId:t,fieldName:e})},n.updateMKProperty=function(t,e,n,r,i){return this.workerPromise.emit("updateMKProperty",{docId:t,pageId:e,annotId:n,key:r,value:i})},n.setWidgetAS=function(t,e,n,r){return this.workerPromise.emit("setWidgetAS",{docId:t,pageId:e,annotId:n,AS:r})},n.setFieldValue=function(t,e,n){return this.workerPromise.emit("setFieldValue",{docId:t,title:e,value:n})},n.formFillerEvent=function(t,e,n,r){return this.workerPromise.emit("formFillerEvent",{docId:t,type:e,pageIndex:n,point:r})},n.getFieldsValue=function(t){return this.workerPromise.emit("getFieldsValue",{docId:t})},n.addControl=function(t,e,n,r,i,o){return this.workerPromise.emit("addControl",{docId:t,pageIndex:e,fieldName:n,fieldType:r,rect:i,options:o})},n.validateFieldName=function(t,e,n){return this.workerPromise.emit("validateFieldName",{docId:t,fieldName:e,fieldType:n})},n.renameField=function(t,e,n){return this.workerPromise.emit("renameField",{docId:t,fieldName:e,newName:n})},n.removeField=function(t,e){return this.workerPromise.emit("removeField",{docId:t,fieldName:e})},n.removeControl=function(t,e,n,r){return this.workerPromise.emit("removeControl",{docId:t,fieldName:n,pageIndex:e,controlObjectNumber:r})},n.fixPageFields=function(t,e){return this.workerPromise.emit("fixPageFields",{docId:t,pageIndex:e})},n.getControlCount=function(t,e){return this.workerPromise.emit("getControlCount",{docId:t,pageIndex:e})},n.copyControls=function(t,e,n,r){return this.workerPromise.emit("copyControls",{docId:t,pageIndex:e,dstPageIndex:n,controls:r})},n.getControlPageIndex=function(t,e,n){return this.workerPromise.emit("getControlPageIndex",{docId:t,fieldName:e,objectNumber:n})},n.getPageInfoByIndex=function(t,e){return this.workerPromise.emit("getPageInfoByIndex",{id:t,index:e})},n.setRenderFlag=function(t,e){return this.workerPromise.emit("setRenderFlag",{docId:t,flags:e})},n.getPageBitmap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:["page"],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"view",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return this.workerPromise.emit("getPageBitmap",{docId:t,pageId:e,scale:n,rotate:r,rect:i,flags:o,usage:a,id:s,isSharedPage:c})},n.getPageAndHighlightBitmap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return this.workerPromise.emit("getPageAndHighlightBitmap",{docId:t,pageId:e,scale:n,rotate:r,rect:i,exclude:o})},n.clearDesignerAssitCache=function(t,e){return this.workerPromise.emit("clearDesignerAssitCache",{docId:t,pageId:e})},n.clearAllDesignerAssistCache=function(t){return this.workerPromise.emit("clearAllDesignerAssistCache",{docId:t})},n.getAnnotBitmapByRange=function(t,e,n,r,i,o){return this.workerPromise.emit("getAnnotBitmapByRange",{docId:t,pageId:e,range:n,scale:r,rotate:i,rect:o})},n.getAnnot=function(t,e,n){return this.workerPromise.emit("getAnnot",{docId:t,pageId:e,annotId:n})},n.getPageAnnotIDList=function(t,e){return this.workerPromise.emit("getPageAnnotIDList",{docId:t,pageId:e})},n.getAnnots=function(t,e,n,r){return this.workerPromise.emit("getAnnots",{docId:t,pageId:e,idList:n,reload:r})},n.getAnnotBitmap=function(t,e,n,r,i,o,a){return this.workerPromise.emit("getAnnotBitmap",{docId:t,pageId:e,annotId:n,scale:r,rotate:i,rect:o,renderAppearanceType:a})},n.getAnnotObjNumByNM=function(t,e,n){return this.workerPromise.emit("getAnnotObjNumByNM",{docId:t,pageId:e,nm:n})},n.getAnnotIdAtPoint=function(t,e,n,r){var i=n.x,o=n.y;return this.workerPromise.emit("getAnnotIdAtPoint",{docId:t,pageId:e,points:{x:i,y:o},tolerance:r})},n.getAnnotIdAtDevicePoint=function(t,e,n,r,i){var o=n.x,a=n.y;return this.workerPromise.emit("getAnnotIdAtDevicePoint",{docId:t,pageId:e,points:{x:o,y:a},tolerance:r,matrix:i})},n.getAnnotObjectNumAtPoint=function(t,e,n,r){var i=n.x,o=n.y;return this.workerPromise.emit("getAnnotObjectNumAtPoint",{docId:t,pageId:e,points:{x:i,y:o},tolerance:r})},n.getAnnotObjectNumAtDevicePoint=function(t,e,n,r,i){var o=n.x,a=n.y;return this.workerPromise.emit("getAnnotObjectNumAtDevicePoint",{docId:t,pageId:e,points:{x:o,y:a},tolerance:r,matrix:i})},n.getCharInfoAtPoint=function(t,e,n,r){var i=n.x,o=n.y;return this.workerPromise.emit("getCharInfoAtPoint",{docId:t,pageId:e,points:{x:i,y:o},tolerance:r})},n.getThumb=function(t,e,n,r){return this.workerPromise.emit("getThumb",{docId:t,pageId:e,rotate:n,ratio:r})},n.getMediaBoxBitmap=function(t,e,n,r){return this.workerPromise.emit("getMediaBoxBitmap",{docId:t,pageId:e,width:n,height:r})},n.movePageTo=function(t,e,n){return this.workerPromise.emit("movePageTo",{docId:t,pageId:e,destIndex:n})},n.insertPage=function(t,e,n,r){return this.workerPromise.emit("insertPage",{docId:t,pageIndex:e,width:n,height:r})},n.removePage=function(t,e){return this.workerPromise.emit("removePage",{docId:t,pageIndex:e})},n.updateAnnotQuadPointsByCharIndex=function(t,e,n,r,i){return this.workerPromise.emit("updateAnnotQuadPointsByCharIndex",{docId:t,pageId:e,annotId:n,startCharIndex:r,endCharIndex:i})},n.setAnnotContent=function(t,e,n,r){return this.workerPromise.emit("setAnnotContent",{docId:t,pageId:e,annotId:n,content:r})},n.setAnnotBorderColor=function(t,e,n,r){return this.workerPromise.emit("setAnnotBorderColor",{docId:t,pageId:e,annotId:n,color:r})},n.setAnnotBorderStyle=function(t,e,n,r,i){return this.workerPromise.emit("setAnnotBorderStyle",{docId:t,pageId:e,annotId:n,style:r,styleParam:i})},n.setAnnotBorderWidth=function(t,e,n,r){return this.workerPromise.emit("setAnnotBorderWidth",{docId:t,pageId:e,annotId:n,width:r})},n.setAnnotFillColor=function(t,e,n,r){return this.workerPromise.emit("setAnnotFillColor",{docId:t,pageId:e,annotId:n,color:r})},n.setRedactAnnotFillColor=function(t,e,n,r,i){return this.workerPromise.emit("setRedactAnnotFillColor",{docId:t,pageId:e,annotId:n,color:r,onlyForFill:i})},n.setAnnotBorderInfo=function(t,e,n,r){return this.workerPromise.emit("setAnnotBorderInfo",{docId:t,pageId:e,annotId:n,borderInfo:r})},n.setRedactOverlayText=function(t,e,n,r){return this.workerPromise.emit("setRedactOverlayText",{docId:t,pageId:e,annotId:n,overlayText:r})},n.removeRedactOverlayText=function(t,e,n){return this.workerPromise.emit("removeRedactOverlayText",{docId:t,pageId:e,annotId:n})},n.setRedactOverlayTextAlignment=function(t,e,n,r){return this.workerPromise.emit("setRedactOverlayTextAlignment",{docId:t,pageId:e,annotId:n,alignment:r})},n.setRedactRepeat=function(t,e,n,r){return this.workerPromise.emit("setRedactRepeat",{docId:t,pageId:e,annotId:n,isRepeat:r})},n.setRedactAutoFontSize=function(t,e,n,r){return this.workerPromise.emit("setRedactAutoFontSize",{docId:t,pageId:e,annotId:n,isAutoFontSize:r})},n.getRedactDefaultAppearance=function(t,e,n){return this.workerPromise.emit("getRedactDefaultAppearance",{docId:t,pageId:e,annotId:n})},n.setRedactDefaultAppearance=function(t,e,n,r){return this.workerPromise.emit("setRedactDefaultAppearance",{docId:t,pageId:e,annotId:n,appearance:r})},n.setRedactOpacity=function(t,e,n,r,i){return this.workerPromise.emit("setRedactOpacity",{docId:t,pageId:e,annotId:n,opacity:r,only4Fill:i})},n.setRedactApplyFillColor=function(t,e,n,r){return this.workerPromise.emit("setRedactApplyFillColor",{docId:t,pageId:e,annotId:n,color:r})},n.setAnnotOpacity=function(t,e,n,r){return this.workerPromise.emit("setAnnotOpacity",{docId:t,pageId:e,annotId:n,opacity:r})},n.setAnnotRotation=function(t,e,n,r){return this.workerPromise.emit("setAnnotRotation",{docId:t,pageId:e,annotId:n,rotation:r})},n.removeAnnot=function(t,e,n){return this.workerPromise.emit("removeAnnot",{docId:t,pageId:e,annotId:n})},n.annotAddReply=function(t,e,n,r){return this.workerPromise.emit("annotAddReply",{docId:t,pageId:e,annotId:n,content:r})},n.setAnnotRect=function(t,e,n,r){return this.workerPromise.emit("setAnnotRect",{docId:t,pageId:e,annotId:n,rect:r})},n.setAnnotRectAndInnerRect=function(t,e,n,r,i){return this.workerPromise.emit("setAnnotRectAndInnerRect",{docId:t,pageId:e,annotId:n,rect:r,innerRect:i})},n.getAnnotInnerRect=function(t,e,n){return this.workerPromise.emit("getAnnotInnerRect",{docId:t,pageId:e,annotId:n})},n.moveAnnotTo=function(t,e,n,r){return this.workerPromise.emit("moveAnnotTo",{docId:t,pageId:e,annotId:n,position:r})},n.getPDFDocStream=function(t,e,n){var r=this.workerPromise.calls(e);return this.workerPromise.emit("getPDFDocStream",{docId:t,writeStream:r,flag:n})},n.setAnnotIconName=function(t,e,n,r){return this.workerPromise.emit("setAnnotIconName",{docId:t,pageId:e,annotId:n,iconName:r})},n.getFileattachmentStream=function(t,e,n,r){var i=this.workerPromise.calls(r);return this.workerPromise.emit("getFileattachmentStream",{docId:t,pageId:e,annotId:n,writeStream:i})},n.setAnnotEndingStyle=function(t,e,n,r,i){return this.workerPromise.emit("setAnnotEndingStyle",{docId:t,pageId:e,annotId:n,isBeginning:r,style:i})},n.enableLineCaption=function(t,e,n,r){return this.workerPromise.emit("enableLineCaption",{docId:t,pageId:e,annotId:n,enable:r})},n.setLineStartPoint=function(t,e,n,r,i){return this.workerPromise.emit("setLineStartPoint",{docId:t,pageId:e,annotId:n,x:r,y:i})},n.setLineEndPoint=function(t,e,n,r,i){return this.workerPromise.emit("setLineEndPoint",{docId:t,pageId:e,annotId:n,x:r,y:i})},n.setAnnotLeaderLineLength=function(t,e,n,r){return this.workerPromise.emit("setAnnotLeaderLineLength",{docId:t,pageId:e,annotId:n,length:r})},n.setAnnotLeaderLineExtend=function(t,e,n,r){return this.workerPromise.emit("setAnnotLeaderLineExtend",{docId:t,pageId:e,annotId:n,length:r})},n.setAnnotLeaderLineOffset=function(t,e,n,r){return this.workerPromise.emit("setAnnotLeaderLineOffset",{docId:t,pageId:e,annotId:n,offset:r})},n.setAnnotCaptionOffset=function(t,e,n,r,i){return this.workerPromise.emit("setAnnotCaptionOffset",{docId:t,pageId:e,annotId:n,x:r,y:i})},n.updateAnnotVertexes=function(t,e,n,r,i,o){return this.workerPromise.emit("updateAnnotVertexes",{docId:t,pageId:e,annotId:n,pointIndex:r,x:i,y:o})},n.setAnnotVertexes=function(t,e,n,r){return this.workerPromise.emit("setAnnotVertexes",{docId:t,pageId:e,annotId:n,vertexes:r})},n.setHighlightingMode=function(t,e,n,r){return this.workerPromise.emit("setHighlightingMode",{docId:t,pageId:e,annotId:n,highlightingMode:r})},n.setAnnotAPBitmap=function(t,e,n,r,i){return this.workerPromise.emit("setAnnotAPBitmap",{docId:t,pageId:e,annotId:n,url:r,size:i})},n.getBitmapBuffer=function(t,e,n){return this.workerPromise.emit("getBitmapBuffer",{docId:t,pageId:e,annotId:n})},n.setAnnotInnerRect=function(t,e,n,r){var i=r.left,o=r.right,a=r.top,s=r.bottom;return this.workerPromise.emit("setAnnotInnerRect",{docId:t,pageId:e,annotId:n,rect:{left:i,right:o,top:a,bottom:s}})},n.setCalloutLineEndingStyle=function(t,e,n,r){return this.workerPromise.emit("setCalloutLineEndingStyle",{docId:t,pageId:e,annotId:n,endingStyle:r})},n.setAction=function(t,e,n,r,i,o){return this.workerPromise.emit("setAction",{docId:t,pageId:e,annotId:n,type:r,trigger:i,append:o})},n.removeAction=function(t,e,n,r,i,o){return this.workerPromise.emit("removeAction",{docId:t,pageId:e,annotId:n,trigger:r,parentObject:i,objectNumber:o})},n.setDefaultAppearance=function(t,e,n,r){return this.workerPromise.emit("setDefaultAppearance",{docId:t,pageId:e,annotId:n,da:r})},n.removeAnnotAction=function(t,e,n){return this.workerPromise.emit("removeAnnotAction",{docId:t,pageId:e,annotId:n})},n.getAction=function(t,e,n){return this.workerPromise.emit("getAction",{docId:t,pageId:e,annotId:n})},n.getArticleList=function(t){return this.workerPromise.emit("getArticleList",{docId:t})},n.getStructureRoles=function(t){return this.workerPromise.emit("getStructureRoles",{docId:t})},n.setActionDataByIndex=function(t,e,n,r,i){return this.workerPromise.emit("setActionDataByIndex",{docId:t,pageId:e,annotId:n,data:r,actionIndex:i})},n.addBookmarksFromStructureRoles=function(t,e,n){return this.workerPromise.emit("addBookmarksFromStructureRoles",{docId:t,structureRoles:e,rootTitle:n})},n.setCalloutLinePoints=function(t,e,n,r){return this.workerPromise.emit("setCalloutLinePoints",{docId:t,pageId:e,annotId:n,calloutLinePoints:r})},n.setSubject=function(t,e,n,r){return this.workerPromise.emit("setSubject",{docId:t,pageId:e,annotId:n,subject:r})},n.setTitle=function(t,e,n,r){return this.workerPromise.emit("setTitle",{docId:t,pageId:e,annotId:n,title:r})},n.setCreateDateTime=function(t,e,n,r){return this.workerPromise.emit("setCreateDateTime",{docId:t,pageId:e,annotId:n,date:r})},n.setModifiedDateTime=function(t,e,n,r){return this.workerPromise.emit("setModifiedDateTime",{docId:t,pageId:e,annotId:n,date:r})},n.setUniqueId=function(t,e,n,r){return this.workerPromise.emit("setUniqueId",{docId:t,pageId:e,annotId:n,newId:r})},n.setDefaultAp=function(t,e,n,r){return this.workerPromise.emit("setDefaultAp",{docId:t,pageId:e,annotId:n,defaultAppearance:r})},n.setAlignment=function(t,e,n,r){return this.workerPromise.emit("setAlignment",{docId:t,pageId:e,annotId:n,value:r})},n.setAnnotFlag=function(t,e,n,r){return this.workerPromise.emit("setAnnotFlag",{docId:t,pageId:e,annotId:n,flag:r})},n.importFromFDF=function(t,e,n){var r=h(e);return this.workerPromise.emit("importFromFDF",{docId:t,fdf:e,dataType:n},r)},n.importFromFDFFile=function(t,e,n,r){return this.workerPromise.emit("importFromFDFFile",{docId:t,file:e,size:n,type:r})},n.exportToStardardXml=function(t,e,n){var r=this.workerPromise.calls(n);return this.workerPromise.emit("exportToStardardXml",{docId:t,fileName:e,callbackId:r})},n.exportToFDF=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.workerPromise.emit("exportToFDF",{docId:t,fileType:e,dataType:n,pageAnnots:r})},n.exportToImage=function(t,e,n,r,i){var o=this.workerPromise.calls(i);return this.workerPromise.emit("exportToImage",{docId:t,imageSetting:e,fileName:n,pageRange:r,callbackId:o})},n.exportToTxt=function(t,e,n,r){var i=this.workerPromise.calls(r);return this.workerPromise.emit("exportToTxt",{docId:t,taskName:e,pageRange:n,callbackId:i})},n.exportImageObjectToImage=function(t,e,n,r,i){var o=this.workerPromise.calls(i);return this.workerPromise.emit("exportImageObjectToImage",{docId:t,graphicsObject:e,imageSetting:n,fileName:r,callbackId:o})},n.cancelExport=function(t){return this.workerPromise.emit("cancelExport",{docId:t})},n.addAnnot=function(t,e,n){return this.workerPromise.emit("addAnnot",{docId:t,pageId:e,annot:n})},n.markRedactAnnot=function(t,e,n,r){return this.workerPromise.emit("markRedactAnnot",{docId:t,pageId:e,rects:n,annot:r})},n.redactApply=function(t,e,n){return this.workerPromise.emit("redactApply",{docId:t,pageId:e,annotId:n})},n.applyRedaction=function(t){return this.workerPromise.emit("applyRedaction",{docId:t})},n.addAnnotGroup=function(t,e,n,r){return this.workerPromise.emit("addAnnotGroup",{docId:t,pageId:e,annots:n,headerIndex:r})},n.getBlankPageIndexes=function(t){return this.workerPromise.emit("getBlankPageIndexes",{docId:t})},n.getBookmarks=function(t){return this.workerPromise.emit("getBookmarks",{docId:t})},n.getCurFileSymbolId=function(t){return this.workerPromise.emit("getCurFileSymbolId",{docId:t})},n.getFadeOutBackground=function(t,e){return this.workerPromise.emit("getFadeOutBackground",{docId:t,imgBuffer:e})},n.getConvertToMono=function(t,e){return this.workerPromise.emit("getConvertToMono",{docId:t,imgBuffer:e})},n.createRootBookmark=function(t){return this.workerPromise.emit("createRootBookmark",{docId:t})},n.insertBookmark=function(t,e,n,r,i,o,a){return this.workerPromise.emit("insertBookmark",{docId:t,pbkId:e,title:n,pageIndex:r,top:i,left:o,relationship:a})},n.setBookmarkProperty=function(t,e,n){return this.workerPromise.emit("setBookmarkProperty",{docId:t,bkId:e,properties:n})},n.removeBookmark=function(t,e){return this.workerPromise.emit("removeBookmark",{docId:t,bkId:e})},n.getBookmarkDestination=function(t,e){return this.workerPromise.emit("getBookmarkDestination",{docId:t,bkId:e})},n.setBookmarkDestination=function(t,e,n){return this.workerPromise.emit("setBookmarkDestination",{docId:t,bkId:e,gotoAction:n})},n.getBookmarkAction=function(t,e){return this.workerPromise.emit("getBookmarkAction",{docId:t,bkId:e})},n.setBookmarkAction=function(t,e,n){return this.workerPromise.emit("setBookmarkAction",{docId:t,bkId:e,action:n})},n.moveBookmarkAction=function(t,e,n,r){return this.workerPromise.emit("moveBookmarkAction",{docId:t,bkId:e,action:n,direction:r})},n.removeBookmarkAction=function(t,e,n){return this.workerPromise.emit("removeBookmarkAction",{docId:t,bkId:e,action:n})},n.getLayerNodes=function(t){return this.workerPromise.emit("getLayerNodes",{docId:t})},n.setLayerNodeVisiable=function(t,e,n){return this.workerPromise.emit("setLayerNodeVisiable",{docId:t,layerId:e,visiable:n})},n.getTextRectsAtRect=function(t,e,n){return this.workerPromise.emit("getTextRectsAtRect",{docId:t,pageId:e,rect:n})},n.getTextContinuousRectsAtRect=function(t,e,n){return this.workerPromise.emit("getTextContinuousRectsAtRect",{docId:t,pageId:e,rect:n})},n.getTextContinuousRectsAtPoints=function(t,e,n,r,i,o,a){return this.workerPromise.emit("getTextContinuousRectsAtPoints",{docId:t,pageId:e,point1:n,point2:r,tolerance:i,start:o,end:a})},n.getTextContinuousCharsAtRect=function(t,e,n,r){return this.workerPromise.emit("getTextContinuousCharsAtRect",{docId:t,pageId:e,rect:n,allInRect:r})},n.getDoubleClickTextRectAtPoint=function(t,e,n,r){return this.workerPromise.emit("getDoubleClickTextRectAtPoint",{docId:t,pageId:e,doubleClickPoint:n,tolerance:r})},n.getTextSearch=function(t,e,n,r){return this.workerPromise.emit("getTextSearch",{docId:t,pageId:e,pattern:n,flags:r})},n.getAnnotTextSearch=function(t,e,n,r,i){return this.workerPromise.emit("getAnnotTextSearch",{docId:t,pageId:e,annotId:n,pattern:r,flags:i})},n.textSearchFindNext=function(t){return this.workerPromise.emit("textSearchFindNext",{id:t})},n.textSearchFindPrev=function(t){return this.workerPromise.emit("textSearchFindPrev",{id:t})},n.textSearchDestroy=function(t){return this.workerPromise.emit("textSearchDestroy",{id:t})},n.registerSecurityCallback=function(t,e){return this.workerPromise.emit("registerSecurityCallback",{type:t,options:e})},n.destroyDoc=function(t){return this.workerPromise.emit("destroyDoc",{id:t})},n.destroyPage=function(t,e){return this.workerPromise.emit("destroyPage",{docId:t,pageId:e})},n.setDocOpenAction=function(t,e,n){return this.workerPromise.emit("setDocOpenAction",{docId:t,type:e,params:n})},n.setDocActionData=function(t,e,n){return this.workerPromise.emit("setDocActionData",{docId:t,data:e,index:n})},n.moveCaretRectByCharIndex=function(t,e,n,r){return this.workerPromise.emit("moveCaretRectByCharIndex",{docId:t,pageId:e,annotId:n,charIndex:r})},n.setAnnotIntent=function(t,e,n,r){return this.workerPromise.emit("setAnnotIntent",{docId:t,pageId:e,annotId:n,intent:r})},n.setInkList=function(t,e,n,r){return this.workerPromise.emit("setInkList",{docId:t,pageId:e,annotId:n,inkList:r})},n.setUserName=function(t){return this.workerPromise.emit("setUserName",{name:t})},n.getUserName=function(){return this.workerPromise.emit("getUserName")},n.addAnnotReviewState=function(t,e,n,r){return this.workerPromise.emit("addAnnotReviewState",{docId:t,pageId:e,annotId:n,stateName:r})},n.addAnnotMarkedState=function(t,e,n,r){return this.workerPromise.emit("addAnnotMarkedState",{docId:t,pageId:e,annotId:n,stateName:r})},n.removeAllStateAnnots=function(t,e,n){return this.workerPromise.emit("removeAllStateAnnots",{docId:t,pageId:e,annotId:n})},n.setStateName=function(t,e,n,r){return this.workerPromise.emit("setStateName",{docId:t,pageId:e,stateAnnotId:n,stateName:r})},n.setNoteOpenStatus=function(t,e,n,r){return this.workerPromise.emit("setNoteOpenStatus",{docId:t,pageId:e,annotId:n,isOpen:r})},n.flatten=function(t,e,n){return this.workerPromise.emit("flatten",{docId:t,pageId:e,option:n})},n.setDynamicInfoFormula=function(t,e){return this.workerPromise.emit("setDynamicInfoFormula",{seperator:t,timeFormat:e})},n.getGraphicObjectsInfo=function(t,e){return this.workerPromise.emit("getGraphicObjectsInfo",{docId:t,pageId:e})},n.updatePageInfo=function(t,e){return this.workerPromise.emit("updatePageInfo",{docId:t,pageId:e})},n.setPageRotation=function(t,e,n){return this.workerPromise.emit("setPageRotation",{docId:t,pageId:e,rotation:n})},n.addPageImage=function(t,e,n,r,i,o,a){return this.workerPromise.emit("addPageImage",{docId:t,pageId:e,imageBuffer:n,point:r,width:i,height:o,rotation:a})},n.getPageAction=function(t,e,n){return this.workerPromise.emit("getPageAction",{docId:t,pageId:e,trigger:n})},n.setPageAction=function(t,e,n,r){return this.workerPromise.emit("setPageAction",{docId:t,pageId:e,trigger:n,action:r})},n.removePageAction=function(t,e,n,r){return this.workerPromise.emit("removePageAction",{docId:t,pageId:e,trigger:n,action:r})},n.movePageAction=function(t,e,n,r,i){return this.workerPromise.emit("movePageAction",{docId:t,pageId:e,trigger:n,action:r,direction:i})},n.addWatermark=function(t,e,n){return this.workerPromise.emit("addWatermark",{docId:t,pageId:e,data:n})},n.getSecurityType=function(t){return this.workerPromise.emit("getSecurityType",{docId:t})},n.setCertificateAndPermission=function(t,e,n,r){return this.workerPromise.emit("setCertificateAndPermission",{docId:t,infos:e,cipher:n,isEncryptMetadata:r})},n.setPasswordAndPermission=function(t,e,n,r,i,o){return this.workerPromise.emit("setPasswordAndPermission",{docId:t,userPassword:e,ownerPassword:n,permission:r,cipher:i,isEncryptMetadata:o})},n.removeSecurity=function(t){return this.workerPromise.emit("removeSecurity",{docId:t})},n.checkPassword=function(t,e){return this.workerPromise.emit("checkPassword",{docId:t,password:e})},n.getPermission=function(t){return this.workerPromise.emit("getPermission",{docId:t})},n.getStdCipherOptions=function(t){return this.workerPromise.emit("getStdCipherOptions",{docId:t})},n.getUserPassword=function(t,e){return this.workerPromise.emit("getUserPassword",{docId:t,password:e})},n.getGraphicsObjectAtPoint=function(t,e,n,r,i,o){return this.workerPromise.emit("getGraphicsObjectAtPoint",{docId:t,pageId:e,point:n,tolerance:r,type:i,rect:o})},n.setGraphicsObjectMatrix=function(t,e,n,r){return this.workerPromise.emit("setGraphicsObjectMatrix",{docId:t,pageId:e,id:n,matrix:r})},n.setGraphicsObjectRect=function(t,e,n,r){return this.workerPromise.emit("setGraphicsObjectRect",{docId:t,pageId:e,id:n,rect:r})},n.getGraphicsObjectBitmap=function(t,e,n,r,i){return this.workerPromise.emit("getGraphicsObjectBitmap",{docId:t,pageId:e,id:n,scale:r,rotation:i})},n.setGraphicsObjectBorderStyle=function(t,e,n,r,i){return this.workerPromise.emit("setGraphicsObjectBorderStyle",{docId:t,pageId:e,id:n,value:r,dashes:i})},n.setGraphicsObjectBorderWidth=function(t,e,n,r){return this.workerPromise.emit("setGraphicsObjectBorderWidth",{docId:t,pageId:e,id:n,width:r})},n.setGraphicsObjectBorderColor=function(t,e,n,r){return this.workerPromise.emit("setGraphicsObjectBorderColor",{docId:t,pageId:e,id:n,color:r})},n.setGraphicsObjectFillColor=function(t,e,n,r){return this.workerPromise.emit("setGraphicsObjectFillColor",{docId:t,pageId:e,id:n,color:r})},n.setGraphicsObjectOpacity=function(t,e,n,r){return this.workerPromise.emit("setGraphicsObjectOpacity",{docId:t,pageId:e,id:n,opacity:r})},n.addGraphicsObject=function(t,e,n){return this.workerPromise.emit("addGraphicsObject",{docId:t,pageId:e,info:n})},n.setImageObjectOpacity=function(t,e,n,r){return this.workerPromise.emit("setImageObjectOpacity",{docId:t,pageId:e,id:n,opacity:r})},n.setImageObjectRotation=function(t,e,n,r){return this.workerPromise.emit("setImageObjectRotation",{docId:t,pageId:e,id:n,rotation:r})},n.getImageObjectStream=function(t,e,n){return this.workerPromise.emit("getImageObjectStream",{docId:t,pageId:e,id:n})},n.setActionDestination=function(t,e,n){return this.workerPromise.emit("setActionDestination",{docId:t,objNum:e,destination:n})},n.setActionFieldNames=function(t,e,n){return this.workerPromise.emit("setActionFieldNames",{docId:t,objNum:e,fieldNames:n})},n.setActionHideState=function(t,e,n){return this.workerPromise.emit("setActionHideState",{docId:t,objNum:e,isHide:n})},n.setActionScript=function(t,e,n){return this.workerPromise.emit("setActionScript",{docId:t,objNum:e,script:n})},n.setActionOCGState=function(t,e,n){return this.workerPromise.emit("setActionOCGState",{docId:t,objNum:e,layerIds:n})},n.setThreadActionIndex=function(t,e,n){return this.workerPromise.emit("setThreadActionIndex",{docId:t,objNum:e,index:n})},n.setActionFlags=function(t,e,n){return this.workerPromise.emit("setActionFlags",{docId:t,objNum:e,flags:n})},n.setActionURI=function(t,e,n){return this.workerPromise.emit("setActionURI",{docId:t,objNum:e,uri:n})},n.insertSubAction=function(t,e,n,r){return this.workerPromise.emit("insertSubAction",{docId:t,objNum:e,index:n,type:r})},n.setSubAction=function(t,e,n,r){return this.workerPromise.emit("setSubAction",{docId:t,objNum:e,index:n,type:r})},n.removeAllSubActions=function(t,e){return this.workerPromise.emit("removeAllSubActions",{docId:t,objNum:e})},n.removeSubAction=function(t,e,n){return this.workerPromise.emit("removeSubAction",{docId:t,objNum:e,index:n})},n.setActionData=function(t,e,n){return this.workerPromise.emit("setActionData",{docId:t,objNum:e,data:n})},n.moveAction=function(t,e,n,r,i,o){return this.workerPromise.emit("moveAction",{docId:t,pageId:e,objNum:n,trigger:r,actionData:i,direction:o})},n.removeGraphicsObject=function(t,e,n,r){return this.workerPromise.emit("removeGraphicsObject",{docId:t,pageId:e,id:n,isFinal:r})},n.setPopupOpenStatus=function(t,e,n,r){return this.workerPromise.emit("setPopupOpenStatus",{docId:t,pageId:e,annotId:n,status:r})},n.removePageAllAnnot=function(t,e){return this.workerPromise.emit("removePageAllAnnot",{docId:t,pageId:e})},n.setTextObjectChar=function(t,e,n,r){return this.workerPromise.emit("setTextObjectChar",{docId:t,pageId:e,id:n,char:r})},n.setTextObjectItalic=function(t,e,n,r){return this.workerPromise.emit("setTextObjectItalic",{docId:t,pageId:e,id:n,italic:r})},n.setTextObjectBold=function(t,e,n,r){return this.workerPromise.emit("setTextObjectBold",{docId:t,pageId:e,id:n,bold:r})},n.setTextObjectFontSize=function(t,e,n,r){return this.workerPromise.emit("setTextObjectFontSize",{docId:t,pageId:e,id:n,size:r})},n.setTextObjectStandardFont=function(t,e,n,r){return this.workerPromise.emit("setTextObjectStandardFont",{docId:t,pageId:e,id:n,standardId:r})},n.setTextObjectFontByName=function(t,e,n,r,i,o){return this.workerPromise.emit("setTextObjectFontByName",{docId:t,pageId:e,id:n,name:r,styles:i,charset:o})},n.getTextObjectWoff=function(t,e,n){return this.workerPromise.emit("getTextObjectWoff",{docId:t,pageId:e,id:n})},n.getAnnotWoff=function(t,e,n){return this.workerPromise.emit("getAnnotWoff",{docId:t,pageId:e,id:n})},n.drmEncrypt=function(t,e){return this.workerPromise.emit("drmEncrypt",{docId:t,options:e})},n.getActionFileStream=function(t,e,n){var r=this.workerPromise.calls(n);return this.workerPromise.emit("getActionFileStream",{docId:t,objNum:e,writeStream:r})},n.getTemplates=function(t){return this.workerPromise.emit("getTemplates",{docId:t})},n.hideTemplate=function(t,e,n){return this.workerPromise.emit("hideTemplate",{docId:t,templateObj:e,isHidden:n})},n.spawnPage=function(t,e,n,r,i){return this.workerPromise.emit("spawnPage",{docId:t,templateObj:e,nPage:n,bRename:r,bOverlay:i})},n.setFieldsValue=function(t,e,n){return this.workerPromise.emit("setFieldsValue",{docId:t,fieldsValue:e,resetAP:n})},n.removeTemplate=function(t,e){return this.workerPromise.emit("removeTemplate",{docId:t,name:e})},n.getFontBufferByName=function(t,e){return this.workerPromise.emit("getFontBufferByName",{docId:t,fontName:e})},n.getPageSizes=function(t,e,n){return this.workerPromise.emit("getPageSizes",{docId:t,index:e,count:n})},n.setMeasureRatio=function(t,e,n,r){return this.workerPromise.emit("setMeasureRatio",{docId:t,pageId:e,annotId:n,ratioInfo:r})},n.setMeasureUnit=function(t,e,n,r){return this.workerPromise.emit("setMeasureUnit",{docId:t,pageId:e,annotId:n,unit:r})},n.setMeasureConversionFactor=function(t,e,n,r){return this.workerPromise.emit("setMeasureConversionFactor",{docId:t,pageId:e,annotId:n,factor:r})},n.startImportPages=function(t,e,n,r,i,o,a,s){return this.workerPromise.emit("startImportPages",{docId:t,destIndex:e,file:n,password:r,flags:i,layerName:o,startIndex:a,endIndex:s})},n.importPagesFromPDFDocs=function(t,e,n,r){return this.workerPromise.emit("importPagesFromPDFDocs",{docId:t,destIndex:e,srcDocs:n,layerName:r})},n.exportPagesToPDFDocs=function(t,e,n,r,i){return this.workerPromise.emit("exportPagesToPDFDocs",{docId:t,srcPages:e,destDocs:n,layerName:r,bookmarkTitle:i})},n.extractPages=function(t,e,n,r,i){var o=this.workerPromise.calls(n);return this.workerPromise.emit("extractPages",{docId:t,pageRange:e,writeStream:o,file:r,password:i})},n.copyPages=function(t,e,n){return this.workerPromise.emit("copyPages",{docId:t,pageRange:e,destIndex:n})},n.saveCopyPagesData=function(t,e){return this.workerPromise.emit("saveCopyPagesData",{docId:t,pageRange:e})},n.pastePages=function(t,e){return this.workerPromise.emit("pastePages",{docId:t,destIndex:e})},n.embedAllPageThumbnail=function(t){return this.workerPromise.emit("embedAllPageThumbnail",{docId:t})},n.removeEmbeddedPageThumbnail=function(t){return this.workerPromise.emit("removeEmbeddedPageThumbnail",{docId:t})},n.getAllBoxes=function(t,e){return this.workerPromise.emit("getAllBoxes",{docId:t,index:e})},n.setAllBoxesByIndexes=function(t,e,n,r,i,o,a,s){return this.workerPromise.emit("setAllBoxesByIndexes",{docId:t,indexes:e,width:n,height:r,xOffset:i,yOffset:o,boxes:a,isMoveWhite:s})},n.getPageFormat=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return this.workerPromise.emit("getPageFormat",{docId:t,type:e,previewWidth:n,previewHeight:r,fileName:i,newDocId:o,localFormat:a})},n.getPageFormatThumb=function(t,e,n,r,i,o,a,s){return this.workerPromise.emit("getPageFormatThumb",{docId:t,type:e,pageIndex:n,data:r,isUpdate:i,bitmapWidth:o,bitmapHeight:a,rotate:s})},n.addPageFormat=function(t,e,n,r){return this.workerPromise.emit("addPageFormat",{docId:t,type:e,data:n,isUpdate:r})},n.removeAllPageFormat=function(t,e){return this.workerPromise.emit("removeAllPageFormat",{docId:t,type:e})},n.extractPrintPages=function(t,e){return this.workerPromise.emit("extractPrintPages",{docId:t,data:e})},n.getHeaderFooter=function(t){return this.workerPromise.emit("getHeaderFooter",t)},n.addHeaderFooter=function(t,e){return this.workerPromise.emit("addHeaderFooter",{headerFooter:e,docId:t})},n.updateHeaderFooter=function(t,e){return this.workerPromise.emit("updateHeaderFooter",{headerFooter:e,docId:t})},n.removeHeaderFooter=function(t){return this.workerPromise.emit("removeHeaderFooter",t)},n.paste=function(t,e,n,r,i,o){return this.workerPromise.emit("paste",{docId:t,pageId:e,srcPageId:n,type:r,objectId:i,position:o})},n.setFontMap=function(t){return this.workerPromise.emit("setFontMap",t)},n.setWatermarkFontMap=function(t){return this.workerPromise.emit("setWatermarkFontMap",t)},n.addFontMap=function(t){return this.workerPromise.emit("addFontMap",t)},n.setJPXDownSample=function(t){return this.workerPromise.emit("setJPXDownSample",t)},n.getAnnotsRawData=function(t,e){return this.workerPromise.emit("getAnnotsRawData",{docId:t,rawAnnots:e})},n.attachFile=function(t,e){return this.workerPromise.emit("attachFile",{docId:t,blob:e})},n.signDoc=function(t,e){return this.workerPromise.emit("signDoc",{docId:t,signInfo:e})},n.signDocForESignCN=function(t,e){return this.workerPromise.emit("signDocForESignCN",{docId:t,signInfo:e})},n.getGraphicsObjectByIndex=function(t,e,n){return this.workerPromise.emit("getGraphicsObjectByIndex",{docId:t,pageId:e,index:n})},n.getGraphicsObjectsCount=function(t,e){return this.workerPromise.emit("getGraphicsObjectsCount",{docId:t,pageId:e})},n.getFontsInfo=function(t){return this.workerPromise.emit("getFontsInfo",{docId:t})},n.getDocAdditionalActions=function(t){return this.workerPromise.emit("getDocAdditionalActions",{docId:t})},n.calcPageContentBBox=function(t,e,n){return this.workerPromise.emit("calcPageContentBBox",{docId:t,pageIndex:e,mode:n})},n.getPageBox=function(t,e,n){return this.workerPromise.emit("getPageBox",{docId:t,pageIndex:e,boxType:n})},n.setPageBox=function(t,e,n,r){return this.workerPromise.emit("setPageBox",{docId:t,pageIndex:e,boxType:n,rect:r})},n.setPageSize=function(t,e,n,r){return this.workerPromise.emit("setPageSize",{docId:t,pageIndex:e,width:n,height:r})},n.syncDataCache=function(t,e){return this.workerPromise.emit("syncDataCache",{docId:t,pageIdMap:e})},n.setDocColors=function(t,e){return this.workerPromise.emit("setDocColors",{docId:t,colors:e})},n.setPageDisplayPreferences=function(t,e){return this.workerPromise.emit("setPageDisplayPreferences",{docId:t,pageDisplayPreferences:e})},n.moveAnnotsToPage=function(t,e,n,r){return this.workerPromise.emit("moveAnnotsToPage",{docId:t,srcPageId:e,dstPageId:n,annotInfos:r})},n.getOriginalStream=function(t){return this.workerPromise.emit("getOriginalStream",{docId:t})},n.hasForm=function(t){return this.workerPromise.emit("hasForm",{docId:t})},n.setTabOrder=function(t,e,n){return this.workerPromise.emit("setTabOrder",{docId:t,pageIndex:e,type:n})},n.getTabOrder=function(t,e){return this.workerPromise.emit("getTabOrder",{docId:t,pageIndex:e})},n.setStructureOrder=function(t,e,n){return this.workerPromise.emit("setStructureOrder",{docId:t,pageIndex:e,idList:n})},n.setLockAction=function(t,e,n,r){return this.workerPromise.emit("setLockAction",{docId:t,title:e,type:n,fieldNames:r})},n.VerifySignature=function(t,e,n){return this.workerPromise.emit("VerifySignature",{docId:t,fieldName:e,verifyConfig:n})},n.getDigitalSignatureInfo=function(t,e,n){return this.workerPromise.emit("getDigitalSignatureInfo",{docId:t,fieldName:e,trustedCertificateList:n})},n.verifyDocSignature=function(t,e){return this.workerPromise.emit("verifyDocSignature",{docId:t,verifyConfig:e})},n.verifySignatureLtv=function(t,e,n){return this.workerPromise.emit("verifySignatureLtv",{docId:t,fieldName:e,verifyConfig:n})},n.clearSignature=function(t,e,n){return this.workerPromise.emit("clearSignature",{docId:t,fieldName:e,verifyConfig:n})},n.setImage=function(t,e,n,r){return this.workerPromise.emit("setImage",{docId:t,pageId:e,annotId:n,buffer:r})},n.getWidgetMkOption=function(t,e,n){return this.workerPromise.emit("getWidgetMkOption",{docId:t,pageId:e,annotId:n})},n.setWidgetIconCaptionRelation=function(t,e,n,r){return this.workerPromise.emit("setWidgetIconCaptionRelation",{docId:t,pageId:e,annotId:n,relation:r})},n.setWidgetHighlighting=function(t,e,n,r){return this.workerPromise.emit("setWidgetHighlighting",{docId:t,pageId:e,annotId:n,mode:r})},n.setWidgetMkCaption=function(t,e,n,r,i){return this.workerPromise.emit("setWidgetMkCaption",{docId:t,pageId:e,annotId:n,position:r,caption:i})},n.setWidgetMkIcon=function(t,e,n,r,i){return this.workerPromise.emit("setWidgetMkIcon",{docId:t,pageId:e,annotId:n,position:r,buffer:i})},n.getWidgetIconFitOption=function(t,e,n){return this.workerPromise.emit("getWidgetIconFitOption",{docId:t,pageId:e,annotId:n})},n.setWidgetIconFitOption=function(t,e,n,r){return this.workerPromise.emit("setWidgetIconFitOption",{docId:t,pageId:e,annotId:n,option:r})},n.duplicateWidget=function(t,e,n,r){return this.workerPromise.emit("duplicateWidget",{docId:t,pages:e,fieldName:n,objectNumber:r})},n.duplicateField=function(t,e,n,r,i,o,a){return this.workerPromise.emit("duplicateField",{docId:t,fieldName:e,pageIndex:n,annotObjNum:r,columns:i,rows:o,positions:a})},n.getAllModuleLicenseRight=function(){return this.workerPromise.emit("getAllModuleLicenseRight")},n.ensureSideModeLoaded=function(t){return this.workerPromise.emit("ensureSideModeLoaded",{moduleType:t})},n.moveGraphicsObjectByPosition=function(t,e,n,r,i){return this.workerPromise.emit("moveGraphicsObjectByPosition",{docId:t,pageId:e,id:n,type:r,graphicObjectId:i})},n.setDictionaryEntry=function(t,e,n,r,i){return this.workerPromise.emit("setDictionaryEntry",{docId:t,pageId:e,annotId:n,key:r,value:i})},n.getDictionaryEntry=function(t,e,n,r){return this.workerPromise.emit("getDictionaryEntry",{docId:t,pageId:e,annotId:n,key:r})},n.resetAppearanceStream=function(t,e,n){return this.workerPromise.emit("resetAppearanceStream",{docId:t,pageId:e,annotId:n})},n.setCO=function(t,e){return this.workerPromise.emit("setCO",{docId:t,CO:e})},n.renderTemplatesByObjNum=function(t,e){return this.workerPromise.emit("renderTemplatesByObjNum",{docId:t,objNum:e})},n.getNameTree=function(t,e){return this.workerPromise.emit("getNameTree",{docId:t,type:e})},n.addNameTreeObj=function(t,e,n,r){return this.workerPromise.emit("addNameTreeObj",{docId:t,type:e,name:n,objNum:r})},n.removeNameTreeObj=function(t,e,n){return this.workerPromise.emit("removeNameTreeObj",{docId:t,type:e,name:n})},n.replaceNameTreeObj=function(t,e,n,r){return this.workerPromise.emit("replaceNameTreeObj",{docId:t,type:e,name:n,objNum:r})},n.renameNameTreeObj=function(t,e,n,r){return this.workerPromise.emit("renameNameTreeObj",{docId:t,type:e,oldName:n,newName:r})},n.getPageIndexByObjNum=function(t,e){return this.workerPromise.emit("getPageIndexByObjNum",{docId:t,objNum:e})},n.nameTreeTemplatesToPages=function(t,e){return this.workerPromise.emit("nameTreeTemplatesToPages",{docId:t,name:e})},n.nameTreePagesToTemplates=function(t,e){return this.workerPromise.emit("nameTreePagesToTemplates",{docId:t,name:e})},n.showNameTreePageAtTheEnd=function(t){return this.workerPromise.emit("showNameTreePageAtTheEnd",{docId:t})},n.hideNameTreePage=function(t,e){return this.workerPromise.emit("hideNameTreePage",{docId:t,pageIndex:e})},n.addFileSpec=function(t,e,n,r){return this.workerPromise.emit("addFileSpec",{docId:t,fileName:e,fileBuffer:n,modifiedDateTime:r})},n.setFileSpecDesc=function(t,e,n){return this.workerPromise.emit("setFileSpecDesc",{docId:t,desc:e,objNum:n})},n.getFileSpecStream=function(t,e,n){var r=this.workerPromise.calls(n);return this.workerPromise.emit("getFileSpecStream",{docId:t,fileSpecObjNum:e,writeStreamCall:r})},n.addEmbeddedFileByAttachments=function(t,e,n){return this.workerPromise.emit("addEmbeddedFileByAttachments",{docId:t,name:e,objNum:n})},n.setEmbeddedFileByAttachments=function(t,e,n){return this.workerPromise.emit("setEmbeddedFileByAttachments",{docId:t,name:e,objNum:n})},n.removeEmbeddedFileByAttachments=function(t,e){return this.workerPromise.emit("removeEmbeddedFileByAttachments",{docId:t,name:e})},n.cancelEmbedAllPageThumbnail=function(t){return this.workerPromise.emit("cancelEmbedAllPageThumbnail",{docId:t})},n.cancelRemoveEmbeddedPageThumbnail=function(t){return this.workerPromise.emit("cancelRemoveEmbeddedPageThumbnail",{docId:t})},n.moveControl=function(t,e,n,r){return this.workerPromise.emit("moveControl",{docId:t,fieldId:e,fieldName:n,newName:r})},n.getAnnotIdArrayByOrder=function(t,e){return this.workerPromise.emit("getAnnotIdArrayByOrder",{docId:t,pageId:e})},n.getAAJson=function(t,e){return this.workerPromise.emit("getAAJson",{docId:t,fieldName:e})},n.getPageDictionary=function(t,e){return this.workerPromise.emit("getPageDictionary",{docId:t,pageId:e})},n.getPDFDictInfo=function(t){return this.workerPromise.emit("getPDFDictInfo",{docId:t})},n.startFormDesignerAssit=function(t){return this.workerPromise.emit("startFormDesignerAssit",{docId:t})},n.stopFormDesignerAssit=function(t){return this.workerPromise.emit("stopFormDesignerAssit",{docId:t})},n.getPageLabels=function(t,e){return this.workerPromise.emit("getPageLabels",{docId:t,indexes:e})},n.hasKey=function(t,e,n){return this.workerPromise.emit("hasKey",{docId:t,id:e,key:n})},n.setAt=function(t,e,n,r){return this.workerPromise.emit("setAt",{docId:t,id:e,key:n,value:r})},n.getAt=function(t,e,n){return this.workerPromise.emit("getAt",{docId:t,id:e,key:n})},n.getSuggestedFormDesignerRect=function(t,e,n){return this.workerPromise.emit("getSuggestedFormDesignerRect",{docId:t,pageId:e,point:n})},n.autoRecognitionForm=function(t){return this.workerPromise.emit("autoRecognitionForm",{docId:t})},n.isStaticXFA=function(t){return this.workerPromise.emit("isStaticXFA",{docId:t})},n.isXFA=function(t){return this.workerPromise.emit("isXFA",{docId:t})},n.removeXFA=function(t){return this.workerPromise.emit("removeXFA",{docId:t})},n.createWebLinks=function(t,e,n){return this.workerPromise.emit("createWebLinks",{docId:t,pageId:e,paramPages:n})},n.removeWebLinks=function(t,e,n){return this.workerPromise.emit("removeWebLinks",{docId:t,pageId:e,paramPages:n})},n.linkHasPA=function(t,e,n){return this.workerPromise.emit("linkHasPA",{docId:t,pageId:e,annotId:n})},n.linkResetAByPA=function(t,e,n){return this.workerPromise.emit("linkResetAByPA",{docId:t,pageId:e,annotId:n})},n.getDestinationsArray=function(t){return this.workerPromise.emit("getDestinationsArray",{docId:t})},n.deleteDestination=function(t,e,n){return this.workerPromise.emit("deleteDestination",{docId:t,pageId:e,name:n})},n.renameDestination=function(t,e,n,r){return this.workerPromise.emit("renameDestination",{docId:t,pageId:e,oldName:n,newName:r})},n.createDestination=function(t,e,n,r){return this.workerPromise.emit("createDestination",{docId:t,pageId:e,title:n,pageNum:r})},n.resetDestination=function(t,e,n,r){return this.workerPromise.emit("resetDestination",{docId:t,pageId:e,title:n,pageNum:r})},n.moveBookmark=function(t,e,n,r){return this.workerPromise.emit("moveBookmark",{docId:t,targetBookmarkId:e,destBookmarkId:n,position:r})},n.combineFormsToCSV=function(t,e){var n=this.workerPromise.calls(e);return this.workerPromise.emit("combineFormsToCSV",{filesArray:t,writeStreamCall:n})},n.addAnnotObjects=function(t,e,n){return this.workerPromise.emit("addAnnotObjects",{docId:t,pageId:e,objects:n})},n.reversePages=function(t,e){return this.workerPromise.emit("reversePages",{docId:t,pageRanges:e})},n.movePagesTo=function(t,e,n){return this.workerPromise.emit("movePagesTo",{docId:t,pageRange:e,destIndex:n})},n.removePages=function(t,e){return this.workerPromise.emit("removePages",{docId:t,pageRange:e})},n.insertBlankPages=function(t,e,n,r){return this.workerPromise.emit("insertBlankPages",{docId:t,pageRange:e,width:n,height:r})},n.insertBlankPages2=function(t,e,n,r){return this.workerPromise.emit("insertBlankPages2",{docId:t,pageRange:e,width:n,height:r})},n.rotatePages=function(t,e,n){return this.workerPromise.emit("rotatePages",{docId:t,pageRange:e,rotation:n})},n.getPageIndexByLabelText=function(t,e){return this.workerPromise.emit("getPageIndexByLabelText",{docId:t,text:e})},n.getCurrentPageLabelInfo=function(t,e){return this.workerPromise.emit("getCurrentPageLabelInfo",{docId:t,pageIndex:e})},n.checkDocIsUseLogicPage=function(t){return this.workerPromise.emit("checkDocIsUseLogicPage",{docId:t})},n.formatPageNumbers=function(t,e,n,r){return this.workerPromise.emit("formatPageNumbers",{docId:t,isExtendNumbering:e,pageRange:n,numberingInfo:r})},n.updatePageLabelsByAction=function(t,e,n){return this.workerPromise.emit("updatePageLabelsByAction",{docId:t,action:e,args:n})},n.getPortfolioTreeNode=function(t){return this.workerPromise.emit("getPortfolioTreeNode",{docId:t})},n.getPortfolioInitialNodePath=function(t){return this.workerPromise.emit("getPortfolioInitialNodePath",{docId:t})},n.sendSortFolioParam=function(t,e,n){return this.workerPromise.emit("sendSortFolioParam",{docId:t,target:e,order:n})},n.getFolioNodePDFDoc=function(t){return this.workerPromise.emit("getFolioNodePDFDoc",{docId:t})},n.recordPDFFileByPortFolioNode=function(t,e){return this.workerPromise.emit("recordPDFFileByPortFolioNode",{docId:t,handle:e})},n.getPortfolioFileStream=function(t,e,n){var r=this.workerPromise.calls(n);return this.workerPromise.emit("getPortfolioFileStream",{docId:t,nodeHandle:e,writeStream:r})},n.getPortfolioStream=function(t,e){return this.workerPromise.emit("getPortfolioStream",{docId:t,nodeHandles:e})},n.getPortfolioSubNodes=function(t,e){return this.workerPromise.emit("getPortfolioSubNodes",{docId:t,nodeHandle:e})},n.changePortfolioSubNodesOrder=function(t,e,n,r){return this.workerPromise.emit("changePortfolioSubNodesOrder",{docId:t,nodeHandle:e,sourceIndexes:n,targetIndex:r})},n.portfolioMoveSubNodeToSubFolderNode=function(t,e,n,r){return this.workerPromise.emit("portfolioMoveSubNodeToSubFolderNode",{docId:t,nodeHandle:e,sourceHandles:n,targetHandle:r})},n.portfolioHasSameNameSubNode=function(t,e,n,r){return this.workerPromise.emit("portfolioHasSameNameSubNode",{docId:t,name:e,type:n,targetHandle:r})},n.setPortfolioInitialViewMode=function(t,e){return this.workerPromise.emit("setPortfolioInitialViewMode",{docId:t,value:e})},n.setPortfolioSortingOrder=function(t,e){return this.workerPromise.emit("setPortfolioSortingOrder",{docId:t,bool:e})},n.setPortfolioOrderSchemaField=function(t,e){return this.workerPromise.emit("setPortfolioOrderSchemaField",{docId:t,keyName:e})},n.deletePortfolioSchemaField=function(t,e){return this.workerPromise.emit("deletePortfolioSchemaField",{docId:t,index:e})},n.addPortfolioSchemaField=function(t,e){return this.workerPromise.emit("addPortfolioSchemaField",{docId:t,name:e})},n.changePortfolioSchemaFieldVisible=function(t,e,n){return this.workerPromise.emit("changePortfolioSchemaFieldVisible",{docId:t,index:e,isVisible:n})},n.changePortfolioSchemaFieldPosition=function(t,e,n){return this.workerPromise.emit("changePortfolioSchemaFieldPosition",{docId:t,index:e,offset:n})},n.getPortfolioInfo=function(t){return this.workerPromise.emit("getPortfolioInfo",{docId:t})},n.setPortfolioInfo=function(t,e){return this.workerPromise.emit("setPortfolioInfo",{docId:t,info:e})},n.portfolioAddFiles=function(t,e,n,r){return this.workerPromise.emit("portfolioAddFiles",{docId:t,files:e,targetIndex:n,folderNodeHandle:r})},n.portfolioCreateFolder=function(t,e,n){return this.workerPromise.emit("portfolioCreateFolder",{docId:t,name:e,folderNodeHandle:n})},n.portfolioRemoveSubNodes=function(t,e,n){return this.workerPromise.emit("portfolioRemoveSubNodes",{docId:t,folderNodeHandle:e,subNodeHandles:n})},n.portfolioRegenerateTOC=function(t,e){return this.workerPromise.emit("portfolioRegenerateTOC",{docId:t,title:e})},n.getSnappedPoint=function(t,e,n,r){return this.workerPromise.emit("getSnappedPoint",{docId:t,pageId:e,point:n,mode:r})},n.getPageTextRectCount=function(t,e){return this.workerPromise.emit("getPageTextRectCount",{docId:t,pageId:e})},n.getPageTextByRectIndex=function(t,e,n){return this.workerPromise.emit("getPageTextByRectIndex",{docId:t,pageId:e,rectIndex:n})},n.isCPDF=function(t){return this.workerPromise.emit("isCPDF",{docId:t})},n.getDocURI=function(t){return this.workerPromise.emit("getDocURI",{docId:t})},n.convertToCPDF=function(t,e,n,r,i){return this.workerPromise.emit("convertToCPDF",{docId:t,cPDFFileName:e,cPDFEndPoint:n,cPDFUserToken:r,cPDFUserIDFromToken:i})},n.removeCDocId=function(t,e,n,r,i){return this.workerPromise.emit("removeCDocId",{docId:t,cPDFFileName:e,cPDFEndPoint:n,cPDFUserToken:r,cPDFUserIDFromToken:i})},n.changePEProperty=function(t,e,n,r){return this.workerPromise.emit("changePEProperty",{docId:t,type:n,fn:e,param:r})},n.handlePageEditorEvent=function(t,e,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.workerPromise.emit("handlePageEditorEvent",{docId:t,fn:e,delay:n,args:i})},n.reInitPageEditor=function(t){return this.workerPromise.emit("reInitPageEditor",{docId:t})},n.updateWinlessMatrix=function(t,e,n){return this.workerPromise.emit("updateWinlessMatrix",{docId:t,type:e,matrixes:n})},n.changeEditingProperty=function(t,e,n){return this.workerPromise.emit("changeEditingProperty",{docId:t,fn:e,args:n})},n.triggerPopMenuAction=function(t,e){return this.workerPromise.emit("triggerPopMenuAction",{docId:t,action:e})},n.removeMetadata=function(t,e){return this.workerPromise.emit("removeMetadata",{id:t,key:e})},n.getViewerPreference=function(t){return this.workerPromise.emit("getViewerPreference",{docId:t})},n.setViewPreference=function(t,e,n){return this.workerPromise.emit("setViewPreference",{docId:t,key:e,value:n})},n.handleTouchUpEvent=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.workerPromise.emit("handleTouchUpEvent",{docId:t,fn:e,args:r})},n.handleFindReplaceEvent=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.workerPromise.emit("handleFindReplaceEvent",{docId:t,fn:e,args:r})},n.triggerTUPopMenuAction=function(t,e){return this.workerPromise.emit("triggerTUPopMenuAction",{docId:t,action:e})},n.removeLayerNode=function(t,e){return this.workerPromise.emit("removeLayerNode",{docId:t,layerId:e})},n.getLayersByPage=function(t,e){return this.workerPromise.emit("getLayersByPage",{docId:t,pageId:e})},n.updateLayerInfo=function(t,e){return this.workerPromise.emit("updateLayerInfo",{docId:t,layerInfo:e})},n.flattenLayers=function(t){return this.workerPromise.emit("flattenLayers",{docId:t})},n.mergeLayers=function(t,e,n){return this.workerPromise.emit("mergeLayers",{docId:t,layerIds:e,mergeTo:n})},n.getLayerRelatedAnnots=function(t,e){return this.workerPromise.emit("getLayerRelatedAnnots",{docId:t,layerId:e})},n.layerMoveTo=function(t,e,n,r){return this.workerPromise.emit("layerMoveTo",{docId:t,layerId:e,parentLayerId:n,index:r})},n.getInfos=function(t){return this.workerPromise.emit("getInfos",{docId:t})},n.hasDocIsWrapped=function(t){return this.workerPromise.emit("hasDocIsWrapped",{docId:t})},n.removeMetadata=function(t,e){return this.workerPromise.emit("removeMetadata",{id:t,key:e})},n.getViewerPreference=function(t){return this.workerPromise.emit("getViewerPreference",{docId:t})},n.setViewPreference=function(t,e,n){return this.workerPromise.emit("setViewPreference",{docId:t,key:e,value:n})},n.getInfos=function(t){return this.workerPromise.emit("getInfos",{docId:t})},n.getEmbeddedFontData=function(t){return this.workerPromise.emit("getEmbeddedFontData",{docId:t})},n.computeAuditSpace=function(t){return this.workerPromise.emit("computeAuditSpace",{docId:t})},n.optimizer=function(t,e,n){return this.workerPromise.emit("optimizer",{docId:t,option:e,portfolioNodeHandle:n})},n.optimizeScannedPDF=function(t,e,n){var r=this.workerPromise.calls(n);return this.workerPromise.emit("optimizeScannedPDF",{docId:t,option:e,callback:r})},n.startReplacePages=function(t,e,n,r,i){return this.workerPromise.emit("startReplacePages",{docId:t,startIndex:e,count:n,srcPdfDocId:r,srcPageindexRange:i})},n.importAsLayer=function(t,e){return this.workerPromise.emit("importAsLayer",{docId:t,args:e})},n.previewImportLayer=function(t,e){return this.workerPromise.emit("previewImportLayer",{docId:t,args:e})},n.reloadLayer=function(t){return this.workerPromise.emit("reloadLayer",{docId:t})},n.cloneGraphicObject=function(t,e,n,r){return this.workerPromise.emit("cloneGraphicObject",{docId:t,pageId:e,srcPageId:n,ids:r})},n.compareDoc=function(t){var e={baseDocId:t.baseDocId,basePageCount:t.basePageCount,basePageIndex:t.basePageIndex,baseFileName:t.baseFileName,compareDocId:t.compareDocId,comparedPageCount:t.comparedPageCount,comparePageIndex:t.comparePageIndex,comparePageNum:t.comparePageNum,compareFileName:t.compareFileName,newTemplateId:t.newTemplateId,oldTemplateId:t.oldTemplateId,inputOptions:t.options,compareResultStrings:t.compareResultStrings};return this.workerPromise.emit("compareDoc",{compareDocParam:e})},n.searchDoc=function(t,e,n,r,i){return this.workerPromise.emit("searchDoc",{docId:t,type:e,words:n,flag:r,isForRedact:i})},n.generateDocHash=function(t,e){return this.workerPromise.emit("generateDocHash",{docId:t,buffer:e})},n.assignSignerForESignCN=function(t,e){return this.workerPromise.emit("assignSignerForESignCN",{docId:t,data:e})},n.setESignCNFlowSignMode=function(t,e){return this.workerPromise.emit("setESignCNFlowSignMode",{docId:t,type:e})},n.getESignCNFlowSignMode=function(t){return this.workerPromise.emit("getESignCNFlowSignMode",{docId:t})},n.isESignCNFile=function(t){return this.workerPromise.emit("isESignCNFile",{docId:t})},n.getESignCNMode=function(t,e){return this.workerPromise.emit("getESignCNMode",{docId:t,fieldName:e})},n.isESignCNSignature=function(t,e,n){return this.workerPromise.emit("isESignCNSignature",{docId:t,fieldId:e,pageIndex:n})},n.addAuditTrail=function(t){return this.workerPromise.emit("addAuditTrail",{docId:t})},n.getDocAuditTrail=function(t,e,n){return this.workerPromise.emit("getDocAuditTrail",{docId:t,buffer:e,flowSignAnnots:n})},n.updatePropAuthDictForESignCN=function(t,e,n){return this.workerPromise.emit("updatePropAuthDictForESignCN",{docId:t,fieldName:e,willingnessInfo:n})},n.getAssignInfoForESignCN=function(t){return this.workerPromise.emit("getAssignInfoForESignCN",{docId:t})},n.getOrderOfSignFlowFile=function(t){return this.workerPromise.emit("getOrderOfSignFlowFile",{docId:t})},n.checkFieldWhetherFill=function(t,e){return this.workerPromise.emit("checkFieldWhetherFill",{docId:t,emailValue:e})},n.setSignatureAP=function(t,e,n,r){return this.workerPromise.emit("setSignatureAP",{docId:t,pageIndex:e,annotId:n,inkSignBuffer:r})},n.getFlowSignInfo=function(t){return this.workerPromise.emit("getFlowSignInfo",{docId:t})},n.updateBeadRect=function(t,e,n,r){return this.workerPromise.emit("updateBeadRect",{docId:t,threadObjNum:e,beadObjNum:n,rect:r})},n.insertThread=function(t,e){return this.workerPromise.emit("insertThread",{docId:t,threadInfo:e})},n.updateThread=function(t,e){return this.workerPromise.emit("updateThread",{docId:t,threadInfo:e})},n.removeThread=function(t,e){return this.workerPromise.emit("removeThread",{docId:t,objNum:e})},n.insertBead=function(t,e,n,r,i){return this.workerPromise.emit("insertBead",{docId:t,pageIndex:e,threadObjNum:n,pdfBeadRect:r,beadIndex:i})},n.removeBead=function(t,e,n){return this.workerPromise.emit("removeBead",{docId:t,threadObjNum:e,beadObjNum:n})},n.mergeThread=function(t,e,n){return this.workerPromise.emit("mergeThread",{docId:t,threadObjNum:e,mergeToThreadObjNum:n})},n.normalizePage=function(t,e){return this.workerPromise.emit("normalizePage",{docId:t,pageId:e})},n.getViewportRect=function(t,e){return this.workerPromise.emit("getViewportRect",{docId:t,pageId:e})},n.getMeasureScaleRatio=function(t,e){return this.workerPromise.emit("getMeasureScaleRatio",{docId:t,pageId:e})},n.setMeasureScaleRatio=function(t,e,n,r){return this.workerPromise.emit("setMeasureScaleRatio",{docId:t,pageId:e,storeInPage:n,measureInfo:r})},n.exportMeasureData=function(t,e){return this.workerPromise.emit("exportMeasureData",{docId:t,columnNames:e})},n.setRenderConfigLineWeight=function(t,e){return this.workerPromise.emit("setRenderConfigLineWeight",{docId:t,lineWeight:e})},n.convertToTextMarkup=function(t,e){return this.workerPromise.emit("convertToTextMarkup",{docId:t,findResults:e})},n.redactSearch=function(t,e,n,r,i,o){return this.workerPromise.emit("redactSearch",{docId:t,findResults:e,start:n,count:r,overlayTexts:i,opts:o})},n.setRedactAppearance=function(t,e,n,r){return this.workerPromise.emit("setRedactAppearance",{docId:t,pageId:e,annotId:n,option:r})},n.getCompareFileFilterNums=function(t){return this.workerPromise.emit("getCompareFileFilterNums",{docId:t})},n.getPDFDocFromImageFile=function(t,e){return this.workerPromise.emit("getPDFDocFromImageFile",t,e)},n.isScannedDoc=function(t){return this.workerPromise.emit("isScannedDoc",{docId:t})},n.getPageCountAsync=function(t){return this.workerPromise.emit("getPageCountAsync",{docId:t})},n.getPageTexts=function(t,e,n,r){return this.workerPromise.emit("getPageTexts",{docId:t,pageId:e,settings:n,minWidth:r})},n.hasOwnerPassword=function(t){return this.workerPromise.emit("hasOwnerPassword",{docId:t})},n.removePDFAID=function(t){return this.workerPromise.emit("removePDFAID",{docId:t})},n.setPageTransition=function(t,e,n,r,i){return this.workerPromise.emit("setPageTransition",{docId:t,transName:e,direction:n,speed:r,range:i})},n.getPageTransitionByIndex=function(t,e){return this.workerPromise.emit("getPageTransitionByIndex",{docId:t,pageIndex:e})},n.getText=function(t,e,n,r){var i=this.workerPromise.calls(r);return this.workerPromise.emit("getText",{docId:t,pageRange:e,taskId:n,taskProgress:i})},n.cancelTaskProgress=function(t,e){return this.workerPromise.emit("cancelTaskProgress",{docId:t,taskId:e})},n.isScannedPage=function(t,e){return this.workerPromise.emit("isScannedPage",{docId:t,pageId:e})},n.createSummarizeComments=function(t,e,n){var r=this.workerPromise.calls(e);return this.workerPromise.emit("createSummarizeComments",{docId:t,param:n,writeStream:r})},n.getPageTransition=function(t,e){return this.workerPromise.emit("getPageTransition",{docId:t,pageId:e})},n.hiddenDataSanitizeDocument=function(t){return this.workerPromise.emit("hiddenDataSanitizeDocument",{docId:t})},n.hiddenDataRemoveHiddenInfo=function(t,e){return this.workerPromise.emit("hiddenDataRemoveHiddenInfo",{docId:t,options:e})},n.cacheFontConfig=function(t,e,n){return this.workerPromise.emit("cacheFontConfig",{fontServerRoot:t,notExistFonts:e,customUploadFonts:n})},n.getFxcoreFontList=function(){return this.workerPromise.emit("getFxcoreFontList")},n.getPureTexts=function(t,e){return this.workerPromise.emit("getPureTexts",{docId:t,pageId:e})},n.getFATLAndEUTLList=function(t,e){return this.workerPromise.emit("getFATLAndEUTLList",{urls:t,isUpdate:e})},n.getTextInRect=function(t,e,n,r){return this.workerPromise.emit("getTextInRect",{docId:t,pageId:e,rect:n,type:r})},n.getRichText=function(t,e,n){return this.workerPromise.emit("getRichText",{docId:t,pageId:e,annotId:n})},n.setRichText=function(t,e,n,r){return this.workerPromise.emit("setRichText",{docId:t,pageId:e,annotId:n,datas:r})},n.addRichText=function(t,e,n,r){return this.workerPromise.emit("addRichText",{docId:t,pageId:e,annotId:n,datas:r})},n.insertRichText=function(t,e,n,r){return this.workerPromise.emit("insertRichText",{docId:t,pageId:e,annotId:n,datas:r})},n.removeRichText=function(t,e,n,r){return this.workerPromise.emit("removeRichText",{docId:t,pageId:e,annotId:n,indexes:r})},n.previewIconDoc=function(t){return this.workerPromise.emit("previewIconDoc",{icon:t})},n.transformPage=function(t,e,n){return this.workerPromise.emit("transformPage",{docId:t,pageId:e,options:n})},n.getSignatureBitmap=function(t,e){return this.workerPromise.emit("getSignatureBitmap",{docId:t,fieldName:e})},e}(u.a);function v(t){t.on("wasmBinary",(function(t){localStorage.setItem(p,t)})),t.on("asmMem",(function(t){localStorage.setItem("FoxitPDFSDKForWeb_JREngineCache_asmMem",t)})),t.on("asmJs",(function(t){localStorage.setItem("FoxitPDFSDKForWeb_JREngineCache_asmJs",t)}))}var m=function(t){return function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).api=new g(e),r}i()(e,t);var n=e.prototype;return n.registerSecurityCallback=function(t,e){return this.api.registerSecurityCallback(t,e)},n.setFontMap=function(t){return this.api.setFontMap(t)},n.setWatermarkFontMap=function(t){return this.api.setWatermarkFontMap(t)},n.addFontMap=function(t){return this.api.addFontMap(t)},n.setJPXDownSample=function(t){return this.api.setJPXDownSample(t)},n.cacheFontConfig=function(t,e,n){return this.api.cacheFontConfig(t,e,n)},n.getFxcoreFontList=function(){return this.api.getFxcoreFontList()},n.getFATLAndEUTLList=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.api.getFATLAndEUTLList(t,e)},e}(t)};e.default=m}])}));