<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Foxit PDF SDK</title>
		<link rel="stylesheet" type="text/css" href="./lib/UIExtension.css">
		<meta charset="utf-8">
		<style>
			.fv__ui-tab-nav li span {
				color: #636363;
			}

			.flex-row {
				display: flex;
				flex-direction: row;
			}
		</style>
		<!-- ignore other unimportant code -->
	</head>

	 <body>
    <div id="pdf-viewer"></div>
    <script src="./js/license-key.js"></script>
    <!-- Add PATH to license key here -->
    <script src="./lib/PDFViewCtrl.full.js"></script>
    <!-- Add PATH to PDFViewCtrl.full.js -->

    <script>
        window.$ = PDFViewCtrl.jQuery;
        let IStateHandler = PDFViewCtrl.IStateHandler;
        var PDFViewer = PDFViewCtrl.PDFViewer;
        var pdfViewer = new PDFViewer({
            libPath: './lib',
            // Add PATH to lib
            jr:  {
                licenseSN: "qBMF6Omj6zYnOGIfjWQqYdB1XcQmjT1WR8MSYvuYKw+2gyx8Wr0DEw==",
                licenseKey: "PjwcmTSwMVyob7urGyG0AlYv0yI33y77QY43gyne6K7urAri1TjwEpz4KItLxaQ5qY0MALKdIYTKJk85ICL4UNXcjuTppp/zPFdMpo71mfesRLbMBPhKvy5c9xVGWGXDhpZ8/4CtyQl75JaSW9KADBCEb4+HlaM6e9Ml7fkujBL2cVGVYU71crn65nxGHqCMWAZFBeQ01MR0lYCnhkMba9jsvPH6mnDQP3zDlQLrVTkY294LJ3ZNQmf/Lyq2EnSI3hlzpw+uIKyyUBJj1ZMjHkZbKHWopn3j7iElI7fhxeP88pG2nlFEJgvb0z1KvCjvrkVEZoElVmIzS32mdYWPFUwckz30O5VsNfe/FFnTp8pcVvmbL7sljDjUOGVhDJCT95F/qOvH1Yz60Zwk4RvJeYYiekRrdjpHcmdIa8NVkR/BB+tiS8Laa9mHHozDrYN6jE4AYagP/GwkU+jvUPgEWRXDPJhPkbZGAEioxeSFkrTq7B7DNmFn9pdeEe5l9BXLgvCQKXybaZ3N82/I4m80Byb8DcpCOTii6jaUo3QbjUa0613vIk1UCPVNs7PdJazckwqLXsSu/KfPS0MWGc6fz+8YyUVSKUFLRd+SeT4nT6ZeD3e26EhFZfoE9eHbhfJGrIgfb8/W3ODvJO0iUMuqV1LvlU1w7e8rVwcP805B3RVrbti1ARt9gP0x/R5l4wZ4s4S67x+HIfNND1GMx6kbxv/CUW3NbwDDWAvbj6mlrD+t2wqwDQjNzgikED9LN5mKNHzLjclVy+tfyKd0IKSqFJzAjozPdMuD/6IIhv/raDl3UkCa59arVLwqGVXB0eACZqJNgDL9eeHVGh86VHLqJzJ0LvDTZ4aROehLAZJt4SD6zCvUNLPIFaExMuAuqegX2K/Ul6YcDdvS7TdS4MbnCYKn8XFhggxvftN3LTmO0g/XwXnYLxmsGxwjgRoFSBzkiDtT74ny/PRK0TskRzDo6FJ2gQCzfaJ3nUQMmLMJotj3XdEM+0w394gCkyj3zJqZRKkn9id6zOfso7p2+S7drbEFmwFvM5ubOYwyywvEJT0AZjH9YzBolbUnPwMwsySbBFOx5Jvg1Gh2FojYHxa55bohIKY4azqchUmwkPoh/TUPr6F9x+kA6FvxeLalxFPUVVzGvwMZx28gCvCIsT4NfifUloMvd0hIJ+AxrYsYAFi4rPGUSDEflj3hk9djDA8R+V+21uHIVfgtmJj1mOk7Zx4gxsyC9XL7B59R",
            }
        });
        pdfViewer.init('#pdf-viewer');
        var xhr = new XMLHttpRequest();
        xhr.open('GET', './sample_PDF.pdf', true);
        xhr.responseType = 'blob';
        xhr.onreadystatechange = function () {
            if (xhr.readyState !== 4) {
                return;
            }
            var status = xhr.status;
            if ((status >= 200 && status < 300) || status === 304) {
                pdfViewer.openPDFByFile(xhr.response);
            }
        };
        xhr.send();
        var FieldTypes = PDFViewCtrl.PDF.form.constant.Field_Type;

        var formfiledsJson = [{
            pageIndex: 0, fieldName: 'newPushButton', fieldType: FieldTypes.PushButton, rect: {
                left: 100,
                right: 150,
                top: 530,
                bottom: 500,
            }
        },
        {
            pageIndex: 0, fieldName: 'newCheckBox', fieldType: FieldTypes.CheckBox, rect: {
                left: 200,
                right: 250,
                top: 530,
                bottom: 500,
            }
        },
        {
            pageIndex: 0, fieldName: 'newRadioButton', fieldType: FieldTypes.RadioButton, rect: {
                left: 300,
                right: 380,
                top: 530,
                bottom: 500,
            }
        },
        {
            pageIndex: 0, fieldName: 'newComboBox', fieldType: FieldTypes.ComboBox, rect: {
                left: 400,
                right: 460,
                top: 530,
                bottom: 500,
            }
        },
        {
            pageIndex: 0, fieldName: 'newListBox', fieldType: FieldTypes.ListBox, rect: {
                left: 500,
                right: 560,
                top: 530,
                bottom: 430,
            }
        },
        {
            pageIndex: 0, fieldName: 'newText', fieldType: FieldTypes.Text, rect: {
                left: 600,
                right: 660,
                top: 530,
                bottom: 500,
            }
        }];
        pdfViewer.getEventEmitter().on(PDFViewCtrl.Events.openFileSuccess, function (PDFDoc) {
            PDFDoc.loadPDFForm().then(function (PDFForm) {
                PDFDoc.getPDFForm();
                var taskList = []
                formfiledsJson.map(function (json) {
                    //PDFForm.addControl()  will create field if no field with same name exists.
                    taskList.push(PDFForm.addControl(json.pageIndex, json.fieldName, json.fieldType, json.rect));
                });
                Promise.all(taskList).then(function (results) {
                    results.map(function (result,index) {
                        if(!result){
                            console.error("can't add control");
                            return;
                        }
                        var field = PDFForm.getField(formfiledsJson[index].fieldName)
                        // set field's properties (refer to api documents):
                        field.setAction (type, data)
                        field.setAlignment (alignment)
                        field.setBorderColor (borderColor)
                        field.setBorderStyle (strStyle)
                        field.setFillColor (fillColor)
                        field.setMaxLength (maxLength)
                        if (field.getType() == FieldTypes.ComboBox ||
                            field.getType() == FieldTypes.ListBox
                        ) {
                            field.setOptions([
                                { label: '10', value: '10', selected: true, defaultSelected: true },
                                { label: '20', value: '20', selected: false, defaultSelected: false },
                                { label: '30', value: '30', selected: false, defaultSelected: false },
                                { label: '40', value: '40', selected: false, defaultSelected: false }]);
                        }
                        // field.setValue (value='', control=null)
                    })
                });
            })
        })
    </script>
</body>

</html>